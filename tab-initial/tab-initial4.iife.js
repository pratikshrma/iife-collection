(function(){"use strict";try{if(typeof document<"u"){var e=document.createElement("style");e.appendChild(document.createTextNode("html{scroll-behavior:smooth}html,body,#root{width:100%;margin:0;padding:0;overflow-x:hidden;-ms-overflow-style:none;scrollbar-width:none}html::-webkit-scrollbar,body::-webkit-scrollbar{display:none}body{background:#171720}")),document.head.appendChild(e)}}catch(o){console.error("vite-plugin-css-injected-by-js",o)}})();
(function(){"use strict";function dN(n,e){for(var t=0;t<e.length;t++){const i=e[t];if(typeof i!="string"&&!Array.isArray(i)){for(const a in i)if(a!=="default"&&!(a in n)){const s=Object.getOwnPropertyDescriptor(i,a);s&&Object.defineProperty(n,a,s.get?s:{enumerable:!0,get:()=>i[a]})}}}return Object.freeze(Object.defineProperty(n,Symbol.toStringTag,{value:"Module"}))}function Xu(n){return n&&n.__esModule&&Object.prototype.hasOwnProperty.call(n,"default")?n.default:n}var wb={exports:{}},Kp={};var EE;function pN(){if(EE)return Kp;EE=1;var n=Symbol.for("react.transitional.element"),e=Symbol.for("react.fragment");function t(i,a,s){var l=null;if(s!==void 0&&(l=""+s),a.key!==void 0&&(l=""+a.key),"key"in a){s={};for(var c in a)c!=="key"&&(s[c]=a[c])}else s=a;return a=s.ref,{$$typeof:n,type:i,key:l,ref:a!==void 0?a:null,props:s}}return Kp.Fragment=e,Kp.jsx=t,Kp.jsxs=t,Kp}var TE;function mN(){return TE||(TE=1,wb.exports=pN()),wb.exports}var dt=mN(),Bb={exports:{}},Qt={};var CE;function gN(){if(CE)return Qt;CE=1;var n=Symbol.for("react.transitional.element"),e=Symbol.for("react.portal"),t=Symbol.for("react.fragment"),i=Symbol.for("react.strict_mode"),a=Symbol.for("react.profiler"),s=Symbol.for("react.consumer"),l=Symbol.for("react.context"),c=Symbol.for("react.forward_ref"),d=Symbol.for("react.suspense"),p=Symbol.for("react.memo"),g=Symbol.for("react.lazy"),v=Symbol.for("react.activity"),_=Symbol.iterator;function x(q){return q===null||typeof q!="object"?null:(q=_&&q[_]||q["@@iterator"],typeof q=="function"?q:null)}var S={isMounted:function(){return!1},enqueueForceUpdate:function(){},enqueueReplaceState:function(){},enqueueSetState:function(){}},C=Object.assign,T={};function M(q,ce,Te){this.props=q,this.context=ce,this.refs=T,this.updater=Te||S}M.prototype.isReactComponent={},M.prototype.setState=function(q,ce){if(typeof q!="object"&&typeof q!="function"&&q!=null)throw Error("takes an object of state variables to update or a function which returns an object of state variables.");this.updater.enqueueSetState(this,q,ce,"setState")},M.prototype.forceUpdate=function(q){this.updater.enqueueForceUpdate(this,q,"forceUpdate")};function w(){}w.prototype=M.prototype;function B(q,ce,Te){this.props=q,this.context=ce,this.refs=T,this.updater=Te||S}var D=B.prototype=new w;D.constructor=B,C(D,M.prototype),D.isPureReactComponent=!0;var P=Array.isArray;function U(){}var z={H:null,A:null,T:null,S:null},j=Object.prototype.hasOwnProperty;function L(q,ce,Te){var De=Te.ref;return{$$typeof:n,type:q,key:ce,ref:De!==void 0?De:null,props:Te}}function F(q,ce){return L(q.type,ce,q.props)}function W(q){return typeof q=="object"&&q!==null&&q.$$typeof===n}function te(q){var ce={"=":"=0",":":"=2"};return"$"+q.replace(/[=:]/g,function(Te){return ce[Te]})}var $=/\/+/g;function ae(q,ce){return typeof q=="object"&&q!==null&&q.key!=null?te(""+q.key):ce.toString(36)}function le(q){switch(q.status){case"fulfilled":return q.value;case"rejected":throw q.reason;default:switch(typeof q.status=="string"?q.then(U,U):(q.status="pending",q.then(function(ce){q.status==="pending"&&(q.status="fulfilled",q.value=ce)},function(ce){q.status==="pending"&&(q.status="rejected",q.reason=ce)})),q.status){case"fulfilled":return q.value;case"rejected":throw q.reason}}throw q}function G(q,ce,Te,De,qe){var ge=typeof q;(ge==="undefined"||ge==="boolean")&&(q=null);var Ee=!1;if(q===null)Ee=!0;else switch(ge){case"bigint":case"string":case"number":Ee=!0;break;case"object":switch(q.$$typeof){case n:case e:Ee=!0;break;case g:return Ee=q._init,G(Ee(q._payload),ce,Te,De,qe)}}if(Ee)return qe=qe(q),Ee=De===""?"."+ae(q,0):De,P(qe)?(Te="",Ee!=null&&(Te=Ee.replace($,"$&/")+"/"),G(qe,ce,Te,"",function(ot){return ot})):qe!=null&&(W(qe)&&(qe=F(qe,Te+(qe.key==null||q&&q.key===qe.key?"":(""+qe.key).replace($,"$&/")+"/")+Ee)),ce.push(qe)),1;Ee=0;var Xe=De===""?".":De+":";if(P(q))for(var tt=0;tt<q.length;tt++)De=q[tt],ge=Xe+ae(De,tt),Ee+=G(De,ce,Te,ge,qe);else if(tt=x(q),typeof tt=="function")for(q=tt.call(q),tt=0;!(De=q.next()).done;)De=De.value,ge=Xe+ae(De,tt++),Ee+=G(De,ce,Te,ge,qe);else if(ge==="object"){if(typeof q.then=="function")return G(le(q),ce,Te,De,qe);throw ce=String(q),Error("Objects are not valid as a React child (found: "+(ce==="[object Object]"?"object with keys {"+Object.keys(q).join(", ")+"}":ce)+"). If you meant to render a collection of children, use an array instead.")}return Ee}function J(q,ce,Te){if(q==null)return q;var De=[],qe=0;return G(q,De,"","",function(ge){return ce.call(Te,ge,qe++)}),De}function Z(q){if(q._status===-1){var ce=q._result;ce=ce(),ce.then(function(Te){(q._status===0||q._status===-1)&&(q._status=1,q._result=Te)},function(Te){(q._status===0||q._status===-1)&&(q._status=2,q._result=Te)}),q._status===-1&&(q._status=0,q._result=ce)}if(q._status===1)return q._result.default;throw q._result}var pe=typeof reportError=="function"?reportError:function(q){if(typeof window=="object"&&typeof window.ErrorEvent=="function"){var ce=new window.ErrorEvent("error",{bubbles:!0,cancelable:!0,message:typeof q=="object"&&q!==null&&typeof q.message=="string"?String(q.message):String(q),error:q});if(!window.dispatchEvent(ce))return}else if(typeof process=="object"&&typeof process.emit=="function"){process.emit("uncaughtException",q);return}console.error(q)},_e={map:J,forEach:function(q,ce,Te){J(q,function(){ce.apply(this,arguments)},Te)},count:function(q){var ce=0;return J(q,function(){ce++}),ce},toArray:function(q){return J(q,function(ce){return ce})||[]},only:function(q){if(!W(q))throw Error("React.Children.only expected to receive a single React element child.");return q}};return Qt.Activity=v,Qt.Children=_e,Qt.Component=M,Qt.Fragment=t,Qt.Profiler=a,Qt.PureComponent=B,Qt.StrictMode=i,Qt.Suspense=d,Qt.__CLIENT_INTERNALS_DO_NOT_USE_OR_WARN_USERS_THEY_CANNOT_UPGRADE=z,Qt.__COMPILER_RUNTIME={__proto__:null,c:function(q){return z.H.useMemoCache(q)}},Qt.cache=function(q){return function(){return q.apply(null,arguments)}},Qt.cacheSignal=function(){return null},Qt.cloneElement=function(q,ce,Te){if(q==null)throw Error("The argument must be a React element, but you passed "+q+".");var De=C({},q.props),qe=q.key;if(ce!=null)for(ge in ce.key!==void 0&&(qe=""+ce.key),ce)!j.call(ce,ge)||ge==="key"||ge==="__self"||ge==="__source"||ge==="ref"&&ce.ref===void 0||(De[ge]=ce[ge]);var ge=arguments.length-2;if(ge===1)De.children=Te;else if(1<ge){for(var Ee=Array(ge),Xe=0;Xe<ge;Xe++)Ee[Xe]=arguments[Xe+2];De.children=Ee}return L(q.type,qe,De)},Qt.createContext=function(q){return q={$$typeof:l,_currentValue:q,_currentValue2:q,_threadCount:0,Provider:null,Consumer:null},q.Provider=q,q.Consumer={$$typeof:s,_context:q},q},Qt.createElement=function(q,ce,Te){var De,qe={},ge=null;if(ce!=null)for(De in ce.key!==void 0&&(ge=""+ce.key),ce)j.call(ce,De)&&De!=="key"&&De!=="__self"&&De!=="__source"&&(qe[De]=ce[De]);var Ee=arguments.length-2;if(Ee===1)qe.children=Te;else if(1<Ee){for(var Xe=Array(Ee),tt=0;tt<Ee;tt++)Xe[tt]=arguments[tt+2];qe.children=Xe}if(q&&q.defaultProps)for(De in Ee=q.defaultProps,Ee)qe[De]===void 0&&(qe[De]=Ee[De]);return L(q,ge,qe)},Qt.createRef=function(){return{current:null}},Qt.forwardRef=function(q){return{$$typeof:c,render:q}},Qt.isValidElement=W,Qt.lazy=function(q){return{$$typeof:g,_payload:{_status:-1,_result:q},_init:Z}},Qt.memo=function(q,ce){return{$$typeof:p,type:q,compare:ce===void 0?null:ce}},Qt.startTransition=function(q){var ce=z.T,Te={};z.T=Te;try{var De=q(),qe=z.S;qe!==null&&qe(Te,De),typeof De=="object"&&De!==null&&typeof De.then=="function"&&De.then(U,pe)}catch(ge){pe(ge)}finally{ce!==null&&Te.types!==null&&(ce.types=Te.types),z.T=ce}},Qt.unstable_useCacheRefresh=function(){return z.H.useCacheRefresh()},Qt.use=function(q){return z.H.use(q)},Qt.useActionState=function(q,ce,Te){return z.H.useActionState(q,ce,Te)},Qt.useCallback=function(q,ce){return z.H.useCallback(q,ce)},Qt.useContext=function(q){return z.H.useContext(q)},Qt.useDebugValue=function(){},Qt.useDeferredValue=function(q,ce){return z.H.useDeferredValue(q,ce)},Qt.useEffect=function(q,ce){return z.H.useEffect(q,ce)},Qt.useEffectEvent=function(q){return z.H.useEffectEvent(q)},Qt.useId=function(){return z.H.useId()},Qt.useImperativeHandle=function(q,ce,Te){return z.H.useImperativeHandle(q,ce,Te)},Qt.useInsertionEffect=function(q,ce){return z.H.useInsertionEffect(q,ce)},Qt.useLayoutEffect=function(q,ce){return z.H.useLayoutEffect(q,ce)},Qt.useMemo=function(q,ce){return z.H.useMemo(q,ce)},Qt.useOptimistic=function(q,ce){return z.H.useOptimistic(q,ce)},Qt.useReducer=function(q,ce,Te){return z.H.useReducer(q,ce,Te)},Qt.useRef=function(q){return z.H.useRef(q)},Qt.useState=function(q){return z.H.useState(q)},Qt.useSyncExternalStore=function(q,ce,Te){return z.H.useSyncExternalStore(q,ce,Te)},Qt.useTransition=function(){return z.H.useTransition()},Qt.version="19.2.3",Qt}var RE;function Ch(){return RE||(RE=1,Bb.exports=gN()),Bb.exports}var H=Ch();const ee=Xu(H),Db=dN({__proto__:null,default:ee},[H]);var Ob={exports:{}},Qp={},Nb={exports:{}},Ub={};var wE;function vN(){return wE||(wE=1,(function(n){function e(G,J){var Z=G.length;G.push(J);e:for(;0<Z;){var pe=Z-1>>>1,_e=G[pe];if(0<a(_e,J))G[pe]=J,G[Z]=_e,Z=pe;else break e}}function t(G){return G.length===0?null:G[0]}function i(G){if(G.length===0)return null;var J=G[0],Z=G.pop();if(Z!==J){G[0]=Z;e:for(var pe=0,_e=G.length,q=_e>>>1;pe<q;){var ce=2*(pe+1)-1,Te=G[ce],De=ce+1,qe=G[De];if(0>a(Te,Z))De<_e&&0>a(qe,Te)?(G[pe]=qe,G[De]=Z,pe=De):(G[pe]=Te,G[ce]=Z,pe=ce);else if(De<_e&&0>a(qe,Z))G[pe]=qe,G[De]=Z,pe=De;else break e}}return J}function a(G,J){var Z=G.sortIndex-J.sortIndex;return Z!==0?Z:G.id-J.id}if(n.unstable_now=void 0,typeof performance=="object"&&typeof performance.now=="function"){var s=performance;n.unstable_now=function(){return s.now()}}else{var l=Date,c=l.now();n.unstable_now=function(){return l.now()-c}}var d=[],p=[],g=1,v=null,_=3,x=!1,S=!1,C=!1,T=!1,M=typeof setTimeout=="function"?setTimeout:null,w=typeof clearTimeout=="function"?clearTimeout:null,B=typeof setImmediate<"u"?setImmediate:null;function D(G){for(var J=t(p);J!==null;){if(J.callback===null)i(p);else if(J.startTime<=G)i(p),J.sortIndex=J.expirationTime,e(d,J);else break;J=t(p)}}function P(G){if(C=!1,D(G),!S)if(t(d)!==null)S=!0,U||(U=!0,te());else{var J=t(p);J!==null&&le(P,J.startTime-G)}}var U=!1,z=-1,j=5,L=-1;function F(){return T?!0:!(n.unstable_now()-L<j)}function W(){if(T=!1,U){var G=n.unstable_now();L=G;var J=!0;try{e:{S=!1,C&&(C=!1,w(z),z=-1),x=!0;var Z=_;try{t:{for(D(G),v=t(d);v!==null&&!(v.expirationTime>G&&F());){var pe=v.callback;if(typeof pe=="function"){v.callback=null,_=v.priorityLevel;var _e=pe(v.expirationTime<=G);if(G=n.unstable_now(),typeof _e=="function"){v.callback=_e,D(G),J=!0;break t}v===t(d)&&i(d),D(G)}else i(d);v=t(d)}if(v!==null)J=!0;else{var q=t(p);q!==null&&le(P,q.startTime-G),J=!1}}break e}finally{v=null,_=Z,x=!1}J=void 0}}finally{J?te():U=!1}}}var te;if(typeof B=="function")te=function(){B(W)};else if(typeof MessageChannel<"u"){var $=new MessageChannel,ae=$.port2;$.port1.onmessage=W,te=function(){ae.postMessage(null)}}else te=function(){M(W,0)};function le(G,J){z=M(function(){G(n.unstable_now())},J)}n.unstable_IdlePriority=5,n.unstable_ImmediatePriority=1,n.unstable_LowPriority=4,n.unstable_NormalPriority=3,n.unstable_Profiling=null,n.unstable_UserBlockingPriority=2,n.unstable_cancelCallback=function(G){G.callback=null},n.unstable_forceFrameRate=function(G){0>G||125<G?console.error("forceFrameRate takes a positive int between 0 and 125, forcing frame rates higher than 125 fps is not supported"):j=0<G?Math.floor(1e3/G):5},n.unstable_getCurrentPriorityLevel=function(){return _},n.unstable_next=function(G){switch(_){case 1:case 2:case 3:var J=3;break;default:J=_}var Z=_;_=J;try{return G()}finally{_=Z}},n.unstable_requestPaint=function(){T=!0},n.unstable_runWithPriority=function(G,J){switch(G){case 1:case 2:case 3:case 4:case 5:break;default:G=3}var Z=_;_=G;try{return J()}finally{_=Z}},n.unstable_scheduleCallback=function(G,J,Z){var pe=n.unstable_now();switch(typeof Z=="object"&&Z!==null?(Z=Z.delay,Z=typeof Z=="number"&&0<Z?pe+Z:pe):Z=pe,G){case 1:var _e=-1;break;case 2:_e=250;break;case 5:_e=1073741823;break;case 4:_e=1e4;break;default:_e=5e3}return _e=Z+_e,G={id:g++,callback:J,priorityLevel:G,startTime:Z,expirationTime:_e,sortIndex:-1},Z>pe?(G.sortIndex=Z,e(p,G),t(d)===null&&G===t(p)&&(C?(w(z),z=-1):C=!0,le(P,Z-pe))):(G.sortIndex=_e,e(d,G),S||x||(S=!0,U||(U=!0,te()))),G},n.unstable_shouldYield=F,n.unstable_wrapCallback=function(G){var J=_;return function(){var Z=_;_=J;try{return G.apply(this,arguments)}finally{_=Z}}}})(Ub)),Ub}var BE;function yN(){return BE||(BE=1,Nb.exports=vN()),Nb.exports}var Lb={exports:{}},Na={};var DE;function _N(){if(DE)return Na;DE=1;var n=Ch();function e(d){var p="https://react.dev/errors/"+d;if(1<arguments.length){p+="?args[]="+encodeURIComponent(arguments[1]);for(var g=2;g<arguments.length;g++)p+="&args[]="+encodeURIComponent(arguments[g])}return"Minified React error #"+d+"; visit "+p+" for the full message or use the non-minified dev environment for full errors and additional helpful warnings."}function t(){}var i={d:{f:t,r:function(){throw Error(e(522))},D:t,C:t,L:t,m:t,X:t,S:t,M:t},p:0,findDOMNode:null},a=Symbol.for("react.portal");function s(d,p,g){var v=3<arguments.length&&arguments[3]!==void 0?arguments[3]:null;return{$$typeof:a,key:v==null?null:""+v,children:d,containerInfo:p,implementation:g}}var l=n.__CLIENT_INTERNALS_DO_NOT_USE_OR_WARN_USERS_THEY_CANNOT_UPGRADE;function c(d,p){if(d==="font")return"";if(typeof p=="string")return p==="use-credentials"?p:""}return Na.__DOM_INTERNALS_DO_NOT_USE_OR_WARN_USERS_THEY_CANNOT_UPGRADE=i,Na.createPortal=function(d,p){var g=2<arguments.length&&arguments[2]!==void 0?arguments[2]:null;if(!p||p.nodeType!==1&&p.nodeType!==9&&p.nodeType!==11)throw Error(e(299));return s(d,p,null,g)},Na.flushSync=function(d){var p=l.T,g=i.p;try{if(l.T=null,i.p=2,d)return d()}finally{l.T=p,i.p=g,i.d.f()}},Na.preconnect=function(d,p){typeof d=="string"&&(p?(p=p.crossOrigin,p=typeof p=="string"?p==="use-credentials"?p:"":void 0):p=null,i.d.C(d,p))},Na.prefetchDNS=function(d){typeof d=="string"&&i.d.D(d)},Na.preinit=function(d,p){if(typeof d=="string"&&p&&typeof p.as=="string"){var g=p.as,v=c(g,p.crossOrigin),_=typeof p.integrity=="string"?p.integrity:void 0,x=typeof p.fetchPriority=="string"?p.fetchPriority:void 0;g==="style"?i.d.S(d,typeof p.precedence=="string"?p.precedence:void 0,{crossOrigin:v,integrity:_,fetchPriority:x}):g==="script"&&i.d.X(d,{crossOrigin:v,integrity:_,fetchPriority:x,nonce:typeof p.nonce=="string"?p.nonce:void 0})}},Na.preinitModule=function(d,p){if(typeof d=="string")if(typeof p=="object"&&p!==null){if(p.as==null||p.as==="script"){var g=c(p.as,p.crossOrigin);i.d.M(d,{crossOrigin:g,integrity:typeof p.integrity=="string"?p.integrity:void 0,nonce:typeof p.nonce=="string"?p.nonce:void 0})}}else p==null&&i.d.M(d)},Na.preload=function(d,p){if(typeof d=="string"&&typeof p=="object"&&p!==null&&typeof p.as=="string"){var g=p.as,v=c(g,p.crossOrigin);i.d.L(d,g,{crossOrigin:v,integrity:typeof p.integrity=="string"?p.integrity:void 0,nonce:typeof p.nonce=="string"?p.nonce:void 0,type:typeof p.type=="string"?p.type:void 0,fetchPriority:typeof p.fetchPriority=="string"?p.fetchPriority:void 0,referrerPolicy:typeof p.referrerPolicy=="string"?p.referrerPolicy:void 0,imageSrcSet:typeof p.imageSrcSet=="string"?p.imageSrcSet:void 0,imageSizes:typeof p.imageSizes=="string"?p.imageSizes:void 0,media:typeof p.media=="string"?p.media:void 0})}},Na.preloadModule=function(d,p){if(typeof d=="string")if(p){var g=c(p.as,p.crossOrigin);i.d.m(d,{as:typeof p.as=="string"&&p.as!=="script"?p.as:void 0,crossOrigin:g,integrity:typeof p.integrity=="string"?p.integrity:void 0})}else i.d.m(d)},Na.requestFormReset=function(d){i.d.r(d)},Na.unstable_batchedUpdates=function(d,p){return d(p)},Na.useFormState=function(d,p,g){return l.H.useFormState(d,p,g)},Na.useFormStatus=function(){return l.H.useHostTransitionStatus()},Na.version="19.2.3",Na}var OE;function NE(){if(OE)return Lb.exports;OE=1;function n(){if(!(typeof __REACT_DEVTOOLS_GLOBAL_HOOK__>"u"||typeof __REACT_DEVTOOLS_GLOBAL_HOOK__.checkDCE!="function"))try{__REACT_DEVTOOLS_GLOBAL_HOOK__.checkDCE(n)}catch(e){console.error(e)}}return n(),Lb.exports=_N(),Lb.exports}var UE;function xN(){if(UE)return Qp;UE=1;var n=yN(),e=Ch(),t=NE();function i(r){var o="https://react.dev/errors/"+r;if(1<arguments.length){o+="?args[]="+encodeURIComponent(arguments[1]);for(var h=2;h<arguments.length;h++)o+="&args[]="+encodeURIComponent(arguments[h])}return"Minified React error #"+r+"; visit "+o+" for the full message or use the non-minified dev environment for full errors and additional helpful warnings."}function a(r){return!(!r||r.nodeType!==1&&r.nodeType!==9&&r.nodeType!==11)}function s(r){var o=r,h=r;if(r.alternate)for(;o.return;)o=o.return;else{r=o;do o=r,(o.flags&4098)!==0&&(h=o.return),r=o.return;while(r)}return o.tag===3?h:null}function l(r){if(r.tag===13){var o=r.memoizedState;if(o===null&&(r=r.alternate,r!==null&&(o=r.memoizedState)),o!==null)return o.dehydrated}return null}function c(r){if(r.tag===31){var o=r.memoizedState;if(o===null&&(r=r.alternate,r!==null&&(o=r.memoizedState)),o!==null)return o.dehydrated}return null}function d(r){if(s(r)!==r)throw Error(i(188))}function p(r){var o=r.alternate;if(!o){if(o=s(r),o===null)throw Error(i(188));return o!==r?null:r}for(var h=r,m=o;;){var b=h.return;if(b===null)break;var E=b.alternate;if(E===null){if(m=b.return,m!==null){h=m;continue}break}if(b.child===E.child){for(E=b.child;E;){if(E===h)return d(b),r;if(E===m)return d(b),o;E=E.sibling}throw Error(i(188))}if(h.return!==m.return)h=b,m=E;else{for(var N=!1,X=b.child;X;){if(X===h){N=!0,h=b,m=E;break}if(X===m){N=!0,m=b,h=E;break}X=X.sibling}if(!N){for(X=E.child;X;){if(X===h){N=!0,h=E,m=b;break}if(X===m){N=!0,m=E,h=b;break}X=X.sibling}if(!N)throw Error(i(189))}}if(h.alternate!==m)throw Error(i(190))}if(h.tag!==3)throw Error(i(188));return h.stateNode.current===h?r:o}function g(r){var o=r.tag;if(o===5||o===26||o===27||o===6)return r;for(r=r.child;r!==null;){if(o=g(r),o!==null)return o;r=r.sibling}return null}var v=Object.assign,_=Symbol.for("react.element"),x=Symbol.for("react.transitional.element"),S=Symbol.for("react.portal"),C=Symbol.for("react.fragment"),T=Symbol.for("react.strict_mode"),M=Symbol.for("react.profiler"),w=Symbol.for("react.consumer"),B=Symbol.for("react.context"),D=Symbol.for("react.forward_ref"),P=Symbol.for("react.suspense"),U=Symbol.for("react.suspense_list"),z=Symbol.for("react.memo"),j=Symbol.for("react.lazy"),L=Symbol.for("react.activity"),F=Symbol.for("react.memo_cache_sentinel"),W=Symbol.iterator;function te(r){return r===null||typeof r!="object"?null:(r=W&&r[W]||r["@@iterator"],typeof r=="function"?r:null)}var $=Symbol.for("react.client.reference");function ae(r){if(r==null)return null;if(typeof r=="function")return r.$$typeof===$?null:r.displayName||r.name||null;if(typeof r=="string")return r;switch(r){case C:return"Fragment";case M:return"Profiler";case T:return"StrictMode";case P:return"Suspense";case U:return"SuspenseList";case L:return"Activity"}if(typeof r=="object")switch(r.$$typeof){case S:return"Portal";case B:return r.displayName||"Context";case w:return(r._context.displayName||"Context")+".Consumer";case D:var o=r.render;return r=r.displayName,r||(r=o.displayName||o.name||"",r=r!==""?"ForwardRef("+r+")":"ForwardRef"),r;case z:return o=r.displayName||null,o!==null?o:ae(r.type)||"Memo";case j:o=r._payload,r=r._init;try{return ae(r(o))}catch{}}return null}var le=Array.isArray,G=e.__CLIENT_INTERNALS_DO_NOT_USE_OR_WARN_USERS_THEY_CANNOT_UPGRADE,J=t.__DOM_INTERNALS_DO_NOT_USE_OR_WARN_USERS_THEY_CANNOT_UPGRADE,Z={pending:!1,data:null,method:null,action:null},pe=[],_e=-1;function q(r){return{current:r}}function ce(r){0>_e||(r.current=pe[_e],pe[_e]=null,_e--)}function Te(r,o){_e++,pe[_e]=r.current,r.current=o}var De=q(null),qe=q(null),ge=q(null),Ee=q(null);function Xe(r,o){switch(Te(ge,o),Te(qe,r),Te(De,null),o.nodeType){case 9:case 11:r=(r=o.documentElement)&&(r=r.namespaceURI)?IO(r):0;break;default:if(r=o.tagName,o=o.namespaceURI)o=IO(o),r=PO(o,r);else switch(r){case"svg":r=1;break;case"math":r=2;break;default:r=0}}ce(De),Te(De,r)}function tt(){ce(De),ce(qe),ce(ge)}function ot(r){r.memoizedState!==null&&Te(Ee,r);var o=De.current,h=PO(o,r.type);o!==h&&(Te(qe,r),Te(De,h))}function Vt(r){qe.current===r&&(ce(De),ce(qe)),Ee.current===r&&(ce(Ee),X0._currentValue=Z)}var en,Et;function Ne(r){if(en===void 0)try{throw Error()}catch(h){var o=h.stack.trim().match(/\n( *(at )?)/);en=o&&o[1]||"",Et=-1<h.stack.indexOf(`
    at`)?" (<anonymous>)":-1<h.stack.indexOf("@")?"@unknown:0:0":""}return`
`+en+r+Et}var Ge=!1;function Ie(r,o){if(!r||Ge)return"";Ge=!0;var h=Error.prepareStackTrace;Error.prepareStackTrace=void 0;try{var m={DetermineComponentFrameRoot:function(){try{if(o){var ze=function(){throw Error()};if(Object.defineProperty(ze.prototype,"props",{set:function(){throw Error()}}),typeof Reflect=="object"&&Reflect.construct){try{Reflect.construct(ze,[])}catch(we){var Se=we}Reflect.construct(r,[],ze)}else{try{ze.call()}catch(we){Se=we}r.call(ze.prototype)}}else{try{throw Error()}catch(we){Se=we}(ze=r())&&typeof ze.catch=="function"&&ze.catch(function(){})}}catch(we){if(we&&Se&&typeof we.stack=="string")return[we.stack,Se.stack]}return[null,null]}};m.DetermineComponentFrameRoot.displayName="DetermineComponentFrameRoot";var b=Object.getOwnPropertyDescriptor(m.DetermineComponentFrameRoot,"name");b&&b.configurable&&Object.defineProperty(m.DetermineComponentFrameRoot,"name",{value:"DetermineComponentFrameRoot"});var E=m.DetermineComponentFrameRoot(),N=E[0],X=E[1];if(N&&X){var ie=N.split(`
`),ye=X.split(`
`);for(b=m=0;m<ie.length&&!ie[m].includes("DetermineComponentFrameRoot");)m++;for(;b<ye.length&&!ye[b].includes("DetermineComponentFrameRoot");)b++;if(m===ie.length||b===ye.length)for(m=ie.length-1,b=ye.length-1;1<=m&&0<=b&&ie[m]!==ye[b];)b--;for(;1<=m&&0<=b;m--,b--)if(ie[m]!==ye[b]){if(m!==1||b!==1)do if(m--,b--,0>b||ie[m]!==ye[b]){var Oe=`
`+ie[m].replace(" at new "," at ");return r.displayName&&Oe.includes("<anonymous>")&&(Oe=Oe.replace("<anonymous>",r.displayName)),Oe}while(1<=m&&0<=b);break}}}finally{Ge=!1,Error.prepareStackTrace=h}return(h=r?r.displayName||r.name:"")?Ne(h):""}function et(r,o){switch(r.tag){case 26:case 27:case 5:return Ne(r.type);case 16:return Ne("Lazy");case 13:return r.child!==o&&o!==null?Ne("Suspense Fallback"):Ne("Suspense");case 19:return Ne("SuspenseList");case 0:case 15:return Ie(r.type,!1);case 11:return Ie(r.type.render,!1);case 1:return Ie(r.type,!0);case 31:return Ne("Activity");default:return""}}function Q(r){try{var o="",h=null;do o+=et(r,h),h=r,r=r.return;while(r);return o}catch(m){return`
Error generating stack: `+m.message+`
`+m.stack}}var Tt=Object.prototype.hasOwnProperty,Ze=n.unstable_scheduleCallback,At=n.unstable_cancelCallback,Ke=n.unstable_shouldYield,V=n.unstable_requestPaint,I=n.unstable_now,re=n.unstable_getCurrentPriorityLevel,Ae=n.unstable_ImmediatePriority,Be=n.unstable_UserBlockingPriority,Re=n.unstable_NormalPriority,pt=n.unstable_LowPriority,Qe=n.unstable_IdlePriority,gt=n.log,wt=n.unstable_setDisableYieldValue,Fe=null,ke=null;function nt(r){if(typeof gt=="function"&&wt(r),ke&&typeof ke.setStrictMode=="function")try{ke.setStrictMode(Fe,r)}catch{}}var it=Math.clz32?Math.clz32:oe,Je=Math.log,Yt=Math.LN2;function oe(r){return r>>>=0,r===0?32:31-(Je(r)/Yt|0)|0}var rt=256,Ye=262144,ft=4194304;function Ve(r){var o=r&42;if(o!==0)return o;switch(r&-r){case 1:return 1;case 2:return 2;case 4:return 4;case 8:return 8;case 16:return 16;case 32:return 32;case 64:return 64;case 128:return 128;case 256:case 512:case 1024:case 2048:case 4096:case 8192:case 16384:case 32768:case 65536:case 131072:return r&261888;case 262144:case 524288:case 1048576:case 2097152:return r&3932160;case 4194304:case 8388608:case 16777216:case 33554432:return r&62914560;case 67108864:return 67108864;case 134217728:return 134217728;case 268435456:return 268435456;case 536870912:return 536870912;case 1073741824:return 0;default:return r}}function Pe(r,o,h){var m=r.pendingLanes;if(m===0)return 0;var b=0,E=r.suspendedLanes,N=r.pingedLanes;r=r.warmLanes;var X=m&134217727;return X!==0?(m=X&~E,m!==0?b=Ve(m):(N&=X,N!==0?b=Ve(N):h||(h=X&~r,h!==0&&(b=Ve(h))))):(X=m&~E,X!==0?b=Ve(X):N!==0?b=Ve(N):h||(h=m&~r,h!==0&&(b=Ve(h)))),b===0?0:o!==0&&o!==b&&(o&E)===0&&(E=b&-b,h=o&-o,E>=h||E===32&&(h&4194048)!==0)?o:b}function $e(r,o){return(r.pendingLanes&~(r.suspendedLanes&~r.pingedLanes)&o)===0}function Ht(r,o){switch(r){case 1:case 2:case 4:case 8:case 64:return o+250;case 16:case 32:case 128:case 256:case 512:case 1024:case 2048:case 4096:case 8192:case 16384:case 32768:case 65536:case 131072:case 262144:case 524288:case 1048576:case 2097152:return o+5e3;case 4194304:case 8388608:case 16777216:case 33554432:return-1;case 67108864:case 134217728:case 268435456:case 536870912:case 1073741824:return-1;default:return-1}}function bn(){var r=ft;return ft<<=1,(ft&62914560)===0&&(ft=4194304),r}function un(r){for(var o=[],h=0;31>h;h++)o.push(r);return o}function na(r,o){r.pendingLanes|=o,o!==268435456&&(r.suspendedLanes=0,r.pingedLanes=0,r.warmLanes=0)}function Lr(r,o,h,m,b,E){var N=r.pendingLanes;r.pendingLanes=h,r.suspendedLanes=0,r.pingedLanes=0,r.warmLanes=0,r.expiredLanes&=h,r.entangledLanes&=h,r.errorRecoveryDisabledLanes&=h,r.shellSuspendCounter=0;var X=r.entanglements,ie=r.expirationTimes,ye=r.hiddenUpdates;for(h=N&~h;0<h;){var Oe=31-it(h),ze=1<<Oe;X[Oe]=0,ie[Oe]=-1;var Se=ye[Oe];if(Se!==null)for(ye[Oe]=null,Oe=0;Oe<Se.length;Oe++){var we=Se[Oe];we!==null&&(we.lane&=-536870913)}h&=~ze}m!==0&&Pf(r,m,0),E!==0&&b===0&&r.tag!==0&&(r.suspendedLanes|=E&~(N&~o))}function Pf(r,o,h){r.pendingLanes|=o,r.suspendedLanes&=~o;var m=31-it(o);r.entangledLanes|=o,r.entanglements[m]=r.entanglements[m]|1073741824|h&261930}function Kl(r,o){var h=r.entangledLanes|=o;for(r=r.entanglements;h;){var m=31-it(h),b=1<<m;b&o|r[m]&o&&(r[m]|=o),h&=~b}}function Yo(r,o){var h=o&-o;return h=(h&42)!==0?1:Ir(h),(h&(r.suspendedLanes|o))!==0?0:h}function Ir(r){switch(r){case 2:r=1;break;case 8:r=4;break;case 32:r=16;break;case 256:case 512:case 1024:case 2048:case 4096:case 8192:case 16384:case 32768:case 65536:case 131072:case 262144:case 524288:case 1048576:case 2097152:case 4194304:case 8388608:case 16777216:case 33554432:r=128;break;case 268435456:r=134217728;break;default:r=0}return r}function Ql(r){return r&=-r,2<r?8<r?(r&134217727)!==0?32:268435456:8:2}function Pr(){var r=J.p;return r!==0?r:(r=window.event,r===void 0?32:sN(r.type))}function Xi(r,o){var h=J.p;try{return J.p=r,o()}finally{J.p=h}}var Ma=Math.random().toString(36).slice(2),rn="__reactFiber$"+Ma,Fi="__reactProps$"+Ma,ur="__reactContainer$"+Ma,Zl="__reactEvents$"+Ma,$l="__reactListeners$"+Ma,Xd="__reactHandles$"+Ma,ec="__reactResources$"+Ma,so="__reactMarker$"+Ma;function tc(r){delete r[rn],delete r[Fi],delete r[Zl],delete r[$l],delete r[Xd]}function _i(r){var o=r[rn];if(o)return o;for(var h=r.parentNode;h;){if(o=h[ur]||h[rn]){if(h=o.alternate,o.child!==null||h!==null&&h.child!==null)for(r=XO(r);r!==null;){if(h=r[rn])return h;r=XO(r)}return o}r=h,h=r.parentNode}return null}function kn(r){if(r=r[rn]||r[ur]){var o=r.tag;if(o===5||o===6||o===13||o===31||o===26||o===27||o===3)return r}return null}function ns(r){var o=r.tag;if(o===5||o===26||o===27||o===6)return r.stateNode;throw Error(i(33))}function is(r){var o=r[ec];return o||(o=r[ec]={hoistableStyles:new Map,hoistableScripts:new Map}),o}function k(r){r[so]=!0}var ue=new Set,Me={};function xe(r,o){me(r,o),me(r+"Capture",o)}function me(r,o){for(Me[r]=o,r=0;r<o.length;r++)ue.add(o[r])}var at=RegExp("^[:A-Z_a-z\\u00C0-\\u00D6\\u00D8-\\u00F6\\u00F8-\\u02FF\\u0370-\\u037D\\u037F-\\u1FFF\\u200C-\\u200D\\u2070-\\u218F\\u2C00-\\u2FEF\\u3001-\\uD7FF\\uF900-\\uFDCF\\uFDF0-\\uFFFD][:A-Z_a-z\\u00C0-\\u00D6\\u00D8-\\u00F6\\u00F8-\\u02FF\\u0370-\\u037D\\u037F-\\u1FFF\\u200C-\\u200D\\u2070-\\u218F\\u2C00-\\u2FEF\\u3001-\\uD7FF\\uF900-\\uFDCF\\uFDF0-\\uFFFD\\-.0-9\\u00B7\\u0300-\\u036F\\u203F-\\u2040]*$"),vt={},lt={};function yt(r){return Tt.call(lt,r)?!0:Tt.call(vt,r)?!1:at.test(r)?lt[r]=!0:(vt[r]=!0,!1)}function St(r,o,h){if(yt(o))if(h===null)r.removeAttribute(o);else{switch(typeof h){case"undefined":case"function":case"symbol":r.removeAttribute(o);return;case"boolean":var m=o.toLowerCase().slice(0,5);if(m!=="data-"&&m!=="aria-"){r.removeAttribute(o);return}}r.setAttribute(o,""+h)}}function Ut(r,o,h){if(h===null)r.removeAttribute(o);else{switch(typeof h){case"undefined":case"function":case"symbol":case"boolean":r.removeAttribute(o);return}r.setAttribute(o,""+h)}}function xt(r,o,h,m){if(m===null)r.removeAttribute(h);else{switch(typeof m){case"undefined":case"function":case"symbol":case"boolean":r.removeAttribute(h);return}r.setAttributeNS(o,h,""+m)}}function Pt(r){switch(typeof r){case"bigint":case"boolean":case"number":case"string":case"undefined":return r;case"object":return r;default:return""}}function wn(r){var o=r.type;return(r=r.nodeName)&&r.toLowerCase()==="input"&&(o==="checkbox"||o==="radio")}function $n(r,o,h){var m=Object.getOwnPropertyDescriptor(r.constructor.prototype,o);if(!r.hasOwnProperty(o)&&typeof m<"u"&&typeof m.get=="function"&&typeof m.set=="function"){var b=m.get,E=m.set;return Object.defineProperty(r,o,{configurable:!0,get:function(){return b.call(this)},set:function(N){h=""+N,E.call(this,N)}}),Object.defineProperty(r,o,{enumerable:m.enumerable}),{getValue:function(){return h},setValue:function(N){h=""+N},stopTracking:function(){r._valueTracker=null,delete r[o]}}}}function Xn(r){if(!r._valueTracker){var o=wn(r)?"checked":"value";r._valueTracker=$n(r,o,""+r[o])}}function Bn(r){if(!r)return!1;var o=r._valueTracker;if(!o)return!0;var h=o.getValue(),m="";return r&&(m=wn(r)?r.checked?"true":"false":r.value),r=m,r!==h?(o.setValue(r),!0):!1}function Ct(r){if(r=r||(typeof document<"u"?document:void 0),typeof r>"u")return null;try{return r.activeElement||r.body}catch{return r.body}}var Cn=/[\n"\\]/g;function qt(r){return r.replace(Cn,function(o){return"\\"+o.charCodeAt(0).toString(16)+" "})}function ji(r,o,h,m,b,E,N,X){r.name="",N!=null&&typeof N!="function"&&typeof N!="symbol"&&typeof N!="boolean"?r.type=N:r.removeAttribute("type"),o!=null?N==="number"?(o===0&&r.value===""||r.value!=o)&&(r.value=""+Pt(o)):r.value!==""+Pt(o)&&(r.value=""+Pt(o)):N!=="submit"&&N!=="reset"||r.removeAttribute("value"),o!=null?Yi(r,N,Pt(o)):h!=null?Yi(r,N,Pt(h)):m!=null&&r.removeAttribute("value"),b==null&&E!=null&&(r.defaultChecked=!!E),b!=null&&(r.checked=b&&typeof b!="function"&&typeof b!="symbol"),X!=null&&typeof X!="function"&&typeof X!="symbol"&&typeof X!="boolean"?r.name=""+Pt(X):r.removeAttribute("name")}function Cs(r,o,h,m,b,E,N,X){if(E!=null&&typeof E!="function"&&typeof E!="symbol"&&typeof E!="boolean"&&(r.type=E),o!=null||h!=null){if(!(E!=="submit"&&E!=="reset"||o!=null)){Xn(r);return}h=h!=null?""+Pt(h):"",o=o!=null?""+Pt(o):h,X||o===r.value||(r.value=o),r.defaultValue=o}m=m??b,m=typeof m!="function"&&typeof m!="symbol"&&!!m,r.checked=X?r.checked:!!m,r.defaultChecked=!!m,N!=null&&typeof N!="function"&&typeof N!="symbol"&&typeof N!="boolean"&&(r.name=N),Xn(r)}function Yi(r,o,h){o==="number"&&Ct(r.ownerDocument)===r||r.defaultValue===""+h||(r.defaultValue=""+h)}function Fr(r,o,h,m){if(r=r.options,o){o={};for(var b=0;b<h.length;b++)o["$"+h[b]]=!0;for(h=0;h<r.length;h++)b=o.hasOwnProperty("$"+r[h].value),r[h].selected!==b&&(r[h].selected=b),b&&m&&(r[h].defaultSelected=!0)}else{for(h=""+Pt(h),o=null,b=0;b<r.length;b++){if(r[b].value===h){r[b].selected=!0,m&&(r[b].defaultSelected=!0);return}o!==null||r[b].disabled||(o=r[b])}o!==null&&(o.selected=!0)}}function On(r,o,h){if(o!=null&&(o=""+Pt(o),o!==r.value&&(r.value=o),h==null)){r.defaultValue!==o&&(r.defaultValue=o);return}r.defaultValue=h!=null?""+Pt(h):""}function ci(r,o,h,m){if(o==null){if(m!=null){if(h!=null)throw Error(i(92));if(le(m)){if(1<m.length)throw Error(i(93));m=m[0]}h=m}h==null&&(h=""),o=h}h=Pt(o),r.defaultValue=h,m=r.textContent,m===h&&m!==""&&m!==null&&(r.value=m),Xn(r)}function Ri(r,o){if(o){var h=r.firstChild;if(h&&h===r.lastChild&&h.nodeType===3){h.nodeValue=o;return}}r.textContent=o}var wi=new Set("animationIterationCount aspectRatio borderImageOutset borderImageSlice borderImageWidth boxFlex boxFlexGroup boxOrdinalGroup columnCount columns flex flexGrow flexPositive flexShrink flexNegative flexOrder gridArea gridRow gridRowEnd gridRowSpan gridRowStart gridColumn gridColumnEnd gridColumnSpan gridColumnStart fontWeight lineClamp lineHeight opacity order orphans scale tabSize widows zIndex zoom fillOpacity floodOpacity stopOpacity strokeDasharray strokeDashoffset strokeMiterlimit strokeOpacity strokeWidth MozAnimationIterationCount MozBoxFlex MozBoxFlexGroup MozLineClamp msAnimationIterationCount msFlex msZoom msFlexGrow msFlexNegative msFlexOrder msFlexPositive msFlexShrink msGridColumn msGridColumnSpan msGridRow msGridRowSpan WebkitAnimationIterationCount WebkitBoxFlex WebKitBoxFlexGroup WebkitBoxOrdinalGroup WebkitColumnCount WebkitColumns WebkitFlex WebkitFlexGrow WebkitFlexPositive WebkitFlexShrink WebkitLineClamp".split(" "));function Bi(r,o,h){var m=o.indexOf("--")===0;h==null||typeof h=="boolean"||h===""?m?r.setProperty(o,""):o==="float"?r.cssFloat="":r[o]="":m?r.setProperty(o,h):typeof h!="number"||h===0||wi.has(o)?o==="float"?r.cssFloat=h:r[o]=(""+h).trim():r[o]=h+"px"}function nc(r,o,h){if(o!=null&&typeof o!="object")throw Error(i(62));if(r=r.style,h!=null){for(var m in h)!h.hasOwnProperty(m)||o!=null&&o.hasOwnProperty(m)||(m.indexOf("--")===0?r.setProperty(m,""):m==="float"?r.cssFloat="":r[m]="");for(var b in o)m=o[b],o.hasOwnProperty(b)&&h[b]!==m&&Bi(r,b,m)}else for(var E in o)o.hasOwnProperty(E)&&Bi(r,E,o[E])}function fr(r){if(r.indexOf("-")===-1)return!1;switch(r){case"annotation-xml":case"color-profile":case"font-face":case"font-face-src":case"font-face-uri":case"font-face-format":case"font-face-name":case"missing-glyph":return!1;default:return!0}}var ux=new Map([["acceptCharset","accept-charset"],["htmlFor","for"],["httpEquiv","http-equiv"],["crossOrigin","crossorigin"],["accentHeight","accent-height"],["alignmentBaseline","alignment-baseline"],["arabicForm","arabic-form"],["baselineShift","baseline-shift"],["capHeight","cap-height"],["clipPath","clip-path"],["clipRule","clip-rule"],["colorInterpolation","color-interpolation"],["colorInterpolationFilters","color-interpolation-filters"],["colorProfile","color-profile"],["colorRendering","color-rendering"],["dominantBaseline","dominant-baseline"],["enableBackground","enable-background"],["fillOpacity","fill-opacity"],["fillRule","fill-rule"],["floodColor","flood-color"],["floodOpacity","flood-opacity"],["fontFamily","font-family"],["fontSize","font-size"],["fontSizeAdjust","font-size-adjust"],["fontStretch","font-stretch"],["fontStyle","font-style"],["fontVariant","font-variant"],["fontWeight","font-weight"],["glyphName","glyph-name"],["glyphOrientationHorizontal","glyph-orientation-horizontal"],["glyphOrientationVertical","glyph-orientation-vertical"],["horizAdvX","horiz-adv-x"],["horizOriginX","horiz-origin-x"],["imageRendering","image-rendering"],["letterSpacing","letter-spacing"],["lightingColor","lighting-color"],["markerEnd","marker-end"],["markerMid","marker-mid"],["markerStart","marker-start"],["overlinePosition","overline-position"],["overlineThickness","overline-thickness"],["paintOrder","paint-order"],["panose-1","panose-1"],["pointerEvents","pointer-events"],["renderingIntent","rendering-intent"],["shapeRendering","shape-rendering"],["stopColor","stop-color"],["stopOpacity","stop-opacity"],["strikethroughPosition","strikethrough-position"],["strikethroughThickness","strikethrough-thickness"],["strokeDasharray","stroke-dasharray"],["strokeDashoffset","stroke-dashoffset"],["strokeLinecap","stroke-linecap"],["strokeLinejoin","stroke-linejoin"],["strokeMiterlimit","stroke-miterlimit"],["strokeOpacity","stroke-opacity"],["strokeWidth","stroke-width"],["textAnchor","text-anchor"],["textDecoration","text-decoration"],["textRendering","text-rendering"],["transformOrigin","transform-origin"],["underlinePosition","underline-position"],["underlineThickness","underline-thickness"],["unicodeBidi","unicode-bidi"],["unicodeRange","unicode-range"],["unitsPerEm","units-per-em"],["vAlphabetic","v-alphabetic"],["vHanging","v-hanging"],["vIdeographic","v-ideographic"],["vMathematical","v-mathematical"],["vectorEffect","vector-effect"],["vertAdvY","vert-adv-y"],["vertOriginX","vert-origin-x"],["vertOriginY","vert-origin-y"],["wordSpacing","word-spacing"],["writingMode","writing-mode"],["xmlnsXlink","xmlns:xlink"],["xHeight","x-height"]]),fx=/^[\u0000-\u001F ]*j[\r\n\t]*a[\r\n\t]*v[\r\n\t]*a[\r\n\t]*s[\r\n\t]*c[\r\n\t]*r[\r\n\t]*i[\r\n\t]*p[\r\n\t]*t[\r\n\t]*:/i;function Ff(r){return fx.test(""+r)?"javascript:throw new Error('React has blocked a javascript: URL as a security precaution.')":r}function Rs(){}var zf=null;function jd(r){return r=r.target||r.srcElement||window,r.correspondingUseElement&&(r=r.correspondingUseElement),r.nodeType===3?r.parentNode:r}var ic=null,qo=null;function Eg(r){var o=kn(r);if(o&&(r=o.stateNode)){var h=r[Fi]||null;e:switch(r=o.stateNode,o.type){case"input":if(ji(r,h.value,h.defaultValue,h.defaultValue,h.checked,h.defaultChecked,h.type,h.name),o=h.name,h.type==="radio"&&o!=null){for(h=r;h.parentNode;)h=h.parentNode;for(h=h.querySelectorAll('input[name="'+qt(""+o)+'"][type="radio"]'),o=0;o<h.length;o++){var m=h[o];if(m!==r&&m.form===r.form){var b=m[Fi]||null;if(!b)throw Error(i(90));ji(m,b.value,b.defaultValue,b.defaultValue,b.checked,b.defaultChecked,b.type,b.name)}}for(o=0;o<h.length;o++)m=h[o],m.form===r.form&&Bn(m)}break e;case"textarea":On(r,h.value,h.defaultValue);break e;case"select":o=h.value,o!=null&&Fr(r,!!h.multiple,o,!1)}}}var Yd=!1;function Tg(r,o,h){if(Yd)return r(o,h);Yd=!0;try{var m=r(o);return m}finally{if(Yd=!1,(ic!==null||qo!==null)&&(Y(),ic&&(o=ic,r=qo,qo=ic=null,Eg(o),r)))for(o=0;o<r.length;o++)Eg(r[o])}}function ac(r,o){var h=r.stateNode;if(h===null)return null;var m=h[Fi]||null;if(m===null)return null;h=m[o];e:switch(o){case"onClick":case"onClickCapture":case"onDoubleClick":case"onDoubleClickCapture":case"onMouseDown":case"onMouseDownCapture":case"onMouseMove":case"onMouseMoveCapture":case"onMouseUp":case"onMouseUpCapture":case"onMouseEnter":(m=!m.disabled)||(r=r.type,m=!(r==="button"||r==="input"||r==="select"||r==="textarea")),r=!m;break e;default:r=!1}if(r)return null;if(h&&typeof h!="function")throw Error(i(231,o,typeof h));return h}var ws=!(typeof window>"u"||typeof window.document>"u"||typeof window.document.createElement>"u"),qd=!1;if(ws)try{var Hf={};Object.defineProperty(Hf,"passive",{get:function(){qd=!0}}),window.addEventListener("test",Hf,Hf),window.removeEventListener("test",Hf,Hf)}catch{qd=!1}var Wo=null,Wd=null,Jo=null;function Jd(){if(Jo)return Jo;var r,o=Wd,h=o.length,m,b="value"in Wo?Wo.value:Wo.textContent,E=b.length;for(r=0;r<h&&o[r]===b[r];r++);var N=h-r;for(m=1;m<=N&&o[h-m]===b[E-m];m++);return Jo=b.slice(r,1<m?1-m:void 0)}function rc(r){var o=r.keyCode;return"charCode"in r?(r=r.charCode,r===0&&o===13&&(r=13)):r=o,r===10&&(r=13),32<=r||r===13?r:0}function Gf(){return!0}function Cg(){return!1}function da(r){function o(h,m,b,E,N){this._reactName=h,this._targetInst=b,this.type=m,this.nativeEvent=E,this.target=N,this.currentTarget=null;for(var X in r)r.hasOwnProperty(X)&&(h=r[X],this[X]=h?h(E):E[X]);return this.isDefaultPrevented=(E.defaultPrevented!=null?E.defaultPrevented:E.returnValue===!1)?Gf:Cg,this.isPropagationStopped=Cg,this}return v(o.prototype,{preventDefault:function(){this.defaultPrevented=!0;var h=this.nativeEvent;h&&(h.preventDefault?h.preventDefault():typeof h.returnValue!="unknown"&&(h.returnValue=!1),this.isDefaultPrevented=Gf)},stopPropagation:function(){var h=this.nativeEvent;h&&(h.stopPropagation?h.stopPropagation():typeof h.cancelBubble!="unknown"&&(h.cancelBubble=!0),this.isPropagationStopped=Gf)},persist:function(){},isPersistent:Gf}),o}var Ko={eventPhase:0,bubbles:0,cancelable:0,timeStamp:function(r){return r.timeStamp||Date.now()},defaultPrevented:0,isTrusted:0},Vf=da(Ko),as=v({},Ko,{view:0,detail:0}),Kd=da(as),Qd,kf,su,Xf=v({},as,{screenX:0,screenY:0,clientX:0,clientY:0,pageX:0,pageY:0,ctrlKey:0,shiftKey:0,altKey:0,metaKey:0,getModifierState:Yf,button:0,buttons:0,relatedTarget:function(r){return r.relatedTarget===void 0?r.fromElement===r.srcElement?r.toElement:r.fromElement:r.relatedTarget},movementX:function(r){return"movementX"in r?r.movementX:(r!==su&&(su&&r.type==="mousemove"?(Qd=r.screenX-su.screenX,kf=r.screenY-su.screenY):kf=Qd=0,su=r),Qd)},movementY:function(r){return"movementY"in r?r.movementY:kf}}),hx=da(Xf),ia=v({},Xf,{dataTransfer:0}),dx=da(ia),px=v({},as,{relatedTarget:0}),Zd=da(px),mx=v({},Ko,{animationName:0,elapsedTime:0,pseudoElement:0}),gx=da(mx),jf=v({},Ko,{clipboardData:function(r){return"clipboardData"in r?r.clipboardData:window.clipboardData}}),Rg=da(jf),vx=v({},Ko,{data:0}),wg=da(vx),yx={Esc:"Escape",Spacebar:" ",Left:"ArrowLeft",Up:"ArrowUp",Right:"ArrowRight",Down:"ArrowDown",Del:"Delete",Win:"OS",Menu:"ContextMenu",Apps:"ContextMenu",Scroll:"ScrollLock",MozPrintableKey:"Unidentified"},Bg={8:"Backspace",9:"Tab",12:"Clear",13:"Enter",16:"Shift",17:"Control",18:"Alt",19:"Pause",20:"CapsLock",27:"Escape",32:" ",33:"PageUp",34:"PageDown",35:"End",36:"Home",37:"ArrowLeft",38:"ArrowUp",39:"ArrowRight",40:"ArrowDown",45:"Insert",46:"Delete",112:"F1",113:"F2",114:"F3",115:"F4",116:"F5",117:"F6",118:"F7",119:"F8",120:"F9",121:"F10",122:"F11",123:"F12",144:"NumLock",145:"ScrollLock",224:"Meta"},Dg={Alt:"altKey",Control:"ctrlKey",Meta:"metaKey",Shift:"shiftKey"};function _x(r){var o=this.nativeEvent;return o.getModifierState?o.getModifierState(r):(r=Dg[r])?!!o[r]:!1}function Yf(){return _x}var Og=v({},as,{key:function(r){if(r.key){var o=yx[r.key]||r.key;if(o!=="Unidentified")return o}return r.type==="keypress"?(r=rc(r),r===13?"Enter":String.fromCharCode(r)):r.type==="keydown"||r.type==="keyup"?Bg[r.keyCode]||"Unidentified":""},code:0,location:0,ctrlKey:0,shiftKey:0,altKey:0,metaKey:0,repeat:0,locale:0,getModifierState:Yf,charCode:function(r){return r.type==="keypress"?rc(r):0},keyCode:function(r){return r.type==="keydown"||r.type==="keyup"?r.keyCode:0},which:function(r){return r.type==="keypress"?rc(r):r.type==="keydown"||r.type==="keyup"?r.keyCode:0}}),Ng=da(Og),xx=v({},Xf,{pointerId:0,width:0,height:0,pressure:0,tangentialPressure:0,tiltX:0,tiltY:0,twist:0,pointerType:0,isPrimary:0}),$d=da(xx),bx=v({},as,{touches:0,targetTouches:0,changedTouches:0,altKey:0,metaKey:0,ctrlKey:0,shiftKey:0,getModifierState:Yf}),oo=da(bx),Ug=v({},Ko,{propertyName:0,elapsedTime:0,pseudoElement:0}),XM=da(Ug),Ax=v({},Xf,{deltaX:function(r){return"deltaX"in r?r.deltaX:"wheelDeltaX"in r?-r.wheelDeltaX:0},deltaY:function(r){return"deltaY"in r?r.deltaY:"wheelDeltaY"in r?-r.wheelDeltaY:"wheelDelta"in r?-r.wheelDelta:0},deltaZ:0,deltaMode:0}),Qo=da(Ax),lo=v({},Ko,{newState:0,oldState:0}),Lg=da(lo),Ig=[9,13,27,32],sc=ws&&"CompositionEvent"in window,Zo=null;ws&&"documentMode"in document&&(Zo=document.documentMode);var oc=ws&&"TextEvent"in window&&!Zo,aa=ws&&(!sc||Zo&&8<Zo&&11>=Zo),qf=" ",Pg=!1;function ep(r,o){switch(r){case"keyup":return Ig.indexOf(o.keyCode)!==-1;case"keydown":return o.keyCode!==229;case"keypress":case"mousedown":case"focusout":return!0;default:return!1}}function ou(r){return r=r.detail,typeof r=="object"&&"data"in r?r.data:null}var $o=!1;function tp(r,o){switch(r){case"compositionend":return ou(o);case"keypress":return o.which!==32?null:(Pg=!0,qf);case"textInput":return r=o.data,r===qf&&Pg?null:r;default:return null}}function Sx(r,o){if($o)return r==="compositionend"||!sc&&ep(r,o)?(r=Jd(),Jo=Wd=Wo=null,$o=!1,r):null;switch(r){case"paste":return null;case"keypress":if(!(o.ctrlKey||o.altKey||o.metaKey)||o.ctrlKey&&o.altKey){if(o.char&&1<o.char.length)return o.char;if(o.which)return String.fromCharCode(o.which)}return null;case"compositionend":return aa&&o.locale!=="ko"?null:o.data;default:return null}}var hr={color:!0,date:!0,datetime:!0,"datetime-local":!0,email:!0,month:!0,number:!0,password:!0,range:!0,search:!0,tel:!0,text:!0,time:!0,url:!0,week:!0};function Fg(r){var o=r&&r.nodeName&&r.nodeName.toLowerCase();return o==="input"?!!hr[r.type]:o==="textarea"}function np(r,o,h,m){ic?qo?qo.push(m):qo=[m]:ic=m,o=pb(o,"onChange"),0<o.length&&(h=new Vf("onChange","change",null,h,m),r.push({event:h,listeners:o}))}var lu=null,cu=null;function zg(r){BO(r,0)}function uu(r){var o=ns(r);if(Bn(o))return r}function Hg(r,o){if(r==="change")return o}var Wf=!1;if(ws){var lc;if(ws){var ei="oninput"in document;if(!ei){var Mx=document.createElement("div");Mx.setAttribute("oninput","return;"),ei=typeof Mx.oninput=="function"}lc=ei}else lc=!1;Wf=lc&&(!document.documentMode||9<document.documentMode)}function Ex(){lu&&(lu.detachEvent("onpropertychange",Gg),cu=lu=null)}function Gg(r){if(r.propertyName==="value"&&uu(cu)){var o=[];np(o,cu,r,jd(r)),Tg(zg,o)}}function Jf(r,o,h){r==="focusin"?(Ex(),lu=o,cu=h,lu.attachEvent("onpropertychange",Gg)):r==="focusout"&&Ex()}function el(r){if(r==="selectionchange"||r==="keyup"||r==="keydown")return uu(cu)}function Tx(r,o){if(r==="click")return uu(o)}function Cx(r,o){if(r==="input"||r==="change")return uu(o)}function cc(r,o){return r===o&&(r!==0||1/r===1/o)||r!==r&&o!==o}var ti=typeof Object.is=="function"?Object.is:cc;function fu(r,o){if(ti(r,o))return!0;if(typeof r!="object"||r===null||typeof o!="object"||o===null)return!1;var h=Object.keys(r),m=Object.keys(o);if(h.length!==m.length)return!1;for(m=0;m<h.length;m++){var b=h[m];if(!Tt.call(o,b)||!ti(r[b],o[b]))return!1}return!0}function Vg(r){for(;r&&r.firstChild;)r=r.firstChild;return r}function kg(r,o){var h=Vg(r);r=0;for(var m;h;){if(h.nodeType===3){if(m=r+h.textContent.length,r<=o&&m>=o)return{node:h,offset:o-r};r=m}e:{for(;h;){if(h.nextSibling){h=h.nextSibling;break e}h=h.parentNode}h=void 0}h=Vg(h)}}function ip(r,o){return r&&o?r===o?!0:r&&r.nodeType===3?!1:o&&o.nodeType===3?ip(r,o.parentNode):"contains"in r?r.contains(o):r.compareDocumentPosition?!!(r.compareDocumentPosition(o)&16):!1:!1}function ap(r){r=r!=null&&r.ownerDocument!=null&&r.ownerDocument.defaultView!=null?r.ownerDocument.defaultView:window;for(var o=Ct(r.document);o instanceof r.HTMLIFrameElement;){try{var h=typeof o.contentWindow.location.href=="string"}catch{h=!1}if(h)r=o.contentWindow;else break;o=Ct(r.document)}return o}function hu(r){var o=r&&r.nodeName&&r.nodeName.toLowerCase();return o&&(o==="input"&&(r.type==="text"||r.type==="search"||r.type==="tel"||r.type==="url"||r.type==="password")||o==="textarea"||r.contentEditable==="true")}var Rx=ws&&"documentMode"in document&&11>=document.documentMode,du=null,rp=null,pu=null,dr=!1;function sp(r,o,h){var m=h.window===h?h.document:h.nodeType===9?h:h.ownerDocument;dr||du==null||du!==Ct(m)||(m=du,"selectionStart"in m&&hu(m)?m={start:m.selectionStart,end:m.selectionEnd}:(m=(m.ownerDocument&&m.ownerDocument.defaultView||window).getSelection(),m={anchorNode:m.anchorNode,anchorOffset:m.anchorOffset,focusNode:m.focusNode,focusOffset:m.focusOffset}),pu&&fu(pu,m)||(pu=m,m=pb(rp,"onSelect"),0<m.length&&(o=new Vf("onSelect","select",null,o,h),r.push({event:o,listeners:m}),o.target=du)))}function tl(r,o){var h={};return h[r.toLowerCase()]=o.toLowerCase(),h["Webkit"+r]="webkit"+o,h["Moz"+r]="moz"+o,h}var mu={animationend:tl("Animation","AnimationEnd"),animationiteration:tl("Animation","AnimationIteration"),animationstart:tl("Animation","AnimationStart"),transitionrun:tl("Transition","TransitionRun"),transitionstart:tl("Transition","TransitionStart"),transitioncancel:tl("Transition","TransitionCancel"),transitionend:tl("Transition","TransitionEnd")},Kf={},Ea={};ws&&(Ea=document.createElement("div").style,"AnimationEvent"in window||(delete mu.animationend.animation,delete mu.animationiteration.animation,delete mu.animationstart.animation),"TransitionEvent"in window||delete mu.transitionend.transition);function nl(r){if(Kf[r])return Kf[r];if(!mu[r])return r;var o=mu[r],h;for(h in o)if(o.hasOwnProperty(h)&&h in Ea)return Kf[r]=o[h];return r}var Va=nl("animationend"),Xg=nl("animationiteration"),Bs=nl("animationstart"),gu=nl("transitionrun"),il=nl("transitionstart"),jg=nl("transitioncancel"),op=nl("transitionend"),co=new Map,lp="abort auxClick beforeToggle cancel canPlay canPlayThrough click close contextMenu copy cut drag dragEnd dragEnter dragExit dragLeave dragOver dragStart drop durationChange emptied encrypted ended error gotPointerCapture input invalid keyDown keyPress keyUp load loadedData loadedMetadata loadStart lostPointerCapture mouseDown mouseMove mouseOut mouseOver mouseUp paste pause play playing pointerCancel pointerDown pointerMove pointerOut pointerOver pointerUp progress rateChange reset resize seeked seeking stalled submit suspend timeUpdate touchCancel touchEnd touchStart volumeChange scroll toggle touchMove waiting wheel".split(" ");lp.push("scrollEnd");function pa(r,o){co.set(r,o),xe(o,[r])}var al=typeof reportError=="function"?reportError:function(r){if(typeof window=="object"&&typeof window.ErrorEvent=="function"){var o=new window.ErrorEvent("error",{bubbles:!0,cancelable:!0,message:typeof r=="object"&&r!==null&&typeof r.message=="string"?String(r.message):String(r),error:r});if(!window.dispatchEvent(o))return}else if(typeof process=="object"&&typeof process.emit=="function"){process.emit("uncaughtException",r);return}console.error(r)},qi=[],uc=0,cp=0;function rl(){for(var r=uc,o=cp=uc=0;o<r;){var h=qi[o];qi[o++]=null;var m=qi[o];qi[o++]=null;var b=qi[o];qi[o++]=null;var E=qi[o];if(qi[o++]=null,m!==null&&b!==null){var N=m.pending;N===null?b.next=b:(b.next=N.next,N.next=b),m.pending=b}E!==0&&up(h,b,E)}}function Qf(r,o,h,m){qi[uc++]=r,qi[uc++]=o,qi[uc++]=h,qi[uc++]=m,cp|=m,r.lanes|=m,r=r.alternate,r!==null&&(r.lanes|=m)}function vu(r,o,h,m){return Qf(r,o,h,m),yu(r)}function sl(r,o){return Qf(r,null,null,o),yu(r)}function up(r,o,h){r.lanes|=h;var m=r.alternate;m!==null&&(m.lanes|=h);for(var b=!1,E=r.return;E!==null;)E.childLanes|=h,m=E.alternate,m!==null&&(m.childLanes|=h),E.tag===22&&(r=E.stateNode,r===null||r._visibility&1||(b=!0)),r=E,E=E.return;return r.tag===3?(E=r.stateNode,b&&o!==null&&(b=31-it(h),r=E.hiddenUpdates,m=r[b],m===null?r[b]=[o]:m.push(o),o.lane=h|536870912),E):null}function yu(r){if(50<Cc)throw Cc=0,Rc=null,Error(i(185));for(var o=r.return;o!==null;)r=o,o=r.return;return r.tag===3?r.stateNode:null}var ol={};function wx(r,o,h,m){this.tag=r,this.key=h,this.sibling=this.child=this.return=this.stateNode=this.type=this.elementType=null,this.index=0,this.refCleanup=this.ref=null,this.pendingProps=o,this.dependencies=this.memoizedState=this.updateQueue=this.memoizedProps=null,this.mode=m,this.subtreeFlags=this.flags=0,this.deletions=null,this.childLanes=this.lanes=0,this.alternate=null}function Ta(r,o,h,m){return new wx(r,o,h,m)}function Ca(r){return r=r.prototype,!(!r||!r.isReactComponent)}function Ds(r,o){var h=r.alternate;return h===null?(h=Ta(r.tag,o,r.key,r.mode),h.elementType=r.elementType,h.type=r.type,h.stateNode=r.stateNode,h.alternate=r,r.alternate=h):(h.pendingProps=o,h.type=r.type,h.flags=0,h.subtreeFlags=0,h.deletions=null),h.flags=r.flags&65011712,h.childLanes=r.childLanes,h.lanes=r.lanes,h.child=r.child,h.memoizedProps=r.memoizedProps,h.memoizedState=r.memoizedState,h.updateQueue=r.updateQueue,o=r.dependencies,h.dependencies=o===null?null:{lanes:o.lanes,firstContext:o.firstContext},h.sibling=r.sibling,h.index=r.index,h.ref=r.ref,h.refCleanup=r.refCleanup,h}function ma(r,o){r.flags&=65011714;var h=r.alternate;return h===null?(r.childLanes=0,r.lanes=o,r.child=null,r.subtreeFlags=0,r.memoizedProps=null,r.memoizedState=null,r.updateQueue=null,r.dependencies=null,r.stateNode=null):(r.childLanes=h.childLanes,r.lanes=h.lanes,r.child=h.child,r.subtreeFlags=0,r.deletions=null,r.memoizedProps=h.memoizedProps,r.memoizedState=h.memoizedState,r.updateQueue=h.updateQueue,r.type=h.type,o=h.dependencies,r.dependencies=o===null?null:{lanes:o.lanes,firstContext:o.firstContext}),r}function Zf(r,o,h,m,b,E){var N=0;if(m=r,typeof r=="function")Ca(r)&&(N=1);else if(typeof r=="string")N=Mq(r,h,De.current)?26:r==="html"||r==="head"||r==="body"?27:5;else e:switch(r){case L:return r=Ta(31,h,o,b),r.elementType=L,r.lanes=E,r;case C:return uo(h.children,b,E,o);case T:N=8,b|=24;break;case M:return r=Ta(12,h,o,b|2),r.elementType=M,r.lanes=E,r;case P:return r=Ta(13,h,o,b),r.elementType=P,r.lanes=E,r;case U:return r=Ta(19,h,o,b),r.elementType=U,r.lanes=E,r;default:if(typeof r=="object"&&r!==null)switch(r.$$typeof){case B:N=10;break e;case w:N=9;break e;case D:N=11;break e;case z:N=14;break e;case j:N=16,m=null;break e}N=29,h=Error(i(130,r===null?"null":typeof r,"")),m=null}return o=Ta(N,h,o,b),o.elementType=r,o.type=m,o.lanes=E,o}function uo(r,o,h,m){return r=Ta(7,r,m,o),r.lanes=h,r}function fp(r,o,h){return r=Ta(6,r,null,o),r.lanes=h,r}function Bx(r){var o=Ta(18,null,null,0);return o.stateNode=r,o}function rs(r,o,h){return o=Ta(4,r.children!==null?r.children:[],r.key,o),o.lanes=h,o.stateNode={containerInfo:r.containerInfo,pendingChildren:null,implementation:r.implementation},o}var Yg=new WeakMap;function ka(r,o){if(typeof r=="object"&&r!==null){var h=Yg.get(r);return h!==void 0?h:(o={value:r,source:o,stack:Q(o)},Yg.set(r,o),o)}return{value:r,source:o,stack:Q(o)}}var ss=[],fc=0,$f=null,_u=0,pr=[],Xa=0,Os=null,Ns=1,Us="";function fo(r,o){ss[fc++]=_u,ss[fc++]=$f,$f=r,_u=o}function qg(r,o,h){pr[Xa++]=Ns,pr[Xa++]=Us,pr[Xa++]=Os,Os=r;var m=Ns;r=Us;var b=32-it(m)-1;m&=~(1<<b),h+=1;var E=32-it(o)+b;if(30<E){var N=b-b%5;E=(m&(1<<N)-1).toString(32),m>>=N,b-=N,Ns=1<<32-it(o)+b|h<<b|m,Us=E+r}else Ns=1<<E|h<<b|m,Us=r}function hp(r){r.return!==null&&(fo(r,1),qg(r,1,0))}function ll(r){for(;r===$f;)$f=ss[--fc],ss[fc]=null,_u=ss[--fc],ss[fc]=null;for(;r===Os;)Os=pr[--Xa],pr[Xa]=null,Us=pr[--Xa],pr[Xa]=null,Ns=pr[--Xa],pr[Xa]=null}function eh(r,o){pr[Xa++]=Ns,pr[Xa++]=Us,pr[Xa++]=Os,Ns=o.id,Us=o.overflow,Os=r}var Wi=null,Wn=null,mn=!1,ho=null,Ji=!1,dp=Error(i(519));function fn(r){var o=Error(i(418,1<arguments.length&&arguments[1]!==void 0&&arguments[1]?"text":"HTML",""));throw th(ka(o,r)),dp}function pp(r){var o=r.stateNode,h=r.type,m=r.memoizedProps;switch(o[rn]=r,o[Fi]=m,h){case"dialog":gn("cancel",o),gn("close",o);break;case"iframe":case"object":case"embed":gn("load",o);break;case"video":case"audio":for(h=0;h<z0.length;h++)gn(z0[h],o);break;case"source":gn("error",o);break;case"img":case"image":case"link":gn("error",o),gn("load",o);break;case"details":gn("toggle",o);break;case"input":gn("invalid",o),Cs(o,m.value,m.defaultValue,m.checked,m.defaultChecked,m.type,m.name,!0);break;case"select":gn("invalid",o);break;case"textarea":gn("invalid",o),ci(o,m.value,m.defaultValue,m.children)}h=m.children,typeof h!="string"&&typeof h!="number"&&typeof h!="bigint"||o.textContent===""+h||m.suppressHydrationWarning===!0||UO(o.textContent,h)?(m.popover!=null&&(gn("beforetoggle",o),gn("toggle",o)),m.onScroll!=null&&gn("scroll",o),m.onScrollEnd!=null&&gn("scrollend",o),m.onClick!=null&&(o.onclick=Rs),o=!0):o=!1,o||fn(r,!0)}function Dx(r){for(Wi=r.return;Wi;)switch(Wi.tag){case 5:case 31:case 13:Ji=!1;return;case 27:case 3:Ji=!0;return;default:Wi=Wi.return}}function hc(r){if(r!==Wi)return!1;if(!mn)return Dx(r),mn=!0,!1;var o=r.tag,h;if((h=o!==3&&o!==27)&&((h=o===5)&&(h=r.type,h=!(h!=="form"&&h!=="button")||uE(r.type,r.memoizedProps)),h=!h),h&&Wn&&fn(r),Dx(r),o===13){if(r=r.memoizedState,r=r!==null?r.dehydrated:null,!r)throw Error(i(317));Wn=kO(r)}else if(o===31){if(r=r.memoizedState,r=r!==null?r.dehydrated:null,!r)throw Error(i(317));Wn=kO(r)}else o===27?(o=Wn,Fu(r.type)?(r=mE,mE=null,Wn=r):Wn=o):Wn=Wi?js(r.stateNode.nextSibling):null;return!0}function dc(){Wn=Wi=null,mn=!1}function Wg(){var r=ho;return r!==null&&(ba===null?ba=r:ba.push.apply(ba,r),ho=null),r}function th(r){ho===null?ho=[r]:ho.push(r)}var Jg=q(null),po=null,ga=null;function mo(r,o,h){Te(Jg,o._currentValue),o._currentValue=h}function zr(r){r._currentValue=Jg.current,ce(Jg)}function go(r,o,h){for(;r!==null;){var m=r.alternate;if((r.childLanes&o)!==o?(r.childLanes|=o,m!==null&&(m.childLanes|=o)):m!==null&&(m.childLanes&o)!==o&&(m.childLanes|=o),r===h)break;r=r.return}}function mp(r,o,h,m){var b=r.child;for(b!==null&&(b.return=r);b!==null;){var E=b.dependencies;if(E!==null){var N=b.child;E=E.firstContext;e:for(;E!==null;){var X=E;E=b;for(var ie=0;ie<o.length;ie++)if(X.context===o[ie]){E.lanes|=h,X=E.alternate,X!==null&&(X.lanes|=h),go(E.return,h,r),m||(N=null);break e}E=X.next}}else if(b.tag===18){if(N=b.return,N===null)throw Error(i(341));N.lanes|=h,E=N.alternate,E!==null&&(E.lanes|=h),go(N,h,r),N=null}else N=b.child;if(N!==null)N.return=b;else for(N=b;N!==null;){if(N===r){N=null;break}if(b=N.sibling,b!==null){b.return=N.return,N=b;break}N=N.return}b=N}}function cl(r,o,h,m){r=null;for(var b=o,E=!1;b!==null;){if(!E){if((b.flags&524288)!==0)E=!0;else if((b.flags&262144)!==0)break}if(b.tag===10){var N=b.alternate;if(N===null)throw Error(i(387));if(N=N.memoizedProps,N!==null){var X=b.type;ti(b.pendingProps.value,N.value)||(r!==null?r.push(X):r=[X])}}else if(b===Ee.current){if(N=b.alternate,N===null)throw Error(i(387));N.memoizedState.memoizedState!==b.memoizedState.memoizedState&&(r!==null?r.push(X0):r=[X0])}b=b.return}r!==null&&mp(o,r,h,m),o.flags|=262144}function xu(r){for(r=r.firstContext;r!==null;){if(!ti(r.context._currentValue,r.memoizedValue))return!0;r=r.next}return!1}function pc(r){po=r,ga=null,r=r.dependencies,r!==null&&(r.firstContext=null)}function Ki(r){return Kg(po,r)}function nh(r,o){return po===null&&pc(r),Kg(r,o)}function Kg(r,o){var h=o._currentValue;if(o={context:o,memoizedValue:h,next:null},ga===null){if(r===null)throw Error(i(308));ga=o,r.dependencies={lanes:0,firstContext:o},r.flags|=524288}else ga=ga.next=o;return h}var Ox=typeof AbortController<"u"?AbortController:function(){var r=[],o=this.signal={aborted:!1,addEventListener:function(h,m){r.push(m)}};this.abort=function(){o.aborted=!0,r.forEach(function(h){return h()})}},Nx=n.unstable_scheduleCallback,Qg=n.unstable_NormalPriority,Ot={$$typeof:B,Consumer:null,Provider:null,_currentValue:null,_currentValue2:null,_threadCount:0};function Zg(){return{controller:new Ox,data:new Map,refCount:0}}function ra(r){r.refCount--,r.refCount===0&&Nx(Qg,function(){r.controller.abort()})}var mc=null,$g=0,vo=0,os=null;function bu(r,o){if(mc===null){var h=mc=[];$g=0,vo=tE(),os={status:"pending",value:void 0,then:function(m){h.push(m)}}}return $g++,o.then(e0,e0),o}function e0(){if(--$g===0&&mc!==null){os!==null&&(os.status="fulfilled");var r=mc;mc=null,vo=0,os=null;for(var o=0;o<r.length;o++)(0,r[o])()}}function t0(r,o){var h=[],m={status:"pending",value:null,reason:null,then:function(b){h.push(b)}};return r.then(function(){m.status="fulfilled",m.value=o;for(var b=0;b<h.length;b++)(0,h[b])(o)},function(b){for(m.status="rejected",m.reason=b,b=0;b<h.length;b++)(0,h[b])(void 0)}),m}var Ux=G.S;G.S=function(r,o){Lu=I(),typeof o=="object"&&o!==null&&typeof o.then=="function"&&bu(r,o),Ux!==null&&Ux(r,o)};var ul=q(null);function Ls(){var r=ul.current;return r!==null?r:Un.pooledCache}function Au(r,o){o===null?Te(ul,ul.current):Te(ul,o.pool)}function gp(){var r=Ls();return r===null?null:{parent:Ot._currentValue,pool:r}}var fl=Error(i(460)),ih=Error(i(474)),ls=Error(i(542)),ah={then:function(){}};function Lx(r){return r=r.status,r==="fulfilled"||r==="rejected"}function n0(r,o,h){switch(h=r[h],h===void 0?r.push(o):h!==o&&(o.then(Rs,Rs),o=h),o.status){case"fulfilled":return o.value;case"rejected":throw r=o.reason,i0(r),r;default:if(typeof o.status=="string")o.then(Rs,Rs);else{if(r=Un,r!==null&&100<r.shellSuspendCounter)throw Error(i(482));r=o,r.status="pending",r.then(function(m){if(o.status==="pending"){var b=o;b.status="fulfilled",b.value=m}},function(m){if(o.status==="pending"){var b=o;b.status="rejected",b.reason=m}})}switch(o.status){case"fulfilled":return o.value;case"rejected":throw r=o.reason,i0(r),r}throw Ft=o,fl}}function gc(r){try{var o=r._init;return o(r._payload)}catch(h){throw h!==null&&typeof h=="object"&&typeof h.then=="function"?(Ft=h,fl):h}}var Ft=null;function vp(){if(Ft===null)throw Error(i(459));var r=Ft;return Ft=null,r}function i0(r){if(r===fl||r===ls)throw Error(i(483))}var hl=null,dl=0;function yp(r){var o=dl;return dl+=1,hl===null&&(hl=[]),n0(hl,r,o)}function rh(r,o){o=o.props.ref,r.ref=o!==void 0?o:null}function sh(r,o){throw o.$$typeof===_?Error(i(525)):(r=Object.prototype.toString.call(o),Error(i(31,r==="[object Object]"?"object with keys {"+Object.keys(o).join(", ")+"}":r)))}function Su(r){function o(he,se){if(r){var ve=he.deletions;ve===null?(he.deletions=[se],he.flags|=16):ve.push(se)}}function h(he,se){if(!r)return null;for(;se!==null;)o(he,se),se=se.sibling;return null}function m(he){for(var se=new Map;he!==null;)he.key!==null?se.set(he.key,he):se.set(he.index,he),he=he.sibling;return se}function b(he,se){return he=Ds(he,se),he.index=0,he.sibling=null,he}function E(he,se,ve){return he.index=ve,r?(ve=he.alternate,ve!==null?(ve=ve.index,ve<se?(he.flags|=67108866,se):ve):(he.flags|=67108866,se)):(he.flags|=1048576,se)}function N(he){return r&&he.alternate===null&&(he.flags|=67108866),he}function X(he,se,ve,Le){return se===null||se.tag!==6?(se=fp(ve,he.mode,Le),se.return=he,se):(se=b(se,ve),se.return=he,se)}function ie(he,se,ve,Le){var Lt=ve.type;return Lt===C?Oe(he,se,ve.props.children,Le,ve.key):se!==null&&(se.elementType===Lt||typeof Lt=="object"&&Lt!==null&&Lt.$$typeof===j&&gc(Lt)===se.type)?(se=b(se,ve.props),rh(se,ve),se.return=he,se):(se=Zf(ve.type,ve.key,ve.props,null,he.mode,Le),rh(se,ve),se.return=he,se)}function ye(he,se,ve,Le){return se===null||se.tag!==4||se.stateNode.containerInfo!==ve.containerInfo||se.stateNode.implementation!==ve.implementation?(se=rs(ve,he.mode,Le),se.return=he,se):(se=b(se,ve.children||[]),se.return=he,se)}function Oe(he,se,ve,Le,Lt){return se===null||se.tag!==7?(se=uo(ve,he.mode,Le,Lt),se.return=he,se):(se=b(se,ve),se.return=he,se)}function ze(he,se,ve){if(typeof se=="string"&&se!==""||typeof se=="number"||typeof se=="bigint")return se=fp(""+se,he.mode,ve),se.return=he,se;if(typeof se=="object"&&se!==null){switch(se.$$typeof){case x:return ve=Zf(se.type,se.key,se.props,null,he.mode,ve),rh(ve,se),ve.return=he,ve;case S:return se=rs(se,he.mode,ve),se.return=he,se;case j:return se=gc(se),ze(he,se,ve)}if(le(se)||te(se))return se=uo(se,he.mode,ve,null),se.return=he,se;if(typeof se.then=="function")return ze(he,yp(se),ve);if(se.$$typeof===B)return ze(he,nh(he,se),ve);sh(he,se)}return null}function Se(he,se,ve,Le){var Lt=se!==null?se.key:null;if(typeof ve=="string"&&ve!==""||typeof ve=="number"||typeof ve=="bigint")return Lt!==null?null:X(he,se,""+ve,Le);if(typeof ve=="object"&&ve!==null){switch(ve.$$typeof){case x:return ve.key===Lt?ie(he,se,ve,Le):null;case S:return ve.key===Lt?ye(he,se,ve,Le):null;case j:return ve=gc(ve),Se(he,se,ve,Le)}if(le(ve)||te(ve))return Lt!==null?null:Oe(he,se,ve,Le,null);if(typeof ve.then=="function")return Se(he,se,yp(ve),Le);if(ve.$$typeof===B)return Se(he,se,nh(he,ve),Le);sh(he,ve)}return null}function we(he,se,ve,Le,Lt){if(typeof Le=="string"&&Le!==""||typeof Le=="number"||typeof Le=="bigint")return he=he.get(ve)||null,X(se,he,""+Le,Lt);if(typeof Le=="object"&&Le!==null){switch(Le.$$typeof){case x:return he=he.get(Le.key===null?ve:Le.key)||null,ie(se,he,Le,Lt);case S:return he=he.get(Le.key===null?ve:Le.key)||null,ye(se,he,Le,Lt);case j:return Le=gc(Le),we(he,se,ve,Le,Lt)}if(le(Le)||te(Le))return he=he.get(ve)||null,Oe(se,he,Le,Lt,null);if(typeof Le.then=="function")return we(he,se,ve,yp(Le),Lt);if(Le.$$typeof===B)return we(he,se,ve,nh(se,Le),Lt);sh(se,Le)}return null}function Mt(he,se,ve,Le){for(var Lt=null,In=null,Rt=se,ln=se=0,xn=null;Rt!==null&&ln<ve.length;ln++){Rt.index>ln?(xn=Rt,Rt=null):xn=Rt.sibling;var Pn=Se(he,Rt,ve[ln],Le);if(Pn===null){Rt===null&&(Rt=xn);break}r&&Rt&&Pn.alternate===null&&o(he,Rt),se=E(Pn,se,ln),In===null?Lt=Pn:In.sibling=Pn,In=Pn,Rt=xn}if(ln===ve.length)return h(he,Rt),mn&&fo(he,ln),Lt;if(Rt===null){for(;ln<ve.length;ln++)Rt=ze(he,ve[ln],Le),Rt!==null&&(se=E(Rt,se,ln),In===null?Lt=Rt:In.sibling=Rt,In=Rt);return mn&&fo(he,ln),Lt}for(Rt=m(Rt);ln<ve.length;ln++)xn=we(Rt,he,ln,ve[ln],Le),xn!==null&&(r&&xn.alternate!==null&&Rt.delete(xn.key===null?ln:xn.key),se=E(xn,se,ln),In===null?Lt=xn:In.sibling=xn,In=xn);return r&&Rt.forEach(function(ku){return o(he,ku)}),mn&&fo(he,ln),Lt}function Gt(he,se,ve,Le){if(ve==null)throw Error(i(151));for(var Lt=null,In=null,Rt=se,ln=se=0,xn=null,Pn=ve.next();Rt!==null&&!Pn.done;ln++,Pn=ve.next()){Rt.index>ln?(xn=Rt,Rt=null):xn=Rt.sibling;var ku=Se(he,Rt,Pn.value,Le);if(ku===null){Rt===null&&(Rt=xn);break}r&&Rt&&ku.alternate===null&&o(he,Rt),se=E(ku,se,ln),In===null?Lt=ku:In.sibling=ku,In=ku,Rt=xn}if(Pn.done)return h(he,Rt),mn&&fo(he,ln),Lt;if(Rt===null){for(;!Pn.done;ln++,Pn=ve.next())Pn=ze(he,Pn.value,Le),Pn!==null&&(se=E(Pn,se,ln),In===null?Lt=Pn:In.sibling=Pn,In=Pn);return mn&&fo(he,ln),Lt}for(Rt=m(Rt);!Pn.done;ln++,Pn=ve.next())Pn=we(Rt,he,ln,Pn.value,Le),Pn!==null&&(r&&Pn.alternate!==null&&Rt.delete(Pn.key===null?ln:Pn.key),se=E(Pn,se,ln),In===null?Lt=Pn:In.sibling=Pn,In=Pn);return r&&Rt.forEach(function(Lq){return o(he,Lq)}),mn&&fo(he,ln),Lt}function Qn(he,se,ve,Le){if(typeof ve=="object"&&ve!==null&&ve.type===C&&ve.key===null&&(ve=ve.props.children),typeof ve=="object"&&ve!==null){switch(ve.$$typeof){case x:e:{for(var Lt=ve.key;se!==null;){if(se.key===Lt){if(Lt=ve.type,Lt===C){if(se.tag===7){h(he,se.sibling),Le=b(se,ve.props.children),Le.return=he,he=Le;break e}}else if(se.elementType===Lt||typeof Lt=="object"&&Lt!==null&&Lt.$$typeof===j&&gc(Lt)===se.type){h(he,se.sibling),Le=b(se,ve.props),rh(Le,ve),Le.return=he,he=Le;break e}h(he,se);break}else o(he,se);se=se.sibling}ve.type===C?(Le=uo(ve.props.children,he.mode,Le,ve.key),Le.return=he,he=Le):(Le=Zf(ve.type,ve.key,ve.props,null,he.mode,Le),rh(Le,ve),Le.return=he,he=Le)}return N(he);case S:e:{for(Lt=ve.key;se!==null;){if(se.key===Lt)if(se.tag===4&&se.stateNode.containerInfo===ve.containerInfo&&se.stateNode.implementation===ve.implementation){h(he,se.sibling),Le=b(se,ve.children||[]),Le.return=he,he=Le;break e}else{h(he,se);break}else o(he,se);se=se.sibling}Le=rs(ve,he.mode,Le),Le.return=he,he=Le}return N(he);case j:return ve=gc(ve),Qn(he,se,ve,Le)}if(le(ve))return Mt(he,se,ve,Le);if(te(ve)){if(Lt=te(ve),typeof Lt!="function")throw Error(i(150));return ve=Lt.call(ve),Gt(he,se,ve,Le)}if(typeof ve.then=="function")return Qn(he,se,yp(ve),Le);if(ve.$$typeof===B)return Qn(he,se,nh(he,ve),Le);sh(he,ve)}return typeof ve=="string"&&ve!==""||typeof ve=="number"||typeof ve=="bigint"?(ve=""+ve,se!==null&&se.tag===6?(h(he,se.sibling),Le=b(se,ve),Le.return=he,he=Le):(h(he,se),Le=fp(ve,he.mode,Le),Le.return=he,he=Le),N(he)):h(he,se)}return function(he,se,ve,Le){try{dl=0;var Lt=Qn(he,se,ve,Le);return hl=null,Lt}catch(Rt){if(Rt===fl||Rt===ls)throw Rt;var In=Ta(29,Rt,null,he.mode);return In.lanes=Le,In.return=he,In}}}var vc=Su(!0),Ix=Su(!1),pl=!1;function a0(r){r.updateQueue={baseState:r.memoizedState,firstBaseUpdate:null,lastBaseUpdate:null,shared:{pending:null,lanes:0,hiddenCallbacks:null},callbacks:null}}function r0(r,o){r=r.updateQueue,o.updateQueue===r&&(o.updateQueue={baseState:r.baseState,firstBaseUpdate:r.firstBaseUpdate,lastBaseUpdate:r.lastBaseUpdate,shared:r.shared,callbacks:null})}function Is(r){return{lane:r,tag:0,payload:null,callback:null,next:null}}function yo(r,o,h){var m=r.updateQueue;if(m===null)return null;if(m=m.shared,(yn&2)!==0){var b=m.pending;return b===null?o.next=o:(o.next=b.next,b.next=o),m.pending=o,o=yu(r),up(r,null,h),o}return Qf(r,m,o,h),yu(r)}function ml(r,o,h){if(o=o.updateQueue,o!==null&&(o=o.shared,(h&4194048)!==0)){var m=o.lanes;m&=r.pendingLanes,h|=m,o.lanes=h,Kl(r,h)}}function _p(r,o){var h=r.updateQueue,m=r.alternate;if(m!==null&&(m=m.updateQueue,h===m)){var b=null,E=null;if(h=h.firstBaseUpdate,h!==null){do{var N={lane:h.lane,tag:h.tag,payload:h.payload,callback:null,next:null};E===null?b=E=N:E=E.next=N,h=h.next}while(h!==null);E===null?b=E=o:E=E.next=o}else b=E=o;h={baseState:m.baseState,firstBaseUpdate:b,lastBaseUpdate:E,shared:m.shared,callbacks:m.callbacks},r.updateQueue=h;return}r=h.lastBaseUpdate,r===null?h.firstBaseUpdate=o:r.next=o,h.lastBaseUpdate=o}var s0=!1;function oh(){if(s0){var r=os;if(r!==null)throw r}}function yc(r,o,h,m){s0=!1;var b=r.updateQueue;pl=!1;var E=b.firstBaseUpdate,N=b.lastBaseUpdate,X=b.shared.pending;if(X!==null){b.shared.pending=null;var ie=X,ye=ie.next;ie.next=null,N===null?E=ye:N.next=ye,N=ie;var Oe=r.alternate;Oe!==null&&(Oe=Oe.updateQueue,X=Oe.lastBaseUpdate,X!==N&&(X===null?Oe.firstBaseUpdate=ye:X.next=ye,Oe.lastBaseUpdate=ie))}if(E!==null){var ze=b.baseState;N=0,Oe=ye=ie=null,X=E;do{var Se=X.lane&-536870913,we=Se!==X.lane;if(we?(hn&Se)===Se:(m&Se)===Se){Se!==0&&Se===vo&&(s0=!0),Oe!==null&&(Oe=Oe.next={lane:0,tag:X.tag,payload:X.payload,callback:null,next:null});e:{var Mt=r,Gt=X;Se=o;var Qn=h;switch(Gt.tag){case 1:if(Mt=Gt.payload,typeof Mt=="function"){ze=Mt.call(Qn,ze,Se);break e}ze=Mt;break e;case 3:Mt.flags=Mt.flags&-65537|128;case 0:if(Mt=Gt.payload,Se=typeof Mt=="function"?Mt.call(Qn,ze,Se):Mt,Se==null)break e;ze=v({},ze,Se);break e;case 2:pl=!0}}Se=X.callback,Se!==null&&(r.flags|=64,we&&(r.flags|=8192),we=b.callbacks,we===null?b.callbacks=[Se]:we.push(Se))}else we={lane:Se,tag:X.tag,payload:X.payload,callback:X.callback,next:null},Oe===null?(ye=Oe=we,ie=ze):Oe=Oe.next=we,N|=Se;if(X=X.next,X===null){if(X=b.shared.pending,X===null)break;we=X,X=we.next,we.next=null,b.lastBaseUpdate=we,b.shared.pending=null}}while(!0);Oe===null&&(ie=ze),b.baseState=ie,b.firstBaseUpdate=ye,b.lastBaseUpdate=Oe,E===null&&(b.shared.lanes=0),Er|=N,r.lanes=N,r.memoizedState=ze}}function Ps(r,o){if(typeof r!="function")throw Error(i(191,r));r.call(o)}function sa(r,o){var h=r.callbacks;if(h!==null)for(r.callbacks=null,r=0;r<h.length;r++)Ps(h[r],o)}var mr=q(null),Ra=q(0);function o0(r,o){r=Mi,Te(Ra,r),Te(mr,o),Mi=r|o.baseLanes}function l0(){Te(Ra,Mi),Te(mr,mr.current)}function va(){Mi=Ra.current,ce(mr),ce(Ra)}var zi=q(null),Hr=null;function gl(r){var o=r.alternate;Te(ui,ui.current&1),Te(zi,r),Hr===null&&(o===null||mr.current!==null||o.memoizedState!==null)&&(Hr=r)}function c0(r){Te(ui,ui.current),Te(zi,r),Hr===null&&(Hr=r)}function Px(r){r.tag===22?(Te(ui,ui.current),Te(zi,r),Hr===null&&(Hr=r)):_o()}function _o(){Te(ui,ui.current),Te(zi,zi.current)}function gr(r){ce(zi),Hr===r&&(Hr=null),ce(ui)}var ui=q(0);function xp(r){for(var o=r;o!==null;){if(o.tag===13){var h=o.memoizedState;if(h!==null&&(h=h.dehydrated,h===null||dE(h)||pE(h)))return o}else if(o.tag===19&&(o.memoizedProps.revealOrder==="forwards"||o.memoizedProps.revealOrder==="backwards"||o.memoizedProps.revealOrder==="unstable_legacy-backwards"||o.memoizedProps.revealOrder==="together")){if((o.flags&128)!==0)return o}else if(o.child!==null){o.child.return=o,o=o.child;continue}if(o===r)break;for(;o.sibling===null;){if(o.return===null||o.return===r)return null;o=o.return}o.sibling.return=o.return,o=o.sibling}return null}var ja=0,kt=null,Gn=null,Di=null,bp=!1,Fs=!1,_c=!1,Ap=0,lh=0,zs=null,jM=0;function fi(){throw Error(i(321))}function u0(r,o){if(o===null)return!1;for(var h=0;h<o.length&&h<r.length;h++)if(!ti(r[h],o[h]))return!1;return!0}function f0(r,o,h,m,b,E){return ja=E,kt=o,o.memoizedState=null,o.updateQueue=null,o.lanes=0,G.H=r===null||r.memoizedState===null?ib:Tu,_c=!1,E=h(m,b),_c=!1,Fs&&(E=zx(o,h,m,b)),Fx(r),E}function Fx(r){G.H=dh;var o=Gn!==null&&Gn.next!==null;if(ja=0,Di=Gn=kt=null,bp=!1,lh=0,zs=null,o)throw Error(i(300));r===null||ni||(r=r.dependencies,r!==null&&xu(r)&&(ni=!0))}function zx(r,o,h,m){kt=r;var b=0;do{if(Fs&&(zs=null),lh=0,Fs=!1,25<=b)throw Error(i(301));if(b+=1,Di=Gn=null,r.updateQueue!=null){var E=r.updateQueue;E.lastEffect=null,E.events=null,E.stores=null,E.memoCache!=null&&(E.memoCache.index=0)}G.H=ph,E=o(h,m)}while(Fs);return E}function YM(){var r=G.H,o=r.useState()[0];return o=typeof o.then=="function"?uh(o):o,r=r.useState()[0],(Gn!==null?Gn.memoizedState:null)!==r&&(kt.flags|=1024),o}function h0(){var r=Ap!==0;return Ap=0,r}function d0(r,o,h){o.updateQueue=r.updateQueue,o.flags&=-2053,r.lanes&=~h}function p0(r){if(bp){for(r=r.memoizedState;r!==null;){var o=r.queue;o!==null&&(o.pending=null),r=r.next}bp=!1}ja=0,Di=Gn=kt=null,Fs=!1,lh=Ap=0,zs=null}function wa(){var r={memoizedState:null,baseState:null,baseQueue:null,queue:null,next:null};return Di===null?kt.memoizedState=Di=r:Di=Di.next=r,Di}function xi(){if(Gn===null){var r=kt.alternate;r=r!==null?r.memoizedState:null}else r=Gn.next;var o=Di===null?kt.memoizedState:Di.next;if(o!==null)Di=o,Gn=r;else{if(r===null)throw kt.alternate===null?Error(i(467)):Error(i(310));Gn=r,r={memoizedState:Gn.memoizedState,baseState:Gn.baseState,baseQueue:Gn.baseQueue,queue:Gn.queue,next:null},Di===null?kt.memoizedState=Di=r:Di=Di.next=r}return Di}function ch(){return{lastEffect:null,events:null,stores:null,memoCache:null}}function uh(r){var o=lh;return lh+=1,zs===null&&(zs=[]),r=n0(zs,r,o),o=kt,(Di===null?o.memoizedState:Di.next)===null&&(o=o.alternate,G.H=o===null||o.memoizedState===null?ib:Tu),r}function Sp(r){if(r!==null&&typeof r=="object"){if(typeof r.then=="function")return uh(r);if(r.$$typeof===B)return Ki(r)}throw Error(i(438,String(r)))}function m0(r){var o=null,h=kt.updateQueue;if(h!==null&&(o=h.memoCache),o==null){var m=kt.alternate;m!==null&&(m=m.updateQueue,m!==null&&(m=m.memoCache,m!=null&&(o={data:m.data.map(function(b){return b.slice()}),index:0})))}if(o==null&&(o={data:[],index:0}),h===null&&(h=ch(),kt.updateQueue=h),h.memoCache=o,h=o.data[o.index],h===void 0)for(h=o.data[o.index]=Array(r),m=0;m<r;m++)h[m]=F;return o.index++,h}function xo(r,o){return typeof o=="function"?o(r):o}function Mp(r){var o=xi();return g0(o,Gn,r)}function g0(r,o,h){var m=r.queue;if(m===null)throw Error(i(311));m.lastRenderedReducer=h;var b=r.baseQueue,E=m.pending;if(E!==null){if(b!==null){var N=b.next;b.next=E.next,E.next=N}o.baseQueue=b=E,m.pending=null}if(E=r.baseState,b===null)r.memoizedState=E;else{o=b.next;var X=N=null,ie=null,ye=o,Oe=!1;do{var ze=ye.lane&-536870913;if(ze!==ye.lane?(hn&ze)===ze:(ja&ze)===ze){var Se=ye.revertLane;if(Se===0)ie!==null&&(ie=ie.next={lane:0,revertLane:0,gesture:null,action:ye.action,hasEagerState:ye.hasEagerState,eagerState:ye.eagerState,next:null}),ze===vo&&(Oe=!0);else if((ja&Se)===Se){ye=ye.next,Se===vo&&(Oe=!0);continue}else ze={lane:0,revertLane:ye.revertLane,gesture:null,action:ye.action,hasEagerState:ye.hasEagerState,eagerState:ye.eagerState,next:null},ie===null?(X=ie=ze,N=E):ie=ie.next=ze,kt.lanes|=Se,Er|=Se;ze=ye.action,_c&&h(E,ze),E=ye.hasEagerState?ye.eagerState:h(E,ze)}else Se={lane:ze,revertLane:ye.revertLane,gesture:ye.gesture,action:ye.action,hasEagerState:ye.hasEagerState,eagerState:ye.eagerState,next:null},ie===null?(X=ie=Se,N=E):ie=ie.next=Se,kt.lanes|=ze,Er|=ze;ye=ye.next}while(ye!==null&&ye!==o);if(ie===null?N=E:ie.next=X,!ti(E,r.memoizedState)&&(ni=!0,Oe&&(h=os,h!==null)))throw h;r.memoizedState=E,r.baseState=N,r.baseQueue=ie,m.lastRenderedState=E}return b===null&&(m.lanes=0),[r.memoizedState,m.dispatch]}function Ep(r){var o=xi(),h=o.queue;if(h===null)throw Error(i(311));h.lastRenderedReducer=r;var m=h.dispatch,b=h.pending,E=o.memoizedState;if(b!==null){h.pending=null;var N=b=b.next;do E=r(E,N.action),N=N.next;while(N!==b);ti(E,o.memoizedState)||(ni=!0),o.memoizedState=E,o.baseQueue===null&&(o.baseState=E),h.lastRenderedState=E}return[E,m]}function v0(r,o,h){var m=kt,b=xi(),E=mn;if(E){if(h===void 0)throw Error(i(407));h=h()}else h=o();var N=!ti((Gn||b).memoizedState,h);if(N&&(b.memoizedState=h,ni=!0),b=b.queue,A0(_0.bind(null,m,b,r),[r]),b.getSnapshot!==o||N||Di!==null&&Di.memoizedState.tag&1){if(m.flags|=2048,Mu(9,{destroy:void 0},y0.bind(null,m,b,h,o),null),Un===null)throw Error(i(349));E||(ja&127)!==0||Hx(m,o,h)}return h}function Hx(r,o,h){r.flags|=16384,r={getSnapshot:o,value:h},o=kt.updateQueue,o===null?(o=ch(),kt.updateQueue=o,o.stores=[r]):(h=o.stores,h===null?o.stores=[r]:h.push(r))}function y0(r,o,h,m){o.value=h,o.getSnapshot=m,x0(o)&&Tp(r)}function _0(r,o,h){return h(function(){x0(o)&&Tp(r)})}function x0(r){var o=r.getSnapshot;r=r.value;try{var h=o();return!ti(r,h)}catch{return!0}}function Tp(r){var o=sl(r,2);o!==null&&f(o,r,2)}function fh(r){var o=wa();if(typeof r=="function"){var h=r;if(r=h(),_c){nt(!0);try{h()}finally{nt(!1)}}}return o.memoizedState=o.baseState=r,o.queue={pending:null,lanes:0,dispatch:null,lastRenderedReducer:xo,lastRenderedState:r},o}function Gx(r,o,h,m){return r.baseState=h,g0(r,Gn,typeof m=="function"?m:xo)}function qM(r,o,h,m,b){if(bo(r))throw Error(i(485));if(r=o.action,r!==null){var E={payload:b,action:r,next:null,isTransition:!0,status:"pending",value:null,reason:null,listeners:[],then:function(N){E.listeners.push(N)}};G.T!==null?h(!0):E.isTransition=!1,m(E),h=o.pending,h===null?(E.next=o.pending=E,Vx(o,E)):(E.next=h.next,o.pending=h.next=E)}}function Vx(r,o){var h=o.action,m=o.payload,b=r.state;if(o.isTransition){var E=G.T,N={};G.T=N;try{var X=h(b,m),ie=G.S;ie!==null&&ie(N,X),kx(r,o,X)}catch(ye){Cp(r,o,ye)}finally{E!==null&&N.types!==null&&(E.types=N.types),G.T=E}}else try{E=h(b,m),kx(r,o,E)}catch(ye){Cp(r,o,ye)}}function kx(r,o,h){h!==null&&typeof h=="object"&&typeof h.then=="function"?h.then(function(m){b0(r,o,m)},function(m){return Cp(r,o,m)}):b0(r,o,h)}function b0(r,o,h){o.status="fulfilled",o.value=h,Xx(o),r.state=h,o=r.pending,o!==null&&(h=o.next,h===o?r.pending=null:(h=h.next,o.next=h,Vx(r,h)))}function Cp(r,o,h){var m=r.pending;if(r.pending=null,m!==null){m=m.next;do o.status="rejected",o.reason=h,Xx(o),o=o.next;while(o!==m)}r.action=null}function Xx(r){r=r.listeners;for(var o=0;o<r.length;o++)(0,r[o])()}function jx(r,o){return o}function Yx(r,o){if(mn){var h=Un.formState;if(h!==null){e:{var m=kt;if(mn){if(Wn){t:{for(var b=Wn,E=Ji;b.nodeType!==8;){if(!E){b=null;break t}if(b=js(b.nextSibling),b===null){b=null;break t}}E=b.data,b=E==="F!"||E==="F"?b:null}if(b){Wn=js(b.nextSibling),m=b.data==="F!";break e}}fn(m)}m=!1}m&&(o=h[0])}}return h=wa(),h.memoizedState=h.baseState=o,m={pending:null,lanes:0,dispatch:null,lastRenderedReducer:jx,lastRenderedState:o},h.queue=m,h=nb.bind(null,kt,m),m.dispatch=h,m=fh(!1),E=hh.bind(null,kt,!1,m.queue),m=wa(),b={state:o,dispatch:null,action:r,pending:null},m.queue=b,h=qM.bind(null,kt,b,E,h),b.dispatch=h,m.memoizedState=r,[o,h,!1]}function qx(r){var o=xi();return Wx(o,Gn,r)}function Wx(r,o,h){if(o=g0(r,o,jx)[0],r=Mp(xo)[0],typeof o=="object"&&o!==null&&typeof o.then=="function")try{var m=uh(o)}catch(N){throw N===fl?ls:N}else m=o;o=xi();var b=o.queue,E=b.dispatch;return h!==o.memoizedState&&(kt.flags|=2048,Mu(9,{destroy:void 0},WM.bind(null,b,h),null)),[m,E,r]}function WM(r,o){r.action=o}function Jx(r){var o=xi(),h=Gn;if(h!==null)return Wx(o,h,r);xi(),o=o.memoizedState,h=xi();var m=h.queue.dispatch;return h.memoizedState=r,[o,m,!1]}function Mu(r,o,h,m){return r={tag:r,create:h,deps:m,inst:o,next:null},o=kt.updateQueue,o===null&&(o=ch(),kt.updateQueue=o),h=o.lastEffect,h===null?o.lastEffect=r.next=r:(m=h.next,h.next=r,r.next=m,o.lastEffect=r),r}function Kx(){return xi().memoizedState}function Rp(r,o,h,m){var b=wa();kt.flags|=r,b.memoizedState=Mu(1|o,{destroy:void 0},h,m===void 0?null:m)}function wp(r,o,h,m){var b=xi();m=m===void 0?null:m;var E=b.memoizedState.inst;Gn!==null&&m!==null&&u0(m,Gn.memoizedState.deps)?b.memoizedState=Mu(o,E,h,m):(kt.flags|=r,b.memoizedState=Mu(1|o,E,h,m))}function Qx(r,o){Rp(8390656,8,r,o)}function A0(r,o){wp(2048,8,r,o)}function Zx(r){kt.flags|=4;var o=kt.updateQueue;if(o===null)o=ch(),kt.updateQueue=o,o.events=[r];else{var h=o.events;h===null?o.events=[r]:h.push(r)}}function $x(r){var o=xi().memoizedState;return Zx({ref:o,nextImpl:r}),function(){if((yn&2)!==0)throw Error(i(440));return o.impl.apply(void 0,arguments)}}function eb(r,o){return wp(4,2,r,o)}function vr(r,o){return wp(4,4,r,o)}function S0(r,o){if(typeof o=="function"){r=r();var h=o(r);return function(){typeof h=="function"?h():o(null)}}if(o!=null)return r=r(),o.current=r,function(){o.current=null}}function Bp(r,o,h){h=h!=null?h.concat([r]):null,wp(4,4,S0.bind(null,o,r),h)}function Dp(){}function M0(r,o){var h=xi();o=o===void 0?null:o;var m=h.memoizedState;return o!==null&&u0(o,m[1])?m[0]:(h.memoizedState=[r,o],r)}function E0(r,o){var h=xi();o=o===void 0?null:o;var m=h.memoizedState;if(o!==null&&u0(o,m[1]))return m[0];if(m=r(),_c){nt(!0);try{r()}finally{nt(!1)}}return h.memoizedState=[m,o],m}function T0(r,o,h){return h===void 0||(ja&1073741824)!==0&&(hn&261930)===0?r.memoizedState=o:(r.memoizedState=h,r=u(),kt.lanes|=r,Er|=r,h)}function C0(r,o,h,m){return ti(h,o)?h:mr.current!==null?(r=T0(r,h,m),ti(r,o)||(ni=!0),r):(ja&42)===0||(ja&1073741824)!==0&&(hn&261930)===0?(ni=!0,r.memoizedState=h):(r=u(),kt.lanes|=r,Er|=r,o)}function R0(r,o,h,m,b){var E=J.p;J.p=E!==0&&8>E?E:8;var N=G.T,X={};G.T=X,hh(r,!1,o,h);try{var ie=b(),ye=G.S;if(ye!==null&&ye(X,ie),ie!==null&&typeof ie=="object"&&typeof ie.then=="function"){var Oe=t0(ie,m);Eu(r,o,Oe,Da(r))}else Eu(r,o,m,Da(r))}catch(ze){Eu(r,o,{then:function(){},status:"rejected",reason:ze},Da())}finally{J.p=E,N!==null&&X.types!==null&&(N.types=X.types),G.T=N}}function JM(){}function w0(r,o,h,m){if(r.tag!==5)throw Error(i(476));var b=tb(r).queue;R0(r,b,o,Z,h===null?JM:function(){return B0(r),h(m)})}function tb(r){var o=r.memoizedState;if(o!==null)return o;o={memoizedState:Z,baseState:Z,baseQueue:null,queue:{pending:null,lanes:0,dispatch:null,lastRenderedReducer:xo,lastRenderedState:Z},next:null};var h={};return o.next={memoizedState:h,baseState:h,baseQueue:null,queue:{pending:null,lanes:0,dispatch:null,lastRenderedReducer:xo,lastRenderedState:h},next:null},r.memoizedState=o,r=r.alternate,r!==null&&(r.memoizedState=o),o}function B0(r){var o=tb(r);o.next===null&&(o=r.alternate.memoizedState),Eu(r,o.next.queue,{},Da())}function D0(){return Ki(X0)}function oa(){return xi().memoizedState}function O0(){return xi().memoizedState}function KM(r){for(var o=r.return;o!==null;){switch(o.tag){case 24:case 3:var h=Da();r=Is(h);var m=yo(o,r,h);m!==null&&(f(m,o,h),ml(m,o,h)),o={cache:Zg()},r.payload=o;return}o=o.return}}function QM(r,o,h){var m=Da();h={lane:m,revertLane:0,gesture:null,action:h,hasEagerState:!1,eagerState:null,next:null},bo(r)?xc(o,h):(h=vu(r,o,h,m),h!==null&&(f(h,r,m),Ya(h,o,m)))}function nb(r,o,h){var m=Da();Eu(r,o,h,m)}function Eu(r,o,h,m){var b={lane:m,revertLane:0,gesture:null,action:h,hasEagerState:!1,eagerState:null,next:null};if(bo(r))xc(o,b);else{var E=r.alternate;if(r.lanes===0&&(E===null||E.lanes===0)&&(E=o.lastRenderedReducer,E!==null))try{var N=o.lastRenderedState,X=E(N,h);if(b.hasEagerState=!0,b.eagerState=X,ti(X,N))return Qf(r,o,b,0),Un===null&&rl(),!1}catch{}if(h=vu(r,o,b,m),h!==null)return f(h,r,m),Ya(h,o,m),!0}return!1}function hh(r,o,h,m){if(m={lane:2,revertLane:tE(),gesture:null,action:m,hasEagerState:!1,eagerState:null,next:null},bo(r)){if(o)throw Error(i(479))}else o=vu(r,h,m,2),o!==null&&f(o,r,2)}function bo(r){var o=r.alternate;return r===kt||o!==null&&o===kt}function xc(r,o){Fs=bp=!0;var h=r.pending;h===null?o.next=o:(o.next=h.next,h.next=o),r.pending=o}function Ya(r,o,h){if((h&4194048)!==0){var m=o.lanes;m&=r.pendingLanes,h|=m,o.lanes=h,Kl(r,h)}}var dh={readContext:Ki,use:Sp,useCallback:fi,useContext:fi,useEffect:fi,useImperativeHandle:fi,useLayoutEffect:fi,useInsertionEffect:fi,useMemo:fi,useReducer:fi,useRef:fi,useState:fi,useDebugValue:fi,useDeferredValue:fi,useTransition:fi,useSyncExternalStore:fi,useId:fi,useHostTransitionStatus:fi,useFormState:fi,useActionState:fi,useOptimistic:fi,useMemoCache:fi,useCacheRefresh:fi};dh.useEffectEvent=fi;var ib={readContext:Ki,use:Sp,useCallback:function(r,o){return wa().memoizedState=[r,o===void 0?null:o],r},useContext:Ki,useEffect:Qx,useImperativeHandle:function(r,o,h){h=h!=null?h.concat([r]):null,Rp(4194308,4,S0.bind(null,o,r),h)},useLayoutEffect:function(r,o){return Rp(4194308,4,r,o)},useInsertionEffect:function(r,o){Rp(4,2,r,o)},useMemo:function(r,o){var h=wa();o=o===void 0?null:o;var m=r();if(_c){nt(!0);try{r()}finally{nt(!1)}}return h.memoizedState=[m,o],m},useReducer:function(r,o,h){var m=wa();if(h!==void 0){var b=h(o);if(_c){nt(!0);try{h(o)}finally{nt(!1)}}}else b=o;return m.memoizedState=m.baseState=b,r={pending:null,lanes:0,dispatch:null,lastRenderedReducer:r,lastRenderedState:b},m.queue=r,r=r.dispatch=QM.bind(null,kt,r),[m.memoizedState,r]},useRef:function(r){var o=wa();return r={current:r},o.memoizedState=r},useState:function(r){r=fh(r);var o=r.queue,h=nb.bind(null,kt,o);return o.dispatch=h,[r.memoizedState,h]},useDebugValue:Dp,useDeferredValue:function(r,o){var h=wa();return T0(h,r,o)},useTransition:function(){var r=fh(!1);return r=R0.bind(null,kt,r.queue,!0,!1),wa().memoizedState=r,[!1,r]},useSyncExternalStore:function(r,o,h){var m=kt,b=wa();if(mn){if(h===void 0)throw Error(i(407));h=h()}else{if(h=o(),Un===null)throw Error(i(349));(hn&127)!==0||Hx(m,o,h)}b.memoizedState=h;var E={value:h,getSnapshot:o};return b.queue=E,Qx(_0.bind(null,m,E,r),[r]),m.flags|=2048,Mu(9,{destroy:void 0},y0.bind(null,m,E,h,o),null),h},useId:function(){var r=wa(),o=Un.identifierPrefix;if(mn){var h=Us,m=Ns;h=(m&~(1<<32-it(m)-1)).toString(32)+h,o="_"+o+"R_"+h,h=Ap++,0<h&&(o+="H"+h.toString(32)),o+="_"}else h=jM++,o="_"+o+"r_"+h.toString(32)+"_";return r.memoizedState=o},useHostTransitionStatus:D0,useFormState:Yx,useActionState:Yx,useOptimistic:function(r){var o=wa();o.memoizedState=o.baseState=r;var h={pending:null,lanes:0,dispatch:null,lastRenderedReducer:null,lastRenderedState:null};return o.queue=h,o=hh.bind(null,kt,!0,h),h.dispatch=o,[r,o]},useMemoCache:m0,useCacheRefresh:function(){return wa().memoizedState=KM.bind(null,kt)},useEffectEvent:function(r){var o=wa(),h={impl:r};return o.memoizedState=h,function(){if((yn&2)!==0)throw Error(i(440));return h.impl.apply(void 0,arguments)}}},Tu={readContext:Ki,use:Sp,useCallback:M0,useContext:Ki,useEffect:A0,useImperativeHandle:Bp,useInsertionEffect:eb,useLayoutEffect:vr,useMemo:E0,useReducer:Mp,useRef:Kx,useState:function(){return Mp(xo)},useDebugValue:Dp,useDeferredValue:function(r,o){var h=xi();return C0(h,Gn.memoizedState,r,o)},useTransition:function(){var r=Mp(xo)[0],o=xi().memoizedState;return[typeof r=="boolean"?r:uh(r),o]},useSyncExternalStore:v0,useId:oa,useHostTransitionStatus:D0,useFormState:qx,useActionState:qx,useOptimistic:function(r,o){var h=xi();return Gx(h,Gn,r,o)},useMemoCache:m0,useCacheRefresh:O0};Tu.useEffectEvent=$x;var ph={readContext:Ki,use:Sp,useCallback:M0,useContext:Ki,useEffect:A0,useImperativeHandle:Bp,useInsertionEffect:eb,useLayoutEffect:vr,useMemo:E0,useReducer:Ep,useRef:Kx,useState:function(){return Ep(xo)},useDebugValue:Dp,useDeferredValue:function(r,o){var h=xi();return Gn===null?T0(h,r,o):C0(h,Gn.memoizedState,r,o)},useTransition:function(){var r=Ep(xo)[0],o=xi().memoizedState;return[typeof r=="boolean"?r:uh(r),o]},useSyncExternalStore:v0,useId:oa,useHostTransitionStatus:D0,useFormState:Jx,useActionState:Jx,useOptimistic:function(r,o){var h=xi();return Gn!==null?Gx(h,Gn,r,o):(h.baseState=r,[r,h.queue.dispatch])},useMemoCache:m0,useCacheRefresh:O0};ph.useEffectEvent=$x;function Cu(r,o,h,m){o=r.memoizedState,h=h(m,o),h=h==null?o:v({},o,h),r.memoizedState=h,r.lanes===0&&(r.updateQueue.baseState=h)}var mh={enqueueSetState:function(r,o,h){r=r._reactInternals;var m=Da(),b=Is(m);b.payload=o,h!=null&&(b.callback=h),o=yo(r,b,m),o!==null&&(f(o,r,m),ml(o,r,m))},enqueueReplaceState:function(r,o,h){r=r._reactInternals;var m=Da(),b=Is(m);b.tag=1,b.payload=o,h!=null&&(b.callback=h),o=yo(r,b,m),o!==null&&(f(o,r,m),ml(o,r,m))},enqueueForceUpdate:function(r,o){r=r._reactInternals;var h=Da(),m=Is(h);m.tag=2,o!=null&&(m.callback=o),o=yo(r,m,h),o!==null&&(f(o,r,h),ml(o,r,h))}};function ab(r,o,h,m,b,E,N){return r=r.stateNode,typeof r.shouldComponentUpdate=="function"?r.shouldComponentUpdate(m,E,N):o.prototype&&o.prototype.isPureReactComponent?!fu(h,m)||!fu(b,E):!0}function rb(r,o,h,m){r=o.state,typeof o.componentWillReceiveProps=="function"&&o.componentWillReceiveProps(h,m),typeof o.UNSAFE_componentWillReceiveProps=="function"&&o.UNSAFE_componentWillReceiveProps(h,m),o.state!==r&&mh.enqueueReplaceState(o,o.state,null)}function la(r,o){var h=o;if("ref"in o){h={};for(var m in o)m!=="ref"&&(h[m]=o[m])}if(r=r.defaultProps){h===o&&(h=v({},h));for(var b in r)h[b]===void 0&&(h[b]=r[b])}return h}function N0(r){al(r)}function sb(r){console.error(r)}function Op(r){al(r)}function Np(r,o){try{var h=r.onUncaughtError;h(o.value,{componentStack:o.stack})}catch(m){setTimeout(function(){throw m})}}function ob(r,o,h){try{var m=r.onCaughtError;m(h.value,{componentStack:h.stack,errorBoundary:o.tag===1?o.stateNode:null})}catch(b){setTimeout(function(){throw b})}}function U0(r,o,h){return h=Is(h),h.tag=3,h.payload={element:null},h.callback=function(){Np(r,o)},h}function Ru(r){return r=Is(r),r.tag=3,r}function qa(r,o,h,m){var b=h.type.getDerivedStateFromError;if(typeof b=="function"){var E=m.value;r.payload=function(){return b(E)},r.callback=function(){ob(o,h,m)}}var N=h.stateNode;N!==null&&typeof N.componentDidCatch=="function"&&(r.callback=function(){ob(o,h,m),typeof b!="function"&&(Xs===null?Xs=new Set([this]):Xs.add(this));var X=m.stack;this.componentDidCatch(m.value,{componentStack:X!==null?X:""})})}function yr(r,o,h,m,b){if(h.flags|=32768,m!==null&&typeof m=="object"&&typeof m.then=="function"){if(o=h.alternate,o!==null&&cl(o,h,b,!0),h=zi.current,h!==null){switch(h.tag){case 31:case 13:return Hr===null?Wt():h.alternate===null&&Ln===0&&(Ln=3),h.flags&=-257,h.flags|=65536,h.lanes=b,m===ah?h.flags|=16384:(o=h.updateQueue,o===null?h.updateQueue=new Set([m]):o.add(m),ZM(r,m,b)),!1;case 22:return h.flags|=65536,m===ah?h.flags|=16384:(o=h.updateQueue,o===null?(o={transitions:null,markerInstances:null,retryQueue:new Set([m])},h.updateQueue=o):(h=o.retryQueue,h===null?o.retryQueue=new Set([m]):h.add(m)),ZM(r,m,b)),!1}throw Error(i(435,h.tag))}return ZM(r,m,b),Wt(),!1}if(mn)return o=zi.current,o!==null?((o.flags&65536)===0&&(o.flags|=256),o.flags|=65536,o.lanes=b,m!==dp&&(r=Error(i(422),{cause:m}),th(ka(r,h)))):(m!==dp&&(o=Error(i(423),{cause:m}),th(ka(o,h))),r=r.current.alternate,r.flags|=65536,b&=-b,r.lanes|=b,m=ka(m,h),b=U0(r.stateNode,m,b),_p(r,b),Ln!==4&&(Ln=2)),!1;var E=Error(i(520),{cause:m});if(E=ka(E,h),ds===null?ds=[E]:ds.push(E),Ln!==4&&(Ln=2),o===null)return!0;m=ka(m,h),h=o;do{switch(h.tag){case 3:return h.flags|=65536,r=b&-b,h.lanes|=r,r=U0(h.stateNode,m,r),_p(h,r),!1;case 1:if(o=h.type,E=h.stateNode,(h.flags&128)===0&&(typeof o.getDerivedStateFromError=="function"||E!==null&&typeof E.componentDidCatch=="function"&&(Xs===null||!Xs.has(E))))return h.flags|=65536,b&=-b,h.lanes|=b,b=Ru(b),qa(b,r,h,m),_p(h,b),!1}h=h.return}while(h!==null);return!1}var Up=Error(i(461)),ni=!1;function hi(r,o,h,m){o.child=r===null?Ix(o,null,h,m):vc(o,r.child,h,m)}function gh(r,o,h,m,b){h=h.render;var E=o.ref;if("ref"in m){var N={};for(var X in m)X!=="ref"&&(N[X]=m[X])}else N=m;return pc(o),m=f0(r,o,h,N,E,b),X=h0(),r!==null&&!ni?(d0(r,o,b),fs(r,o,b)):(mn&&X&&hp(o),o.flags|=1,hi(r,o,m,b),o.child)}function vh(r,o,h,m,b){if(r===null){var E=h.type;return typeof E=="function"&&!Ca(E)&&E.defaultProps===void 0&&h.compare===null?(o.tag=15,o.type=E,_r(r,o,E,m,b)):(r=Zf(h.type,null,m,o,o.mode,b),r.ref=o.ref,r.return=o,o.child=r)}if(E=r.child,!yl(r,b)){var N=E.memoizedProps;if(h=h.compare,h=h!==null?h:fu,h(N,m)&&r.ref===o.ref)return fs(r,o,b)}return o.flags|=1,r=Ds(E,m),r.ref=o.ref,r.return=o,o.child=r}function _r(r,o,h,m,b){if(r!==null){var E=r.memoizedProps;if(fu(E,m)&&r.ref===o.ref)if(ni=!1,o.pendingProps=m=E,yl(r,b))(r.flags&131072)!==0&&(ni=!0);else return o.lanes=r.lanes,fs(r,o,b)}return wu(r,o,h,m,b)}function xr(r,o,h,m){var b=m.children,E=r!==null?r.memoizedState:null;if(r===null&&o.stateNode===null&&(o.stateNode={_visibility:1,_pendingMarkers:null,_retryCache:null,_transitions:null}),m.mode==="hidden"){if((o.flags&128)!==0){if(E=E!==null?E.baseLanes|h:h,r!==null){for(m=o.child=r.child,b=0;m!==null;)b=b|m.lanes|m.childLanes,m=m.sibling;m=b&~E}else m=0,o.child=null;return Hs(r,o,E,h,m)}if((h&536870912)!==0)o.memoizedState={baseLanes:0,cachePool:null},r!==null&&Au(o,E!==null?E.cachePool:null),E!==null?o0(o,E):l0(),Px(o);else return m=o.lanes=536870912,Hs(r,o,E!==null?E.baseLanes|h:h,h,m)}else E!==null?(Au(o,E.cachePool),o0(o,E),_o(),o.memoizedState=null):(r!==null&&Au(o,null),l0(),_o());return hi(r,o,b,h),o.child}function cs(r,o){return r!==null&&r.tag===22||o.stateNode!==null||(o.stateNode={_visibility:1,_pendingMarkers:null,_retryCache:null,_transitions:null}),o.sibling}function Hs(r,o,h,m,b){var E=Ls();return E=E===null?null:{parent:Ot._currentValue,pool:E},o.memoizedState={baseLanes:h,cachePool:E},r!==null&&Au(o,null),l0(),Px(o),r!==null&&cl(r,o,m,!0),o.childLanes=b,null}function Gr(r,o){return o=Bu({mode:o.mode,children:o.children},r.mode),o.ref=r.ref,r.child=o,o.return=r,o}function Qi(r,o,h){return vc(o,r.child,null,h),r=Gr(o,o.pendingProps),r.flags|=2,gr(o),o.memoizedState=null,r}function yh(r,o,h){var m=o.pendingProps,b=(o.flags&128)!==0;if(o.flags&=-129,r===null){if(mn){if(m.mode==="hidden")return r=Gr(o,m),o.lanes=536870912,cs(null,r);if(c0(o),(r=Wn)?(r=VO(r,Ji),r=r!==null&&r.data==="&"?r:null,r!==null&&(o.memoizedState={dehydrated:r,treeContext:Os!==null?{id:Ns,overflow:Us}:null,retryLane:536870912,hydrationErrors:null},h=Bx(r),h.return=o,o.child=h,Wi=o,Wn=null)):r=null,r===null)throw fn(o);return o.lanes=536870912,null}return Gr(o,m)}var E=r.memoizedState;if(E!==null){var N=E.dehydrated;if(c0(o),b)if(o.flags&256)o.flags&=-257,o=Qi(r,o,h);else if(o.memoizedState!==null)o.child=r.child,o.flags|=128,o=null;else throw Error(i(558));else if(ni||cl(r,o,h,!1),b=(h&r.childLanes)!==0,ni||b){if(m=Un,m!==null&&(N=Yo(m,h),N!==0&&N!==E.retryLane))throw E.retryLane=N,sl(r,N),f(m,r,N),Up;Wt(),o=Qi(r,o,h)}else r=E.treeContext,Wn=js(N.nextSibling),Wi=o,mn=!0,ho=null,Ji=!1,r!==null&&eh(o,r),o=Gr(o,m),o.flags|=4096;return o}return r=Ds(r.child,{mode:m.mode,children:m.children}),r.ref=o.ref,o.child=r,r.return=o,r}function us(r,o){var h=o.ref;if(h===null)r!==null&&r.ref!==null&&(o.flags|=4194816);else{if(typeof h!="function"&&typeof h!="object")throw Error(i(284));(r===null||r.ref!==h)&&(o.flags|=4194816)}}function wu(r,o,h,m,b){return pc(o),h=f0(r,o,h,m,void 0,b),m=h0(),r!==null&&!ni?(d0(r,o,b),fs(r,o,b)):(mn&&m&&hp(o),o.flags|=1,hi(r,o,h,b),o.child)}function ya(r,o,h,m,b,E){return pc(o),o.updateQueue=null,h=zx(o,m,h,b),Fx(r),m=h0(),r!==null&&!ni?(d0(r,o,E),fs(r,o,E)):(mn&&m&&hp(o),o.flags|=1,hi(r,o,h,E),o.child)}function ca(r,o,h,m,b){if(pc(o),o.stateNode===null){var E=ol,N=h.contextType;typeof N=="object"&&N!==null&&(E=Ki(N)),E=new h(m,E),o.memoizedState=E.state!==null&&E.state!==void 0?E.state:null,E.updater=mh,o.stateNode=E,E._reactInternals=o,E=o.stateNode,E.props=m,E.state=o.memoizedState,E.refs={},a0(o),N=h.contextType,E.context=typeof N=="object"&&N!==null?Ki(N):ol,E.state=o.memoizedState,N=h.getDerivedStateFromProps,typeof N=="function"&&(Cu(o,h,N,m),E.state=o.memoizedState),typeof h.getDerivedStateFromProps=="function"||typeof E.getSnapshotBeforeUpdate=="function"||typeof E.UNSAFE_componentWillMount!="function"&&typeof E.componentWillMount!="function"||(N=E.state,typeof E.componentWillMount=="function"&&E.componentWillMount(),typeof E.UNSAFE_componentWillMount=="function"&&E.UNSAFE_componentWillMount(),N!==E.state&&mh.enqueueReplaceState(E,E.state,null),yc(o,m,E,b),oh(),E.state=o.memoizedState),typeof E.componentDidMount=="function"&&(o.flags|=4194308),m=!0}else if(r===null){E=o.stateNode;var X=o.memoizedProps,ie=la(h,X);E.props=ie;var ye=E.context,Oe=h.contextType;N=ol,typeof Oe=="object"&&Oe!==null&&(N=Ki(Oe));var ze=h.getDerivedStateFromProps;Oe=typeof ze=="function"||typeof E.getSnapshotBeforeUpdate=="function",X=o.pendingProps!==X,Oe||typeof E.UNSAFE_componentWillReceiveProps!="function"&&typeof E.componentWillReceiveProps!="function"||(X||ye!==N)&&rb(o,E,m,N),pl=!1;var Se=o.memoizedState;E.state=Se,yc(o,m,E,b),oh(),ye=o.memoizedState,X||Se!==ye||pl?(typeof ze=="function"&&(Cu(o,h,ze,m),ye=o.memoizedState),(ie=pl||ab(o,h,ie,m,Se,ye,N))?(Oe||typeof E.UNSAFE_componentWillMount!="function"&&typeof E.componentWillMount!="function"||(typeof E.componentWillMount=="function"&&E.componentWillMount(),typeof E.UNSAFE_componentWillMount=="function"&&E.UNSAFE_componentWillMount()),typeof E.componentDidMount=="function"&&(o.flags|=4194308)):(typeof E.componentDidMount=="function"&&(o.flags|=4194308),o.memoizedProps=m,o.memoizedState=ye),E.props=m,E.state=ye,E.context=N,m=ie):(typeof E.componentDidMount=="function"&&(o.flags|=4194308),m=!1)}else{E=o.stateNode,r0(r,o),N=o.memoizedProps,Oe=la(h,N),E.props=Oe,ze=o.pendingProps,Se=E.context,ye=h.contextType,ie=ol,typeof ye=="object"&&ye!==null&&(ie=Ki(ye)),X=h.getDerivedStateFromProps,(ye=typeof X=="function"||typeof E.getSnapshotBeforeUpdate=="function")||typeof E.UNSAFE_componentWillReceiveProps!="function"&&typeof E.componentWillReceiveProps!="function"||(N!==ze||Se!==ie)&&rb(o,E,m,ie),pl=!1,Se=o.memoizedState,E.state=Se,yc(o,m,E,b),oh();var we=o.memoizedState;N!==ze||Se!==we||pl||r!==null&&r.dependencies!==null&&xu(r.dependencies)?(typeof X=="function"&&(Cu(o,h,X,m),we=o.memoizedState),(Oe=pl||ab(o,h,Oe,m,Se,we,ie)||r!==null&&r.dependencies!==null&&xu(r.dependencies))?(ye||typeof E.UNSAFE_componentWillUpdate!="function"&&typeof E.componentWillUpdate!="function"||(typeof E.componentWillUpdate=="function"&&E.componentWillUpdate(m,we,ie),typeof E.UNSAFE_componentWillUpdate=="function"&&E.UNSAFE_componentWillUpdate(m,we,ie)),typeof E.componentDidUpdate=="function"&&(o.flags|=4),typeof E.getSnapshotBeforeUpdate=="function"&&(o.flags|=1024)):(typeof E.componentDidUpdate!="function"||N===r.memoizedProps&&Se===r.memoizedState||(o.flags|=4),typeof E.getSnapshotBeforeUpdate!="function"||N===r.memoizedProps&&Se===r.memoizedState||(o.flags|=1024),o.memoizedProps=m,o.memoizedState=we),E.props=m,E.state=we,E.context=ie,m=Oe):(typeof E.componentDidUpdate!="function"||N===r.memoizedProps&&Se===r.memoizedState||(o.flags|=4),typeof E.getSnapshotBeforeUpdate!="function"||N===r.memoizedProps&&Se===r.memoizedState||(o.flags|=1024),m=!1)}return E=m,us(r,o),m=(o.flags&128)!==0,E||m?(E=o.stateNode,h=m&&typeof h.getDerivedStateFromError!="function"?null:E.render(),o.flags|=1,r!==null&&m?(o.child=vc(o,r.child,null,b),o.child=vc(o,null,h,b)):hi(r,o,h,b),o.memoizedState=E.state,r=o.child):r=fs(r,o,b),r}function An(r,o,h,m){return dc(),o.flags|=256,hi(r,o,h,m),o.child}var br={dehydrated:null,treeContext:null,retryLane:0,hydrationErrors:null};function Vr(r){return{baseLanes:r,cachePool:gp()}}function _h(r,o,h){return r=r!==null?r.childLanes&~h:0,o&&(r|=_n),r}function Ar(r,o,h){var m=o.pendingProps,b=!1,E=(o.flags&128)!==0,N;if((N=E)||(N=r!==null&&r.memoizedState===null?!1:(ui.current&2)!==0),N&&(b=!0,o.flags&=-129),N=(o.flags&32)!==0,o.flags&=-33,r===null){if(mn){if(b?gl(o):_o(),(r=Wn)?(r=VO(r,Ji),r=r!==null&&r.data!=="&"?r:null,r!==null&&(o.memoizedState={dehydrated:r,treeContext:Os!==null?{id:Ns,overflow:Us}:null,retryLane:536870912,hydrationErrors:null},h=Bx(r),h.return=o,o.child=h,Wi=o,Wn=null)):r=null,r===null)throw fn(o);return pE(r)?o.lanes=32:o.lanes=536870912,null}var X=m.children;return m=m.fallback,b?(_o(),b=o.mode,X=Bu({mode:"hidden",children:X},b),m=uo(m,b,h,null),X.return=o,m.return=o,X.sibling=m,o.child=X,m=o.child,m.memoizedState=Vr(h),m.childLanes=_h(r,N,h),o.memoizedState=br,cs(null,m)):(gl(o),vl(o,X))}var ie=r.memoizedState;if(ie!==null&&(X=ie.dehydrated,X!==null)){if(E)o.flags&256?(gl(o),o.flags&=-257,o=Du(r,o,h)):o.memoizedState!==null?(_o(),o.child=r.child,o.flags|=128,o=null):(_o(),X=m.fallback,b=o.mode,m=Bu({mode:"visible",children:m.children},b),X=uo(X,b,h,null),X.flags|=2,m.return=o,X.return=o,m.sibling=X,o.child=m,vc(o,r.child,null,h),m=o.child,m.memoizedState=Vr(h),m.childLanes=_h(r,N,h),o.memoizedState=br,o=cs(null,m));else if(gl(o),pE(X)){if(N=X.nextSibling&&X.nextSibling.dataset,N)var ye=N.dgst;N=ye,m=Error(i(419)),m.stack="",m.digest=N,th({value:m,source:null,stack:null}),o=Du(r,o,h)}else if(ni||cl(r,o,h,!1),N=(h&r.childLanes)!==0,ni||N){if(N=Un,N!==null&&(m=Yo(N,h),m!==0&&m!==ie.retryLane))throw ie.retryLane=m,sl(r,m),f(N,r,m),Up;dE(X)||Wt(),o=Du(r,o,h)}else dE(X)?(o.flags|=192,o.child=r.child,o=null):(r=ie.treeContext,Wn=js(X.nextSibling),Wi=o,mn=!0,ho=null,Ji=!1,r!==null&&eh(o,r),o=vl(o,m.children),o.flags|=4096);return o}return b?(_o(),X=m.fallback,b=o.mode,ie=r.child,ye=ie.sibling,m=Ds(ie,{mode:"hidden",children:m.children}),m.subtreeFlags=ie.subtreeFlags&65011712,ye!==null?X=Ds(ye,X):(X=uo(X,b,h,null),X.flags|=2),X.return=o,m.return=o,m.sibling=X,o.child=m,cs(null,m),m=o.child,X=r.child.memoizedState,X===null?X=Vr(h):(b=X.cachePool,b!==null?(ie=Ot._currentValue,b=b.parent!==ie?{parent:ie,pool:ie}:b):b=gp(),X={baseLanes:X.baseLanes|h,cachePool:b}),m.memoizedState=X,m.childLanes=_h(r,N,h),o.memoizedState=br,cs(r.child,m)):(gl(o),h=r.child,r=h.sibling,h=Ds(h,{mode:"visible",children:m.children}),h.return=o,h.sibling=null,r!==null&&(N=o.deletions,N===null?(o.deletions=[r],o.flags|=16):N.push(r)),o.child=h,o.memoizedState=null,h)}function vl(r,o){return o=Bu({mode:"visible",children:o},r.mode),o.return=r,r.child=o}function Bu(r,o){return r=Ta(22,r,null,o),r.lanes=0,r}function Du(r,o,h){return vc(o,r.child,null,h),r=vl(o,o.pendingProps.children),r.flags|=2,o.memoizedState=null,r}function bc(r,o,h){r.lanes|=o;var m=r.alternate;m!==null&&(m.lanes|=o),go(r.return,o,h)}function xh(r,o,h,m,b,E){var N=r.memoizedState;N===null?r.memoizedState={isBackwards:o,rendering:null,renderingStartTime:0,last:m,tail:h,tailMode:b,treeForkCount:E}:(N.isBackwards=o,N.rendering=null,N.renderingStartTime=0,N.last=m,N.tail=h,N.tailMode=b,N.treeForkCount=E)}function bh(r,o,h){var m=o.pendingProps,b=m.revealOrder,E=m.tail;m=m.children;var N=ui.current,X=(N&2)!==0;if(X?(N=N&1|2,o.flags|=128):N&=1,Te(ui,N),hi(r,o,m,h),m=mn?_u:0,!X&&r!==null&&(r.flags&128)!==0)e:for(r=o.child;r!==null;){if(r.tag===13)r.memoizedState!==null&&bc(r,h,o);else if(r.tag===19)bc(r,h,o);else if(r.child!==null){r.child.return=r,r=r.child;continue}if(r===o)break e;for(;r.sibling===null;){if(r.return===null||r.return===o)break e;r=r.return}r.sibling.return=r.return,r=r.sibling}switch(b){case"forwards":for(h=o.child,b=null;h!==null;)r=h.alternate,r!==null&&xp(r)===null&&(b=h),h=h.sibling;h=b,h===null?(b=o.child,o.child=null):(b=h.sibling,h.sibling=null),xh(o,!1,b,h,E,m);break;case"backwards":case"unstable_legacy-backwards":for(h=null,b=o.child,o.child=null;b!==null;){if(r=b.alternate,r!==null&&xp(r)===null){o.child=b;break}r=b.sibling,b.sibling=h,h=b,b=r}xh(o,!0,h,null,E,m);break;case"together":xh(o,!1,null,null,void 0,m);break;default:o.memoizedState=null}return o.child}function fs(r,o,h){if(r!==null&&(o.dependencies=r.dependencies),Er|=o.lanes,(h&o.childLanes)===0)if(r!==null){if(cl(r,o,h,!1),(h&o.childLanes)===0)return null}else return null;if(r!==null&&o.child!==r.child)throw Error(i(153));if(o.child!==null){for(r=o.child,h=Ds(r,r.pendingProps),o.child=h,h.return=o;r.sibling!==null;)r=r.sibling,h=h.sibling=Ds(r,r.pendingProps),h.return=o;h.sibling=null}return o.child}function yl(r,o){return(r.lanes&o)!==0?!0:(r=r.dependencies,!!(r!==null&&xu(r)))}function Ah(r,o,h){switch(o.tag){case 3:Xe(o,o.stateNode.containerInfo),mo(o,Ot,r.memoizedState.cache),dc();break;case 27:case 5:ot(o);break;case 4:Xe(o,o.stateNode.containerInfo);break;case 10:mo(o,o.type,o.memoizedProps.value);break;case 31:if(o.memoizedState!==null)return o.flags|=128,c0(o),null;break;case 13:var m=o.memoizedState;if(m!==null)return m.dehydrated!==null?(gl(o),o.flags|=128,null):(h&o.child.childLanes)!==0?Ar(r,o,h):(gl(o),r=fs(r,o,h),r!==null?r.sibling:null);gl(o);break;case 19:var b=(r.flags&128)!==0;if(m=(h&o.childLanes)!==0,m||(cl(r,o,h,!1),m=(h&o.childLanes)!==0),b){if(m)return bh(r,o,h);o.flags|=128}if(b=o.memoizedState,b!==null&&(b.rendering=null,b.tail=null,b.lastEffect=null),Te(ui,ui.current),m)break;return null;case 22:return o.lanes=0,xr(r,o,h,o.pendingProps);case 24:mo(o,Ot,r.memoizedState.cache)}return fs(r,o,h)}function Lp(r,o,h){if(r!==null)if(r.memoizedProps!==o.pendingProps)ni=!0;else{if(!yl(r,h)&&(o.flags&128)===0)return ni=!1,Ah(r,o,h);ni=(r.flags&131072)!==0}else ni=!1,mn&&(o.flags&1048576)!==0&&qg(o,_u,o.index);switch(o.lanes=0,o.tag){case 16:e:{var m=o.pendingProps;if(r=gc(o.elementType),o.type=r,typeof r=="function")Ca(r)?(m=la(r,m),o.tag=1,o=ca(null,o,r,m,h)):(o.tag=0,o=wu(null,o,r,m,h));else{if(r!=null){var b=r.$$typeof;if(b===D){o.tag=11,o=gh(null,o,r,m,h);break e}else if(b===z){o.tag=14,o=vh(null,o,r,m,h);break e}}throw o=ae(r)||r,Error(i(306,o,""))}}return o;case 0:return wu(r,o,o.type,o.pendingProps,h);case 1:return m=o.type,b=la(m,o.pendingProps),ca(r,o,m,b,h);case 3:e:{if(Xe(o,o.stateNode.containerInfo),r===null)throw Error(i(387));m=o.pendingProps;var E=o.memoizedState;b=E.element,r0(r,o),yc(o,m,null,h);var N=o.memoizedState;if(m=N.cache,mo(o,Ot,m),m!==E.cache&&mp(o,[Ot],h,!0),oh(),m=N.element,E.isDehydrated)if(E={element:m,isDehydrated:!1,cache:N.cache},o.updateQueue.baseState=E,o.memoizedState=E,o.flags&256){o=An(r,o,m,h);break e}else if(m!==b){b=ka(Error(i(424)),o),th(b),o=An(r,o,m,h);break e}else for(r=o.stateNode.containerInfo,r.nodeType===9?r=r.body:r=r.nodeName==="HTML"?r.ownerDocument.body:r,Wn=js(r.firstChild),Wi=o,mn=!0,ho=null,Ji=!0,h=Ix(o,null,m,h),o.child=h;h;)h.flags=h.flags&-3|4096,h=h.sibling;else{if(dc(),m===b){o=fs(r,o,h);break e}hi(r,o,m,h)}o=o.child}return o;case 26:return us(r,o),r===null?(h=WO(o.type,null,o.pendingProps,null))?o.memoizedState=h:mn||(h=o.type,r=o.pendingProps,m=mb(ge.current).createElement(h),m[rn]=o,m[Fi]=r,Oa(m,h,r),k(m),o.stateNode=m):o.memoizedState=WO(o.type,r.memoizedProps,o.pendingProps,r.memoizedState),null;case 27:return ot(o),r===null&&mn&&(m=o.stateNode=jO(o.type,o.pendingProps,ge.current),Wi=o,Ji=!0,b=Wn,Fu(o.type)?(mE=b,Wn=js(m.firstChild)):Wn=b),hi(r,o,o.pendingProps.children,h),us(r,o),r===null&&(o.flags|=4194304),o.child;case 5:return r===null&&mn&&((b=m=Wn)&&(m=fq(m,o.type,o.pendingProps,Ji),m!==null?(o.stateNode=m,Wi=o,Wn=js(m.firstChild),Ji=!1,b=!0):b=!1),b||fn(o)),ot(o),b=o.type,E=o.pendingProps,N=r!==null?r.memoizedProps:null,m=E.children,uE(b,E)?m=null:N!==null&&uE(b,N)&&(o.flags|=32),o.memoizedState!==null&&(b=f0(r,o,YM,null,null,h),X0._currentValue=b),us(r,o),hi(r,o,m,h),o.child;case 6:return r===null&&mn&&((r=h=Wn)&&(h=hq(h,o.pendingProps,Ji),h!==null?(o.stateNode=h,Wi=o,Wn=null,r=!0):r=!1),r||fn(o)),null;case 13:return Ar(r,o,h);case 4:return Xe(o,o.stateNode.containerInfo),m=o.pendingProps,r===null?o.child=vc(o,null,m,h):hi(r,o,m,h),o.child;case 11:return gh(r,o,o.type,o.pendingProps,h);case 7:return hi(r,o,o.pendingProps,h),o.child;case 8:return hi(r,o,o.pendingProps.children,h),o.child;case 12:return hi(r,o,o.pendingProps.children,h),o.child;case 10:return m=o.pendingProps,mo(o,o.type,m.value),hi(r,o,m.children,h),o.child;case 9:return b=o.type._context,m=o.pendingProps.children,pc(o),b=Ki(b),m=m(b),o.flags|=1,hi(r,o,m,h),o.child;case 14:return vh(r,o,o.type,o.pendingProps,h);case 15:return _r(r,o,o.type,o.pendingProps,h);case 19:return bh(r,o,h);case 31:return yh(r,o,h);case 22:return xr(r,o,h,o.pendingProps);case 24:return pc(o),m=Ki(Ot),r===null?(b=Ls(),b===null&&(b=Un,E=Zg(),b.pooledCache=E,E.refCount++,E!==null&&(b.pooledCacheLanes|=h),b=E),o.memoizedState={parent:m,cache:b},a0(o),mo(o,Ot,b)):((r.lanes&h)!==0&&(r0(r,o),yc(o,null,null,h),oh()),b=r.memoizedState,E=o.memoizedState,b.parent!==m?(b={parent:m,cache:m},o.memoizedState=b,o.lanes===0&&(o.memoizedState=o.updateQueue.baseState=b),mo(o,Ot,m)):(m=E.cache,mo(o,Ot,m),m!==b.cache&&mp(o,[Ot],h,!0))),hi(r,o,o.pendingProps.children,h),o.child;case 29:throw o.pendingProps}throw Error(i(156,o.tag))}function Wa(r){r.flags|=4}function _l(r,o,h,m,b){if((o=(r.mode&32)!==0)&&(o=!1),o){if(r.flags|=16777216,(b&335544128)===b)if(r.stateNode.complete)r.flags|=8192;else if(We())r.flags|=8192;else throw Ft=ah,ih}else r.flags&=-16777217}function Ao(r,o){if(o.type!=="stylesheet"||(o.state.loading&4)!==0)r.flags&=-16777217;else if(r.flags|=16777216,!$O(o))if(We())r.flags|=8192;else throw Ft=ah,ih}function Ou(r,o){o!==null&&(r.flags|=4),r.flags&16384&&(o=r.tag!==22?bn():536870912,r.lanes|=o,Tr|=o)}function Sh(r,o){if(!mn)switch(r.tailMode){case"hidden":o=r.tail;for(var h=null;o!==null;)o.alternate!==null&&(h=o),o=o.sibling;h===null?r.tail=null:h.sibling=null;break;case"collapsed":h=r.tail;for(var m=null;h!==null;)h.alternate!==null&&(m=h),h=h.sibling;m===null?o||r.tail===null?r.tail=null:r.tail.sibling=null:m.sibling=null}}function zn(r){var o=r.alternate!==null&&r.alternate.child===r.child,h=0,m=0;if(o)for(var b=r.child;b!==null;)h|=b.lanes|b.childLanes,m|=b.subtreeFlags&65011712,m|=b.flags&65011712,b.return=r,b=b.sibling;else for(b=r.child;b!==null;)h|=b.lanes|b.childLanes,m|=b.subtreeFlags,m|=b.flags,b.return=r,b=b.sibling;return r.subtreeFlags|=m,r.childLanes=h,o}function L0(r,o,h){var m=o.pendingProps;switch(ll(o),o.tag){case 16:case 15:case 0:case 11:case 7:case 8:case 12:case 9:case 14:return zn(o),null;case 1:return zn(o),null;case 3:return h=o.stateNode,m=null,r!==null&&(m=r.memoizedState.cache),o.memoizedState.cache!==m&&(o.flags|=2048),zr(Ot),tt(),h.pendingContext&&(h.context=h.pendingContext,h.pendingContext=null),(r===null||r.child===null)&&(hc(o)?Wa(o):r===null||r.memoizedState.isDehydrated&&(o.flags&256)===0||(o.flags|=1024,Wg())),zn(o),null;case 26:var b=o.type,E=o.memoizedState;return r===null?(Wa(o),E!==null?(zn(o),Ao(o,E)):(zn(o),_l(o,b,null,m,h))):E?E!==r.memoizedState?(Wa(o),zn(o),Ao(o,E)):(zn(o),o.flags&=-16777217):(r=r.memoizedProps,r!==m&&Wa(o),zn(o),_l(o,b,r,m,h)),null;case 27:if(Vt(o),h=ge.current,b=o.type,r!==null&&o.stateNode!=null)r.memoizedProps!==m&&Wa(o);else{if(!m){if(o.stateNode===null)throw Error(i(166));return zn(o),null}r=De.current,hc(o)?pp(o):(r=jO(b,m,h),o.stateNode=r,Wa(o))}return zn(o),null;case 5:if(Vt(o),b=o.type,r!==null&&o.stateNode!=null)r.memoizedProps!==m&&Wa(o);else{if(!m){if(o.stateNode===null)throw Error(i(166));return zn(o),null}if(E=De.current,hc(o))pp(o);else{var N=mb(ge.current);switch(E){case 1:E=N.createElementNS("http://www.w3.org/2000/svg",b);break;case 2:E=N.createElementNS("http://www.w3.org/1998/Math/MathML",b);break;default:switch(b){case"svg":E=N.createElementNS("http://www.w3.org/2000/svg",b);break;case"math":E=N.createElementNS("http://www.w3.org/1998/Math/MathML",b);break;case"script":E=N.createElement("div"),E.innerHTML="<script><\/script>",E=E.removeChild(E.firstChild);break;case"select":E=typeof m.is=="string"?N.createElement("select",{is:m.is}):N.createElement("select"),m.multiple?E.multiple=!0:m.size&&(E.size=m.size);break;default:E=typeof m.is=="string"?N.createElement(b,{is:m.is}):N.createElement(b)}}E[rn]=o,E[Fi]=m;e:for(N=o.child;N!==null;){if(N.tag===5||N.tag===6)E.appendChild(N.stateNode);else if(N.tag!==4&&N.tag!==27&&N.child!==null){N.child.return=N,N=N.child;continue}if(N===o)break e;for(;N.sibling===null;){if(N.return===null||N.return===o)break e;N=N.return}N.sibling.return=N.return,N=N.sibling}o.stateNode=E;e:switch(Oa(E,b,m),b){case"button":case"input":case"select":case"textarea":m=!!m.autoFocus;break e;case"img":m=!0;break e;default:m=!1}m&&Wa(o)}}return zn(o),_l(o,o.type,r===null?null:r.memoizedProps,o.pendingProps,h),null;case 6:if(r&&o.stateNode!=null)r.memoizedProps!==m&&Wa(o);else{if(typeof m!="string"&&o.stateNode===null)throw Error(i(166));if(r=ge.current,hc(o)){if(r=o.stateNode,h=o.memoizedProps,m=null,b=Wi,b!==null)switch(b.tag){case 27:case 5:m=b.memoizedProps}r[rn]=o,r=!!(r.nodeValue===h||m!==null&&m.suppressHydrationWarning===!0||UO(r.nodeValue,h)),r||fn(o,!0)}else r=mb(r).createTextNode(m),r[rn]=o,o.stateNode=r}return zn(o),null;case 31:if(h=o.memoizedState,r===null||r.memoizedState!==null){if(m=hc(o),h!==null){if(r===null){if(!m)throw Error(i(318));if(r=o.memoizedState,r=r!==null?r.dehydrated:null,!r)throw Error(i(557));r[rn]=o}else dc(),(o.flags&128)===0&&(o.memoizedState=null),o.flags|=4;zn(o),r=!1}else h=Wg(),r!==null&&r.memoizedState!==null&&(r.memoizedState.hydrationErrors=h),r=!0;if(!r)return o.flags&256?(gr(o),o):(gr(o),null);if((o.flags&128)!==0)throw Error(i(558))}return zn(o),null;case 13:if(m=o.memoizedState,r===null||r.memoizedState!==null&&r.memoizedState.dehydrated!==null){if(b=hc(o),m!==null&&m.dehydrated!==null){if(r===null){if(!b)throw Error(i(318));if(b=o.memoizedState,b=b!==null?b.dehydrated:null,!b)throw Error(i(317));b[rn]=o}else dc(),(o.flags&128)===0&&(o.memoizedState=null),o.flags|=4;zn(o),b=!1}else b=Wg(),r!==null&&r.memoizedState!==null&&(r.memoizedState.hydrationErrors=b),b=!0;if(!b)return o.flags&256?(gr(o),o):(gr(o),null)}return gr(o),(o.flags&128)!==0?(o.lanes=h,o):(h=m!==null,r=r!==null&&r.memoizedState!==null,h&&(m=o.child,b=null,m.alternate!==null&&m.alternate.memoizedState!==null&&m.alternate.memoizedState.cachePool!==null&&(b=m.alternate.memoizedState.cachePool.pool),E=null,m.memoizedState!==null&&m.memoizedState.cachePool!==null&&(E=m.memoizedState.cachePool.pool),E!==b&&(m.flags|=2048)),h!==r&&h&&(o.child.flags|=8192),Ou(o,o.updateQueue),zn(o),null);case 4:return tt(),r===null&&rE(o.stateNode.containerInfo),zn(o),null;case 10:return zr(o.type),zn(o),null;case 19:if(ce(ui),m=o.memoizedState,m===null)return zn(o),null;if(b=(o.flags&128)!==0,E=m.rendering,E===null)if(b)Sh(m,!1);else{if(Ln!==0||r!==null&&(r.flags&128)!==0)for(r=o.child;r!==null;){if(E=xp(r),E!==null){for(o.flags|=128,Sh(m,!1),r=E.updateQueue,o.updateQueue=r,Ou(o,r),o.subtreeFlags=0,r=h,h=o.child;h!==null;)ma(h,r),h=h.sibling;return Te(ui,ui.current&1|2),mn&&fo(o,m.treeForkCount),o.child}r=r.sibling}m.tail!==null&&I()>Cr&&(o.flags|=128,b=!0,Sh(m,!1),o.lanes=4194304)}else{if(!b)if(r=xp(E),r!==null){if(o.flags|=128,b=!0,r=r.updateQueue,o.updateQueue=r,Ou(o,r),Sh(m,!0),m.tail===null&&m.tailMode==="hidden"&&!E.alternate&&!mn)return zn(o),null}else 2*I()-m.renderingStartTime>Cr&&h!==536870912&&(o.flags|=128,b=!0,Sh(m,!1),o.lanes=4194304);m.isBackwards?(E.sibling=o.child,o.child=E):(r=m.last,r!==null?r.sibling=E:o.child=E,m.last=E)}return m.tail!==null?(r=m.tail,m.rendering=r,m.tail=r.sibling,m.renderingStartTime=I(),r.sibling=null,h=ui.current,Te(ui,b?h&1|2:h&1),mn&&fo(o,m.treeForkCount),r):(zn(o),null);case 22:case 23:return gr(o),va(),m=o.memoizedState!==null,r!==null?r.memoizedState!==null!==m&&(o.flags|=8192):m&&(o.flags|=8192),m?(h&536870912)!==0&&(o.flags&128)===0&&(zn(o),o.subtreeFlags&6&&(o.flags|=8192)):zn(o),h=o.updateQueue,h!==null&&Ou(o,h.retryQueue),h=null,r!==null&&r.memoizedState!==null&&r.memoizedState.cachePool!==null&&(h=r.memoizedState.cachePool.pool),m=null,o.memoizedState!==null&&o.memoizedState.cachePool!==null&&(m=o.memoizedState.cachePool.pool),m!==h&&(o.flags|=2048),r!==null&&ce(ul),null;case 24:return h=null,r!==null&&(h=r.memoizedState.cache),o.memoizedState.cache!==h&&(o.flags|=2048),zr(Ot),zn(o),null;case 25:return null;case 30:return null}throw Error(i(156,o.tag))}function Ip(r,o){switch(ll(o),o.tag){case 1:return r=o.flags,r&65536?(o.flags=r&-65537|128,o):null;case 3:return zr(Ot),tt(),r=o.flags,(r&65536)!==0&&(r&128)===0?(o.flags=r&-65537|128,o):null;case 26:case 27:case 5:return Vt(o),null;case 31:if(o.memoizedState!==null){if(gr(o),o.alternate===null)throw Error(i(340));dc()}return r=o.flags,r&65536?(o.flags=r&-65537|128,o):null;case 13:if(gr(o),r=o.memoizedState,r!==null&&r.dehydrated!==null){if(o.alternate===null)throw Error(i(340));dc()}return r=o.flags,r&65536?(o.flags=r&-65537|128,o):null;case 19:return ce(ui),null;case 4:return tt(),null;case 10:return zr(o.type),null;case 22:case 23:return gr(o),va(),r!==null&&ce(ul),r=o.flags,r&65536?(o.flags=r&-65537|128,o):null;case 24:return zr(Ot),null;case 25:return null;default:return null}}function Ac(r,o){switch(ll(o),o.tag){case 3:zr(Ot),tt();break;case 26:case 27:case 5:Vt(o);break;case 4:tt();break;case 31:o.memoizedState!==null&&gr(o);break;case 13:gr(o);break;case 19:ce(ui);break;case 10:zr(o.type);break;case 22:case 23:gr(o),va(),r!==null&&ce(ul);break;case 24:zr(Ot)}}function Gs(r,o){try{var h=o.updateQueue,m=h!==null?h.lastEffect:null;if(m!==null){var b=m.next;h=b;do{if((h.tag&r)===r){m=void 0;var E=h.create,N=h.inst;m=E(),N.destroy=m}h=h.next}while(h!==b)}}catch(X){jn(o,o.return,X)}}function kr(r,o,h){try{var m=o.updateQueue,b=m!==null?m.lastEffect:null;if(b!==null){var E=b.next;m=E;do{if((m.tag&r)===r){var N=m.inst,X=N.destroy;if(X!==void 0){N.destroy=void 0,b=o;var ie=h,ye=X;try{ye()}catch(Oe){jn(b,ie,Oe)}}}m=m.next}while(m!==E)}}catch(Oe){jn(o,o.return,Oe)}}function xl(r){var o=r.updateQueue;if(o!==null){var h=r.stateNode;try{sa(o,h)}catch(m){jn(r,r.return,m)}}}function I0(r,o,h){h.props=la(r.type,r.memoizedProps),h.state=r.memoizedState;try{h.componentWillUnmount()}catch(m){jn(r,o,m)}}function Vs(r,o){try{var h=r.ref;if(h!==null){switch(r.tag){case 26:case 27:case 5:var m=r.stateNode;break;case 30:m=r.stateNode;break;default:m=r.stateNode}typeof h=="function"?r.refCleanup=h(m):h.current=m}}catch(b){jn(r,o,b)}}function Sr(r,o){var h=r.ref,m=r.refCleanup;if(h!==null)if(typeof m=="function")try{m()}catch(b){jn(r,o,b)}finally{r.refCleanup=null,r=r.alternate,r!=null&&(r.refCleanup=null)}else if(typeof h=="function")try{h(null)}catch(b){jn(r,o,b)}else h.current=null}function Mr(r){var o=r.type,h=r.memoizedProps,m=r.stateNode;try{e:switch(o){case"button":case"input":case"select":case"textarea":h.autoFocus&&m.focus();break e;case"img":h.src?m.src=h.src:h.srcSet&&(m.srcset=h.srcSet)}}catch(b){jn(r,r.return,b)}}function Xr(r,o,h){try{var m=r.stateNode;rq(m,r.type,h,o),m[Fi]=o}catch(b){jn(r,r.return,b)}}function Oi(r){return r.tag===5||r.tag===3||r.tag===26||r.tag===27&&Fu(r.type)||r.tag===4}function ks(r){e:for(;;){for(;r.sibling===null;){if(r.return===null||Oi(r.return))return null;r=r.return}for(r.sibling.return=r.return,r=r.sibling;r.tag!==5&&r.tag!==6&&r.tag!==18;){if(r.tag===27&&Fu(r.type)||r.flags&2||r.child===null||r.tag===4)continue e;r.child.return=r,r=r.child}if(!(r.flags&2))return r.stateNode}}function tn(r,o,h){var m=r.tag;if(m===5||m===6)r=r.stateNode,o?(h.nodeType===9?h.body:h.nodeName==="HTML"?h.ownerDocument.body:h).insertBefore(r,o):(o=h.nodeType===9?h.body:h.nodeName==="HTML"?h.ownerDocument.body:h,o.appendChild(r),h=h._reactRootContainer,h!=null||o.onclick!==null||(o.onclick=Rs));else if(m!==4&&(m===27&&Fu(r.type)&&(h=r.stateNode,o=null),r=r.child,r!==null))for(tn(r,o,h),r=r.sibling;r!==null;)tn(r,o,h),r=r.sibling}function Dn(r,o,h){var m=r.tag;if(m===5||m===6)r=r.stateNode,o?h.insertBefore(r,o):h.appendChild(r);else if(m!==4&&(m===27&&Fu(r.type)&&(h=r.stateNode),r=r.child,r!==null))for(Dn(r,o,h),r=r.sibling;r!==null;)Dn(r,o,h),r=r.sibling}function bi(r){var o=r.stateNode,h=r.memoizedProps;try{for(var m=r.type,b=o.attributes;b.length;)o.removeAttributeNode(b[0]);Oa(o,m,h),o[rn]=r,o[Fi]=h}catch(E){jn(r,r.return,E)}}var jr=!1,ii=!1,So=!1,Mh=typeof WeakSet=="function"?WeakSet:Set,di=null;function Nu(r,o){if(r=r.containerInfo,lE=Ab,r=ap(r),hu(r)){if("selectionStart"in r)var h={start:r.selectionStart,end:r.selectionEnd};else e:{h=(h=r.ownerDocument)&&h.defaultView||window;var m=h.getSelection&&h.getSelection();if(m&&m.rangeCount!==0){h=m.anchorNode;var b=m.anchorOffset,E=m.focusNode;m=m.focusOffset;try{h.nodeType,E.nodeType}catch{h=null;break e}var N=0,X=-1,ie=-1,ye=0,Oe=0,ze=r,Se=null;t:for(;;){for(var we;ze!==h||b!==0&&ze.nodeType!==3||(X=N+b),ze!==E||m!==0&&ze.nodeType!==3||(ie=N+m),ze.nodeType===3&&(N+=ze.nodeValue.length),(we=ze.firstChild)!==null;)Se=ze,ze=we;for(;;){if(ze===r)break t;if(Se===h&&++ye===b&&(X=N),Se===E&&++Oe===m&&(ie=N),(we=ze.nextSibling)!==null)break;ze=Se,Se=ze.parentNode}ze=we}h=X===-1||ie===-1?null:{start:X,end:ie}}else h=null}h=h||{start:0,end:0}}else h=null;for(cE={focusedElem:r,selectionRange:h},Ab=!1,di=o;di!==null;)if(o=di,r=o.child,(o.subtreeFlags&1028)!==0&&r!==null)r.return=o,di=r;else for(;di!==null;){switch(o=di,E=o.alternate,r=o.flags,o.tag){case 0:if((r&4)!==0&&(r=o.updateQueue,r=r!==null?r.events:null,r!==null))for(h=0;h<r.length;h++)b=r[h],b.ref.impl=b.nextImpl;break;case 11:case 15:break;case 1:if((r&1024)!==0&&E!==null){r=void 0,h=o,b=E.memoizedProps,E=E.memoizedState,m=h.stateNode;try{var Mt=la(h.type,b);r=m.getSnapshotBeforeUpdate(Mt,E),m.__reactInternalSnapshotBeforeUpdate=r}catch(Gt){jn(h,h.return,Gt)}}break;case 3:if((r&1024)!==0){if(r=o.stateNode.containerInfo,h=r.nodeType,h===9)hE(r);else if(h===1)switch(r.nodeName){case"HEAD":case"HTML":case"BODY":hE(r);break;default:r.textContent=""}}break;case 5:case 26:case 27:case 6:case 4:case 17:break;default:if((r&1024)!==0)throw Error(i(163))}if(r=o.sibling,r!==null){r.return=o.return,di=r;break}di=o.return}}function lb(r,o,h){var m=h.flags;switch(h.tag){case 0:case 11:case 15:Mo(r,h),m&4&&Gs(5,h);break;case 1:if(Mo(r,h),m&4)if(r=h.stateNode,o===null)try{r.componentDidMount()}catch(N){jn(h,h.return,N)}else{var b=la(h.type,o.memoizedProps);o=o.memoizedState;try{r.componentDidUpdate(b,o,r.__reactInternalSnapshotBeforeUpdate)}catch(N){jn(h,h.return,N)}}m&64&&xl(h),m&512&&Vs(h,h.return);break;case 3:if(Mo(r,h),m&64&&(r=h.updateQueue,r!==null)){if(o=null,h.child!==null)switch(h.child.tag){case 27:case 5:o=h.child.stateNode;break;case 1:o=h.child.stateNode}try{sa(r,o)}catch(N){jn(h,h.return,N)}}break;case 27:o===null&&m&4&&bi(h);case 26:case 5:Mo(r,h),o===null&&m&4&&Mr(h),m&512&&Vs(h,h.return);break;case 12:Mo(r,h);break;case 31:Mo(r,h),m&4&&Fp(r,h);break;case 13:Mo(r,h),m&4&&P0(r,h),m&64&&(r=h.memoizedState,r!==null&&(r=r.dehydrated,r!==null&&(h=qY.bind(null,h),dq(r,h))));break;case 22:if(m=h.memoizedState!==null||jr,!m){o=o!==null&&o.memoizedState!==null||ii,b=jr;var E=ii;jr=m,(ii=o)&&!E?Nn(r,h,(h.subtreeFlags&8772)!==0):Mo(r,h),jr=b,ii=E}break;case 30:break;default:Mo(r,h)}}function Pp(r){var o=r.alternate;o!==null&&(r.alternate=null,Pp(o)),r.child=null,r.deletions=null,r.sibling=null,r.tag===5&&(o=r.stateNode,o!==null&&tc(o)),r.stateNode=null,r.return=null,r.dependencies=null,r.memoizedProps=null,r.memoizedState=null,r.pendingProps=null,r.stateNode=null,r.updateQueue=null}var Sn=null,Ni=!1;function _a(r,o,h){for(h=h.child;h!==null;)bl(r,o,h),h=h.sibling}function bl(r,o,h){if(ke&&typeof ke.onCommitFiberUnmount=="function")try{ke.onCommitFiberUnmount(Fe,h)}catch{}switch(h.tag){case 26:ii||Sr(h,o),_a(r,o,h),h.memoizedState?h.memoizedState.count--:h.stateNode&&(h=h.stateNode,h.parentNode.removeChild(h));break;case 27:ii||Sr(h,o);var m=Sn,b=Ni;Fu(h.type)&&(Sn=h.stateNode,Ni=!1),_a(r,o,h),G0(h.stateNode),Sn=m,Ni=b;break;case 5:ii||Sr(h,o);case 6:if(m=Sn,b=Ni,Sn=null,_a(r,o,h),Sn=m,Ni=b,Sn!==null)if(Ni)try{(Sn.nodeType===9?Sn.body:Sn.nodeName==="HTML"?Sn.ownerDocument.body:Sn).removeChild(h.stateNode)}catch(E){jn(h,o,E)}else try{Sn.removeChild(h.stateNode)}catch(E){jn(h,o,E)}break;case 18:Sn!==null&&(Ni?(r=Sn,HO(r.nodeType===9?r.body:r.nodeName==="HTML"?r.ownerDocument.body:r,h.stateNode),Jp(r)):HO(Sn,h.stateNode));break;case 4:m=Sn,b=Ni,Sn=h.stateNode.containerInfo,Ni=!0,_a(r,o,h),Sn=m,Ni=b;break;case 0:case 11:case 14:case 15:kr(2,h,o),ii||kr(4,h,o),_a(r,o,h);break;case 1:ii||(Sr(h,o),m=h.stateNode,typeof m.componentWillUnmount=="function"&&I0(h,o,m)),_a(r,o,h);break;case 21:_a(r,o,h);break;case 22:ii=(m=ii)||h.memoizedState!==null,_a(r,o,h),ii=m;break;default:_a(r,o,h)}}function Fp(r,o){if(o.memoizedState===null&&(r=o.alternate,r!==null&&(r=r.memoizedState,r!==null))){r=r.dehydrated;try{Jp(r)}catch(h){jn(o,o.return,h)}}}function P0(r,o){if(o.memoizedState===null&&(r=o.alternate,r!==null&&(r=r.memoizedState,r!==null&&(r=r.dehydrated,r!==null))))try{Jp(r)}catch(h){jn(o,o.return,h)}}function cb(r){switch(r.tag){case 31:case 13:case 19:var o=r.stateNode;return o===null&&(o=r.stateNode=new Mh),o;case 22:return r=r.stateNode,o=r._retryCache,o===null&&(o=r._retryCache=new Mh),o;default:throw Error(i(435,r.tag))}}function Ai(r,o){var h=cb(r);o.forEach(function(m){if(!h.has(m)){h.add(m);var b=WY.bind(null,r,m);m.then(b,b)}})}function xa(r,o){var h=o.deletions;if(h!==null)for(var m=0;m<h.length;m++){var b=h[m],E=r,N=o,X=N;e:for(;X!==null;){switch(X.tag){case 27:if(Fu(X.type)){Sn=X.stateNode,Ni=!1;break e}break;case 5:Sn=X.stateNode,Ni=!1;break e;case 3:case 4:Sn=X.stateNode.containerInfo,Ni=!0;break e}X=X.return}if(Sn===null)throw Error(i(160));bl(E,N,b),Sn=null,Ni=!1,E=b.alternate,E!==null&&(E.return=null),b.return=null}if(o.subtreeFlags&13886)for(o=o.child;o!==null;)Al(o,r),o=o.sibling}var Ja=null;function Al(r,o){var h=r.alternate,m=r.flags;switch(r.tag){case 0:case 11:case 14:case 15:xa(o,r),pi(r),m&4&&(kr(3,r,r.return),Gs(3,r),kr(5,r,r.return));break;case 1:xa(o,r),pi(r),m&512&&(ii||h===null||Sr(h,h.return)),m&64&&jr&&(r=r.updateQueue,r!==null&&(m=r.callbacks,m!==null&&(h=r.shared.hiddenCallbacks,r.shared.hiddenCallbacks=h===null?m:h.concat(m))));break;case 26:var b=Ja;if(xa(o,r),pi(r),m&512&&(ii||h===null||Sr(h,h.return)),m&4){var E=h!==null?h.memoizedState:null;if(m=r.memoizedState,h===null)if(m===null)if(r.stateNode===null){e:{m=r.type,h=r.memoizedProps,b=b.ownerDocument||b;t:switch(m){case"title":E=b.getElementsByTagName("title")[0],(!E||E[so]||E[rn]||E.namespaceURI==="http://www.w3.org/2000/svg"||E.hasAttribute("itemprop"))&&(E=b.createElement(m),b.head.insertBefore(E,b.querySelector("head > title"))),Oa(E,m,h),E[rn]=r,k(E),m=E;break e;case"link":var N=QO("link","href",b).get(m+(h.href||""));if(N){for(var X=0;X<N.length;X++)if(E=N[X],E.getAttribute("href")===(h.href==null||h.href===""?null:h.href)&&E.getAttribute("rel")===(h.rel==null?null:h.rel)&&E.getAttribute("title")===(h.title==null?null:h.title)&&E.getAttribute("crossorigin")===(h.crossOrigin==null?null:h.crossOrigin)){N.splice(X,1);break t}}E=b.createElement(m),Oa(E,m,h),b.head.appendChild(E);break;case"meta":if(N=QO("meta","content",b).get(m+(h.content||""))){for(X=0;X<N.length;X++)if(E=N[X],E.getAttribute("content")===(h.content==null?null:""+h.content)&&E.getAttribute("name")===(h.name==null?null:h.name)&&E.getAttribute("property")===(h.property==null?null:h.property)&&E.getAttribute("http-equiv")===(h.httpEquiv==null?null:h.httpEquiv)&&E.getAttribute("charset")===(h.charSet==null?null:h.charSet)){N.splice(X,1);break t}}E=b.createElement(m),Oa(E,m,h),b.head.appendChild(E);break;default:throw Error(i(468,m))}E[rn]=r,k(E),m=E}r.stateNode=m}else ZO(b,r.type,r.stateNode);else r.stateNode=KO(b,m,r.memoizedProps);else E!==m?(E===null?h.stateNode!==null&&(h=h.stateNode,h.parentNode.removeChild(h)):E.count--,m===null?ZO(b,r.type,r.stateNode):KO(b,m,r.memoizedProps)):m===null&&r.stateNode!==null&&Xr(r,r.memoizedProps,h.memoizedProps)}break;case 27:xa(o,r),pi(r),m&512&&(ii||h===null||Sr(h,h.return)),h!==null&&m&4&&Xr(r,r.memoizedProps,h.memoizedProps);break;case 5:if(xa(o,r),pi(r),m&512&&(ii||h===null||Sr(h,h.return)),r.flags&32){b=r.stateNode;try{Ri(b,"")}catch(Mt){jn(r,r.return,Mt)}}m&4&&r.stateNode!=null&&(b=r.memoizedProps,Xr(r,b,h!==null?h.memoizedProps:b)),m&1024&&(So=!0);break;case 6:if(xa(o,r),pi(r),m&4){if(r.stateNode===null)throw Error(i(162));m=r.memoizedProps,h=r.stateNode;try{h.nodeValue=m}catch(Mt){jn(r,r.return,Mt)}}break;case 3:if(yb=null,b=Ja,Ja=gb(o.containerInfo),xa(o,r),Ja=b,pi(r),m&4&&h!==null&&h.memoizedState.isDehydrated)try{Jp(o.containerInfo)}catch(Mt){jn(r,r.return,Mt)}So&&(So=!1,ub(r));break;case 4:m=Ja,Ja=gb(r.stateNode.containerInfo),xa(o,r),pi(r),Ja=m;break;case 12:xa(o,r),pi(r);break;case 31:xa(o,r),pi(r),m&4&&(m=r.updateQueue,m!==null&&(r.updateQueue=null,Ai(r,m)));break;case 13:xa(o,r),pi(r),r.child.flags&8192&&r.memoizedState!==null!=(h!==null&&h.memoizedState!==null)&&(Co=I()),m&4&&(m=r.updateQueue,m!==null&&(r.updateQueue=null,Ai(r,m)));break;case 22:b=r.memoizedState!==null;var ie=h!==null&&h.memoizedState!==null,ye=jr,Oe=ii;if(jr=ye||b,ii=Oe||ie,xa(o,r),ii=Oe,jr=ye,pi(r),m&8192)e:for(o=r.stateNode,o._visibility=b?o._visibility&-2:o._visibility|1,b&&(h===null||ie||jr||ii||Sc(r)),h=null,o=r;;){if(o.tag===5||o.tag===26){if(h===null){ie=h=o;try{if(E=ie.stateNode,b)N=E.style,typeof N.setProperty=="function"?N.setProperty("display","none","important"):N.display="none";else{X=ie.stateNode;var ze=ie.memoizedProps.style,Se=ze!=null&&ze.hasOwnProperty("display")?ze.display:null;X.style.display=Se==null||typeof Se=="boolean"?"":(""+Se).trim()}}catch(Mt){jn(ie,ie.return,Mt)}}}else if(o.tag===6){if(h===null){ie=o;try{ie.stateNode.nodeValue=b?"":ie.memoizedProps}catch(Mt){jn(ie,ie.return,Mt)}}}else if(o.tag===18){if(h===null){ie=o;try{var we=ie.stateNode;b?GO(we,!0):GO(ie.stateNode,!1)}catch(Mt){jn(ie,ie.return,Mt)}}}else if((o.tag!==22&&o.tag!==23||o.memoizedState===null||o===r)&&o.child!==null){o.child.return=o,o=o.child;continue}if(o===r)break e;for(;o.sibling===null;){if(o.return===null||o.return===r)break e;h===o&&(h=null),o=o.return}h===o&&(h=null),o.sibling.return=o.return,o=o.sibling}m&4&&(m=r.updateQueue,m!==null&&(h=m.retryQueue,h!==null&&(m.retryQueue=null,Ai(r,h))));break;case 19:xa(o,r),pi(r),m&4&&(m=r.updateQueue,m!==null&&(r.updateQueue=null,Ai(r,m)));break;case 30:break;case 21:break;default:xa(o,r),pi(r)}}function pi(r){var o=r.flags;if(o&2){try{for(var h,m=r.return;m!==null;){if(Oi(m)){h=m;break}m=m.return}if(h==null)throw Error(i(160));switch(h.tag){case 27:var b=h.stateNode,E=ks(r);Dn(r,E,b);break;case 5:var N=h.stateNode;h.flags&32&&(Ri(N,""),h.flags&=-33);var X=ks(r);Dn(r,X,N);break;case 3:case 4:var ie=h.stateNode.containerInfo,ye=ks(r);tn(r,ye,ie);break;default:throw Error(i(161))}}catch(Oe){jn(r,r.return,Oe)}r.flags&=-3}o&4096&&(r.flags&=-4097)}function ub(r){if(r.subtreeFlags&1024)for(r=r.child;r!==null;){var o=r;ub(o),o.tag===5&&o.flags&1024&&o.stateNode.reset(),r=r.sibling}}function Mo(r,o){if(o.subtreeFlags&8772)for(o=o.child;o!==null;)lb(r,o.alternate,o),o=o.sibling}function Sc(r){for(r=r.child;r!==null;){var o=r;switch(o.tag){case 0:case 11:case 14:case 15:kr(4,o,o.return),Sc(o);break;case 1:Sr(o,o.return);var h=o.stateNode;typeof h.componentWillUnmount=="function"&&I0(o,o.return,h),Sc(o);break;case 27:G0(o.stateNode);case 26:case 5:Sr(o,o.return),Sc(o);break;case 22:o.memoizedState===null&&Sc(o);break;case 30:Sc(o);break;default:Sc(o)}r=r.sibling}}function Nn(r,o,h){for(h=h&&(o.subtreeFlags&8772)!==0,o=o.child;o!==null;){var m=o.alternate,b=r,E=o,N=E.flags;switch(E.tag){case 0:case 11:case 15:Nn(b,E,h),Gs(4,E);break;case 1:if(Nn(b,E,h),m=E,b=m.stateNode,typeof b.componentDidMount=="function")try{b.componentDidMount()}catch(ye){jn(m,m.return,ye)}if(m=E,b=m.updateQueue,b!==null){var X=m.stateNode;try{var ie=b.shared.hiddenCallbacks;if(ie!==null)for(b.shared.hiddenCallbacks=null,b=0;b<ie.length;b++)Ps(ie[b],X)}catch(ye){jn(m,m.return,ye)}}h&&N&64&&xl(E),Vs(E,E.return);break;case 27:bi(E);case 26:case 5:Nn(b,E,h),h&&m===null&&N&4&&Mr(E),Vs(E,E.return);break;case 12:Nn(b,E,h);break;case 31:Nn(b,E,h),h&&N&4&&Fp(b,E);break;case 13:Nn(b,E,h),h&&N&4&&P0(b,E);break;case 22:E.memoizedState===null&&Nn(b,E,h),Vs(E,E.return);break;case 30:break;default:Nn(b,E,h)}o=o.sibling}}function zp(r,o){var h=null;r!==null&&r.memoizedState!==null&&r.memoizedState.cachePool!==null&&(h=r.memoizedState.cachePool.pool),r=null,o.memoizedState!==null&&o.memoizedState.cachePool!==null&&(r=o.memoizedState.cachePool.pool),r!==h&&(r!=null&&r.refCount++,h!=null&&ra(h))}function Eo(r,o){r=null,o.alternate!==null&&(r=o.alternate.memoizedState.cache),o=o.memoizedState.cache,o!==r&&(o.refCount++,r!=null&&ra(r))}function Hi(r,o,h,m){if(o.subtreeFlags&10256)for(o=o.child;o!==null;)si(r,o,h,m),o=o.sibling}function si(r,o,h,m){var b=o.flags;switch(o.tag){case 0:case 11:case 15:Hi(r,o,h,m),b&2048&&Gs(9,o);break;case 1:Hi(r,o,h,m);break;case 3:Hi(r,o,h,m),b&2048&&(r=null,o.alternate!==null&&(r=o.alternate.memoizedState.cache),o=o.memoizedState.cache,o!==r&&(o.refCount++,r!=null&&ra(r)));break;case 12:if(b&2048){Hi(r,o,h,m),r=o.stateNode;try{var E=o.memoizedProps,N=E.id,X=E.onPostCommit;typeof X=="function"&&X(N,o.alternate===null?"mount":"update",r.passiveEffectDuration,-0)}catch(ie){jn(o,o.return,ie)}}else Hi(r,o,h,m);break;case 31:Hi(r,o,h,m);break;case 13:Hi(r,o,h,m);break;case 23:break;case 22:E=o.stateNode,N=o.alternate,o.memoizedState!==null?E._visibility&2?Hi(r,o,h,m):Uu(r,o):E._visibility&2?Hi(r,o,h,m):(E._visibility|=2,Sl(r,o,h,m,(o.subtreeFlags&10256)!==0||!1)),b&2048&&zp(N,o);break;case 24:Hi(r,o,h,m),b&2048&&Eo(o.alternate,o);break;default:Hi(r,o,h,m)}}function Sl(r,o,h,m,b){for(b=b&&((o.subtreeFlags&10256)!==0||!1),o=o.child;o!==null;){var E=r,N=o,X=h,ie=m,ye=N.flags;switch(N.tag){case 0:case 11:case 15:Sl(E,N,X,ie,b),Gs(8,N);break;case 23:break;case 22:var Oe=N.stateNode;N.memoizedState!==null?Oe._visibility&2?Sl(E,N,X,ie,b):Uu(E,N):(Oe._visibility|=2,Sl(E,N,X,ie,b)),b&&ye&2048&&zp(N.alternate,N);break;case 24:Sl(E,N,X,ie,b),b&&ye&2048&&Eo(N.alternate,N);break;default:Sl(E,N,X,ie,b)}o=o.sibling}}function Uu(r,o){if(o.subtreeFlags&10256)for(o=o.child;o!==null;){var h=r,m=o,b=m.flags;switch(m.tag){case 22:Uu(h,m),b&2048&&zp(m.alternate,m);break;case 24:Uu(h,m),b&2048&&Eo(m.alternate,m);break;default:Uu(h,m)}o=o.sibling}}var mi=8192;function Mc(r,o,h){if(r.subtreeFlags&mi)for(r=r.child;r!==null;)Si(r,o,h),r=r.sibling}function Si(r,o,h){switch(r.tag){case 26:Mc(r,o,h),r.flags&mi&&r.memoizedState!==null&&Eq(h,Ja,r.memoizedState,r.memoizedProps);break;case 5:Mc(r,o,h);break;case 3:case 4:var m=Ja;Ja=gb(r.stateNode.containerInfo),Mc(r,o,h),Ja=m;break;case 22:r.memoizedState===null&&(m=r.alternate,m!==null&&m.memoizedState!==null?(m=mi,mi=16777216,Mc(r,o,h),mi=m):Mc(r,o,h));break;default:Mc(r,o,h)}}function Ka(r){var o=r.alternate;if(o!==null&&(r=o.child,r!==null)){o.child=null;do o=r.sibling,r.sibling=null,r=o;while(r!==null)}}function Ba(r){var o=r.deletions;if((r.flags&16)!==0){if(o!==null)for(var h=0;h<o.length;h++){var m=o[h];di=m,Eh(m,r)}Ka(r)}if(r.subtreeFlags&10256)for(r=r.child;r!==null;)Ec(r),r=r.sibling}function Ec(r){switch(r.tag){case 0:case 11:case 15:Ba(r),r.flags&2048&&kr(9,r,r.return);break;case 3:Ba(r);break;case 12:Ba(r);break;case 22:var o=r.stateNode;r.memoizedState!==null&&o._visibility&2&&(r.return===null||r.return.tag!==13)?(o._visibility&=-3,Hp(r)):Ba(r);break;default:Ba(r)}}function Hp(r){var o=r.deletions;if((r.flags&16)!==0){if(o!==null)for(var h=0;h<o.length;h++){var m=o[h];di=m,Eh(m,r)}Ka(r)}for(r=r.child;r!==null;){switch(o=r,o.tag){case 0:case 11:case 15:kr(8,o,o.return),Hp(o);break;case 22:h=o.stateNode,h._visibility&2&&(h._visibility&=-3,Hp(o));break;default:Hp(o)}r=r.sibling}}function Eh(r,o){for(;di!==null;){var h=di;switch(h.tag){case 0:case 11:case 15:kr(8,h,o);break;case 23:case 22:if(h.memoizedState!==null&&h.memoizedState.cachePool!==null){var m=h.memoizedState.cachePool.pool;m!=null&&m.refCount++}break;case 24:ra(h.memoizedState.cache)}if(m=h.child,m!==null)m.return=h,di=m;else e:for(h=r;di!==null;){m=di;var b=m.sibling,E=m.return;if(Pp(m),m===h){di=null;break e}if(b!==null){b.return=E,di=b;break e}di=E}}}var Gp={getCacheForType:function(r){var o=Ki(Ot),h=o.data.get(r);return h===void 0&&(h=r(),o.data.set(r,h)),h},cacheSignal:function(){return Ki(Ot).controller.signal}},Vp=typeof WeakMap=="function"?WeakMap:Map,yn=0,Un=null,nn=null,hn=0,Nt=0,cn=null,Kt=!1,on=!1,Vn=!1,Mi=0,Ln=0,Er=0,To=0,hs=0,_n=0,Tr=0,ds=null,ba=null,Qa=!1,Co=0,Lu=0,Cr=1/0,Iu=null,Xs=null,oi=0,ps=null,Rr=null,Yr=0,Ro=0,Tc=null,kp=null,Cc=0,Rc=null;function Da(){return(yn&2)!==0&&hn!==0?hn&-hn:G.T!==null?tE():Pr()}function u(){if(_n===0)if((hn&536870912)===0||mn){var r=Ye;Ye<<=1,(Ye&3932160)===0&&(Ye=262144),_n=r}else _n=536870912;return r=zi.current,r!==null&&(r.flags|=32),_n}function f(r,o,h){(r===Un&&(Nt===2||Nt===9)||r.cancelPendingCommit!==null)&&(de(r,0),O(r,hn,_n,!1)),na(r,h),((yn&2)===0||r!==Un)&&(r===Un&&((yn&2)===0&&(To|=h),Ln===4&&O(r,hn,_n,!1)),Ml(r))}function y(r,o,h){if((yn&6)!==0)throw Error(i(327));var m=!h&&(o&127)===0&&(o&r.expiredLanes)===0||$e(r,o),b=m?wc(r,o):Za(r,o,!0),E=m;do{if(b===0){on&&!m&&O(r,o,0,!1);break}else{if(h=r.current.alternate,E&&!R(h)){b=Za(r,o,!1),E=!1;continue}if(b===2){if(E=o,r.errorRecoveryDisabledLanes&E)var N=0;else N=r.pendingLanes&-536870913,N=N!==0?N:N&536870912?536870912:0;if(N!==0){o=N;e:{var X=r;b=ds;var ie=X.current.memoizedState.isDehydrated;if(ie&&(de(X,N).flags|=256),N=Za(X,N,!1),N!==2){if(Vn&&!ie){X.errorRecoveryDisabledLanes|=E,To|=E,b=4;break e}E=ba,ba=b,E!==null&&(ba===null?ba=E:ba.push.apply(ba,E))}b=N}if(E=!1,b!==2)continue}}if(b===1){de(r,0),O(r,o,0,!0);break}e:{switch(m=r,E=b,E){case 0:case 1:throw Error(i(345));case 4:if((o&4194048)!==o)break;case 6:O(m,o,_n,!Kt);break e;case 2:ba=null;break;case 3:case 5:break;default:throw Error(i(329))}if((o&62914560)===o&&(b=Co+300-I(),10<b)){if(O(m,o,_n,!Kt),Pe(m,0,!0)!==0)break e;Yr=o,m.timeoutHandle=FO(A.bind(null,m,h,ba,Iu,Qa,o,_n,To,Tr,Kt,E,"Throttled",-0,0),b);break e}A(m,h,ba,Iu,Qa,o,_n,To,Tr,Kt,E,null,-0,0)}}break}while(!0);Ml(r)}function A(r,o,h,m,b,E,N,X,ie,ye,Oe,ze,Se,we){if(r.timeoutHandle=-1,ze=o.subtreeFlags,ze&8192||(ze&16785408)===16785408){ze={stylesheets:null,count:0,imgCount:0,imgBytes:0,suspenseyImages:[],waitingForImages:!0,waitingForViewTransition:!1,unsuspend:Rs},Si(o,E,ze);var Mt=(E&62914560)===E?Co-I():(E&4194048)===E?Lu-I():0;if(Mt=Tq(ze,Mt),Mt!==null){Yr=E,r.cancelPendingCommit=Mt(Xt.bind(null,r,o,E,h,m,b,N,X,ie,Oe,ze,null,Se,we)),O(r,E,N,!ye);return}}Xt(r,o,E,h,m,b,N,X,ie)}function R(r){for(var o=r;;){var h=o.tag;if((h===0||h===11||h===15)&&o.flags&16384&&(h=o.updateQueue,h!==null&&(h=h.stores,h!==null)))for(var m=0;m<h.length;m++){var b=h[m],E=b.getSnapshot;b=b.value;try{if(!ti(E(),b))return!1}catch{return!1}}if(h=o.child,o.subtreeFlags&16384&&h!==null)h.return=o,o=h;else{if(o===r)break;for(;o.sibling===null;){if(o.return===null||o.return===r)return!0;o=o.return}o.sibling.return=o.return,o=o.sibling}}return!0}function O(r,o,h,m){o&=~hs,o&=~To,r.suspendedLanes|=o,r.pingedLanes&=~o,m&&(r.warmLanes|=o),m=r.expirationTimes;for(var b=o;0<b;){var E=31-it(b),N=1<<E;m[E]=-1,b&=~N}h!==0&&Pf(r,h,o)}function Y(){return(yn&6)===0?(F0(0),!1):!0}function ne(){if(nn!==null){if(Nt===0)var r=nn.return;else r=nn,ga=po=null,p0(r),hl=null,dl=0,r=nn;for(;r!==null;)Ac(r.alternate,r),r=r.return;nn=null}}function de(r,o){var h=r.timeoutHandle;h!==-1&&(r.timeoutHandle=-1,lq(h)),h=r.cancelPendingCommit,h!==null&&(r.cancelPendingCommit=null,h()),Yr=0,ne(),Un=r,nn=h=Ds(r.current,null),hn=o,Nt=0,cn=null,Kt=!1,on=$e(r,o),Vn=!1,Tr=_n=hs=To=Er=Ln=0,ba=ds=null,Qa=!1,(o&8)!==0&&(o|=o&32);var m=r.entangledLanes;if(m!==0)for(r=r.entanglements,m&=o;0<m;){var b=31-it(m),E=1<<b;o|=r[b],m&=~E}return Mi=o,rl(),h}function Ue(r,o){kt=null,G.H=dh,o===fl||o===ls?(o=vp(),Nt=3):o===ih?(o=vp(),Nt=4):Nt=o===Up?8:o!==null&&typeof o=="object"&&typeof o.then=="function"?6:1,cn=o,nn===null&&(Ln=1,Np(r,ka(o,r.current)))}function We(){var r=zi.current;return r===null?!0:(hn&4194048)===hn?Hr===null:(hn&62914560)===hn||(hn&536870912)!==0?r===Hr:!1}function ht(){var r=G.H;return G.H=dh,r===null?dh:r}function mt(){var r=G.A;return G.A=Gp,r}function Wt(){Ln=4,Kt||(hn&4194048)!==hn&&zi.current!==null||(on=!0),(Er&134217727)===0&&(To&134217727)===0||Un===null||O(Un,hn,_n,!1)}function Za(r,o,h){var m=yn;yn|=2;var b=ht(),E=mt();(Un!==r||hn!==o)&&(Iu=null,de(r,o)),o=!1;var N=Ln;e:do try{if(Nt!==0&&nn!==null){var X=nn,ie=cn;switch(Nt){case 8:ne(),N=6;break e;case 3:case 2:case 9:case 6:zi.current===null&&(o=!0);var ye=Nt;if(Nt=0,cn=null,je(r,X,ie,ye),h&&on){N=0;break e}break;default:ye=Nt,Nt=0,cn=null,je(r,X,ie,ye)}}Th(),N=Ln;break}catch(Oe){Ue(r,Oe)}while(!0);return o&&r.shellSuspendCounter++,ga=po=null,yn=m,G.H=b,G.A=E,nn===null&&(Un=null,hn=0,rl()),N}function Th(){for(;nn!==null;)fe(nn)}function wc(r,o){var h=yn;yn|=2;var m=ht(),b=mt();Un!==r||hn!==o?(Iu=null,Cr=I()+500,de(r,o)):on=$e(r,o);e:do try{if(Nt!==0&&nn!==null){o=nn;var E=cn;t:switch(Nt){case 1:Nt=0,cn=null,je(r,o,E,1);break;case 2:case 9:if(Lx(E)){Nt=0,cn=null,Ce(o);break}o=function(){Nt!==2&&Nt!==9||Un!==r||(Nt=7),Ml(r)},E.then(o,o);break e;case 3:Nt=7;break e;case 4:Nt=5;break e;case 7:Lx(E)?(Nt=0,cn=null,Ce(o)):(Nt=0,cn=null,je(r,o,E,7));break;case 5:var N=null;switch(nn.tag){case 26:N=nn.memoizedState;case 5:case 27:var X=nn;if(N?$O(N):X.stateNode.complete){Nt=0,cn=null;var ie=X.sibling;if(ie!==null)nn=ie;else{var ye=X.return;ye!==null?(nn=ye,Bt(ye)):nn=null}break t}}Nt=0,cn=null,je(r,o,E,5);break;case 6:Nt=0,cn=null,je(r,o,E,6);break;case 8:ne(),Ln=6;break e;default:throw Error(i(462))}}be();break}catch(Oe){Ue(r,Oe)}while(!0);return ga=po=null,G.H=m,G.A=b,yn=h,nn!==null?0:(Un=null,hn=0,rl(),Ln)}function be(){for(;nn!==null&&!Ke();)fe(nn)}function fe(r){var o=Lp(r.alternate,r,Mi);r.memoizedProps=r.pendingProps,o===null?Bt(r):nn=o}function Ce(r){var o=r,h=o.alternate;switch(o.tag){case 15:case 0:o=ya(h,o,o.pendingProps,o.type,void 0,hn);break;case 11:o=ya(h,o,o.pendingProps,o.type.render,o.ref,hn);break;case 5:p0(o);default:Ac(h,o),o=nn=ma(o,Mi),o=Lp(h,o,Mi)}r.memoizedProps=r.pendingProps,o===null?Bt(r):nn=o}function je(r,o,h,m){ga=po=null,p0(o),hl=null,dl=0;var b=o.return;try{if(yr(r,b,o,h,hn)){Ln=1,Np(r,ka(h,r.current)),nn=null;return}}catch(E){if(b!==null)throw nn=b,E;Ln=1,Np(r,ka(h,r.current)),nn=null;return}o.flags&32768?(mn||m===1?r=!0:on||(hn&536870912)!==0?r=!1:(Kt=r=!0,(m===2||m===9||m===3||m===6)&&(m=zi.current,m!==null&&m.tag===13&&(m.flags|=16384))),Jn(o,r)):Bt(o)}function Bt(r){var o=r;do{if((o.flags&32768)!==0){Jn(o,Kt);return}r=o.return;var h=L0(o.alternate,o,Mi);if(h!==null){nn=h;return}if(o=o.sibling,o!==null){nn=o;return}nn=o=r}while(o!==null);Ln===0&&(Ln=5)}function Jn(r,o){do{var h=Ip(r.alternate,r);if(h!==null){h.flags&=32767,nn=h;return}if(h=r.return,h!==null&&(h.flags|=32768,h.subtreeFlags=0,h.deletions=null),!o&&(r=r.sibling,r!==null)){nn=r;return}nn=r=h}while(r!==null);Ln=6,nn=null}function Xt(r,o,h,m,b,E,N,X,ie){r.cancelPendingCommit=null;do Xp();while(oi!==0);if((yn&6)!==0)throw Error(i(327));if(o!==null){if(o===r.current)throw Error(i(177));if(E=o.lanes|o.childLanes,E|=cp,Lr(r,h,E,N,X,ie),r===Un&&(nn=Un=null,hn=0),Rr=o,ps=r,Yr=h,Ro=E,Tc=b,kp=m,(o.subtreeFlags&10256)!==0||(o.flags&10256)!==0?(r.callbackNode=null,r.callbackPriority=0,JY(Re,function(){return bO(),null})):(r.callbackNode=null,r.callbackPriority=0),m=(o.flags&13878)!==0,(o.subtreeFlags&13878)!==0||m){m=G.T,G.T=null,b=J.p,J.p=2,N=yn,yn|=4;try{Nu(r,o,h)}finally{yn=N,J.p=b,G.T=m}}oi=1,Mn(),Gi(),En()}}function Mn(){if(oi===1){oi=0;var r=ps,o=Rr,h=(o.flags&13878)!==0;if((o.subtreeFlags&13878)!==0||h){h=G.T,G.T=null;var m=J.p;J.p=2;var b=yn;yn|=4;try{Al(o,r);var E=cE,N=ap(r.containerInfo),X=E.focusedElem,ie=E.selectionRange;if(N!==X&&X&&X.ownerDocument&&ip(X.ownerDocument.documentElement,X)){if(ie!==null&&hu(X)){var ye=ie.start,Oe=ie.end;if(Oe===void 0&&(Oe=ye),"selectionStart"in X)X.selectionStart=ye,X.selectionEnd=Math.min(Oe,X.value.length);else{var ze=X.ownerDocument||document,Se=ze&&ze.defaultView||window;if(Se.getSelection){var we=Se.getSelection(),Mt=X.textContent.length,Gt=Math.min(ie.start,Mt),Qn=ie.end===void 0?Gt:Math.min(ie.end,Mt);!we.extend&&Gt>Qn&&(N=Qn,Qn=Gt,Gt=N);var he=kg(X,Gt),se=kg(X,Qn);if(he&&se&&(we.rangeCount!==1||we.anchorNode!==he.node||we.anchorOffset!==he.offset||we.focusNode!==se.node||we.focusOffset!==se.offset)){var ve=ze.createRange();ve.setStart(he.node,he.offset),we.removeAllRanges(),Gt>Qn?(we.addRange(ve),we.extend(se.node,se.offset)):(ve.setEnd(se.node,se.offset),we.addRange(ve))}}}}for(ze=[],we=X;we=we.parentNode;)we.nodeType===1&&ze.push({element:we,left:we.scrollLeft,top:we.scrollTop});for(typeof X.focus=="function"&&X.focus(),X=0;X<ze.length;X++){var Le=ze[X];Le.element.scrollLeft=Le.left,Le.element.scrollTop=Le.top}}Ab=!!lE,cE=lE=null}finally{yn=b,J.p=m,G.T=h}}r.current=o,oi=2}}function Gi(){if(oi===2){oi=0;var r=ps,o=Rr,h=(o.flags&8772)!==0;if((o.subtreeFlags&8772)!==0||h){h=G.T,G.T=null;var m=J.p;J.p=2;var b=yn;yn|=4;try{lb(r,o.alternate,o)}finally{yn=b,J.p=m,G.T=h}}oi=3}}function En(){if(oi===4||oi===3){oi=0,V();var r=ps,o=Rr,h=Yr,m=kp;(o.subtreeFlags&10256)!==0||(o.flags&10256)!==0?oi=5:(oi=0,Rr=ps=null,wo(r,r.pendingLanes));var b=r.pendingLanes;if(b===0&&(Xs=null),Ql(h),o=o.stateNode,ke&&typeof ke.onCommitFiberRoot=="function")try{ke.onCommitFiberRoot(Fe,o,void 0,(o.current.flags&128)===128)}catch{}if(m!==null){o=G.T,b=J.p,J.p=2,G.T=null;try{for(var E=r.onRecoverableError,N=0;N<m.length;N++){var X=m[N];E(X.value,{componentStack:X.stack})}}finally{G.T=o,J.p=b}}(Yr&3)!==0&&Xp(),Ml(r),b=r.pendingLanes,(h&261930)!==0&&(b&42)!==0?r===Rc?Cc++:(Cc=0,Rc=r):Cc=0,F0(0)}}function wo(r,o){(r.pooledCacheLanes&=o)===0&&(o=r.pooledCache,o!=null&&(r.pooledCache=null,ra(o)))}function Xp(){return Mn(),Gi(),En(),bO()}function bO(){if(oi!==5)return!1;var r=ps,o=Ro;Ro=0;var h=Ql(Yr),m=G.T,b=J.p;try{J.p=32>h?32:h,G.T=null,h=Tc,Tc=null;var E=ps,N=Yr;if(oi=0,Rr=ps=null,Yr=0,(yn&6)!==0)throw Error(i(331));var X=yn;if(yn|=4,Ec(E.current),si(E,E.current,N,h),yn=X,F0(0,!1),ke&&typeof ke.onPostCommitFiberRoot=="function")try{ke.onPostCommitFiberRoot(Fe,E)}catch{}return!0}finally{J.p=b,G.T=m,wo(r,o)}}function AO(r,o,h){o=ka(h,o),o=U0(r.stateNode,o,2),r=yo(r,o,2),r!==null&&(na(r,2),Ml(r))}function jn(r,o,h){if(r.tag===3)AO(r,r,h);else for(;o!==null;){if(o.tag===3){AO(o,r,h);break}else if(o.tag===1){var m=o.stateNode;if(typeof o.type.getDerivedStateFromError=="function"||typeof m.componentDidCatch=="function"&&(Xs===null||!Xs.has(m))){r=ka(h,r),h=Ru(2),m=yo(o,h,2),m!==null&&(qa(h,m,o,r),na(m,2),Ml(m));break}}o=o.return}}function ZM(r,o,h){var m=r.pingCache;if(m===null){m=r.pingCache=new Vp;var b=new Set;m.set(o,b)}else b=m.get(o),b===void 0&&(b=new Set,m.set(o,b));b.has(h)||(Vn=!0,b.add(h),r=YY.bind(null,r,o,h),o.then(r,r))}function YY(r,o,h){var m=r.pingCache;m!==null&&m.delete(o),r.pingedLanes|=r.suspendedLanes&h,r.warmLanes&=~h,Un===r&&(hn&h)===h&&(Ln===4||Ln===3&&(hn&62914560)===hn&&300>I()-Co?(yn&2)===0&&de(r,0):hs|=h,Tr===hn&&(Tr=0)),Ml(r)}function SO(r,o){o===0&&(o=bn()),r=sl(r,o),r!==null&&(na(r,o),Ml(r))}function qY(r){var o=r.memoizedState,h=0;o!==null&&(h=o.retryLane),SO(r,h)}function WY(r,o){var h=0;switch(r.tag){case 31:case 13:var m=r.stateNode,b=r.memoizedState;b!==null&&(h=b.retryLane);break;case 19:m=r.stateNode;break;case 22:m=r.stateNode._retryCache;break;default:throw Error(i(314))}m!==null&&m.delete(o),SO(r,h)}function JY(r,o){return Ze(r,o)}var fb=null,jp=null,$M=!1,hb=!1,eE=!1,Pu=0;function Ml(r){r!==jp&&r.next===null&&(jp===null?fb=jp=r:jp=jp.next=r),hb=!0,$M||($M=!0,QY())}function F0(r,o){if(!eE&&hb){eE=!0;do for(var h=!1,m=fb;m!==null;){if(r!==0){var b=m.pendingLanes;if(b===0)var E=0;else{var N=m.suspendedLanes,X=m.pingedLanes;E=(1<<31-it(42|r)+1)-1,E&=b&~(N&~X),E=E&201326741?E&201326741|1:E?E|2:0}E!==0&&(h=!0,CO(m,E))}else E=hn,E=Pe(m,m===Un?E:0,m.cancelPendingCommit!==null||m.timeoutHandle!==-1),(E&3)===0||$e(m,E)||(h=!0,CO(m,E));m=m.next}while(h);eE=!1}}function KY(){MO()}function MO(){hb=$M=!1;var r=0;Pu!==0&&oq()&&(r=Pu);for(var o=I(),h=null,m=fb;m!==null;){var b=m.next,E=EO(m,o);E===0?(m.next=null,h===null?fb=b:h.next=b,b===null&&(jp=h)):(h=m,(r!==0||(E&3)!==0)&&(hb=!0)),m=b}oi!==0&&oi!==5||F0(r),Pu!==0&&(Pu=0)}function EO(r,o){for(var h=r.suspendedLanes,m=r.pingedLanes,b=r.expirationTimes,E=r.pendingLanes&-62914561;0<E;){var N=31-it(E),X=1<<N,ie=b[N];ie===-1?((X&h)===0||(X&m)!==0)&&(b[N]=Ht(X,o)):ie<=o&&(r.expiredLanes|=X),E&=~X}if(o=Un,h=hn,h=Pe(r,r===o?h:0,r.cancelPendingCommit!==null||r.timeoutHandle!==-1),m=r.callbackNode,h===0||r===o&&(Nt===2||Nt===9)||r.cancelPendingCommit!==null)return m!==null&&m!==null&&At(m),r.callbackNode=null,r.callbackPriority=0;if((h&3)===0||$e(r,h)){if(o=h&-h,o===r.callbackPriority)return o;switch(m!==null&&At(m),Ql(h)){case 2:case 8:h=Be;break;case 32:h=Re;break;case 268435456:h=Qe;break;default:h=Re}return m=TO.bind(null,r),h=Ze(h,m),r.callbackPriority=o,r.callbackNode=h,o}return m!==null&&m!==null&&At(m),r.callbackPriority=2,r.callbackNode=null,2}function TO(r,o){if(oi!==0&&oi!==5)return r.callbackNode=null,r.callbackPriority=0,null;var h=r.callbackNode;if(Xp()&&r.callbackNode!==h)return null;var m=hn;return m=Pe(r,r===Un?m:0,r.cancelPendingCommit!==null||r.timeoutHandle!==-1),m===0?null:(y(r,m,o),EO(r,I()),r.callbackNode!=null&&r.callbackNode===h?TO.bind(null,r):null)}function CO(r,o){if(Xp())return null;y(r,o,!0)}function QY(){cq(function(){(yn&6)!==0?Ze(Ae,KY):MO()})}function tE(){if(Pu===0){var r=vo;r===0&&(r=rt,rt<<=1,(rt&261888)===0&&(rt=256)),Pu=r}return Pu}function RO(r){return r==null||typeof r=="symbol"||typeof r=="boolean"?null:typeof r=="function"?r:Ff(""+r)}function wO(r,o){var h=o.ownerDocument.createElement("input");return h.name=o.name,h.value=o.value,r.id&&h.setAttribute("form",r.id),o.parentNode.insertBefore(h,o),r=new FormData(r),h.parentNode.removeChild(h),r}function ZY(r,o,h,m,b){if(o==="submit"&&h&&h.stateNode===b){var E=RO((b[Fi]||null).action),N=m.submitter;N&&(o=(o=N[Fi]||null)?RO(o.formAction):N.getAttribute("formAction"),o!==null&&(E=o,N=null));var X=new Vf("action","action",null,m,b);r.push({event:X,listeners:[{instance:null,listener:function(){if(m.defaultPrevented){if(Pu!==0){var ie=N?wO(b,N):new FormData(b);w0(h,{pending:!0,data:ie,method:b.method,action:E},null,ie)}}else typeof E=="function"&&(X.preventDefault(),ie=N?wO(b,N):new FormData(b),w0(h,{pending:!0,data:ie,method:b.method,action:E},E,ie))},currentTarget:b}]})}}for(var nE=0;nE<lp.length;nE++){var iE=lp[nE],$Y=iE.toLowerCase(),eq=iE[0].toUpperCase()+iE.slice(1);pa($Y,"on"+eq)}pa(Va,"onAnimationEnd"),pa(Xg,"onAnimationIteration"),pa(Bs,"onAnimationStart"),pa("dblclick","onDoubleClick"),pa("focusin","onFocus"),pa("focusout","onBlur"),pa(gu,"onTransitionRun"),pa(il,"onTransitionStart"),pa(jg,"onTransitionCancel"),pa(op,"onTransitionEnd"),me("onMouseEnter",["mouseout","mouseover"]),me("onMouseLeave",["mouseout","mouseover"]),me("onPointerEnter",["pointerout","pointerover"]),me("onPointerLeave",["pointerout","pointerover"]),xe("onChange","change click focusin focusout input keydown keyup selectionchange".split(" ")),xe("onSelect","focusout contextmenu dragend focusin keydown keyup mousedown mouseup selectionchange".split(" ")),xe("onBeforeInput",["compositionend","keypress","textInput","paste"]),xe("onCompositionEnd","compositionend focusout keydown keypress keyup mousedown".split(" ")),xe("onCompositionStart","compositionstart focusout keydown keypress keyup mousedown".split(" ")),xe("onCompositionUpdate","compositionupdate focusout keydown keypress keyup mousedown".split(" "));var z0="abort canplay canplaythrough durationchange emptied encrypted ended error loadeddata loadedmetadata loadstart pause play playing progress ratechange resize seeked seeking stalled suspend timeupdate volumechange waiting".split(" "),tq=new Set("beforetoggle cancel close invalid load scroll scrollend toggle".split(" ").concat(z0));function BO(r,o){o=(o&4)!==0;for(var h=0;h<r.length;h++){var m=r[h],b=m.event;m=m.listeners;e:{var E=void 0;if(o)for(var N=m.length-1;0<=N;N--){var X=m[N],ie=X.instance,ye=X.currentTarget;if(X=X.listener,ie!==E&&b.isPropagationStopped())break e;E=X,b.currentTarget=ye;try{E(b)}catch(Oe){al(Oe)}b.currentTarget=null,E=ie}else for(N=0;N<m.length;N++){if(X=m[N],ie=X.instance,ye=X.currentTarget,X=X.listener,ie!==E&&b.isPropagationStopped())break e;E=X,b.currentTarget=ye;try{E(b)}catch(Oe){al(Oe)}b.currentTarget=null,E=ie}}}}function gn(r,o){var h=o[Zl];h===void 0&&(h=o[Zl]=new Set);var m=r+"__bubble";h.has(m)||(DO(o,r,2,!1),h.add(m))}function aE(r,o,h){var m=0;o&&(m|=4),DO(h,r,m,o)}var db="_reactListening"+Math.random().toString(36).slice(2);function rE(r){if(!r[db]){r[db]=!0,ue.forEach(function(h){h!=="selectionchange"&&(tq.has(h)||aE(h,!1,r),aE(h,!0,r))});var o=r.nodeType===9?r:r.ownerDocument;o===null||o[db]||(o[db]=!0,aE("selectionchange",!1,o))}}function DO(r,o,h,m){switch(sN(o)){case 2:var b=wq;break;case 8:b=Bq;break;default:b=xE}h=b.bind(null,o,h,r),b=void 0,!qd||o!=="touchstart"&&o!=="touchmove"&&o!=="wheel"||(b=!0),m?b!==void 0?r.addEventListener(o,h,{capture:!0,passive:b}):r.addEventListener(o,h,!0):b!==void 0?r.addEventListener(o,h,{passive:b}):r.addEventListener(o,h,!1)}function sE(r,o,h,m,b){var E=m;if((o&1)===0&&(o&2)===0&&m!==null)e:for(;;){if(m===null)return;var N=m.tag;if(N===3||N===4){var X=m.stateNode.containerInfo;if(X===b)break;if(N===4)for(N=m.return;N!==null;){var ie=N.tag;if((ie===3||ie===4)&&N.stateNode.containerInfo===b)return;N=N.return}for(;X!==null;){if(N=_i(X),N===null)return;if(ie=N.tag,ie===5||ie===6||ie===26||ie===27){m=E=N;continue e}X=X.parentNode}}m=m.return}Tg(function(){var ye=E,Oe=jd(h),ze=[];e:{var Se=co.get(r);if(Se!==void 0){var we=Vf,Mt=r;switch(r){case"keypress":if(rc(h)===0)break e;case"keydown":case"keyup":we=Ng;break;case"focusin":Mt="focus",we=Zd;break;case"focusout":Mt="blur",we=Zd;break;case"beforeblur":case"afterblur":we=Zd;break;case"click":if(h.button===2)break e;case"auxclick":case"dblclick":case"mousedown":case"mousemove":case"mouseup":case"mouseout":case"mouseover":case"contextmenu":we=hx;break;case"drag":case"dragend":case"dragenter":case"dragexit":case"dragleave":case"dragover":case"dragstart":case"drop":we=dx;break;case"touchcancel":case"touchend":case"touchmove":case"touchstart":we=oo;break;case Va:case Xg:case Bs:we=gx;break;case op:we=XM;break;case"scroll":case"scrollend":we=Kd;break;case"wheel":we=Qo;break;case"copy":case"cut":case"paste":we=Rg;break;case"gotpointercapture":case"lostpointercapture":case"pointercancel":case"pointerdown":case"pointermove":case"pointerout":case"pointerover":case"pointerup":we=$d;break;case"toggle":case"beforetoggle":we=Lg}var Gt=(o&4)!==0,Qn=!Gt&&(r==="scroll"||r==="scrollend"),he=Gt?Se!==null?Se+"Capture":null:Se;Gt=[];for(var se=ye,ve;se!==null;){var Le=se;if(ve=Le.stateNode,Le=Le.tag,Le!==5&&Le!==26&&Le!==27||ve===null||he===null||(Le=ac(se,he),Le!=null&&Gt.push(H0(se,Le,ve))),Qn)break;se=se.return}0<Gt.length&&(Se=new we(Se,Mt,null,h,Oe),ze.push({event:Se,listeners:Gt}))}}if((o&7)===0){e:{if(Se=r==="mouseover"||r==="pointerover",we=r==="mouseout"||r==="pointerout",Se&&h!==zf&&(Mt=h.relatedTarget||h.fromElement)&&(_i(Mt)||Mt[ur]))break e;if((we||Se)&&(Se=Oe.window===Oe?Oe:(Se=Oe.ownerDocument)?Se.defaultView||Se.parentWindow:window,we?(Mt=h.relatedTarget||h.toElement,we=ye,Mt=Mt?_i(Mt):null,Mt!==null&&(Qn=s(Mt),Gt=Mt.tag,Mt!==Qn||Gt!==5&&Gt!==27&&Gt!==6)&&(Mt=null)):(we=null,Mt=ye),we!==Mt)){if(Gt=hx,Le="onMouseLeave",he="onMouseEnter",se="mouse",(r==="pointerout"||r==="pointerover")&&(Gt=$d,Le="onPointerLeave",he="onPointerEnter",se="pointer"),Qn=we==null?Se:ns(we),ve=Mt==null?Se:ns(Mt),Se=new Gt(Le,se+"leave",we,h,Oe),Se.target=Qn,Se.relatedTarget=ve,Le=null,_i(Oe)===ye&&(Gt=new Gt(he,se+"enter",Mt,h,Oe),Gt.target=ve,Gt.relatedTarget=Qn,Le=Gt),Qn=Le,we&&Mt)t:{for(Gt=nq,he=we,se=Mt,ve=0,Le=he;Le;Le=Gt(Le))ve++;Le=0;for(var Lt=se;Lt;Lt=Gt(Lt))Le++;for(;0<ve-Le;)he=Gt(he),ve--;for(;0<Le-ve;)se=Gt(se),Le--;for(;ve--;){if(he===se||se!==null&&he===se.alternate){Gt=he;break t}he=Gt(he),se=Gt(se)}Gt=null}else Gt=null;we!==null&&OO(ze,Se,we,Gt,!1),Mt!==null&&Qn!==null&&OO(ze,Qn,Mt,Gt,!0)}}e:{if(Se=ye?ns(ye):window,we=Se.nodeName&&Se.nodeName.toLowerCase(),we==="select"||we==="input"&&Se.type==="file")var In=Hg;else if(Fg(Se))if(Wf)In=Cx;else{In=el;var Rt=Jf}else we=Se.nodeName,!we||we.toLowerCase()!=="input"||Se.type!=="checkbox"&&Se.type!=="radio"?ye&&fr(ye.elementType)&&(In=Hg):In=Tx;if(In&&(In=In(r,ye))){np(ze,In,h,Oe);break e}Rt&&Rt(r,Se,ye),r==="focusout"&&ye&&Se.type==="number"&&ye.memoizedProps.value!=null&&Yi(Se,"number",Se.value)}switch(Rt=ye?ns(ye):window,r){case"focusin":(Fg(Rt)||Rt.contentEditable==="true")&&(du=Rt,rp=ye,pu=null);break;case"focusout":pu=rp=du=null;break;case"mousedown":dr=!0;break;case"contextmenu":case"mouseup":case"dragend":dr=!1,sp(ze,h,Oe);break;case"selectionchange":if(Rx)break;case"keydown":case"keyup":sp(ze,h,Oe)}var ln;if(sc)e:{switch(r){case"compositionstart":var xn="onCompositionStart";break e;case"compositionend":xn="onCompositionEnd";break e;case"compositionupdate":xn="onCompositionUpdate";break e}xn=void 0}else $o?ep(r,h)&&(xn="onCompositionEnd"):r==="keydown"&&h.keyCode===229&&(xn="onCompositionStart");xn&&(aa&&h.locale!=="ko"&&($o||xn!=="onCompositionStart"?xn==="onCompositionEnd"&&$o&&(ln=Jd()):(Wo=Oe,Wd="value"in Wo?Wo.value:Wo.textContent,$o=!0)),Rt=pb(ye,xn),0<Rt.length&&(xn=new wg(xn,r,null,h,Oe),ze.push({event:xn,listeners:Rt}),ln?xn.data=ln:(ln=ou(h),ln!==null&&(xn.data=ln)))),(ln=oc?tp(r,h):Sx(r,h))&&(xn=pb(ye,"onBeforeInput"),0<xn.length&&(Rt=new wg("onBeforeInput","beforeinput",null,h,Oe),ze.push({event:Rt,listeners:xn}),Rt.data=ln)),ZY(ze,r,ye,h,Oe)}BO(ze,o)})}function H0(r,o,h){return{instance:r,listener:o,currentTarget:h}}function pb(r,o){for(var h=o+"Capture",m=[];r!==null;){var b=r,E=b.stateNode;if(b=b.tag,b!==5&&b!==26&&b!==27||E===null||(b=ac(r,h),b!=null&&m.unshift(H0(r,b,E)),b=ac(r,o),b!=null&&m.push(H0(r,b,E))),r.tag===3)return m;r=r.return}return[]}function nq(r){if(r===null)return null;do r=r.return;while(r&&r.tag!==5&&r.tag!==27);return r||null}function OO(r,o,h,m,b){for(var E=o._reactName,N=[];h!==null&&h!==m;){var X=h,ie=X.alternate,ye=X.stateNode;if(X=X.tag,ie!==null&&ie===m)break;X!==5&&X!==26&&X!==27||ye===null||(ie=ye,b?(ye=ac(h,E),ye!=null&&N.unshift(H0(h,ye,ie))):b||(ye=ac(h,E),ye!=null&&N.push(H0(h,ye,ie)))),h=h.return}N.length!==0&&r.push({event:o,listeners:N})}var iq=/\r\n?/g,aq=/\u0000|\uFFFD/g;function NO(r){return(typeof r=="string"?r:""+r).replace(iq,`
`).replace(aq,"")}function UO(r,o){return o=NO(o),NO(r)===o}function Kn(r,o,h,m,b,E){switch(h){case"children":typeof m=="string"?o==="body"||o==="textarea"&&m===""||Ri(r,m):(typeof m=="number"||typeof m=="bigint")&&o!=="body"&&Ri(r,""+m);break;case"className":Ut(r,"class",m);break;case"tabIndex":Ut(r,"tabindex",m);break;case"dir":case"role":case"viewBox":case"width":case"height":Ut(r,h,m);break;case"style":nc(r,m,E);break;case"data":if(o!=="object"){Ut(r,"data",m);break}case"src":case"href":if(m===""&&(o!=="a"||h!=="href")){r.removeAttribute(h);break}if(m==null||typeof m=="function"||typeof m=="symbol"||typeof m=="boolean"){r.removeAttribute(h);break}m=Ff(""+m),r.setAttribute(h,m);break;case"action":case"formAction":if(typeof m=="function"){r.setAttribute(h,"javascript:throw new Error('A React form was unexpectedly submitted. If you called form.submit() manually, consider using form.requestSubmit() instead. If you\\'re trying to use event.stopPropagation() in a submit event handler, consider also calling event.preventDefault().')");break}else typeof E=="function"&&(h==="formAction"?(o!=="input"&&Kn(r,o,"name",b.name,b,null),Kn(r,o,"formEncType",b.formEncType,b,null),Kn(r,o,"formMethod",b.formMethod,b,null),Kn(r,o,"formTarget",b.formTarget,b,null)):(Kn(r,o,"encType",b.encType,b,null),Kn(r,o,"method",b.method,b,null),Kn(r,o,"target",b.target,b,null)));if(m==null||typeof m=="symbol"||typeof m=="boolean"){r.removeAttribute(h);break}m=Ff(""+m),r.setAttribute(h,m);break;case"onClick":m!=null&&(r.onclick=Rs);break;case"onScroll":m!=null&&gn("scroll",r);break;case"onScrollEnd":m!=null&&gn("scrollend",r);break;case"dangerouslySetInnerHTML":if(m!=null){if(typeof m!="object"||!("__html"in m))throw Error(i(61));if(h=m.__html,h!=null){if(b.children!=null)throw Error(i(60));r.innerHTML=h}}break;case"multiple":r.multiple=m&&typeof m!="function"&&typeof m!="symbol";break;case"muted":r.muted=m&&typeof m!="function"&&typeof m!="symbol";break;case"suppressContentEditableWarning":case"suppressHydrationWarning":case"defaultValue":case"defaultChecked":case"innerHTML":case"ref":break;case"autoFocus":break;case"xlinkHref":if(m==null||typeof m=="function"||typeof m=="boolean"||typeof m=="symbol"){r.removeAttribute("xlink:href");break}h=Ff(""+m),r.setAttributeNS("http://www.w3.org/1999/xlink","xlink:href",h);break;case"contentEditable":case"spellCheck":case"draggable":case"value":case"autoReverse":case"externalResourcesRequired":case"focusable":case"preserveAlpha":m!=null&&typeof m!="function"&&typeof m!="symbol"?r.setAttribute(h,""+m):r.removeAttribute(h);break;case"inert":case"allowFullScreen":case"async":case"autoPlay":case"controls":case"default":case"defer":case"disabled":case"disablePictureInPicture":case"disableRemotePlayback":case"formNoValidate":case"hidden":case"loop":case"noModule":case"noValidate":case"open":case"playsInline":case"readOnly":case"required":case"reversed":case"scoped":case"seamless":case"itemScope":m&&typeof m!="function"&&typeof m!="symbol"?r.setAttribute(h,""):r.removeAttribute(h);break;case"capture":case"download":m===!0?r.setAttribute(h,""):m!==!1&&m!=null&&typeof m!="function"&&typeof m!="symbol"?r.setAttribute(h,m):r.removeAttribute(h);break;case"cols":case"rows":case"size":case"span":m!=null&&typeof m!="function"&&typeof m!="symbol"&&!isNaN(m)&&1<=m?r.setAttribute(h,m):r.removeAttribute(h);break;case"rowSpan":case"start":m==null||typeof m=="function"||typeof m=="symbol"||isNaN(m)?r.removeAttribute(h):r.setAttribute(h,m);break;case"popover":gn("beforetoggle",r),gn("toggle",r),St(r,"popover",m);break;case"xlinkActuate":xt(r,"http://www.w3.org/1999/xlink","xlink:actuate",m);break;case"xlinkArcrole":xt(r,"http://www.w3.org/1999/xlink","xlink:arcrole",m);break;case"xlinkRole":xt(r,"http://www.w3.org/1999/xlink","xlink:role",m);break;case"xlinkShow":xt(r,"http://www.w3.org/1999/xlink","xlink:show",m);break;case"xlinkTitle":xt(r,"http://www.w3.org/1999/xlink","xlink:title",m);break;case"xlinkType":xt(r,"http://www.w3.org/1999/xlink","xlink:type",m);break;case"xmlBase":xt(r,"http://www.w3.org/XML/1998/namespace","xml:base",m);break;case"xmlLang":xt(r,"http://www.w3.org/XML/1998/namespace","xml:lang",m);break;case"xmlSpace":xt(r,"http://www.w3.org/XML/1998/namespace","xml:space",m);break;case"is":St(r,"is",m);break;case"innerText":case"textContent":break;default:(!(2<h.length)||h[0]!=="o"&&h[0]!=="O"||h[1]!=="n"&&h[1]!=="N")&&(h=ux.get(h)||h,St(r,h,m))}}function oE(r,o,h,m,b,E){switch(h){case"style":nc(r,m,E);break;case"dangerouslySetInnerHTML":if(m!=null){if(typeof m!="object"||!("__html"in m))throw Error(i(61));if(h=m.__html,h!=null){if(b.children!=null)throw Error(i(60));r.innerHTML=h}}break;case"children":typeof m=="string"?Ri(r,m):(typeof m=="number"||typeof m=="bigint")&&Ri(r,""+m);break;case"onScroll":m!=null&&gn("scroll",r);break;case"onScrollEnd":m!=null&&gn("scrollend",r);break;case"onClick":m!=null&&(r.onclick=Rs);break;case"suppressContentEditableWarning":case"suppressHydrationWarning":case"innerHTML":case"ref":break;case"innerText":case"textContent":break;default:if(!Me.hasOwnProperty(h))e:{if(h[0]==="o"&&h[1]==="n"&&(b=h.endsWith("Capture"),o=h.slice(2,b?h.length-7:void 0),E=r[Fi]||null,E=E!=null?E[h]:null,typeof E=="function"&&r.removeEventListener(o,E,b),typeof m=="function")){typeof E!="function"&&E!==null&&(h in r?r[h]=null:r.hasAttribute(h)&&r.removeAttribute(h)),r.addEventListener(o,m,b);break e}h in r?r[h]=m:m===!0?r.setAttribute(h,""):St(r,h,m)}}}function Oa(r,o,h){switch(o){case"div":case"span":case"svg":case"path":case"a":case"g":case"p":case"li":break;case"img":gn("error",r),gn("load",r);var m=!1,b=!1,E;for(E in h)if(h.hasOwnProperty(E)){var N=h[E];if(N!=null)switch(E){case"src":m=!0;break;case"srcSet":b=!0;break;case"children":case"dangerouslySetInnerHTML":throw Error(i(137,o));default:Kn(r,o,E,N,h,null)}}b&&Kn(r,o,"srcSet",h.srcSet,h,null),m&&Kn(r,o,"src",h.src,h,null);return;case"input":gn("invalid",r);var X=E=N=b=null,ie=null,ye=null;for(m in h)if(h.hasOwnProperty(m)){var Oe=h[m];if(Oe!=null)switch(m){case"name":b=Oe;break;case"type":N=Oe;break;case"checked":ie=Oe;break;case"defaultChecked":ye=Oe;break;case"value":E=Oe;break;case"defaultValue":X=Oe;break;case"children":case"dangerouslySetInnerHTML":if(Oe!=null)throw Error(i(137,o));break;default:Kn(r,o,m,Oe,h,null)}}Cs(r,E,X,ie,ye,N,b,!1);return;case"select":gn("invalid",r),m=N=E=null;for(b in h)if(h.hasOwnProperty(b)&&(X=h[b],X!=null))switch(b){case"value":E=X;break;case"defaultValue":N=X;break;case"multiple":m=X;default:Kn(r,o,b,X,h,null)}o=E,h=N,r.multiple=!!m,o!=null?Fr(r,!!m,o,!1):h!=null&&Fr(r,!!m,h,!0);return;case"textarea":gn("invalid",r),E=b=m=null;for(N in h)if(h.hasOwnProperty(N)&&(X=h[N],X!=null))switch(N){case"value":m=X;break;case"defaultValue":b=X;break;case"children":E=X;break;case"dangerouslySetInnerHTML":if(X!=null)throw Error(i(91));break;default:Kn(r,o,N,X,h,null)}ci(r,m,b,E);return;case"option":for(ie in h)h.hasOwnProperty(ie)&&(m=h[ie],m!=null)&&(ie==="selected"?r.selected=m&&typeof m!="function"&&typeof m!="symbol":Kn(r,o,ie,m,h,null));return;case"dialog":gn("beforetoggle",r),gn("toggle",r),gn("cancel",r),gn("close",r);break;case"iframe":case"object":gn("load",r);break;case"video":case"audio":for(m=0;m<z0.length;m++)gn(z0[m],r);break;case"image":gn("error",r),gn("load",r);break;case"details":gn("toggle",r);break;case"embed":case"source":case"link":gn("error",r),gn("load",r);case"area":case"base":case"br":case"col":case"hr":case"keygen":case"meta":case"param":case"track":case"wbr":case"menuitem":for(ye in h)if(h.hasOwnProperty(ye)&&(m=h[ye],m!=null))switch(ye){case"children":case"dangerouslySetInnerHTML":throw Error(i(137,o));default:Kn(r,o,ye,m,h,null)}return;default:if(fr(o)){for(Oe in h)h.hasOwnProperty(Oe)&&(m=h[Oe],m!==void 0&&oE(r,o,Oe,m,h,void 0));return}}for(X in h)h.hasOwnProperty(X)&&(m=h[X],m!=null&&Kn(r,o,X,m,h,null))}function rq(r,o,h,m){switch(o){case"div":case"span":case"svg":case"path":case"a":case"g":case"p":case"li":break;case"input":var b=null,E=null,N=null,X=null,ie=null,ye=null,Oe=null;for(we in h){var ze=h[we];if(h.hasOwnProperty(we)&&ze!=null)switch(we){case"checked":break;case"value":break;case"defaultValue":ie=ze;default:m.hasOwnProperty(we)||Kn(r,o,we,null,m,ze)}}for(var Se in m){var we=m[Se];if(ze=h[Se],m.hasOwnProperty(Se)&&(we!=null||ze!=null))switch(Se){case"type":E=we;break;case"name":b=we;break;case"checked":ye=we;break;case"defaultChecked":Oe=we;break;case"value":N=we;break;case"defaultValue":X=we;break;case"children":case"dangerouslySetInnerHTML":if(we!=null)throw Error(i(137,o));break;default:we!==ze&&Kn(r,o,Se,we,m,ze)}}ji(r,N,X,ie,ye,Oe,E,b);return;case"select":we=N=X=Se=null;for(E in h)if(ie=h[E],h.hasOwnProperty(E)&&ie!=null)switch(E){case"value":break;case"multiple":we=ie;default:m.hasOwnProperty(E)||Kn(r,o,E,null,m,ie)}for(b in m)if(E=m[b],ie=h[b],m.hasOwnProperty(b)&&(E!=null||ie!=null))switch(b){case"value":Se=E;break;case"defaultValue":X=E;break;case"multiple":N=E;default:E!==ie&&Kn(r,o,b,E,m,ie)}o=X,h=N,m=we,Se!=null?Fr(r,!!h,Se,!1):!!m!=!!h&&(o!=null?Fr(r,!!h,o,!0):Fr(r,!!h,h?[]:"",!1));return;case"textarea":we=Se=null;for(X in h)if(b=h[X],h.hasOwnProperty(X)&&b!=null&&!m.hasOwnProperty(X))switch(X){case"value":break;case"children":break;default:Kn(r,o,X,null,m,b)}for(N in m)if(b=m[N],E=h[N],m.hasOwnProperty(N)&&(b!=null||E!=null))switch(N){case"value":Se=b;break;case"defaultValue":we=b;break;case"children":break;case"dangerouslySetInnerHTML":if(b!=null)throw Error(i(91));break;default:b!==E&&Kn(r,o,N,b,m,E)}On(r,Se,we);return;case"option":for(var Mt in h)Se=h[Mt],h.hasOwnProperty(Mt)&&Se!=null&&!m.hasOwnProperty(Mt)&&(Mt==="selected"?r.selected=!1:Kn(r,o,Mt,null,m,Se));for(ie in m)Se=m[ie],we=h[ie],m.hasOwnProperty(ie)&&Se!==we&&(Se!=null||we!=null)&&(ie==="selected"?r.selected=Se&&typeof Se!="function"&&typeof Se!="symbol":Kn(r,o,ie,Se,m,we));return;case"img":case"link":case"area":case"base":case"br":case"col":case"embed":case"hr":case"keygen":case"meta":case"param":case"source":case"track":case"wbr":case"menuitem":for(var Gt in h)Se=h[Gt],h.hasOwnProperty(Gt)&&Se!=null&&!m.hasOwnProperty(Gt)&&Kn(r,o,Gt,null,m,Se);for(ye in m)if(Se=m[ye],we=h[ye],m.hasOwnProperty(ye)&&Se!==we&&(Se!=null||we!=null))switch(ye){case"children":case"dangerouslySetInnerHTML":if(Se!=null)throw Error(i(137,o));break;default:Kn(r,o,ye,Se,m,we)}return;default:if(fr(o)){for(var Qn in h)Se=h[Qn],h.hasOwnProperty(Qn)&&Se!==void 0&&!m.hasOwnProperty(Qn)&&oE(r,o,Qn,void 0,m,Se);for(Oe in m)Se=m[Oe],we=h[Oe],!m.hasOwnProperty(Oe)||Se===we||Se===void 0&&we===void 0||oE(r,o,Oe,Se,m,we);return}}for(var he in h)Se=h[he],h.hasOwnProperty(he)&&Se!=null&&!m.hasOwnProperty(he)&&Kn(r,o,he,null,m,Se);for(ze in m)Se=m[ze],we=h[ze],!m.hasOwnProperty(ze)||Se===we||Se==null&&we==null||Kn(r,o,ze,Se,m,we)}function LO(r){switch(r){case"css":case"script":case"font":case"img":case"image":case"input":case"link":return!0;default:return!1}}function sq(){if(typeof performance.getEntriesByType=="function"){for(var r=0,o=0,h=performance.getEntriesByType("resource"),m=0;m<h.length;m++){var b=h[m],E=b.transferSize,N=b.initiatorType,X=b.duration;if(E&&X&&LO(N)){for(N=0,X=b.responseEnd,m+=1;m<h.length;m++){var ie=h[m],ye=ie.startTime;if(ye>X)break;var Oe=ie.transferSize,ze=ie.initiatorType;Oe&&LO(ze)&&(ie=ie.responseEnd,N+=Oe*(ie<X?1:(X-ye)/(ie-ye)))}if(--m,o+=8*(E+N)/(b.duration/1e3),r++,10<r)break}}if(0<r)return o/r/1e6}return navigator.connection&&(r=navigator.connection.downlink,typeof r=="number")?r:5}var lE=null,cE=null;function mb(r){return r.nodeType===9?r:r.ownerDocument}function IO(r){switch(r){case"http://www.w3.org/2000/svg":return 1;case"http://www.w3.org/1998/Math/MathML":return 2;default:return 0}}function PO(r,o){if(r===0)switch(o){case"svg":return 1;case"math":return 2;default:return 0}return r===1&&o==="foreignObject"?0:r}function uE(r,o){return r==="textarea"||r==="noscript"||typeof o.children=="string"||typeof o.children=="number"||typeof o.children=="bigint"||typeof o.dangerouslySetInnerHTML=="object"&&o.dangerouslySetInnerHTML!==null&&o.dangerouslySetInnerHTML.__html!=null}var fE=null;function oq(){var r=window.event;return r&&r.type==="popstate"?r===fE?!1:(fE=r,!0):(fE=null,!1)}var FO=typeof setTimeout=="function"?setTimeout:void 0,lq=typeof clearTimeout=="function"?clearTimeout:void 0,zO=typeof Promise=="function"?Promise:void 0,cq=typeof queueMicrotask=="function"?queueMicrotask:typeof zO<"u"?function(r){return zO.resolve(null).then(r).catch(uq)}:FO;function uq(r){setTimeout(function(){throw r})}function Fu(r){return r==="head"}function HO(r,o){var h=o,m=0;do{var b=h.nextSibling;if(r.removeChild(h),b&&b.nodeType===8)if(h=b.data,h==="/$"||h==="/&"){if(m===0){r.removeChild(b),Jp(o);return}m--}else if(h==="$"||h==="$?"||h==="$~"||h==="$!"||h==="&")m++;else if(h==="html")G0(r.ownerDocument.documentElement);else if(h==="head"){h=r.ownerDocument.head,G0(h);for(var E=h.firstChild;E;){var N=E.nextSibling,X=E.nodeName;E[so]||X==="SCRIPT"||X==="STYLE"||X==="LINK"&&E.rel.toLowerCase()==="stylesheet"||h.removeChild(E),E=N}}else h==="body"&&G0(r.ownerDocument.body);h=b}while(h);Jp(o)}function GO(r,o){var h=r;r=0;do{var m=h.nextSibling;if(h.nodeType===1?o?(h._stashedDisplay=h.style.display,h.style.display="none"):(h.style.display=h._stashedDisplay||"",h.getAttribute("style")===""&&h.removeAttribute("style")):h.nodeType===3&&(o?(h._stashedText=h.nodeValue,h.nodeValue=""):h.nodeValue=h._stashedText||""),m&&m.nodeType===8)if(h=m.data,h==="/$"){if(r===0)break;r--}else h!=="$"&&h!=="$?"&&h!=="$~"&&h!=="$!"||r++;h=m}while(h)}function hE(r){var o=r.firstChild;for(o&&o.nodeType===10&&(o=o.nextSibling);o;){var h=o;switch(o=o.nextSibling,h.nodeName){case"HTML":case"HEAD":case"BODY":hE(h),tc(h);continue;case"SCRIPT":case"STYLE":continue;case"LINK":if(h.rel.toLowerCase()==="stylesheet")continue}r.removeChild(h)}}function fq(r,o,h,m){for(;r.nodeType===1;){var b=h;if(r.nodeName.toLowerCase()!==o.toLowerCase()){if(!m&&(r.nodeName!=="INPUT"||r.type!=="hidden"))break}else if(m){if(!r[so])switch(o){case"meta":if(!r.hasAttribute("itemprop"))break;return r;case"link":if(E=r.getAttribute("rel"),E==="stylesheet"&&r.hasAttribute("data-precedence"))break;if(E!==b.rel||r.getAttribute("href")!==(b.href==null||b.href===""?null:b.href)||r.getAttribute("crossorigin")!==(b.crossOrigin==null?null:b.crossOrigin)||r.getAttribute("title")!==(b.title==null?null:b.title))break;return r;case"style":if(r.hasAttribute("data-precedence"))break;return r;case"script":if(E=r.getAttribute("src"),(E!==(b.src==null?null:b.src)||r.getAttribute("type")!==(b.type==null?null:b.type)||r.getAttribute("crossorigin")!==(b.crossOrigin==null?null:b.crossOrigin))&&E&&r.hasAttribute("async")&&!r.hasAttribute("itemprop"))break;return r;default:return r}}else if(o==="input"&&r.type==="hidden"){var E=b.name==null?null:""+b.name;if(b.type==="hidden"&&r.getAttribute("name")===E)return r}else return r;if(r=js(r.nextSibling),r===null)break}return null}function hq(r,o,h){if(o==="")return null;for(;r.nodeType!==3;)if((r.nodeType!==1||r.nodeName!=="INPUT"||r.type!=="hidden")&&!h||(r=js(r.nextSibling),r===null))return null;return r}function VO(r,o){for(;r.nodeType!==8;)if((r.nodeType!==1||r.nodeName!=="INPUT"||r.type!=="hidden")&&!o||(r=js(r.nextSibling),r===null))return null;return r}function dE(r){return r.data==="$?"||r.data==="$~"}function pE(r){return r.data==="$!"||r.data==="$?"&&r.ownerDocument.readyState!=="loading"}function dq(r,o){var h=r.ownerDocument;if(r.data==="$~")r._reactRetry=o;else if(r.data!=="$?"||h.readyState!=="loading")o();else{var m=function(){o(),h.removeEventListener("DOMContentLoaded",m)};h.addEventListener("DOMContentLoaded",m),r._reactRetry=m}}function js(r){for(;r!=null;r=r.nextSibling){var o=r.nodeType;if(o===1||o===3)break;if(o===8){if(o=r.data,o==="$"||o==="$!"||o==="$?"||o==="$~"||o==="&"||o==="F!"||o==="F")break;if(o==="/$"||o==="/&")return null}}return r}var mE=null;function kO(r){r=r.nextSibling;for(var o=0;r;){if(r.nodeType===8){var h=r.data;if(h==="/$"||h==="/&"){if(o===0)return js(r.nextSibling);o--}else h!=="$"&&h!=="$!"&&h!=="$?"&&h!=="$~"&&h!=="&"||o++}r=r.nextSibling}return null}function XO(r){r=r.previousSibling;for(var o=0;r;){if(r.nodeType===8){var h=r.data;if(h==="$"||h==="$!"||h==="$?"||h==="$~"||h==="&"){if(o===0)return r;o--}else h!=="/$"&&h!=="/&"||o++}r=r.previousSibling}return null}function jO(r,o,h){switch(o=mb(h),r){case"html":if(r=o.documentElement,!r)throw Error(i(452));return r;case"head":if(r=o.head,!r)throw Error(i(453));return r;case"body":if(r=o.body,!r)throw Error(i(454));return r;default:throw Error(i(451))}}function G0(r){for(var o=r.attributes;o.length;)r.removeAttributeNode(o[0]);tc(r)}var Ys=new Map,YO=new Set;function gb(r){return typeof r.getRootNode=="function"?r.getRootNode():r.nodeType===9?r:r.ownerDocument}var Bc=J.d;J.d={f:pq,r:mq,D:gq,C:vq,L:yq,m:_q,X:bq,S:xq,M:Aq};function pq(){var r=Bc.f(),o=Y();return r||o}function mq(r){var o=kn(r);o!==null&&o.tag===5&&o.type==="form"?B0(o):Bc.r(r)}var Yp=typeof document>"u"?null:document;function qO(r,o,h){var m=Yp;if(m&&typeof o=="string"&&o){var b=qt(o);b='link[rel="'+r+'"][href="'+b+'"]',typeof h=="string"&&(b+='[crossorigin="'+h+'"]'),YO.has(b)||(YO.add(b),r={rel:r,crossOrigin:h,href:o},m.querySelector(b)===null&&(o=m.createElement("link"),Oa(o,"link",r),k(o),m.head.appendChild(o)))}}function gq(r){Bc.D(r),qO("dns-prefetch",r,null)}function vq(r,o){Bc.C(r,o),qO("preconnect",r,o)}function yq(r,o,h){Bc.L(r,o,h);var m=Yp;if(m&&r&&o){var b='link[rel="preload"][as="'+qt(o)+'"]';o==="image"&&h&&h.imageSrcSet?(b+='[imagesrcset="'+qt(h.imageSrcSet)+'"]',typeof h.imageSizes=="string"&&(b+='[imagesizes="'+qt(h.imageSizes)+'"]')):b+='[href="'+qt(r)+'"]';var E=b;switch(o){case"style":E=qp(r);break;case"script":E=Wp(r)}Ys.has(E)||(r=v({rel:"preload",href:o==="image"&&h&&h.imageSrcSet?void 0:r,as:o},h),Ys.set(E,r),m.querySelector(b)!==null||o==="style"&&m.querySelector(V0(E))||o==="script"&&m.querySelector(k0(E))||(o=m.createElement("link"),Oa(o,"link",r),k(o),m.head.appendChild(o)))}}function _q(r,o){Bc.m(r,o);var h=Yp;if(h&&r){var m=o&&typeof o.as=="string"?o.as:"script",b='link[rel="modulepreload"][as="'+qt(m)+'"][href="'+qt(r)+'"]',E=b;switch(m){case"audioworklet":case"paintworklet":case"serviceworker":case"sharedworker":case"worker":case"script":E=Wp(r)}if(!Ys.has(E)&&(r=v({rel:"modulepreload",href:r},o),Ys.set(E,r),h.querySelector(b)===null)){switch(m){case"audioworklet":case"paintworklet":case"serviceworker":case"sharedworker":case"worker":case"script":if(h.querySelector(k0(E)))return}m=h.createElement("link"),Oa(m,"link",r),k(m),h.head.appendChild(m)}}}function xq(r,o,h){Bc.S(r,o,h);var m=Yp;if(m&&r){var b=is(m).hoistableStyles,E=qp(r);o=o||"default";var N=b.get(E);if(!N){var X={loading:0,preload:null};if(N=m.querySelector(V0(E)))X.loading=5;else{r=v({rel:"stylesheet",href:r,"data-precedence":o},h),(h=Ys.get(E))&&gE(r,h);var ie=N=m.createElement("link");k(ie),Oa(ie,"link",r),ie._p=new Promise(function(ye,Oe){ie.onload=ye,ie.onerror=Oe}),ie.addEventListener("load",function(){X.loading|=1}),ie.addEventListener("error",function(){X.loading|=2}),X.loading|=4,vb(N,o,m)}N={type:"stylesheet",instance:N,count:1,state:X},b.set(E,N)}}}function bq(r,o){Bc.X(r,o);var h=Yp;if(h&&r){var m=is(h).hoistableScripts,b=Wp(r),E=m.get(b);E||(E=h.querySelector(k0(b)),E||(r=v({src:r,async:!0},o),(o=Ys.get(b))&&vE(r,o),E=h.createElement("script"),k(E),Oa(E,"link",r),h.head.appendChild(E)),E={type:"script",instance:E,count:1,state:null},m.set(b,E))}}function Aq(r,o){Bc.M(r,o);var h=Yp;if(h&&r){var m=is(h).hoistableScripts,b=Wp(r),E=m.get(b);E||(E=h.querySelector(k0(b)),E||(r=v({src:r,async:!0,type:"module"},o),(o=Ys.get(b))&&vE(r,o),E=h.createElement("script"),k(E),Oa(E,"link",r),h.head.appendChild(E)),E={type:"script",instance:E,count:1,state:null},m.set(b,E))}}function WO(r,o,h,m){var b=(b=ge.current)?gb(b):null;if(!b)throw Error(i(446));switch(r){case"meta":case"title":return null;case"style":return typeof h.precedence=="string"&&typeof h.href=="string"?(o=qp(h.href),h=is(b).hoistableStyles,m=h.get(o),m||(m={type:"style",instance:null,count:0,state:null},h.set(o,m)),m):{type:"void",instance:null,count:0,state:null};case"link":if(h.rel==="stylesheet"&&typeof h.href=="string"&&typeof h.precedence=="string"){r=qp(h.href);var E=is(b).hoistableStyles,N=E.get(r);if(N||(b=b.ownerDocument||b,N={type:"stylesheet",instance:null,count:0,state:{loading:0,preload:null}},E.set(r,N),(E=b.querySelector(V0(r)))&&!E._p&&(N.instance=E,N.state.loading=5),Ys.has(r)||(h={rel:"preload",as:"style",href:h.href,crossOrigin:h.crossOrigin,integrity:h.integrity,media:h.media,hrefLang:h.hrefLang,referrerPolicy:h.referrerPolicy},Ys.set(r,h),E||Sq(b,r,h,N.state))),o&&m===null)throw Error(i(528,""));return N}if(o&&m!==null)throw Error(i(529,""));return null;case"script":return o=h.async,h=h.src,typeof h=="string"&&o&&typeof o!="function"&&typeof o!="symbol"?(o=Wp(h),h=is(b).hoistableScripts,m=h.get(o),m||(m={type:"script",instance:null,count:0,state:null},h.set(o,m)),m):{type:"void",instance:null,count:0,state:null};default:throw Error(i(444,r))}}function qp(r){return'href="'+qt(r)+'"'}function V0(r){return'link[rel="stylesheet"]['+r+"]"}function JO(r){return v({},r,{"data-precedence":r.precedence,precedence:null})}function Sq(r,o,h,m){r.querySelector('link[rel="preload"][as="style"]['+o+"]")?m.loading=1:(o=r.createElement("link"),m.preload=o,o.addEventListener("load",function(){return m.loading|=1}),o.addEventListener("error",function(){return m.loading|=2}),Oa(o,"link",h),k(o),r.head.appendChild(o))}function Wp(r){return'[src="'+qt(r)+'"]'}function k0(r){return"script[async]"+r}function KO(r,o,h){if(o.count++,o.instance===null)switch(o.type){case"style":var m=r.querySelector('style[data-href~="'+qt(h.href)+'"]');if(m)return o.instance=m,k(m),m;var b=v({},h,{"data-href":h.href,"data-precedence":h.precedence,href:null,precedence:null});return m=(r.ownerDocument||r).createElement("style"),k(m),Oa(m,"style",b),vb(m,h.precedence,r),o.instance=m;case"stylesheet":b=qp(h.href);var E=r.querySelector(V0(b));if(E)return o.state.loading|=4,o.instance=E,k(E),E;m=JO(h),(b=Ys.get(b))&&gE(m,b),E=(r.ownerDocument||r).createElement("link"),k(E);var N=E;return N._p=new Promise(function(X,ie){N.onload=X,N.onerror=ie}),Oa(E,"link",m),o.state.loading|=4,vb(E,h.precedence,r),o.instance=E;case"script":return E=Wp(h.src),(b=r.querySelector(k0(E)))?(o.instance=b,k(b),b):(m=h,(b=Ys.get(E))&&(m=v({},h),vE(m,b)),r=r.ownerDocument||r,b=r.createElement("script"),k(b),Oa(b,"link",m),r.head.appendChild(b),o.instance=b);case"void":return null;default:throw Error(i(443,o.type))}else o.type==="stylesheet"&&(o.state.loading&4)===0&&(m=o.instance,o.state.loading|=4,vb(m,h.precedence,r));return o.instance}function vb(r,o,h){for(var m=h.querySelectorAll('link[rel="stylesheet"][data-precedence],style[data-precedence]'),b=m.length?m[m.length-1]:null,E=b,N=0;N<m.length;N++){var X=m[N];if(X.dataset.precedence===o)E=X;else if(E!==b)break}E?E.parentNode.insertBefore(r,E.nextSibling):(o=h.nodeType===9?h.head:h,o.insertBefore(r,o.firstChild))}function gE(r,o){r.crossOrigin==null&&(r.crossOrigin=o.crossOrigin),r.referrerPolicy==null&&(r.referrerPolicy=o.referrerPolicy),r.title==null&&(r.title=o.title)}function vE(r,o){r.crossOrigin==null&&(r.crossOrigin=o.crossOrigin),r.referrerPolicy==null&&(r.referrerPolicy=o.referrerPolicy),r.integrity==null&&(r.integrity=o.integrity)}var yb=null;function QO(r,o,h){if(yb===null){var m=new Map,b=yb=new Map;b.set(h,m)}else b=yb,m=b.get(h),m||(m=new Map,b.set(h,m));if(m.has(r))return m;for(m.set(r,null),h=h.getElementsByTagName(r),b=0;b<h.length;b++){var E=h[b];if(!(E[so]||E[rn]||r==="link"&&E.getAttribute("rel")==="stylesheet")&&E.namespaceURI!=="http://www.w3.org/2000/svg"){var N=E.getAttribute(o)||"";N=r+N;var X=m.get(N);X?X.push(E):m.set(N,[E])}}return m}function ZO(r,o,h){r=r.ownerDocument||r,r.head.insertBefore(h,o==="title"?r.querySelector("head > title"):null)}function Mq(r,o,h){if(h===1||o.itemProp!=null)return!1;switch(r){case"meta":case"title":return!0;case"style":if(typeof o.precedence!="string"||typeof o.href!="string"||o.href==="")break;return!0;case"link":if(typeof o.rel!="string"||typeof o.href!="string"||o.href===""||o.onLoad||o.onError)break;return o.rel==="stylesheet"?(r=o.disabled,typeof o.precedence=="string"&&r==null):!0;case"script":if(o.async&&typeof o.async!="function"&&typeof o.async!="symbol"&&!o.onLoad&&!o.onError&&o.src&&typeof o.src=="string")return!0}return!1}function $O(r){return!(r.type==="stylesheet"&&(r.state.loading&3)===0)}function Eq(r,o,h,m){if(h.type==="stylesheet"&&(typeof m.media!="string"||matchMedia(m.media).matches!==!1)&&(h.state.loading&4)===0){if(h.instance===null){var b=qp(m.href),E=o.querySelector(V0(b));if(E){o=E._p,o!==null&&typeof o=="object"&&typeof o.then=="function"&&(r.count++,r=_b.bind(r),o.then(r,r)),h.state.loading|=4,h.instance=E,k(E);return}E=o.ownerDocument||o,m=JO(m),(b=Ys.get(b))&&gE(m,b),E=E.createElement("link"),k(E);var N=E;N._p=new Promise(function(X,ie){N.onload=X,N.onerror=ie}),Oa(E,"link",m),h.instance=E}r.stylesheets===null&&(r.stylesheets=new Map),r.stylesheets.set(h,o),(o=h.state.preload)&&(h.state.loading&3)===0&&(r.count++,h=_b.bind(r),o.addEventListener("load",h),o.addEventListener("error",h))}}var yE=0;function Tq(r,o){return r.stylesheets&&r.count===0&&bb(r,r.stylesheets),0<r.count||0<r.imgCount?function(h){var m=setTimeout(function(){if(r.stylesheets&&bb(r,r.stylesheets),r.unsuspend){var E=r.unsuspend;r.unsuspend=null,E()}},6e4+o);0<r.imgBytes&&yE===0&&(yE=62500*sq());var b=setTimeout(function(){if(r.waitingForImages=!1,r.count===0&&(r.stylesheets&&bb(r,r.stylesheets),r.unsuspend)){var E=r.unsuspend;r.unsuspend=null,E()}},(r.imgBytes>yE?50:800)+o);return r.unsuspend=h,function(){r.unsuspend=null,clearTimeout(m),clearTimeout(b)}}:null}function _b(){if(this.count--,this.count===0&&(this.imgCount===0||!this.waitingForImages)){if(this.stylesheets)bb(this,this.stylesheets);else if(this.unsuspend){var r=this.unsuspend;this.unsuspend=null,r()}}}var xb=null;function bb(r,o){r.stylesheets=null,r.unsuspend!==null&&(r.count++,xb=new Map,o.forEach(Cq,r),xb=null,_b.call(r))}function Cq(r,o){if(!(o.state.loading&4)){var h=xb.get(r);if(h)var m=h.get(null);else{h=new Map,xb.set(r,h);for(var b=r.querySelectorAll("link[data-precedence],style[data-precedence]"),E=0;E<b.length;E++){var N=b[E];(N.nodeName==="LINK"||N.getAttribute("media")!=="not all")&&(h.set(N.dataset.precedence,N),m=N)}m&&h.set(null,m)}b=o.instance,N=b.getAttribute("data-precedence"),E=h.get(N)||m,E===m&&h.set(null,b),h.set(N,b),this.count++,m=_b.bind(this),b.addEventListener("load",m),b.addEventListener("error",m),E?E.parentNode.insertBefore(b,E.nextSibling):(r=r.nodeType===9?r.head:r,r.insertBefore(b,r.firstChild)),o.state.loading|=4}}var X0={$$typeof:B,Provider:null,Consumer:null,_currentValue:Z,_currentValue2:Z,_threadCount:0};function Rq(r,o,h,m,b,E,N,X,ie){this.tag=1,this.containerInfo=r,this.pingCache=this.current=this.pendingChildren=null,this.timeoutHandle=-1,this.callbackNode=this.next=this.pendingContext=this.context=this.cancelPendingCommit=null,this.callbackPriority=0,this.expirationTimes=un(-1),this.entangledLanes=this.shellSuspendCounter=this.errorRecoveryDisabledLanes=this.expiredLanes=this.warmLanes=this.pingedLanes=this.suspendedLanes=this.pendingLanes=0,this.entanglements=un(0),this.hiddenUpdates=un(null),this.identifierPrefix=m,this.onUncaughtError=b,this.onCaughtError=E,this.onRecoverableError=N,this.pooledCache=null,this.pooledCacheLanes=0,this.formState=ie,this.incompleteTransitions=new Map}function eN(r,o,h,m,b,E,N,X,ie,ye,Oe,ze){return r=new Rq(r,o,h,N,ie,ye,Oe,ze,X),o=1,E===!0&&(o|=24),E=Ta(3,null,null,o),r.current=E,E.stateNode=r,o=Zg(),o.refCount++,r.pooledCache=o,o.refCount++,E.memoizedState={element:m,isDehydrated:h,cache:o},a0(E),r}function tN(r){return r?(r=ol,r):ol}function nN(r,o,h,m,b,E){b=tN(b),m.context===null?m.context=b:m.pendingContext=b,m=Is(o),m.payload={element:h},E=E===void 0?null:E,E!==null&&(m.callback=E),h=yo(r,m,o),h!==null&&(f(h,r,o),ml(h,r,o))}function iN(r,o){if(r=r.memoizedState,r!==null&&r.dehydrated!==null){var h=r.retryLane;r.retryLane=h!==0&&h<o?h:o}}function _E(r,o){iN(r,o),(r=r.alternate)&&iN(r,o)}function aN(r){if(r.tag===13||r.tag===31){var o=sl(r,67108864);o!==null&&f(o,r,67108864),_E(r,67108864)}}function rN(r){if(r.tag===13||r.tag===31){var o=Da();o=Ir(o);var h=sl(r,o);h!==null&&f(h,r,o),_E(r,o)}}var Ab=!0;function wq(r,o,h,m){var b=G.T;G.T=null;var E=J.p;try{J.p=2,xE(r,o,h,m)}finally{J.p=E,G.T=b}}function Bq(r,o,h,m){var b=G.T;G.T=null;var E=J.p;try{J.p=8,xE(r,o,h,m)}finally{J.p=E,G.T=b}}function xE(r,o,h,m){if(Ab){var b=bE(m);if(b===null)sE(r,o,m,Sb,h),oN(r,m);else if(Oq(b,r,o,h,m))m.stopPropagation();else if(oN(r,m),o&4&&-1<Dq.indexOf(r)){for(;b!==null;){var E=kn(b);if(E!==null)switch(E.tag){case 3:if(E=E.stateNode,E.current.memoizedState.isDehydrated){var N=Ve(E.pendingLanes);if(N!==0){var X=E;for(X.pendingLanes|=2,X.entangledLanes|=2;N;){var ie=1<<31-it(N);X.entanglements[1]|=ie,N&=~ie}Ml(E),(yn&6)===0&&(Cr=I()+500,F0(0))}}break;case 31:case 13:X=sl(E,2),X!==null&&f(X,E,2),Y(),_E(E,2)}if(E=bE(m),E===null&&sE(r,o,m,Sb,h),E===b)break;b=E}b!==null&&m.stopPropagation()}else sE(r,o,m,null,h)}}function bE(r){return r=jd(r),AE(r)}var Sb=null;function AE(r){if(Sb=null,r=_i(r),r!==null){var o=s(r);if(o===null)r=null;else{var h=o.tag;if(h===13){if(r=l(o),r!==null)return r;r=null}else if(h===31){if(r=c(o),r!==null)return r;r=null}else if(h===3){if(o.stateNode.current.memoizedState.isDehydrated)return o.tag===3?o.stateNode.containerInfo:null;r=null}else o!==r&&(r=null)}}return Sb=r,null}function sN(r){switch(r){case"beforetoggle":case"cancel":case"click":case"close":case"contextmenu":case"copy":case"cut":case"auxclick":case"dblclick":case"dragend":case"dragstart":case"drop":case"focusin":case"focusout":case"input":case"invalid":case"keydown":case"keypress":case"keyup":case"mousedown":case"mouseup":case"paste":case"pause":case"play":case"pointercancel":case"pointerdown":case"pointerup":case"ratechange":case"reset":case"resize":case"seeked":case"submit":case"toggle":case"touchcancel":case"touchend":case"touchstart":case"volumechange":case"change":case"selectionchange":case"textInput":case"compositionstart":case"compositionend":case"compositionupdate":case"beforeblur":case"afterblur":case"beforeinput":case"blur":case"fullscreenchange":case"focus":case"hashchange":case"popstate":case"select":case"selectstart":return 2;case"drag":case"dragenter":case"dragexit":case"dragleave":case"dragover":case"mousemove":case"mouseout":case"mouseover":case"pointermove":case"pointerout":case"pointerover":case"scroll":case"touchmove":case"wheel":case"mouseenter":case"mouseleave":case"pointerenter":case"pointerleave":return 8;case"message":switch(re()){case Ae:return 2;case Be:return 8;case Re:case pt:return 32;case Qe:return 268435456;default:return 32}default:return 32}}var SE=!1,zu=null,Hu=null,Gu=null,j0=new Map,Y0=new Map,Vu=[],Dq="mousedown mouseup touchcancel touchend touchstart auxclick dblclick pointercancel pointerdown pointerup dragend dragstart drop compositionend compositionstart keydown keypress keyup input textInput copy cut paste click change contextmenu reset".split(" ");function oN(r,o){switch(r){case"focusin":case"focusout":zu=null;break;case"dragenter":case"dragleave":Hu=null;break;case"mouseover":case"mouseout":Gu=null;break;case"pointerover":case"pointerout":j0.delete(o.pointerId);break;case"gotpointercapture":case"lostpointercapture":Y0.delete(o.pointerId)}}function q0(r,o,h,m,b,E){return r===null||r.nativeEvent!==E?(r={blockedOn:o,domEventName:h,eventSystemFlags:m,nativeEvent:E,targetContainers:[b]},o!==null&&(o=kn(o),o!==null&&aN(o)),r):(r.eventSystemFlags|=m,o=r.targetContainers,b!==null&&o.indexOf(b)===-1&&o.push(b),r)}function Oq(r,o,h,m,b){switch(o){case"focusin":return zu=q0(zu,r,o,h,m,b),!0;case"dragenter":return Hu=q0(Hu,r,o,h,m,b),!0;case"mouseover":return Gu=q0(Gu,r,o,h,m,b),!0;case"pointerover":var E=b.pointerId;return j0.set(E,q0(j0.get(E)||null,r,o,h,m,b)),!0;case"gotpointercapture":return E=b.pointerId,Y0.set(E,q0(Y0.get(E)||null,r,o,h,m,b)),!0}return!1}function lN(r){var o=_i(r.target);if(o!==null){var h=s(o);if(h!==null){if(o=h.tag,o===13){if(o=l(h),o!==null){r.blockedOn=o,Xi(r.priority,function(){rN(h)});return}}else if(o===31){if(o=c(h),o!==null){r.blockedOn=o,Xi(r.priority,function(){rN(h)});return}}else if(o===3&&h.stateNode.current.memoizedState.isDehydrated){r.blockedOn=h.tag===3?h.stateNode.containerInfo:null;return}}}r.blockedOn=null}function Mb(r){if(r.blockedOn!==null)return!1;for(var o=r.targetContainers;0<o.length;){var h=bE(r.nativeEvent);if(h===null){h=r.nativeEvent;var m=new h.constructor(h.type,h);zf=m,h.target.dispatchEvent(m),zf=null}else return o=kn(h),o!==null&&aN(o),r.blockedOn=h,!1;o.shift()}return!0}function cN(r,o,h){Mb(r)&&h.delete(o)}function Nq(){SE=!1,zu!==null&&Mb(zu)&&(zu=null),Hu!==null&&Mb(Hu)&&(Hu=null),Gu!==null&&Mb(Gu)&&(Gu=null),j0.forEach(cN),Y0.forEach(cN)}function Eb(r,o){r.blockedOn===o&&(r.blockedOn=null,SE||(SE=!0,n.unstable_scheduleCallback(n.unstable_NormalPriority,Nq)))}var Tb=null;function uN(r){Tb!==r&&(Tb=r,n.unstable_scheduleCallback(n.unstable_NormalPriority,function(){Tb===r&&(Tb=null);for(var o=0;o<r.length;o+=3){var h=r[o],m=r[o+1],b=r[o+2];if(typeof m!="function"){if(AE(m||h)===null)continue;break}var E=kn(h);E!==null&&(r.splice(o,3),o-=3,w0(E,{pending:!0,data:b,method:h.method,action:m},m,b))}}))}function Jp(r){function o(ie){return Eb(ie,r)}zu!==null&&Eb(zu,r),Hu!==null&&Eb(Hu,r),Gu!==null&&Eb(Gu,r),j0.forEach(o),Y0.forEach(o);for(var h=0;h<Vu.length;h++){var m=Vu[h];m.blockedOn===r&&(m.blockedOn=null)}for(;0<Vu.length&&(h=Vu[0],h.blockedOn===null);)lN(h),h.blockedOn===null&&Vu.shift();if(h=(r.ownerDocument||r).$$reactFormReplay,h!=null)for(m=0;m<h.length;m+=3){var b=h[m],E=h[m+1],N=b[Fi]||null;if(typeof E=="function")N||uN(h);else if(N){var X=null;if(E&&E.hasAttribute("formAction")){if(b=E,N=E[Fi]||null)X=N.formAction;else if(AE(b)!==null)continue}else X=N.action;typeof X=="function"?h[m+1]=X:(h.splice(m,3),m-=3),uN(h)}}}function fN(){function r(E){E.canIntercept&&E.info==="react-transition"&&E.intercept({handler:function(){return new Promise(function(N){return b=N})},focusReset:"manual",scroll:"manual"})}function o(){b!==null&&(b(),b=null),m||setTimeout(h,20)}function h(){if(!m&&!navigation.transition){var E=navigation.currentEntry;E&&E.url!=null&&navigation.navigate(E.url,{state:E.getState(),info:"react-transition",history:"replace"})}}if(typeof navigation=="object"){var m=!1,b=null;return navigation.addEventListener("navigate",r),navigation.addEventListener("navigatesuccess",o),navigation.addEventListener("navigateerror",o),setTimeout(h,100),function(){m=!0,navigation.removeEventListener("navigate",r),navigation.removeEventListener("navigatesuccess",o),navigation.removeEventListener("navigateerror",o),b!==null&&(b(),b=null)}}}function ME(r){this._internalRoot=r}Cb.prototype.render=ME.prototype.render=function(r){var o=this._internalRoot;if(o===null)throw Error(i(409));var h=o.current,m=Da();nN(h,m,r,o,null,null)},Cb.prototype.unmount=ME.prototype.unmount=function(){var r=this._internalRoot;if(r!==null){this._internalRoot=null;var o=r.containerInfo;nN(r.current,2,null,r,null,null),Y(),o[ur]=null}};function Cb(r){this._internalRoot=r}Cb.prototype.unstable_scheduleHydration=function(r){if(r){var o=Pr();r={blockedOn:null,target:r,priority:o};for(var h=0;h<Vu.length&&o!==0&&o<Vu[h].priority;h++);Vu.splice(h,0,r),h===0&&lN(r)}};var hN=e.version;if(hN!=="19.2.3")throw Error(i(527,hN,"19.2.3"));J.findDOMNode=function(r){var o=r._reactInternals;if(o===void 0)throw typeof r.render=="function"?Error(i(188)):(r=Object.keys(r).join(","),Error(i(268,r)));return r=p(o),r=r!==null?g(r):null,r=r===null?null:r.stateNode,r};var Uq={bundleType:0,version:"19.2.3",rendererPackageName:"react-dom",currentDispatcherRef:G,reconcilerVersion:"19.2.3"};if(typeof __REACT_DEVTOOLS_GLOBAL_HOOK__<"u"){var Rb=__REACT_DEVTOOLS_GLOBAL_HOOK__;if(!Rb.isDisabled&&Rb.supportsFiber)try{Fe=Rb.inject(Uq),ke=Rb}catch{}}return Qp.createRoot=function(r,o){if(!a(r))throw Error(i(299));var h=!1,m="",b=N0,E=sb,N=Op;return o!=null&&(o.unstable_strictMode===!0&&(h=!0),o.identifierPrefix!==void 0&&(m=o.identifierPrefix),o.onUncaughtError!==void 0&&(b=o.onUncaughtError),o.onCaughtError!==void 0&&(E=o.onCaughtError),o.onRecoverableError!==void 0&&(N=o.onRecoverableError)),o=eN(r,1,!1,null,null,h,m,null,b,E,N,fN),r[ur]=o.current,rE(r),new ME(o)},Qp.hydrateRoot=function(r,o,h){if(!a(r))throw Error(i(299));var m=!1,b="",E=N0,N=sb,X=Op,ie=null;return h!=null&&(h.unstable_strictMode===!0&&(m=!0),h.identifierPrefix!==void 0&&(b=h.identifierPrefix),h.onUncaughtError!==void 0&&(E=h.onUncaughtError),h.onCaughtError!==void 0&&(N=h.onCaughtError),h.onRecoverableError!==void 0&&(X=h.onRecoverableError),h.formState!==void 0&&(ie=h.formState)),o=eN(r,1,!0,o,h??null,m,b,ie,E,N,X,fN),o.context=tN(null),h=o.current,m=Da(),m=Ir(m),b=Is(m),b.callback=null,yo(h,b,m),h=m,o.current.lanes=h,na(o,h),Ml(o),r[ur]=o.current,rE(r),new Cb(o)},Qp.version="19.2.3",Qp}var LE;function bN(){if(LE)return Ob.exports;LE=1;function n(){if(!(typeof __REACT_DEVTOOLS_GLOBAL_HOOK__>"u"||typeof __REACT_DEVTOOLS_GLOBAL_HOOK__.checkDCE!="function"))try{__REACT_DEVTOOLS_GLOBAL_HOOK__.checkDCE(n)}catch(e){console.error(e)}}return n(),Ob.exports=xN(),Ob.exports}var AN=bN(),Ib={exports:{}},El={};var IE;function SN(){return IE||(IE=1,El.ConcurrentRoot=1,El.ContinuousEventPriority=8,El.DefaultEventPriority=32,El.DiscreteEventPriority=2,El.IdleEventPriority=268435456,El.LegacyRoot=0,El.NoEventPriority=0),El}var PE;function MN(){return PE||(PE=1,Ib.exports=SN()),Ib.exports}var W0=MN();const Zp="182",EN={LEFT:0,MIDDLE:1,RIGHT:2,ROTATE:0,DOLLY:1,PAN:2},TN={ROTATE:0,PAN:1,DOLLY_PAN:2,DOLLY_ROTATE:3},FE=0,Pb=1,zE=2,CN=3,HE=0,Rh=1,$p=2,ju=3,Bo=0,$a=1,qs=2,Do=0,Yu=1,Fb=2,zb=3,Hb=4,GE=5,Dc=100,VE=101,kE=102,XE=103,jE=104,YE=200,qE=201,WE=202,JE=203,J0=204,K0=205,KE=206,QE=207,ZE=208,$E=209,eT=210,tT=211,nT=212,iT=213,aT=214,Q0=0,Z0=1,$0=2,qu=3,ev=4,tv=5,nv=6,iv=7,em=0,rT=1,sT=2,ms=0,Gb=1,Vb=2,kb=3,av=4,Xb=5,jb=6,Yb=7,qb="attached",oT="detached",rv=300,Oo=301,Oc=302,tm=303,nm=304,wh=306,Nc=1e3,er=1001,Bh=1002,Ei=1003,sv=1004,RN=1004,Wu=1005,wN=1005,Zn=1006,Dh=1007,BN=1007,gs=1008,DN=1008,tr=1009,Wb=1010,Jb=1011,Oh=1012,ov=1013,vs=1014,nr=1015,No=1016,lv=1017,cv=1018,Nh=1020,Kb=35902,Qb=35899,Zb=1021,$b=1022,Ua=1023,Uo=1026,Uc=1027,uv=1028,im=1029,Ju=1030,fv=1031,ON=1032,hv=1033,am=33776,rm=33777,sm=33778,om=33779,dv=35840,pv=35841,mv=35842,gv=35843,vv=36196,yv=37492,_v=37496,xv=37488,bv=37489,Av=37490,Sv=37491,Mv=37808,Ev=37809,Tv=37810,Cv=37811,Rv=37812,wv=37813,Bv=37814,Dv=37815,Ov=37816,Nv=37817,Uv=37818,Lv=37819,Iv=37820,Pv=37821,Fv=36492,zv=36494,Hv=36495,Gv=36283,Vv=36284,kv=36285,Xv=36286,lT=2200,cT=2201,uT=2202,Uh=2300,Lh=2301,jv=2302,Ku=2400,Qu=2401,lm=2402,Yv=2500,eA=2501,fT=0,tA=1,qv=2,hT=3200,NN=3201,UN=3202,LN=3203,Lc=0,dT=1,Tl="",Aa="srgb",Ic="srgb-linear",cm="linear",Hn="srgb",IN="",PN="rg",FN="ga",zN=0,Zu=7680,HN=7681,GN=7682,VN=7683,kN=34055,XN=34056,jN=5386,YN=512,qN=513,WN=514,JN=515,KN=516,QN=517,ZN=518,nA=519,pT=512,mT=513,gT=514,Wv=515,vT=516,yT=517,Jv=518,_T=519,um=35044,$N=35048,eU=35040,tU=35045,nU=35049,iU=35041,aU=35046,rU=35050,sU=35042,oU="100",iA="300 es",qr=2e3,Ih=2001,lU={COMPUTE:"compute",RENDER:"render"},cU={PERSPECTIVE:"perspective",LINEAR:"linear",FLAT:"flat"},uU={NORMAL:"normal",CENTROID:"centroid",SAMPLE:"sample",FIRST:"first",EITHER:"either"};function xT(n){for(let e=n.length-1;e>=0;--e)if(n[e]>=65535)return!0;return!1}const fU={Int8Array,Uint8Array,Uint8ClampedArray,Int16Array,Uint16Array,Int32Array,Uint32Array,Float32Array,Float64Array};function Ph(n,e){return new fU[n](e)}function bT(n){return ArrayBuffer.isView(n)&&!(n instanceof DataView)}function fm(n){return document.createElementNS("http://www.w3.org/1999/xhtml",n)}function AT(){const n=fm("canvas");return n.style.display="block",n}const ST={};let Pc=null;function hU(n){Pc=n}function dU(){return Pc}function hm(...n){const e="THREE."+n.shift();Pc?Pc("log",e,...n):console.log(e,...n)}function ct(...n){const e="THREE."+n.shift();Pc?Pc("warn",e,...n):console.warn(e,...n)}function Dt(...n){const e="THREE."+n.shift();Pc?Pc("error",e,...n):console.error(e,...n)}function Fh(...n){const e=n.join(" ");e in ST||(ST[e]=!0,ct(...n))}function pU(n,e,t){return new Promise(function(i,a){function s(){switch(n.clientWaitSync(e,n.SYNC_FLUSH_COMMANDS_BIT,0)){case n.WAIT_FAILED:a();break;case n.TIMEOUT_EXPIRED:setTimeout(s,t);break;default:i()}}setTimeout(s,t)})}class Lo{addEventListener(e,t){this._listeners===void 0&&(this._listeners={});const i=this._listeners;i[e]===void 0&&(i[e]=[]),i[e].indexOf(t)===-1&&i[e].push(t)}hasEventListener(e,t){const i=this._listeners;return i===void 0?!1:i[e]!==void 0&&i[e].indexOf(t)!==-1}removeEventListener(e,t){const i=this._listeners;if(i===void 0)return;const a=i[e];if(a!==void 0){const s=a.indexOf(t);s!==-1&&a.splice(s,1)}}dispatchEvent(e){const t=this._listeners;if(t===void 0)return;const i=t[e.type];if(i!==void 0){e.target=this;const a=i.slice(0);for(let s=0,l=a.length;s<l;s++)a[s].call(this,e);e.target=null}}}const La=["00","01","02","03","04","05","06","07","08","09","0a","0b","0c","0d","0e","0f","10","11","12","13","14","15","16","17","18","19","1a","1b","1c","1d","1e","1f","20","21","22","23","24","25","26","27","28","29","2a","2b","2c","2d","2e","2f","30","31","32","33","34","35","36","37","38","39","3a","3b","3c","3d","3e","3f","40","41","42","43","44","45","46","47","48","49","4a","4b","4c","4d","4e","4f","50","51","52","53","54","55","56","57","58","59","5a","5b","5c","5d","5e","5f","60","61","62","63","64","65","66","67","68","69","6a","6b","6c","6d","6e","6f","70","71","72","73","74","75","76","77","78","79","7a","7b","7c","7d","7e","7f","80","81","82","83","84","85","86","87","88","89","8a","8b","8c","8d","8e","8f","90","91","92","93","94","95","96","97","98","99","9a","9b","9c","9d","9e","9f","a0","a1","a2","a3","a4","a5","a6","a7","a8","a9","aa","ab","ac","ad","ae","af","b0","b1","b2","b3","b4","b5","b6","b7","b8","b9","ba","bb","bc","bd","be","bf","c0","c1","c2","c3","c4","c5","c6","c7","c8","c9","ca","cb","cc","cd","ce","cf","d0","d1","d2","d3","d4","d5","d6","d7","d8","d9","da","db","dc","dd","de","df","e0","e1","e2","e3","e4","e5","e6","e7","e8","e9","ea","eb","ec","ed","ee","ef","f0","f1","f2","f3","f4","f5","f6","f7","f8","f9","fa","fb","fc","fd","fe","ff"];let MT=1234567;const $u=Math.PI/180,zh=180/Math.PI;function Wr(){const n=Math.random()*4294967295|0,e=Math.random()*4294967295|0,t=Math.random()*4294967295|0,i=Math.random()*4294967295|0;return(La[n&255]+La[n>>8&255]+La[n>>16&255]+La[n>>24&255]+"-"+La[e&255]+La[e>>8&255]+"-"+La[e>>16&15|64]+La[e>>24&255]+"-"+La[t&63|128]+La[t>>8&255]+"-"+La[t>>16&255]+La[t>>24&255]+La[i&255]+La[i>>8&255]+La[i>>16&255]+La[i>>24&255]).toLowerCase()}function jt(n,e,t){return Math.max(e,Math.min(t,n))}function aA(n,e){return(n%e+e)%e}function mU(n,e,t,i,a){return i+(n-e)*(a-i)/(t-e)}function gU(n,e,t){return n!==e?(t-n)/(e-n):0}function dm(n,e,t){return(1-t)*n+t*e}function vU(n,e,t,i){return dm(n,e,1-Math.exp(-t*i))}function yU(n,e=1){return e-Math.abs(aA(n,e*2)-e)}function _U(n,e,t){return n<=e?0:n>=t?1:(n=(n-e)/(t-e),n*n*(3-2*n))}function xU(n,e,t){return n<=e?0:n>=t?1:(n=(n-e)/(t-e),n*n*n*(n*(n*6-15)+10))}function bU(n,e){return n+Math.floor(Math.random()*(e-n+1))}function AU(n,e){return n+Math.random()*(e-n)}function SU(n){return n*(.5-Math.random())}function MU(n){n!==void 0&&(MT=n);let e=MT+=1831565813;return e=Math.imul(e^e>>>15,e|1),e^=e+Math.imul(e^e>>>7,e|61),((e^e>>>14)>>>0)/4294967296}function EU(n){return n*$u}function TU(n){return n*zh}function CU(n){return(n&n-1)===0&&n!==0}function RU(n){return Math.pow(2,Math.ceil(Math.log(n)/Math.LN2))}function wU(n){return Math.pow(2,Math.floor(Math.log(n)/Math.LN2))}function BU(n,e,t,i,a){const s=Math.cos,l=Math.sin,c=s(t/2),d=l(t/2),p=s((e+i)/2),g=l((e+i)/2),v=s((e-i)/2),_=l((e-i)/2),x=s((i-e)/2),S=l((i-e)/2);switch(a){case"XYX":n.set(c*g,d*v,d*_,c*p);break;case"YZY":n.set(d*_,c*g,d*v,c*p);break;case"ZXZ":n.set(d*v,d*_,c*g,c*p);break;case"XZX":n.set(c*g,d*S,d*x,c*p);break;case"YXY":n.set(d*x,c*g,d*S,c*p);break;case"ZYZ":n.set(d*S,d*x,c*g,c*p);break;default:ct("MathUtils: .setQuaternionFromProperEuler() encountered an unknown order: "+a)}}function ir(n,e){switch(e.constructor){case Float32Array:return n;case Uint32Array:return n/4294967295;case Uint16Array:return n/65535;case Uint8Array:return n/255;case Int32Array:return Math.max(n/2147483647,-1);case Int16Array:return Math.max(n/32767,-1);case Int8Array:return Math.max(n/127,-1);default:throw new Error("Invalid component type.")}}function an(n,e){switch(e.constructor){case Float32Array:return n;case Uint32Array:return Math.round(n*4294967295);case Uint16Array:return Math.round(n*65535);case Uint8Array:return Math.round(n*255);case Int32Array:return Math.round(n*2147483647);case Int16Array:return Math.round(n*32767);case Int8Array:return Math.round(n*127);default:throw new Error("Invalid component type.")}}const Cl={DEG2RAD:$u,RAD2DEG:zh,generateUUID:Wr,clamp:jt,euclideanModulo:aA,mapLinear:mU,inverseLerp:gU,lerp:dm,damp:vU,pingpong:yU,smoothstep:_U,smootherstep:xU,randInt:bU,randFloat:AU,randFloatSpread:SU,seededRandom:MU,degToRad:EU,radToDeg:TU,isPowerOfTwo:CU,ceilPowerOfTwo:RU,floorPowerOfTwo:wU,setQuaternionFromProperEuler:BU,normalize:an,denormalize:ir};class He{constructor(e=0,t=0){He.prototype.isVector2=!0,this.x=e,this.y=t}get width(){return this.x}set width(e){this.x=e}get height(){return this.y}set height(e){this.y=e}set(e,t){return this.x=e,this.y=t,this}setScalar(e){return this.x=e,this.y=e,this}setX(e){return this.x=e,this}setY(e){return this.y=e,this}setComponent(e,t){switch(e){case 0:this.x=t;break;case 1:this.y=t;break;default:throw new Error("index is out of range: "+e)}return this}getComponent(e){switch(e){case 0:return this.x;case 1:return this.y;default:throw new Error("index is out of range: "+e)}}clone(){return new this.constructor(this.x,this.y)}copy(e){return this.x=e.x,this.y=e.y,this}add(e){return this.x+=e.x,this.y+=e.y,this}addScalar(e){return this.x+=e,this.y+=e,this}addVectors(e,t){return this.x=e.x+t.x,this.y=e.y+t.y,this}addScaledVector(e,t){return this.x+=e.x*t,this.y+=e.y*t,this}sub(e){return this.x-=e.x,this.y-=e.y,this}subScalar(e){return this.x-=e,this.y-=e,this}subVectors(e,t){return this.x=e.x-t.x,this.y=e.y-t.y,this}multiply(e){return this.x*=e.x,this.y*=e.y,this}multiplyScalar(e){return this.x*=e,this.y*=e,this}divide(e){return this.x/=e.x,this.y/=e.y,this}divideScalar(e){return this.multiplyScalar(1/e)}applyMatrix3(e){const t=this.x,i=this.y,a=e.elements;return this.x=a[0]*t+a[3]*i+a[6],this.y=a[1]*t+a[4]*i+a[7],this}min(e){return this.x=Math.min(this.x,e.x),this.y=Math.min(this.y,e.y),this}max(e){return this.x=Math.max(this.x,e.x),this.y=Math.max(this.y,e.y),this}clamp(e,t){return this.x=jt(this.x,e.x,t.x),this.y=jt(this.y,e.y,t.y),this}clampScalar(e,t){return this.x=jt(this.x,e,t),this.y=jt(this.y,e,t),this}clampLength(e,t){const i=this.length();return this.divideScalar(i||1).multiplyScalar(jt(i,e,t))}floor(){return this.x=Math.floor(this.x),this.y=Math.floor(this.y),this}ceil(){return this.x=Math.ceil(this.x),this.y=Math.ceil(this.y),this}round(){return this.x=Math.round(this.x),this.y=Math.round(this.y),this}roundToZero(){return this.x=Math.trunc(this.x),this.y=Math.trunc(this.y),this}negate(){return this.x=-this.x,this.y=-this.y,this}dot(e){return this.x*e.x+this.y*e.y}cross(e){return this.x*e.y-this.y*e.x}lengthSq(){return this.x*this.x+this.y*this.y}length(){return Math.sqrt(this.x*this.x+this.y*this.y)}manhattanLength(){return Math.abs(this.x)+Math.abs(this.y)}normalize(){return this.divideScalar(this.length()||1)}angle(){return Math.atan2(-this.y,-this.x)+Math.PI}angleTo(e){const t=Math.sqrt(this.lengthSq()*e.lengthSq());if(t===0)return Math.PI/2;const i=this.dot(e)/t;return Math.acos(jt(i,-1,1))}distanceTo(e){return Math.sqrt(this.distanceToSquared(e))}distanceToSquared(e){const t=this.x-e.x,i=this.y-e.y;return t*t+i*i}manhattanDistanceTo(e){return Math.abs(this.x-e.x)+Math.abs(this.y-e.y)}setLength(e){return this.normalize().multiplyScalar(e)}lerp(e,t){return this.x+=(e.x-this.x)*t,this.y+=(e.y-this.y)*t,this}lerpVectors(e,t,i){return this.x=e.x+(t.x-e.x)*i,this.y=e.y+(t.y-e.y)*i,this}equals(e){return e.x===this.x&&e.y===this.y}fromArray(e,t=0){return this.x=e[t],this.y=e[t+1],this}toArray(e=[],t=0){return e[t]=this.x,e[t+1]=this.y,e}fromBufferAttribute(e,t){return this.x=e.getX(t),this.y=e.getY(t),this}rotateAround(e,t){const i=Math.cos(t),a=Math.sin(t),s=this.x-e.x,l=this.y-e.y;return this.x=s*i-l*a+e.x,this.y=s*a+l*i+e.y,this}random(){return this.x=Math.random(),this.y=Math.random(),this}*[Symbol.iterator](){yield this.x,yield this.y}}class Ui{constructor(e=0,t=0,i=0,a=1){this.isQuaternion=!0,this._x=e,this._y=t,this._z=i,this._w=a}static slerpFlat(e,t,i,a,s,l,c){let d=i[a+0],p=i[a+1],g=i[a+2],v=i[a+3],_=s[l+0],x=s[l+1],S=s[l+2],C=s[l+3];if(c<=0){e[t+0]=d,e[t+1]=p,e[t+2]=g,e[t+3]=v;return}if(c>=1){e[t+0]=_,e[t+1]=x,e[t+2]=S,e[t+3]=C;return}if(v!==C||d!==_||p!==x||g!==S){let T=d*_+p*x+g*S+v*C;T<0&&(_=-_,x=-x,S=-S,C=-C,T=-T);let M=1-c;if(T<.9995){const w=Math.acos(T),B=Math.sin(w);M=Math.sin(M*w)/B,c=Math.sin(c*w)/B,d=d*M+_*c,p=p*M+x*c,g=g*M+S*c,v=v*M+C*c}else{d=d*M+_*c,p=p*M+x*c,g=g*M+S*c,v=v*M+C*c;const w=1/Math.sqrt(d*d+p*p+g*g+v*v);d*=w,p*=w,g*=w,v*=w}}e[t]=d,e[t+1]=p,e[t+2]=g,e[t+3]=v}static multiplyQuaternionsFlat(e,t,i,a,s,l){const c=i[a],d=i[a+1],p=i[a+2],g=i[a+3],v=s[l],_=s[l+1],x=s[l+2],S=s[l+3];return e[t]=c*S+g*v+d*x-p*_,e[t+1]=d*S+g*_+p*v-c*x,e[t+2]=p*S+g*x+c*_-d*v,e[t+3]=g*S-c*v-d*_-p*x,e}get x(){return this._x}set x(e){this._x=e,this._onChangeCallback()}get y(){return this._y}set y(e){this._y=e,this._onChangeCallback()}get z(){return this._z}set z(e){this._z=e,this._onChangeCallback()}get w(){return this._w}set w(e){this._w=e,this._onChangeCallback()}set(e,t,i,a){return this._x=e,this._y=t,this._z=i,this._w=a,this._onChangeCallback(),this}clone(){return new this.constructor(this._x,this._y,this._z,this._w)}copy(e){return this._x=e.x,this._y=e.y,this._z=e.z,this._w=e.w,this._onChangeCallback(),this}setFromEuler(e,t=!0){const i=e._x,a=e._y,s=e._z,l=e._order,c=Math.cos,d=Math.sin,p=c(i/2),g=c(a/2),v=c(s/2),_=d(i/2),x=d(a/2),S=d(s/2);switch(l){case"XYZ":this._x=_*g*v+p*x*S,this._y=p*x*v-_*g*S,this._z=p*g*S+_*x*v,this._w=p*g*v-_*x*S;break;case"YXZ":this._x=_*g*v+p*x*S,this._y=p*x*v-_*g*S,this._z=p*g*S-_*x*v,this._w=p*g*v+_*x*S;break;case"ZXY":this._x=_*g*v-p*x*S,this._y=p*x*v+_*g*S,this._z=p*g*S+_*x*v,this._w=p*g*v-_*x*S;break;case"ZYX":this._x=_*g*v-p*x*S,this._y=p*x*v+_*g*S,this._z=p*g*S-_*x*v,this._w=p*g*v+_*x*S;break;case"YZX":this._x=_*g*v+p*x*S,this._y=p*x*v+_*g*S,this._z=p*g*S-_*x*v,this._w=p*g*v-_*x*S;break;case"XZY":this._x=_*g*v-p*x*S,this._y=p*x*v-_*g*S,this._z=p*g*S+_*x*v,this._w=p*g*v+_*x*S;break;default:ct("Quaternion: .setFromEuler() encountered an unknown order: "+l)}return t===!0&&this._onChangeCallback(),this}setFromAxisAngle(e,t){const i=t/2,a=Math.sin(i);return this._x=e.x*a,this._y=e.y*a,this._z=e.z*a,this._w=Math.cos(i),this._onChangeCallback(),this}setFromRotationMatrix(e){const t=e.elements,i=t[0],a=t[4],s=t[8],l=t[1],c=t[5],d=t[9],p=t[2],g=t[6],v=t[10],_=i+c+v;if(_>0){const x=.5/Math.sqrt(_+1);this._w=.25/x,this._x=(g-d)*x,this._y=(s-p)*x,this._z=(l-a)*x}else if(i>c&&i>v){const x=2*Math.sqrt(1+i-c-v);this._w=(g-d)/x,this._x=.25*x,this._y=(a+l)/x,this._z=(s+p)/x}else if(c>v){const x=2*Math.sqrt(1+c-i-v);this._w=(s-p)/x,this._x=(a+l)/x,this._y=.25*x,this._z=(d+g)/x}else{const x=2*Math.sqrt(1+v-i-c);this._w=(l-a)/x,this._x=(s+p)/x,this._y=(d+g)/x,this._z=.25*x}return this._onChangeCallback(),this}setFromUnitVectors(e,t){let i=e.dot(t)+1;return i<1e-8?(i=0,Math.abs(e.x)>Math.abs(e.z)?(this._x=-e.y,this._y=e.x,this._z=0,this._w=i):(this._x=0,this._y=-e.z,this._z=e.y,this._w=i)):(this._x=e.y*t.z-e.z*t.y,this._y=e.z*t.x-e.x*t.z,this._z=e.x*t.y-e.y*t.x,this._w=i),this.normalize()}angleTo(e){return 2*Math.acos(Math.abs(jt(this.dot(e),-1,1)))}rotateTowards(e,t){const i=this.angleTo(e);if(i===0)return this;const a=Math.min(1,t/i);return this.slerp(e,a),this}identity(){return this.set(0,0,0,1)}invert(){return this.conjugate()}conjugate(){return this._x*=-1,this._y*=-1,this._z*=-1,this._onChangeCallback(),this}dot(e){return this._x*e._x+this._y*e._y+this._z*e._z+this._w*e._w}lengthSq(){return this._x*this._x+this._y*this._y+this._z*this._z+this._w*this._w}length(){return Math.sqrt(this._x*this._x+this._y*this._y+this._z*this._z+this._w*this._w)}normalize(){let e=this.length();return e===0?(this._x=0,this._y=0,this._z=0,this._w=1):(e=1/e,this._x=this._x*e,this._y=this._y*e,this._z=this._z*e,this._w=this._w*e),this._onChangeCallback(),this}multiply(e){return this.multiplyQuaternions(this,e)}premultiply(e){return this.multiplyQuaternions(e,this)}multiplyQuaternions(e,t){const i=e._x,a=e._y,s=e._z,l=e._w,c=t._x,d=t._y,p=t._z,g=t._w;return this._x=i*g+l*c+a*p-s*d,this._y=a*g+l*d+s*c-i*p,this._z=s*g+l*p+i*d-a*c,this._w=l*g-i*c-a*d-s*p,this._onChangeCallback(),this}slerp(e,t){if(t<=0)return this;if(t>=1)return this.copy(e);let i=e._x,a=e._y,s=e._z,l=e._w,c=this.dot(e);c<0&&(i=-i,a=-a,s=-s,l=-l,c=-c);let d=1-t;if(c<.9995){const p=Math.acos(c),g=Math.sin(p);d=Math.sin(d*p)/g,t=Math.sin(t*p)/g,this._x=this._x*d+i*t,this._y=this._y*d+a*t,this._z=this._z*d+s*t,this._w=this._w*d+l*t,this._onChangeCallback()}else this._x=this._x*d+i*t,this._y=this._y*d+a*t,this._z=this._z*d+s*t,this._w=this._w*d+l*t,this.normalize();return this}slerpQuaternions(e,t,i){return this.copy(e).slerp(t,i)}random(){const e=2*Math.PI*Math.random(),t=2*Math.PI*Math.random(),i=Math.random(),a=Math.sqrt(1-i),s=Math.sqrt(i);return this.set(a*Math.sin(e),a*Math.cos(e),s*Math.sin(t),s*Math.cos(t))}equals(e){return e._x===this._x&&e._y===this._y&&e._z===this._z&&e._w===this._w}fromArray(e,t=0){return this._x=e[t],this._y=e[t+1],this._z=e[t+2],this._w=e[t+3],this._onChangeCallback(),this}toArray(e=[],t=0){return e[t]=this._x,e[t+1]=this._y,e[t+2]=this._z,e[t+3]=this._w,e}fromBufferAttribute(e,t){return this._x=e.getX(t),this._y=e.getY(t),this._z=e.getZ(t),this._w=e.getW(t),this._onChangeCallback(),this}toJSON(){return this.toArray()}_onChange(e){return this._onChangeCallback=e,this}_onChangeCallback(){}*[Symbol.iterator](){yield this._x,yield this._y,yield this._z,yield this._w}}class K{constructor(e=0,t=0,i=0){K.prototype.isVector3=!0,this.x=e,this.y=t,this.z=i}set(e,t,i){return i===void 0&&(i=this.z),this.x=e,this.y=t,this.z=i,this}setScalar(e){return this.x=e,this.y=e,this.z=e,this}setX(e){return this.x=e,this}setY(e){return this.y=e,this}setZ(e){return this.z=e,this}setComponent(e,t){switch(e){case 0:this.x=t;break;case 1:this.y=t;break;case 2:this.z=t;break;default:throw new Error("index is out of range: "+e)}return this}getComponent(e){switch(e){case 0:return this.x;case 1:return this.y;case 2:return this.z;default:throw new Error("index is out of range: "+e)}}clone(){return new this.constructor(this.x,this.y,this.z)}copy(e){return this.x=e.x,this.y=e.y,this.z=e.z,this}add(e){return this.x+=e.x,this.y+=e.y,this.z+=e.z,this}addScalar(e){return this.x+=e,this.y+=e,this.z+=e,this}addVectors(e,t){return this.x=e.x+t.x,this.y=e.y+t.y,this.z=e.z+t.z,this}addScaledVector(e,t){return this.x+=e.x*t,this.y+=e.y*t,this.z+=e.z*t,this}sub(e){return this.x-=e.x,this.y-=e.y,this.z-=e.z,this}subScalar(e){return this.x-=e,this.y-=e,this.z-=e,this}subVectors(e,t){return this.x=e.x-t.x,this.y=e.y-t.y,this.z=e.z-t.z,this}multiply(e){return this.x*=e.x,this.y*=e.y,this.z*=e.z,this}multiplyScalar(e){return this.x*=e,this.y*=e,this.z*=e,this}multiplyVectors(e,t){return this.x=e.x*t.x,this.y=e.y*t.y,this.z=e.z*t.z,this}applyEuler(e){return this.applyQuaternion(ET.setFromEuler(e))}applyAxisAngle(e,t){return this.applyQuaternion(ET.setFromAxisAngle(e,t))}applyMatrix3(e){const t=this.x,i=this.y,a=this.z,s=e.elements;return this.x=s[0]*t+s[3]*i+s[6]*a,this.y=s[1]*t+s[4]*i+s[7]*a,this.z=s[2]*t+s[5]*i+s[8]*a,this}applyNormalMatrix(e){return this.applyMatrix3(e).normalize()}applyMatrix4(e){const t=this.x,i=this.y,a=this.z,s=e.elements,l=1/(s[3]*t+s[7]*i+s[11]*a+s[15]);return this.x=(s[0]*t+s[4]*i+s[8]*a+s[12])*l,this.y=(s[1]*t+s[5]*i+s[9]*a+s[13])*l,this.z=(s[2]*t+s[6]*i+s[10]*a+s[14])*l,this}applyQuaternion(e){const t=this.x,i=this.y,a=this.z,s=e.x,l=e.y,c=e.z,d=e.w,p=2*(l*a-c*i),g=2*(c*t-s*a),v=2*(s*i-l*t);return this.x=t+d*p+l*v-c*g,this.y=i+d*g+c*p-s*v,this.z=a+d*v+s*g-l*p,this}project(e){return this.applyMatrix4(e.matrixWorldInverse).applyMatrix4(e.projectionMatrix)}unproject(e){return this.applyMatrix4(e.projectionMatrixInverse).applyMatrix4(e.matrixWorld)}transformDirection(e){const t=this.x,i=this.y,a=this.z,s=e.elements;return this.x=s[0]*t+s[4]*i+s[8]*a,this.y=s[1]*t+s[5]*i+s[9]*a,this.z=s[2]*t+s[6]*i+s[10]*a,this.normalize()}divide(e){return this.x/=e.x,this.y/=e.y,this.z/=e.z,this}divideScalar(e){return this.multiplyScalar(1/e)}min(e){return this.x=Math.min(this.x,e.x),this.y=Math.min(this.y,e.y),this.z=Math.min(this.z,e.z),this}max(e){return this.x=Math.max(this.x,e.x),this.y=Math.max(this.y,e.y),this.z=Math.max(this.z,e.z),this}clamp(e,t){return this.x=jt(this.x,e.x,t.x),this.y=jt(this.y,e.y,t.y),this.z=jt(this.z,e.z,t.z),this}clampScalar(e,t){return this.x=jt(this.x,e,t),this.y=jt(this.y,e,t),this.z=jt(this.z,e,t),this}clampLength(e,t){const i=this.length();return this.divideScalar(i||1).multiplyScalar(jt(i,e,t))}floor(){return this.x=Math.floor(this.x),this.y=Math.floor(this.y),this.z=Math.floor(this.z),this}ceil(){return this.x=Math.ceil(this.x),this.y=Math.ceil(this.y),this.z=Math.ceil(this.z),this}round(){return this.x=Math.round(this.x),this.y=Math.round(this.y),this.z=Math.round(this.z),this}roundToZero(){return this.x=Math.trunc(this.x),this.y=Math.trunc(this.y),this.z=Math.trunc(this.z),this}negate(){return this.x=-this.x,this.y=-this.y,this.z=-this.z,this}dot(e){return this.x*e.x+this.y*e.y+this.z*e.z}lengthSq(){return this.x*this.x+this.y*this.y+this.z*this.z}length(){return Math.sqrt(this.x*this.x+this.y*this.y+this.z*this.z)}manhattanLength(){return Math.abs(this.x)+Math.abs(this.y)+Math.abs(this.z)}normalize(){return this.divideScalar(this.length()||1)}setLength(e){return this.normalize().multiplyScalar(e)}lerp(e,t){return this.x+=(e.x-this.x)*t,this.y+=(e.y-this.y)*t,this.z+=(e.z-this.z)*t,this}lerpVectors(e,t,i){return this.x=e.x+(t.x-e.x)*i,this.y=e.y+(t.y-e.y)*i,this.z=e.z+(t.z-e.z)*i,this}cross(e){return this.crossVectors(this,e)}crossVectors(e,t){const i=e.x,a=e.y,s=e.z,l=t.x,c=t.y,d=t.z;return this.x=a*d-s*c,this.y=s*l-i*d,this.z=i*c-a*l,this}projectOnVector(e){const t=e.lengthSq();if(t===0)return this.set(0,0,0);const i=e.dot(this)/t;return this.copy(e).multiplyScalar(i)}projectOnPlane(e){return rA.copy(this).projectOnVector(e),this.sub(rA)}reflect(e){return this.sub(rA.copy(e).multiplyScalar(2*this.dot(e)))}angleTo(e){const t=Math.sqrt(this.lengthSq()*e.lengthSq());if(t===0)return Math.PI/2;const i=this.dot(e)/t;return Math.acos(jt(i,-1,1))}distanceTo(e){return Math.sqrt(this.distanceToSquared(e))}distanceToSquared(e){const t=this.x-e.x,i=this.y-e.y,a=this.z-e.z;return t*t+i*i+a*a}manhattanDistanceTo(e){return Math.abs(this.x-e.x)+Math.abs(this.y-e.y)+Math.abs(this.z-e.z)}setFromSpherical(e){return this.setFromSphericalCoords(e.radius,e.phi,e.theta)}setFromSphericalCoords(e,t,i){const a=Math.sin(t)*e;return this.x=a*Math.sin(i),this.y=Math.cos(t)*e,this.z=a*Math.cos(i),this}setFromCylindrical(e){return this.setFromCylindricalCoords(e.radius,e.theta,e.y)}setFromCylindricalCoords(e,t,i){return this.x=e*Math.sin(t),this.y=i,this.z=e*Math.cos(t),this}setFromMatrixPosition(e){const t=e.elements;return this.x=t[12],this.y=t[13],this.z=t[14],this}setFromMatrixScale(e){const t=this.setFromMatrixColumn(e,0).length(),i=this.setFromMatrixColumn(e,1).length(),a=this.setFromMatrixColumn(e,2).length();return this.x=t,this.y=i,this.z=a,this}setFromMatrixColumn(e,t){return this.fromArray(e.elements,t*4)}setFromMatrix3Column(e,t){return this.fromArray(e.elements,t*3)}setFromEuler(e){return this.x=e._x,this.y=e._y,this.z=e._z,this}setFromColor(e){return this.x=e.r,this.y=e.g,this.z=e.b,this}equals(e){return e.x===this.x&&e.y===this.y&&e.z===this.z}fromArray(e,t=0){return this.x=e[t],this.y=e[t+1],this.z=e[t+2],this}toArray(e=[],t=0){return e[t]=this.x,e[t+1]=this.y,e[t+2]=this.z,e}fromBufferAttribute(e,t){return this.x=e.getX(t),this.y=e.getY(t),this.z=e.getZ(t),this}random(){return this.x=Math.random(),this.y=Math.random(),this.z=Math.random(),this}randomDirection(){const e=Math.random()*Math.PI*2,t=Math.random()*2-1,i=Math.sqrt(1-t*t);return this.x=i*Math.cos(e),this.y=t,this.z=i*Math.sin(e),this}*[Symbol.iterator](){yield this.x,yield this.y,yield this.z}}const rA=new K,ET=new Ui;class Zt{constructor(e,t,i,a,s,l,c,d,p){Zt.prototype.isMatrix3=!0,this.elements=[1,0,0,0,1,0,0,0,1],e!==void 0&&this.set(e,t,i,a,s,l,c,d,p)}set(e,t,i,a,s,l,c,d,p){const g=this.elements;return g[0]=e,g[1]=a,g[2]=c,g[3]=t,g[4]=s,g[5]=d,g[6]=i,g[7]=l,g[8]=p,this}identity(){return this.set(1,0,0,0,1,0,0,0,1),this}copy(e){const t=this.elements,i=e.elements;return t[0]=i[0],t[1]=i[1],t[2]=i[2],t[3]=i[3],t[4]=i[4],t[5]=i[5],t[6]=i[6],t[7]=i[7],t[8]=i[8],this}extractBasis(e,t,i){return e.setFromMatrix3Column(this,0),t.setFromMatrix3Column(this,1),i.setFromMatrix3Column(this,2),this}setFromMatrix4(e){const t=e.elements;return this.set(t[0],t[4],t[8],t[1],t[5],t[9],t[2],t[6],t[10]),this}multiply(e){return this.multiplyMatrices(this,e)}premultiply(e){return this.multiplyMatrices(e,this)}multiplyMatrices(e,t){const i=e.elements,a=t.elements,s=this.elements,l=i[0],c=i[3],d=i[6],p=i[1],g=i[4],v=i[7],_=i[2],x=i[5],S=i[8],C=a[0],T=a[3],M=a[6],w=a[1],B=a[4],D=a[7],P=a[2],U=a[5],z=a[8];return s[0]=l*C+c*w+d*P,s[3]=l*T+c*B+d*U,s[6]=l*M+c*D+d*z,s[1]=p*C+g*w+v*P,s[4]=p*T+g*B+v*U,s[7]=p*M+g*D+v*z,s[2]=_*C+x*w+S*P,s[5]=_*T+x*B+S*U,s[8]=_*M+x*D+S*z,this}multiplyScalar(e){const t=this.elements;return t[0]*=e,t[3]*=e,t[6]*=e,t[1]*=e,t[4]*=e,t[7]*=e,t[2]*=e,t[5]*=e,t[8]*=e,this}determinant(){const e=this.elements,t=e[0],i=e[1],a=e[2],s=e[3],l=e[4],c=e[5],d=e[6],p=e[7],g=e[8];return t*l*g-t*c*p-i*s*g+i*c*d+a*s*p-a*l*d}invert(){const e=this.elements,t=e[0],i=e[1],a=e[2],s=e[3],l=e[4],c=e[5],d=e[6],p=e[7],g=e[8],v=g*l-c*p,_=c*d-g*s,x=p*s-l*d,S=t*v+i*_+a*x;if(S===0)return this.set(0,0,0,0,0,0,0,0,0);const C=1/S;return e[0]=v*C,e[1]=(a*p-g*i)*C,e[2]=(c*i-a*l)*C,e[3]=_*C,e[4]=(g*t-a*d)*C,e[5]=(a*s-c*t)*C,e[6]=x*C,e[7]=(i*d-p*t)*C,e[8]=(l*t-i*s)*C,this}transpose(){let e;const t=this.elements;return e=t[1],t[1]=t[3],t[3]=e,e=t[2],t[2]=t[6],t[6]=e,e=t[5],t[5]=t[7],t[7]=e,this}getNormalMatrix(e){return this.setFromMatrix4(e).invert().transpose()}transposeIntoArray(e){const t=this.elements;return e[0]=t[0],e[1]=t[3],e[2]=t[6],e[3]=t[1],e[4]=t[4],e[5]=t[7],e[6]=t[2],e[7]=t[5],e[8]=t[8],this}setUvTransform(e,t,i,a,s,l,c){const d=Math.cos(s),p=Math.sin(s);return this.set(i*d,i*p,-i*(d*l+p*c)+l+e,-a*p,a*d,-a*(-p*l+d*c)+c+t,0,0,1),this}scale(e,t){return this.premultiply(sA.makeScale(e,t)),this}rotate(e){return this.premultiply(sA.makeRotation(-e)),this}translate(e,t){return this.premultiply(sA.makeTranslation(e,t)),this}makeTranslation(e,t){return e.isVector2?this.set(1,0,e.x,0,1,e.y,0,0,1):this.set(1,0,e,0,1,t,0,0,1),this}makeRotation(e){const t=Math.cos(e),i=Math.sin(e);return this.set(t,-i,0,i,t,0,0,0,1),this}makeScale(e,t){return this.set(e,0,0,0,t,0,0,0,1),this}equals(e){const t=this.elements,i=e.elements;for(let a=0;a<9;a++)if(t[a]!==i[a])return!1;return!0}fromArray(e,t=0){for(let i=0;i<9;i++)this.elements[i]=e[i+t];return this}toArray(e=[],t=0){const i=this.elements;return e[t]=i[0],e[t+1]=i[1],e[t+2]=i[2],e[t+3]=i[3],e[t+4]=i[4],e[t+5]=i[5],e[t+6]=i[6],e[t+7]=i[7],e[t+8]=i[8],e}clone(){return new this.constructor().fromArray(this.elements)}}const sA=new Zt,TT=new Zt().set(.4123908,.3575843,.1804808,.212639,.7151687,.0721923,.0193308,.1191948,.9505322),CT=new Zt().set(3.2409699,-1.5373832,-.4986108,-.9692436,1.8759675,.0415551,.0556301,-.203977,1.0569715);function DU(){const n={enabled:!0,workingColorSpace:Ic,spaces:{},convert:function(a,s,l){return this.enabled===!1||s===l||!s||!l||(this.spaces[s].transfer===Hn&&(a.r=Rl(a.r),a.g=Rl(a.g),a.b=Rl(a.b)),this.spaces[s].primaries!==this.spaces[l].primaries&&(a.applyMatrix3(this.spaces[s].toXYZ),a.applyMatrix3(this.spaces[l].fromXYZ)),this.spaces[l].transfer===Hn&&(a.r=Hh(a.r),a.g=Hh(a.g),a.b=Hh(a.b))),a},workingToColorSpace:function(a,s){return this.convert(a,this.workingColorSpace,s)},colorSpaceToWorking:function(a,s){return this.convert(a,s,this.workingColorSpace)},getPrimaries:function(a){return this.spaces[a].primaries},getTransfer:function(a){return a===Tl?cm:this.spaces[a].transfer},getToneMappingMode:function(a){return this.spaces[a].outputColorSpaceConfig.toneMappingMode||"standard"},getLuminanceCoefficients:function(a,s=this.workingColorSpace){return a.fromArray(this.spaces[s].luminanceCoefficients)},define:function(a){Object.assign(this.spaces,a)},_getMatrix:function(a,s,l){return a.copy(this.spaces[s].toXYZ).multiply(this.spaces[l].fromXYZ)},_getDrawingBufferColorSpace:function(a){return this.spaces[a].outputColorSpaceConfig.drawingBufferColorSpace},_getUnpackColorSpace:function(a=this.workingColorSpace){return this.spaces[a].workingColorSpaceConfig.unpackColorSpace},fromWorkingColorSpace:function(a,s){return Fh("ColorManagement: .fromWorkingColorSpace() has been renamed to .workingToColorSpace()."),n.workingToColorSpace(a,s)},toWorkingColorSpace:function(a,s){return Fh("ColorManagement: .toWorkingColorSpace() has been renamed to .colorSpaceToWorking()."),n.colorSpaceToWorking(a,s)}},e=[.64,.33,.3,.6,.15,.06],t=[.2126,.7152,.0722],i=[.3127,.329];return n.define({[Ic]:{primaries:e,whitePoint:i,transfer:cm,toXYZ:TT,fromXYZ:CT,luminanceCoefficients:t,workingColorSpaceConfig:{unpackColorSpace:Aa},outputColorSpaceConfig:{drawingBufferColorSpace:Aa}},[Aa]:{primaries:e,whitePoint:i,transfer:Hn,toXYZ:TT,fromXYZ:CT,luminanceCoefficients:t,outputColorSpaceConfig:{drawingBufferColorSpace:Aa}}}),n}const vn=DU();function Rl(n){return n<.04045?n*.0773993808:Math.pow(n*.9478672986+.0521327014,2.4)}function Hh(n){return n<.0031308?n*12.92:1.055*Math.pow(n,.41666)-.055}let Gh;class RT{static getDataURL(e,t="image/png"){if(/^data:/i.test(e.src)||typeof HTMLCanvasElement>"u")return e.src;let i;if(e instanceof HTMLCanvasElement)i=e;else{Gh===void 0&&(Gh=fm("canvas")),Gh.width=e.width,Gh.height=e.height;const a=Gh.getContext("2d");e instanceof ImageData?a.putImageData(e,0,0):a.drawImage(e,0,0,e.width,e.height),i=Gh}return i.toDataURL(t)}static sRGBToLinear(e){if(typeof HTMLImageElement<"u"&&e instanceof HTMLImageElement||typeof HTMLCanvasElement<"u"&&e instanceof HTMLCanvasElement||typeof ImageBitmap<"u"&&e instanceof ImageBitmap){const t=fm("canvas");t.width=e.width,t.height=e.height;const i=t.getContext("2d");i.drawImage(e,0,0,e.width,e.height);const a=i.getImageData(0,0,e.width,e.height),s=a.data;for(let l=0;l<s.length;l++)s[l]=Rl(s[l]/255)*255;return i.putImageData(a,0,0),t}else if(e.data){const t=e.data.slice(0);for(let i=0;i<t.length;i++)t instanceof Uint8Array||t instanceof Uint8ClampedArray?t[i]=Math.floor(Rl(t[i]/255)*255):t[i]=Rl(t[i]);return{data:t,width:e.width,height:e.height}}else return ct("ImageUtils.sRGBToLinear(): Unsupported image type. No color space conversion applied."),e}}let OU=0;class Fc{constructor(e=null){this.isSource=!0,Object.defineProperty(this,"id",{value:OU++}),this.uuid=Wr(),this.data=e,this.dataReady=!0,this.version=0}getSize(e){const t=this.data;return typeof HTMLVideoElement<"u"&&t instanceof HTMLVideoElement?e.set(t.videoWidth,t.videoHeight,0):typeof VideoFrame<"u"&&t instanceof VideoFrame?e.set(t.displayHeight,t.displayWidth,0):t!==null?e.set(t.width,t.height,t.depth||0):e.set(0,0,0),e}set needsUpdate(e){e===!0&&this.version++}toJSON(e){const t=e===void 0||typeof e=="string";if(!t&&e.images[this.uuid]!==void 0)return e.images[this.uuid];const i={uuid:this.uuid,url:""},a=this.data;if(a!==null){let s;if(Array.isArray(a)){s=[];for(let l=0,c=a.length;l<c;l++)a[l].isDataTexture?s.push(oA(a[l].image)):s.push(oA(a[l]))}else s=oA(a);i.url=s}return t||(e.images[this.uuid]=i),i}}function oA(n){return typeof HTMLImageElement<"u"&&n instanceof HTMLImageElement||typeof HTMLCanvasElement<"u"&&n instanceof HTMLCanvasElement||typeof ImageBitmap<"u"&&n instanceof ImageBitmap?RT.getDataURL(n):n.data?{data:Array.from(n.data),width:n.width,height:n.height,type:n.data.constructor.name}:(ct("Texture: Unable to serialize Texture."),{})}let NU=0;const lA=new K;class ai extends Lo{constructor(e=ai.DEFAULT_IMAGE,t=ai.DEFAULT_MAPPING,i=er,a=er,s=Zn,l=gs,c=Ua,d=tr,p=ai.DEFAULT_ANISOTROPY,g=Tl){super(),this.isTexture=!0,Object.defineProperty(this,"id",{value:NU++}),this.uuid=Wr(),this.name="",this.source=new Fc(e),this.mipmaps=[],this.mapping=t,this.channel=0,this.wrapS=i,this.wrapT=a,this.magFilter=s,this.minFilter=l,this.anisotropy=p,this.format=c,this.internalFormat=null,this.type=d,this.offset=new He(0,0),this.repeat=new He(1,1),this.center=new He(0,0),this.rotation=0,this.matrixAutoUpdate=!0,this.matrix=new Zt,this.generateMipmaps=!0,this.premultiplyAlpha=!1,this.flipY=!0,this.unpackAlignment=4,this.colorSpace=g,this.userData={},this.updateRanges=[],this.version=0,this.onUpdate=null,this.renderTarget=null,this.isRenderTargetTexture=!1,this.isArrayTexture=!!(e&&e.depth&&e.depth>1),this.pmremVersion=0}get width(){return this.source.getSize(lA).x}get height(){return this.source.getSize(lA).y}get depth(){return this.source.getSize(lA).z}get image(){return this.source.data}set image(e=null){this.source.data=e}updateMatrix(){this.matrix.setUvTransform(this.offset.x,this.offset.y,this.repeat.x,this.repeat.y,this.rotation,this.center.x,this.center.y)}addUpdateRange(e,t){this.updateRanges.push({start:e,count:t})}clearUpdateRanges(){this.updateRanges.length=0}clone(){return new this.constructor().copy(this)}copy(e){return this.name=e.name,this.source=e.source,this.mipmaps=e.mipmaps.slice(0),this.mapping=e.mapping,this.channel=e.channel,this.wrapS=e.wrapS,this.wrapT=e.wrapT,this.magFilter=e.magFilter,this.minFilter=e.minFilter,this.anisotropy=e.anisotropy,this.format=e.format,this.internalFormat=e.internalFormat,this.type=e.type,this.offset.copy(e.offset),this.repeat.copy(e.repeat),this.center.copy(e.center),this.rotation=e.rotation,this.matrixAutoUpdate=e.matrixAutoUpdate,this.matrix.copy(e.matrix),this.generateMipmaps=e.generateMipmaps,this.premultiplyAlpha=e.premultiplyAlpha,this.flipY=e.flipY,this.unpackAlignment=e.unpackAlignment,this.colorSpace=e.colorSpace,this.renderTarget=e.renderTarget,this.isRenderTargetTexture=e.isRenderTargetTexture,this.isArrayTexture=e.isArrayTexture,this.userData=JSON.parse(JSON.stringify(e.userData)),this.needsUpdate=!0,this}setValues(e){for(const t in e){const i=e[t];if(i===void 0){ct(`Texture.setValues(): parameter '${t}' has value of undefined.`);continue}const a=this[t];if(a===void 0){ct(`Texture.setValues(): property '${t}' does not exist.`);continue}a&&i&&a.isVector2&&i.isVector2||a&&i&&a.isVector3&&i.isVector3||a&&i&&a.isMatrix3&&i.isMatrix3?a.copy(i):this[t]=i}}toJSON(e){const t=e===void 0||typeof e=="string";if(!t&&e.textures[this.uuid]!==void 0)return e.textures[this.uuid];const i={metadata:{version:4.7,type:"Texture",generator:"Texture.toJSON"},uuid:this.uuid,name:this.name,image:this.source.toJSON(e).uuid,mapping:this.mapping,channel:this.channel,repeat:[this.repeat.x,this.repeat.y],offset:[this.offset.x,this.offset.y],center:[this.center.x,this.center.y],rotation:this.rotation,wrap:[this.wrapS,this.wrapT],format:this.format,internalFormat:this.internalFormat,type:this.type,colorSpace:this.colorSpace,minFilter:this.minFilter,magFilter:this.magFilter,anisotropy:this.anisotropy,flipY:this.flipY,generateMipmaps:this.generateMipmaps,premultiplyAlpha:this.premultiplyAlpha,unpackAlignment:this.unpackAlignment};return Object.keys(this.userData).length>0&&(i.userData=this.userData),t||(e.textures[this.uuid]=i),i}dispose(){this.dispatchEvent({type:"dispose"})}transformUv(e){if(this.mapping!==rv)return e;if(e.applyMatrix3(this.matrix),e.x<0||e.x>1)switch(this.wrapS){case Nc:e.x=e.x-Math.floor(e.x);break;case er:e.x=e.x<0?0:1;break;case Bh:Math.abs(Math.floor(e.x)%2)===1?e.x=Math.ceil(e.x)-e.x:e.x=e.x-Math.floor(e.x);break}if(e.y<0||e.y>1)switch(this.wrapT){case Nc:e.y=e.y-Math.floor(e.y);break;case er:e.y=e.y<0?0:1;break;case Bh:Math.abs(Math.floor(e.y)%2)===1?e.y=Math.ceil(e.y)-e.y:e.y=e.y-Math.floor(e.y);break}return this.flipY&&(e.y=1-e.y),e}set needsUpdate(e){e===!0&&(this.version++,this.source.needsUpdate=!0)}set needsPMREMUpdate(e){e===!0&&this.pmremVersion++}}ai.DEFAULT_IMAGE=null,ai.DEFAULT_MAPPING=rv,ai.DEFAULT_ANISOTROPY=1;class Fn{constructor(e=0,t=0,i=0,a=1){Fn.prototype.isVector4=!0,this.x=e,this.y=t,this.z=i,this.w=a}get width(){return this.z}set width(e){this.z=e}get height(){return this.w}set height(e){this.w=e}set(e,t,i,a){return this.x=e,this.y=t,this.z=i,this.w=a,this}setScalar(e){return this.x=e,this.y=e,this.z=e,this.w=e,this}setX(e){return this.x=e,this}setY(e){return this.y=e,this}setZ(e){return this.z=e,this}setW(e){return this.w=e,this}setComponent(e,t){switch(e){case 0:this.x=t;break;case 1:this.y=t;break;case 2:this.z=t;break;case 3:this.w=t;break;default:throw new Error("index is out of range: "+e)}return this}getComponent(e){switch(e){case 0:return this.x;case 1:return this.y;case 2:return this.z;case 3:return this.w;default:throw new Error("index is out of range: "+e)}}clone(){return new this.constructor(this.x,this.y,this.z,this.w)}copy(e){return this.x=e.x,this.y=e.y,this.z=e.z,this.w=e.w!==void 0?e.w:1,this}add(e){return this.x+=e.x,this.y+=e.y,this.z+=e.z,this.w+=e.w,this}addScalar(e){return this.x+=e,this.y+=e,this.z+=e,this.w+=e,this}addVectors(e,t){return this.x=e.x+t.x,this.y=e.y+t.y,this.z=e.z+t.z,this.w=e.w+t.w,this}addScaledVector(e,t){return this.x+=e.x*t,this.y+=e.y*t,this.z+=e.z*t,this.w+=e.w*t,this}sub(e){return this.x-=e.x,this.y-=e.y,this.z-=e.z,this.w-=e.w,this}subScalar(e){return this.x-=e,this.y-=e,this.z-=e,this.w-=e,this}subVectors(e,t){return this.x=e.x-t.x,this.y=e.y-t.y,this.z=e.z-t.z,this.w=e.w-t.w,this}multiply(e){return this.x*=e.x,this.y*=e.y,this.z*=e.z,this.w*=e.w,this}multiplyScalar(e){return this.x*=e,this.y*=e,this.z*=e,this.w*=e,this}applyMatrix4(e){const t=this.x,i=this.y,a=this.z,s=this.w,l=e.elements;return this.x=l[0]*t+l[4]*i+l[8]*a+l[12]*s,this.y=l[1]*t+l[5]*i+l[9]*a+l[13]*s,this.z=l[2]*t+l[6]*i+l[10]*a+l[14]*s,this.w=l[3]*t+l[7]*i+l[11]*a+l[15]*s,this}divide(e){return this.x/=e.x,this.y/=e.y,this.z/=e.z,this.w/=e.w,this}divideScalar(e){return this.multiplyScalar(1/e)}setAxisAngleFromQuaternion(e){this.w=2*Math.acos(e.w);const t=Math.sqrt(1-e.w*e.w);return t<1e-4?(this.x=1,this.y=0,this.z=0):(this.x=e.x/t,this.y=e.y/t,this.z=e.z/t),this}setAxisAngleFromRotationMatrix(e){let t,i,a,s;const d=e.elements,p=d[0],g=d[4],v=d[8],_=d[1],x=d[5],S=d[9],C=d[2],T=d[6],M=d[10];if(Math.abs(g-_)<.01&&Math.abs(v-C)<.01&&Math.abs(S-T)<.01){if(Math.abs(g+_)<.1&&Math.abs(v+C)<.1&&Math.abs(S+T)<.1&&Math.abs(p+x+M-3)<.1)return this.set(1,0,0,0),this;t=Math.PI;const B=(p+1)/2,D=(x+1)/2,P=(M+1)/2,U=(g+_)/4,z=(v+C)/4,j=(S+T)/4;return B>D&&B>P?B<.01?(i=0,a=.707106781,s=.707106781):(i=Math.sqrt(B),a=U/i,s=z/i):D>P?D<.01?(i=.707106781,a=0,s=.707106781):(a=Math.sqrt(D),i=U/a,s=j/a):P<.01?(i=.707106781,a=.707106781,s=0):(s=Math.sqrt(P),i=z/s,a=j/s),this.set(i,a,s,t),this}let w=Math.sqrt((T-S)*(T-S)+(v-C)*(v-C)+(_-g)*(_-g));return Math.abs(w)<.001&&(w=1),this.x=(T-S)/w,this.y=(v-C)/w,this.z=(_-g)/w,this.w=Math.acos((p+x+M-1)/2),this}setFromMatrixPosition(e){const t=e.elements;return this.x=t[12],this.y=t[13],this.z=t[14],this.w=t[15],this}min(e){return this.x=Math.min(this.x,e.x),this.y=Math.min(this.y,e.y),this.z=Math.min(this.z,e.z),this.w=Math.min(this.w,e.w),this}max(e){return this.x=Math.max(this.x,e.x),this.y=Math.max(this.y,e.y),this.z=Math.max(this.z,e.z),this.w=Math.max(this.w,e.w),this}clamp(e,t){return this.x=jt(this.x,e.x,t.x),this.y=jt(this.y,e.y,t.y),this.z=jt(this.z,e.z,t.z),this.w=jt(this.w,e.w,t.w),this}clampScalar(e,t){return this.x=jt(this.x,e,t),this.y=jt(this.y,e,t),this.z=jt(this.z,e,t),this.w=jt(this.w,e,t),this}clampLength(e,t){const i=this.length();return this.divideScalar(i||1).multiplyScalar(jt(i,e,t))}floor(){return this.x=Math.floor(this.x),this.y=Math.floor(this.y),this.z=Math.floor(this.z),this.w=Math.floor(this.w),this}ceil(){return this.x=Math.ceil(this.x),this.y=Math.ceil(this.y),this.z=Math.ceil(this.z),this.w=Math.ceil(this.w),this}round(){return this.x=Math.round(this.x),this.y=Math.round(this.y),this.z=Math.round(this.z),this.w=Math.round(this.w),this}roundToZero(){return this.x=Math.trunc(this.x),this.y=Math.trunc(this.y),this.z=Math.trunc(this.z),this.w=Math.trunc(this.w),this}negate(){return this.x=-this.x,this.y=-this.y,this.z=-this.z,this.w=-this.w,this}dot(e){return this.x*e.x+this.y*e.y+this.z*e.z+this.w*e.w}lengthSq(){return this.x*this.x+this.y*this.y+this.z*this.z+this.w*this.w}length(){return Math.sqrt(this.x*this.x+this.y*this.y+this.z*this.z+this.w*this.w)}manhattanLength(){return Math.abs(this.x)+Math.abs(this.y)+Math.abs(this.z)+Math.abs(this.w)}normalize(){return this.divideScalar(this.length()||1)}setLength(e){return this.normalize().multiplyScalar(e)}lerp(e,t){return this.x+=(e.x-this.x)*t,this.y+=(e.y-this.y)*t,this.z+=(e.z-this.z)*t,this.w+=(e.w-this.w)*t,this}lerpVectors(e,t,i){return this.x=e.x+(t.x-e.x)*i,this.y=e.y+(t.y-e.y)*i,this.z=e.z+(t.z-e.z)*i,this.w=e.w+(t.w-e.w)*i,this}equals(e){return e.x===this.x&&e.y===this.y&&e.z===this.z&&e.w===this.w}fromArray(e,t=0){return this.x=e[t],this.y=e[t+1],this.z=e[t+2],this.w=e[t+3],this}toArray(e=[],t=0){return e[t]=this.x,e[t+1]=this.y,e[t+2]=this.z,e[t+3]=this.w,e}fromBufferAttribute(e,t){return this.x=e.getX(t),this.y=e.getY(t),this.z=e.getZ(t),this.w=e.getW(t),this}random(){return this.x=Math.random(),this.y=Math.random(),this.z=Math.random(),this.w=Math.random(),this}*[Symbol.iterator](){yield this.x,yield this.y,yield this.z,yield this.w}}class cA extends Lo{constructor(e=1,t=1,i={}){super(),i=Object.assign({generateMipmaps:!1,internalFormat:null,minFilter:Zn,depthBuffer:!0,stencilBuffer:!1,resolveDepthBuffer:!0,resolveStencilBuffer:!0,depthTexture:null,samples:0,count:1,depth:1,multiview:!1},i),this.isRenderTarget=!0,this.width=e,this.height=t,this.depth=i.depth,this.scissor=new Fn(0,0,e,t),this.scissorTest=!1,this.viewport=new Fn(0,0,e,t);const a={width:e,height:t,depth:i.depth},s=new ai(a);this.textures=[];const l=i.count;for(let c=0;c<l;c++)this.textures[c]=s.clone(),this.textures[c].isRenderTargetTexture=!0,this.textures[c].renderTarget=this;this._setTextureOptions(i),this.depthBuffer=i.depthBuffer,this.stencilBuffer=i.stencilBuffer,this.resolveDepthBuffer=i.resolveDepthBuffer,this.resolveStencilBuffer=i.resolveStencilBuffer,this._depthTexture=null,this.depthTexture=i.depthTexture,this.samples=i.samples,this.multiview=i.multiview}_setTextureOptions(e={}){const t={minFilter:Zn,generateMipmaps:!1,flipY:!1,internalFormat:null};e.mapping!==void 0&&(t.mapping=e.mapping),e.wrapS!==void 0&&(t.wrapS=e.wrapS),e.wrapT!==void 0&&(t.wrapT=e.wrapT),e.wrapR!==void 0&&(t.wrapR=e.wrapR),e.magFilter!==void 0&&(t.magFilter=e.magFilter),e.minFilter!==void 0&&(t.minFilter=e.minFilter),e.format!==void 0&&(t.format=e.format),e.type!==void 0&&(t.type=e.type),e.anisotropy!==void 0&&(t.anisotropy=e.anisotropy),e.colorSpace!==void 0&&(t.colorSpace=e.colorSpace),e.flipY!==void 0&&(t.flipY=e.flipY),e.generateMipmaps!==void 0&&(t.generateMipmaps=e.generateMipmaps),e.internalFormat!==void 0&&(t.internalFormat=e.internalFormat);for(let i=0;i<this.textures.length;i++)this.textures[i].setValues(t)}get texture(){return this.textures[0]}set texture(e){this.textures[0]=e}set depthTexture(e){this._depthTexture!==null&&(this._depthTexture.renderTarget=null),e!==null&&(e.renderTarget=this),this._depthTexture=e}get depthTexture(){return this._depthTexture}setSize(e,t,i=1){if(this.width!==e||this.height!==t||this.depth!==i){this.width=e,this.height=t,this.depth=i;for(let a=0,s=this.textures.length;a<s;a++)this.textures[a].image.width=e,this.textures[a].image.height=t,this.textures[a].image.depth=i,this.textures[a].isData3DTexture!==!0&&(this.textures[a].isArrayTexture=this.textures[a].image.depth>1);this.dispose()}this.viewport.set(0,0,e,t),this.scissor.set(0,0,e,t)}clone(){return new this.constructor().copy(this)}copy(e){this.width=e.width,this.height=e.height,this.depth=e.depth,this.scissor.copy(e.scissor),this.scissorTest=e.scissorTest,this.viewport.copy(e.viewport),this.textures.length=0;for(let t=0,i=e.textures.length;t<i;t++){this.textures[t]=e.textures[t].clone(),this.textures[t].isRenderTargetTexture=!0,this.textures[t].renderTarget=this;const a=Object.assign({},e.textures[t].image);this.textures[t].source=new Fc(a)}return this.depthBuffer=e.depthBuffer,this.stencilBuffer=e.stencilBuffer,this.resolveDepthBuffer=e.resolveDepthBuffer,this.resolveStencilBuffer=e.resolveStencilBuffer,e.depthTexture!==null&&(this.depthTexture=e.depthTexture.clone()),this.samples=e.samples,this}dispose(){this.dispatchEvent({type:"dispose"})}}class Jr extends cA{constructor(e=1,t=1,i={}){super(e,t,i),this.isWebGLRenderTarget=!0}}class Kv extends ai{constructor(e=null,t=1,i=1,a=1){super(null),this.isDataArrayTexture=!0,this.image={data:e,width:t,height:i,depth:a},this.magFilter=Ei,this.minFilter=Ei,this.wrapR=er,this.generateMipmaps=!1,this.flipY=!1,this.unpackAlignment=1,this.layerUpdates=new Set}addLayerUpdate(e){this.layerUpdates.add(e)}clearLayerUpdates(){this.layerUpdates.clear()}}class UU extends Jr{constructor(e=1,t=1,i=1,a={}){super(e,t,a),this.isWebGLArrayRenderTarget=!0,this.depth=i,this.texture=new Kv(null,e,t,i),this._setTextureOptions(a),this.texture.isRenderTargetTexture=!0}}class Qv extends ai{constructor(e=null,t=1,i=1,a=1){super(null),this.isData3DTexture=!0,this.image={data:e,width:t,height:i,depth:a},this.magFilter=Ei,this.minFilter=Ei,this.wrapR=er,this.generateMipmaps=!1,this.flipY=!1,this.unpackAlignment=1}}class LU extends Jr{constructor(e=1,t=1,i=1,a={}){super(e,t,a),this.isWebGL3DRenderTarget=!0,this.depth=i,this.texture=new Qv(null,e,t,i),this._setTextureOptions(a),this.texture.isRenderTargetTexture=!0}}class Sa{constructor(e=new K(1/0,1/0,1/0),t=new K(-1/0,-1/0,-1/0)){this.isBox3=!0,this.min=e,this.max=t}set(e,t){return this.min.copy(e),this.max.copy(t),this}setFromArray(e){this.makeEmpty();for(let t=0,i=e.length;t<i;t+=3)this.expandByPoint(Ws.fromArray(e,t));return this}setFromBufferAttribute(e){this.makeEmpty();for(let t=0,i=e.count;t<i;t++)this.expandByPoint(Ws.fromBufferAttribute(e,t));return this}setFromPoints(e){this.makeEmpty();for(let t=0,i=e.length;t<i;t++)this.expandByPoint(e[t]);return this}setFromCenterAndSize(e,t){const i=Ws.copy(t).multiplyScalar(.5);return this.min.copy(e).sub(i),this.max.copy(e).add(i),this}setFromObject(e,t=!1){return this.makeEmpty(),this.expandByObject(e,t)}clone(){return new this.constructor().copy(this)}copy(e){return this.min.copy(e.min),this.max.copy(e.max),this}makeEmpty(){return this.min.x=this.min.y=this.min.z=1/0,this.max.x=this.max.y=this.max.z=-1/0,this}isEmpty(){return this.max.x<this.min.x||this.max.y<this.min.y||this.max.z<this.min.z}getCenter(e){return this.isEmpty()?e.set(0,0,0):e.addVectors(this.min,this.max).multiplyScalar(.5)}getSize(e){return this.isEmpty()?e.set(0,0,0):e.subVectors(this.max,this.min)}expandByPoint(e){return this.min.min(e),this.max.max(e),this}expandByVector(e){return this.min.sub(e),this.max.add(e),this}expandByScalar(e){return this.min.addScalar(-e),this.max.addScalar(e),this}expandByObject(e,t=!1){e.updateWorldMatrix(!1,!1);const i=e.geometry;if(i!==void 0){const s=i.getAttribute("position");if(t===!0&&s!==void 0&&e.isInstancedMesh!==!0)for(let l=0,c=s.count;l<c;l++)e.isMesh===!0?e.getVertexPosition(l,Ws):Ws.fromBufferAttribute(s,l),Ws.applyMatrix4(e.matrixWorld),this.expandByPoint(Ws);else e.boundingBox!==void 0?(e.boundingBox===null&&e.computeBoundingBox(),Zv.copy(e.boundingBox)):(i.boundingBox===null&&i.computeBoundingBox(),Zv.copy(i.boundingBox)),Zv.applyMatrix4(e.matrixWorld),this.union(Zv)}const a=e.children;for(let s=0,l=a.length;s<l;s++)this.expandByObject(a[s],t);return this}containsPoint(e){return e.x>=this.min.x&&e.x<=this.max.x&&e.y>=this.min.y&&e.y<=this.max.y&&e.z>=this.min.z&&e.z<=this.max.z}containsBox(e){return this.min.x<=e.min.x&&e.max.x<=this.max.x&&this.min.y<=e.min.y&&e.max.y<=this.max.y&&this.min.z<=e.min.z&&e.max.z<=this.max.z}getParameter(e,t){return t.set((e.x-this.min.x)/(this.max.x-this.min.x),(e.y-this.min.y)/(this.max.y-this.min.y),(e.z-this.min.z)/(this.max.z-this.min.z))}intersectsBox(e){return e.max.x>=this.min.x&&e.min.x<=this.max.x&&e.max.y>=this.min.y&&e.min.y<=this.max.y&&e.max.z>=this.min.z&&e.min.z<=this.max.z}intersectsSphere(e){return this.clampPoint(e.center,Ws),Ws.distanceToSquared(e.center)<=e.radius*e.radius}intersectsPlane(e){let t,i;return e.normal.x>0?(t=e.normal.x*this.min.x,i=e.normal.x*this.max.x):(t=e.normal.x*this.max.x,i=e.normal.x*this.min.x),e.normal.y>0?(t+=e.normal.y*this.min.y,i+=e.normal.y*this.max.y):(t+=e.normal.y*this.max.y,i+=e.normal.y*this.min.y),e.normal.z>0?(t+=e.normal.z*this.min.z,i+=e.normal.z*this.max.z):(t+=e.normal.z*this.max.z,i+=e.normal.z*this.min.z),t<=-e.constant&&i>=-e.constant}intersectsTriangle(e){if(this.isEmpty())return!1;this.getCenter(pm),$v.subVectors(this.max,pm),Vh.subVectors(e.a,pm),kh.subVectors(e.b,pm),Xh.subVectors(e.c,pm),zc.subVectors(kh,Vh),Hc.subVectors(Xh,kh),ef.subVectors(Vh,Xh);let t=[0,-zc.z,zc.y,0,-Hc.z,Hc.y,0,-ef.z,ef.y,zc.z,0,-zc.x,Hc.z,0,-Hc.x,ef.z,0,-ef.x,-zc.y,zc.x,0,-Hc.y,Hc.x,0,-ef.y,ef.x,0];return!uA(t,Vh,kh,Xh,$v)||(t=[1,0,0,0,1,0,0,0,1],!uA(t,Vh,kh,Xh,$v))?!1:(ey.crossVectors(zc,Hc),t=[ey.x,ey.y,ey.z],uA(t,Vh,kh,Xh,$v))}clampPoint(e,t){return t.copy(e).clamp(this.min,this.max)}distanceToPoint(e){return this.clampPoint(e,Ws).distanceTo(e)}getBoundingSphere(e){return this.isEmpty()?e.makeEmpty():(this.getCenter(e.center),e.radius=this.getSize(Ws).length()*.5),e}intersect(e){return this.min.max(e.min),this.max.min(e.max),this.isEmpty()&&this.makeEmpty(),this}union(e){return this.min.min(e.min),this.max.max(e.max),this}applyMatrix4(e){return this.isEmpty()?this:(wl[0].set(this.min.x,this.min.y,this.min.z).applyMatrix4(e),wl[1].set(this.min.x,this.min.y,this.max.z).applyMatrix4(e),wl[2].set(this.min.x,this.max.y,this.min.z).applyMatrix4(e),wl[3].set(this.min.x,this.max.y,this.max.z).applyMatrix4(e),wl[4].set(this.max.x,this.min.y,this.min.z).applyMatrix4(e),wl[5].set(this.max.x,this.min.y,this.max.z).applyMatrix4(e),wl[6].set(this.max.x,this.max.y,this.min.z).applyMatrix4(e),wl[7].set(this.max.x,this.max.y,this.max.z).applyMatrix4(e),this.setFromPoints(wl),this)}translate(e){return this.min.add(e),this.max.add(e),this}equals(e){return e.min.equals(this.min)&&e.max.equals(this.max)}toJSON(){return{min:this.min.toArray(),max:this.max.toArray()}}fromJSON(e){return this.min.fromArray(e.min),this.max.fromArray(e.max),this}}const wl=[new K,new K,new K,new K,new K,new K,new K,new K],Ws=new K,Zv=new Sa,Vh=new K,kh=new K,Xh=new K,zc=new K,Hc=new K,ef=new K,pm=new K,$v=new K,ey=new K,tf=new K;function uA(n,e,t,i,a){for(let s=0,l=n.length-3;s<=l;s+=3){tf.fromArray(n,s);const c=a.x*Math.abs(tf.x)+a.y*Math.abs(tf.y)+a.z*Math.abs(tf.z),d=e.dot(tf),p=t.dot(tf),g=i.dot(tf);if(Math.max(-Math.max(d,p,g),Math.min(d,p,g))>c)return!1}return!0}const IU=new Sa,mm=new K,fA=new K;class ua{constructor(e=new K,t=-1){this.isSphere=!0,this.center=e,this.radius=t}set(e,t){return this.center.copy(e),this.radius=t,this}setFromPoints(e,t){const i=this.center;t!==void 0?i.copy(t):IU.setFromPoints(e).getCenter(i);let a=0;for(let s=0,l=e.length;s<l;s++)a=Math.max(a,i.distanceToSquared(e[s]));return this.radius=Math.sqrt(a),this}copy(e){return this.center.copy(e.center),this.radius=e.radius,this}isEmpty(){return this.radius<0}makeEmpty(){return this.center.set(0,0,0),this.radius=-1,this}containsPoint(e){return e.distanceToSquared(this.center)<=this.radius*this.radius}distanceToPoint(e){return e.distanceTo(this.center)-this.radius}intersectsSphere(e){const t=this.radius+e.radius;return e.center.distanceToSquared(this.center)<=t*t}intersectsBox(e){return e.intersectsSphere(this)}intersectsPlane(e){return Math.abs(e.distanceToPoint(this.center))<=this.radius}clampPoint(e,t){const i=this.center.distanceToSquared(e);return t.copy(e),i>this.radius*this.radius&&(t.sub(this.center).normalize(),t.multiplyScalar(this.radius).add(this.center)),t}getBoundingBox(e){return this.isEmpty()?(e.makeEmpty(),e):(e.set(this.center,this.center),e.expandByScalar(this.radius),e)}applyMatrix4(e){return this.center.applyMatrix4(e),this.radius=this.radius*e.getMaxScaleOnAxis(),this}translate(e){return this.center.add(e),this}expandByPoint(e){if(this.isEmpty())return this.center.copy(e),this.radius=0,this;mm.subVectors(e,this.center);const t=mm.lengthSq();if(t>this.radius*this.radius){const i=Math.sqrt(t),a=(i-this.radius)*.5;this.center.addScaledVector(mm,a/i),this.radius+=a}return this}union(e){return e.isEmpty()?this:this.isEmpty()?(this.copy(e),this):(this.center.equals(e.center)===!0?this.radius=Math.max(this.radius,e.radius):(fA.subVectors(e.center,this.center).setLength(e.radius),this.expandByPoint(mm.copy(e.center).add(fA)),this.expandByPoint(mm.copy(e.center).sub(fA))),this)}equals(e){return e.center.equals(this.center)&&e.radius===this.radius}clone(){return new this.constructor().copy(this)}toJSON(){return{radius:this.radius,center:this.center.toArray()}}fromJSON(e){return this.radius=e.radius,this.center.fromArray(e.center),this}}const Bl=new K,hA=new K,ty=new K,Gc=new K,dA=new K,ny=new K,pA=new K;class jh{constructor(e=new K,t=new K(0,0,-1)){this.origin=e,this.direction=t}set(e,t){return this.origin.copy(e),this.direction.copy(t),this}copy(e){return this.origin.copy(e.origin),this.direction.copy(e.direction),this}at(e,t){return t.copy(this.origin).addScaledVector(this.direction,e)}lookAt(e){return this.direction.copy(e).sub(this.origin).normalize(),this}recast(e){return this.origin.copy(this.at(e,Bl)),this}closestPointToPoint(e,t){t.subVectors(e,this.origin);const i=t.dot(this.direction);return i<0?t.copy(this.origin):t.copy(this.origin).addScaledVector(this.direction,i)}distanceToPoint(e){return Math.sqrt(this.distanceSqToPoint(e))}distanceSqToPoint(e){const t=Bl.subVectors(e,this.origin).dot(this.direction);return t<0?this.origin.distanceToSquared(e):(Bl.copy(this.origin).addScaledVector(this.direction,t),Bl.distanceToSquared(e))}distanceSqToSegment(e,t,i,a){hA.copy(e).add(t).multiplyScalar(.5),ty.copy(t).sub(e).normalize(),Gc.copy(this.origin).sub(hA);const s=e.distanceTo(t)*.5,l=-this.direction.dot(ty),c=Gc.dot(this.direction),d=-Gc.dot(ty),p=Gc.lengthSq(),g=Math.abs(1-l*l);let v,_,x,S;if(g>0)if(v=l*d-c,_=l*c-d,S=s*g,v>=0)if(_>=-S)if(_<=S){const C=1/g;v*=C,_*=C,x=v*(v+l*_+2*c)+_*(l*v+_+2*d)+p}else _=s,v=Math.max(0,-(l*_+c)),x=-v*v+_*(_+2*d)+p;else _=-s,v=Math.max(0,-(l*_+c)),x=-v*v+_*(_+2*d)+p;else _<=-S?(v=Math.max(0,-(-l*s+c)),_=v>0?-s:Math.min(Math.max(-s,-d),s),x=-v*v+_*(_+2*d)+p):_<=S?(v=0,_=Math.min(Math.max(-s,-d),s),x=_*(_+2*d)+p):(v=Math.max(0,-(l*s+c)),_=v>0?s:Math.min(Math.max(-s,-d),s),x=-v*v+_*(_+2*d)+p);else _=l>0?-s:s,v=Math.max(0,-(l*_+c)),x=-v*v+_*(_+2*d)+p;return i&&i.copy(this.origin).addScaledVector(this.direction,v),a&&a.copy(hA).addScaledVector(ty,_),x}intersectSphere(e,t){Bl.subVectors(e.center,this.origin);const i=Bl.dot(this.direction),a=Bl.dot(Bl)-i*i,s=e.radius*e.radius;if(a>s)return null;const l=Math.sqrt(s-a),c=i-l,d=i+l;return d<0?null:c<0?this.at(d,t):this.at(c,t)}intersectsSphere(e){return e.radius<0?!1:this.distanceSqToPoint(e.center)<=e.radius*e.radius}distanceToPlane(e){const t=e.normal.dot(this.direction);if(t===0)return e.distanceToPoint(this.origin)===0?0:null;const i=-(this.origin.dot(e.normal)+e.constant)/t;return i>=0?i:null}intersectPlane(e,t){const i=this.distanceToPlane(e);return i===null?null:this.at(i,t)}intersectsPlane(e){const t=e.distanceToPoint(this.origin);return t===0||e.normal.dot(this.direction)*t<0}intersectBox(e,t){let i,a,s,l,c,d;const p=1/this.direction.x,g=1/this.direction.y,v=1/this.direction.z,_=this.origin;return p>=0?(i=(e.min.x-_.x)*p,a=(e.max.x-_.x)*p):(i=(e.max.x-_.x)*p,a=(e.min.x-_.x)*p),g>=0?(s=(e.min.y-_.y)*g,l=(e.max.y-_.y)*g):(s=(e.max.y-_.y)*g,l=(e.min.y-_.y)*g),i>l||s>a||((s>i||isNaN(i))&&(i=s),(l<a||isNaN(a))&&(a=l),v>=0?(c=(e.min.z-_.z)*v,d=(e.max.z-_.z)*v):(c=(e.max.z-_.z)*v,d=(e.min.z-_.z)*v),i>d||c>a)||((c>i||i!==i)&&(i=c),(d<a||a!==a)&&(a=d),a<0)?null:this.at(i>=0?i:a,t)}intersectsBox(e){return this.intersectBox(e,Bl)!==null}intersectTriangle(e,t,i,a,s){dA.subVectors(t,e),ny.subVectors(i,e),pA.crossVectors(dA,ny);let l=this.direction.dot(pA),c;if(l>0){if(a)return null;c=1}else if(l<0)c=-1,l=-l;else return null;Gc.subVectors(this.origin,e);const d=c*this.direction.dot(ny.crossVectors(Gc,ny));if(d<0)return null;const p=c*this.direction.dot(dA.cross(Gc));if(p<0||d+p>l)return null;const g=-c*Gc.dot(pA);return g<0?null:this.at(g/l,s)}applyMatrix4(e){return this.origin.applyMatrix4(e),this.direction.transformDirection(e),this}equals(e){return e.origin.equals(this.origin)&&e.direction.equals(this.direction)}clone(){return new this.constructor().copy(this)}}class It{constructor(e,t,i,a,s,l,c,d,p,g,v,_,x,S,C,T){It.prototype.isMatrix4=!0,this.elements=[1,0,0,0,0,1,0,0,0,0,1,0,0,0,0,1],e!==void 0&&this.set(e,t,i,a,s,l,c,d,p,g,v,_,x,S,C,T)}set(e,t,i,a,s,l,c,d,p,g,v,_,x,S,C,T){const M=this.elements;return M[0]=e,M[4]=t,M[8]=i,M[12]=a,M[1]=s,M[5]=l,M[9]=c,M[13]=d,M[2]=p,M[6]=g,M[10]=v,M[14]=_,M[3]=x,M[7]=S,M[11]=C,M[15]=T,this}identity(){return this.set(1,0,0,0,0,1,0,0,0,0,1,0,0,0,0,1),this}clone(){return new It().fromArray(this.elements)}copy(e){const t=this.elements,i=e.elements;return t[0]=i[0],t[1]=i[1],t[2]=i[2],t[3]=i[3],t[4]=i[4],t[5]=i[5],t[6]=i[6],t[7]=i[7],t[8]=i[8],t[9]=i[9],t[10]=i[10],t[11]=i[11],t[12]=i[12],t[13]=i[13],t[14]=i[14],t[15]=i[15],this}copyPosition(e){const t=this.elements,i=e.elements;return t[12]=i[12],t[13]=i[13],t[14]=i[14],this}setFromMatrix3(e){const t=e.elements;return this.set(t[0],t[3],t[6],0,t[1],t[4],t[7],0,t[2],t[5],t[8],0,0,0,0,1),this}extractBasis(e,t,i){return this.determinant()===0?(e.set(1,0,0),t.set(0,1,0),i.set(0,0,1),this):(e.setFromMatrixColumn(this,0),t.setFromMatrixColumn(this,1),i.setFromMatrixColumn(this,2),this)}makeBasis(e,t,i){return this.set(e.x,t.x,i.x,0,e.y,t.y,i.y,0,e.z,t.z,i.z,0,0,0,0,1),this}extractRotation(e){if(e.determinant()===0)return this.identity();const t=this.elements,i=e.elements,a=1/Yh.setFromMatrixColumn(e,0).length(),s=1/Yh.setFromMatrixColumn(e,1).length(),l=1/Yh.setFromMatrixColumn(e,2).length();return t[0]=i[0]*a,t[1]=i[1]*a,t[2]=i[2]*a,t[3]=0,t[4]=i[4]*s,t[5]=i[5]*s,t[6]=i[6]*s,t[7]=0,t[8]=i[8]*l,t[9]=i[9]*l,t[10]=i[10]*l,t[11]=0,t[12]=0,t[13]=0,t[14]=0,t[15]=1,this}makeRotationFromEuler(e){const t=this.elements,i=e.x,a=e.y,s=e.z,l=Math.cos(i),c=Math.sin(i),d=Math.cos(a),p=Math.sin(a),g=Math.cos(s),v=Math.sin(s);if(e.order==="XYZ"){const _=l*g,x=l*v,S=c*g,C=c*v;t[0]=d*g,t[4]=-d*v,t[8]=p,t[1]=x+S*p,t[5]=_-C*p,t[9]=-c*d,t[2]=C-_*p,t[6]=S+x*p,t[10]=l*d}else if(e.order==="YXZ"){const _=d*g,x=d*v,S=p*g,C=p*v;t[0]=_+C*c,t[4]=S*c-x,t[8]=l*p,t[1]=l*v,t[5]=l*g,t[9]=-c,t[2]=x*c-S,t[6]=C+_*c,t[10]=l*d}else if(e.order==="ZXY"){const _=d*g,x=d*v,S=p*g,C=p*v;t[0]=_-C*c,t[4]=-l*v,t[8]=S+x*c,t[1]=x+S*c,t[5]=l*g,t[9]=C-_*c,t[2]=-l*p,t[6]=c,t[10]=l*d}else if(e.order==="ZYX"){const _=l*g,x=l*v,S=c*g,C=c*v;t[0]=d*g,t[4]=S*p-x,t[8]=_*p+C,t[1]=d*v,t[5]=C*p+_,t[9]=x*p-S,t[2]=-p,t[6]=c*d,t[10]=l*d}else if(e.order==="YZX"){const _=l*d,x=l*p,S=c*d,C=c*p;t[0]=d*g,t[4]=C-_*v,t[8]=S*v+x,t[1]=v,t[5]=l*g,t[9]=-c*g,t[2]=-p*g,t[6]=x*v+S,t[10]=_-C*v}else if(e.order==="XZY"){const _=l*d,x=l*p,S=c*d,C=c*p;t[0]=d*g,t[4]=-v,t[8]=p*g,t[1]=_*v+C,t[5]=l*g,t[9]=x*v-S,t[2]=S*v-x,t[6]=c*g,t[10]=C*v+_}return t[3]=0,t[7]=0,t[11]=0,t[12]=0,t[13]=0,t[14]=0,t[15]=1,this}makeRotationFromQuaternion(e){return this.compose(PU,e,FU)}lookAt(e,t,i){const a=this.elements;return Kr.subVectors(e,t),Kr.lengthSq()===0&&(Kr.z=1),Kr.normalize(),Vc.crossVectors(i,Kr),Vc.lengthSq()===0&&(Math.abs(i.z)===1?Kr.x+=1e-4:Kr.z+=1e-4,Kr.normalize(),Vc.crossVectors(i,Kr)),Vc.normalize(),iy.crossVectors(Kr,Vc),a[0]=Vc.x,a[4]=iy.x,a[8]=Kr.x,a[1]=Vc.y,a[5]=iy.y,a[9]=Kr.y,a[2]=Vc.z,a[6]=iy.z,a[10]=Kr.z,this}multiply(e){return this.multiplyMatrices(this,e)}premultiply(e){return this.multiplyMatrices(e,this)}multiplyMatrices(e,t){const i=e.elements,a=t.elements,s=this.elements,l=i[0],c=i[4],d=i[8],p=i[12],g=i[1],v=i[5],_=i[9],x=i[13],S=i[2],C=i[6],T=i[10],M=i[14],w=i[3],B=i[7],D=i[11],P=i[15],U=a[0],z=a[4],j=a[8],L=a[12],F=a[1],W=a[5],te=a[9],$=a[13],ae=a[2],le=a[6],G=a[10],J=a[14],Z=a[3],pe=a[7],_e=a[11],q=a[15];return s[0]=l*U+c*F+d*ae+p*Z,s[4]=l*z+c*W+d*le+p*pe,s[8]=l*j+c*te+d*G+p*_e,s[12]=l*L+c*$+d*J+p*q,s[1]=g*U+v*F+_*ae+x*Z,s[5]=g*z+v*W+_*le+x*pe,s[9]=g*j+v*te+_*G+x*_e,s[13]=g*L+v*$+_*J+x*q,s[2]=S*U+C*F+T*ae+M*Z,s[6]=S*z+C*W+T*le+M*pe,s[10]=S*j+C*te+T*G+M*_e,s[14]=S*L+C*$+T*J+M*q,s[3]=w*U+B*F+D*ae+P*Z,s[7]=w*z+B*W+D*le+P*pe,s[11]=w*j+B*te+D*G+P*_e,s[15]=w*L+B*$+D*J+P*q,this}multiplyScalar(e){const t=this.elements;return t[0]*=e,t[4]*=e,t[8]*=e,t[12]*=e,t[1]*=e,t[5]*=e,t[9]*=e,t[13]*=e,t[2]*=e,t[6]*=e,t[10]*=e,t[14]*=e,t[3]*=e,t[7]*=e,t[11]*=e,t[15]*=e,this}determinant(){const e=this.elements,t=e[0],i=e[4],a=e[8],s=e[12],l=e[1],c=e[5],d=e[9],p=e[13],g=e[2],v=e[6],_=e[10],x=e[14],S=e[3],C=e[7],T=e[11],M=e[15],w=d*x-p*_,B=c*x-p*v,D=c*_-d*v,P=l*x-p*g,U=l*_-d*g,z=l*v-c*g;return t*(C*w-T*B+M*D)-i*(S*w-T*P+M*U)+a*(S*B-C*P+M*z)-s*(S*D-C*U+T*z)}transpose(){const e=this.elements;let t;return t=e[1],e[1]=e[4],e[4]=t,t=e[2],e[2]=e[8],e[8]=t,t=e[6],e[6]=e[9],e[9]=t,t=e[3],e[3]=e[12],e[12]=t,t=e[7],e[7]=e[13],e[13]=t,t=e[11],e[11]=e[14],e[14]=t,this}setPosition(e,t,i){const a=this.elements;return e.isVector3?(a[12]=e.x,a[13]=e.y,a[14]=e.z):(a[12]=e,a[13]=t,a[14]=i),this}invert(){const e=this.elements,t=e[0],i=e[1],a=e[2],s=e[3],l=e[4],c=e[5],d=e[6],p=e[7],g=e[8],v=e[9],_=e[10],x=e[11],S=e[12],C=e[13],T=e[14],M=e[15],w=v*T*p-C*_*p+C*d*x-c*T*x-v*d*M+c*_*M,B=S*_*p-g*T*p-S*d*x+l*T*x+g*d*M-l*_*M,D=g*C*p-S*v*p+S*c*x-l*C*x-g*c*M+l*v*M,P=S*v*d-g*C*d-S*c*_+l*C*_+g*c*T-l*v*T,U=t*w+i*B+a*D+s*P;if(U===0)return this.set(0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0);const z=1/U;return e[0]=w*z,e[1]=(C*_*s-v*T*s-C*a*x+i*T*x+v*a*M-i*_*M)*z,e[2]=(c*T*s-C*d*s+C*a*p-i*T*p-c*a*M+i*d*M)*z,e[3]=(v*d*s-c*_*s-v*a*p+i*_*p+c*a*x-i*d*x)*z,e[4]=B*z,e[5]=(g*T*s-S*_*s+S*a*x-t*T*x-g*a*M+t*_*M)*z,e[6]=(S*d*s-l*T*s-S*a*p+t*T*p+l*a*M-t*d*M)*z,e[7]=(l*_*s-g*d*s+g*a*p-t*_*p-l*a*x+t*d*x)*z,e[8]=D*z,e[9]=(S*v*s-g*C*s-S*i*x+t*C*x+g*i*M-t*v*M)*z,e[10]=(l*C*s-S*c*s+S*i*p-t*C*p-l*i*M+t*c*M)*z,e[11]=(g*c*s-l*v*s-g*i*p+t*v*p+l*i*x-t*c*x)*z,e[12]=P*z,e[13]=(g*C*a-S*v*a+S*i*_-t*C*_-g*i*T+t*v*T)*z,e[14]=(S*c*a-l*C*a-S*i*d+t*C*d+l*i*T-t*c*T)*z,e[15]=(l*v*a-g*c*a+g*i*d-t*v*d-l*i*_+t*c*_)*z,this}scale(e){const t=this.elements,i=e.x,a=e.y,s=e.z;return t[0]*=i,t[4]*=a,t[8]*=s,t[1]*=i,t[5]*=a,t[9]*=s,t[2]*=i,t[6]*=a,t[10]*=s,t[3]*=i,t[7]*=a,t[11]*=s,this}getMaxScaleOnAxis(){const e=this.elements,t=e[0]*e[0]+e[1]*e[1]+e[2]*e[2],i=e[4]*e[4]+e[5]*e[5]+e[6]*e[6],a=e[8]*e[8]+e[9]*e[9]+e[10]*e[10];return Math.sqrt(Math.max(t,i,a))}makeTranslation(e,t,i){return e.isVector3?this.set(1,0,0,e.x,0,1,0,e.y,0,0,1,e.z,0,0,0,1):this.set(1,0,0,e,0,1,0,t,0,0,1,i,0,0,0,1),this}makeRotationX(e){const t=Math.cos(e),i=Math.sin(e);return this.set(1,0,0,0,0,t,-i,0,0,i,t,0,0,0,0,1),this}makeRotationY(e){const t=Math.cos(e),i=Math.sin(e);return this.set(t,0,i,0,0,1,0,0,-i,0,t,0,0,0,0,1),this}makeRotationZ(e){const t=Math.cos(e),i=Math.sin(e);return this.set(t,-i,0,0,i,t,0,0,0,0,1,0,0,0,0,1),this}makeRotationAxis(e,t){const i=Math.cos(t),a=Math.sin(t),s=1-i,l=e.x,c=e.y,d=e.z,p=s*l,g=s*c;return this.set(p*l+i,p*c-a*d,p*d+a*c,0,p*c+a*d,g*c+i,g*d-a*l,0,p*d-a*c,g*d+a*l,s*d*d+i,0,0,0,0,1),this}makeScale(e,t,i){return this.set(e,0,0,0,0,t,0,0,0,0,i,0,0,0,0,1),this}makeShear(e,t,i,a,s,l){return this.set(1,i,s,0,e,1,l,0,t,a,1,0,0,0,0,1),this}compose(e,t,i){const a=this.elements,s=t._x,l=t._y,c=t._z,d=t._w,p=s+s,g=l+l,v=c+c,_=s*p,x=s*g,S=s*v,C=l*g,T=l*v,M=c*v,w=d*p,B=d*g,D=d*v,P=i.x,U=i.y,z=i.z;return a[0]=(1-(C+M))*P,a[1]=(x+D)*P,a[2]=(S-B)*P,a[3]=0,a[4]=(x-D)*U,a[5]=(1-(_+M))*U,a[6]=(T+w)*U,a[7]=0,a[8]=(S+B)*z,a[9]=(T-w)*z,a[10]=(1-(_+C))*z,a[11]=0,a[12]=e.x,a[13]=e.y,a[14]=e.z,a[15]=1,this}decompose(e,t,i){const a=this.elements;if(e.x=a[12],e.y=a[13],e.z=a[14],this.determinant()===0)return i.set(1,1,1),t.identity(),this;let s=Yh.set(a[0],a[1],a[2]).length();const l=Yh.set(a[4],a[5],a[6]).length(),c=Yh.set(a[8],a[9],a[10]).length();this.determinant()<0&&(s=-s),Js.copy(this);const p=1/s,g=1/l,v=1/c;return Js.elements[0]*=p,Js.elements[1]*=p,Js.elements[2]*=p,Js.elements[4]*=g,Js.elements[5]*=g,Js.elements[6]*=g,Js.elements[8]*=v,Js.elements[9]*=v,Js.elements[10]*=v,t.setFromRotationMatrix(Js),i.x=s,i.y=l,i.z=c,this}makePerspective(e,t,i,a,s,l,c=qr,d=!1){const p=this.elements,g=2*s/(t-e),v=2*s/(i-a),_=(t+e)/(t-e),x=(i+a)/(i-a);let S,C;if(d)S=s/(l-s),C=l*s/(l-s);else if(c===qr)S=-(l+s)/(l-s),C=-2*l*s/(l-s);else if(c===Ih)S=-l/(l-s),C=-l*s/(l-s);else throw new Error("THREE.Matrix4.makePerspective(): Invalid coordinate system: "+c);return p[0]=g,p[4]=0,p[8]=_,p[12]=0,p[1]=0,p[5]=v,p[9]=x,p[13]=0,p[2]=0,p[6]=0,p[10]=S,p[14]=C,p[3]=0,p[7]=0,p[11]=-1,p[15]=0,this}makeOrthographic(e,t,i,a,s,l,c=qr,d=!1){const p=this.elements,g=2/(t-e),v=2/(i-a),_=-(t+e)/(t-e),x=-(i+a)/(i-a);let S,C;if(d)S=1/(l-s),C=l/(l-s);else if(c===qr)S=-2/(l-s),C=-(l+s)/(l-s);else if(c===Ih)S=-1/(l-s),C=-s/(l-s);else throw new Error("THREE.Matrix4.makeOrthographic(): Invalid coordinate system: "+c);return p[0]=g,p[4]=0,p[8]=0,p[12]=_,p[1]=0,p[5]=v,p[9]=0,p[13]=x,p[2]=0,p[6]=0,p[10]=S,p[14]=C,p[3]=0,p[7]=0,p[11]=0,p[15]=1,this}equals(e){const t=this.elements,i=e.elements;for(let a=0;a<16;a++)if(t[a]!==i[a])return!1;return!0}fromArray(e,t=0){for(let i=0;i<16;i++)this.elements[i]=e[i+t];return this}toArray(e=[],t=0){const i=this.elements;return e[t]=i[0],e[t+1]=i[1],e[t+2]=i[2],e[t+3]=i[3],e[t+4]=i[4],e[t+5]=i[5],e[t+6]=i[6],e[t+7]=i[7],e[t+8]=i[8],e[t+9]=i[9],e[t+10]=i[10],e[t+11]=i[11],e[t+12]=i[12],e[t+13]=i[13],e[t+14]=i[14],e[t+15]=i[15],e}}const Yh=new K,Js=new It,PU=new K(0,0,0),FU=new K(1,1,1),Vc=new K,iy=new K,Kr=new K,wT=new It,BT=new Ui;class wr{constructor(e=0,t=0,i=0,a=wr.DEFAULT_ORDER){this.isEuler=!0,this._x=e,this._y=t,this._z=i,this._order=a}get x(){return this._x}set x(e){this._x=e,this._onChangeCallback()}get y(){return this._y}set y(e){this._y=e,this._onChangeCallback()}get z(){return this._z}set z(e){this._z=e,this._onChangeCallback()}get order(){return this._order}set order(e){this._order=e,this._onChangeCallback()}set(e,t,i,a=this._order){return this._x=e,this._y=t,this._z=i,this._order=a,this._onChangeCallback(),this}clone(){return new this.constructor(this._x,this._y,this._z,this._order)}copy(e){return this._x=e._x,this._y=e._y,this._z=e._z,this._order=e._order,this._onChangeCallback(),this}setFromRotationMatrix(e,t=this._order,i=!0){const a=e.elements,s=a[0],l=a[4],c=a[8],d=a[1],p=a[5],g=a[9],v=a[2],_=a[6],x=a[10];switch(t){case"XYZ":this._y=Math.asin(jt(c,-1,1)),Math.abs(c)<.9999999?(this._x=Math.atan2(-g,x),this._z=Math.atan2(-l,s)):(this._x=Math.atan2(_,p),this._z=0);break;case"YXZ":this._x=Math.asin(-jt(g,-1,1)),Math.abs(g)<.9999999?(this._y=Math.atan2(c,x),this._z=Math.atan2(d,p)):(this._y=Math.atan2(-v,s),this._z=0);break;case"ZXY":this._x=Math.asin(jt(_,-1,1)),Math.abs(_)<.9999999?(this._y=Math.atan2(-v,x),this._z=Math.atan2(-l,p)):(this._y=0,this._z=Math.atan2(d,s));break;case"ZYX":this._y=Math.asin(-jt(v,-1,1)),Math.abs(v)<.9999999?(this._x=Math.atan2(_,x),this._z=Math.atan2(d,s)):(this._x=0,this._z=Math.atan2(-l,p));break;case"YZX":this._z=Math.asin(jt(d,-1,1)),Math.abs(d)<.9999999?(this._x=Math.atan2(-g,p),this._y=Math.atan2(-v,s)):(this._x=0,this._y=Math.atan2(c,x));break;case"XZY":this._z=Math.asin(-jt(l,-1,1)),Math.abs(l)<.9999999?(this._x=Math.atan2(_,p),this._y=Math.atan2(c,s)):(this._x=Math.atan2(-g,x),this._y=0);break;default:ct("Euler: .setFromRotationMatrix() encountered an unknown order: "+t)}return this._order=t,i===!0&&this._onChangeCallback(),this}setFromQuaternion(e,t,i){return wT.makeRotationFromQuaternion(e),this.setFromRotationMatrix(wT,t,i)}setFromVector3(e,t=this._order){return this.set(e.x,e.y,e.z,t)}reorder(e){return BT.setFromEuler(this),this.setFromQuaternion(BT,e)}equals(e){return e._x===this._x&&e._y===this._y&&e._z===this._z&&e._order===this._order}fromArray(e){return this._x=e[0],this._y=e[1],this._z=e[2],e[3]!==void 0&&(this._order=e[3]),this._onChangeCallback(),this}toArray(e=[],t=0){return e[t]=this._x,e[t+1]=this._y,e[t+2]=this._z,e[t+3]=this._order,e}_onChange(e){return this._onChangeCallback=e,this}_onChangeCallback(){}*[Symbol.iterator](){yield this._x,yield this._y,yield this._z,yield this._order}}wr.DEFAULT_ORDER="XYZ";class qh{constructor(){this.mask=1}set(e){this.mask=(1<<e|0)>>>0}enable(e){this.mask|=1<<e|0}enableAll(){this.mask=-1}toggle(e){this.mask^=1<<e|0}disable(e){this.mask&=~(1<<e|0)}disableAll(){this.mask=0}test(e){return(this.mask&e.mask)!==0}isEnabled(e){return(this.mask&(1<<e|0))!==0}}let zU=0;const DT=new K,Wh=new Ui,Dl=new It,ay=new K,gm=new K,HU=new K,GU=new Ui,OT=new K(1,0,0),NT=new K(0,1,0),UT=new K(0,0,1),LT={type:"added"},VU={type:"removed"},Jh={type:"childadded",child:null},mA={type:"childremoved",child:null};class dn extends Lo{constructor(){super(),this.isObject3D=!0,Object.defineProperty(this,"id",{value:zU++}),this.uuid=Wr(),this.name="",this.type="Object3D",this.parent=null,this.children=[],this.up=dn.DEFAULT_UP.clone();const e=new K,t=new wr,i=new Ui,a=new K(1,1,1);function s(){i.setFromEuler(t,!1)}function l(){t.setFromQuaternion(i,void 0,!1)}t._onChange(s),i._onChange(l),Object.defineProperties(this,{position:{configurable:!0,enumerable:!0,value:e},rotation:{configurable:!0,enumerable:!0,value:t},quaternion:{configurable:!0,enumerable:!0,value:i},scale:{configurable:!0,enumerable:!0,value:a},modelViewMatrix:{value:new It},normalMatrix:{value:new Zt}}),this.matrix=new It,this.matrixWorld=new It,this.matrixAutoUpdate=dn.DEFAULT_MATRIX_AUTO_UPDATE,this.matrixWorldAutoUpdate=dn.DEFAULT_MATRIX_WORLD_AUTO_UPDATE,this.matrixWorldNeedsUpdate=!1,this.layers=new qh,this.visible=!0,this.castShadow=!1,this.receiveShadow=!1,this.frustumCulled=!0,this.renderOrder=0,this.animations=[],this.customDepthMaterial=void 0,this.customDistanceMaterial=void 0,this.userData={}}onBeforeShadow(){}onAfterShadow(){}onBeforeRender(){}onAfterRender(){}applyMatrix4(e){this.matrixAutoUpdate&&this.updateMatrix(),this.matrix.premultiply(e),this.matrix.decompose(this.position,this.quaternion,this.scale)}applyQuaternion(e){return this.quaternion.premultiply(e),this}setRotationFromAxisAngle(e,t){this.quaternion.setFromAxisAngle(e,t)}setRotationFromEuler(e){this.quaternion.setFromEuler(e,!0)}setRotationFromMatrix(e){this.quaternion.setFromRotationMatrix(e)}setRotationFromQuaternion(e){this.quaternion.copy(e)}rotateOnAxis(e,t){return Wh.setFromAxisAngle(e,t),this.quaternion.multiply(Wh),this}rotateOnWorldAxis(e,t){return Wh.setFromAxisAngle(e,t),this.quaternion.premultiply(Wh),this}rotateX(e){return this.rotateOnAxis(OT,e)}rotateY(e){return this.rotateOnAxis(NT,e)}rotateZ(e){return this.rotateOnAxis(UT,e)}translateOnAxis(e,t){return DT.copy(e).applyQuaternion(this.quaternion),this.position.add(DT.multiplyScalar(t)),this}translateX(e){return this.translateOnAxis(OT,e)}translateY(e){return this.translateOnAxis(NT,e)}translateZ(e){return this.translateOnAxis(UT,e)}localToWorld(e){return this.updateWorldMatrix(!0,!1),e.applyMatrix4(this.matrixWorld)}worldToLocal(e){return this.updateWorldMatrix(!0,!1),e.applyMatrix4(Dl.copy(this.matrixWorld).invert())}lookAt(e,t,i){e.isVector3?ay.copy(e):ay.set(e,t,i);const a=this.parent;this.updateWorldMatrix(!0,!1),gm.setFromMatrixPosition(this.matrixWorld),this.isCamera||this.isLight?Dl.lookAt(gm,ay,this.up):Dl.lookAt(ay,gm,this.up),this.quaternion.setFromRotationMatrix(Dl),a&&(Dl.extractRotation(a.matrixWorld),Wh.setFromRotationMatrix(Dl),this.quaternion.premultiply(Wh.invert()))}add(e){if(arguments.length>1){for(let t=0;t<arguments.length;t++)this.add(arguments[t]);return this}return e===this?(Dt("Object3D.add: object can't be added as a child of itself.",e),this):(e&&e.isObject3D?(e.removeFromParent(),e.parent=this,this.children.push(e),e.dispatchEvent(LT),Jh.child=e,this.dispatchEvent(Jh),Jh.child=null):Dt("Object3D.add: object not an instance of THREE.Object3D.",e),this)}remove(e){if(arguments.length>1){for(let i=0;i<arguments.length;i++)this.remove(arguments[i]);return this}const t=this.children.indexOf(e);return t!==-1&&(e.parent=null,this.children.splice(t,1),e.dispatchEvent(VU),mA.child=e,this.dispatchEvent(mA),mA.child=null),this}removeFromParent(){const e=this.parent;return e!==null&&e.remove(this),this}clear(){return this.remove(...this.children)}attach(e){return this.updateWorldMatrix(!0,!1),Dl.copy(this.matrixWorld).invert(),e.parent!==null&&(e.parent.updateWorldMatrix(!0,!1),Dl.multiply(e.parent.matrixWorld)),e.applyMatrix4(Dl),e.removeFromParent(),e.parent=this,this.children.push(e),e.updateWorldMatrix(!1,!0),e.dispatchEvent(LT),Jh.child=e,this.dispatchEvent(Jh),Jh.child=null,this}getObjectById(e){return this.getObjectByProperty("id",e)}getObjectByName(e){return this.getObjectByProperty("name",e)}getObjectByProperty(e,t){if(this[e]===t)return this;for(let i=0,a=this.children.length;i<a;i++){const l=this.children[i].getObjectByProperty(e,t);if(l!==void 0)return l}}getObjectsByProperty(e,t,i=[]){this[e]===t&&i.push(this);const a=this.children;for(let s=0,l=a.length;s<l;s++)a[s].getObjectsByProperty(e,t,i);return i}getWorldPosition(e){return this.updateWorldMatrix(!0,!1),e.setFromMatrixPosition(this.matrixWorld)}getWorldQuaternion(e){return this.updateWorldMatrix(!0,!1),this.matrixWorld.decompose(gm,e,HU),e}getWorldScale(e){return this.updateWorldMatrix(!0,!1),this.matrixWorld.decompose(gm,GU,e),e}getWorldDirection(e){this.updateWorldMatrix(!0,!1);const t=this.matrixWorld.elements;return e.set(t[8],t[9],t[10]).normalize()}raycast(){}traverse(e){e(this);const t=this.children;for(let i=0,a=t.length;i<a;i++)t[i].traverse(e)}traverseVisible(e){if(this.visible===!1)return;e(this);const t=this.children;for(let i=0,a=t.length;i<a;i++)t[i].traverseVisible(e)}traverseAncestors(e){const t=this.parent;t!==null&&(e(t),t.traverseAncestors(e))}updateMatrix(){this.matrix.compose(this.position,this.quaternion,this.scale),this.matrixWorldNeedsUpdate=!0}updateMatrixWorld(e){this.matrixAutoUpdate&&this.updateMatrix(),(this.matrixWorldNeedsUpdate||e)&&(this.matrixWorldAutoUpdate===!0&&(this.parent===null?this.matrixWorld.copy(this.matrix):this.matrixWorld.multiplyMatrices(this.parent.matrixWorld,this.matrix)),this.matrixWorldNeedsUpdate=!1,e=!0);const t=this.children;for(let i=0,a=t.length;i<a;i++)t[i].updateMatrixWorld(e)}updateWorldMatrix(e,t){const i=this.parent;if(e===!0&&i!==null&&i.updateWorldMatrix(!0,!1),this.matrixAutoUpdate&&this.updateMatrix(),this.matrixWorldAutoUpdate===!0&&(this.parent===null?this.matrixWorld.copy(this.matrix):this.matrixWorld.multiplyMatrices(this.parent.matrixWorld,this.matrix)),t===!0){const a=this.children;for(let s=0,l=a.length;s<l;s++)a[s].updateWorldMatrix(!1,!0)}}toJSON(e){const t=e===void 0||typeof e=="string",i={};t&&(e={geometries:{},materials:{},textures:{},images:{},shapes:{},skeletons:{},animations:{},nodes:{}},i.metadata={version:4.7,type:"Object",generator:"Object3D.toJSON"});const a={};a.uuid=this.uuid,a.type=this.type,this.name!==""&&(a.name=this.name),this.castShadow===!0&&(a.castShadow=!0),this.receiveShadow===!0&&(a.receiveShadow=!0),this.visible===!1&&(a.visible=!1),this.frustumCulled===!1&&(a.frustumCulled=!1),this.renderOrder!==0&&(a.renderOrder=this.renderOrder),Object.keys(this.userData).length>0&&(a.userData=this.userData),a.layers=this.layers.mask,a.matrix=this.matrix.toArray(),a.up=this.up.toArray(),this.matrixAutoUpdate===!1&&(a.matrixAutoUpdate=!1),this.isInstancedMesh&&(a.type="InstancedMesh",a.count=this.count,a.instanceMatrix=this.instanceMatrix.toJSON(),this.instanceColor!==null&&(a.instanceColor=this.instanceColor.toJSON())),this.isBatchedMesh&&(a.type="BatchedMesh",a.perObjectFrustumCulled=this.perObjectFrustumCulled,a.sortObjects=this.sortObjects,a.drawRanges=this._drawRanges,a.reservedRanges=this._reservedRanges,a.geometryInfo=this._geometryInfo.map(c=>({...c,boundingBox:c.boundingBox?c.boundingBox.toJSON():void 0,boundingSphere:c.boundingSphere?c.boundingSphere.toJSON():void 0})),a.instanceInfo=this._instanceInfo.map(c=>({...c})),a.availableInstanceIds=this._availableInstanceIds.slice(),a.availableGeometryIds=this._availableGeometryIds.slice(),a.nextIndexStart=this._nextIndexStart,a.nextVertexStart=this._nextVertexStart,a.geometryCount=this._geometryCount,a.maxInstanceCount=this._maxInstanceCount,a.maxVertexCount=this._maxVertexCount,a.maxIndexCount=this._maxIndexCount,a.geometryInitialized=this._geometryInitialized,a.matricesTexture=this._matricesTexture.toJSON(e),a.indirectTexture=this._indirectTexture.toJSON(e),this._colorsTexture!==null&&(a.colorsTexture=this._colorsTexture.toJSON(e)),this.boundingSphere!==null&&(a.boundingSphere=this.boundingSphere.toJSON()),this.boundingBox!==null&&(a.boundingBox=this.boundingBox.toJSON()));function s(c,d){return c[d.uuid]===void 0&&(c[d.uuid]=d.toJSON(e)),d.uuid}if(this.isScene)this.background&&(this.background.isColor?a.background=this.background.toJSON():this.background.isTexture&&(a.background=this.background.toJSON(e).uuid)),this.environment&&this.environment.isTexture&&this.environment.isRenderTargetTexture!==!0&&(a.environment=this.environment.toJSON(e).uuid);else if(this.isMesh||this.isLine||this.isPoints){a.geometry=s(e.geometries,this.geometry);const c=this.geometry.parameters;if(c!==void 0&&c.shapes!==void 0){const d=c.shapes;if(Array.isArray(d))for(let p=0,g=d.length;p<g;p++){const v=d[p];s(e.shapes,v)}else s(e.shapes,d)}}if(this.isSkinnedMesh&&(a.bindMode=this.bindMode,a.bindMatrix=this.bindMatrix.toArray(),this.skeleton!==void 0&&(s(e.skeletons,this.skeleton),a.skeleton=this.skeleton.uuid)),this.material!==void 0)if(Array.isArray(this.material)){const c=[];for(let d=0,p=this.material.length;d<p;d++)c.push(s(e.materials,this.material[d]));a.material=c}else a.material=s(e.materials,this.material);if(this.children.length>0){a.children=[];for(let c=0;c<this.children.length;c++)a.children.push(this.children[c].toJSON(e).object)}if(this.animations.length>0){a.animations=[];for(let c=0;c<this.animations.length;c++){const d=this.animations[c];a.animations.push(s(e.animations,d))}}if(t){const c=l(e.geometries),d=l(e.materials),p=l(e.textures),g=l(e.images),v=l(e.shapes),_=l(e.skeletons),x=l(e.animations),S=l(e.nodes);c.length>0&&(i.geometries=c),d.length>0&&(i.materials=d),p.length>0&&(i.textures=p),g.length>0&&(i.images=g),v.length>0&&(i.shapes=v),_.length>0&&(i.skeletons=_),x.length>0&&(i.animations=x),S.length>0&&(i.nodes=S)}return i.object=a,i;function l(c){const d=[];for(const p in c){const g=c[p];delete g.metadata,d.push(g)}return d}}clone(e){return new this.constructor().copy(this,e)}copy(e,t=!0){if(this.name=e.name,this.up.copy(e.up),this.position.copy(e.position),this.rotation.order=e.rotation.order,this.quaternion.copy(e.quaternion),this.scale.copy(e.scale),this.matrix.copy(e.matrix),this.matrixWorld.copy(e.matrixWorld),this.matrixAutoUpdate=e.matrixAutoUpdate,this.matrixWorldAutoUpdate=e.matrixWorldAutoUpdate,this.matrixWorldNeedsUpdate=e.matrixWorldNeedsUpdate,this.layers.mask=e.layers.mask,this.visible=e.visible,this.castShadow=e.castShadow,this.receiveShadow=e.receiveShadow,this.frustumCulled=e.frustumCulled,this.renderOrder=e.renderOrder,this.animations=e.animations.slice(),this.userData=JSON.parse(JSON.stringify(e.userData)),t===!0)for(let i=0;i<e.children.length;i++){const a=e.children[i];this.add(a.clone())}return this}}dn.DEFAULT_UP=new K(0,1,0),dn.DEFAULT_MATRIX_AUTO_UPDATE=!0,dn.DEFAULT_MATRIX_WORLD_AUTO_UPDATE=!0;const Ks=new K,Ol=new K,gA=new K,Nl=new K,Kh=new K,Qh=new K,IT=new K,vA=new K,yA=new K,_A=new K,xA=new Fn,bA=new Fn,AA=new Fn;class Br{constructor(e=new K,t=new K,i=new K){this.a=e,this.b=t,this.c=i}static getNormal(e,t,i,a){a.subVectors(i,t),Ks.subVectors(e,t),a.cross(Ks);const s=a.lengthSq();return s>0?a.multiplyScalar(1/Math.sqrt(s)):a.set(0,0,0)}static getBarycoord(e,t,i,a,s){Ks.subVectors(a,t),Ol.subVectors(i,t),gA.subVectors(e,t);const l=Ks.dot(Ks),c=Ks.dot(Ol),d=Ks.dot(gA),p=Ol.dot(Ol),g=Ol.dot(gA),v=l*p-c*c;if(v===0)return s.set(0,0,0),null;const _=1/v,x=(p*d-c*g)*_,S=(l*g-c*d)*_;return s.set(1-x-S,S,x)}static containsPoint(e,t,i,a){return this.getBarycoord(e,t,i,a,Nl)===null?!1:Nl.x>=0&&Nl.y>=0&&Nl.x+Nl.y<=1}static getInterpolation(e,t,i,a,s,l,c,d){return this.getBarycoord(e,t,i,a,Nl)===null?(d.x=0,d.y=0,"z"in d&&(d.z=0),"w"in d&&(d.w=0),null):(d.setScalar(0),d.addScaledVector(s,Nl.x),d.addScaledVector(l,Nl.y),d.addScaledVector(c,Nl.z),d)}static getInterpolatedAttribute(e,t,i,a,s,l){return xA.setScalar(0),bA.setScalar(0),AA.setScalar(0),xA.fromBufferAttribute(e,t),bA.fromBufferAttribute(e,i),AA.fromBufferAttribute(e,a),l.setScalar(0),l.addScaledVector(xA,s.x),l.addScaledVector(bA,s.y),l.addScaledVector(AA,s.z),l}static isFrontFacing(e,t,i,a){return Ks.subVectors(i,t),Ol.subVectors(e,t),Ks.cross(Ol).dot(a)<0}set(e,t,i){return this.a.copy(e),this.b.copy(t),this.c.copy(i),this}setFromPointsAndIndices(e,t,i,a){return this.a.copy(e[t]),this.b.copy(e[i]),this.c.copy(e[a]),this}setFromAttributeAndIndices(e,t,i,a){return this.a.fromBufferAttribute(e,t),this.b.fromBufferAttribute(e,i),this.c.fromBufferAttribute(e,a),this}clone(){return new this.constructor().copy(this)}copy(e){return this.a.copy(e.a),this.b.copy(e.b),this.c.copy(e.c),this}getArea(){return Ks.subVectors(this.c,this.b),Ol.subVectors(this.a,this.b),Ks.cross(Ol).length()*.5}getMidpoint(e){return e.addVectors(this.a,this.b).add(this.c).multiplyScalar(1/3)}getNormal(e){return Br.getNormal(this.a,this.b,this.c,e)}getPlane(e){return e.setFromCoplanarPoints(this.a,this.b,this.c)}getBarycoord(e,t){return Br.getBarycoord(e,this.a,this.b,this.c,t)}getInterpolation(e,t,i,a,s){return Br.getInterpolation(e,this.a,this.b,this.c,t,i,a,s)}containsPoint(e){return Br.containsPoint(e,this.a,this.b,this.c)}isFrontFacing(e){return Br.isFrontFacing(this.a,this.b,this.c,e)}intersectsBox(e){return e.intersectsTriangle(this)}closestPointToPoint(e,t){const i=this.a,a=this.b,s=this.c;let l,c;Kh.subVectors(a,i),Qh.subVectors(s,i),vA.subVectors(e,i);const d=Kh.dot(vA),p=Qh.dot(vA);if(d<=0&&p<=0)return t.copy(i);yA.subVectors(e,a);const g=Kh.dot(yA),v=Qh.dot(yA);if(g>=0&&v<=g)return t.copy(a);const _=d*v-g*p;if(_<=0&&d>=0&&g<=0)return l=d/(d-g),t.copy(i).addScaledVector(Kh,l);_A.subVectors(e,s);const x=Kh.dot(_A),S=Qh.dot(_A);if(S>=0&&x<=S)return t.copy(s);const C=x*p-d*S;if(C<=0&&p>=0&&S<=0)return c=p/(p-S),t.copy(i).addScaledVector(Qh,c);const T=g*S-x*v;if(T<=0&&v-g>=0&&x-S>=0)return IT.subVectors(s,a),c=(v-g)/(v-g+(x-S)),t.copy(a).addScaledVector(IT,c);const M=1/(T+C+_);return l=C*M,c=_*M,t.copy(i).addScaledVector(Kh,l).addScaledVector(Qh,c)}equals(e){return e.a.equals(this.a)&&e.b.equals(this.b)&&e.c.equals(this.c)}}const PT={aliceblue:15792383,antiquewhite:16444375,aqua:65535,aquamarine:8388564,azure:15794175,beige:16119260,bisque:16770244,black:0,blanchedalmond:16772045,blue:255,blueviolet:9055202,brown:10824234,burlywood:14596231,cadetblue:6266528,chartreuse:8388352,chocolate:13789470,coral:16744272,cornflowerblue:6591981,cornsilk:16775388,crimson:14423100,cyan:65535,darkblue:139,darkcyan:35723,darkgoldenrod:12092939,darkgray:11119017,darkgreen:25600,darkgrey:11119017,darkkhaki:12433259,darkmagenta:9109643,darkolivegreen:5597999,darkorange:16747520,darkorchid:10040012,darkred:9109504,darksalmon:15308410,darkseagreen:9419919,darkslateblue:4734347,darkslategray:3100495,darkslategrey:3100495,darkturquoise:52945,darkviolet:9699539,deeppink:16716947,deepskyblue:49151,dimgray:6908265,dimgrey:6908265,dodgerblue:2003199,firebrick:11674146,floralwhite:16775920,forestgreen:2263842,fuchsia:16711935,gainsboro:14474460,ghostwhite:16316671,gold:16766720,goldenrod:14329120,gray:8421504,green:32768,greenyellow:11403055,grey:8421504,honeydew:15794160,hotpink:16738740,indianred:13458524,indigo:4915330,ivory:16777200,khaki:15787660,lavender:15132410,lavenderblush:16773365,lawngreen:8190976,lemonchiffon:16775885,lightblue:11393254,lightcoral:15761536,lightcyan:14745599,lightgoldenrodyellow:16448210,lightgray:13882323,lightgreen:9498256,lightgrey:13882323,lightpink:16758465,lightsalmon:16752762,lightseagreen:2142890,lightskyblue:8900346,lightslategray:7833753,lightslategrey:7833753,lightsteelblue:11584734,lightyellow:16777184,lime:65280,limegreen:3329330,linen:16445670,magenta:16711935,maroon:8388608,mediumaquamarine:6737322,mediumblue:205,mediumorchid:12211667,mediumpurple:9662683,mediumseagreen:3978097,mediumslateblue:8087790,mediumspringgreen:64154,mediumturquoise:4772300,mediumvioletred:13047173,midnightblue:1644912,mintcream:16121850,mistyrose:16770273,moccasin:16770229,navajowhite:16768685,navy:128,oldlace:16643558,olive:8421376,olivedrab:7048739,orange:16753920,orangered:16729344,orchid:14315734,palegoldenrod:15657130,palegreen:10025880,paleturquoise:11529966,palevioletred:14381203,papayawhip:16773077,peachpuff:16767673,peru:13468991,pink:16761035,plum:14524637,powderblue:11591910,purple:8388736,rebeccapurple:6697881,red:16711680,rosybrown:12357519,royalblue:4286945,saddlebrown:9127187,salmon:16416882,sandybrown:16032864,seagreen:3050327,seashell:16774638,sienna:10506797,silver:12632256,skyblue:8900331,slateblue:6970061,slategray:7372944,slategrey:7372944,snow:16775930,springgreen:65407,steelblue:4620980,tan:13808780,teal:32896,thistle:14204888,tomato:16737095,turquoise:4251856,violet:15631086,wheat:16113331,white:16777215,whitesmoke:16119285,yellow:16776960,yellowgreen:10145074},kc={h:0,s:0,l:0},ry={h:0,s:0,l:0};function SA(n,e,t){return t<0&&(t+=1),t>1&&(t-=1),t<1/6?n+(e-n)*6*t:t<1/2?e:t<2/3?n+(e-n)*6*(2/3-t):n}let st=class{constructor(e,t,i){return this.isColor=!0,this.r=1,this.g=1,this.b=1,this.set(e,t,i)}set(e,t,i){if(t===void 0&&i===void 0){const a=e;a&&a.isColor?this.copy(a):typeof a=="number"?this.setHex(a):typeof a=="string"&&this.setStyle(a)}else this.setRGB(e,t,i);return this}setScalar(e){return this.r=e,this.g=e,this.b=e,this}setHex(e,t=Aa){return e=Math.floor(e),this.r=(e>>16&255)/255,this.g=(e>>8&255)/255,this.b=(e&255)/255,vn.colorSpaceToWorking(this,t),this}setRGB(e,t,i,a=vn.workingColorSpace){return this.r=e,this.g=t,this.b=i,vn.colorSpaceToWorking(this,a),this}setHSL(e,t,i,a=vn.workingColorSpace){if(e=aA(e,1),t=jt(t,0,1),i=jt(i,0,1),t===0)this.r=this.g=this.b=i;else{const s=i<=.5?i*(1+t):i+t-i*t,l=2*i-s;this.r=SA(l,s,e+1/3),this.g=SA(l,s,e),this.b=SA(l,s,e-1/3)}return vn.colorSpaceToWorking(this,a),this}setStyle(e,t=Aa){function i(s){s!==void 0&&parseFloat(s)<1&&ct("Color: Alpha component of "+e+" will be ignored.")}let a;if(a=/^(\w+)\(([^\)]*)\)/.exec(e)){let s;const l=a[1],c=a[2];switch(l){case"rgb":case"rgba":if(s=/^\s*(\d+)\s*,\s*(\d+)\s*,\s*(\d+)\s*(?:,\s*(\d*\.?\d+)\s*)?$/.exec(c))return i(s[4]),this.setRGB(Math.min(255,parseInt(s[1],10))/255,Math.min(255,parseInt(s[2],10))/255,Math.min(255,parseInt(s[3],10))/255,t);if(s=/^\s*(\d+)\%\s*,\s*(\d+)\%\s*,\s*(\d+)\%\s*(?:,\s*(\d*\.?\d+)\s*)?$/.exec(c))return i(s[4]),this.setRGB(Math.min(100,parseInt(s[1],10))/100,Math.min(100,parseInt(s[2],10))/100,Math.min(100,parseInt(s[3],10))/100,t);break;case"hsl":case"hsla":if(s=/^\s*(\d*\.?\d+)\s*,\s*(\d*\.?\d+)\%\s*,\s*(\d*\.?\d+)\%\s*(?:,\s*(\d*\.?\d+)\s*)?$/.exec(c))return i(s[4]),this.setHSL(parseFloat(s[1])/360,parseFloat(s[2])/100,parseFloat(s[3])/100,t);break;default:ct("Color: Unknown color model "+e)}}else if(a=/^\#([A-Fa-f\d]+)$/.exec(e)){const s=a[1],l=s.length;if(l===3)return this.setRGB(parseInt(s.charAt(0),16)/15,parseInt(s.charAt(1),16)/15,parseInt(s.charAt(2),16)/15,t);if(l===6)return this.setHex(parseInt(s,16),t);ct("Color: Invalid hex color "+e)}else if(e&&e.length>0)return this.setColorName(e,t);return this}setColorName(e,t=Aa){const i=PT[e.toLowerCase()];return i!==void 0?this.setHex(i,t):ct("Color: Unknown color "+e),this}clone(){return new this.constructor(this.r,this.g,this.b)}copy(e){return this.r=e.r,this.g=e.g,this.b=e.b,this}copySRGBToLinear(e){return this.r=Rl(e.r),this.g=Rl(e.g),this.b=Rl(e.b),this}copyLinearToSRGB(e){return this.r=Hh(e.r),this.g=Hh(e.g),this.b=Hh(e.b),this}convertSRGBToLinear(){return this.copySRGBToLinear(this),this}convertLinearToSRGB(){return this.copyLinearToSRGB(this),this}getHex(e=Aa){return vn.workingToColorSpace(Ia.copy(this),e),Math.round(jt(Ia.r*255,0,255))*65536+Math.round(jt(Ia.g*255,0,255))*256+Math.round(jt(Ia.b*255,0,255))}getHexString(e=Aa){return("000000"+this.getHex(e).toString(16)).slice(-6)}getHSL(e,t=vn.workingColorSpace){vn.workingToColorSpace(Ia.copy(this),t);const i=Ia.r,a=Ia.g,s=Ia.b,l=Math.max(i,a,s),c=Math.min(i,a,s);let d,p;const g=(c+l)/2;if(c===l)d=0,p=0;else{const v=l-c;switch(p=g<=.5?v/(l+c):v/(2-l-c),l){case i:d=(a-s)/v+(a<s?6:0);break;case a:d=(s-i)/v+2;break;case s:d=(i-a)/v+4;break}d/=6}return e.h=d,e.s=p,e.l=g,e}getRGB(e,t=vn.workingColorSpace){return vn.workingToColorSpace(Ia.copy(this),t),e.r=Ia.r,e.g=Ia.g,e.b=Ia.b,e}getStyle(e=Aa){vn.workingToColorSpace(Ia.copy(this),e);const t=Ia.r,i=Ia.g,a=Ia.b;return e!==Aa?`color(${e} ${t.toFixed(3)} ${i.toFixed(3)} ${a.toFixed(3)})`:`rgb(${Math.round(t*255)},${Math.round(i*255)},${Math.round(a*255)})`}offsetHSL(e,t,i){return this.getHSL(kc),this.setHSL(kc.h+e,kc.s+t,kc.l+i)}add(e){return this.r+=e.r,this.g+=e.g,this.b+=e.b,this}addColors(e,t){return this.r=e.r+t.r,this.g=e.g+t.g,this.b=e.b+t.b,this}addScalar(e){return this.r+=e,this.g+=e,this.b+=e,this}sub(e){return this.r=Math.max(0,this.r-e.r),this.g=Math.max(0,this.g-e.g),this.b=Math.max(0,this.b-e.b),this}multiply(e){return this.r*=e.r,this.g*=e.g,this.b*=e.b,this}multiplyScalar(e){return this.r*=e,this.g*=e,this.b*=e,this}lerp(e,t){return this.r+=(e.r-this.r)*t,this.g+=(e.g-this.g)*t,this.b+=(e.b-this.b)*t,this}lerpColors(e,t,i){return this.r=e.r+(t.r-e.r)*i,this.g=e.g+(t.g-e.g)*i,this.b=e.b+(t.b-e.b)*i,this}lerpHSL(e,t){this.getHSL(kc),e.getHSL(ry);const i=dm(kc.h,ry.h,t),a=dm(kc.s,ry.s,t),s=dm(kc.l,ry.l,t);return this.setHSL(i,a,s),this}setFromVector3(e){return this.r=e.x,this.g=e.y,this.b=e.z,this}applyMatrix3(e){const t=this.r,i=this.g,a=this.b,s=e.elements;return this.r=s[0]*t+s[3]*i+s[6]*a,this.g=s[1]*t+s[4]*i+s[7]*a,this.b=s[2]*t+s[5]*i+s[8]*a,this}equals(e){return e.r===this.r&&e.g===this.g&&e.b===this.b}fromArray(e,t=0){return this.r=e[t],this.g=e[t+1],this.b=e[t+2],this}toArray(e=[],t=0){return e[t]=this.r,e[t+1]=this.g,e[t+2]=this.b,e}fromBufferAttribute(e,t){return this.r=e.getX(t),this.g=e.getY(t),this.b=e.getZ(t),this}toJSON(){return this.getHex()}*[Symbol.iterator](){yield this.r,yield this.g,yield this.b}};const Ia=new st;st.NAMES=PT;let kU=0;class Li extends Lo{constructor(){super(),this.isMaterial=!0,Object.defineProperty(this,"id",{value:kU++}),this.uuid=Wr(),this.name="",this.type="Material",this.blending=Yu,this.side=Bo,this.vertexColors=!1,this.opacity=1,this.transparent=!1,this.alphaHash=!1,this.blendSrc=J0,this.blendDst=K0,this.blendEquation=Dc,this.blendSrcAlpha=null,this.blendDstAlpha=null,this.blendEquationAlpha=null,this.blendColor=new st(0,0,0),this.blendAlpha=0,this.depthFunc=qu,this.depthTest=!0,this.depthWrite=!0,this.stencilWriteMask=255,this.stencilFunc=nA,this.stencilRef=0,this.stencilFuncMask=255,this.stencilFail=Zu,this.stencilZFail=Zu,this.stencilZPass=Zu,this.stencilWrite=!1,this.clippingPlanes=null,this.clipIntersection=!1,this.clipShadows=!1,this.shadowSide=null,this.colorWrite=!0,this.precision=null,this.polygonOffset=!1,this.polygonOffsetFactor=0,this.polygonOffsetUnits=0,this.dithering=!1,this.alphaToCoverage=!1,this.premultipliedAlpha=!1,this.forceSinglePass=!1,this.allowOverride=!0,this.visible=!0,this.toneMapped=!0,this.userData={},this.version=0,this._alphaTest=0}get alphaTest(){return this._alphaTest}set alphaTest(e){this._alphaTest>0!=e>0&&this.version++,this._alphaTest=e}onBeforeRender(){}onBeforeCompile(){}customProgramCacheKey(){return this.onBeforeCompile.toString()}setValues(e){if(e!==void 0)for(const t in e){const i=e[t];if(i===void 0){ct(`Material: parameter '${t}' has value of undefined.`);continue}const a=this[t];if(a===void 0){ct(`Material: '${t}' is not a property of THREE.${this.type}.`);continue}a&&a.isColor?a.set(i):a&&a.isVector3&&i&&i.isVector3?a.copy(i):this[t]=i}}toJSON(e){const t=e===void 0||typeof e=="string";t&&(e={textures:{},images:{}});const i={metadata:{version:4.7,type:"Material",generator:"Material.toJSON"}};i.uuid=this.uuid,i.type=this.type,this.name!==""&&(i.name=this.name),this.color&&this.color.isColor&&(i.color=this.color.getHex()),this.roughness!==void 0&&(i.roughness=this.roughness),this.metalness!==void 0&&(i.metalness=this.metalness),this.sheen!==void 0&&(i.sheen=this.sheen),this.sheenColor&&this.sheenColor.isColor&&(i.sheenColor=this.sheenColor.getHex()),this.sheenRoughness!==void 0&&(i.sheenRoughness=this.sheenRoughness),this.emissive&&this.emissive.isColor&&(i.emissive=this.emissive.getHex()),this.emissiveIntensity!==void 0&&this.emissiveIntensity!==1&&(i.emissiveIntensity=this.emissiveIntensity),this.specular&&this.specular.isColor&&(i.specular=this.specular.getHex()),this.specularIntensity!==void 0&&(i.specularIntensity=this.specularIntensity),this.specularColor&&this.specularColor.isColor&&(i.specularColor=this.specularColor.getHex()),this.shininess!==void 0&&(i.shininess=this.shininess),this.clearcoat!==void 0&&(i.clearcoat=this.clearcoat),this.clearcoatRoughness!==void 0&&(i.clearcoatRoughness=this.clearcoatRoughness),this.clearcoatMap&&this.clearcoatMap.isTexture&&(i.clearcoatMap=this.clearcoatMap.toJSON(e).uuid),this.clearcoatRoughnessMap&&this.clearcoatRoughnessMap.isTexture&&(i.clearcoatRoughnessMap=this.clearcoatRoughnessMap.toJSON(e).uuid),this.clearcoatNormalMap&&this.clearcoatNormalMap.isTexture&&(i.clearcoatNormalMap=this.clearcoatNormalMap.toJSON(e).uuid,i.clearcoatNormalScale=this.clearcoatNormalScale.toArray()),this.sheenColorMap&&this.sheenColorMap.isTexture&&(i.sheenColorMap=this.sheenColorMap.toJSON(e).uuid),this.sheenRoughnessMap&&this.sheenRoughnessMap.isTexture&&(i.sheenRoughnessMap=this.sheenRoughnessMap.toJSON(e).uuid),this.dispersion!==void 0&&(i.dispersion=this.dispersion),this.iridescence!==void 0&&(i.iridescence=this.iridescence),this.iridescenceIOR!==void 0&&(i.iridescenceIOR=this.iridescenceIOR),this.iridescenceThicknessRange!==void 0&&(i.iridescenceThicknessRange=this.iridescenceThicknessRange),this.iridescenceMap&&this.iridescenceMap.isTexture&&(i.iridescenceMap=this.iridescenceMap.toJSON(e).uuid),this.iridescenceThicknessMap&&this.iridescenceThicknessMap.isTexture&&(i.iridescenceThicknessMap=this.iridescenceThicknessMap.toJSON(e).uuid),this.anisotropy!==void 0&&(i.anisotropy=this.anisotropy),this.anisotropyRotation!==void 0&&(i.anisotropyRotation=this.anisotropyRotation),this.anisotropyMap&&this.anisotropyMap.isTexture&&(i.anisotropyMap=this.anisotropyMap.toJSON(e).uuid),this.map&&this.map.isTexture&&(i.map=this.map.toJSON(e).uuid),this.matcap&&this.matcap.isTexture&&(i.matcap=this.matcap.toJSON(e).uuid),this.alphaMap&&this.alphaMap.isTexture&&(i.alphaMap=this.alphaMap.toJSON(e).uuid),this.lightMap&&this.lightMap.isTexture&&(i.lightMap=this.lightMap.toJSON(e).uuid,i.lightMapIntensity=this.lightMapIntensity),this.aoMap&&this.aoMap.isTexture&&(i.aoMap=this.aoMap.toJSON(e).uuid,i.aoMapIntensity=this.aoMapIntensity),this.bumpMap&&this.bumpMap.isTexture&&(i.bumpMap=this.bumpMap.toJSON(e).uuid,i.bumpScale=this.bumpScale),this.normalMap&&this.normalMap.isTexture&&(i.normalMap=this.normalMap.toJSON(e).uuid,i.normalMapType=this.normalMapType,i.normalScale=this.normalScale.toArray()),this.displacementMap&&this.displacementMap.isTexture&&(i.displacementMap=this.displacementMap.toJSON(e).uuid,i.displacementScale=this.displacementScale,i.displacementBias=this.displacementBias),this.roughnessMap&&this.roughnessMap.isTexture&&(i.roughnessMap=this.roughnessMap.toJSON(e).uuid),this.metalnessMap&&this.metalnessMap.isTexture&&(i.metalnessMap=this.metalnessMap.toJSON(e).uuid),this.emissiveMap&&this.emissiveMap.isTexture&&(i.emissiveMap=this.emissiveMap.toJSON(e).uuid),this.specularMap&&this.specularMap.isTexture&&(i.specularMap=this.specularMap.toJSON(e).uuid),this.specularIntensityMap&&this.specularIntensityMap.isTexture&&(i.specularIntensityMap=this.specularIntensityMap.toJSON(e).uuid),this.specularColorMap&&this.specularColorMap.isTexture&&(i.specularColorMap=this.specularColorMap.toJSON(e).uuid),this.envMap&&this.envMap.isTexture&&(i.envMap=this.envMap.toJSON(e).uuid,this.combine!==void 0&&(i.combine=this.combine)),this.envMapRotation!==void 0&&(i.envMapRotation=this.envMapRotation.toArray()),this.envMapIntensity!==void 0&&(i.envMapIntensity=this.envMapIntensity),this.reflectivity!==void 0&&(i.reflectivity=this.reflectivity),this.refractionRatio!==void 0&&(i.refractionRatio=this.refractionRatio),this.gradientMap&&this.gradientMap.isTexture&&(i.gradientMap=this.gradientMap.toJSON(e).uuid),this.transmission!==void 0&&(i.transmission=this.transmission),this.transmissionMap&&this.transmissionMap.isTexture&&(i.transmissionMap=this.transmissionMap.toJSON(e).uuid),this.thickness!==void 0&&(i.thickness=this.thickness),this.thicknessMap&&this.thicknessMap.isTexture&&(i.thicknessMap=this.thicknessMap.toJSON(e).uuid),this.attenuationDistance!==void 0&&this.attenuationDistance!==1/0&&(i.attenuationDistance=this.attenuationDistance),this.attenuationColor!==void 0&&(i.attenuationColor=this.attenuationColor.getHex()),this.size!==void 0&&(i.size=this.size),this.shadowSide!==null&&(i.shadowSide=this.shadowSide),this.sizeAttenuation!==void 0&&(i.sizeAttenuation=this.sizeAttenuation),this.blending!==Yu&&(i.blending=this.blending),this.side!==Bo&&(i.side=this.side),this.vertexColors===!0&&(i.vertexColors=!0),this.opacity<1&&(i.opacity=this.opacity),this.transparent===!0&&(i.transparent=!0),this.blendSrc!==J0&&(i.blendSrc=this.blendSrc),this.blendDst!==K0&&(i.blendDst=this.blendDst),this.blendEquation!==Dc&&(i.blendEquation=this.blendEquation),this.blendSrcAlpha!==null&&(i.blendSrcAlpha=this.blendSrcAlpha),this.blendDstAlpha!==null&&(i.blendDstAlpha=this.blendDstAlpha),this.blendEquationAlpha!==null&&(i.blendEquationAlpha=this.blendEquationAlpha),this.blendColor&&this.blendColor.isColor&&(i.blendColor=this.blendColor.getHex()),this.blendAlpha!==0&&(i.blendAlpha=this.blendAlpha),this.depthFunc!==qu&&(i.depthFunc=this.depthFunc),this.depthTest===!1&&(i.depthTest=this.depthTest),this.depthWrite===!1&&(i.depthWrite=this.depthWrite),this.colorWrite===!1&&(i.colorWrite=this.colorWrite),this.stencilWriteMask!==255&&(i.stencilWriteMask=this.stencilWriteMask),this.stencilFunc!==nA&&(i.stencilFunc=this.stencilFunc),this.stencilRef!==0&&(i.stencilRef=this.stencilRef),this.stencilFuncMask!==255&&(i.stencilFuncMask=this.stencilFuncMask),this.stencilFail!==Zu&&(i.stencilFail=this.stencilFail),this.stencilZFail!==Zu&&(i.stencilZFail=this.stencilZFail),this.stencilZPass!==Zu&&(i.stencilZPass=this.stencilZPass),this.stencilWrite===!0&&(i.stencilWrite=this.stencilWrite),this.rotation!==void 0&&this.rotation!==0&&(i.rotation=this.rotation),this.polygonOffset===!0&&(i.polygonOffset=!0),this.polygonOffsetFactor!==0&&(i.polygonOffsetFactor=this.polygonOffsetFactor),this.polygonOffsetUnits!==0&&(i.polygonOffsetUnits=this.polygonOffsetUnits),this.linewidth!==void 0&&this.linewidth!==1&&(i.linewidth=this.linewidth),this.dashSize!==void 0&&(i.dashSize=this.dashSize),this.gapSize!==void 0&&(i.gapSize=this.gapSize),this.scale!==void 0&&(i.scale=this.scale),this.dithering===!0&&(i.dithering=!0),this.alphaTest>0&&(i.alphaTest=this.alphaTest),this.alphaHash===!0&&(i.alphaHash=!0),this.alphaToCoverage===!0&&(i.alphaToCoverage=!0),this.premultipliedAlpha===!0&&(i.premultipliedAlpha=!0),this.forceSinglePass===!0&&(i.forceSinglePass=!0),this.allowOverride===!1&&(i.allowOverride=!1),this.wireframe===!0&&(i.wireframe=!0),this.wireframeLinewidth>1&&(i.wireframeLinewidth=this.wireframeLinewidth),this.wireframeLinecap!=="round"&&(i.wireframeLinecap=this.wireframeLinecap),this.wireframeLinejoin!=="round"&&(i.wireframeLinejoin=this.wireframeLinejoin),this.flatShading===!0&&(i.flatShading=!0),this.visible===!1&&(i.visible=!1),this.toneMapped===!1&&(i.toneMapped=!1),this.fog===!1&&(i.fog=!1),Object.keys(this.userData).length>0&&(i.userData=this.userData);function a(s){const l=[];for(const c in s){const d=s[c];delete d.metadata,l.push(d)}return l}if(t){const s=a(e.textures),l=a(e.images);s.length>0&&(i.textures=s),l.length>0&&(i.images=l)}return i}clone(){return new this.constructor().copy(this)}copy(e){this.name=e.name,this.blending=e.blending,this.side=e.side,this.vertexColors=e.vertexColors,this.opacity=e.opacity,this.transparent=e.transparent,this.blendSrc=e.blendSrc,this.blendDst=e.blendDst,this.blendEquation=e.blendEquation,this.blendSrcAlpha=e.blendSrcAlpha,this.blendDstAlpha=e.blendDstAlpha,this.blendEquationAlpha=e.blendEquationAlpha,this.blendColor.copy(e.blendColor),this.blendAlpha=e.blendAlpha,this.depthFunc=e.depthFunc,this.depthTest=e.depthTest,this.depthWrite=e.depthWrite,this.stencilWriteMask=e.stencilWriteMask,this.stencilFunc=e.stencilFunc,this.stencilRef=e.stencilRef,this.stencilFuncMask=e.stencilFuncMask,this.stencilFail=e.stencilFail,this.stencilZFail=e.stencilZFail,this.stencilZPass=e.stencilZPass,this.stencilWrite=e.stencilWrite;const t=e.clippingPlanes;let i=null;if(t!==null){const a=t.length;i=new Array(a);for(let s=0;s!==a;++s)i[s]=t[s].clone()}return this.clippingPlanes=i,this.clipIntersection=e.clipIntersection,this.clipShadows=e.clipShadows,this.shadowSide=e.shadowSide,this.colorWrite=e.colorWrite,this.precision=e.precision,this.polygonOffset=e.polygonOffset,this.polygonOffsetFactor=e.polygonOffsetFactor,this.polygonOffsetUnits=e.polygonOffsetUnits,this.dithering=e.dithering,this.alphaTest=e.alphaTest,this.alphaHash=e.alphaHash,this.alphaToCoverage=e.alphaToCoverage,this.premultipliedAlpha=e.premultipliedAlpha,this.forceSinglePass=e.forceSinglePass,this.allowOverride=e.allowOverride,this.visible=e.visible,this.toneMapped=e.toneMapped,this.userData=JSON.parse(JSON.stringify(e.userData)),this}dispose(){this.dispatchEvent({type:"dispose"})}set needsUpdate(e){e===!0&&this.version++}}class Qr extends Li{constructor(e){super(),this.isMeshBasicMaterial=!0,this.type="MeshBasicMaterial",this.color=new st(16777215),this.map=null,this.lightMap=null,this.lightMapIntensity=1,this.aoMap=null,this.aoMapIntensity=1,this.specularMap=null,this.alphaMap=null,this.envMap=null,this.envMapRotation=new wr,this.combine=em,this.reflectivity=1,this.refractionRatio=.98,this.wireframe=!1,this.wireframeLinewidth=1,this.wireframeLinecap="round",this.wireframeLinejoin="round",this.fog=!0,this.setValues(e)}copy(e){return super.copy(e),this.color.copy(e.color),this.map=e.map,this.lightMap=e.lightMap,this.lightMapIntensity=e.lightMapIntensity,this.aoMap=e.aoMap,this.aoMapIntensity=e.aoMapIntensity,this.specularMap=e.specularMap,this.alphaMap=e.alphaMap,this.envMap=e.envMap,this.envMapRotation.copy(e.envMapRotation),this.combine=e.combine,this.reflectivity=e.reflectivity,this.refractionRatio=e.refractionRatio,this.wireframe=e.wireframe,this.wireframeLinewidth=e.wireframeLinewidth,this.wireframeLinecap=e.wireframeLinecap,this.wireframeLinejoin=e.wireframeLinejoin,this.fog=e.fog,this}}const Ul=XU();function XU(){const n=new ArrayBuffer(4),e=new Float32Array(n),t=new Uint32Array(n),i=new Uint32Array(512),a=new Uint32Array(512);for(let d=0;d<256;++d){const p=d-127;p<-27?(i[d]=0,i[d|256]=32768,a[d]=24,a[d|256]=24):p<-14?(i[d]=1024>>-p-14,i[d|256]=1024>>-p-14|32768,a[d]=-p-1,a[d|256]=-p-1):p<=15?(i[d]=p+15<<10,i[d|256]=p+15<<10|32768,a[d]=13,a[d|256]=13):p<128?(i[d]=31744,i[d|256]=64512,a[d]=24,a[d|256]=24):(i[d]=31744,i[d|256]=64512,a[d]=13,a[d|256]=13)}const s=new Uint32Array(2048),l=new Uint32Array(64),c=new Uint32Array(64);for(let d=1;d<1024;++d){let p=d<<13,g=0;for(;(p&8388608)===0;)p<<=1,g-=8388608;p&=-8388609,g+=947912704,s[d]=p|g}for(let d=1024;d<2048;++d)s[d]=939524096+(d-1024<<13);for(let d=1;d<31;++d)l[d]=d<<23;l[31]=1199570944,l[32]=2147483648;for(let d=33;d<63;++d)l[d]=2147483648+(d-32<<23);l[63]=3347054592;for(let d=1;d<64;++d)d!==32&&(c[d]=1024);return{floatView:e,uint32View:t,baseTable:i,shiftTable:a,mantissaTable:s,exponentTable:l,offsetTable:c}}function Dr(n){Math.abs(n)>65504&&ct("DataUtils.toHalfFloat(): Value out of range."),n=jt(n,-65504,65504),Ul.floatView[0]=n;const e=Ul.uint32View[0],t=e>>23&511;return Ul.baseTable[t]+((e&8388607)>>Ul.shiftTable[t])}function vm(n){const e=n>>10;return Ul.uint32View[0]=Ul.mantissaTable[Ul.offsetTable[e]+(n&1023)]+Ul.exponentTable[e],Ul.floatView[0]}class jU{static toHalfFloat(e){return Dr(e)}static fromHalfFloat(e){return vm(e)}}const Vi=new K,sy=new He;let YU=0;class Rn{constructor(e,t,i=!1){if(Array.isArray(e))throw new TypeError("THREE.BufferAttribute: array should be a Typed Array.");this.isBufferAttribute=!0,Object.defineProperty(this,"id",{value:YU++}),this.name="",this.array=e,this.itemSize=t,this.count=e!==void 0?e.length/t:0,this.normalized=i,this.usage=um,this.updateRanges=[],this.gpuType=nr,this.version=0}onUploadCallback(){}set needsUpdate(e){e===!0&&this.version++}setUsage(e){return this.usage=e,this}addUpdateRange(e,t){this.updateRanges.push({start:e,count:t})}clearUpdateRanges(){this.updateRanges.length=0}copy(e){return this.name=e.name,this.array=new e.array.constructor(e.array),this.itemSize=e.itemSize,this.count=e.count,this.normalized=e.normalized,this.usage=e.usage,this.gpuType=e.gpuType,this}copyAt(e,t,i){e*=this.itemSize,i*=t.itemSize;for(let a=0,s=this.itemSize;a<s;a++)this.array[e+a]=t.array[i+a];return this}copyArray(e){return this.array.set(e),this}applyMatrix3(e){if(this.itemSize===2)for(let t=0,i=this.count;t<i;t++)sy.fromBufferAttribute(this,t),sy.applyMatrix3(e),this.setXY(t,sy.x,sy.y);else if(this.itemSize===3)for(let t=0,i=this.count;t<i;t++)Vi.fromBufferAttribute(this,t),Vi.applyMatrix3(e),this.setXYZ(t,Vi.x,Vi.y,Vi.z);return this}applyMatrix4(e){for(let t=0,i=this.count;t<i;t++)Vi.fromBufferAttribute(this,t),Vi.applyMatrix4(e),this.setXYZ(t,Vi.x,Vi.y,Vi.z);return this}applyNormalMatrix(e){for(let t=0,i=this.count;t<i;t++)Vi.fromBufferAttribute(this,t),Vi.applyNormalMatrix(e),this.setXYZ(t,Vi.x,Vi.y,Vi.z);return this}transformDirection(e){for(let t=0,i=this.count;t<i;t++)Vi.fromBufferAttribute(this,t),Vi.transformDirection(e),this.setXYZ(t,Vi.x,Vi.y,Vi.z);return this}set(e,t=0){return this.array.set(e,t),this}getComponent(e,t){let i=this.array[e*this.itemSize+t];return this.normalized&&(i=ir(i,this.array)),i}setComponent(e,t,i){return this.normalized&&(i=an(i,this.array)),this.array[e*this.itemSize+t]=i,this}getX(e){let t=this.array[e*this.itemSize];return this.normalized&&(t=ir(t,this.array)),t}setX(e,t){return this.normalized&&(t=an(t,this.array)),this.array[e*this.itemSize]=t,this}getY(e){let t=this.array[e*this.itemSize+1];return this.normalized&&(t=ir(t,this.array)),t}setY(e,t){return this.normalized&&(t=an(t,this.array)),this.array[e*this.itemSize+1]=t,this}getZ(e){let t=this.array[e*this.itemSize+2];return this.normalized&&(t=ir(t,this.array)),t}setZ(e,t){return this.normalized&&(t=an(t,this.array)),this.array[e*this.itemSize+2]=t,this}getW(e){let t=this.array[e*this.itemSize+3];return this.normalized&&(t=ir(t,this.array)),t}setW(e,t){return this.normalized&&(t=an(t,this.array)),this.array[e*this.itemSize+3]=t,this}setXY(e,t,i){return e*=this.itemSize,this.normalized&&(t=an(t,this.array),i=an(i,this.array)),this.array[e+0]=t,this.array[e+1]=i,this}setXYZ(e,t,i,a){return e*=this.itemSize,this.normalized&&(t=an(t,this.array),i=an(i,this.array),a=an(a,this.array)),this.array[e+0]=t,this.array[e+1]=i,this.array[e+2]=a,this}setXYZW(e,t,i,a,s){return e*=this.itemSize,this.normalized&&(t=an(t,this.array),i=an(i,this.array),a=an(a,this.array),s=an(s,this.array)),this.array[e+0]=t,this.array[e+1]=i,this.array[e+2]=a,this.array[e+3]=s,this}onUpload(e){return this.onUploadCallback=e,this}clone(){return new this.constructor(this.array,this.itemSize).copy(this)}toJSON(){const e={itemSize:this.itemSize,type:this.array.constructor.name,array:Array.from(this.array),normalized:this.normalized};return this.name!==""&&(e.name=this.name),this.usage!==um&&(e.usage=this.usage),e}}class qU extends Rn{constructor(e,t,i){super(new Int8Array(e),t,i)}}class WU extends Rn{constructor(e,t,i){super(new Uint8Array(e),t,i)}}class JU extends Rn{constructor(e,t,i){super(new Uint8ClampedArray(e),t,i)}}class KU extends Rn{constructor(e,t,i){super(new Int16Array(e),t,i)}}class MA extends Rn{constructor(e,t,i){super(new Uint16Array(e),t,i)}}class QU extends Rn{constructor(e,t,i){super(new Int32Array(e),t,i)}}class EA extends Rn{constructor(e,t,i){super(new Uint32Array(e),t,i)}}class ZU extends Rn{constructor(e,t,i){super(new Uint16Array(e),t,i),this.isFloat16BufferAttribute=!0}getX(e){let t=vm(this.array[e*this.itemSize]);return this.normalized&&(t=ir(t,this.array)),t}setX(e,t){return this.normalized&&(t=an(t,this.array)),this.array[e*this.itemSize]=Dr(t),this}getY(e){let t=vm(this.array[e*this.itemSize+1]);return this.normalized&&(t=ir(t,this.array)),t}setY(e,t){return this.normalized&&(t=an(t,this.array)),this.array[e*this.itemSize+1]=Dr(t),this}getZ(e){let t=vm(this.array[e*this.itemSize+2]);return this.normalized&&(t=ir(t,this.array)),t}setZ(e,t){return this.normalized&&(t=an(t,this.array)),this.array[e*this.itemSize+2]=Dr(t),this}getW(e){let t=vm(this.array[e*this.itemSize+3]);return this.normalized&&(t=ir(t,this.array)),t}setW(e,t){return this.normalized&&(t=an(t,this.array)),this.array[e*this.itemSize+3]=Dr(t),this}setXY(e,t,i){return e*=this.itemSize,this.normalized&&(t=an(t,this.array),i=an(i,this.array)),this.array[e+0]=Dr(t),this.array[e+1]=Dr(i),this}setXYZ(e,t,i,a){return e*=this.itemSize,this.normalized&&(t=an(t,this.array),i=an(i,this.array),a=an(a,this.array)),this.array[e+0]=Dr(t),this.array[e+1]=Dr(i),this.array[e+2]=Dr(a),this}setXYZW(e,t,i,a,s){return e*=this.itemSize,this.normalized&&(t=an(t,this.array),i=an(i,this.array),a=an(a,this.array),s=an(s,this.array)),this.array[e+0]=Dr(t),this.array[e+1]=Dr(i),this.array[e+2]=Dr(a),this.array[e+3]=Dr(s),this}}class _t extends Rn{constructor(e,t,i){super(new Float32Array(e),t,i)}}let $U=0;const ys=new It,TA=new dn,Zh=new K,Zr=new Sa,ym=new Sa,fa=new K;class Jt extends Lo{constructor(){super(),this.isBufferGeometry=!0,Object.defineProperty(this,"id",{value:$U++}),this.uuid=Wr(),this.name="",this.type="BufferGeometry",this.index=null,this.indirect=null,this.indirectOffset=0,this.attributes={},this.morphAttributes={},this.morphTargetsRelative=!1,this.groups=[],this.boundingBox=null,this.boundingSphere=null,this.drawRange={start:0,count:1/0},this.userData={}}getIndex(){return this.index}setIndex(e){return Array.isArray(e)?this.index=new(xT(e)?EA:MA)(e,1):this.index=e,this}setIndirect(e,t=0){return this.indirect=e,this.indirectOffset=t,this}getIndirect(){return this.indirect}getAttribute(e){return this.attributes[e]}setAttribute(e,t){return this.attributes[e]=t,this}deleteAttribute(e){return delete this.attributes[e],this}hasAttribute(e){return this.attributes[e]!==void 0}addGroup(e,t,i=0){this.groups.push({start:e,count:t,materialIndex:i})}clearGroups(){this.groups=[]}setDrawRange(e,t){this.drawRange.start=e,this.drawRange.count=t}applyMatrix4(e){const t=this.attributes.position;t!==void 0&&(t.applyMatrix4(e),t.needsUpdate=!0);const i=this.attributes.normal;if(i!==void 0){const s=new Zt().getNormalMatrix(e);i.applyNormalMatrix(s),i.needsUpdate=!0}const a=this.attributes.tangent;return a!==void 0&&(a.transformDirection(e),a.needsUpdate=!0),this.boundingBox!==null&&this.computeBoundingBox(),this.boundingSphere!==null&&this.computeBoundingSphere(),this}applyQuaternion(e){return ys.makeRotationFromQuaternion(e),this.applyMatrix4(ys),this}rotateX(e){return ys.makeRotationX(e),this.applyMatrix4(ys),this}rotateY(e){return ys.makeRotationY(e),this.applyMatrix4(ys),this}rotateZ(e){return ys.makeRotationZ(e),this.applyMatrix4(ys),this}translate(e,t,i){return ys.makeTranslation(e,t,i),this.applyMatrix4(ys),this}scale(e,t,i){return ys.makeScale(e,t,i),this.applyMatrix4(ys),this}lookAt(e){return TA.lookAt(e),TA.updateMatrix(),this.applyMatrix4(TA.matrix),this}center(){return this.computeBoundingBox(),this.boundingBox.getCenter(Zh).negate(),this.translate(Zh.x,Zh.y,Zh.z),this}setFromPoints(e){const t=this.getAttribute("position");if(t===void 0){const i=[];for(let a=0,s=e.length;a<s;a++){const l=e[a];i.push(l.x,l.y,l.z||0)}this.setAttribute("position",new _t(i,3))}else{const i=Math.min(e.length,t.count);for(let a=0;a<i;a++){const s=e[a];t.setXYZ(a,s.x,s.y,s.z||0)}e.length>t.count&&ct("BufferGeometry: Buffer size too small for points data. Use .dispose() and create a new geometry."),t.needsUpdate=!0}return this}computeBoundingBox(){this.boundingBox===null&&(this.boundingBox=new Sa);const e=this.attributes.position,t=this.morphAttributes.position;if(e&&e.isGLBufferAttribute){Dt("BufferGeometry.computeBoundingBox(): GLBufferAttribute requires a manual bounding box.",this),this.boundingBox.set(new K(-1/0,-1/0,-1/0),new K(1/0,1/0,1/0));return}if(e!==void 0){if(this.boundingBox.setFromBufferAttribute(e),t)for(let i=0,a=t.length;i<a;i++){const s=t[i];Zr.setFromBufferAttribute(s),this.morphTargetsRelative?(fa.addVectors(this.boundingBox.min,Zr.min),this.boundingBox.expandByPoint(fa),fa.addVectors(this.boundingBox.max,Zr.max),this.boundingBox.expandByPoint(fa)):(this.boundingBox.expandByPoint(Zr.min),this.boundingBox.expandByPoint(Zr.max))}}else this.boundingBox.makeEmpty();(isNaN(this.boundingBox.min.x)||isNaN(this.boundingBox.min.y)||isNaN(this.boundingBox.min.z))&&Dt('BufferGeometry.computeBoundingBox(): Computed min/max have NaN values. The "position" attribute is likely to have NaN values.',this)}computeBoundingSphere(){this.boundingSphere===null&&(this.boundingSphere=new ua);const e=this.attributes.position,t=this.morphAttributes.position;if(e&&e.isGLBufferAttribute){Dt("BufferGeometry.computeBoundingSphere(): GLBufferAttribute requires a manual bounding sphere.",this),this.boundingSphere.set(new K,1/0);return}if(e){const i=this.boundingSphere.center;if(Zr.setFromBufferAttribute(e),t)for(let s=0,l=t.length;s<l;s++){const c=t[s];ym.setFromBufferAttribute(c),this.morphTargetsRelative?(fa.addVectors(Zr.min,ym.min),Zr.expandByPoint(fa),fa.addVectors(Zr.max,ym.max),Zr.expandByPoint(fa)):(Zr.expandByPoint(ym.min),Zr.expandByPoint(ym.max))}Zr.getCenter(i);let a=0;for(let s=0,l=e.count;s<l;s++)fa.fromBufferAttribute(e,s),a=Math.max(a,i.distanceToSquared(fa));if(t)for(let s=0,l=t.length;s<l;s++){const c=t[s],d=this.morphTargetsRelative;for(let p=0,g=c.count;p<g;p++)fa.fromBufferAttribute(c,p),d&&(Zh.fromBufferAttribute(e,p),fa.add(Zh)),a=Math.max(a,i.distanceToSquared(fa))}this.boundingSphere.radius=Math.sqrt(a),isNaN(this.boundingSphere.radius)&&Dt('BufferGeometry.computeBoundingSphere(): Computed radius is NaN. The "position" attribute is likely to have NaN values.',this)}}computeTangents(){const e=this.index,t=this.attributes;if(e===null||t.position===void 0||t.normal===void 0||t.uv===void 0){Dt("BufferGeometry: .computeTangents() failed. Missing required attributes (index, position, normal or uv)");return}const i=t.position,a=t.normal,s=t.uv;this.hasAttribute("tangent")===!1&&this.setAttribute("tangent",new Rn(new Float32Array(4*i.count),4));const l=this.getAttribute("tangent"),c=[],d=[];for(let j=0;j<i.count;j++)c[j]=new K,d[j]=new K;const p=new K,g=new K,v=new K,_=new He,x=new He,S=new He,C=new K,T=new K;function M(j,L,F){p.fromBufferAttribute(i,j),g.fromBufferAttribute(i,L),v.fromBufferAttribute(i,F),_.fromBufferAttribute(s,j),x.fromBufferAttribute(s,L),S.fromBufferAttribute(s,F),g.sub(p),v.sub(p),x.sub(_),S.sub(_);const W=1/(x.x*S.y-S.x*x.y);isFinite(W)&&(C.copy(g).multiplyScalar(S.y).addScaledVector(v,-x.y).multiplyScalar(W),T.copy(v).multiplyScalar(x.x).addScaledVector(g,-S.x).multiplyScalar(W),c[j].add(C),c[L].add(C),c[F].add(C),d[j].add(T),d[L].add(T),d[F].add(T))}let w=this.groups;w.length===0&&(w=[{start:0,count:e.count}]);for(let j=0,L=w.length;j<L;++j){const F=w[j],W=F.start,te=F.count;for(let $=W,ae=W+te;$<ae;$+=3)M(e.getX($+0),e.getX($+1),e.getX($+2))}const B=new K,D=new K,P=new K,U=new K;function z(j){P.fromBufferAttribute(a,j),U.copy(P);const L=c[j];B.copy(L),B.sub(P.multiplyScalar(P.dot(L))).normalize(),D.crossVectors(U,L);const W=D.dot(d[j])<0?-1:1;l.setXYZW(j,B.x,B.y,B.z,W)}for(let j=0,L=w.length;j<L;++j){const F=w[j],W=F.start,te=F.count;for(let $=W,ae=W+te;$<ae;$+=3)z(e.getX($+0)),z(e.getX($+1)),z(e.getX($+2))}}computeVertexNormals(){const e=this.index,t=this.getAttribute("position");if(t!==void 0){let i=this.getAttribute("normal");if(i===void 0)i=new Rn(new Float32Array(t.count*3),3),this.setAttribute("normal",i);else for(let _=0,x=i.count;_<x;_++)i.setXYZ(_,0,0,0);const a=new K,s=new K,l=new K,c=new K,d=new K,p=new K,g=new K,v=new K;if(e)for(let _=0,x=e.count;_<x;_+=3){const S=e.getX(_+0),C=e.getX(_+1),T=e.getX(_+2);a.fromBufferAttribute(t,S),s.fromBufferAttribute(t,C),l.fromBufferAttribute(t,T),g.subVectors(l,s),v.subVectors(a,s),g.cross(v),c.fromBufferAttribute(i,S),d.fromBufferAttribute(i,C),p.fromBufferAttribute(i,T),c.add(g),d.add(g),p.add(g),i.setXYZ(S,c.x,c.y,c.z),i.setXYZ(C,d.x,d.y,d.z),i.setXYZ(T,p.x,p.y,p.z)}else for(let _=0,x=t.count;_<x;_+=3)a.fromBufferAttribute(t,_+0),s.fromBufferAttribute(t,_+1),l.fromBufferAttribute(t,_+2),g.subVectors(l,s),v.subVectors(a,s),g.cross(v),i.setXYZ(_+0,g.x,g.y,g.z),i.setXYZ(_+1,g.x,g.y,g.z),i.setXYZ(_+2,g.x,g.y,g.z);this.normalizeNormals(),i.needsUpdate=!0}}normalizeNormals(){const e=this.attributes.normal;for(let t=0,i=e.count;t<i;t++)fa.fromBufferAttribute(e,t),fa.normalize(),e.setXYZ(t,fa.x,fa.y,fa.z)}toNonIndexed(){function e(c,d){const p=c.array,g=c.itemSize,v=c.normalized,_=new p.constructor(d.length*g);let x=0,S=0;for(let C=0,T=d.length;C<T;C++){c.isInterleavedBufferAttribute?x=d[C]*c.data.stride+c.offset:x=d[C]*g;for(let M=0;M<g;M++)_[S++]=p[x++]}return new Rn(_,g,v)}if(this.index===null)return ct("BufferGeometry.toNonIndexed(): BufferGeometry is already non-indexed."),this;const t=new Jt,i=this.index.array,a=this.attributes;for(const c in a){const d=a[c],p=e(d,i);t.setAttribute(c,p)}const s=this.morphAttributes;for(const c in s){const d=[],p=s[c];for(let g=0,v=p.length;g<v;g++){const _=p[g],x=e(_,i);d.push(x)}t.morphAttributes[c]=d}t.morphTargetsRelative=this.morphTargetsRelative;const l=this.groups;for(let c=0,d=l.length;c<d;c++){const p=l[c];t.addGroup(p.start,p.count,p.materialIndex)}return t}toJSON(){const e={metadata:{version:4.7,type:"BufferGeometry",generator:"BufferGeometry.toJSON"}};if(e.uuid=this.uuid,e.type=this.type,this.name!==""&&(e.name=this.name),Object.keys(this.userData).length>0&&(e.userData=this.userData),this.parameters!==void 0){const d=this.parameters;for(const p in d)d[p]!==void 0&&(e[p]=d[p]);return e}e.data={attributes:{}};const t=this.index;t!==null&&(e.data.index={type:t.array.constructor.name,array:Array.prototype.slice.call(t.array)});const i=this.attributes;for(const d in i){const p=i[d];e.data.attributes[d]=p.toJSON(e.data)}const a={};let s=!1;for(const d in this.morphAttributes){const p=this.morphAttributes[d],g=[];for(let v=0,_=p.length;v<_;v++){const x=p[v];g.push(x.toJSON(e.data))}g.length>0&&(a[d]=g,s=!0)}s&&(e.data.morphAttributes=a,e.data.morphTargetsRelative=this.morphTargetsRelative);const l=this.groups;l.length>0&&(e.data.groups=JSON.parse(JSON.stringify(l)));const c=this.boundingSphere;return c!==null&&(e.data.boundingSphere=c.toJSON()),e}clone(){return new this.constructor().copy(this)}copy(e){this.index=null,this.attributes={},this.morphAttributes={},this.groups=[],this.boundingBox=null,this.boundingSphere=null;const t={};this.name=e.name;const i=e.index;i!==null&&this.setIndex(i.clone());const a=e.attributes;for(const p in a){const g=a[p];this.setAttribute(p,g.clone(t))}const s=e.morphAttributes;for(const p in s){const g=[],v=s[p];for(let _=0,x=v.length;_<x;_++)g.push(v[_].clone(t));this.morphAttributes[p]=g}this.morphTargetsRelative=e.morphTargetsRelative;const l=e.groups;for(let p=0,g=l.length;p<g;p++){const v=l[p];this.addGroup(v.start,v.count,v.materialIndex)}const c=e.boundingBox;c!==null&&(this.boundingBox=c.clone());const d=e.boundingSphere;return d!==null&&(this.boundingSphere=d.clone()),this.drawRange.start=e.drawRange.start,this.drawRange.count=e.drawRange.count,this.userData=e.userData,this}dispose(){this.dispatchEvent({type:"dispose"})}}const FT=new It,nf=new jh,oy=new ua,zT=new K,ly=new K,cy=new K,uy=new K,CA=new K,fy=new K,HT=new K,hy=new K;class Ii extends dn{constructor(e=new Jt,t=new Qr){super(),this.isMesh=!0,this.type="Mesh",this.geometry=e,this.material=t,this.morphTargetDictionary=void 0,this.morphTargetInfluences=void 0,this.count=1,this.updateMorphTargets()}copy(e,t){return super.copy(e,t),e.morphTargetInfluences!==void 0&&(this.morphTargetInfluences=e.morphTargetInfluences.slice()),e.morphTargetDictionary!==void 0&&(this.morphTargetDictionary=Object.assign({},e.morphTargetDictionary)),this.material=Array.isArray(e.material)?e.material.slice():e.material,this.geometry=e.geometry,this}updateMorphTargets(){const t=this.geometry.morphAttributes,i=Object.keys(t);if(i.length>0){const a=t[i[0]];if(a!==void 0){this.morphTargetInfluences=[],this.morphTargetDictionary={};for(let s=0,l=a.length;s<l;s++){const c=a[s].name||String(s);this.morphTargetInfluences.push(0),this.morphTargetDictionary[c]=s}}}}getVertexPosition(e,t){const i=this.geometry,a=i.attributes.position,s=i.morphAttributes.position,l=i.morphTargetsRelative;t.fromBufferAttribute(a,e);const c=this.morphTargetInfluences;if(s&&c){fy.set(0,0,0);for(let d=0,p=s.length;d<p;d++){const g=c[d],v=s[d];g!==0&&(CA.fromBufferAttribute(v,e),l?fy.addScaledVector(CA,g):fy.addScaledVector(CA.sub(t),g))}t.add(fy)}return t}raycast(e,t){const i=this.geometry,a=this.material,s=this.matrixWorld;a!==void 0&&(i.boundingSphere===null&&i.computeBoundingSphere(),oy.copy(i.boundingSphere),oy.applyMatrix4(s),nf.copy(e.ray).recast(e.near),!(oy.containsPoint(nf.origin)===!1&&(nf.intersectSphere(oy,zT)===null||nf.origin.distanceToSquared(zT)>(e.far-e.near)**2))&&(FT.copy(s).invert(),nf.copy(e.ray).applyMatrix4(FT),!(i.boundingBox!==null&&nf.intersectsBox(i.boundingBox)===!1)&&this._computeIntersections(e,t,nf)))}_computeIntersections(e,t,i){let a;const s=this.geometry,l=this.material,c=s.index,d=s.attributes.position,p=s.attributes.uv,g=s.attributes.uv1,v=s.attributes.normal,_=s.groups,x=s.drawRange;if(c!==null)if(Array.isArray(l))for(let S=0,C=_.length;S<C;S++){const T=_[S],M=l[T.materialIndex],w=Math.max(T.start,x.start),B=Math.min(c.count,Math.min(T.start+T.count,x.start+x.count));for(let D=w,P=B;D<P;D+=3){const U=c.getX(D),z=c.getX(D+1),j=c.getX(D+2);a=dy(this,M,e,i,p,g,v,U,z,j),a&&(a.faceIndex=Math.floor(D/3),a.face.materialIndex=T.materialIndex,t.push(a))}}else{const S=Math.max(0,x.start),C=Math.min(c.count,x.start+x.count);for(let T=S,M=C;T<M;T+=3){const w=c.getX(T),B=c.getX(T+1),D=c.getX(T+2);a=dy(this,l,e,i,p,g,v,w,B,D),a&&(a.faceIndex=Math.floor(T/3),t.push(a))}}else if(d!==void 0)if(Array.isArray(l))for(let S=0,C=_.length;S<C;S++){const T=_[S],M=l[T.materialIndex],w=Math.max(T.start,x.start),B=Math.min(d.count,Math.min(T.start+T.count,x.start+x.count));for(let D=w,P=B;D<P;D+=3){const U=D,z=D+1,j=D+2;a=dy(this,M,e,i,p,g,v,U,z,j),a&&(a.faceIndex=Math.floor(D/3),a.face.materialIndex=T.materialIndex,t.push(a))}}else{const S=Math.max(0,x.start),C=Math.min(d.count,x.start+x.count);for(let T=S,M=C;T<M;T+=3){const w=T,B=T+1,D=T+2;a=dy(this,l,e,i,p,g,v,w,B,D),a&&(a.faceIndex=Math.floor(T/3),t.push(a))}}}}function eL(n,e,t,i,a,s,l,c){let d;if(e.side===$a?d=i.intersectTriangle(l,s,a,!0,c):d=i.intersectTriangle(a,s,l,e.side===Bo,c),d===null)return null;hy.copy(c),hy.applyMatrix4(n.matrixWorld);const p=t.ray.origin.distanceTo(hy);return p<t.near||p>t.far?null:{distance:p,point:hy.clone(),object:n}}function dy(n,e,t,i,a,s,l,c,d,p){n.getVertexPosition(c,ly),n.getVertexPosition(d,cy),n.getVertexPosition(p,uy);const g=eL(n,e,t,i,ly,cy,uy,HT);if(g){const v=new K;Br.getBarycoord(HT,ly,cy,uy,v),a&&(g.uv=Br.getInterpolatedAttribute(a,c,d,p,v,new He)),s&&(g.uv1=Br.getInterpolatedAttribute(s,c,d,p,v,new He)),l&&(g.normal=Br.getInterpolatedAttribute(l,c,d,p,v,new K),g.normal.dot(i.direction)>0&&g.normal.multiplyScalar(-1));const _={a:c,b:d,c:p,normal:new K,materialIndex:0};Br.getNormal(ly,cy,uy,_.normal),g.face=_,g.barycoord=v}return g}class af extends Jt{constructor(e=1,t=1,i=1,a=1,s=1,l=1){super(),this.type="BoxGeometry",this.parameters={width:e,height:t,depth:i,widthSegments:a,heightSegments:s,depthSegments:l};const c=this;a=Math.floor(a),s=Math.floor(s),l=Math.floor(l);const d=[],p=[],g=[],v=[];let _=0,x=0;S("z","y","x",-1,-1,i,t,e,l,s,0),S("z","y","x",1,-1,i,t,-e,l,s,1),S("x","z","y",1,1,e,i,t,a,l,2),S("x","z","y",1,-1,e,i,-t,a,l,3),S("x","y","z",1,-1,e,t,i,a,s,4),S("x","y","z",-1,-1,e,t,-i,a,s,5),this.setIndex(d),this.setAttribute("position",new _t(p,3)),this.setAttribute("normal",new _t(g,3)),this.setAttribute("uv",new _t(v,2));function S(C,T,M,w,B,D,P,U,z,j,L){const F=D/z,W=P/j,te=D/2,$=P/2,ae=U/2,le=z+1,G=j+1;let J=0,Z=0;const pe=new K;for(let _e=0;_e<G;_e++){const q=_e*W-$;for(let ce=0;ce<le;ce++){const Te=ce*F-te;pe[C]=Te*w,pe[T]=q*B,pe[M]=ae,p.push(pe.x,pe.y,pe.z),pe[C]=0,pe[T]=0,pe[M]=U>0?1:-1,g.push(pe.x,pe.y,pe.z),v.push(ce/z),v.push(1-_e/j),J+=1}}for(let _e=0;_e<j;_e++)for(let q=0;q<z;q++){const ce=_+q+le*_e,Te=_+q+le*(_e+1),De=_+(q+1)+le*(_e+1),qe=_+(q+1)+le*_e;d.push(ce,Te,qe),d.push(Te,De,qe),Z+=6}c.addGroup(x,Z,L),x+=Z,_+=J}}copy(e){return super.copy(e),this.parameters=Object.assign({},e.parameters),this}static fromJSON(e){return new af(e.width,e.height,e.depth,e.widthSegments,e.heightSegments,e.depthSegments)}}function $h(n){const e={};for(const t in n){e[t]={};for(const i in n[t]){const a=n[t][i];a&&(a.isColor||a.isMatrix3||a.isMatrix4||a.isVector2||a.isVector3||a.isVector4||a.isTexture||a.isQuaternion)?a.isRenderTargetTexture?(ct("UniformsUtils: Textures of render targets cannot be cloned via cloneUniforms() or mergeUniforms()."),e[t][i]=null):e[t][i]=a.clone():Array.isArray(a)?e[t][i]=a.slice():e[t][i]=a}}return e}function ar(n){const e={};for(let t=0;t<n.length;t++){const i=$h(n[t]);for(const a in i)e[a]=i[a]}return e}function tL(n){const e=[];for(let t=0;t<n.length;t++)e.push(n[t].clone());return e}function GT(n){const e=n.getRenderTarget();return e===null?n.outputColorSpace:e.isXRRenderTarget===!0?e.texture.colorSpace:vn.workingColorSpace}const VT={clone:$h,merge:ar};var nL=`void main() {
	gl_Position = projectionMatrix * modelViewMatrix * vec4( position, 1.0 );
}`,iL=`void main() {
	gl_FragColor = vec4( 1.0, 0.0, 0.0, 1.0 );
}`;class _s extends Li{constructor(e){super(),this.isShaderMaterial=!0,this.type="ShaderMaterial",this.defines={},this.uniforms={},this.uniformsGroups=[],this.vertexShader=nL,this.fragmentShader=iL,this.linewidth=1,this.wireframe=!1,this.wireframeLinewidth=1,this.fog=!1,this.lights=!1,this.clipping=!1,this.forceSinglePass=!0,this.extensions={clipCullDistance:!1,multiDraw:!1},this.defaultAttributeValues={color:[1,1,1],uv:[0,0],uv1:[0,0]},this.index0AttributeName=void 0,this.uniformsNeedUpdate=!1,this.glslVersion=null,e!==void 0&&this.setValues(e)}copy(e){return super.copy(e),this.fragmentShader=e.fragmentShader,this.vertexShader=e.vertexShader,this.uniforms=$h(e.uniforms),this.uniformsGroups=tL(e.uniformsGroups),this.defines=Object.assign({},e.defines),this.wireframe=e.wireframe,this.wireframeLinewidth=e.wireframeLinewidth,this.fog=e.fog,this.lights=e.lights,this.clipping=e.clipping,this.extensions=Object.assign({},e.extensions),this.glslVersion=e.glslVersion,this.defaultAttributeValues=Object.assign({},e.defaultAttributeValues),this.index0AttributeName=e.index0AttributeName,this.uniformsNeedUpdate=e.uniformsNeedUpdate,this}toJSON(e){const t=super.toJSON(e);t.glslVersion=this.glslVersion,t.uniforms={};for(const a in this.uniforms){const l=this.uniforms[a].value;l&&l.isTexture?t.uniforms[a]={type:"t",value:l.toJSON(e).uuid}:l&&l.isColor?t.uniforms[a]={type:"c",value:l.getHex()}:l&&l.isVector2?t.uniforms[a]={type:"v2",value:l.toArray()}:l&&l.isVector3?t.uniforms[a]={type:"v3",value:l.toArray()}:l&&l.isVector4?t.uniforms[a]={type:"v4",value:l.toArray()}:l&&l.isMatrix3?t.uniforms[a]={type:"m3",value:l.toArray()}:l&&l.isMatrix4?t.uniforms[a]={type:"m4",value:l.toArray()}:t.uniforms[a]={value:l}}Object.keys(this.defines).length>0&&(t.defines=this.defines),t.vertexShader=this.vertexShader,t.fragmentShader=this.fragmentShader,t.lights=this.lights,t.clipping=this.clipping;const i={};for(const a in this.extensions)this.extensions[a]===!0&&(i[a]=!0);return Object.keys(i).length>0&&(t.extensions=i),t}}class py extends dn{constructor(){super(),this.isCamera=!0,this.type="Camera",this.matrixWorldInverse=new It,this.projectionMatrix=new It,this.projectionMatrixInverse=new It,this.coordinateSystem=qr,this._reversedDepth=!1}get reversedDepth(){return this._reversedDepth}copy(e,t){return super.copy(e,t),this.matrixWorldInverse.copy(e.matrixWorldInverse),this.projectionMatrix.copy(e.projectionMatrix),this.projectionMatrixInverse.copy(e.projectionMatrixInverse),this.coordinateSystem=e.coordinateSystem,this}getWorldDirection(e){return super.getWorldDirection(e).negate()}updateMatrixWorld(e){super.updateMatrixWorld(e),this.matrixWorldInverse.copy(this.matrixWorld).invert()}updateWorldMatrix(e,t){super.updateWorldMatrix(e,t),this.matrixWorldInverse.copy(this.matrixWorld).invert()}clone(){return new this.constructor().copy(this)}}const Xc=new K,kT=new He,XT=new He;class Zi extends py{constructor(e=50,t=1,i=.1,a=2e3){super(),this.isPerspectiveCamera=!0,this.type="PerspectiveCamera",this.fov=e,this.zoom=1,this.near=i,this.far=a,this.focus=10,this.aspect=t,this.view=null,this.filmGauge=35,this.filmOffset=0,this.updateProjectionMatrix()}copy(e,t){return super.copy(e,t),this.fov=e.fov,this.zoom=e.zoom,this.near=e.near,this.far=e.far,this.focus=e.focus,this.aspect=e.aspect,this.view=e.view===null?null:Object.assign({},e.view),this.filmGauge=e.filmGauge,this.filmOffset=e.filmOffset,this}setFocalLength(e){const t=.5*this.getFilmHeight()/e;this.fov=zh*2*Math.atan(t),this.updateProjectionMatrix()}getFocalLength(){const e=Math.tan($u*.5*this.fov);return .5*this.getFilmHeight()/e}getEffectiveFOV(){return zh*2*Math.atan(Math.tan($u*.5*this.fov)/this.zoom)}getFilmWidth(){return this.filmGauge*Math.min(this.aspect,1)}getFilmHeight(){return this.filmGauge/Math.max(this.aspect,1)}getViewBounds(e,t,i){Xc.set(-1,-1,.5).applyMatrix4(this.projectionMatrixInverse),t.set(Xc.x,Xc.y).multiplyScalar(-e/Xc.z),Xc.set(1,1,.5).applyMatrix4(this.projectionMatrixInverse),i.set(Xc.x,Xc.y).multiplyScalar(-e/Xc.z)}getViewSize(e,t){return this.getViewBounds(e,kT,XT),t.subVectors(XT,kT)}setViewOffset(e,t,i,a,s,l){this.aspect=e/t,this.view===null&&(this.view={enabled:!0,fullWidth:1,fullHeight:1,offsetX:0,offsetY:0,width:1,height:1}),this.view.enabled=!0,this.view.fullWidth=e,this.view.fullHeight=t,this.view.offsetX=i,this.view.offsetY=a,this.view.width=s,this.view.height=l,this.updateProjectionMatrix()}clearViewOffset(){this.view!==null&&(this.view.enabled=!1),this.updateProjectionMatrix()}updateProjectionMatrix(){const e=this.near;let t=e*Math.tan($u*.5*this.fov)/this.zoom,i=2*t,a=this.aspect*i,s=-.5*a;const l=this.view;if(this.view!==null&&this.view.enabled){const d=l.fullWidth,p=l.fullHeight;s+=l.offsetX*a/d,t-=l.offsetY*i/p,a*=l.width/d,i*=l.height/p}const c=this.filmOffset;c!==0&&(s+=e*c/this.getFilmWidth()),this.projectionMatrix.makePerspective(s,s+a,t,t-i,e,this.far,this.coordinateSystem,this.reversedDepth),this.projectionMatrixInverse.copy(this.projectionMatrix).invert()}toJSON(e){const t=super.toJSON(e);return t.object.fov=this.fov,t.object.zoom=this.zoom,t.object.near=this.near,t.object.far=this.far,t.object.focus=this.focus,t.object.aspect=this.aspect,this.view!==null&&(t.object.view=Object.assign({},this.view)),t.object.filmGauge=this.filmGauge,t.object.filmOffset=this.filmOffset,t}}const ed=-90,td=1;class jT extends dn{constructor(e,t,i){super(),this.type="CubeCamera",this.renderTarget=i,this.coordinateSystem=null,this.activeMipmapLevel=0;const a=new Zi(ed,td,e,t);a.layers=this.layers,this.add(a);const s=new Zi(ed,td,e,t);s.layers=this.layers,this.add(s);const l=new Zi(ed,td,e,t);l.layers=this.layers,this.add(l);const c=new Zi(ed,td,e,t);c.layers=this.layers,this.add(c);const d=new Zi(ed,td,e,t);d.layers=this.layers,this.add(d);const p=new Zi(ed,td,e,t);p.layers=this.layers,this.add(p)}updateCoordinateSystem(){const e=this.coordinateSystem,t=this.children.concat(),[i,a,s,l,c,d]=t;for(const p of t)this.remove(p);if(e===qr)i.up.set(0,1,0),i.lookAt(1,0,0),a.up.set(0,1,0),a.lookAt(-1,0,0),s.up.set(0,0,-1),s.lookAt(0,1,0),l.up.set(0,0,1),l.lookAt(0,-1,0),c.up.set(0,1,0),c.lookAt(0,0,1),d.up.set(0,1,0),d.lookAt(0,0,-1);else if(e===Ih)i.up.set(0,-1,0),i.lookAt(-1,0,0),a.up.set(0,-1,0),a.lookAt(1,0,0),s.up.set(0,0,1),s.lookAt(0,1,0),l.up.set(0,0,-1),l.lookAt(0,-1,0),c.up.set(0,-1,0),c.lookAt(0,0,1),d.up.set(0,-1,0),d.lookAt(0,0,-1);else throw new Error("THREE.CubeCamera.updateCoordinateSystem(): Invalid coordinate system: "+e);for(const p of t)this.add(p),p.updateMatrixWorld()}update(e,t){this.parent===null&&this.updateMatrixWorld();const{renderTarget:i,activeMipmapLevel:a}=this;this.coordinateSystem!==e.coordinateSystem&&(this.coordinateSystem=e.coordinateSystem,this.updateCoordinateSystem());const[s,l,c,d,p,g]=this.children,v=e.getRenderTarget(),_=e.getActiveCubeFace(),x=e.getActiveMipmapLevel(),S=e.xr.enabled;e.xr.enabled=!1;const C=i.texture.generateMipmaps;i.texture.generateMipmaps=!1,e.setRenderTarget(i,0,a),e.render(t,s),e.setRenderTarget(i,1,a),e.render(t,l),e.setRenderTarget(i,2,a),e.render(t,c),e.setRenderTarget(i,3,a),e.render(t,d),e.setRenderTarget(i,4,a),e.render(t,p),i.texture.generateMipmaps=C,e.setRenderTarget(i,5,a),e.render(t,g),e.setRenderTarget(v,_,x),e.xr.enabled=S,i.texture.needsPMREMUpdate=!0}}class _m extends ai{constructor(e=[],t=Oo,i,a,s,l,c,d,p,g){super(e,t,i,a,s,l,c,d,p,g),this.isCubeTexture=!0,this.flipY=!1}get images(){return this.image}set images(e){this.image=e}}class RA extends Jr{constructor(e=1,t={}){super(e,e,t),this.isWebGLCubeRenderTarget=!0;const i={width:e,height:e,depth:1},a=[i,i,i,i,i,i];this.texture=new _m(a),this._setTextureOptions(t),this.texture.isRenderTargetTexture=!0}fromEquirectangularTexture(e,t){this.texture.type=t.type,this.texture.colorSpace=t.colorSpace,this.texture.generateMipmaps=t.generateMipmaps,this.texture.minFilter=t.minFilter,this.texture.magFilter=t.magFilter;const i={uniforms:{tEquirect:{value:null}},vertexShader:`

				varying vec3 vWorldDirection;

				vec3 transformDirection( in vec3 dir, in mat4 matrix ) {

					return normalize( ( matrix * vec4( dir, 0.0 ) ).xyz );

				}

				void main() {

					vWorldDirection = transformDirection( position, modelMatrix );

					#include <begin_vertex>
					#include <project_vertex>

				}
			`,fragmentShader:`

				uniform sampler2D tEquirect;

				varying vec3 vWorldDirection;

				#include <common>

				void main() {

					vec3 direction = normalize( vWorldDirection );

					vec2 sampleUV = equirectUv( direction );

					gl_FragColor = texture2D( tEquirect, sampleUV );

				}
			`},a=new af(5,5,5),s=new _s({name:"CubemapFromEquirect",uniforms:$h(i.uniforms),vertexShader:i.vertexShader,fragmentShader:i.fragmentShader,side:$a,blending:Do});s.uniforms.tEquirect.value=t;const l=new Ii(a,s),c=t.minFilter;return t.minFilter===gs&&(t.minFilter=Zn),new jT(1,10,this).update(e,l),t.minFilter=c,l.geometry.dispose(),l.material.dispose(),this}clear(e,t=!0,i=!0,a=!0){const s=e.getRenderTarget();for(let l=0;l<6;l++)e.setRenderTarget(this,l),e.clear(t,i,a);e.setRenderTarget(s)}}class Ll extends dn{constructor(){super(),this.isGroup=!0,this.type="Group"}}const aL={type:"move"};class my{constructor(){this._targetRay=null,this._grip=null,this._hand=null}getHandSpace(){return this._hand===null&&(this._hand=new Ll,this._hand.matrixAutoUpdate=!1,this._hand.visible=!1,this._hand.joints={},this._hand.inputState={pinching:!1}),this._hand}getTargetRaySpace(){return this._targetRay===null&&(this._targetRay=new Ll,this._targetRay.matrixAutoUpdate=!1,this._targetRay.visible=!1,this._targetRay.hasLinearVelocity=!1,this._targetRay.linearVelocity=new K,this._targetRay.hasAngularVelocity=!1,this._targetRay.angularVelocity=new K),this._targetRay}getGripSpace(){return this._grip===null&&(this._grip=new Ll,this._grip.matrixAutoUpdate=!1,this._grip.visible=!1,this._grip.hasLinearVelocity=!1,this._grip.linearVelocity=new K,this._grip.hasAngularVelocity=!1,this._grip.angularVelocity=new K),this._grip}dispatchEvent(e){return this._targetRay!==null&&this._targetRay.dispatchEvent(e),this._grip!==null&&this._grip.dispatchEvent(e),this._hand!==null&&this._hand.dispatchEvent(e),this}connect(e){if(e&&e.hand){const t=this._hand;if(t)for(const i of e.hand.values())this._getHandJoint(t,i)}return this.dispatchEvent({type:"connected",data:e}),this}disconnect(e){return this.dispatchEvent({type:"disconnected",data:e}),this._targetRay!==null&&(this._targetRay.visible=!1),this._grip!==null&&(this._grip.visible=!1),this._hand!==null&&(this._hand.visible=!1),this}update(e,t,i){let a=null,s=null,l=null;const c=this._targetRay,d=this._grip,p=this._hand;if(e&&t.session.visibilityState!=="visible-blurred"){if(p&&e.hand){l=!0;for(const C of e.hand.values()){const T=t.getJointPose(C,i),M=this._getHandJoint(p,C);T!==null&&(M.matrix.fromArray(T.transform.matrix),M.matrix.decompose(M.position,M.rotation,M.scale),M.matrixWorldNeedsUpdate=!0,M.jointRadius=T.radius),M.visible=T!==null}const g=p.joints["index-finger-tip"],v=p.joints["thumb-tip"],_=g.position.distanceTo(v.position),x=.02,S=.005;p.inputState.pinching&&_>x+S?(p.inputState.pinching=!1,this.dispatchEvent({type:"pinchend",handedness:e.handedness,target:this})):!p.inputState.pinching&&_<=x-S&&(p.inputState.pinching=!0,this.dispatchEvent({type:"pinchstart",handedness:e.handedness,target:this}))}else d!==null&&e.gripSpace&&(s=t.getPose(e.gripSpace,i),s!==null&&(d.matrix.fromArray(s.transform.matrix),d.matrix.decompose(d.position,d.rotation,d.scale),d.matrixWorldNeedsUpdate=!0,s.linearVelocity?(d.hasLinearVelocity=!0,d.linearVelocity.copy(s.linearVelocity)):d.hasLinearVelocity=!1,s.angularVelocity?(d.hasAngularVelocity=!0,d.angularVelocity.copy(s.angularVelocity)):d.hasAngularVelocity=!1));c!==null&&(a=t.getPose(e.targetRaySpace,i),a===null&&s!==null&&(a=s),a!==null&&(c.matrix.fromArray(a.transform.matrix),c.matrix.decompose(c.position,c.rotation,c.scale),c.matrixWorldNeedsUpdate=!0,a.linearVelocity?(c.hasLinearVelocity=!0,c.linearVelocity.copy(a.linearVelocity)):c.hasLinearVelocity=!1,a.angularVelocity?(c.hasAngularVelocity=!0,c.angularVelocity.copy(a.angularVelocity)):c.hasAngularVelocity=!1,this.dispatchEvent(aL)))}return c!==null&&(c.visible=a!==null),d!==null&&(d.visible=s!==null),p!==null&&(p.visible=l!==null),this}_getHandJoint(e,t){if(e.joints[t.jointName]===void 0){const i=new Ll;i.matrixAutoUpdate=!1,i.visible=!1,e.joints[t.jointName]=i,e.add(i)}return e.joints[t.jointName]}}class gy{constructor(e,t=25e-5){this.isFogExp2=!0,this.name="",this.color=new st(e),this.density=t}clone(){return new gy(this.color,this.density)}toJSON(){return{type:"FogExp2",name:this.name,color:this.color.getHex(),density:this.density}}}class vy{constructor(e,t=1,i=1e3){this.isFog=!0,this.name="",this.color=new st(e),this.near=t,this.far=i}clone(){return new vy(this.color,this.near,this.far)}toJSON(){return{type:"Fog",name:this.name,color:this.color.getHex(),near:this.near,far:this.far}}}class wA extends dn{constructor(){super(),this.isScene=!0,this.type="Scene",this.background=null,this.environment=null,this.fog=null,this.backgroundBlurriness=0,this.backgroundIntensity=1,this.backgroundRotation=new wr,this.environmentIntensity=1,this.environmentRotation=new wr,this.overrideMaterial=null,typeof __THREE_DEVTOOLS__<"u"&&__THREE_DEVTOOLS__.dispatchEvent(new CustomEvent("observe",{detail:this}))}copy(e,t){return super.copy(e,t),e.background!==null&&(this.background=e.background.clone()),e.environment!==null&&(this.environment=e.environment.clone()),e.fog!==null&&(this.fog=e.fog.clone()),this.backgroundBlurriness=e.backgroundBlurriness,this.backgroundIntensity=e.backgroundIntensity,this.backgroundRotation.copy(e.backgroundRotation),this.environmentIntensity=e.environmentIntensity,this.environmentRotation.copy(e.environmentRotation),e.overrideMaterial!==null&&(this.overrideMaterial=e.overrideMaterial.clone()),this.matrixAutoUpdate=e.matrixAutoUpdate,this}toJSON(e){const t=super.toJSON(e);return this.fog!==null&&(t.object.fog=this.fog.toJSON()),this.backgroundBlurriness>0&&(t.object.backgroundBlurriness=this.backgroundBlurriness),this.backgroundIntensity!==1&&(t.object.backgroundIntensity=this.backgroundIntensity),t.object.backgroundRotation=this.backgroundRotation.toArray(),this.environmentIntensity!==1&&(t.object.environmentIntensity=this.environmentIntensity),t.object.environmentRotation=this.environmentRotation.toArray(),t}}class xm{constructor(e,t){this.isInterleavedBuffer=!0,this.array=e,this.stride=t,this.count=e!==void 0?e.length/t:0,this.usage=um,this.updateRanges=[],this.version=0,this.uuid=Wr()}onUploadCallback(){}set needsUpdate(e){e===!0&&this.version++}setUsage(e){return this.usage=e,this}addUpdateRange(e,t){this.updateRanges.push({start:e,count:t})}clearUpdateRanges(){this.updateRanges.length=0}copy(e){return this.array=new e.array.constructor(e.array),this.count=e.count,this.stride=e.stride,this.usage=e.usage,this}copyAt(e,t,i){e*=this.stride,i*=t.stride;for(let a=0,s=this.stride;a<s;a++)this.array[e+a]=t.array[i+a];return this}set(e,t=0){return this.array.set(e,t),this}clone(e){e.arrayBuffers===void 0&&(e.arrayBuffers={}),this.array.buffer._uuid===void 0&&(this.array.buffer._uuid=Wr()),e.arrayBuffers[this.array.buffer._uuid]===void 0&&(e.arrayBuffers[this.array.buffer._uuid]=this.array.slice(0).buffer);const t=new this.array.constructor(e.arrayBuffers[this.array.buffer._uuid]),i=new this.constructor(t,this.stride);return i.setUsage(this.usage),i}onUpload(e){return this.onUploadCallback=e,this}toJSON(e){return e.arrayBuffers===void 0&&(e.arrayBuffers={}),this.array.buffer._uuid===void 0&&(this.array.buffer._uuid=Wr()),e.arrayBuffers[this.array.buffer._uuid]===void 0&&(e.arrayBuffers[this.array.buffer._uuid]=Array.from(new Uint32Array(this.array.buffer))),{uuid:this.uuid,buffer:this.array.buffer._uuid,type:this.array.constructor.name,stride:this.stride}}}const rr=new K;class jc{constructor(e,t,i,a=!1){this.isInterleavedBufferAttribute=!0,this.name="",this.data=e,this.itemSize=t,this.offset=i,this.normalized=a}get count(){return this.data.count}get array(){return this.data.array}set needsUpdate(e){this.data.needsUpdate=e}applyMatrix4(e){for(let t=0,i=this.data.count;t<i;t++)rr.fromBufferAttribute(this,t),rr.applyMatrix4(e),this.setXYZ(t,rr.x,rr.y,rr.z);return this}applyNormalMatrix(e){for(let t=0,i=this.count;t<i;t++)rr.fromBufferAttribute(this,t),rr.applyNormalMatrix(e),this.setXYZ(t,rr.x,rr.y,rr.z);return this}transformDirection(e){for(let t=0,i=this.count;t<i;t++)rr.fromBufferAttribute(this,t),rr.transformDirection(e),this.setXYZ(t,rr.x,rr.y,rr.z);return this}getComponent(e,t){let i=this.array[e*this.data.stride+this.offset+t];return this.normalized&&(i=ir(i,this.array)),i}setComponent(e,t,i){return this.normalized&&(i=an(i,this.array)),this.data.array[e*this.data.stride+this.offset+t]=i,this}setX(e,t){return this.normalized&&(t=an(t,this.array)),this.data.array[e*this.data.stride+this.offset]=t,this}setY(e,t){return this.normalized&&(t=an(t,this.array)),this.data.array[e*this.data.stride+this.offset+1]=t,this}setZ(e,t){return this.normalized&&(t=an(t,this.array)),this.data.array[e*this.data.stride+this.offset+2]=t,this}setW(e,t){return this.normalized&&(t=an(t,this.array)),this.data.array[e*this.data.stride+this.offset+3]=t,this}getX(e){let t=this.data.array[e*this.data.stride+this.offset];return this.normalized&&(t=ir(t,this.array)),t}getY(e){let t=this.data.array[e*this.data.stride+this.offset+1];return this.normalized&&(t=ir(t,this.array)),t}getZ(e){let t=this.data.array[e*this.data.stride+this.offset+2];return this.normalized&&(t=ir(t,this.array)),t}getW(e){let t=this.data.array[e*this.data.stride+this.offset+3];return this.normalized&&(t=ir(t,this.array)),t}setXY(e,t,i){return e=e*this.data.stride+this.offset,this.normalized&&(t=an(t,this.array),i=an(i,this.array)),this.data.array[e+0]=t,this.data.array[e+1]=i,this}setXYZ(e,t,i,a){return e=e*this.data.stride+this.offset,this.normalized&&(t=an(t,this.array),i=an(i,this.array),a=an(a,this.array)),this.data.array[e+0]=t,this.data.array[e+1]=i,this.data.array[e+2]=a,this}setXYZW(e,t,i,a,s){return e=e*this.data.stride+this.offset,this.normalized&&(t=an(t,this.array),i=an(i,this.array),a=an(a,this.array),s=an(s,this.array)),this.data.array[e+0]=t,this.data.array[e+1]=i,this.data.array[e+2]=a,this.data.array[e+3]=s,this}clone(e){if(e===void 0){hm("InterleavedBufferAttribute.clone(): Cloning an interleaved buffer attribute will de-interleave buffer data.");const t=[];for(let i=0;i<this.count;i++){const a=i*this.data.stride+this.offset;for(let s=0;s<this.itemSize;s++)t.push(this.data.array[a+s])}return new Rn(new this.array.constructor(t),this.itemSize,this.normalized)}else return e.interleavedBuffers===void 0&&(e.interleavedBuffers={}),e.interleavedBuffers[this.data.uuid]===void 0&&(e.interleavedBuffers[this.data.uuid]=this.data.clone(e)),new jc(e.interleavedBuffers[this.data.uuid],this.itemSize,this.offset,this.normalized)}toJSON(e){if(e===void 0){hm("InterleavedBufferAttribute.toJSON(): Serializing an interleaved buffer attribute will de-interleave buffer data.");const t=[];for(let i=0;i<this.count;i++){const a=i*this.data.stride+this.offset;for(let s=0;s<this.itemSize;s++)t.push(this.data.array[a+s])}return{itemSize:this.itemSize,type:this.array.constructor.name,array:t,normalized:this.normalized}}else return e.interleavedBuffers===void 0&&(e.interleavedBuffers={}),e.interleavedBuffers[this.data.uuid]===void 0&&(e.interleavedBuffers[this.data.uuid]=this.data.toJSON(e)),{isInterleavedBufferAttribute:!0,itemSize:this.itemSize,data:this.data.uuid,offset:this.offset,normalized:this.normalized}}}class BA extends Li{constructor(e){super(),this.isSpriteMaterial=!0,this.type="SpriteMaterial",this.color=new st(16777215),this.map=null,this.alphaMap=null,this.rotation=0,this.sizeAttenuation=!0,this.transparent=!0,this.fog=!0,this.setValues(e)}copy(e){return super.copy(e),this.color.copy(e.color),this.map=e.map,this.alphaMap=e.alphaMap,this.rotation=e.rotation,this.sizeAttenuation=e.sizeAttenuation,this.fog=e.fog,this}}let nd;const bm=new K,id=new K,ad=new K,rd=new He,Am=new He,YT=new It,yy=new K,Sm=new K,_y=new K,qT=new He,DA=new He,WT=new He;class JT extends dn{constructor(e=new BA){if(super(),this.isSprite=!0,this.type="Sprite",nd===void 0){nd=new Jt;const t=new Float32Array([-.5,-.5,0,0,0,.5,-.5,0,1,0,.5,.5,0,1,1,-.5,.5,0,0,1]),i=new xm(t,5);nd.setIndex([0,1,2,0,2,3]),nd.setAttribute("position",new jc(i,3,0,!1)),nd.setAttribute("uv",new jc(i,2,3,!1))}this.geometry=nd,this.material=e,this.center=new He(.5,.5),this.count=1}raycast(e,t){e.camera===null&&Dt('Sprite: "Raycaster.camera" needs to be set in order to raycast against sprites.'),id.setFromMatrixScale(this.matrixWorld),YT.copy(e.camera.matrixWorld),this.modelViewMatrix.multiplyMatrices(e.camera.matrixWorldInverse,this.matrixWorld),ad.setFromMatrixPosition(this.modelViewMatrix),e.camera.isPerspectiveCamera&&this.material.sizeAttenuation===!1&&id.multiplyScalar(-ad.z);const i=this.material.rotation;let a,s;i!==0&&(s=Math.cos(i),a=Math.sin(i));const l=this.center;xy(yy.set(-.5,-.5,0),ad,l,id,a,s),xy(Sm.set(.5,-.5,0),ad,l,id,a,s),xy(_y.set(.5,.5,0),ad,l,id,a,s),qT.set(0,0),DA.set(1,0),WT.set(1,1);let c=e.ray.intersectTriangle(yy,Sm,_y,!1,bm);if(c===null&&(xy(Sm.set(-.5,.5,0),ad,l,id,a,s),DA.set(0,1),c=e.ray.intersectTriangle(yy,_y,Sm,!1,bm),c===null))return;const d=e.ray.origin.distanceTo(bm);d<e.near||d>e.far||t.push({distance:d,point:bm.clone(),uv:Br.getInterpolation(bm,yy,Sm,_y,qT,DA,WT,new He),face:null,object:this})}copy(e,t){return super.copy(e,t),e.center!==void 0&&this.center.copy(e.center),this.material=e.material,this}}function xy(n,e,t,i,a,s){rd.subVectors(n,t).addScalar(.5).multiply(i),a!==void 0?(Am.x=s*rd.x-a*rd.y,Am.y=a*rd.x+s*rd.y):Am.copy(rd),n.copy(e),n.x+=Am.x,n.y+=Am.y,n.applyMatrix4(YT)}const by=new K,KT=new K;class QT extends dn{constructor(){super(),this.isLOD=!0,this._currentLevel=0,this.type="LOD",Object.defineProperties(this,{levels:{enumerable:!0,value:[]}}),this.autoUpdate=!0}copy(e){super.copy(e,!1);const t=e.levels;for(let i=0,a=t.length;i<a;i++){const s=t[i];this.addLevel(s.object.clone(),s.distance,s.hysteresis)}return this.autoUpdate=e.autoUpdate,this}addLevel(e,t=0,i=0){t=Math.abs(t);const a=this.levels;let s;for(s=0;s<a.length&&!(t<a[s].distance);s++);return a.splice(s,0,{distance:t,hysteresis:i,object:e}),this.add(e),this}removeLevel(e){const t=this.levels;for(let i=0;i<t.length;i++)if(t[i].distance===e){const a=t.splice(i,1);return this.remove(a[0].object),!0}return!1}getCurrentLevel(){return this._currentLevel}getObjectForDistance(e){const t=this.levels;if(t.length>0){let i,a;for(i=1,a=t.length;i<a;i++){let s=t[i].distance;if(t[i].object.visible&&(s-=s*t[i].hysteresis),e<s)break}return t[i-1].object}return null}raycast(e,t){if(this.levels.length>0){by.setFromMatrixPosition(this.matrixWorld);const a=e.ray.origin.distanceTo(by);this.getObjectForDistance(a).raycast(e,t)}}update(e){const t=this.levels;if(t.length>1){by.setFromMatrixPosition(e.matrixWorld),KT.setFromMatrixPosition(this.matrixWorld);const i=by.distanceTo(KT)/e.zoom;t[0].object.visible=!0;let a,s;for(a=1,s=t.length;a<s;a++){let l=t[a].distance;if(t[a].object.visible&&(l-=l*t[a].hysteresis),i>=l)t[a-1].object.visible=!1,t[a].object.visible=!0;else break}for(this._currentLevel=a-1;a<s;a++)t[a].object.visible=!1}}toJSON(e){const t=super.toJSON(e);this.autoUpdate===!1&&(t.object.autoUpdate=!1),t.object.levels=[];const i=this.levels;for(let a=0,s=i.length;a<s;a++){const l=i[a];t.object.levels.push({object:l.object.uuid,distance:l.distance,hysteresis:l.hysteresis})}return t}}const ZT=new K,$T=new Fn,eC=new Fn,rL=new K,tC=new It,Ay=new K,OA=new ua,nC=new It,NA=new jh;class UA extends Ii{constructor(e,t){super(e,t),this.isSkinnedMesh=!0,this.type="SkinnedMesh",this.bindMode=qb,this.bindMatrix=new It,this.bindMatrixInverse=new It,this.boundingBox=null,this.boundingSphere=null}computeBoundingBox(){const e=this.geometry;this.boundingBox===null&&(this.boundingBox=new Sa),this.boundingBox.makeEmpty();const t=e.getAttribute("position");for(let i=0;i<t.count;i++)this.getVertexPosition(i,Ay),this.boundingBox.expandByPoint(Ay)}computeBoundingSphere(){const e=this.geometry;this.boundingSphere===null&&(this.boundingSphere=new ua),this.boundingSphere.makeEmpty();const t=e.getAttribute("position");for(let i=0;i<t.count;i++)this.getVertexPosition(i,Ay),this.boundingSphere.expandByPoint(Ay)}copy(e,t){return super.copy(e,t),this.bindMode=e.bindMode,this.bindMatrix.copy(e.bindMatrix),this.bindMatrixInverse.copy(e.bindMatrixInverse),this.skeleton=e.skeleton,e.boundingBox!==null&&(this.boundingBox=e.boundingBox.clone()),e.boundingSphere!==null&&(this.boundingSphere=e.boundingSphere.clone()),this}raycast(e,t){const i=this.material,a=this.matrixWorld;i!==void 0&&(this.boundingSphere===null&&this.computeBoundingSphere(),OA.copy(this.boundingSphere),OA.applyMatrix4(a),e.ray.intersectsSphere(OA)!==!1&&(nC.copy(a).invert(),NA.copy(e.ray).applyMatrix4(nC),!(this.boundingBox!==null&&NA.intersectsBox(this.boundingBox)===!1)&&this._computeIntersections(e,t,NA)))}getVertexPosition(e,t){return super.getVertexPosition(e,t),this.applyBoneTransform(e,t),t}bind(e,t){this.skeleton=e,t===void 0&&(this.updateMatrixWorld(!0),this.skeleton.calculateInverses(),t=this.matrixWorld),this.bindMatrix.copy(t),this.bindMatrixInverse.copy(t).invert()}pose(){this.skeleton.pose()}normalizeSkinWeights(){const e=new Fn,t=this.geometry.attributes.skinWeight;for(let i=0,a=t.count;i<a;i++){e.fromBufferAttribute(t,i);const s=1/e.manhattanLength();s!==1/0?e.multiplyScalar(s):e.set(1,0,0,0),t.setXYZW(i,e.x,e.y,e.z,e.w)}}updateMatrixWorld(e){super.updateMatrixWorld(e),this.bindMode===qb?this.bindMatrixInverse.copy(this.matrixWorld).invert():this.bindMode===oT?this.bindMatrixInverse.copy(this.bindMatrix).invert():ct("SkinnedMesh: Unrecognized bindMode: "+this.bindMode)}applyBoneTransform(e,t){const i=this.skeleton,a=this.geometry;$T.fromBufferAttribute(a.attributes.skinIndex,e),eC.fromBufferAttribute(a.attributes.skinWeight,e),ZT.copy(t).applyMatrix4(this.bindMatrix),t.set(0,0,0);for(let s=0;s<4;s++){const l=eC.getComponent(s);if(l!==0){const c=$T.getComponent(s);tC.multiplyMatrices(i.bones[c].matrixWorld,i.boneInverses[c]),t.addScaledVector(rL.copy(ZT).applyMatrix4(tC),l)}}return t.applyMatrix4(this.bindMatrixInverse)}}class Sy extends dn{constructor(){super(),this.isBone=!0,this.type="Bone"}}class Qs extends ai{constructor(e=null,t=1,i=1,a,s,l,c,d,p=Ei,g=Ei,v,_){super(null,l,c,d,p,g,a,s,v,_),this.isDataTexture=!0,this.image={data:e,width:t,height:i},this.generateMipmaps=!1,this.flipY=!1,this.unpackAlignment=1}}const iC=new It,sL=new It;class Mm{constructor(e=[],t=[]){this.uuid=Wr(),this.bones=e.slice(0),this.boneInverses=t,this.boneMatrices=null,this.previousBoneMatrices=null,this.boneTexture=null,this.init()}init(){const e=this.bones,t=this.boneInverses;if(this.boneMatrices=new Float32Array(e.length*16),t.length===0)this.calculateInverses();else if(e.length!==t.length){ct("Skeleton: Number of inverse bone matrices does not match amount of bones."),this.boneInverses=[];for(let i=0,a=this.bones.length;i<a;i++)this.boneInverses.push(new It)}}calculateInverses(){this.boneInverses.length=0;for(let e=0,t=this.bones.length;e<t;e++){const i=new It;this.bones[e]&&i.copy(this.bones[e].matrixWorld).invert(),this.boneInverses.push(i)}}pose(){for(let e=0,t=this.bones.length;e<t;e++){const i=this.bones[e];i&&i.matrixWorld.copy(this.boneInverses[e]).invert()}for(let e=0,t=this.bones.length;e<t;e++){const i=this.bones[e];i&&(i.parent&&i.parent.isBone?(i.matrix.copy(i.parent.matrixWorld).invert(),i.matrix.multiply(i.matrixWorld)):i.matrix.copy(i.matrixWorld),i.matrix.decompose(i.position,i.quaternion,i.scale))}}update(){const e=this.bones,t=this.boneInverses,i=this.boneMatrices,a=this.boneTexture;for(let s=0,l=e.length;s<l;s++){const c=e[s]?e[s].matrixWorld:sL;iC.multiplyMatrices(c,t[s]),iC.toArray(i,s*16)}a!==null&&(a.needsUpdate=!0)}clone(){return new Mm(this.bones,this.boneInverses)}computeBoneTexture(){let e=Math.sqrt(this.bones.length*4);e=Math.ceil(e/4)*4,e=Math.max(e,4);const t=new Float32Array(e*e*4);t.set(this.boneMatrices);const i=new Qs(t,e,e,Ua,nr);return i.needsUpdate=!0,this.boneMatrices=t,this.boneTexture=i,this}getBoneByName(e){for(let t=0,i=this.bones.length;t<i;t++){const a=this.bones[t];if(a.name===e)return a}}dispose(){this.boneTexture!==null&&(this.boneTexture.dispose(),this.boneTexture=null)}fromJSON(e,t){this.uuid=e.uuid;for(let i=0,a=e.bones.length;i<a;i++){const s=e.bones[i];let l=t[s];l===void 0&&(ct("Skeleton: No bone found with UUID:",s),l=new Sy),this.bones.push(l),this.boneInverses.push(new It().fromArray(e.boneInverses[i]))}return this.init(),this}toJSON(){const e={metadata:{version:4.7,type:"Skeleton",generator:"Skeleton.toJSON"},bones:[],boneInverses:[]};e.uuid=this.uuid;const t=this.bones,i=this.boneInverses;for(let a=0,s=t.length;a<s;a++){const l=t[a];e.bones.push(l.uuid);const c=i[a];e.boneInverses.push(c.toArray())}return e}}class rf extends Rn{constructor(e,t,i,a=1){super(e,t,i),this.isInstancedBufferAttribute=!0,this.meshPerAttribute=a}copy(e){return super.copy(e),this.meshPerAttribute=e.meshPerAttribute,this}toJSON(){const e=super.toJSON();return e.meshPerAttribute=this.meshPerAttribute,e.isInstancedBufferAttribute=!0,e}}const sd=new It,aC=new It,My=[],rC=new Sa,oL=new It,Em=new Ii,Tm=new ua;class LA extends Ii{constructor(e,t,i){super(e,t),this.isInstancedMesh=!0,this.instanceMatrix=new rf(new Float32Array(i*16),16),this.instanceColor=null,this.morphTexture=null,this.count=i,this.boundingBox=null,this.boundingSphere=null;for(let a=0;a<i;a++)this.setMatrixAt(a,oL)}computeBoundingBox(){const e=this.geometry,t=this.count;this.boundingBox===null&&(this.boundingBox=new Sa),e.boundingBox===null&&e.computeBoundingBox(),this.boundingBox.makeEmpty();for(let i=0;i<t;i++)this.getMatrixAt(i,sd),rC.copy(e.boundingBox).applyMatrix4(sd),this.boundingBox.union(rC)}computeBoundingSphere(){const e=this.geometry,t=this.count;this.boundingSphere===null&&(this.boundingSphere=new ua),e.boundingSphere===null&&e.computeBoundingSphere(),this.boundingSphere.makeEmpty();for(let i=0;i<t;i++)this.getMatrixAt(i,sd),Tm.copy(e.boundingSphere).applyMatrix4(sd),this.boundingSphere.union(Tm)}copy(e,t){return super.copy(e,t),this.instanceMatrix.copy(e.instanceMatrix),e.morphTexture!==null&&(this.morphTexture=e.morphTexture.clone()),e.instanceColor!==null&&(this.instanceColor=e.instanceColor.clone()),this.count=e.count,e.boundingBox!==null&&(this.boundingBox=e.boundingBox.clone()),e.boundingSphere!==null&&(this.boundingSphere=e.boundingSphere.clone()),this}getColorAt(e,t){t.fromArray(this.instanceColor.array,e*3)}getMatrixAt(e,t){t.fromArray(this.instanceMatrix.array,e*16)}getMorphAt(e,t){const i=t.morphTargetInfluences,a=this.morphTexture.source.data.data,s=i.length+1,l=e*s+1;for(let c=0;c<i.length;c++)i[c]=a[l+c]}raycast(e,t){const i=this.matrixWorld,a=this.count;if(Em.geometry=this.geometry,Em.material=this.material,Em.material!==void 0&&(this.boundingSphere===null&&this.computeBoundingSphere(),Tm.copy(this.boundingSphere),Tm.applyMatrix4(i),e.ray.intersectsSphere(Tm)!==!1))for(let s=0;s<a;s++){this.getMatrixAt(s,sd),aC.multiplyMatrices(i,sd),Em.matrixWorld=aC,Em.raycast(e,My);for(let l=0,c=My.length;l<c;l++){const d=My[l];d.instanceId=s,d.object=this,t.push(d)}My.length=0}}setColorAt(e,t){this.instanceColor===null&&(this.instanceColor=new rf(new Float32Array(this.instanceMatrix.count*3).fill(1),3)),t.toArray(this.instanceColor.array,e*3)}setMatrixAt(e,t){t.toArray(this.instanceMatrix.array,e*16)}setMorphAt(e,t){const i=t.morphTargetInfluences,a=i.length+1;this.morphTexture===null&&(this.morphTexture=new Qs(new Float32Array(a*this.count),a,this.count,uv,nr));const s=this.morphTexture.source.data.data;let l=0;for(let p=0;p<i.length;p++)l+=i[p];const c=this.geometry.morphTargetsRelative?1:1-l,d=a*e;s[d]=c,s.set(i,d+1)}updateMorphTargets(){}dispose(){this.dispatchEvent({type:"dispose"}),this.morphTexture!==null&&(this.morphTexture.dispose(),this.morphTexture=null)}}const IA=new K,lL=new K,cL=new Zt;class Yc{constructor(e=new K(1,0,0),t=0){this.isPlane=!0,this.normal=e,this.constant=t}set(e,t){return this.normal.copy(e),this.constant=t,this}setComponents(e,t,i,a){return this.normal.set(e,t,i),this.constant=a,this}setFromNormalAndCoplanarPoint(e,t){return this.normal.copy(e),this.constant=-t.dot(this.normal),this}setFromCoplanarPoints(e,t,i){const a=IA.subVectors(i,t).cross(lL.subVectors(e,t)).normalize();return this.setFromNormalAndCoplanarPoint(a,e),this}copy(e){return this.normal.copy(e.normal),this.constant=e.constant,this}normalize(){const e=1/this.normal.length();return this.normal.multiplyScalar(e),this.constant*=e,this}negate(){return this.constant*=-1,this.normal.negate(),this}distanceToPoint(e){return this.normal.dot(e)+this.constant}distanceToSphere(e){return this.distanceToPoint(e.center)-e.radius}projectPoint(e,t){return t.copy(e).addScaledVector(this.normal,-this.distanceToPoint(e))}intersectLine(e,t){const i=e.delta(IA),a=this.normal.dot(i);if(a===0)return this.distanceToPoint(e.start)===0?t.copy(e.start):null;const s=-(e.start.dot(this.normal)+this.constant)/a;return s<0||s>1?null:t.copy(e.start).addScaledVector(i,s)}intersectsLine(e){const t=this.distanceToPoint(e.start),i=this.distanceToPoint(e.end);return t<0&&i>0||i<0&&t>0}intersectsBox(e){return e.intersectsPlane(this)}intersectsSphere(e){return e.intersectsPlane(this)}coplanarPoint(e){return e.copy(this.normal).multiplyScalar(-this.constant)}applyMatrix4(e,t){const i=t||cL.getNormalMatrix(e),a=this.coplanarPoint(IA).applyMatrix4(e),s=this.normal.applyMatrix3(i).normalize();return this.constant=-a.dot(s),this}translate(e){return this.constant-=e.dot(this.normal),this}equals(e){return e.normal.equals(this.normal)&&e.constant===this.constant}clone(){return new this.constructor().copy(this)}}const sf=new ua,uL=new He(.5,.5),Ey=new K;class od{constructor(e=new Yc,t=new Yc,i=new Yc,a=new Yc,s=new Yc,l=new Yc){this.planes=[e,t,i,a,s,l]}set(e,t,i,a,s,l){const c=this.planes;return c[0].copy(e),c[1].copy(t),c[2].copy(i),c[3].copy(a),c[4].copy(s),c[5].copy(l),this}copy(e){const t=this.planes;for(let i=0;i<6;i++)t[i].copy(e.planes[i]);return this}setFromProjectionMatrix(e,t=qr,i=!1){const a=this.planes,s=e.elements,l=s[0],c=s[1],d=s[2],p=s[3],g=s[4],v=s[5],_=s[6],x=s[7],S=s[8],C=s[9],T=s[10],M=s[11],w=s[12],B=s[13],D=s[14],P=s[15];if(a[0].setComponents(p-l,x-g,M-S,P-w).normalize(),a[1].setComponents(p+l,x+g,M+S,P+w).normalize(),a[2].setComponents(p+c,x+v,M+C,P+B).normalize(),a[3].setComponents(p-c,x-v,M-C,P-B).normalize(),i)a[4].setComponents(d,_,T,D).normalize(),a[5].setComponents(p-d,x-_,M-T,P-D).normalize();else if(a[4].setComponents(p-d,x-_,M-T,P-D).normalize(),t===qr)a[5].setComponents(p+d,x+_,M+T,P+D).normalize();else if(t===Ih)a[5].setComponents(d,_,T,D).normalize();else throw new Error("THREE.Frustum.setFromProjectionMatrix(): Invalid coordinate system: "+t);return this}intersectsObject(e){if(e.boundingSphere!==void 0)e.boundingSphere===null&&e.computeBoundingSphere(),sf.copy(e.boundingSphere).applyMatrix4(e.matrixWorld);else{const t=e.geometry;t.boundingSphere===null&&t.computeBoundingSphere(),sf.copy(t.boundingSphere).applyMatrix4(e.matrixWorld)}return this.intersectsSphere(sf)}intersectsSprite(e){sf.center.set(0,0,0);const t=uL.distanceTo(e.center);return sf.radius=.7071067811865476+t,sf.applyMatrix4(e.matrixWorld),this.intersectsSphere(sf)}intersectsSphere(e){const t=this.planes,i=e.center,a=-e.radius;for(let s=0;s<6;s++)if(t[s].distanceToPoint(i)<a)return!1;return!0}intersectsBox(e){const t=this.planes;for(let i=0;i<6;i++){const a=t[i];if(Ey.x=a.normal.x>0?e.max.x:e.min.x,Ey.y=a.normal.y>0?e.max.y:e.min.y,Ey.z=a.normal.z>0?e.max.z:e.min.z,a.distanceToPoint(Ey)<0)return!1}return!0}containsPoint(e){const t=this.planes;for(let i=0;i<6;i++)if(t[i].distanceToPoint(e)<0)return!1;return!0}clone(){return new this.constructor().copy(this)}}const Io=new It,Po=new od;class Ty{constructor(){this.coordinateSystem=qr}intersectsObject(e,t){if(!t.isArrayCamera||t.cameras.length===0)return!1;for(let i=0;i<t.cameras.length;i++){const a=t.cameras[i];if(Io.multiplyMatrices(a.projectionMatrix,a.matrixWorldInverse),Po.setFromProjectionMatrix(Io,a.coordinateSystem,a.reversedDepth),Po.intersectsObject(e))return!0}return!1}intersectsSprite(e,t){if(!t||!t.cameras||t.cameras.length===0)return!1;for(let i=0;i<t.cameras.length;i++){const a=t.cameras[i];if(Io.multiplyMatrices(a.projectionMatrix,a.matrixWorldInverse),Po.setFromProjectionMatrix(Io,a.coordinateSystem,a.reversedDepth),Po.intersectsSprite(e))return!0}return!1}intersectsSphere(e,t){if(!t||!t.cameras||t.cameras.length===0)return!1;for(let i=0;i<t.cameras.length;i++){const a=t.cameras[i];if(Io.multiplyMatrices(a.projectionMatrix,a.matrixWorldInverse),Po.setFromProjectionMatrix(Io,a.coordinateSystem,a.reversedDepth),Po.intersectsSphere(e))return!0}return!1}intersectsBox(e,t){if(!t||!t.cameras||t.cameras.length===0)return!1;for(let i=0;i<t.cameras.length;i++){const a=t.cameras[i];if(Io.multiplyMatrices(a.projectionMatrix,a.matrixWorldInverse),Po.setFromProjectionMatrix(Io,a.coordinateSystem,a.reversedDepth),Po.intersectsBox(e))return!0}return!1}containsPoint(e,t){if(!t||!t.cameras||t.cameras.length===0)return!1;for(let i=0;i<t.cameras.length;i++){const a=t.cameras[i];if(Io.multiplyMatrices(a.projectionMatrix,a.matrixWorldInverse),Po.setFromProjectionMatrix(Io,a.coordinateSystem,a.reversedDepth),Po.containsPoint(e))return!0}return!1}clone(){return new Ty}}function PA(n,e){return n-e}function fL(n,e){return n.z-e.z}function hL(n,e){return e.z-n.z}class dL{constructor(){this.index=0,this.pool=[],this.list=[]}push(e,t,i,a){const s=this.pool,l=this.list;this.index>=s.length&&s.push({start:-1,count:-1,z:-1,index:-1});const c=s[this.index];l.push(c),this.index++,c.start=e,c.count=t,c.z=i,c.index=a}reset(){this.list.length=0,this.index=0}}const Or=new It,pL=new st(1,1,1),sC=new od,mL=new Ty,Cy=new Sa,of=new ua,Cm=new K,oC=new K,gL=new K,FA=new dL,Pa=new Ii,Ry=[];function vL(n,e,t=0){const i=e.itemSize;if(n.isInterleavedBufferAttribute||n.array.constructor!==e.array.constructor){const a=n.count;for(let s=0;s<a;s++)for(let l=0;l<i;l++)e.setComponent(s+t,l,n.getComponent(s,l))}else e.array.set(n.array,t*i);e.needsUpdate=!0}function lf(n,e){if(n.constructor!==e.constructor){const t=Math.min(n.length,e.length);for(let i=0;i<t;i++)e[i]=n[i]}else{const t=Math.min(n.length,e.length);e.set(new n.constructor(n.buffer,0,t))}}class lC extends Ii{constructor(e,t,i=t*2,a){super(new Jt,a),this.isBatchedMesh=!0,this.perObjectFrustumCulled=!0,this.sortObjects=!0,this.boundingBox=null,this.boundingSphere=null,this.customSort=null,this._instanceInfo=[],this._geometryInfo=[],this._availableInstanceIds=[],this._availableGeometryIds=[],this._nextIndexStart=0,this._nextVertexStart=0,this._geometryCount=0,this._visibilityChanged=!0,this._geometryInitialized=!1,this._maxInstanceCount=e,this._maxVertexCount=t,this._maxIndexCount=i,this._multiDrawCounts=new Int32Array(e),this._multiDrawStarts=new Int32Array(e),this._multiDrawCount=0,this._multiDrawInstances=null,this._matricesTexture=null,this._indirectTexture=null,this._colorsTexture=null,this._initMatricesTexture(),this._initIndirectTexture()}get maxInstanceCount(){return this._maxInstanceCount}get instanceCount(){return this._instanceInfo.length-this._availableInstanceIds.length}get unusedVertexCount(){return this._maxVertexCount-this._nextVertexStart}get unusedIndexCount(){return this._maxIndexCount-this._nextIndexStart}_initMatricesTexture(){let e=Math.sqrt(this._maxInstanceCount*4);e=Math.ceil(e/4)*4,e=Math.max(e,4);const t=new Float32Array(e*e*4),i=new Qs(t,e,e,Ua,nr);this._matricesTexture=i}_initIndirectTexture(){let e=Math.sqrt(this._maxInstanceCount);e=Math.ceil(e);const t=new Uint32Array(e*e),i=new Qs(t,e,e,im,vs);this._indirectTexture=i}_initColorsTexture(){let e=Math.sqrt(this._maxInstanceCount);e=Math.ceil(e);const t=new Float32Array(e*e*4).fill(1),i=new Qs(t,e,e,Ua,nr);i.colorSpace=vn.workingColorSpace,this._colorsTexture=i}_initializeGeometry(e){const t=this.geometry,i=this._maxVertexCount,a=this._maxIndexCount;if(this._geometryInitialized===!1){for(const s in e.attributes){const l=e.getAttribute(s),{array:c,itemSize:d,normalized:p}=l,g=new c.constructor(i*d),v=new Rn(g,d,p);t.setAttribute(s,v)}if(e.getIndex()!==null){const s=i>65535?new Uint32Array(a):new Uint16Array(a);t.setIndex(new Rn(s,1))}this._geometryInitialized=!0}}_validateGeometry(e){const t=this.geometry;if(!!e.getIndex()!=!!t.getIndex())throw new Error('THREE.BatchedMesh: All geometries must consistently have "index".');for(const i in t.attributes){if(!e.hasAttribute(i))throw new Error(`THREE.BatchedMesh: Added geometry missing "${i}". All geometries must have consistent attributes.`);const a=e.getAttribute(i),s=t.getAttribute(i);if(a.itemSize!==s.itemSize||a.normalized!==s.normalized)throw new Error("THREE.BatchedMesh: All attributes must have a consistent itemSize and normalized value.")}}validateInstanceId(e){const t=this._instanceInfo;if(e<0||e>=t.length||t[e].active===!1)throw new Error(`THREE.BatchedMesh: Invalid instanceId ${e}. Instance is either out of range or has been deleted.`)}validateGeometryId(e){const t=this._geometryInfo;if(e<0||e>=t.length||t[e].active===!1)throw new Error(`THREE.BatchedMesh: Invalid geometryId ${e}. Geometry is either out of range or has been deleted.`)}setCustomSort(e){return this.customSort=e,this}computeBoundingBox(){this.boundingBox===null&&(this.boundingBox=new Sa);const e=this.boundingBox,t=this._instanceInfo;e.makeEmpty();for(let i=0,a=t.length;i<a;i++){if(t[i].active===!1)continue;const s=t[i].geometryIndex;this.getMatrixAt(i,Or),this.getBoundingBoxAt(s,Cy).applyMatrix4(Or),e.union(Cy)}}computeBoundingSphere(){this.boundingSphere===null&&(this.boundingSphere=new ua);const e=this.boundingSphere,t=this._instanceInfo;e.makeEmpty();for(let i=0,a=t.length;i<a;i++){if(t[i].active===!1)continue;const s=t[i].geometryIndex;this.getMatrixAt(i,Or),this.getBoundingSphereAt(s,of).applyMatrix4(Or),e.union(of)}}addInstance(e){if(this._instanceInfo.length>=this.maxInstanceCount&&this._availableInstanceIds.length===0)throw new Error("THREE.BatchedMesh: Maximum item count reached.");const i={visible:!0,active:!0,geometryIndex:e};let a=null;this._availableInstanceIds.length>0?(this._availableInstanceIds.sort(PA),a=this._availableInstanceIds.shift(),this._instanceInfo[a]=i):(a=this._instanceInfo.length,this._instanceInfo.push(i));const s=this._matricesTexture;Or.identity().toArray(s.image.data,a*16),s.needsUpdate=!0;const l=this._colorsTexture;return l&&(pL.toArray(l.image.data,a*4),l.needsUpdate=!0),this._visibilityChanged=!0,a}addGeometry(e,t=-1,i=-1){this._initializeGeometry(e),this._validateGeometry(e);const a={vertexStart:-1,vertexCount:-1,reservedVertexCount:-1,indexStart:-1,indexCount:-1,reservedIndexCount:-1,start:-1,count:-1,boundingBox:null,boundingSphere:null,active:!0},s=this._geometryInfo;a.vertexStart=this._nextVertexStart,a.reservedVertexCount=t===-1?e.getAttribute("position").count:t;const l=e.getIndex();if(l!==null&&(a.indexStart=this._nextIndexStart,a.reservedIndexCount=i===-1?l.count:i),a.indexStart!==-1&&a.indexStart+a.reservedIndexCount>this._maxIndexCount||a.vertexStart+a.reservedVertexCount>this._maxVertexCount)throw new Error("THREE.BatchedMesh: Reserved space request exceeds the maximum buffer size.");let d;return this._availableGeometryIds.length>0?(this._availableGeometryIds.sort(PA),d=this._availableGeometryIds.shift(),s[d]=a):(d=this._geometryCount,this._geometryCount++,s.push(a)),this.setGeometryAt(d,e),this._nextIndexStart=a.indexStart+a.reservedIndexCount,this._nextVertexStart=a.vertexStart+a.reservedVertexCount,d}setGeometryAt(e,t){if(e>=this._geometryCount)throw new Error("THREE.BatchedMesh: Maximum geometry count reached.");this._validateGeometry(t);const i=this.geometry,a=i.getIndex()!==null,s=i.getIndex(),l=t.getIndex(),c=this._geometryInfo[e];if(a&&l.count>c.reservedIndexCount||t.attributes.position.count>c.reservedVertexCount)throw new Error("THREE.BatchedMesh: Reserved space not large enough for provided geometry.");const d=c.vertexStart,p=c.reservedVertexCount;c.vertexCount=t.getAttribute("position").count;for(const g in i.attributes){const v=t.getAttribute(g),_=i.getAttribute(g);vL(v,_,d);const x=v.itemSize;for(let S=v.count,C=p;S<C;S++){const T=d+S;for(let M=0;M<x;M++)_.setComponent(T,M,0)}_.needsUpdate=!0,_.addUpdateRange(d*x,p*x)}if(a){const g=c.indexStart,v=c.reservedIndexCount;c.indexCount=t.getIndex().count;for(let _=0;_<l.count;_++)s.setX(g+_,d+l.getX(_));for(let _=l.count,x=v;_<x;_++)s.setX(g+_,d);s.needsUpdate=!0,s.addUpdateRange(g,c.reservedIndexCount)}return c.start=a?c.indexStart:c.vertexStart,c.count=a?c.indexCount:c.vertexCount,c.boundingBox=null,t.boundingBox!==null&&(c.boundingBox=t.boundingBox.clone()),c.boundingSphere=null,t.boundingSphere!==null&&(c.boundingSphere=t.boundingSphere.clone()),this._visibilityChanged=!0,e}deleteGeometry(e){const t=this._geometryInfo;if(e>=t.length||t[e].active===!1)return this;const i=this._instanceInfo;for(let a=0,s=i.length;a<s;a++)i[a].active&&i[a].geometryIndex===e&&this.deleteInstance(a);return t[e].active=!1,this._availableGeometryIds.push(e),this._visibilityChanged=!0,this}deleteInstance(e){return this.validateInstanceId(e),this._instanceInfo[e].active=!1,this._availableInstanceIds.push(e),this._visibilityChanged=!0,this}optimize(){let e=0,t=0;const i=this._geometryInfo,a=i.map((l,c)=>c).sort((l,c)=>i[l].vertexStart-i[c].vertexStart),s=this.geometry;for(let l=0,c=i.length;l<c;l++){const d=a[l],p=i[d];if(p.active!==!1){if(s.index!==null){if(p.indexStart!==t){const{indexStart:g,vertexStart:v,reservedIndexCount:_}=p,x=s.index,S=x.array,C=e-v;for(let T=g;T<g+_;T++)S[T]=S[T]+C;x.array.copyWithin(t,g,g+_),x.addUpdateRange(t,_),x.needsUpdate=!0,p.indexStart=t}t+=p.reservedIndexCount}if(p.vertexStart!==e){const{vertexStart:g,reservedVertexCount:v}=p,_=s.attributes;for(const x in _){const S=_[x],{array:C,itemSize:T}=S;C.copyWithin(e*T,g*T,(g+v)*T),S.addUpdateRange(e*T,v*T),S.needsUpdate=!0}p.vertexStart=e}e+=p.reservedVertexCount,p.start=s.index?p.indexStart:p.vertexStart,this._nextIndexStart=s.index?p.indexStart+p.reservedIndexCount:0,this._nextVertexStart=p.vertexStart+p.reservedVertexCount}}return this._visibilityChanged=!0,this}getBoundingBoxAt(e,t){if(e>=this._geometryCount)return null;const i=this.geometry,a=this._geometryInfo[e];if(a.boundingBox===null){const s=new Sa,l=i.index,c=i.attributes.position;for(let d=a.start,p=a.start+a.count;d<p;d++){let g=d;l&&(g=l.getX(g)),s.expandByPoint(Cm.fromBufferAttribute(c,g))}a.boundingBox=s}return t.copy(a.boundingBox),t}getBoundingSphereAt(e,t){if(e>=this._geometryCount)return null;const i=this.geometry,a=this._geometryInfo[e];if(a.boundingSphere===null){const s=new ua;this.getBoundingBoxAt(e,Cy),Cy.getCenter(s.center);const l=i.index,c=i.attributes.position;let d=0;for(let p=a.start,g=a.start+a.count;p<g;p++){let v=p;l&&(v=l.getX(v)),Cm.fromBufferAttribute(c,v),d=Math.max(d,s.center.distanceToSquared(Cm))}s.radius=Math.sqrt(d),a.boundingSphere=s}return t.copy(a.boundingSphere),t}setMatrixAt(e,t){this.validateInstanceId(e);const i=this._matricesTexture,a=this._matricesTexture.image.data;return t.toArray(a,e*16),i.needsUpdate=!0,this}getMatrixAt(e,t){return this.validateInstanceId(e),t.fromArray(this._matricesTexture.image.data,e*16)}setColorAt(e,t){return this.validateInstanceId(e),this._colorsTexture===null&&this._initColorsTexture(),t.toArray(this._colorsTexture.image.data,e*4),this._colorsTexture.needsUpdate=!0,this}getColorAt(e,t){return this.validateInstanceId(e),t.fromArray(this._colorsTexture.image.data,e*4)}setVisibleAt(e,t){return this.validateInstanceId(e),this._instanceInfo[e].visible===t?this:(this._instanceInfo[e].visible=t,this._visibilityChanged=!0,this)}getVisibleAt(e){return this.validateInstanceId(e),this._instanceInfo[e].visible}setGeometryIdAt(e,t){return this.validateInstanceId(e),this.validateGeometryId(t),this._instanceInfo[e].geometryIndex=t,this}getGeometryIdAt(e){return this.validateInstanceId(e),this._instanceInfo[e].geometryIndex}getGeometryRangeAt(e,t={}){this.validateGeometryId(e);const i=this._geometryInfo[e];return t.vertexStart=i.vertexStart,t.vertexCount=i.vertexCount,t.reservedVertexCount=i.reservedVertexCount,t.indexStart=i.indexStart,t.indexCount=i.indexCount,t.reservedIndexCount=i.reservedIndexCount,t.start=i.start,t.count=i.count,t}setInstanceCount(e){const t=this._availableInstanceIds,i=this._instanceInfo;for(t.sort(PA);t[t.length-1]===i.length-1;)i.pop(),t.pop();if(e<i.length)throw new Error(`BatchedMesh: Instance ids outside the range ${e} are being used. Cannot shrink instance count.`);const a=new Int32Array(e),s=new Int32Array(e);lf(this._multiDrawCounts,a),lf(this._multiDrawStarts,s),this._multiDrawCounts=a,this._multiDrawStarts=s,this._maxInstanceCount=e;const l=this._indirectTexture,c=this._matricesTexture,d=this._colorsTexture;l.dispose(),this._initIndirectTexture(),lf(l.image.data,this._indirectTexture.image.data),c.dispose(),this._initMatricesTexture(),lf(c.image.data,this._matricesTexture.image.data),d&&(d.dispose(),this._initColorsTexture(),lf(d.image.data,this._colorsTexture.image.data))}setGeometrySize(e,t){const i=[...this._geometryInfo].filter(c=>c.active);if(Math.max(...i.map(c=>c.vertexStart+c.reservedVertexCount))>e)throw new Error(`BatchedMesh: Geometry vertex values are being used outside the range ${t}. Cannot shrink further.`);if(this.geometry.index&&Math.max(...i.map(d=>d.indexStart+d.reservedIndexCount))>t)throw new Error(`BatchedMesh: Geometry index values are being used outside the range ${t}. Cannot shrink further.`);const s=this.geometry;s.dispose(),this._maxVertexCount=e,this._maxIndexCount=t,this._geometryInitialized&&(this._geometryInitialized=!1,this.geometry=new Jt,this._initializeGeometry(s));const l=this.geometry;s.index&&lf(s.index.array,l.index.array);for(const c in s.attributes)lf(s.attributes[c].array,l.attributes[c].array)}raycast(e,t){const i=this._instanceInfo,a=this._geometryInfo,s=this.matrixWorld,l=this.geometry;Pa.material=this.material,Pa.geometry.index=l.index,Pa.geometry.attributes=l.attributes,Pa.geometry.boundingBox===null&&(Pa.geometry.boundingBox=new Sa),Pa.geometry.boundingSphere===null&&(Pa.geometry.boundingSphere=new ua);for(let c=0,d=i.length;c<d;c++){if(!i[c].visible||!i[c].active)continue;const p=i[c].geometryIndex,g=a[p];Pa.geometry.setDrawRange(g.start,g.count),this.getMatrixAt(c,Pa.matrixWorld).premultiply(s),this.getBoundingBoxAt(p,Pa.geometry.boundingBox),this.getBoundingSphereAt(p,Pa.geometry.boundingSphere),Pa.raycast(e,Ry);for(let v=0,_=Ry.length;v<_;v++){const x=Ry[v];x.object=this,x.batchId=c,t.push(x)}Ry.length=0}Pa.material=null,Pa.geometry.index=null,Pa.geometry.attributes={},Pa.geometry.setDrawRange(0,1/0)}copy(e){return super.copy(e),this.geometry=e.geometry.clone(),this.perObjectFrustumCulled=e.perObjectFrustumCulled,this.sortObjects=e.sortObjects,this.boundingBox=e.boundingBox!==null?e.boundingBox.clone():null,this.boundingSphere=e.boundingSphere!==null?e.boundingSphere.clone():null,this._geometryInfo=e._geometryInfo.map(t=>({...t,boundingBox:t.boundingBox!==null?t.boundingBox.clone():null,boundingSphere:t.boundingSphere!==null?t.boundingSphere.clone():null})),this._instanceInfo=e._instanceInfo.map(t=>({...t})),this._availableInstanceIds=e._availableInstanceIds.slice(),this._availableGeometryIds=e._availableGeometryIds.slice(),this._nextIndexStart=e._nextIndexStart,this._nextVertexStart=e._nextVertexStart,this._geometryCount=e._geometryCount,this._maxInstanceCount=e._maxInstanceCount,this._maxVertexCount=e._maxVertexCount,this._maxIndexCount=e._maxIndexCount,this._geometryInitialized=e._geometryInitialized,this._multiDrawCounts=e._multiDrawCounts.slice(),this._multiDrawStarts=e._multiDrawStarts.slice(),this._indirectTexture=e._indirectTexture.clone(),this._indirectTexture.image.data=this._indirectTexture.image.data.slice(),this._matricesTexture=e._matricesTexture.clone(),this._matricesTexture.image.data=this._matricesTexture.image.data.slice(),this._colorsTexture!==null&&(this._colorsTexture=e._colorsTexture.clone(),this._colorsTexture.image.data=this._colorsTexture.image.data.slice()),this}dispose(){this.geometry.dispose(),this._matricesTexture.dispose(),this._matricesTexture=null,this._indirectTexture.dispose(),this._indirectTexture=null,this._colorsTexture!==null&&(this._colorsTexture.dispose(),this._colorsTexture=null)}onBeforeRender(e,t,i,a,s){if(!this._visibilityChanged&&!this.perObjectFrustumCulled&&!this.sortObjects)return;const l=a.getIndex(),c=l===null?1:l.array.BYTES_PER_ELEMENT,d=this._instanceInfo,p=this._multiDrawStarts,g=this._multiDrawCounts,v=this._geometryInfo,_=this.perObjectFrustumCulled,x=this._indirectTexture,S=x.image.data,C=i.isArrayCamera?mL:sC;_&&!i.isArrayCamera&&(Or.multiplyMatrices(i.projectionMatrix,i.matrixWorldInverse).multiply(this.matrixWorld),sC.setFromProjectionMatrix(Or,i.coordinateSystem,i.reversedDepth));let T=0;if(this.sortObjects){Or.copy(this.matrixWorld).invert(),Cm.setFromMatrixPosition(i.matrixWorld).applyMatrix4(Or),oC.set(0,0,-1).transformDirection(i.matrixWorld).transformDirection(Or);for(let B=0,D=d.length;B<D;B++)if(d[B].visible&&d[B].active){const P=d[B].geometryIndex;this.getMatrixAt(B,Or),this.getBoundingSphereAt(P,of).applyMatrix4(Or);let U=!1;if(_&&(U=!C.intersectsSphere(of,i)),!U){const z=v[P],j=gL.subVectors(of.center,Cm).dot(oC);FA.push(z.start,z.count,j,B)}}const M=FA.list,w=this.customSort;w===null?M.sort(s.transparent?hL:fL):w.call(this,M,i);for(let B=0,D=M.length;B<D;B++){const P=M[B];p[T]=P.start*c,g[T]=P.count,S[T]=P.index,T++}FA.reset()}else for(let M=0,w=d.length;M<w;M++)if(d[M].visible&&d[M].active){const B=d[M].geometryIndex;let D=!1;if(_&&(this.getMatrixAt(M,Or),this.getBoundingSphereAt(B,of).applyMatrix4(Or),D=!C.intersectsSphere(of,i)),!D){const P=v[B];p[T]=P.start*c,g[T]=P.count,S[T]=M,T++}}x.needsUpdate=!0,this._multiDrawCount=T,this._visibilityChanged=!1}onBeforeShadow(e,t,i,a,s,l){this.onBeforeRender(e,null,a,s,l)}}class Fa extends Li{constructor(e){super(),this.isLineBasicMaterial=!0,this.type="LineBasicMaterial",this.color=new st(16777215),this.map=null,this.linewidth=1,this.linecap="round",this.linejoin="round",this.fog=!0,this.setValues(e)}copy(e){return super.copy(e),this.color.copy(e.color),this.map=e.map,this.linewidth=e.linewidth,this.linecap=e.linecap,this.linejoin=e.linejoin,this.fog=e.fog,this}}const wy=new K,By=new K,cC=new It,Rm=new jh,Dy=new ua,zA=new K,uC=new K;class Il extends dn{constructor(e=new Jt,t=new Fa){super(),this.isLine=!0,this.type="Line",this.geometry=e,this.material=t,this.morphTargetDictionary=void 0,this.morphTargetInfluences=void 0,this.updateMorphTargets()}copy(e,t){return super.copy(e,t),this.material=Array.isArray(e.material)?e.material.slice():e.material,this.geometry=e.geometry,this}computeLineDistances(){const e=this.geometry;if(e.index===null){const t=e.attributes.position,i=[0];for(let a=1,s=t.count;a<s;a++)wy.fromBufferAttribute(t,a-1),By.fromBufferAttribute(t,a),i[a]=i[a-1],i[a]+=wy.distanceTo(By);e.setAttribute("lineDistance",new _t(i,1))}else ct("Line.computeLineDistances(): Computation only possible with non-indexed BufferGeometry.");return this}raycast(e,t){const i=this.geometry,a=this.matrixWorld,s=e.params.Line.threshold,l=i.drawRange;if(i.boundingSphere===null&&i.computeBoundingSphere(),Dy.copy(i.boundingSphere),Dy.applyMatrix4(a),Dy.radius+=s,e.ray.intersectsSphere(Dy)===!1)return;cC.copy(a).invert(),Rm.copy(e.ray).applyMatrix4(cC);const c=s/((this.scale.x+this.scale.y+this.scale.z)/3),d=c*c,p=this.isLineSegments?2:1,g=i.index,_=i.attributes.position;if(g!==null){const x=Math.max(0,l.start),S=Math.min(g.count,l.start+l.count);for(let C=x,T=S-1;C<T;C+=p){const M=g.getX(C),w=g.getX(C+1),B=Oy(this,e,Rm,d,M,w,C);B&&t.push(B)}if(this.isLineLoop){const C=g.getX(S-1),T=g.getX(x),M=Oy(this,e,Rm,d,C,T,S-1);M&&t.push(M)}}else{const x=Math.max(0,l.start),S=Math.min(_.count,l.start+l.count);for(let C=x,T=S-1;C<T;C+=p){const M=Oy(this,e,Rm,d,C,C+1,C);M&&t.push(M)}if(this.isLineLoop){const C=Oy(this,e,Rm,d,S-1,x,S-1);C&&t.push(C)}}}updateMorphTargets(){const t=this.geometry.morphAttributes,i=Object.keys(t);if(i.length>0){const a=t[i[0]];if(a!==void 0){this.morphTargetInfluences=[],this.morphTargetDictionary={};for(let s=0,l=a.length;s<l;s++){const c=a[s].name||String(s);this.morphTargetInfluences.push(0),this.morphTargetDictionary[c]=s}}}}}function Oy(n,e,t,i,a,s,l){const c=n.geometry.attributes.position;if(wy.fromBufferAttribute(c,a),By.fromBufferAttribute(c,s),t.distanceSqToSegment(wy,By,zA,uC)>i)return;zA.applyMatrix4(n.matrixWorld);const p=e.ray.origin.distanceTo(zA);if(!(p<e.near||p>e.far))return{distance:p,point:uC.clone().applyMatrix4(n.matrixWorld),index:l,face:null,faceIndex:null,barycoord:null,object:n}}const fC=new K,hC=new K;class Zs extends Il{constructor(e,t){super(e,t),this.isLineSegments=!0,this.type="LineSegments"}computeLineDistances(){const e=this.geometry;if(e.index===null){const t=e.attributes.position,i=[];for(let a=0,s=t.count;a<s;a+=2)fC.fromBufferAttribute(t,a),hC.fromBufferAttribute(t,a+1),i[a]=a===0?0:i[a-1],i[a+1]=i[a]+fC.distanceTo(hC);e.setAttribute("lineDistance",new _t(i,1))}else ct("LineSegments.computeLineDistances(): Computation only possible with non-indexed BufferGeometry.");return this}}class HA extends Il{constructor(e,t){super(e,t),this.isLineLoop=!0,this.type="LineLoop"}}class Ny extends Li{constructor(e){super(),this.isPointsMaterial=!0,this.type="PointsMaterial",this.color=new st(16777215),this.map=null,this.alphaMap=null,this.size=1,this.sizeAttenuation=!0,this.fog=!0,this.setValues(e)}copy(e){return super.copy(e),this.color.copy(e.color),this.map=e.map,this.alphaMap=e.alphaMap,this.size=e.size,this.sizeAttenuation=e.sizeAttenuation,this.fog=e.fog,this}}const dC=new It,GA=new jh,Uy=new ua,Ly=new K;class VA extends dn{constructor(e=new Jt,t=new Ny){super(),this.isPoints=!0,this.type="Points",this.geometry=e,this.material=t,this.morphTargetDictionary=void 0,this.morphTargetInfluences=void 0,this.updateMorphTargets()}copy(e,t){return super.copy(e,t),this.material=Array.isArray(e.material)?e.material.slice():e.material,this.geometry=e.geometry,this}raycast(e,t){const i=this.geometry,a=this.matrixWorld,s=e.params.Points.threshold,l=i.drawRange;if(i.boundingSphere===null&&i.computeBoundingSphere(),Uy.copy(i.boundingSphere),Uy.applyMatrix4(a),Uy.radius+=s,e.ray.intersectsSphere(Uy)===!1)return;dC.copy(a).invert(),GA.copy(e.ray).applyMatrix4(dC);const c=s/((this.scale.x+this.scale.y+this.scale.z)/3),d=c*c,p=i.index,v=i.attributes.position;if(p!==null){const _=Math.max(0,l.start),x=Math.min(p.count,l.start+l.count);for(let S=_,C=x;S<C;S++){const T=p.getX(S);Ly.fromBufferAttribute(v,T),pC(Ly,T,d,a,e,t,this)}}else{const _=Math.max(0,l.start),x=Math.min(v.count,l.start+l.count);for(let S=_,C=x;S<C;S++)Ly.fromBufferAttribute(v,S),pC(Ly,S,d,a,e,t,this)}}updateMorphTargets(){const t=this.geometry.morphAttributes,i=Object.keys(t);if(i.length>0){const a=t[i[0]];if(a!==void 0){this.morphTargetInfluences=[],this.morphTargetDictionary={};for(let s=0,l=a.length;s<l;s++){const c=a[s].name||String(s);this.morphTargetInfluences.push(0),this.morphTargetDictionary[c]=s}}}}}function pC(n,e,t,i,a,s,l){const c=GA.distanceSqToPoint(n);if(c<t){const d=new K;GA.closestPointToPoint(n,d),d.applyMatrix4(i);const p=a.ray.origin.distanceTo(d);if(p<a.near||p>a.far)return;s.push({distance:p,distanceToRay:Math.sqrt(c),point:d,index:e,face:null,faceIndex:null,barycoord:null,object:l})}}class mC extends ai{constructor(e,t,i,a,s=Zn,l=Zn,c,d,p){super(e,t,i,a,s,l,c,d,p),this.isVideoTexture=!0,this.generateMipmaps=!1,this._requestVideoFrameCallbackId=0;const g=this;function v(){g.needsUpdate=!0,g._requestVideoFrameCallbackId=e.requestVideoFrameCallback(v)}"requestVideoFrameCallback"in e&&(this._requestVideoFrameCallbackId=e.requestVideoFrameCallback(v))}clone(){return new this.constructor(this.image).copy(this)}update(){const e=this.image;"requestVideoFrameCallback"in e===!1&&e.readyState>=e.HAVE_CURRENT_DATA&&(this.needsUpdate=!0)}dispose(){this._requestVideoFrameCallbackId!==0&&(this.source.data.cancelVideoFrameCallback(this._requestVideoFrameCallbackId),this._requestVideoFrameCallbackId=0),super.dispose()}}class yL extends mC{constructor(e,t,i,a,s,l,c,d){super({},e,t,i,a,s,l,c,d),this.isVideoFrameTexture=!0}update(){}clone(){return new this.constructor().copy(this)}setFrame(e){this.image=e,this.needsUpdate=!0}}class _L extends ai{constructor(e,t){super({width:e,height:t}),this.isFramebufferTexture=!0,this.magFilter=Ei,this.minFilter=Ei,this.generateMipmaps=!1,this.needsUpdate=!0}}class Iy extends ai{constructor(e,t,i,a,s,l,c,d,p,g,v,_){super(null,l,c,d,p,g,a,s,v,_),this.isCompressedTexture=!0,this.image={width:t,height:i},this.mipmaps=e,this.flipY=!1,this.generateMipmaps=!1}}class xL extends Iy{constructor(e,t,i,a,s,l){super(e,t,i,s,l),this.isCompressedArrayTexture=!0,this.image.depth=a,this.wrapR=er,this.layerUpdates=new Set}addLayerUpdate(e){this.layerUpdates.add(e)}clearLayerUpdates(){this.layerUpdates.clear()}}class bL extends Iy{constructor(e,t,i){super(void 0,e[0].width,e[0].height,t,i,Oo),this.isCompressedCubeTexture=!0,this.isCubeTexture=!0,this.image=e}}class AL extends ai{constructor(e,t,i,a,s,l,c,d,p){super(e,t,i,a,s,l,c,d,p),this.isCanvasTexture=!0,this.needsUpdate=!0}}class ld extends ai{constructor(e,t,i=vs,a,s,l,c=Ei,d=Ei,p,g=Uo,v=1){if(g!==Uo&&g!==Uc)throw new Error("DepthTexture format must be either THREE.DepthFormat or THREE.DepthStencilFormat");const _={width:e,height:t,depth:v};super(_,a,s,l,c,d,g,i,p),this.isDepthTexture=!0,this.flipY=!1,this.generateMipmaps=!1,this.compareFunction=null}copy(e){return super.copy(e),this.source=new Fc(Object.assign({},e.image)),this.compareFunction=e.compareFunction,this}toJSON(e){const t=super.toJSON(e);return this.compareFunction!==null&&(t.compareFunction=this.compareFunction),t}}class gC extends ld{constructor(e,t=vs,i=Oo,a,s,l=Ei,c=Ei,d,p=Uo){const g={width:e,height:e,depth:1},v=[g,g,g,g,g,g];super(e,e,t,i,a,s,l,c,d,p),this.image=v,this.isCubeDepthTexture=!0,this.isCubeTexture=!0}get images(){return this.image}set images(e){this.image=e}}class kA extends ai{constructor(e=null){super(),this.sourceTexture=e,this.isExternalTexture=!0}copy(e){return super.copy(e),this.sourceTexture=e.sourceTexture,this}}class Py extends Jt{constructor(e=1,t=1,i=4,a=8,s=1){super(),this.type="CapsuleGeometry",this.parameters={radius:e,height:t,capSegments:i,radialSegments:a,heightSegments:s},t=Math.max(0,t),i=Math.max(1,Math.floor(i)),a=Math.max(3,Math.floor(a)),s=Math.max(1,Math.floor(s));const l=[],c=[],d=[],p=[],g=t/2,v=Math.PI/2*e,_=t,x=2*v+_,S=i*2+s,C=a+1,T=new K,M=new K;for(let w=0;w<=S;w++){let B=0,D=0,P=0,U=0;if(w<=i){const L=w/i,F=L*Math.PI/2;D=-g-e*Math.cos(F),P=e*Math.sin(F),U=-e*Math.cos(F),B=L*v}else if(w<=i+s){const L=(w-i)/s;D=-g+L*t,P=e,U=0,B=v+L*_}else{const L=(w-i-s)/i,F=L*Math.PI/2;D=g+e*Math.sin(F),P=e*Math.cos(F),U=e*Math.sin(F),B=v+_+L*v}const z=Math.max(0,Math.min(1,B/x));let j=0;w===0?j=.5/a:w===S&&(j=-.5/a);for(let L=0;L<=a;L++){const F=L/a,W=F*Math.PI*2,te=Math.sin(W),$=Math.cos(W);M.x=-P*$,M.y=D,M.z=P*te,c.push(M.x,M.y,M.z),T.set(-P*$,U,P*te),T.normalize(),d.push(T.x,T.y,T.z),p.push(F+j,z)}if(w>0){const L=(w-1)*C;for(let F=0;F<a;F++){const W=L+F,te=L+F+1,$=w*C+F,ae=w*C+F+1;l.push(W,te,$),l.push(te,ae,$)}}}this.setIndex(l),this.setAttribute("position",new _t(c,3)),this.setAttribute("normal",new _t(d,3)),this.setAttribute("uv",new _t(p,2))}copy(e){return super.copy(e),this.parameters=Object.assign({},e.parameters),this}static fromJSON(e){return new Py(e.radius,e.height,e.capSegments,e.radialSegments,e.heightSegments)}}class Fy extends Jt{constructor(e=1,t=32,i=0,a=Math.PI*2){super(),this.type="CircleGeometry",this.parameters={radius:e,segments:t,thetaStart:i,thetaLength:a},t=Math.max(3,t);const s=[],l=[],c=[],d=[],p=new K,g=new He;l.push(0,0,0),c.push(0,0,1),d.push(.5,.5);for(let v=0,_=3;v<=t;v++,_+=3){const x=i+v/t*a;p.x=e*Math.cos(x),p.y=e*Math.sin(x),l.push(p.x,p.y,p.z),c.push(0,0,1),g.x=(l[_]/e+1)/2,g.y=(l[_+1]/e+1)/2,d.push(g.x,g.y)}for(let v=1;v<=t;v++)s.push(v,v+1,0);this.setIndex(s),this.setAttribute("position",new _t(l,3)),this.setAttribute("normal",new _t(c,3)),this.setAttribute("uv",new _t(d,2))}copy(e){return super.copy(e),this.parameters=Object.assign({},e.parameters),this}static fromJSON(e){return new Fy(e.radius,e.segments,e.thetaStart,e.thetaLength)}}class wm extends Jt{constructor(e=1,t=1,i=1,a=32,s=1,l=!1,c=0,d=Math.PI*2){super(),this.type="CylinderGeometry",this.parameters={radiusTop:e,radiusBottom:t,height:i,radialSegments:a,heightSegments:s,openEnded:l,thetaStart:c,thetaLength:d};const p=this;a=Math.floor(a),s=Math.floor(s);const g=[],v=[],_=[],x=[];let S=0;const C=[],T=i/2;let M=0;w(),l===!1&&(e>0&&B(!0),t>0&&B(!1)),this.setIndex(g),this.setAttribute("position",new _t(v,3)),this.setAttribute("normal",new _t(_,3)),this.setAttribute("uv",new _t(x,2));function w(){const D=new K,P=new K;let U=0;const z=(t-e)/i;for(let j=0;j<=s;j++){const L=[],F=j/s,W=F*(t-e)+e;for(let te=0;te<=a;te++){const $=te/a,ae=$*d+c,le=Math.sin(ae),G=Math.cos(ae);P.x=W*le,P.y=-F*i+T,P.z=W*G,v.push(P.x,P.y,P.z),D.set(le,z,G).normalize(),_.push(D.x,D.y,D.z),x.push($,1-F),L.push(S++)}C.push(L)}for(let j=0;j<a;j++)for(let L=0;L<s;L++){const F=C[L][j],W=C[L+1][j],te=C[L+1][j+1],$=C[L][j+1];(e>0||L!==0)&&(g.push(F,W,$),U+=3),(t>0||L!==s-1)&&(g.push(W,te,$),U+=3)}p.addGroup(M,U,0),M+=U}function B(D){const P=S,U=new He,z=new K;let j=0;const L=D===!0?e:t,F=D===!0?1:-1;for(let te=1;te<=a;te++)v.push(0,T*F,0),_.push(0,F,0),x.push(.5,.5),S++;const W=S;for(let te=0;te<=a;te++){const ae=te/a*d+c,le=Math.cos(ae),G=Math.sin(ae);z.x=L*G,z.y=T*F,z.z=L*le,v.push(z.x,z.y,z.z),_.push(0,F,0),U.x=le*.5+.5,U.y=G*.5*F+.5,x.push(U.x,U.y),S++}for(let te=0;te<a;te++){const $=P+te,ae=W+te;D===!0?g.push(ae,ae+1,$):g.push(ae+1,ae,$),j+=3}p.addGroup(M,j,D===!0?1:2),M+=j}}copy(e){return super.copy(e),this.parameters=Object.assign({},e.parameters),this}static fromJSON(e){return new wm(e.radiusTop,e.radiusBottom,e.height,e.radialSegments,e.heightSegments,e.openEnded,e.thetaStart,e.thetaLength)}}class Bm extends wm{constructor(e=1,t=1,i=32,a=1,s=!1,l=0,c=Math.PI*2){super(0,e,t,i,a,s,l,c),this.type="ConeGeometry",this.parameters={radius:e,height:t,radialSegments:i,heightSegments:a,openEnded:s,thetaStart:l,thetaLength:c}}static fromJSON(e){return new Bm(e.radius,e.height,e.radialSegments,e.heightSegments,e.openEnded,e.thetaStart,e.thetaLength)}}class qc extends Jt{constructor(e=[],t=[],i=1,a=0){super(),this.type="PolyhedronGeometry",this.parameters={vertices:e,indices:t,radius:i,detail:a};const s=[],l=[];c(a),p(i),g(),this.setAttribute("position",new _t(s,3)),this.setAttribute("normal",new _t(s.slice(),3)),this.setAttribute("uv",new _t(l,2)),a===0?this.computeVertexNormals():this.normalizeNormals();function c(w){const B=new K,D=new K,P=new K;for(let U=0;U<t.length;U+=3)x(t[U+0],B),x(t[U+1],D),x(t[U+2],P),d(B,D,P,w)}function d(w,B,D,P){const U=P+1,z=[];for(let j=0;j<=U;j++){z[j]=[];const L=w.clone().lerp(D,j/U),F=B.clone().lerp(D,j/U),W=U-j;for(let te=0;te<=W;te++)te===0&&j===U?z[j][te]=L:z[j][te]=L.clone().lerp(F,te/W)}for(let j=0;j<U;j++)for(let L=0;L<2*(U-j)-1;L++){const F=Math.floor(L/2);L%2===0?(_(z[j][F+1]),_(z[j+1][F]),_(z[j][F])):(_(z[j][F+1]),_(z[j+1][F+1]),_(z[j+1][F]))}}function p(w){const B=new K;for(let D=0;D<s.length;D+=3)B.x=s[D+0],B.y=s[D+1],B.z=s[D+2],B.normalize().multiplyScalar(w),s[D+0]=B.x,s[D+1]=B.y,s[D+2]=B.z}function g(){const w=new K;for(let B=0;B<s.length;B+=3){w.x=s[B+0],w.y=s[B+1],w.z=s[B+2];const D=T(w)/2/Math.PI+.5,P=M(w)/Math.PI+.5;l.push(D,1-P)}S(),v()}function v(){for(let w=0;w<l.length;w+=6){const B=l[w+0],D=l[w+2],P=l[w+4],U=Math.max(B,D,P),z=Math.min(B,D,P);U>.9&&z<.1&&(B<.2&&(l[w+0]+=1),D<.2&&(l[w+2]+=1),P<.2&&(l[w+4]+=1))}}function _(w){s.push(w.x,w.y,w.z)}function x(w,B){const D=w*3;B.x=e[D+0],B.y=e[D+1],B.z=e[D+2]}function S(){const w=new K,B=new K,D=new K,P=new K,U=new He,z=new He,j=new He;for(let L=0,F=0;L<s.length;L+=9,F+=6){w.set(s[L+0],s[L+1],s[L+2]),B.set(s[L+3],s[L+4],s[L+5]),D.set(s[L+6],s[L+7],s[L+8]),U.set(l[F+0],l[F+1]),z.set(l[F+2],l[F+3]),j.set(l[F+4],l[F+5]),P.copy(w).add(B).add(D).divideScalar(3);const W=T(P);C(U,F+0,w,W),C(z,F+2,B,W),C(j,F+4,D,W)}}function C(w,B,D,P){P<0&&w.x===1&&(l[B]=w.x-1),D.x===0&&D.z===0&&(l[B]=P/2/Math.PI+.5)}function T(w){return Math.atan2(w.z,-w.x)}function M(w){return Math.atan2(-w.y,Math.sqrt(w.x*w.x+w.z*w.z))}}copy(e){return super.copy(e),this.parameters=Object.assign({},e.parameters),this}static fromJSON(e){return new qc(e.vertices,e.indices,e.radius,e.detail)}}class zy extends qc{constructor(e=1,t=0){const i=(1+Math.sqrt(5))/2,a=1/i,s=[-1,-1,-1,-1,-1,1,-1,1,-1,-1,1,1,1,-1,-1,1,-1,1,1,1,-1,1,1,1,0,-a,-i,0,-a,i,0,a,-i,0,a,i,-a,-i,0,-a,i,0,a,-i,0,a,i,0,-i,0,-a,i,0,-a,-i,0,a,i,0,a],l=[3,11,7,3,7,15,3,15,13,7,19,17,7,17,6,7,6,15,17,4,8,17,8,10,17,10,6,8,0,16,8,16,2,8,2,10,0,12,1,0,1,18,0,18,16,6,10,2,6,2,13,6,13,15,2,16,18,2,18,3,2,3,13,18,1,9,18,9,11,18,11,3,4,14,12,4,12,0,4,0,8,11,9,5,11,5,19,11,19,7,19,5,14,19,14,4,19,4,17,1,12,14,1,14,5,1,5,9];super(s,l,e,t),this.type="DodecahedronGeometry",this.parameters={radius:e,detail:t}}static fromJSON(e){return new zy(e.radius,e.detail)}}const Hy=new K,Gy=new K,XA=new K,Vy=new Br;class vC extends Jt{constructor(e=null,t=1){if(super(),this.type="EdgesGeometry",this.parameters={geometry:e,thresholdAngle:t},e!==null){const a=Math.pow(10,4),s=Math.cos($u*t),l=e.getIndex(),c=e.getAttribute("position"),d=l?l.count:c.count,p=[0,0,0],g=["a","b","c"],v=new Array(3),_={},x=[];for(let S=0;S<d;S+=3){l?(p[0]=l.getX(S),p[1]=l.getX(S+1),p[2]=l.getX(S+2)):(p[0]=S,p[1]=S+1,p[2]=S+2);const{a:C,b:T,c:M}=Vy;if(C.fromBufferAttribute(c,p[0]),T.fromBufferAttribute(c,p[1]),M.fromBufferAttribute(c,p[2]),Vy.getNormal(XA),v[0]=`${Math.round(C.x*a)},${Math.round(C.y*a)},${Math.round(C.z*a)}`,v[1]=`${Math.round(T.x*a)},${Math.round(T.y*a)},${Math.round(T.z*a)}`,v[2]=`${Math.round(M.x*a)},${Math.round(M.y*a)},${Math.round(M.z*a)}`,!(v[0]===v[1]||v[1]===v[2]||v[2]===v[0]))for(let w=0;w<3;w++){const B=(w+1)%3,D=v[w],P=v[B],U=Vy[g[w]],z=Vy[g[B]],j=`${D}_${P}`,L=`${P}_${D}`;L in _&&_[L]?(XA.dot(_[L].normal)<=s&&(x.push(U.x,U.y,U.z),x.push(z.x,z.y,z.z)),_[L]=null):j in _||(_[j]={index0:p[w],index1:p[B],normal:XA.clone()})}}for(const S in _)if(_[S]){const{index0:C,index1:T}=_[S];Hy.fromBufferAttribute(c,C),Gy.fromBufferAttribute(c,T),x.push(Hy.x,Hy.y,Hy.z),x.push(Gy.x,Gy.y,Gy.z)}this.setAttribute("position",new _t(x,3))}}copy(e){return super.copy(e),this.parameters=Object.assign({},e.parameters),this}}class $s{constructor(){this.type="Curve",this.arcLengthDivisions=200,this.needsUpdate=!1,this.cacheArcLengths=null}getPoint(){ct("Curve: .getPoint() not implemented.")}getPointAt(e,t){const i=this.getUtoTmapping(e);return this.getPoint(i,t)}getPoints(e=5){const t=[];for(let i=0;i<=e;i++)t.push(this.getPoint(i/e));return t}getSpacedPoints(e=5){const t=[];for(let i=0;i<=e;i++)t.push(this.getPointAt(i/e));return t}getLength(){const e=this.getLengths();return e[e.length-1]}getLengths(e=this.arcLengthDivisions){if(this.cacheArcLengths&&this.cacheArcLengths.length===e+1&&!this.needsUpdate)return this.cacheArcLengths;this.needsUpdate=!1;const t=[];let i,a=this.getPoint(0),s=0;t.push(0);for(let l=1;l<=e;l++)i=this.getPoint(l/e),s+=i.distanceTo(a),t.push(s),a=i;return this.cacheArcLengths=t,t}updateArcLengths(){this.needsUpdate=!0,this.getLengths()}getUtoTmapping(e,t=null){const i=this.getLengths();let a=0;const s=i.length;let l;t?l=t:l=e*i[s-1];let c=0,d=s-1,p;for(;c<=d;)if(a=Math.floor(c+(d-c)/2),p=i[a]-l,p<0)c=a+1;else if(p>0)d=a-1;else{d=a;break}if(a=d,i[a]===l)return a/(s-1);const g=i[a],_=i[a+1]-g,x=(l-g)/_;return(a+x)/(s-1)}getTangent(e,t){let a=e-1e-4,s=e+1e-4;a<0&&(a=0),s>1&&(s=1);const l=this.getPoint(a),c=this.getPoint(s),d=t||(l.isVector2?new He:new K);return d.copy(c).sub(l).normalize(),d}getTangentAt(e,t){const i=this.getUtoTmapping(e);return this.getTangent(i,t)}computeFrenetFrames(e,t=!1){const i=new K,a=[],s=[],l=[],c=new K,d=new It;for(let x=0;x<=e;x++){const S=x/e;a[x]=this.getTangentAt(S,new K)}s[0]=new K,l[0]=new K;let p=Number.MAX_VALUE;const g=Math.abs(a[0].x),v=Math.abs(a[0].y),_=Math.abs(a[0].z);g<=p&&(p=g,i.set(1,0,0)),v<=p&&(p=v,i.set(0,1,0)),_<=p&&i.set(0,0,1),c.crossVectors(a[0],i).normalize(),s[0].crossVectors(a[0],c),l[0].crossVectors(a[0],s[0]);for(let x=1;x<=e;x++){if(s[x]=s[x-1].clone(),l[x]=l[x-1].clone(),c.crossVectors(a[x-1],a[x]),c.length()>Number.EPSILON){c.normalize();const S=Math.acos(jt(a[x-1].dot(a[x]),-1,1));s[x].applyMatrix4(d.makeRotationAxis(c,S))}l[x].crossVectors(a[x],s[x])}if(t===!0){let x=Math.acos(jt(s[0].dot(s[e]),-1,1));x/=e,a[0].dot(c.crossVectors(s[0],s[e]))>0&&(x=-x);for(let S=1;S<=e;S++)s[S].applyMatrix4(d.makeRotationAxis(a[S],x*S)),l[S].crossVectors(a[S],s[S])}return{tangents:a,normals:s,binormals:l}}clone(){return new this.constructor().copy(this)}copy(e){return this.arcLengthDivisions=e.arcLengthDivisions,this}toJSON(){const e={metadata:{version:4.7,type:"Curve",generator:"Curve.toJSON"}};return e.arcLengthDivisions=this.arcLengthDivisions,e.type=this.type,e}fromJSON(e){return this.arcLengthDivisions=e.arcLengthDivisions,this}}class ky extends $s{constructor(e=0,t=0,i=1,a=1,s=0,l=Math.PI*2,c=!1,d=0){super(),this.isEllipseCurve=!0,this.type="EllipseCurve",this.aX=e,this.aY=t,this.xRadius=i,this.yRadius=a,this.aStartAngle=s,this.aEndAngle=l,this.aClockwise=c,this.aRotation=d}getPoint(e,t=new He){const i=t,a=Math.PI*2;let s=this.aEndAngle-this.aStartAngle;const l=Math.abs(s)<Number.EPSILON;for(;s<0;)s+=a;for(;s>a;)s-=a;s<Number.EPSILON&&(l?s=0:s=a),this.aClockwise===!0&&!l&&(s===a?s=-a:s=s-a);const c=this.aStartAngle+e*s;let d=this.aX+this.xRadius*Math.cos(c),p=this.aY+this.yRadius*Math.sin(c);if(this.aRotation!==0){const g=Math.cos(this.aRotation),v=Math.sin(this.aRotation),_=d-this.aX,x=p-this.aY;d=_*g-x*v+this.aX,p=_*v+x*g+this.aY}return i.set(d,p)}copy(e){return super.copy(e),this.aX=e.aX,this.aY=e.aY,this.xRadius=e.xRadius,this.yRadius=e.yRadius,this.aStartAngle=e.aStartAngle,this.aEndAngle=e.aEndAngle,this.aClockwise=e.aClockwise,this.aRotation=e.aRotation,this}toJSON(){const e=super.toJSON();return e.aX=this.aX,e.aY=this.aY,e.xRadius=this.xRadius,e.yRadius=this.yRadius,e.aStartAngle=this.aStartAngle,e.aEndAngle=this.aEndAngle,e.aClockwise=this.aClockwise,e.aRotation=this.aRotation,e}fromJSON(e){return super.fromJSON(e),this.aX=e.aX,this.aY=e.aY,this.xRadius=e.xRadius,this.yRadius=e.yRadius,this.aStartAngle=e.aStartAngle,this.aEndAngle=e.aEndAngle,this.aClockwise=e.aClockwise,this.aRotation=e.aRotation,this}}class yC extends ky{constructor(e,t,i,a,s,l){super(e,t,i,i,a,s,l),this.isArcCurve=!0,this.type="ArcCurve"}}function jA(){let n=0,e=0,t=0,i=0;function a(s,l,c,d){n=s,e=c,t=-3*s+3*l-2*c-d,i=2*s-2*l+c+d}return{initCatmullRom:function(s,l,c,d,p){a(l,c,p*(c-s),p*(d-l))},initNonuniformCatmullRom:function(s,l,c,d,p,g,v){let _=(l-s)/p-(c-s)/(p+g)+(c-l)/g,x=(c-l)/g-(d-l)/(g+v)+(d-c)/v;_*=g,x*=g,a(l,c,_,x)},calc:function(s){const l=s*s,c=l*s;return n+e*s+t*l+i*c}}}const Xy=new K,YA=new jA,qA=new jA,WA=new jA;class _C extends $s{constructor(e=[],t=!1,i="centripetal",a=.5){super(),this.isCatmullRomCurve3=!0,this.type="CatmullRomCurve3",this.points=e,this.closed=t,this.curveType=i,this.tension=a}getPoint(e,t=new K){const i=t,a=this.points,s=a.length,l=(s-(this.closed?0:1))*e;let c=Math.floor(l),d=l-c;this.closed?c+=c>0?0:(Math.floor(Math.abs(c)/s)+1)*s:d===0&&c===s-1&&(c=s-2,d=1);let p,g;this.closed||c>0?p=a[(c-1)%s]:(Xy.subVectors(a[0],a[1]).add(a[0]),p=Xy);const v=a[c%s],_=a[(c+1)%s];if(this.closed||c+2<s?g=a[(c+2)%s]:(Xy.subVectors(a[s-1],a[s-2]).add(a[s-1]),g=Xy),this.curveType==="centripetal"||this.curveType==="chordal"){const x=this.curveType==="chordal"?.5:.25;let S=Math.pow(p.distanceToSquared(v),x),C=Math.pow(v.distanceToSquared(_),x),T=Math.pow(_.distanceToSquared(g),x);C<1e-4&&(C=1),S<1e-4&&(S=C),T<1e-4&&(T=C),YA.initNonuniformCatmullRom(p.x,v.x,_.x,g.x,S,C,T),qA.initNonuniformCatmullRom(p.y,v.y,_.y,g.y,S,C,T),WA.initNonuniformCatmullRom(p.z,v.z,_.z,g.z,S,C,T)}else this.curveType==="catmullrom"&&(YA.initCatmullRom(p.x,v.x,_.x,g.x,this.tension),qA.initCatmullRom(p.y,v.y,_.y,g.y,this.tension),WA.initCatmullRom(p.z,v.z,_.z,g.z,this.tension));return i.set(YA.calc(d),qA.calc(d),WA.calc(d)),i}copy(e){super.copy(e),this.points=[];for(let t=0,i=e.points.length;t<i;t++){const a=e.points[t];this.points.push(a.clone())}return this.closed=e.closed,this.curveType=e.curveType,this.tension=e.tension,this}toJSON(){const e=super.toJSON();e.points=[];for(let t=0,i=this.points.length;t<i;t++){const a=this.points[t];e.points.push(a.toArray())}return e.closed=this.closed,e.curveType=this.curveType,e.tension=this.tension,e}fromJSON(e){super.fromJSON(e),this.points=[];for(let t=0,i=e.points.length;t<i;t++){const a=e.points[t];this.points.push(new K().fromArray(a))}return this.closed=e.closed,this.curveType=e.curveType,this.tension=e.tension,this}}function xC(n,e,t,i,a){const s=(i-e)*.5,l=(a-t)*.5,c=n*n,d=n*c;return(2*t-2*i+s+l)*d+(-3*t+3*i-2*s-l)*c+s*n+t}function SL(n,e){const t=1-n;return t*t*e}function ML(n,e){return 2*(1-n)*n*e}function EL(n,e){return n*n*e}function Dm(n,e,t,i){return SL(n,e)+ML(n,t)+EL(n,i)}function TL(n,e){const t=1-n;return t*t*t*e}function CL(n,e){const t=1-n;return 3*t*t*n*e}function RL(n,e){return 3*(1-n)*n*n*e}function wL(n,e){return n*n*n*e}function Om(n,e,t,i,a){return TL(n,e)+CL(n,t)+RL(n,i)+wL(n,a)}class JA extends $s{constructor(e=new He,t=new He,i=new He,a=new He){super(),this.isCubicBezierCurve=!0,this.type="CubicBezierCurve",this.v0=e,this.v1=t,this.v2=i,this.v3=a}getPoint(e,t=new He){const i=t,a=this.v0,s=this.v1,l=this.v2,c=this.v3;return i.set(Om(e,a.x,s.x,l.x,c.x),Om(e,a.y,s.y,l.y,c.y)),i}copy(e){return super.copy(e),this.v0.copy(e.v0),this.v1.copy(e.v1),this.v2.copy(e.v2),this.v3.copy(e.v3),this}toJSON(){const e=super.toJSON();return e.v0=this.v0.toArray(),e.v1=this.v1.toArray(),e.v2=this.v2.toArray(),e.v3=this.v3.toArray(),e}fromJSON(e){return super.fromJSON(e),this.v0.fromArray(e.v0),this.v1.fromArray(e.v1),this.v2.fromArray(e.v2),this.v3.fromArray(e.v3),this}}class bC extends $s{constructor(e=new K,t=new K,i=new K,a=new K){super(),this.isCubicBezierCurve3=!0,this.type="CubicBezierCurve3",this.v0=e,this.v1=t,this.v2=i,this.v3=a}getPoint(e,t=new K){const i=t,a=this.v0,s=this.v1,l=this.v2,c=this.v3;return i.set(Om(e,a.x,s.x,l.x,c.x),Om(e,a.y,s.y,l.y,c.y),Om(e,a.z,s.z,l.z,c.z)),i}copy(e){return super.copy(e),this.v0.copy(e.v0),this.v1.copy(e.v1),this.v2.copy(e.v2),this.v3.copy(e.v3),this}toJSON(){const e=super.toJSON();return e.v0=this.v0.toArray(),e.v1=this.v1.toArray(),e.v2=this.v2.toArray(),e.v3=this.v3.toArray(),e}fromJSON(e){return super.fromJSON(e),this.v0.fromArray(e.v0),this.v1.fromArray(e.v1),this.v2.fromArray(e.v2),this.v3.fromArray(e.v3),this}}class KA extends $s{constructor(e=new He,t=new He){super(),this.isLineCurve=!0,this.type="LineCurve",this.v1=e,this.v2=t}getPoint(e,t=new He){const i=t;return e===1?i.copy(this.v2):(i.copy(this.v2).sub(this.v1),i.multiplyScalar(e).add(this.v1)),i}getPointAt(e,t){return this.getPoint(e,t)}getTangent(e,t=new He){return t.subVectors(this.v2,this.v1).normalize()}getTangentAt(e,t){return this.getTangent(e,t)}copy(e){return super.copy(e),this.v1.copy(e.v1),this.v2.copy(e.v2),this}toJSON(){const e=super.toJSON();return e.v1=this.v1.toArray(),e.v2=this.v2.toArray(),e}fromJSON(e){return super.fromJSON(e),this.v1.fromArray(e.v1),this.v2.fromArray(e.v2),this}}class AC extends $s{constructor(e=new K,t=new K){super(),this.isLineCurve3=!0,this.type="LineCurve3",this.v1=e,this.v2=t}getPoint(e,t=new K){const i=t;return e===1?i.copy(this.v2):(i.copy(this.v2).sub(this.v1),i.multiplyScalar(e).add(this.v1)),i}getPointAt(e,t){return this.getPoint(e,t)}getTangent(e,t=new K){return t.subVectors(this.v2,this.v1).normalize()}getTangentAt(e,t){return this.getTangent(e,t)}copy(e){return super.copy(e),this.v1.copy(e.v1),this.v2.copy(e.v2),this}toJSON(){const e=super.toJSON();return e.v1=this.v1.toArray(),e.v2=this.v2.toArray(),e}fromJSON(e){return super.fromJSON(e),this.v1.fromArray(e.v1),this.v2.fromArray(e.v2),this}}class QA extends $s{constructor(e=new He,t=new He,i=new He){super(),this.isQuadraticBezierCurve=!0,this.type="QuadraticBezierCurve",this.v0=e,this.v1=t,this.v2=i}getPoint(e,t=new He){const i=t,a=this.v0,s=this.v1,l=this.v2;return i.set(Dm(e,a.x,s.x,l.x),Dm(e,a.y,s.y,l.y)),i}copy(e){return super.copy(e),this.v0.copy(e.v0),this.v1.copy(e.v1),this.v2.copy(e.v2),this}toJSON(){const e=super.toJSON();return e.v0=this.v0.toArray(),e.v1=this.v1.toArray(),e.v2=this.v2.toArray(),e}fromJSON(e){return super.fromJSON(e),this.v0.fromArray(e.v0),this.v1.fromArray(e.v1),this.v2.fromArray(e.v2),this}}class ZA extends $s{constructor(e=new K,t=new K,i=new K){super(),this.isQuadraticBezierCurve3=!0,this.type="QuadraticBezierCurve3",this.v0=e,this.v1=t,this.v2=i}getPoint(e,t=new K){const i=t,a=this.v0,s=this.v1,l=this.v2;return i.set(Dm(e,a.x,s.x,l.x),Dm(e,a.y,s.y,l.y),Dm(e,a.z,s.z,l.z)),i}copy(e){return super.copy(e),this.v0.copy(e.v0),this.v1.copy(e.v1),this.v2.copy(e.v2),this}toJSON(){const e=super.toJSON();return e.v0=this.v0.toArray(),e.v1=this.v1.toArray(),e.v2=this.v2.toArray(),e}fromJSON(e){return super.fromJSON(e),this.v0.fromArray(e.v0),this.v1.fromArray(e.v1),this.v2.fromArray(e.v2),this}}class $A extends $s{constructor(e=[]){super(),this.isSplineCurve=!0,this.type="SplineCurve",this.points=e}getPoint(e,t=new He){const i=t,a=this.points,s=(a.length-1)*e,l=Math.floor(s),c=s-l,d=a[l===0?l:l-1],p=a[l],g=a[l>a.length-2?a.length-1:l+1],v=a[l>a.length-3?a.length-1:l+2];return i.set(xC(c,d.x,p.x,g.x,v.x),xC(c,d.y,p.y,g.y,v.y)),i}copy(e){super.copy(e),this.points=[];for(let t=0,i=e.points.length;t<i;t++){const a=e.points[t];this.points.push(a.clone())}return this}toJSON(){const e=super.toJSON();e.points=[];for(let t=0,i=this.points.length;t<i;t++){const a=this.points[t];e.points.push(a.toArray())}return e}fromJSON(e){super.fromJSON(e),this.points=[];for(let t=0,i=e.points.length;t<i;t++){const a=e.points[t];this.points.push(new He().fromArray(a))}return this}}var jy=Object.freeze({__proto__:null,ArcCurve:yC,CatmullRomCurve3:_C,CubicBezierCurve:JA,CubicBezierCurve3:bC,EllipseCurve:ky,LineCurve:KA,LineCurve3:AC,QuadraticBezierCurve:QA,QuadraticBezierCurve3:ZA,SplineCurve:$A});class SC extends $s{constructor(){super(),this.type="CurvePath",this.curves=[],this.autoClose=!1}add(e){this.curves.push(e)}closePath(){const e=this.curves[0].getPoint(0),t=this.curves[this.curves.length-1].getPoint(1);if(!e.equals(t)){const i=e.isVector2===!0?"LineCurve":"LineCurve3";this.curves.push(new jy[i](t,e))}return this}getPoint(e,t){const i=e*this.getLength(),a=this.getCurveLengths();let s=0;for(;s<a.length;){if(a[s]>=i){const l=a[s]-i,c=this.curves[s],d=c.getLength(),p=d===0?0:1-l/d;return c.getPointAt(p,t)}s++}return null}getLength(){const e=this.getCurveLengths();return e[e.length-1]}updateArcLengths(){this.needsUpdate=!0,this.cacheLengths=null,this.getCurveLengths()}getCurveLengths(){if(this.cacheLengths&&this.cacheLengths.length===this.curves.length)return this.cacheLengths;const e=[];let t=0;for(let i=0,a=this.curves.length;i<a;i++)t+=this.curves[i].getLength(),e.push(t);return this.cacheLengths=e,e}getSpacedPoints(e=40){const t=[];for(let i=0;i<=e;i++)t.push(this.getPoint(i/e));return this.autoClose&&t.push(t[0]),t}getPoints(e=12){const t=[];let i;for(let a=0,s=this.curves;a<s.length;a++){const l=s[a],c=l.isEllipseCurve?e*2:l.isLineCurve||l.isLineCurve3?1:l.isSplineCurve?e*l.points.length:e,d=l.getPoints(c);for(let p=0;p<d.length;p++){const g=d[p];i&&i.equals(g)||(t.push(g),i=g)}}return this.autoClose&&t.length>1&&!t[t.length-1].equals(t[0])&&t.push(t[0]),t}copy(e){super.copy(e),this.curves=[];for(let t=0,i=e.curves.length;t<i;t++){const a=e.curves[t];this.curves.push(a.clone())}return this.autoClose=e.autoClose,this}toJSON(){const e=super.toJSON();e.autoClose=this.autoClose,e.curves=[];for(let t=0,i=this.curves.length;t<i;t++){const a=this.curves[t];e.curves.push(a.toJSON())}return e}fromJSON(e){super.fromJSON(e),this.autoClose=e.autoClose,this.curves=[];for(let t=0,i=e.curves.length;t<i;t++){const a=e.curves[t];this.curves.push(new jy[a.type]().fromJSON(a))}return this}}class Yy extends SC{constructor(e){super(),this.type="Path",this.currentPoint=new He,e&&this.setFromPoints(e)}setFromPoints(e){this.moveTo(e[0].x,e[0].y);for(let t=1,i=e.length;t<i;t++)this.lineTo(e[t].x,e[t].y);return this}moveTo(e,t){return this.currentPoint.set(e,t),this}lineTo(e,t){const i=new KA(this.currentPoint.clone(),new He(e,t));return this.curves.push(i),this.currentPoint.set(e,t),this}quadraticCurveTo(e,t,i,a){const s=new QA(this.currentPoint.clone(),new He(e,t),new He(i,a));return this.curves.push(s),this.currentPoint.set(i,a),this}bezierCurveTo(e,t,i,a,s,l){const c=new JA(this.currentPoint.clone(),new He(e,t),new He(i,a),new He(s,l));return this.curves.push(c),this.currentPoint.set(s,l),this}splineThru(e){const t=[this.currentPoint.clone()].concat(e),i=new $A(t);return this.curves.push(i),this.currentPoint.copy(e[e.length-1]),this}arc(e,t,i,a,s,l){const c=this.currentPoint.x,d=this.currentPoint.y;return this.absarc(e+c,t+d,i,a,s,l),this}absarc(e,t,i,a,s,l){return this.absellipse(e,t,i,i,a,s,l),this}ellipse(e,t,i,a,s,l,c,d){const p=this.currentPoint.x,g=this.currentPoint.y;return this.absellipse(e+p,t+g,i,a,s,l,c,d),this}absellipse(e,t,i,a,s,l,c,d){const p=new ky(e,t,i,a,s,l,c,d);if(this.curves.length>0){const v=p.getPoint(0);v.equals(this.currentPoint)||this.lineTo(v.x,v.y)}this.curves.push(p);const g=p.getPoint(1);return this.currentPoint.copy(g),this}copy(e){return super.copy(e),this.currentPoint.copy(e.currentPoint),this}toJSON(){const e=super.toJSON();return e.currentPoint=this.currentPoint.toArray(),e}fromJSON(e){return super.fromJSON(e),this.currentPoint.fromArray(e.currentPoint),this}}class cf extends Yy{constructor(e){super(e),this.uuid=Wr(),this.type="Shape",this.holes=[]}getPointsHoles(e){const t=[];for(let i=0,a=this.holes.length;i<a;i++)t[i]=this.holes[i].getPoints(e);return t}extractPoints(e){return{shape:this.getPoints(e),holes:this.getPointsHoles(e)}}copy(e){super.copy(e),this.holes=[];for(let t=0,i=e.holes.length;t<i;t++){const a=e.holes[t];this.holes.push(a.clone())}return this}toJSON(){const e=super.toJSON();e.uuid=this.uuid,e.holes=[];for(let t=0,i=this.holes.length;t<i;t++){const a=this.holes[t];e.holes.push(a.toJSON())}return e}fromJSON(e){super.fromJSON(e),this.uuid=e.uuid,this.holes=[];for(let t=0,i=e.holes.length;t<i;t++){const a=e.holes[t];this.holes.push(new Yy().fromJSON(a))}return this}}function BL(n,e,t=2){const i=e&&e.length,a=i?e[0]*t:n.length;let s=MC(n,0,a,t,!0);const l=[];if(!s||s.next===s.prev)return l;let c,d,p;if(i&&(s=LL(n,e,s,t)),n.length>80*t){c=n[0],d=n[1];let g=c,v=d;for(let _=t;_<a;_+=t){const x=n[_],S=n[_+1];x<c&&(c=x),S<d&&(d=S),x>g&&(g=x),S>v&&(v=S)}p=Math.max(g-c,v-d),p=p!==0?32767/p:0}return Nm(s,l,t,c,d,p,0),l}function MC(n,e,t,i,a){let s;if(a===YL(n,e,t,i)>0)for(let l=e;l<t;l+=i)s=RC(l/i|0,n[l],n[l+1],s);else for(let l=t-i;l>=e;l-=i)s=RC(l/i|0,n[l],n[l+1],s);return s&&cd(s,s.next)&&(Im(s),s=s.next),s}function uf(n,e){if(!n)return n;e||(e=n);let t=n,i;do if(i=!1,!t.steiner&&(cd(t,t.next)||gi(t.prev,t,t.next)===0)){if(Im(t),t=e=t.prev,t===t.next)break;i=!0}else t=t.next;while(i||t!==e);return e}function Nm(n,e,t,i,a,s,l){if(!n)return;!l&&s&&HL(n,i,a,s);let c=n;for(;n.prev!==n.next;){const d=n.prev,p=n.next;if(s?OL(n,i,a,s):DL(n)){e.push(d.i,n.i,p.i),Im(n),n=p.next,c=p.next;continue}if(n=p,n===c){l?l===1?(n=NL(uf(n),e),Nm(n,e,t,i,a,s,2)):l===2&&UL(n,e,t,i,a,s):Nm(uf(n),e,t,i,a,s,1);break}}}function DL(n){const e=n.prev,t=n,i=n.next;if(gi(e,t,i)>=0)return!1;const a=e.x,s=t.x,l=i.x,c=e.y,d=t.y,p=i.y,g=Math.min(a,s,l),v=Math.min(c,d,p),_=Math.max(a,s,l),x=Math.max(c,d,p);let S=i.next;for(;S!==e;){if(S.x>=g&&S.x<=_&&S.y>=v&&S.y<=x&&Um(a,c,s,d,l,p,S.x,S.y)&&gi(S.prev,S,S.next)>=0)return!1;S=S.next}return!0}function OL(n,e,t,i){const a=n.prev,s=n,l=n.next;if(gi(a,s,l)>=0)return!1;const c=a.x,d=s.x,p=l.x,g=a.y,v=s.y,_=l.y,x=Math.min(c,d,p),S=Math.min(g,v,_),C=Math.max(c,d,p),T=Math.max(g,v,_),M=eS(x,S,e,t,i),w=eS(C,T,e,t,i);let B=n.prevZ,D=n.nextZ;for(;B&&B.z>=M&&D&&D.z<=w;){if(B.x>=x&&B.x<=C&&B.y>=S&&B.y<=T&&B!==a&&B!==l&&Um(c,g,d,v,p,_,B.x,B.y)&&gi(B.prev,B,B.next)>=0||(B=B.prevZ,D.x>=x&&D.x<=C&&D.y>=S&&D.y<=T&&D!==a&&D!==l&&Um(c,g,d,v,p,_,D.x,D.y)&&gi(D.prev,D,D.next)>=0))return!1;D=D.nextZ}for(;B&&B.z>=M;){if(B.x>=x&&B.x<=C&&B.y>=S&&B.y<=T&&B!==a&&B!==l&&Um(c,g,d,v,p,_,B.x,B.y)&&gi(B.prev,B,B.next)>=0)return!1;B=B.prevZ}for(;D&&D.z<=w;){if(D.x>=x&&D.x<=C&&D.y>=S&&D.y<=T&&D!==a&&D!==l&&Um(c,g,d,v,p,_,D.x,D.y)&&gi(D.prev,D,D.next)>=0)return!1;D=D.nextZ}return!0}function NL(n,e){let t=n;do{const i=t.prev,a=t.next.next;!cd(i,a)&&TC(i,t,t.next,a)&&Lm(i,a)&&Lm(a,i)&&(e.push(i.i,t.i,a.i),Im(t),Im(t.next),t=n=a),t=t.next}while(t!==n);return uf(t)}function UL(n,e,t,i,a,s){let l=n;do{let c=l.next.next;for(;c!==l.prev;){if(l.i!==c.i&&kL(l,c)){let d=CC(l,c);l=uf(l,l.next),d=uf(d,d.next),Nm(l,e,t,i,a,s,0),Nm(d,e,t,i,a,s,0);return}c=c.next}l=l.next}while(l!==n)}function LL(n,e,t,i){const a=[];for(let s=0,l=e.length;s<l;s++){const c=e[s]*i,d=s<l-1?e[s+1]*i:n.length,p=MC(n,c,d,i,!1);p===p.next&&(p.steiner=!0),a.push(VL(p))}a.sort(IL);for(let s=0;s<a.length;s++)t=PL(a[s],t);return t}function IL(n,e){let t=n.x-e.x;if(t===0&&(t=n.y-e.y,t===0)){const i=(n.next.y-n.y)/(n.next.x-n.x),a=(e.next.y-e.y)/(e.next.x-e.x);t=i-a}return t}function PL(n,e){const t=FL(n,e);if(!t)return e;const i=CC(t,n);return uf(i,i.next),uf(t,t.next)}function FL(n,e){let t=e;const i=n.x,a=n.y;let s=-1/0,l;if(cd(n,t))return t;do{if(cd(n,t.next))return t.next;if(a<=t.y&&a>=t.next.y&&t.next.y!==t.y){const v=t.x+(a-t.y)*(t.next.x-t.x)/(t.next.y-t.y);if(v<=i&&v>s&&(s=v,l=t.x<t.next.x?t:t.next,v===i))return l}t=t.next}while(t!==e);if(!l)return null;const c=l,d=l.x,p=l.y;let g=1/0;t=l;do{if(i>=t.x&&t.x>=d&&i!==t.x&&EC(a<p?i:s,a,d,p,a<p?s:i,a,t.x,t.y)){const v=Math.abs(a-t.y)/(i-t.x);Lm(t,n)&&(v<g||v===g&&(t.x>l.x||t.x===l.x&&zL(l,t)))&&(l=t,g=v)}t=t.next}while(t!==c);return l}function zL(n,e){return gi(n.prev,n,e.prev)<0&&gi(e.next,n,n.next)<0}function HL(n,e,t,i){let a=n;do a.z===0&&(a.z=eS(a.x,a.y,e,t,i)),a.prevZ=a.prev,a.nextZ=a.next,a=a.next;while(a!==n);a.prevZ.nextZ=null,a.prevZ=null,GL(a)}function GL(n){let e,t=1;do{let i=n,a;n=null;let s=null;for(e=0;i;){e++;let l=i,c=0;for(let p=0;p<t&&(c++,l=l.nextZ,!!l);p++);let d=t;for(;c>0||d>0&&l;)c!==0&&(d===0||!l||i.z<=l.z)?(a=i,i=i.nextZ,c--):(a=l,l=l.nextZ,d--),s?s.nextZ=a:n=a,a.prevZ=s,s=a;i=l}s.nextZ=null,t*=2}while(e>1);return n}function eS(n,e,t,i,a){return n=(n-t)*a|0,e=(e-i)*a|0,n=(n|n<<8)&16711935,n=(n|n<<4)&252645135,n=(n|n<<2)&858993459,n=(n|n<<1)&1431655765,e=(e|e<<8)&16711935,e=(e|e<<4)&252645135,e=(e|e<<2)&858993459,e=(e|e<<1)&1431655765,n|e<<1}function VL(n){let e=n,t=n;do(e.x<t.x||e.x===t.x&&e.y<t.y)&&(t=e),e=e.next;while(e!==n);return t}function EC(n,e,t,i,a,s,l,c){return(a-l)*(e-c)>=(n-l)*(s-c)&&(n-l)*(i-c)>=(t-l)*(e-c)&&(t-l)*(s-c)>=(a-l)*(i-c)}function Um(n,e,t,i,a,s,l,c){return!(n===l&&e===c)&&EC(n,e,t,i,a,s,l,c)}function kL(n,e){return n.next.i!==e.i&&n.prev.i!==e.i&&!XL(n,e)&&(Lm(n,e)&&Lm(e,n)&&jL(n,e)&&(gi(n.prev,n,e.prev)||gi(n,e.prev,e))||cd(n,e)&&gi(n.prev,n,n.next)>0&&gi(e.prev,e,e.next)>0)}function gi(n,e,t){return(e.y-n.y)*(t.x-e.x)-(e.x-n.x)*(t.y-e.y)}function cd(n,e){return n.x===e.x&&n.y===e.y}function TC(n,e,t,i){const a=Wy(gi(n,e,t)),s=Wy(gi(n,e,i)),l=Wy(gi(t,i,n)),c=Wy(gi(t,i,e));return!!(a!==s&&l!==c||a===0&&qy(n,t,e)||s===0&&qy(n,i,e)||l===0&&qy(t,n,i)||c===0&&qy(t,e,i))}function qy(n,e,t){return e.x<=Math.max(n.x,t.x)&&e.x>=Math.min(n.x,t.x)&&e.y<=Math.max(n.y,t.y)&&e.y>=Math.min(n.y,t.y)}function Wy(n){return n>0?1:n<0?-1:0}function XL(n,e){let t=n;do{if(t.i!==n.i&&t.next.i!==n.i&&t.i!==e.i&&t.next.i!==e.i&&TC(t,t.next,n,e))return!0;t=t.next}while(t!==n);return!1}function Lm(n,e){return gi(n.prev,n,n.next)<0?gi(n,e,n.next)>=0&&gi(n,n.prev,e)>=0:gi(n,e,n.prev)<0||gi(n,n.next,e)<0}function jL(n,e){let t=n,i=!1;const a=(n.x+e.x)/2,s=(n.y+e.y)/2;do t.y>s!=t.next.y>s&&t.next.y!==t.y&&a<(t.next.x-t.x)*(s-t.y)/(t.next.y-t.y)+t.x&&(i=!i),t=t.next;while(t!==n);return i}function CC(n,e){const t=tS(n.i,n.x,n.y),i=tS(e.i,e.x,e.y),a=n.next,s=e.prev;return n.next=e,e.prev=n,t.next=a,a.prev=t,i.next=t,t.prev=i,s.next=i,i.prev=s,i}function RC(n,e,t,i){const a=tS(n,e,t);return i?(a.next=i.next,a.prev=i,i.next.prev=a,i.next=a):(a.prev=a,a.next=a),a}function Im(n){n.next.prev=n.prev,n.prev.next=n.next,n.prevZ&&(n.prevZ.nextZ=n.nextZ),n.nextZ&&(n.nextZ.prevZ=n.prevZ)}function tS(n,e,t){return{i:n,x:e,y:t,prev:null,next:null,z:0,prevZ:null,nextZ:null,steiner:!1}}function YL(n,e,t,i){let a=0;for(let s=e,l=t-i;s<t;s+=i)a+=(n[l]-n[s])*(n[s+1]+n[l+1]),l=s;return a}class qL{static triangulate(e,t,i=2){return BL(e,t,i)}}class eo{static area(e){const t=e.length;let i=0;for(let a=t-1,s=0;s<t;a=s++)i+=e[a].x*e[s].y-e[s].x*e[a].y;return i*.5}static isClockWise(e){return eo.area(e)<0}static triangulateShape(e,t){const i=[],a=[],s=[];wC(e),BC(i,e);let l=e.length;t.forEach(wC);for(let d=0;d<t.length;d++)a.push(l),l+=t[d].length,BC(i,t[d]);const c=qL.triangulate(i,a);for(let d=0;d<c.length;d+=3)s.push(c.slice(d,d+3));return s}}function wC(n){const e=n.length;e>2&&n[e-1].equals(n[0])&&n.pop()}function BC(n,e){for(let t=0;t<e.length;t++)n.push(e[t].x),n.push(e[t].y)}class Jy extends Jt{constructor(e=new cf([new He(.5,.5),new He(-.5,.5),new He(-.5,-.5),new He(.5,-.5)]),t={}){super(),this.type="ExtrudeGeometry",this.parameters={shapes:e,options:t},e=Array.isArray(e)?e:[e];const i=this,a=[],s=[];for(let c=0,d=e.length;c<d;c++){const p=e[c];l(p)}this.setAttribute("position",new _t(a,3)),this.setAttribute("uv",new _t(s,2)),this.computeVertexNormals();function l(c){const d=[],p=t.curveSegments!==void 0?t.curveSegments:12,g=t.steps!==void 0?t.steps:1,v=t.depth!==void 0?t.depth:1;let _=t.bevelEnabled!==void 0?t.bevelEnabled:!0,x=t.bevelThickness!==void 0?t.bevelThickness:.2,S=t.bevelSize!==void 0?t.bevelSize:x-.1,C=t.bevelOffset!==void 0?t.bevelOffset:0,T=t.bevelSegments!==void 0?t.bevelSegments:3;const M=t.extrudePath,w=t.UVGenerator!==void 0?t.UVGenerator:WL;let B,D=!1,P,U,z,j;if(M){B=M.getSpacedPoints(g),D=!0,_=!1;const Ne=M.isCatmullRomCurve3?M.closed:!1;P=M.computeFrenetFrames(g,Ne),U=new K,z=new K,j=new K}_||(T=0,x=0,S=0,C=0);const L=c.extractPoints(p);let F=L.shape;const W=L.holes;if(!eo.isClockWise(F)){F=F.reverse();for(let Ne=0,Ge=W.length;Ne<Ge;Ne++){const Ie=W[Ne];eo.isClockWise(Ie)&&(W[Ne]=Ie.reverse())}}function $(Ne){const Ie=10000000000000001e-36;let et=Ne[0];for(let Q=1;Q<=Ne.length;Q++){const Tt=Q%Ne.length,Ze=Ne[Tt],At=Ze.x-et.x,Ke=Ze.y-et.y,V=At*At+Ke*Ke,I=Math.max(Math.abs(Ze.x),Math.abs(Ze.y),Math.abs(et.x),Math.abs(et.y)),re=Ie*I*I;if(V<=re){Ne.splice(Tt,1),Q--;continue}et=Ze}}$(F),W.forEach($);const ae=W.length,le=F;for(let Ne=0;Ne<ae;Ne++){const Ge=W[Ne];F=F.concat(Ge)}function G(Ne,Ge,Ie){return Ge||Dt("ExtrudeGeometry: vec does not exist"),Ne.clone().addScaledVector(Ge,Ie)}const J=F.length;function Z(Ne,Ge,Ie){let et,Q,Tt;const Ze=Ne.x-Ge.x,At=Ne.y-Ge.y,Ke=Ie.x-Ne.x,V=Ie.y-Ne.y,I=Ze*Ze+At*At,re=Ze*V-At*Ke;if(Math.abs(re)>Number.EPSILON){const Ae=Math.sqrt(I),Be=Math.sqrt(Ke*Ke+V*V),Re=Ge.x-At/Ae,pt=Ge.y+Ze/Ae,Qe=Ie.x-V/Be,gt=Ie.y+Ke/Be,wt=((Qe-Re)*V-(gt-pt)*Ke)/(Ze*V-At*Ke);et=Re+Ze*wt-Ne.x,Q=pt+At*wt-Ne.y;const Fe=et*et+Q*Q;if(Fe<=2)return new He(et,Q);Tt=Math.sqrt(Fe/2)}else{let Ae=!1;Ze>Number.EPSILON?Ke>Number.EPSILON&&(Ae=!0):Ze<-Number.EPSILON?Ke<-Number.EPSILON&&(Ae=!0):Math.sign(At)===Math.sign(V)&&(Ae=!0),Ae?(et=-At,Q=Ze,Tt=Math.sqrt(I)):(et=Ze,Q=At,Tt=Math.sqrt(I/2))}return new He(et/Tt,Q/Tt)}const pe=[];for(let Ne=0,Ge=le.length,Ie=Ge-1,et=Ne+1;Ne<Ge;Ne++,Ie++,et++)Ie===Ge&&(Ie=0),et===Ge&&(et=0),pe[Ne]=Z(le[Ne],le[Ie],le[et]);const _e=[];let q,ce=pe.concat();for(let Ne=0,Ge=ae;Ne<Ge;Ne++){const Ie=W[Ne];q=[];for(let et=0,Q=Ie.length,Tt=Q-1,Ze=et+1;et<Q;et++,Tt++,Ze++)Tt===Q&&(Tt=0),Ze===Q&&(Ze=0),q[et]=Z(Ie[et],Ie[Tt],Ie[Ze]);_e.push(q),ce=ce.concat(q)}let Te;if(T===0)Te=eo.triangulateShape(le,W);else{const Ne=[],Ge=[];for(let Ie=0;Ie<T;Ie++){const et=Ie/T,Q=x*Math.cos(et*Math.PI/2),Tt=S*Math.sin(et*Math.PI/2)+C;for(let Ze=0,At=le.length;Ze<At;Ze++){const Ke=G(le[Ze],pe[Ze],Tt);tt(Ke.x,Ke.y,-Q),et===0&&Ne.push(Ke)}for(let Ze=0,At=ae;Ze<At;Ze++){const Ke=W[Ze];q=_e[Ze];const V=[];for(let I=0,re=Ke.length;I<re;I++){const Ae=G(Ke[I],q[I],Tt);tt(Ae.x,Ae.y,-Q),et===0&&V.push(Ae)}et===0&&Ge.push(V)}}Te=eo.triangulateShape(Ne,Ge)}const De=Te.length,qe=S+C;for(let Ne=0;Ne<J;Ne++){const Ge=_?G(F[Ne],ce[Ne],qe):F[Ne];D?(z.copy(P.normals[0]).multiplyScalar(Ge.x),U.copy(P.binormals[0]).multiplyScalar(Ge.y),j.copy(B[0]).add(z).add(U),tt(j.x,j.y,j.z)):tt(Ge.x,Ge.y,0)}for(let Ne=1;Ne<=g;Ne++)for(let Ge=0;Ge<J;Ge++){const Ie=_?G(F[Ge],ce[Ge],qe):F[Ge];D?(z.copy(P.normals[Ne]).multiplyScalar(Ie.x),U.copy(P.binormals[Ne]).multiplyScalar(Ie.y),j.copy(B[Ne]).add(z).add(U),tt(j.x,j.y,j.z)):tt(Ie.x,Ie.y,v/g*Ne)}for(let Ne=T-1;Ne>=0;Ne--){const Ge=Ne/T,Ie=x*Math.cos(Ge*Math.PI/2),et=S*Math.sin(Ge*Math.PI/2)+C;for(let Q=0,Tt=le.length;Q<Tt;Q++){const Ze=G(le[Q],pe[Q],et);tt(Ze.x,Ze.y,v+Ie)}for(let Q=0,Tt=W.length;Q<Tt;Q++){const Ze=W[Q];q=_e[Q];for(let At=0,Ke=Ze.length;At<Ke;At++){const V=G(Ze[At],q[At],et);D?tt(V.x,V.y+B[g-1].y,B[g-1].x+Ie):tt(V.x,V.y,v+Ie)}}}ge(),Ee();function ge(){const Ne=a.length/3;if(_){let Ge=0,Ie=J*Ge;for(let et=0;et<De;et++){const Q=Te[et];ot(Q[2]+Ie,Q[1]+Ie,Q[0]+Ie)}Ge=g+T*2,Ie=J*Ge;for(let et=0;et<De;et++){const Q=Te[et];ot(Q[0]+Ie,Q[1]+Ie,Q[2]+Ie)}}else{for(let Ge=0;Ge<De;Ge++){const Ie=Te[Ge];ot(Ie[2],Ie[1],Ie[0])}for(let Ge=0;Ge<De;Ge++){const Ie=Te[Ge];ot(Ie[0]+J*g,Ie[1]+J*g,Ie[2]+J*g)}}i.addGroup(Ne,a.length/3-Ne,0)}function Ee(){const Ne=a.length/3;let Ge=0;Xe(le,Ge),Ge+=le.length;for(let Ie=0,et=W.length;Ie<et;Ie++){const Q=W[Ie];Xe(Q,Ge),Ge+=Q.length}i.addGroup(Ne,a.length/3-Ne,1)}function Xe(Ne,Ge){let Ie=Ne.length;for(;--Ie>=0;){const et=Ie;let Q=Ie-1;Q<0&&(Q=Ne.length-1);for(let Tt=0,Ze=g+T*2;Tt<Ze;Tt++){const At=J*Tt,Ke=J*(Tt+1),V=Ge+et+At,I=Ge+Q+At,re=Ge+Q+Ke,Ae=Ge+et+Ke;Vt(V,I,re,Ae)}}}function tt(Ne,Ge,Ie){d.push(Ne),d.push(Ge),d.push(Ie)}function ot(Ne,Ge,Ie){en(Ne),en(Ge),en(Ie);const et=a.length/3,Q=w.generateTopUV(i,a,et-3,et-2,et-1);Et(Q[0]),Et(Q[1]),Et(Q[2])}function Vt(Ne,Ge,Ie,et){en(Ne),en(Ge),en(et),en(Ge),en(Ie),en(et);const Q=a.length/3,Tt=w.generateSideWallUV(i,a,Q-6,Q-3,Q-2,Q-1);Et(Tt[0]),Et(Tt[1]),Et(Tt[3]),Et(Tt[1]),Et(Tt[2]),Et(Tt[3])}function en(Ne){a.push(d[Ne*3+0]),a.push(d[Ne*3+1]),a.push(d[Ne*3+2])}function Et(Ne){s.push(Ne.x),s.push(Ne.y)}}}copy(e){return super.copy(e),this.parameters=Object.assign({},e.parameters),this}toJSON(){const e=super.toJSON(),t=this.parameters.shapes,i=this.parameters.options;return JL(t,i,e)}static fromJSON(e,t){const i=[];for(let s=0,l=e.shapes.length;s<l;s++){const c=t[e.shapes[s]];i.push(c)}const a=e.options.extrudePath;return a!==void 0&&(e.options.extrudePath=new jy[a.type]().fromJSON(a)),new Jy(i,e.options)}}const WL={generateTopUV:function(n,e,t,i,a){const s=e[t*3],l=e[t*3+1],c=e[i*3],d=e[i*3+1],p=e[a*3],g=e[a*3+1];return[new He(s,l),new He(c,d),new He(p,g)]},generateSideWallUV:function(n,e,t,i,a,s){const l=e[t*3],c=e[t*3+1],d=e[t*3+2],p=e[i*3],g=e[i*3+1],v=e[i*3+2],_=e[a*3],x=e[a*3+1],S=e[a*3+2],C=e[s*3],T=e[s*3+1],M=e[s*3+2];return Math.abs(c-g)<Math.abs(l-p)?[new He(l,1-d),new He(p,1-v),new He(_,1-S),new He(C,1-M)]:[new He(c,1-d),new He(g,1-v),new He(x,1-S),new He(T,1-M)]}};function JL(n,e,t){if(t.shapes=[],Array.isArray(n))for(let i=0,a=n.length;i<a;i++){const s=n[i];t.shapes.push(s.uuid)}else t.shapes.push(n.uuid);return t.options=Object.assign({},e),e.extrudePath!==void 0&&(t.options.extrudePath=e.extrudePath.toJSON()),t}class Ky extends qc{constructor(e=1,t=0){const i=(1+Math.sqrt(5))/2,a=[-1,i,0,1,i,0,-1,-i,0,1,-i,0,0,-1,i,0,1,i,0,-1,-i,0,1,-i,i,0,-1,i,0,1,-i,0,-1,-i,0,1],s=[0,11,5,0,5,1,0,1,7,0,7,10,0,10,11,1,5,9,5,11,4,11,10,2,10,7,6,7,1,8,3,9,4,3,4,2,3,2,6,3,6,8,3,8,9,4,9,5,2,4,11,6,2,10,8,6,7,9,8,1];super(a,s,e,t),this.type="IcosahedronGeometry",this.parameters={radius:e,detail:t}}static fromJSON(e){return new Ky(e.radius,e.detail)}}class Qy extends Jt{constructor(e=[new He(0,-.5),new He(.5,0),new He(0,.5)],t=12,i=0,a=Math.PI*2){super(),this.type="LatheGeometry",this.parameters={points:e,segments:t,phiStart:i,phiLength:a},t=Math.floor(t),a=jt(a,0,Math.PI*2);const s=[],l=[],c=[],d=[],p=[],g=1/t,v=new K,_=new He,x=new K,S=new K,C=new K;let T=0,M=0;for(let w=0;w<=e.length-1;w++)switch(w){case 0:T=e[w+1].x-e[w].x,M=e[w+1].y-e[w].y,x.x=M*1,x.y=-T,x.z=M*0,C.copy(x),x.normalize(),d.push(x.x,x.y,x.z);break;case e.length-1:d.push(C.x,C.y,C.z);break;default:T=e[w+1].x-e[w].x,M=e[w+1].y-e[w].y,x.x=M*1,x.y=-T,x.z=M*0,S.copy(x),x.x+=C.x,x.y+=C.y,x.z+=C.z,x.normalize(),d.push(x.x,x.y,x.z),C.copy(S)}for(let w=0;w<=t;w++){const B=i+w*g*a,D=Math.sin(B),P=Math.cos(B);for(let U=0;U<=e.length-1;U++){v.x=e[U].x*D,v.y=e[U].y,v.z=e[U].x*P,l.push(v.x,v.y,v.z),_.x=w/t,_.y=U/(e.length-1),c.push(_.x,_.y);const z=d[3*U+0]*D,j=d[3*U+1],L=d[3*U+0]*P;p.push(z,j,L)}}for(let w=0;w<t;w++)for(let B=0;B<e.length-1;B++){const D=B+w*e.length,P=D,U=D+e.length,z=D+e.length+1,j=D+1;s.push(P,U,j),s.push(z,j,U)}this.setIndex(s),this.setAttribute("position",new _t(l,3)),this.setAttribute("uv",new _t(c,2)),this.setAttribute("normal",new _t(p,3))}copy(e){return super.copy(e),this.parameters=Object.assign({},e.parameters),this}static fromJSON(e){return new Qy(e.points,e.segments,e.phiStart,e.phiLength)}}class Pm extends qc{constructor(e=1,t=0){const i=[1,0,0,-1,0,0,0,1,0,0,-1,0,0,0,1,0,0,-1],a=[0,2,4,0,4,3,0,3,5,0,5,2,1,2,5,1,5,3,1,3,4,1,4,2];super(i,a,e,t),this.type="OctahedronGeometry",this.parameters={radius:e,detail:t}}static fromJSON(e){return new Pm(e.radius,e.detail)}}class ud extends Jt{constructor(e=1,t=1,i=1,a=1){super(),this.type="PlaneGeometry",this.parameters={width:e,height:t,widthSegments:i,heightSegments:a};const s=e/2,l=t/2,c=Math.floor(i),d=Math.floor(a),p=c+1,g=d+1,v=e/c,_=t/d,x=[],S=[],C=[],T=[];for(let M=0;M<g;M++){const w=M*_-l;for(let B=0;B<p;B++){const D=B*v-s;S.push(D,-w,0),C.push(0,0,1),T.push(B/c),T.push(1-M/d)}}for(let M=0;M<d;M++)for(let w=0;w<c;w++){const B=w+p*M,D=w+p*(M+1),P=w+1+p*(M+1),U=w+1+p*M;x.push(B,D,U),x.push(D,P,U)}this.setIndex(x),this.setAttribute("position",new _t(S,3)),this.setAttribute("normal",new _t(C,3)),this.setAttribute("uv",new _t(T,2))}copy(e){return super.copy(e),this.parameters=Object.assign({},e.parameters),this}static fromJSON(e){return new ud(e.width,e.height,e.widthSegments,e.heightSegments)}}class Zy extends Jt{constructor(e=.5,t=1,i=32,a=1,s=0,l=Math.PI*2){super(),this.type="RingGeometry",this.parameters={innerRadius:e,outerRadius:t,thetaSegments:i,phiSegments:a,thetaStart:s,thetaLength:l},i=Math.max(3,i),a=Math.max(1,a);const c=[],d=[],p=[],g=[];let v=e;const _=(t-e)/a,x=new K,S=new He;for(let C=0;C<=a;C++){for(let T=0;T<=i;T++){const M=s+T/i*l;x.x=v*Math.cos(M),x.y=v*Math.sin(M),d.push(x.x,x.y,x.z),p.push(0,0,1),S.x=(x.x/t+1)/2,S.y=(x.y/t+1)/2,g.push(S.x,S.y)}v+=_}for(let C=0;C<a;C++){const T=C*(i+1);for(let M=0;M<i;M++){const w=M+T,B=w,D=w+i+1,P=w+i+2,U=w+1;c.push(B,D,U),c.push(D,P,U)}}this.setIndex(c),this.setAttribute("position",new _t(d,3)),this.setAttribute("normal",new _t(p,3)),this.setAttribute("uv",new _t(g,2))}copy(e){return super.copy(e),this.parameters=Object.assign({},e.parameters),this}static fromJSON(e){return new Zy(e.innerRadius,e.outerRadius,e.thetaSegments,e.phiSegments,e.thetaStart,e.thetaLength)}}class $y extends Jt{constructor(e=new cf([new He(0,.5),new He(-.5,-.5),new He(.5,-.5)]),t=12){super(),this.type="ShapeGeometry",this.parameters={shapes:e,curveSegments:t};const i=[],a=[],s=[],l=[];let c=0,d=0;if(Array.isArray(e)===!1)p(e);else for(let g=0;g<e.length;g++)p(e[g]),this.addGroup(c,d,g),c+=d,d=0;this.setIndex(i),this.setAttribute("position",new _t(a,3)),this.setAttribute("normal",new _t(s,3)),this.setAttribute("uv",new _t(l,2));function p(g){const v=a.length/3,_=g.extractPoints(t);let x=_.shape;const S=_.holes;eo.isClockWise(x)===!1&&(x=x.reverse());for(let T=0,M=S.length;T<M;T++){const w=S[T];eo.isClockWise(w)===!0&&(S[T]=w.reverse())}const C=eo.triangulateShape(x,S);for(let T=0,M=S.length;T<M;T++){const w=S[T];x=x.concat(w)}for(let T=0,M=x.length;T<M;T++){const w=x[T];a.push(w.x,w.y,0),s.push(0,0,1),l.push(w.x,w.y)}for(let T=0,M=C.length;T<M;T++){const w=C[T],B=w[0]+v,D=w[1]+v,P=w[2]+v;i.push(B,D,P),d+=3}}}copy(e){return super.copy(e),this.parameters=Object.assign({},e.parameters),this}toJSON(){const e=super.toJSON(),t=this.parameters.shapes;return KL(t,e)}static fromJSON(e,t){const i=[];for(let a=0,s=e.shapes.length;a<s;a++){const l=t[e.shapes[a]];i.push(l)}return new $y(i,e.curveSegments)}}function KL(n,e){if(e.shapes=[],Array.isArray(n))for(let t=0,i=n.length;t<i;t++){const a=n[t];e.shapes.push(a.uuid)}else e.shapes.push(n.uuid);return e}class Fm extends Jt{constructor(e=1,t=32,i=16,a=0,s=Math.PI*2,l=0,c=Math.PI){super(),this.type="SphereGeometry",this.parameters={radius:e,widthSegments:t,heightSegments:i,phiStart:a,phiLength:s,thetaStart:l,thetaLength:c},t=Math.max(3,Math.floor(t)),i=Math.max(2,Math.floor(i));const d=Math.min(l+c,Math.PI);let p=0;const g=[],v=new K,_=new K,x=[],S=[],C=[],T=[];for(let M=0;M<=i;M++){const w=[],B=M/i;let D=0;M===0&&l===0?D=.5/t:M===i&&d===Math.PI&&(D=-.5/t);for(let P=0;P<=t;P++){const U=P/t;v.x=-e*Math.cos(a+U*s)*Math.sin(l+B*c),v.y=e*Math.cos(l+B*c),v.z=e*Math.sin(a+U*s)*Math.sin(l+B*c),S.push(v.x,v.y,v.z),_.copy(v).normalize(),C.push(_.x,_.y,_.z),T.push(U+D,1-B),w.push(p++)}g.push(w)}for(let M=0;M<i;M++)for(let w=0;w<t;w++){const B=g[M][w+1],D=g[M][w],P=g[M+1][w],U=g[M+1][w+1];(M!==0||l>0)&&x.push(B,D,U),(M!==i-1||d<Math.PI)&&x.push(D,P,U)}this.setIndex(x),this.setAttribute("position",new _t(S,3)),this.setAttribute("normal",new _t(C,3)),this.setAttribute("uv",new _t(T,2))}copy(e){return super.copy(e),this.parameters=Object.assign({},e.parameters),this}static fromJSON(e){return new Fm(e.radius,e.widthSegments,e.heightSegments,e.phiStart,e.phiLength,e.thetaStart,e.thetaLength)}}class e_ extends qc{constructor(e=1,t=0){const i=[1,1,1,-1,-1,1,-1,1,-1,1,-1,-1],a=[2,1,0,0,3,2,1,3,0,2,3,1];super(i,a,e,t),this.type="TetrahedronGeometry",this.parameters={radius:e,detail:t}}static fromJSON(e){return new e_(e.radius,e.detail)}}class t_ extends Jt{constructor(e=1,t=.4,i=12,a=48,s=Math.PI*2){super(),this.type="TorusGeometry",this.parameters={radius:e,tube:t,radialSegments:i,tubularSegments:a,arc:s},i=Math.floor(i),a=Math.floor(a);const l=[],c=[],d=[],p=[],g=new K,v=new K,_=new K;for(let x=0;x<=i;x++)for(let S=0;S<=a;S++){const C=S/a*s,T=x/i*Math.PI*2;v.x=(e+t*Math.cos(T))*Math.cos(C),v.y=(e+t*Math.cos(T))*Math.sin(C),v.z=t*Math.sin(T),c.push(v.x,v.y,v.z),g.x=e*Math.cos(C),g.y=e*Math.sin(C),_.subVectors(v,g).normalize(),d.push(_.x,_.y,_.z),p.push(S/a),p.push(x/i)}for(let x=1;x<=i;x++)for(let S=1;S<=a;S++){const C=(a+1)*x+S-1,T=(a+1)*(x-1)+S-1,M=(a+1)*(x-1)+S,w=(a+1)*x+S;l.push(C,T,w),l.push(T,M,w)}this.setIndex(l),this.setAttribute("position",new _t(c,3)),this.setAttribute("normal",new _t(d,3)),this.setAttribute("uv",new _t(p,2))}copy(e){return super.copy(e),this.parameters=Object.assign({},e.parameters),this}static fromJSON(e){return new t_(e.radius,e.tube,e.radialSegments,e.tubularSegments,e.arc)}}class n_ extends Jt{constructor(e=1,t=.4,i=64,a=8,s=2,l=3){super(),this.type="TorusKnotGeometry",this.parameters={radius:e,tube:t,tubularSegments:i,radialSegments:a,p:s,q:l},i=Math.floor(i),a=Math.floor(a);const c=[],d=[],p=[],g=[],v=new K,_=new K,x=new K,S=new K,C=new K,T=new K,M=new K;for(let B=0;B<=i;++B){const D=B/i*s*Math.PI*2;w(D,s,l,e,x),w(D+.01,s,l,e,S),T.subVectors(S,x),M.addVectors(S,x),C.crossVectors(T,M),M.crossVectors(C,T),C.normalize(),M.normalize();for(let P=0;P<=a;++P){const U=P/a*Math.PI*2,z=-t*Math.cos(U),j=t*Math.sin(U);v.x=x.x+(z*M.x+j*C.x),v.y=x.y+(z*M.y+j*C.y),v.z=x.z+(z*M.z+j*C.z),d.push(v.x,v.y,v.z),_.subVectors(v,x).normalize(),p.push(_.x,_.y,_.z),g.push(B/i),g.push(P/a)}}for(let B=1;B<=i;B++)for(let D=1;D<=a;D++){const P=(a+1)*(B-1)+(D-1),U=(a+1)*B+(D-1),z=(a+1)*B+D,j=(a+1)*(B-1)+D;c.push(P,U,j),c.push(U,z,j)}this.setIndex(c),this.setAttribute("position",new _t(d,3)),this.setAttribute("normal",new _t(p,3)),this.setAttribute("uv",new _t(g,2));function w(B,D,P,U,z){const j=Math.cos(B),L=Math.sin(B),F=P/D*B,W=Math.cos(F);z.x=U*(2+W)*.5*j,z.y=U*(2+W)*L*.5,z.z=U*Math.sin(F)*.5}}copy(e){return super.copy(e),this.parameters=Object.assign({},e.parameters),this}static fromJSON(e){return new n_(e.radius,e.tube,e.tubularSegments,e.radialSegments,e.p,e.q)}}class i_ extends Jt{constructor(e=new ZA(new K(-1,-1,0),new K(-1,1,0),new K(1,1,0)),t=64,i=1,a=8,s=!1){super(),this.type="TubeGeometry",this.parameters={path:e,tubularSegments:t,radius:i,radialSegments:a,closed:s};const l=e.computeFrenetFrames(t,s);this.tangents=l.tangents,this.normals=l.normals,this.binormals=l.binormals;const c=new K,d=new K,p=new He;let g=new K;const v=[],_=[],x=[],S=[];C(),this.setIndex(S),this.setAttribute("position",new _t(v,3)),this.setAttribute("normal",new _t(_,3)),this.setAttribute("uv",new _t(x,2));function C(){for(let B=0;B<t;B++)T(B);T(s===!1?t:0),w(),M()}function T(B){g=e.getPointAt(B/t,g);const D=l.normals[B],P=l.binormals[B];for(let U=0;U<=a;U++){const z=U/a*Math.PI*2,j=Math.sin(z),L=-Math.cos(z);d.x=L*D.x+j*P.x,d.y=L*D.y+j*P.y,d.z=L*D.z+j*P.z,d.normalize(),_.push(d.x,d.y,d.z),c.x=g.x+i*d.x,c.y=g.y+i*d.y,c.z=g.z+i*d.z,v.push(c.x,c.y,c.z)}}function M(){for(let B=1;B<=t;B++)for(let D=1;D<=a;D++){const P=(a+1)*(B-1)+(D-1),U=(a+1)*B+(D-1),z=(a+1)*B+D,j=(a+1)*(B-1)+D;S.push(P,U,j),S.push(U,z,j)}}function w(){for(let B=0;B<=t;B++)for(let D=0;D<=a;D++)p.x=B/t,p.y=D/a,x.push(p.x,p.y)}}copy(e){return super.copy(e),this.parameters=Object.assign({},e.parameters),this}toJSON(){const e=super.toJSON();return e.path=this.parameters.path.toJSON(),e}static fromJSON(e){return new i_(new jy[e.path.type]().fromJSON(e.path),e.tubularSegments,e.radius,e.radialSegments,e.closed)}}class DC extends Jt{constructor(e=null){if(super(),this.type="WireframeGeometry",this.parameters={geometry:e},e!==null){const t=[],i=new Set,a=new K,s=new K;if(e.index!==null){const l=e.attributes.position,c=e.index;let d=e.groups;d.length===0&&(d=[{start:0,count:c.count,materialIndex:0}]);for(let p=0,g=d.length;p<g;++p){const v=d[p],_=v.start,x=v.count;for(let S=_,C=_+x;S<C;S+=3)for(let T=0;T<3;T++){const M=c.getX(S+T),w=c.getX(S+(T+1)%3);a.fromBufferAttribute(l,M),s.fromBufferAttribute(l,w),OC(a,s,i)===!0&&(t.push(a.x,a.y,a.z),t.push(s.x,s.y,s.z))}}}else{const l=e.attributes.position;for(let c=0,d=l.count/3;c<d;c++)for(let p=0;p<3;p++){const g=3*c+p,v=3*c+(p+1)%3;a.fromBufferAttribute(l,g),s.fromBufferAttribute(l,v),OC(a,s,i)===!0&&(t.push(a.x,a.y,a.z),t.push(s.x,s.y,s.z))}}this.setAttribute("position",new _t(t,3))}}copy(e){return super.copy(e),this.parameters=Object.assign({},e.parameters),this}}function OC(n,e,t){const i=`${n.x},${n.y},${n.z}-${e.x},${e.y},${e.z}`,a=`${e.x},${e.y},${e.z}-${n.x},${n.y},${n.z}`;return t.has(i)===!0||t.has(a)===!0?!1:(t.add(i),t.add(a),!0)}var NC=Object.freeze({__proto__:null,BoxGeometry:af,CapsuleGeometry:Py,CircleGeometry:Fy,ConeGeometry:Bm,CylinderGeometry:wm,DodecahedronGeometry:zy,EdgesGeometry:vC,ExtrudeGeometry:Jy,IcosahedronGeometry:Ky,LatheGeometry:Qy,OctahedronGeometry:Pm,PlaneGeometry:ud,PolyhedronGeometry:qc,RingGeometry:Zy,ShapeGeometry:$y,SphereGeometry:Fm,TetrahedronGeometry:e_,TorusGeometry:t_,TorusKnotGeometry:n_,TubeGeometry:i_,WireframeGeometry:DC});class UC extends Li{constructor(e){super(),this.isShadowMaterial=!0,this.type="ShadowMaterial",this.color=new st(0),this.transparent=!0,this.fog=!0,this.setValues(e)}copy(e){return super.copy(e),this.color.copy(e.color),this.fog=e.fog,this}}class nS extends _s{constructor(e){super(e),this.isRawShaderMaterial=!0,this.type="RawShaderMaterial"}}class zm extends Li{constructor(e){super(),this.isMeshStandardMaterial=!0,this.type="MeshStandardMaterial",this.defines={STANDARD:""},this.color=new st(16777215),this.roughness=1,this.metalness=0,this.map=null,this.lightMap=null,this.lightMapIntensity=1,this.aoMap=null,this.aoMapIntensity=1,this.emissive=new st(0),this.emissiveIntensity=1,this.emissiveMap=null,this.bumpMap=null,this.bumpScale=1,this.normalMap=null,this.normalMapType=Lc,this.normalScale=new He(1,1),this.displacementMap=null,this.displacementScale=1,this.displacementBias=0,this.roughnessMap=null,this.metalnessMap=null,this.alphaMap=null,this.envMap=null,this.envMapRotation=new wr,this.envMapIntensity=1,this.wireframe=!1,this.wireframeLinewidth=1,this.wireframeLinecap="round",this.wireframeLinejoin="round",this.flatShading=!1,this.fog=!0,this.setValues(e)}copy(e){return super.copy(e),this.defines={STANDARD:""},this.color.copy(e.color),this.roughness=e.roughness,this.metalness=e.metalness,this.map=e.map,this.lightMap=e.lightMap,this.lightMapIntensity=e.lightMapIntensity,this.aoMap=e.aoMap,this.aoMapIntensity=e.aoMapIntensity,this.emissive.copy(e.emissive),this.emissiveMap=e.emissiveMap,this.emissiveIntensity=e.emissiveIntensity,this.bumpMap=e.bumpMap,this.bumpScale=e.bumpScale,this.normalMap=e.normalMap,this.normalMapType=e.normalMapType,this.normalScale.copy(e.normalScale),this.displacementMap=e.displacementMap,this.displacementScale=e.displacementScale,this.displacementBias=e.displacementBias,this.roughnessMap=e.roughnessMap,this.metalnessMap=e.metalnessMap,this.alphaMap=e.alphaMap,this.envMap=e.envMap,this.envMapRotation.copy(e.envMapRotation),this.envMapIntensity=e.envMapIntensity,this.wireframe=e.wireframe,this.wireframeLinewidth=e.wireframeLinewidth,this.wireframeLinecap=e.wireframeLinecap,this.wireframeLinejoin=e.wireframeLinejoin,this.flatShading=e.flatShading,this.fog=e.fog,this}}class xs extends zm{constructor(e){super(),this.isMeshPhysicalMaterial=!0,this.defines={STANDARD:"",PHYSICAL:""},this.type="MeshPhysicalMaterial",this.anisotropyRotation=0,this.anisotropyMap=null,this.clearcoatMap=null,this.clearcoatRoughness=0,this.clearcoatRoughnessMap=null,this.clearcoatNormalScale=new He(1,1),this.clearcoatNormalMap=null,this.ior=1.5,Object.defineProperty(this,"reflectivity",{get:function(){return jt(2.5*(this.ior-1)/(this.ior+1),0,1)},set:function(t){this.ior=(1+.4*t)/(1-.4*t)}}),this.iridescenceMap=null,this.iridescenceIOR=1.3,this.iridescenceThicknessRange=[100,400],this.iridescenceThicknessMap=null,this.sheenColor=new st(0),this.sheenColorMap=null,this.sheenRoughness=1,this.sheenRoughnessMap=null,this.transmissionMap=null,this.thickness=0,this.thicknessMap=null,this.attenuationDistance=1/0,this.attenuationColor=new st(1,1,1),this.specularIntensity=1,this.specularIntensityMap=null,this.specularColor=new st(1,1,1),this.specularColorMap=null,this._anisotropy=0,this._clearcoat=0,this._dispersion=0,this._iridescence=0,this._sheen=0,this._transmission=0,this.setValues(e)}get anisotropy(){return this._anisotropy}set anisotropy(e){this._anisotropy>0!=e>0&&this.version++,this._anisotropy=e}get clearcoat(){return this._clearcoat}set clearcoat(e){this._clearcoat>0!=e>0&&this.version++,this._clearcoat=e}get iridescence(){return this._iridescence}set iridescence(e){this._iridescence>0!=e>0&&this.version++,this._iridescence=e}get dispersion(){return this._dispersion}set dispersion(e){this._dispersion>0!=e>0&&this.version++,this._dispersion=e}get sheen(){return this._sheen}set sheen(e){this._sheen>0!=e>0&&this.version++,this._sheen=e}get transmission(){return this._transmission}set transmission(e){this._transmission>0!=e>0&&this.version++,this._transmission=e}copy(e){return super.copy(e),this.defines={STANDARD:"",PHYSICAL:""},this.anisotropy=e.anisotropy,this.anisotropyRotation=e.anisotropyRotation,this.anisotropyMap=e.anisotropyMap,this.clearcoat=e.clearcoat,this.clearcoatMap=e.clearcoatMap,this.clearcoatRoughness=e.clearcoatRoughness,this.clearcoatRoughnessMap=e.clearcoatRoughnessMap,this.clearcoatNormalMap=e.clearcoatNormalMap,this.clearcoatNormalScale.copy(e.clearcoatNormalScale),this.dispersion=e.dispersion,this.ior=e.ior,this.iridescence=e.iridescence,this.iridescenceMap=e.iridescenceMap,this.iridescenceIOR=e.iridescenceIOR,this.iridescenceThicknessRange=[...e.iridescenceThicknessRange],this.iridescenceThicknessMap=e.iridescenceThicknessMap,this.sheen=e.sheen,this.sheenColor.copy(e.sheenColor),this.sheenColorMap=e.sheenColorMap,this.sheenRoughness=e.sheenRoughness,this.sheenRoughnessMap=e.sheenRoughnessMap,this.transmission=e.transmission,this.transmissionMap=e.transmissionMap,this.thickness=e.thickness,this.thicknessMap=e.thicknessMap,this.attenuationDistance=e.attenuationDistance,this.attenuationColor.copy(e.attenuationColor),this.specularIntensity=e.specularIntensity,this.specularIntensityMap=e.specularIntensityMap,this.specularColor.copy(e.specularColor),this.specularColorMap=e.specularColorMap,this}}class LC extends Li{constructor(e){super(),this.isMeshPhongMaterial=!0,this.type="MeshPhongMaterial",this.color=new st(16777215),this.specular=new st(1118481),this.shininess=30,this.map=null,this.lightMap=null,this.lightMapIntensity=1,this.aoMap=null,this.aoMapIntensity=1,this.emissive=new st(0),this.emissiveIntensity=1,this.emissiveMap=null,this.bumpMap=null,this.bumpScale=1,this.normalMap=null,this.normalMapType=Lc,this.normalScale=new He(1,1),this.displacementMap=null,this.displacementScale=1,this.displacementBias=0,this.specularMap=null,this.alphaMap=null,this.envMap=null,this.envMapRotation=new wr,this.combine=em,this.reflectivity=1,this.refractionRatio=.98,this.wireframe=!1,this.wireframeLinewidth=1,this.wireframeLinecap="round",this.wireframeLinejoin="round",this.flatShading=!1,this.fog=!0,this.setValues(e)}copy(e){return super.copy(e),this.color.copy(e.color),this.specular.copy(e.specular),this.shininess=e.shininess,this.map=e.map,this.lightMap=e.lightMap,this.lightMapIntensity=e.lightMapIntensity,this.aoMap=e.aoMap,this.aoMapIntensity=e.aoMapIntensity,this.emissive.copy(e.emissive),this.emissiveMap=e.emissiveMap,this.emissiveIntensity=e.emissiveIntensity,this.bumpMap=e.bumpMap,this.bumpScale=e.bumpScale,this.normalMap=e.normalMap,this.normalMapType=e.normalMapType,this.normalScale.copy(e.normalScale),this.displacementMap=e.displacementMap,this.displacementScale=e.displacementScale,this.displacementBias=e.displacementBias,this.specularMap=e.specularMap,this.alphaMap=e.alphaMap,this.envMap=e.envMap,this.envMapRotation.copy(e.envMapRotation),this.combine=e.combine,this.reflectivity=e.reflectivity,this.refractionRatio=e.refractionRatio,this.wireframe=e.wireframe,this.wireframeLinewidth=e.wireframeLinewidth,this.wireframeLinecap=e.wireframeLinecap,this.wireframeLinejoin=e.wireframeLinejoin,this.flatShading=e.flatShading,this.fog=e.fog,this}}class IC extends Li{constructor(e){super(),this.isMeshToonMaterial=!0,this.defines={TOON:""},this.type="MeshToonMaterial",this.color=new st(16777215),this.map=null,this.gradientMap=null,this.lightMap=null,this.lightMapIntensity=1,this.aoMap=null,this.aoMapIntensity=1,this.emissive=new st(0),this.emissiveIntensity=1,this.emissiveMap=null,this.bumpMap=null,this.bumpScale=1,this.normalMap=null,this.normalMapType=Lc,this.normalScale=new He(1,1),this.displacementMap=null,this.displacementScale=1,this.displacementBias=0,this.alphaMap=null,this.wireframe=!1,this.wireframeLinewidth=1,this.wireframeLinecap="round",this.wireframeLinejoin="round",this.fog=!0,this.setValues(e)}copy(e){return super.copy(e),this.color.copy(e.color),this.map=e.map,this.gradientMap=e.gradientMap,this.lightMap=e.lightMap,this.lightMapIntensity=e.lightMapIntensity,this.aoMap=e.aoMap,this.aoMapIntensity=e.aoMapIntensity,this.emissive.copy(e.emissive),this.emissiveMap=e.emissiveMap,this.emissiveIntensity=e.emissiveIntensity,this.bumpMap=e.bumpMap,this.bumpScale=e.bumpScale,this.normalMap=e.normalMap,this.normalMapType=e.normalMapType,this.normalScale.copy(e.normalScale),this.displacementMap=e.displacementMap,this.displacementScale=e.displacementScale,this.displacementBias=e.displacementBias,this.alphaMap=e.alphaMap,this.wireframe=e.wireframe,this.wireframeLinewidth=e.wireframeLinewidth,this.wireframeLinecap=e.wireframeLinecap,this.wireframeLinejoin=e.wireframeLinejoin,this.fog=e.fog,this}}class PC extends Li{constructor(e){super(),this.isMeshNormalMaterial=!0,this.type="MeshNormalMaterial",this.bumpMap=null,this.bumpScale=1,this.normalMap=null,this.normalMapType=Lc,this.normalScale=new He(1,1),this.displacementMap=null,this.displacementScale=1,this.displacementBias=0,this.wireframe=!1,this.wireframeLinewidth=1,this.flatShading=!1,this.setValues(e)}copy(e){return super.copy(e),this.bumpMap=e.bumpMap,this.bumpScale=e.bumpScale,this.normalMap=e.normalMap,this.normalMapType=e.normalMapType,this.normalScale.copy(e.normalScale),this.displacementMap=e.displacementMap,this.displacementScale=e.displacementScale,this.displacementBias=e.displacementBias,this.wireframe=e.wireframe,this.wireframeLinewidth=e.wireframeLinewidth,this.flatShading=e.flatShading,this}}class FC extends Li{constructor(e){super(),this.isMeshLambertMaterial=!0,this.type="MeshLambertMaterial",this.color=new st(16777215),this.map=null,this.lightMap=null,this.lightMapIntensity=1,this.aoMap=null,this.aoMapIntensity=1,this.emissive=new st(0),this.emissiveIntensity=1,this.emissiveMap=null,this.bumpMap=null,this.bumpScale=1,this.normalMap=null,this.normalMapType=Lc,this.normalScale=new He(1,1),this.displacementMap=null,this.displacementScale=1,this.displacementBias=0,this.specularMap=null,this.alphaMap=null,this.envMap=null,this.envMapRotation=new wr,this.combine=em,this.reflectivity=1,this.refractionRatio=.98,this.wireframe=!1,this.wireframeLinewidth=1,this.wireframeLinecap="round",this.wireframeLinejoin="round",this.flatShading=!1,this.fog=!0,this.setValues(e)}copy(e){return super.copy(e),this.color.copy(e.color),this.map=e.map,this.lightMap=e.lightMap,this.lightMapIntensity=e.lightMapIntensity,this.aoMap=e.aoMap,this.aoMapIntensity=e.aoMapIntensity,this.emissive.copy(e.emissive),this.emissiveMap=e.emissiveMap,this.emissiveIntensity=e.emissiveIntensity,this.bumpMap=e.bumpMap,this.bumpScale=e.bumpScale,this.normalMap=e.normalMap,this.normalMapType=e.normalMapType,this.normalScale.copy(e.normalScale),this.displacementMap=e.displacementMap,this.displacementScale=e.displacementScale,this.displacementBias=e.displacementBias,this.specularMap=e.specularMap,this.alphaMap=e.alphaMap,this.envMap=e.envMap,this.envMapRotation.copy(e.envMapRotation),this.combine=e.combine,this.reflectivity=e.reflectivity,this.refractionRatio=e.refractionRatio,this.wireframe=e.wireframe,this.wireframeLinewidth=e.wireframeLinewidth,this.wireframeLinecap=e.wireframeLinecap,this.wireframeLinejoin=e.wireframeLinejoin,this.flatShading=e.flatShading,this.fog=e.fog,this}}class iS extends Li{constructor(e){super(),this.isMeshDepthMaterial=!0,this.type="MeshDepthMaterial",this.depthPacking=hT,this.map=null,this.alphaMap=null,this.displacementMap=null,this.displacementScale=1,this.displacementBias=0,this.wireframe=!1,this.wireframeLinewidth=1,this.setValues(e)}copy(e){return super.copy(e),this.depthPacking=e.depthPacking,this.map=e.map,this.alphaMap=e.alphaMap,this.displacementMap=e.displacementMap,this.displacementScale=e.displacementScale,this.displacementBias=e.displacementBias,this.wireframe=e.wireframe,this.wireframeLinewidth=e.wireframeLinewidth,this}}class aS extends Li{constructor(e){super(),this.isMeshDistanceMaterial=!0,this.type="MeshDistanceMaterial",this.map=null,this.alphaMap=null,this.displacementMap=null,this.displacementScale=1,this.displacementBias=0,this.setValues(e)}copy(e){return super.copy(e),this.map=e.map,this.alphaMap=e.alphaMap,this.displacementMap=e.displacementMap,this.displacementScale=e.displacementScale,this.displacementBias=e.displacementBias,this}}class zC extends Li{constructor(e){super(),this.isMeshMatcapMaterial=!0,this.defines={MATCAP:""},this.type="MeshMatcapMaterial",this.color=new st(16777215),this.matcap=null,this.map=null,this.bumpMap=null,this.bumpScale=1,this.normalMap=null,this.normalMapType=Lc,this.normalScale=new He(1,1),this.displacementMap=null,this.displacementScale=1,this.displacementBias=0,this.alphaMap=null,this.wireframe=!1,this.wireframeLinewidth=1,this.flatShading=!1,this.fog=!0,this.setValues(e)}copy(e){return super.copy(e),this.defines={MATCAP:""},this.color.copy(e.color),this.matcap=e.matcap,this.map=e.map,this.bumpMap=e.bumpMap,this.bumpScale=e.bumpScale,this.normalMap=e.normalMap,this.normalMapType=e.normalMapType,this.normalScale.copy(e.normalScale),this.displacementMap=e.displacementMap,this.displacementScale=e.displacementScale,this.displacementBias=e.displacementBias,this.alphaMap=e.alphaMap,this.wireframe=e.wireframe,this.wireframeLinewidth=e.wireframeLinewidth,this.flatShading=e.flatShading,this.fog=e.fog,this}}class HC extends Fa{constructor(e){super(),this.isLineDashedMaterial=!0,this.type="LineDashedMaterial",this.scale=1,this.dashSize=3,this.gapSize=1,this.setValues(e)}copy(e){return super.copy(e),this.scale=e.scale,this.dashSize=e.dashSize,this.gapSize=e.gapSize,this}}function ff(n,e){return!n||n.constructor===e?n:typeof e.BYTES_PER_ELEMENT=="number"?new e(n):Array.prototype.slice.call(n)}function GC(n){function e(a,s){return n[a]-n[s]}const t=n.length,i=new Array(t);for(let a=0;a!==t;++a)i[a]=a;return i.sort(e),i}function rS(n,e,t){const i=n.length,a=new n.constructor(i);for(let s=0,l=0;l!==i;++s){const c=t[s]*e;for(let d=0;d!==e;++d)a[l++]=n[c+d]}return a}function sS(n,e,t,i){let a=1,s=n[0];for(;s!==void 0&&s[i]===void 0;)s=n[a++];if(s===void 0)return;let l=s[i];if(l!==void 0)if(Array.isArray(l))do l=s[i],l!==void 0&&(e.push(s.time),t.push(...l)),s=n[a++];while(s!==void 0);else if(l.toArray!==void 0)do l=s[i],l!==void 0&&(e.push(s.time),l.toArray(t,t.length)),s=n[a++];while(s!==void 0);else do l=s[i],l!==void 0&&(e.push(s.time),t.push(l)),s=n[a++];while(s!==void 0)}function QL(n,e,t,i,a=30){const s=n.clone();s.name=e;const l=[];for(let d=0;d<s.tracks.length;++d){const p=s.tracks[d],g=p.getValueSize(),v=[],_=[];for(let x=0;x<p.times.length;++x){const S=p.times[x]*a;if(!(S<t||S>=i)){v.push(p.times[x]);for(let C=0;C<g;++C)_.push(p.values[x*g+C])}}v.length!==0&&(p.times=ff(v,p.times.constructor),p.values=ff(_,p.values.constructor),l.push(p))}s.tracks=l;let c=1/0;for(let d=0;d<s.tracks.length;++d)c>s.tracks[d].times[0]&&(c=s.tracks[d].times[0]);for(let d=0;d<s.tracks.length;++d)s.tracks[d].shift(-1*c);return s.resetDuration(),s}function ZL(n,e=0,t=n,i=30){i<=0&&(i=30);const a=t.tracks.length,s=e/i;for(let l=0;l<a;++l){const c=t.tracks[l],d=c.ValueTypeName;if(d==="bool"||d==="string")continue;const p=n.tracks.find(function(M){return M.name===c.name&&M.ValueTypeName===d});if(p===void 0)continue;let g=0;const v=c.getValueSize();c.createInterpolant.isInterpolantFactoryMethodGLTFCubicSpline&&(g=v/3);let _=0;const x=p.getValueSize();p.createInterpolant.isInterpolantFactoryMethodGLTFCubicSpline&&(_=x/3);const S=c.times.length-1;let C;if(s<=c.times[0]){const M=g,w=v-g;C=c.values.slice(M,w)}else if(s>=c.times[S]){const M=S*v+g,w=M+v-g;C=c.values.slice(M,w)}else{const M=c.createInterpolant(),w=g,B=v-g;M.evaluate(s),C=M.resultBuffer.slice(w,B)}d==="quaternion"&&new Ui().fromArray(C).normalize().conjugate().toArray(C);const T=p.times.length;for(let M=0;M<T;++M){const w=M*x+_;if(d==="quaternion")Ui.multiplyQuaternionsFlat(p.values,w,C,0,p.values,w);else{const B=x-_*2;for(let D=0;D<B;++D)p.values[w+D]-=C[D]}}}return n.blendMode=eA,n}class $L{static convertArray(e,t){return ff(e,t)}static isTypedArray(e){return bT(e)}static getKeyframeOrder(e){return GC(e)}static sortedArray(e,t,i){return rS(e,t,i)}static flattenJSON(e,t,i,a){sS(e,t,i,a)}static subclip(e,t,i,a,s=30){return QL(e,t,i,a,s)}static makeClipAdditive(e,t=0,i=e,a=30){return ZL(e,t,i,a)}}class fd{constructor(e,t,i,a){this.parameterPositions=e,this._cachedIndex=0,this.resultBuffer=a!==void 0?a:new t.constructor(i),this.sampleValues=t,this.valueSize=i,this.settings=null,this.DefaultSettings_={}}evaluate(e){const t=this.parameterPositions;let i=this._cachedIndex,a=t[i],s=t[i-1];e:{t:{let l;n:{i:if(!(e<a)){for(let c=i+2;;){if(a===void 0){if(e<s)break i;return i=t.length,this._cachedIndex=i,this.copySampleValue_(i-1)}if(i===c)break;if(s=a,a=t[++i],e<a)break t}l=t.length;break n}if(!(e>=s)){const c=t[1];e<c&&(i=2,s=c);for(let d=i-2;;){if(s===void 0)return this._cachedIndex=0,this.copySampleValue_(0);if(i===d)break;if(a=s,s=t[--i-1],e>=s)break t}l=i,i=0;break n}break e}for(;i<l;){const c=i+l>>>1;e<t[c]?l=c:i=c+1}if(a=t[i],s=t[i-1],s===void 0)return this._cachedIndex=0,this.copySampleValue_(0);if(a===void 0)return i=t.length,this._cachedIndex=i,this.copySampleValue_(i-1)}this._cachedIndex=i,this.intervalChanged_(i,s,a)}return this.interpolate_(i,s,e,a)}getSettings_(){return this.settings||this.DefaultSettings_}copySampleValue_(e){const t=this.resultBuffer,i=this.sampleValues,a=this.valueSize,s=e*a;for(let l=0;l!==a;++l)t[l]=i[s+l];return t}interpolate_(){throw new Error("call to abstract method")}intervalChanged_(){}}class VC extends fd{constructor(e,t,i,a){super(e,t,i,a),this._weightPrev=-0,this._offsetPrev=-0,this._weightNext=-0,this._offsetNext=-0,this.DefaultSettings_={endingStart:Ku,endingEnd:Ku}}intervalChanged_(e,t,i){const a=this.parameterPositions;let s=e-2,l=e+1,c=a[s],d=a[l];if(c===void 0)switch(this.getSettings_().endingStart){case Qu:s=e,c=2*t-i;break;case lm:s=a.length-2,c=t+a[s]-a[s+1];break;default:s=e,c=i}if(d===void 0)switch(this.getSettings_().endingEnd){case Qu:l=e,d=2*i-t;break;case lm:l=1,d=i+a[1]-a[0];break;default:l=e-1,d=t}const p=(i-t)*.5,g=this.valueSize;this._weightPrev=p/(t-c),this._weightNext=p/(d-i),this._offsetPrev=s*g,this._offsetNext=l*g}interpolate_(e,t,i,a){const s=this.resultBuffer,l=this.sampleValues,c=this.valueSize,d=e*c,p=d-c,g=this._offsetPrev,v=this._offsetNext,_=this._weightPrev,x=this._weightNext,S=(i-t)/(a-t),C=S*S,T=C*S,M=-_*T+2*_*C-_*S,w=(1+_)*T+(-1.5-2*_)*C+(-.5+_)*S+1,B=(-1-x)*T+(1.5+x)*C+.5*S,D=x*T-x*C;for(let P=0;P!==c;++P)s[P]=M*l[g+P]+w*l[p+P]+B*l[d+P]+D*l[v+P];return s}}class oS extends fd{constructor(e,t,i,a){super(e,t,i,a)}interpolate_(e,t,i,a){const s=this.resultBuffer,l=this.sampleValues,c=this.valueSize,d=e*c,p=d-c,g=(i-t)/(a-t),v=1-g;for(let _=0;_!==c;++_)s[_]=l[p+_]*v+l[d+_]*g;return s}}class kC extends fd{constructor(e,t,i,a){super(e,t,i,a)}interpolate_(e){return this.copySampleValue_(e-1)}}class bs{constructor(e,t,i,a){if(e===void 0)throw new Error("THREE.KeyframeTrack: track name is undefined");if(t===void 0||t.length===0)throw new Error("THREE.KeyframeTrack: no keyframes in track named "+e);this.name=e,this.times=ff(t,this.TimeBufferType),this.values=ff(i,this.ValueBufferType),this.setInterpolation(a||this.DefaultInterpolation)}static toJSON(e){const t=e.constructor;let i;if(t.toJSON!==this.toJSON)i=t.toJSON(e);else{i={name:e.name,times:ff(e.times,Array),values:ff(e.values,Array)};const a=e.getInterpolation();a!==e.DefaultInterpolation&&(i.interpolation=a)}return i.type=e.ValueTypeName,i}InterpolantFactoryMethodDiscrete(e){return new kC(this.times,this.values,this.getValueSize(),e)}InterpolantFactoryMethodLinear(e){return new oS(this.times,this.values,this.getValueSize(),e)}InterpolantFactoryMethodSmooth(e){return new VC(this.times,this.values,this.getValueSize(),e)}setInterpolation(e){let t;switch(e){case Uh:t=this.InterpolantFactoryMethodDiscrete;break;case Lh:t=this.InterpolantFactoryMethodLinear;break;case jv:t=this.InterpolantFactoryMethodSmooth;break}if(t===void 0){const i="unsupported interpolation for "+this.ValueTypeName+" keyframe track named "+this.name;if(this.createInterpolant===void 0)if(e!==this.DefaultInterpolation)this.setInterpolation(this.DefaultInterpolation);else throw new Error(i);return ct("KeyframeTrack:",i),this}return this.createInterpolant=t,this}getInterpolation(){switch(this.createInterpolant){case this.InterpolantFactoryMethodDiscrete:return Uh;case this.InterpolantFactoryMethodLinear:return Lh;case this.InterpolantFactoryMethodSmooth:return jv}}getValueSize(){return this.values.length/this.times.length}shift(e){if(e!==0){const t=this.times;for(let i=0,a=t.length;i!==a;++i)t[i]+=e}return this}scale(e){if(e!==1){const t=this.times;for(let i=0,a=t.length;i!==a;++i)t[i]*=e}return this}trim(e,t){const i=this.times,a=i.length;let s=0,l=a-1;for(;s!==a&&i[s]<e;)++s;for(;l!==-1&&i[l]>t;)--l;if(++l,s!==0||l!==a){s>=l&&(l=Math.max(l,1),s=l-1);const c=this.getValueSize();this.times=i.slice(s,l),this.values=this.values.slice(s*c,l*c)}return this}validate(){let e=!0;const t=this.getValueSize();t-Math.floor(t)!==0&&(Dt("KeyframeTrack: Invalid value size in track.",this),e=!1);const i=this.times,a=this.values,s=i.length;s===0&&(Dt("KeyframeTrack: Track is empty.",this),e=!1);let l=null;for(let c=0;c!==s;c++){const d=i[c];if(typeof d=="number"&&isNaN(d)){Dt("KeyframeTrack: Time is not a valid number.",this,c,d),e=!1;break}if(l!==null&&l>d){Dt("KeyframeTrack: Out of order keys.",this,c,d,l),e=!1;break}l=d}if(a!==void 0&&bT(a))for(let c=0,d=a.length;c!==d;++c){const p=a[c];if(isNaN(p)){Dt("KeyframeTrack: Value is not a valid number.",this,c,p),e=!1;break}}return e}optimize(){const e=this.times.slice(),t=this.values.slice(),i=this.getValueSize(),a=this.getInterpolation()===jv,s=e.length-1;let l=1;for(let c=1;c<s;++c){let d=!1;const p=e[c],g=e[c+1];if(p!==g&&(c!==1||p!==e[0]))if(a)d=!0;else{const v=c*i,_=v-i,x=v+i;for(let S=0;S!==i;++S){const C=t[v+S];if(C!==t[_+S]||C!==t[x+S]){d=!0;break}}}if(d){if(c!==l){e[l]=e[c];const v=c*i,_=l*i;for(let x=0;x!==i;++x)t[_+x]=t[v+x]}++l}}if(s>0){e[l]=e[s];for(let c=s*i,d=l*i,p=0;p!==i;++p)t[d+p]=t[c+p];++l}return l!==e.length?(this.times=e.slice(0,l),this.values=t.slice(0,l*i)):(this.times=e,this.values=t),this}clone(){const e=this.times.slice(),t=this.values.slice(),i=this.constructor,a=new i(this.name,e,t);return a.createInterpolant=this.createInterpolant,a}}bs.prototype.ValueTypeName="",bs.prototype.TimeBufferType=Float32Array,bs.prototype.ValueBufferType=Float32Array,bs.prototype.DefaultInterpolation=Lh;class hf extends bs{constructor(e,t,i){super(e,t,i)}}hf.prototype.ValueTypeName="bool",hf.prototype.ValueBufferType=Array,hf.prototype.DefaultInterpolation=Uh,hf.prototype.InterpolantFactoryMethodLinear=void 0,hf.prototype.InterpolantFactoryMethodSmooth=void 0;class lS extends bs{constructor(e,t,i,a){super(e,t,i,a)}}lS.prototype.ValueTypeName="color";class df extends bs{constructor(e,t,i,a){super(e,t,i,a)}}df.prototype.ValueTypeName="number";class XC extends fd{constructor(e,t,i,a){super(e,t,i,a)}interpolate_(e,t,i,a){const s=this.resultBuffer,l=this.sampleValues,c=this.valueSize,d=(i-t)/(a-t);let p=e*c;for(let g=p+c;p!==g;p+=4)Ui.slerpFlat(s,0,l,p-c,l,p,d);return s}}class pf extends bs{constructor(e,t,i,a){super(e,t,i,a)}InterpolantFactoryMethodLinear(e){return new XC(this.times,this.values,this.getValueSize(),e)}}pf.prototype.ValueTypeName="quaternion",pf.prototype.InterpolantFactoryMethodSmooth=void 0;class mf extends bs{constructor(e,t,i){super(e,t,i)}}mf.prototype.ValueTypeName="string",mf.prototype.ValueBufferType=Array,mf.prototype.DefaultInterpolation=Uh,mf.prototype.InterpolantFactoryMethodLinear=void 0,mf.prototype.InterpolantFactoryMethodSmooth=void 0;class gf extends bs{constructor(e,t,i,a){super(e,t,i,a)}}gf.prototype.ValueTypeName="vector";class hd{constructor(e="",t=-1,i=[],a=Yv){this.name=e,this.tracks=i,this.duration=t,this.blendMode=a,this.uuid=Wr(),this.userData={},this.duration<0&&this.resetDuration()}static parse(e){const t=[],i=e.tracks,a=1/(e.fps||1);for(let l=0,c=i.length;l!==c;++l)t.push(tI(i[l]).scale(a));const s=new this(e.name,e.duration,t,e.blendMode);return s.uuid=e.uuid,s.userData=JSON.parse(e.userData||"{}"),s}static toJSON(e){const t=[],i=e.tracks,a={name:e.name,duration:e.duration,tracks:t,uuid:e.uuid,blendMode:e.blendMode,userData:JSON.stringify(e.userData)};for(let s=0,l=i.length;s!==l;++s)t.push(bs.toJSON(i[s]));return a}static CreateFromMorphTargetSequence(e,t,i,a){const s=t.length,l=[];for(let c=0;c<s;c++){let d=[],p=[];d.push((c+s-1)%s,c,(c+1)%s),p.push(0,1,0);const g=GC(d);d=rS(d,1,g),p=rS(p,1,g),!a&&d[0]===0&&(d.push(s),p.push(p[0])),l.push(new df(".morphTargetInfluences["+t[c].name+"]",d,p).scale(1/i))}return new this(e,-1,l)}static findByName(e,t){let i=e;if(!Array.isArray(e)){const a=e;i=a.geometry&&a.geometry.animations||a.animations}for(let a=0;a<i.length;a++)if(i[a].name===t)return i[a];return null}static CreateClipsFromMorphTargetSequences(e,t,i){const a={},s=/^([\w-]*?)([\d]+)$/;for(let c=0,d=e.length;c<d;c++){const p=e[c],g=p.name.match(s);if(g&&g.length>1){const v=g[1];let _=a[v];_||(a[v]=_=[]),_.push(p)}}const l=[];for(const c in a)l.push(this.CreateFromMorphTargetSequence(c,a[c],t,i));return l}static parseAnimation(e,t){if(ct("AnimationClip: parseAnimation() is deprecated and will be removed with r185"),!e)return Dt("AnimationClip: No animation in JSONLoader data."),null;const i=function(v,_,x,S,C){if(x.length!==0){const T=[],M=[];sS(x,T,M,S),T.length!==0&&C.push(new v(_,T,M))}},a=[],s=e.name||"default",l=e.fps||30,c=e.blendMode;let d=e.length||-1;const p=e.hierarchy||[];for(let v=0;v<p.length;v++){const _=p[v].keys;if(!(!_||_.length===0))if(_[0].morphTargets){const x={};let S;for(S=0;S<_.length;S++)if(_[S].morphTargets)for(let C=0;C<_[S].morphTargets.length;C++)x[_[S].morphTargets[C]]=-1;for(const C in x){const T=[],M=[];for(let w=0;w!==_[S].morphTargets.length;++w){const B=_[S];T.push(B.time),M.push(B.morphTarget===C?1:0)}a.push(new df(".morphTargetInfluence["+C+"]",T,M))}d=x.length*l}else{const x=".bones["+t[v].name+"]";i(gf,x+".position",_,"pos",a),i(pf,x+".quaternion",_,"rot",a),i(gf,x+".scale",_,"scl",a)}}return a.length===0?null:new this(s,d,a,c)}resetDuration(){const e=this.tracks;let t=0;for(let i=0,a=e.length;i!==a;++i){const s=this.tracks[i];t=Math.max(t,s.times[s.times.length-1])}return this.duration=t,this}trim(){for(let e=0;e<this.tracks.length;e++)this.tracks[e].trim(0,this.duration);return this}validate(){let e=!0;for(let t=0;t<this.tracks.length;t++)e=e&&this.tracks[t].validate();return e}optimize(){for(let e=0;e<this.tracks.length;e++)this.tracks[e].optimize();return this}clone(){const e=[];for(let i=0;i<this.tracks.length;i++)e.push(this.tracks[i].clone());const t=new this.constructor(this.name,this.duration,e,this.blendMode);return t.userData=JSON.parse(JSON.stringify(this.userData)),t}toJSON(){return this.constructor.toJSON(this)}}function eI(n){switch(n.toLowerCase()){case"scalar":case"double":case"float":case"number":case"integer":return df;case"vector":case"vector2":case"vector3":case"vector4":return gf;case"color":return lS;case"quaternion":return pf;case"bool":case"boolean":return hf;case"string":return mf}throw new Error("THREE.KeyframeTrack: Unsupported typeName: "+n)}function tI(n){if(n.type===void 0)throw new Error("THREE.KeyframeTrack: track type undefined, can not parse");const e=eI(n.type);if(n.times===void 0){const t=[],i=[];sS(n.keys,t,i,"value"),n.times=t,n.values=i}return e.parse!==void 0?e.parse(n):new e(n.name,n.times,n.values,n.interpolation)}const Fo={enabled:!1,files:{},add:function(n,e){this.enabled!==!1&&(this.files[n]=e)},get:function(n){if(this.enabled!==!1)return this.files[n]},remove:function(n){delete this.files[n]},clear:function(){this.files={}}};class cS{constructor(e,t,i){const a=this;let s=!1,l=0,c=0,d;const p=[];this.onStart=void 0,this.onLoad=e,this.onProgress=t,this.onError=i,this._abortController=null,this.itemStart=function(g){c++,s===!1&&a.onStart!==void 0&&a.onStart(g,l,c),s=!0},this.itemEnd=function(g){l++,a.onProgress!==void 0&&a.onProgress(g,l,c),l===c&&(s=!1,a.onLoad!==void 0&&a.onLoad())},this.itemError=function(g){a.onError!==void 0&&a.onError(g)},this.resolveURL=function(g){return d?d(g):g},this.setURLModifier=function(g){return d=g,this},this.addHandler=function(g,v){return p.push(g,v),this},this.removeHandler=function(g){const v=p.indexOf(g);return v!==-1&&p.splice(v,2),this},this.getHandler=function(g){for(let v=0,_=p.length;v<_;v+=2){const x=p[v],S=p[v+1];if(x.global&&(x.lastIndex=0),x.test(g))return S}return null},this.abort=function(){return this.abortController.abort(),this._abortController=null,this}}get abortController(){return this._abortController||(this._abortController=new AbortController),this._abortController}}const dd=new cS;class za{constructor(e){this.manager=e!==void 0?e:dd,this.crossOrigin="anonymous",this.withCredentials=!1,this.path="",this.resourcePath="",this.requestHeader={}}load(){}loadAsync(e,t){const i=this;return new Promise(function(a,s){i.load(e,a,t,s)})}parse(){}setCrossOrigin(e){return this.crossOrigin=e,this}setWithCredentials(e){return this.withCredentials=e,this}setPath(e){return this.path=e,this}setResourcePath(e){return this.resourcePath=e,this}setRequestHeader(e){return this.requestHeader=e,this}abort(){return this}}za.DEFAULT_MATERIAL_NAME="__DEFAULT";const Pl={};class nI extends Error{constructor(e,t){super(e),this.response=t}}class $r extends za{constructor(e){super(e),this.mimeType="",this.responseType="",this._abortController=new AbortController}load(e,t,i,a){e===void 0&&(e=""),this.path!==void 0&&(e=this.path+e),e=this.manager.resolveURL(e);const s=Fo.get(`file:${e}`);if(s!==void 0)return this.manager.itemStart(e),setTimeout(()=>{t&&t(s),this.manager.itemEnd(e)},0),s;if(Pl[e]!==void 0){Pl[e].push({onLoad:t,onProgress:i,onError:a});return}Pl[e]=[],Pl[e].push({onLoad:t,onProgress:i,onError:a});const l=new Request(e,{headers:new Headers(this.requestHeader),credentials:this.withCredentials?"include":"same-origin",signal:typeof AbortSignal.any=="function"?AbortSignal.any([this._abortController.signal,this.manager.abortController.signal]):this._abortController.signal}),c=this.mimeType,d=this.responseType;fetch(l).then(p=>{if(p.status===200||p.status===0){if(p.status===0&&ct("FileLoader: HTTP Status 0 received."),typeof ReadableStream>"u"||p.body===void 0||p.body.getReader===void 0)return p;const g=Pl[e],v=p.body.getReader(),_=p.headers.get("X-File-Size")||p.headers.get("Content-Length"),x=_?parseInt(_):0,S=x!==0;let C=0;const T=new ReadableStream({start(M){w();function w(){v.read().then(({done:B,value:D})=>{if(B)M.close();else{C+=D.byteLength;const P=new ProgressEvent("progress",{lengthComputable:S,loaded:C,total:x});for(let U=0,z=g.length;U<z;U++){const j=g[U];j.onProgress&&j.onProgress(P)}M.enqueue(D),w()}},B=>{M.error(B)})}}});return new Response(T)}else throw new nI(`fetch for "${p.url}" responded with ${p.status}: ${p.statusText}`,p)}).then(p=>{switch(d){case"arraybuffer":return p.arrayBuffer();case"blob":return p.blob();case"document":return p.text().then(g=>new DOMParser().parseFromString(g,c));case"json":return p.json();default:if(c==="")return p.text();{const v=/charset="?([^;"\s]*)"?/i.exec(c),_=v&&v[1]?v[1].toLowerCase():void 0,x=new TextDecoder(_);return p.arrayBuffer().then(S=>x.decode(S))}}}).then(p=>{Fo.add(`file:${e}`,p);const g=Pl[e];delete Pl[e];for(let v=0,_=g.length;v<_;v++){const x=g[v];x.onLoad&&x.onLoad(p)}}).catch(p=>{const g=Pl[e];if(g===void 0)throw this.manager.itemError(e),p;delete Pl[e];for(let v=0,_=g.length;v<_;v++){const x=g[v];x.onError&&x.onError(p)}this.manager.itemError(e)}).finally(()=>{this.manager.itemEnd(e)}),this.manager.itemStart(e)}setResponseType(e){return this.responseType=e,this}setMimeType(e){return this.mimeType=e,this}abort(){return this._abortController.abort(),this._abortController=new AbortController,this}}class iI extends za{constructor(e){super(e)}load(e,t,i,a){const s=this,l=new $r(this.manager);l.setPath(this.path),l.setRequestHeader(this.requestHeader),l.setWithCredentials(this.withCredentials),l.load(e,function(c){try{t(s.parse(JSON.parse(c)))}catch(d){a?a(d):Dt(d),s.manager.itemError(e)}},i,a)}parse(e){const t=[];for(let i=0;i<e.length;i++){const a=hd.parse(e[i]);t.push(a)}return t}}class aI extends za{constructor(e){super(e)}load(e,t,i,a){const s=this,l=[],c=new Iy,d=new $r(this.manager);d.setPath(this.path),d.setResponseType("arraybuffer"),d.setRequestHeader(this.requestHeader),d.setWithCredentials(s.withCredentials);let p=0;function g(v){d.load(e[v],function(_){const x=s.parse(_,!0);l[v]={width:x.width,height:x.height,format:x.format,mipmaps:x.mipmaps},p+=1,p===6&&(x.mipmapCount===1&&(c.minFilter=Zn),c.image=l,c.format=x.format,c.needsUpdate=!0,t&&t(c))},i,a)}if(Array.isArray(e))for(let v=0,_=e.length;v<_;++v)g(v);else d.load(e,function(v){const _=s.parse(v,!0);if(_.isCubemap){const x=_.mipmaps.length/_.mipmapCount;for(let S=0;S<x;S++){l[S]={mipmaps:[]};for(let C=0;C<_.mipmapCount;C++)l[S].mipmaps.push(_.mipmaps[S*_.mipmapCount+C]),l[S].format=_.format,l[S].width=_.width,l[S].height=_.height}c.image=l}else c.image.width=_.width,c.image.height=_.height,c.mipmaps=_.mipmaps;_.mipmapCount===1&&(c.minFilter=Zn),c.format=_.format,c.needsUpdate=!0,t&&t(c)},i,a);return c}}const pd=new WeakMap;class Hm extends za{constructor(e){super(e)}load(e,t,i,a){this.path!==void 0&&(e=this.path+e),e=this.manager.resolveURL(e);const s=this,l=Fo.get(`image:${e}`);if(l!==void 0){if(l.complete===!0)s.manager.itemStart(e),setTimeout(function(){t&&t(l),s.manager.itemEnd(e)},0);else{let v=pd.get(l);v===void 0&&(v=[],pd.set(l,v)),v.push({onLoad:t,onError:a})}return l}const c=fm("img");function d(){g(),t&&t(this);const v=pd.get(this)||[];for(let _=0;_<v.length;_++){const x=v[_];x.onLoad&&x.onLoad(this)}pd.delete(this),s.manager.itemEnd(e)}function p(v){g(),a&&a(v),Fo.remove(`image:${e}`);const _=pd.get(this)||[];for(let x=0;x<_.length;x++){const S=_[x];S.onError&&S.onError(v)}pd.delete(this),s.manager.itemError(e),s.manager.itemEnd(e)}function g(){c.removeEventListener("load",d,!1),c.removeEventListener("error",p,!1)}return c.addEventListener("load",d,!1),c.addEventListener("error",p,!1),e.slice(0,5)!=="data:"&&this.crossOrigin!==void 0&&(c.crossOrigin=this.crossOrigin),Fo.add(`image:${e}`,c),s.manager.itemStart(e),c.src=e,c}}class rI extends za{constructor(e){super(e)}load(e,t,i,a){const s=new _m;s.colorSpace=Aa;const l=new Hm(this.manager);l.setCrossOrigin(this.crossOrigin),l.setPath(this.path);let c=0;function d(p){l.load(e[p],function(g){s.images[p]=g,c++,c===6&&(s.needsUpdate=!0,t&&t(s))},void 0,a)}for(let p=0;p<e.length;++p)d(p);return s}}class sI extends za{constructor(e){super(e)}load(e,t,i,a){const s=this,l=new Qs,c=new $r(this.manager);return c.setResponseType("arraybuffer"),c.setRequestHeader(this.requestHeader),c.setPath(this.path),c.setWithCredentials(s.withCredentials),c.load(e,function(d){let p;try{p=s.parse(d)}catch(g){if(a!==void 0)a(g);else{g(g);return}}p.image!==void 0?l.image=p.image:p.data!==void 0&&(l.image.width=p.width,l.image.height=p.height,l.image.data=p.data),l.wrapS=p.wrapS!==void 0?p.wrapS:er,l.wrapT=p.wrapT!==void 0?p.wrapT:er,l.magFilter=p.magFilter!==void 0?p.magFilter:Zn,l.minFilter=p.minFilter!==void 0?p.minFilter:Zn,l.anisotropy=p.anisotropy!==void 0?p.anisotropy:1,p.colorSpace!==void 0&&(l.colorSpace=p.colorSpace),p.flipY!==void 0&&(l.flipY=p.flipY),p.format!==void 0&&(l.format=p.format),p.type!==void 0&&(l.type=p.type),p.mipmaps!==void 0&&(l.mipmaps=p.mipmaps,l.minFilter=gs),p.mipmapCount===1&&(l.minFilter=Zn),p.generateMipmaps!==void 0&&(l.generateMipmaps=p.generateMipmaps),l.needsUpdate=!0,t&&t(l,p)},i,a),l}}class Gm extends za{constructor(e){super(e)}load(e,t,i,a){const s=new ai,l=new Hm(this.manager);return l.setCrossOrigin(this.crossOrigin),l.setPath(this.path),l.load(e,function(c){s.image=c,s.needsUpdate=!0,t!==void 0&&t(s)},i,a),s}}class Wc extends dn{constructor(e,t=1){super(),this.isLight=!0,this.type="Light",this.color=new st(e),this.intensity=t}dispose(){this.dispatchEvent({type:"dispose"})}copy(e,t){return super.copy(e,t),this.color.copy(e.color),this.intensity=e.intensity,this}toJSON(e){const t=super.toJSON(e);return t.object.color=this.color.getHex(),t.object.intensity=this.intensity,t}}class jC extends Wc{constructor(e,t,i){super(e,i),this.isHemisphereLight=!0,this.type="HemisphereLight",this.position.copy(dn.DEFAULT_UP),this.updateMatrix(),this.groundColor=new st(t)}copy(e,t){return super.copy(e,t),this.groundColor.copy(e.groundColor),this}toJSON(e){const t=super.toJSON(e);return t.object.groundColor=this.groundColor.getHex(),t}}const uS=new It,YC=new K,qC=new K;class fS{constructor(e){this.camera=e,this.intensity=1,this.bias=0,this.normalBias=0,this.radius=1,this.blurSamples=8,this.mapSize=new He(512,512),this.mapType=tr,this.map=null,this.mapPass=null,this.matrix=new It,this.autoUpdate=!0,this.needsUpdate=!1,this._frustum=new od,this._frameExtents=new He(1,1),this._viewportCount=1,this._viewports=[new Fn(0,0,1,1)]}getViewportCount(){return this._viewportCount}getFrustum(){return this._frustum}updateMatrices(e){const t=this.camera,i=this.matrix;YC.setFromMatrixPosition(e.matrixWorld),t.position.copy(YC),qC.setFromMatrixPosition(e.target.matrixWorld),t.lookAt(qC),t.updateMatrixWorld(),uS.multiplyMatrices(t.projectionMatrix,t.matrixWorldInverse),this._frustum.setFromProjectionMatrix(uS,t.coordinateSystem,t.reversedDepth),t.reversedDepth?i.set(.5,0,0,.5,0,.5,0,.5,0,0,1,0,0,0,0,1):i.set(.5,0,0,.5,0,.5,0,.5,0,0,.5,.5,0,0,0,1),i.multiply(uS)}getViewport(e){return this._viewports[e]}getFrameExtents(){return this._frameExtents}dispose(){this.map&&this.map.dispose(),this.mapPass&&this.mapPass.dispose()}copy(e){return this.camera=e.camera.clone(),this.intensity=e.intensity,this.bias=e.bias,this.radius=e.radius,this.autoUpdate=e.autoUpdate,this.needsUpdate=e.needsUpdate,this.normalBias=e.normalBias,this.blurSamples=e.blurSamples,this.mapSize.copy(e.mapSize),this}clone(){return new this.constructor().copy(this)}toJSON(){const e={};return this.intensity!==1&&(e.intensity=this.intensity),this.bias!==0&&(e.bias=this.bias),this.normalBias!==0&&(e.normalBias=this.normalBias),this.radius!==1&&(e.radius=this.radius),(this.mapSize.x!==512||this.mapSize.y!==512)&&(e.mapSize=this.mapSize.toArray()),e.camera=this.camera.toJSON(!1).object,delete e.camera.matrix,e}}class oI extends fS{constructor(){super(new Zi(50,1,.5,500)),this.isSpotLightShadow=!0,this.focus=1,this.aspect=1}updateMatrices(e){const t=this.camera,i=zh*2*e.angle*this.focus,a=this.mapSize.width/this.mapSize.height*this.aspect,s=e.distance||t.far;(i!==t.fov||a!==t.aspect||s!==t.far)&&(t.fov=i,t.aspect=a,t.far=s,t.updateProjectionMatrix()),super.updateMatrices(e)}copy(e){return super.copy(e),this.focus=e.focus,this}}class hS extends Wc{constructor(e,t,i=0,a=Math.PI/3,s=0,l=2){super(e,t),this.isSpotLight=!0,this.type="SpotLight",this.position.copy(dn.DEFAULT_UP),this.updateMatrix(),this.target=new dn,this.distance=i,this.angle=a,this.penumbra=s,this.decay=l,this.map=null,this.shadow=new oI}get power(){return this.intensity*Math.PI}set power(e){this.intensity=e/Math.PI}dispose(){super.dispose(),this.shadow.dispose()}copy(e,t){return super.copy(e,t),this.distance=e.distance,this.angle=e.angle,this.penumbra=e.penumbra,this.decay=e.decay,this.target=e.target.clone(),this.map=e.map,this.shadow=e.shadow.clone(),this}toJSON(e){const t=super.toJSON(e);return t.object.distance=this.distance,t.object.angle=this.angle,t.object.decay=this.decay,t.object.penumbra=this.penumbra,t.object.target=this.target.uuid,this.map&&this.map.isTexture&&(t.object.map=this.map.toJSON(e).uuid),t.object.shadow=this.shadow.toJSON(),t}}class lI extends fS{constructor(){super(new Zi(90,1,.5,500)),this.isPointLightShadow=!0}}class dS extends Wc{constructor(e,t,i=0,a=2){super(e,t),this.isPointLight=!0,this.type="PointLight",this.distance=i,this.decay=a,this.shadow=new lI}get power(){return this.intensity*4*Math.PI}set power(e){this.intensity=e/(4*Math.PI)}dispose(){super.dispose(),this.shadow.dispose()}copy(e,t){return super.copy(e,t),this.distance=e.distance,this.decay=e.decay,this.shadow=e.shadow.clone(),this}toJSON(e){const t=super.toJSON(e);return t.object.distance=this.distance,t.object.decay=this.decay,t.object.shadow=this.shadow.toJSON(),t}}class vf extends py{constructor(e=-1,t=1,i=1,a=-1,s=.1,l=2e3){super(),this.isOrthographicCamera=!0,this.type="OrthographicCamera",this.zoom=1,this.view=null,this.left=e,this.right=t,this.top=i,this.bottom=a,this.near=s,this.far=l,this.updateProjectionMatrix()}copy(e,t){return super.copy(e,t),this.left=e.left,this.right=e.right,this.top=e.top,this.bottom=e.bottom,this.near=e.near,this.far=e.far,this.zoom=e.zoom,this.view=e.view===null?null:Object.assign({},e.view),this}setViewOffset(e,t,i,a,s,l){this.view===null&&(this.view={enabled:!0,fullWidth:1,fullHeight:1,offsetX:0,offsetY:0,width:1,height:1}),this.view.enabled=!0,this.view.fullWidth=e,this.view.fullHeight=t,this.view.offsetX=i,this.view.offsetY=a,this.view.width=s,this.view.height=l,this.updateProjectionMatrix()}clearViewOffset(){this.view!==null&&(this.view.enabled=!1),this.updateProjectionMatrix()}updateProjectionMatrix(){const e=(this.right-this.left)/(2*this.zoom),t=(this.top-this.bottom)/(2*this.zoom),i=(this.right+this.left)/2,a=(this.top+this.bottom)/2;let s=i-e,l=i+e,c=a+t,d=a-t;if(this.view!==null&&this.view.enabled){const p=(this.right-this.left)/this.view.fullWidth/this.zoom,g=(this.top-this.bottom)/this.view.fullHeight/this.zoom;s+=p*this.view.offsetX,l=s+p*this.view.width,c-=g*this.view.offsetY,d=c-g*this.view.height}this.projectionMatrix.makeOrthographic(s,l,c,d,this.near,this.far,this.coordinateSystem,this.reversedDepth),this.projectionMatrixInverse.copy(this.projectionMatrix).invert()}toJSON(e){const t=super.toJSON(e);return t.object.zoom=this.zoom,t.object.left=this.left,t.object.right=this.right,t.object.top=this.top,t.object.bottom=this.bottom,t.object.near=this.near,t.object.far=this.far,this.view!==null&&(t.object.view=Object.assign({},this.view)),t}}class cI extends fS{constructor(){super(new vf(-5,5,5,-5,.5,500)),this.isDirectionalLightShadow=!0}}class pS extends Wc{constructor(e,t){super(e,t),this.isDirectionalLight=!0,this.type="DirectionalLight",this.position.copy(dn.DEFAULT_UP),this.updateMatrix(),this.target=new dn,this.shadow=new cI}dispose(){super.dispose(),this.shadow.dispose()}copy(e){return super.copy(e),this.target=e.target.clone(),this.shadow=e.shadow.clone(),this}toJSON(e){const t=super.toJSON(e);return t.object.shadow=this.shadow.toJSON(),t.object.target=this.target.uuid,t}}class WC extends Wc{constructor(e,t){super(e,t),this.isAmbientLight=!0,this.type="AmbientLight"}}class JC extends Wc{constructor(e,t,i=10,a=10){super(e,t),this.isRectAreaLight=!0,this.type="RectAreaLight",this.width=i,this.height=a}get power(){return this.intensity*this.width*this.height*Math.PI}set power(e){this.intensity=e/(this.width*this.height*Math.PI)}copy(e){return super.copy(e),this.width=e.width,this.height=e.height,this}toJSON(e){const t=super.toJSON(e);return t.object.width=this.width,t.object.height=this.height,t}}class mS{constructor(){this.isSphericalHarmonics3=!0,this.coefficients=[];for(let e=0;e<9;e++)this.coefficients.push(new K)}set(e){for(let t=0;t<9;t++)this.coefficients[t].copy(e[t]);return this}zero(){for(let e=0;e<9;e++)this.coefficients[e].set(0,0,0);return this}getAt(e,t){const i=e.x,a=e.y,s=e.z,l=this.coefficients;return t.copy(l[0]).multiplyScalar(.282095),t.addScaledVector(l[1],.488603*a),t.addScaledVector(l[2],.488603*s),t.addScaledVector(l[3],.488603*i),t.addScaledVector(l[4],1.092548*(i*a)),t.addScaledVector(l[5],1.092548*(a*s)),t.addScaledVector(l[6],.315392*(3*s*s-1)),t.addScaledVector(l[7],1.092548*(i*s)),t.addScaledVector(l[8],.546274*(i*i-a*a)),t}getIrradianceAt(e,t){const i=e.x,a=e.y,s=e.z,l=this.coefficients;return t.copy(l[0]).multiplyScalar(.886227),t.addScaledVector(l[1],2*.511664*a),t.addScaledVector(l[2],2*.511664*s),t.addScaledVector(l[3],2*.511664*i),t.addScaledVector(l[4],2*.429043*i*a),t.addScaledVector(l[5],2*.429043*a*s),t.addScaledVector(l[6],.743125*s*s-.247708),t.addScaledVector(l[7],2*.429043*i*s),t.addScaledVector(l[8],.429043*(i*i-a*a)),t}add(e){for(let t=0;t<9;t++)this.coefficients[t].add(e.coefficients[t]);return this}addScaledSH(e,t){for(let i=0;i<9;i++)this.coefficients[i].addScaledVector(e.coefficients[i],t);return this}scale(e){for(let t=0;t<9;t++)this.coefficients[t].multiplyScalar(e);return this}lerp(e,t){for(let i=0;i<9;i++)this.coefficients[i].lerp(e.coefficients[i],t);return this}equals(e){for(let t=0;t<9;t++)if(!this.coefficients[t].equals(e.coefficients[t]))return!1;return!0}copy(e){return this.set(e.coefficients)}clone(){return new this.constructor().copy(this)}fromArray(e,t=0){const i=this.coefficients;for(let a=0;a<9;a++)i[a].fromArray(e,t+a*3);return this}toArray(e=[],t=0){const i=this.coefficients;for(let a=0;a<9;a++)i[a].toArray(e,t+a*3);return e}static getBasisAt(e,t){const i=e.x,a=e.y,s=e.z;t[0]=.282095,t[1]=.488603*a,t[2]=.488603*s,t[3]=.488603*i,t[4]=1.092548*i*a,t[5]=1.092548*a*s,t[6]=.315392*(3*s*s-1),t[7]=1.092548*i*s,t[8]=.546274*(i*i-a*a)}}class KC extends Wc{constructor(e=new mS,t=1){super(void 0,t),this.isLightProbe=!0,this.sh=e}copy(e){return super.copy(e),this.sh.copy(e.sh),this}toJSON(e){const t=super.toJSON(e);return t.object.sh=this.sh.toArray(),t}}class a_ extends za{constructor(e){super(e),this.textures={}}load(e,t,i,a){const s=this,l=new $r(s.manager);l.setPath(s.path),l.setRequestHeader(s.requestHeader),l.setWithCredentials(s.withCredentials),l.load(e,function(c){try{t(s.parse(JSON.parse(c)))}catch(d){a?a(d):Dt(d),s.manager.itemError(e)}},i,a)}parse(e){const t=this.textures;function i(s){return t[s]===void 0&&ct("MaterialLoader: Undefined texture",s),t[s]}const a=this.createMaterialFromType(e.type);if(e.uuid!==void 0&&(a.uuid=e.uuid),e.name!==void 0&&(a.name=e.name),e.color!==void 0&&a.color!==void 0&&a.color.setHex(e.color),e.roughness!==void 0&&(a.roughness=e.roughness),e.metalness!==void 0&&(a.metalness=e.metalness),e.sheen!==void 0&&(a.sheen=e.sheen),e.sheenColor!==void 0&&(a.sheenColor=new st().setHex(e.sheenColor)),e.sheenRoughness!==void 0&&(a.sheenRoughness=e.sheenRoughness),e.emissive!==void 0&&a.emissive!==void 0&&a.emissive.setHex(e.emissive),e.specular!==void 0&&a.specular!==void 0&&a.specular.setHex(e.specular),e.specularIntensity!==void 0&&(a.specularIntensity=e.specularIntensity),e.specularColor!==void 0&&a.specularColor!==void 0&&a.specularColor.setHex(e.specularColor),e.shininess!==void 0&&(a.shininess=e.shininess),e.clearcoat!==void 0&&(a.clearcoat=e.clearcoat),e.clearcoatRoughness!==void 0&&(a.clearcoatRoughness=e.clearcoatRoughness),e.dispersion!==void 0&&(a.dispersion=e.dispersion),e.iridescence!==void 0&&(a.iridescence=e.iridescence),e.iridescenceIOR!==void 0&&(a.iridescenceIOR=e.iridescenceIOR),e.iridescenceThicknessRange!==void 0&&(a.iridescenceThicknessRange=e.iridescenceThicknessRange),e.transmission!==void 0&&(a.transmission=e.transmission),e.thickness!==void 0&&(a.thickness=e.thickness),e.attenuationDistance!==void 0&&(a.attenuationDistance=e.attenuationDistance),e.attenuationColor!==void 0&&a.attenuationColor!==void 0&&a.attenuationColor.setHex(e.attenuationColor),e.anisotropy!==void 0&&(a.anisotropy=e.anisotropy),e.anisotropyRotation!==void 0&&(a.anisotropyRotation=e.anisotropyRotation),e.fog!==void 0&&(a.fog=e.fog),e.flatShading!==void 0&&(a.flatShading=e.flatShading),e.blending!==void 0&&(a.blending=e.blending),e.combine!==void 0&&(a.combine=e.combine),e.side!==void 0&&(a.side=e.side),e.shadowSide!==void 0&&(a.shadowSide=e.shadowSide),e.opacity!==void 0&&(a.opacity=e.opacity),e.transparent!==void 0&&(a.transparent=e.transparent),e.alphaTest!==void 0&&(a.alphaTest=e.alphaTest),e.alphaHash!==void 0&&(a.alphaHash=e.alphaHash),e.depthFunc!==void 0&&(a.depthFunc=e.depthFunc),e.depthTest!==void 0&&(a.depthTest=e.depthTest),e.depthWrite!==void 0&&(a.depthWrite=e.depthWrite),e.colorWrite!==void 0&&(a.colorWrite=e.colorWrite),e.blendSrc!==void 0&&(a.blendSrc=e.blendSrc),e.blendDst!==void 0&&(a.blendDst=e.blendDst),e.blendEquation!==void 0&&(a.blendEquation=e.blendEquation),e.blendSrcAlpha!==void 0&&(a.blendSrcAlpha=e.blendSrcAlpha),e.blendDstAlpha!==void 0&&(a.blendDstAlpha=e.blendDstAlpha),e.blendEquationAlpha!==void 0&&(a.blendEquationAlpha=e.blendEquationAlpha),e.blendColor!==void 0&&a.blendColor!==void 0&&a.blendColor.setHex(e.blendColor),e.blendAlpha!==void 0&&(a.blendAlpha=e.blendAlpha),e.stencilWriteMask!==void 0&&(a.stencilWriteMask=e.stencilWriteMask),e.stencilFunc!==void 0&&(a.stencilFunc=e.stencilFunc),e.stencilRef!==void 0&&(a.stencilRef=e.stencilRef),e.stencilFuncMask!==void 0&&(a.stencilFuncMask=e.stencilFuncMask),e.stencilFail!==void 0&&(a.stencilFail=e.stencilFail),e.stencilZFail!==void 0&&(a.stencilZFail=e.stencilZFail),e.stencilZPass!==void 0&&(a.stencilZPass=e.stencilZPass),e.stencilWrite!==void 0&&(a.stencilWrite=e.stencilWrite),e.wireframe!==void 0&&(a.wireframe=e.wireframe),e.wireframeLinewidth!==void 0&&(a.wireframeLinewidth=e.wireframeLinewidth),e.wireframeLinecap!==void 0&&(a.wireframeLinecap=e.wireframeLinecap),e.wireframeLinejoin!==void 0&&(a.wireframeLinejoin=e.wireframeLinejoin),e.rotation!==void 0&&(a.rotation=e.rotation),e.linewidth!==void 0&&(a.linewidth=e.linewidth),e.dashSize!==void 0&&(a.dashSize=e.dashSize),e.gapSize!==void 0&&(a.gapSize=e.gapSize),e.scale!==void 0&&(a.scale=e.scale),e.polygonOffset!==void 0&&(a.polygonOffset=e.polygonOffset),e.polygonOffsetFactor!==void 0&&(a.polygonOffsetFactor=e.polygonOffsetFactor),e.polygonOffsetUnits!==void 0&&(a.polygonOffsetUnits=e.polygonOffsetUnits),e.dithering!==void 0&&(a.dithering=e.dithering),e.alphaToCoverage!==void 0&&(a.alphaToCoverage=e.alphaToCoverage),e.premultipliedAlpha!==void 0&&(a.premultipliedAlpha=e.premultipliedAlpha),e.forceSinglePass!==void 0&&(a.forceSinglePass=e.forceSinglePass),e.allowOverride!==void 0&&(a.allowOverride=e.allowOverride),e.visible!==void 0&&(a.visible=e.visible),e.toneMapped!==void 0&&(a.toneMapped=e.toneMapped),e.userData!==void 0&&(a.userData=e.userData),e.vertexColors!==void 0&&(typeof e.vertexColors=="number"?a.vertexColors=e.vertexColors>0:a.vertexColors=e.vertexColors),e.uniforms!==void 0)for(const s in e.uniforms){const l=e.uniforms[s];switch(a.uniforms[s]={},l.type){case"t":a.uniforms[s].value=i(l.value);break;case"c":a.uniforms[s].value=new st().setHex(l.value);break;case"v2":a.uniforms[s].value=new He().fromArray(l.value);break;case"v3":a.uniforms[s].value=new K().fromArray(l.value);break;case"v4":a.uniforms[s].value=new Fn().fromArray(l.value);break;case"m3":a.uniforms[s].value=new Zt().fromArray(l.value);break;case"m4":a.uniforms[s].value=new It().fromArray(l.value);break;default:a.uniforms[s].value=l.value}}if(e.defines!==void 0&&(a.defines=e.defines),e.vertexShader!==void 0&&(a.vertexShader=e.vertexShader),e.fragmentShader!==void 0&&(a.fragmentShader=e.fragmentShader),e.glslVersion!==void 0&&(a.glslVersion=e.glslVersion),e.extensions!==void 0)for(const s in e.extensions)a.extensions[s]=e.extensions[s];if(e.lights!==void 0&&(a.lights=e.lights),e.clipping!==void 0&&(a.clipping=e.clipping),e.size!==void 0&&(a.size=e.size),e.sizeAttenuation!==void 0&&(a.sizeAttenuation=e.sizeAttenuation),e.map!==void 0&&(a.map=i(e.map)),e.matcap!==void 0&&(a.matcap=i(e.matcap)),e.alphaMap!==void 0&&(a.alphaMap=i(e.alphaMap)),e.bumpMap!==void 0&&(a.bumpMap=i(e.bumpMap)),e.bumpScale!==void 0&&(a.bumpScale=e.bumpScale),e.normalMap!==void 0&&(a.normalMap=i(e.normalMap)),e.normalMapType!==void 0&&(a.normalMapType=e.normalMapType),e.normalScale!==void 0){let s=e.normalScale;Array.isArray(s)===!1&&(s=[s,s]),a.normalScale=new He().fromArray(s)}return e.displacementMap!==void 0&&(a.displacementMap=i(e.displacementMap)),e.displacementScale!==void 0&&(a.displacementScale=e.displacementScale),e.displacementBias!==void 0&&(a.displacementBias=e.displacementBias),e.roughnessMap!==void 0&&(a.roughnessMap=i(e.roughnessMap)),e.metalnessMap!==void 0&&(a.metalnessMap=i(e.metalnessMap)),e.emissiveMap!==void 0&&(a.emissiveMap=i(e.emissiveMap)),e.emissiveIntensity!==void 0&&(a.emissiveIntensity=e.emissiveIntensity),e.specularMap!==void 0&&(a.specularMap=i(e.specularMap)),e.specularIntensityMap!==void 0&&(a.specularIntensityMap=i(e.specularIntensityMap)),e.specularColorMap!==void 0&&(a.specularColorMap=i(e.specularColorMap)),e.envMap!==void 0&&(a.envMap=i(e.envMap)),e.envMapRotation!==void 0&&a.envMapRotation.fromArray(e.envMapRotation),e.envMapIntensity!==void 0&&(a.envMapIntensity=e.envMapIntensity),e.reflectivity!==void 0&&(a.reflectivity=e.reflectivity),e.refractionRatio!==void 0&&(a.refractionRatio=e.refractionRatio),e.lightMap!==void 0&&(a.lightMap=i(e.lightMap)),e.lightMapIntensity!==void 0&&(a.lightMapIntensity=e.lightMapIntensity),e.aoMap!==void 0&&(a.aoMap=i(e.aoMap)),e.aoMapIntensity!==void 0&&(a.aoMapIntensity=e.aoMapIntensity),e.gradientMap!==void 0&&(a.gradientMap=i(e.gradientMap)),e.clearcoatMap!==void 0&&(a.clearcoatMap=i(e.clearcoatMap)),e.clearcoatRoughnessMap!==void 0&&(a.clearcoatRoughnessMap=i(e.clearcoatRoughnessMap)),e.clearcoatNormalMap!==void 0&&(a.clearcoatNormalMap=i(e.clearcoatNormalMap)),e.clearcoatNormalScale!==void 0&&(a.clearcoatNormalScale=new He().fromArray(e.clearcoatNormalScale)),e.iridescenceMap!==void 0&&(a.iridescenceMap=i(e.iridescenceMap)),e.iridescenceThicknessMap!==void 0&&(a.iridescenceThicknessMap=i(e.iridescenceThicknessMap)),e.transmissionMap!==void 0&&(a.transmissionMap=i(e.transmissionMap)),e.thicknessMap!==void 0&&(a.thicknessMap=i(e.thicknessMap)),e.anisotropyMap!==void 0&&(a.anisotropyMap=i(e.anisotropyMap)),e.sheenColorMap!==void 0&&(a.sheenColorMap=i(e.sheenColorMap)),e.sheenRoughnessMap!==void 0&&(a.sheenRoughnessMap=i(e.sheenRoughnessMap)),a}setTextures(e){return this.textures=e,this}createMaterialFromType(e){return a_.createMaterialFromType(e)}static createMaterialFromType(e){const t={ShadowMaterial:UC,SpriteMaterial:BA,RawShaderMaterial:nS,ShaderMaterial:_s,PointsMaterial:Ny,MeshPhysicalMaterial:xs,MeshStandardMaterial:zm,MeshPhongMaterial:LC,MeshToonMaterial:IC,MeshNormalMaterial:PC,MeshLambertMaterial:FC,MeshDepthMaterial:iS,MeshDistanceMaterial:aS,MeshBasicMaterial:Qr,MeshMatcapMaterial:zC,LineDashedMaterial:HC,LineBasicMaterial:Fa,Material:Li};return new t[e]}}class Jc{static extractUrlBase(e){const t=e.lastIndexOf("/");return t===-1?"./":e.slice(0,t+1)}static resolveURL(e,t){return typeof e!="string"||e===""?"":(/^https?:\/\//i.test(t)&&/^\//.test(e)&&(t=t.replace(/(^https?:\/\/[^\/]+).*/i,"$1")),/^(https?:)?\/\//i.test(e)||/^data:.*,.*$/i.test(e)||/^blob:.*$/i.test(e)?e:t+e)}}class QC extends Jt{constructor(){super(),this.isInstancedBufferGeometry=!0,this.type="InstancedBufferGeometry",this.instanceCount=1/0}copy(e){return super.copy(e),this.instanceCount=e.instanceCount,this}toJSON(){const e=super.toJSON();return e.instanceCount=this.instanceCount,e.isInstancedBufferGeometry=!0,e}}class ZC extends za{constructor(e){super(e)}load(e,t,i,a){const s=this,l=new $r(s.manager);l.setPath(s.path),l.setRequestHeader(s.requestHeader),l.setWithCredentials(s.withCredentials),l.load(e,function(c){try{t(s.parse(JSON.parse(c)))}catch(d){a?a(d):Dt(d),s.manager.itemError(e)}},i,a)}parse(e){const t={},i={};function a(x,S){if(t[S]!==void 0)return t[S];const T=x.interleavedBuffers[S],M=s(x,T.buffer),w=Ph(T.type,M),B=new xm(w,T.stride);return B.uuid=T.uuid,t[S]=B,B}function s(x,S){if(i[S]!==void 0)return i[S];const T=x.arrayBuffers[S],M=new Uint32Array(T).buffer;return i[S]=M,M}const l=e.isInstancedBufferGeometry?new QC:new Jt,c=e.data.index;if(c!==void 0){const x=Ph(c.type,c.array);l.setIndex(new Rn(x,1))}const d=e.data.attributes;for(const x in d){const S=d[x];let C;if(S.isInterleavedBufferAttribute){const T=a(e.data,S.data);C=new jc(T,S.itemSize,S.offset,S.normalized)}else{const T=Ph(S.type,S.array),M=S.isInstancedBufferAttribute?rf:Rn;C=new M(T,S.itemSize,S.normalized)}S.name!==void 0&&(C.name=S.name),S.usage!==void 0&&C.setUsage(S.usage),l.setAttribute(x,C)}const p=e.data.morphAttributes;if(p)for(const x in p){const S=p[x],C=[];for(let T=0,M=S.length;T<M;T++){const w=S[T];let B;if(w.isInterleavedBufferAttribute){const D=a(e.data,w.data);B=new jc(D,w.itemSize,w.offset,w.normalized)}else{const D=Ph(w.type,w.array);B=new Rn(D,w.itemSize,w.normalized)}w.name!==void 0&&(B.name=w.name),C.push(B)}l.morphAttributes[x]=C}e.data.morphTargetsRelative&&(l.morphTargetsRelative=!0);const v=e.data.groups||e.data.drawcalls||e.data.offsets;if(v!==void 0)for(let x=0,S=v.length;x!==S;++x){const C=v[x];l.addGroup(C.start,C.count,C.materialIndex)}const _=e.data.boundingSphere;return _!==void 0&&(l.boundingSphere=new ua().fromJSON(_)),e.name&&(l.name=e.name),e.userData&&(l.userData=e.userData),l}}class uI extends za{constructor(e){super(e)}load(e,t,i,a){const s=this,l=this.path===""?Jc.extractUrlBase(e):this.path;this.resourcePath=this.resourcePath||l;const c=new $r(this.manager);c.setPath(this.path),c.setRequestHeader(this.requestHeader),c.setWithCredentials(this.withCredentials),c.load(e,function(d){let p=null;try{p=JSON.parse(d)}catch(v){a!==void 0&&a(v),v("ObjectLoader: Can't parse "+e+".",v.message);return}const g=p.metadata;if(g===void 0||g.type===void 0||g.type.toLowerCase()==="geometry"){a!==void 0&&a(new Error("THREE.ObjectLoader: Can't load "+e)),Dt("ObjectLoader: Can't load "+e);return}s.parse(p,t)},i,a)}async loadAsync(e,t){const i=this,a=this.path===""?Jc.extractUrlBase(e):this.path;this.resourcePath=this.resourcePath||a;const s=new $r(this.manager);s.setPath(this.path),s.setRequestHeader(this.requestHeader),s.setWithCredentials(this.withCredentials);const l=await s.loadAsync(e,t),c=JSON.parse(l),d=c.metadata;if(d===void 0||d.type===void 0||d.type.toLowerCase()==="geometry")throw new Error("THREE.ObjectLoader: Can't load "+e);return await i.parseAsync(c)}parse(e,t){const i=this.parseAnimations(e.animations),a=this.parseShapes(e.shapes),s=this.parseGeometries(e.geometries,a),l=this.parseImages(e.images,function(){t!==void 0&&t(p)}),c=this.parseTextures(e.textures,l),d=this.parseMaterials(e.materials,c),p=this.parseObject(e.object,s,d,c,i),g=this.parseSkeletons(e.skeletons,p);if(this.bindSkeletons(p,g),this.bindLightTargets(p),t!==void 0){let v=!1;for(const _ in l)if(l[_].data instanceof HTMLImageElement){v=!0;break}v===!1&&t(p)}return p}async parseAsync(e){const t=this.parseAnimations(e.animations),i=this.parseShapes(e.shapes),a=this.parseGeometries(e.geometries,i),s=await this.parseImagesAsync(e.images),l=this.parseTextures(e.textures,s),c=this.parseMaterials(e.materials,l),d=this.parseObject(e.object,a,c,l,t),p=this.parseSkeletons(e.skeletons,d);return this.bindSkeletons(d,p),this.bindLightTargets(d),d}parseShapes(e){const t={};if(e!==void 0)for(let i=0,a=e.length;i<a;i++){const s=new cf().fromJSON(e[i]);t[s.uuid]=s}return t}parseSkeletons(e,t){const i={},a={};if(t.traverse(function(s){s.isBone&&(a[s.uuid]=s)}),e!==void 0)for(let s=0,l=e.length;s<l;s++){const c=new Mm().fromJSON(e[s],a);i[c.uuid]=c}return i}parseGeometries(e,t){const i={};if(e!==void 0){const a=new ZC;for(let s=0,l=e.length;s<l;s++){let c;const d=e[s];switch(d.type){case"BufferGeometry":case"InstancedBufferGeometry":c=a.parse(d);break;default:d.type in NC?c=NC[d.type].fromJSON(d,t):ct(`ObjectLoader: Unsupported geometry type "${d.type}"`)}c.uuid=d.uuid,d.name!==void 0&&(c.name=d.name),d.userData!==void 0&&(c.userData=d.userData),i[d.uuid]=c}}return i}parseMaterials(e,t){const i={},a={};if(e!==void 0){const s=new a_;s.setTextures(t);for(let l=0,c=e.length;l<c;l++){const d=e[l];i[d.uuid]===void 0&&(i[d.uuid]=s.parse(d)),a[d.uuid]=i[d.uuid]}}return a}parseAnimations(e){const t={};if(e!==void 0)for(let i=0;i<e.length;i++){const a=e[i],s=hd.parse(a);t[s.uuid]=s}return t}parseImages(e,t){const i=this,a={};let s;function l(d){return i.manager.itemStart(d),s.load(d,function(){i.manager.itemEnd(d)},void 0,function(){i.manager.itemError(d),i.manager.itemEnd(d)})}function c(d){if(typeof d=="string"){const p=d,g=/^(\/\/)|([a-z]+:(\/\/)?)/i.test(p)?p:i.resourcePath+p;return l(g)}else return d.data?{data:Ph(d.type,d.data),width:d.width,height:d.height}:null}if(e!==void 0&&e.length>0){const d=new cS(t);s=new Hm(d),s.setCrossOrigin(this.crossOrigin);for(let p=0,g=e.length;p<g;p++){const v=e[p],_=v.url;if(Array.isArray(_)){const x=[];for(let S=0,C=_.length;S<C;S++){const T=_[S],M=c(T);M!==null&&(M instanceof HTMLImageElement?x.push(M):x.push(new Qs(M.data,M.width,M.height)))}a[v.uuid]=new Fc(x)}else{const x=c(v.url);a[v.uuid]=new Fc(x)}}}return a}async parseImagesAsync(e){const t=this,i={};let a;async function s(l){if(typeof l=="string"){const c=l,d=/^(\/\/)|([a-z]+:(\/\/)?)/i.test(c)?c:t.resourcePath+c;return await a.loadAsync(d)}else return l.data?{data:Ph(l.type,l.data),width:l.width,height:l.height}:null}if(e!==void 0&&e.length>0){a=new Hm(this.manager),a.setCrossOrigin(this.crossOrigin);for(let l=0,c=e.length;l<c;l++){const d=e[l],p=d.url;if(Array.isArray(p)){const g=[];for(let v=0,_=p.length;v<_;v++){const x=p[v],S=await s(x);S!==null&&(S instanceof HTMLImageElement?g.push(S):g.push(new Qs(S.data,S.width,S.height)))}i[d.uuid]=new Fc(g)}else{const g=await s(d.url);i[d.uuid]=new Fc(g)}}}return i}parseTextures(e,t){function i(s,l){return typeof s=="number"?s:(ct("ObjectLoader.parseTexture: Constant should be in numeric form.",s),l[s])}const a={};if(e!==void 0)for(let s=0,l=e.length;s<l;s++){const c=e[s];c.image===void 0&&ct('ObjectLoader: No "image" specified for',c.uuid),t[c.image]===void 0&&ct("ObjectLoader: Undefined image",c.image);const d=t[c.image],p=d.data;let g;Array.isArray(p)?(g=new _m,p.length===6&&(g.needsUpdate=!0)):(p&&p.data?g=new Qs:g=new ai,p&&(g.needsUpdate=!0)),g.source=d,g.uuid=c.uuid,c.name!==void 0&&(g.name=c.name),c.mapping!==void 0&&(g.mapping=i(c.mapping,fI)),c.channel!==void 0&&(g.channel=c.channel),c.offset!==void 0&&g.offset.fromArray(c.offset),c.repeat!==void 0&&g.repeat.fromArray(c.repeat),c.center!==void 0&&g.center.fromArray(c.center),c.rotation!==void 0&&(g.rotation=c.rotation),c.wrap!==void 0&&(g.wrapS=i(c.wrap[0],$C),g.wrapT=i(c.wrap[1],$C)),c.format!==void 0&&(g.format=c.format),c.internalFormat!==void 0&&(g.internalFormat=c.internalFormat),c.type!==void 0&&(g.type=c.type),c.colorSpace!==void 0&&(g.colorSpace=c.colorSpace),c.minFilter!==void 0&&(g.minFilter=i(c.minFilter,eR)),c.magFilter!==void 0&&(g.magFilter=i(c.magFilter,eR)),c.anisotropy!==void 0&&(g.anisotropy=c.anisotropy),c.flipY!==void 0&&(g.flipY=c.flipY),c.generateMipmaps!==void 0&&(g.generateMipmaps=c.generateMipmaps),c.premultiplyAlpha!==void 0&&(g.premultiplyAlpha=c.premultiplyAlpha),c.unpackAlignment!==void 0&&(g.unpackAlignment=c.unpackAlignment),c.compareFunction!==void 0&&(g.compareFunction=c.compareFunction),c.userData!==void 0&&(g.userData=c.userData),a[c.uuid]=g}return a}parseObject(e,t,i,a,s){let l;function c(_){return t[_]===void 0&&ct("ObjectLoader: Undefined geometry",_),t[_]}function d(_){if(_!==void 0){if(Array.isArray(_)){const x=[];for(let S=0,C=_.length;S<C;S++){const T=_[S];i[T]===void 0&&ct("ObjectLoader: Undefined material",T),x.push(i[T])}return x}return i[_]===void 0&&ct("ObjectLoader: Undefined material",_),i[_]}}function p(_){return a[_]===void 0&&ct("ObjectLoader: Undefined texture",_),a[_]}let g,v;switch(e.type){case"Scene":l=new wA,e.background!==void 0&&(Number.isInteger(e.background)?l.background=new st(e.background):l.background=p(e.background)),e.environment!==void 0&&(l.environment=p(e.environment)),e.fog!==void 0&&(e.fog.type==="Fog"?l.fog=new vy(e.fog.color,e.fog.near,e.fog.far):e.fog.type==="FogExp2"&&(l.fog=new gy(e.fog.color,e.fog.density)),e.fog.name!==""&&(l.fog.name=e.fog.name)),e.backgroundBlurriness!==void 0&&(l.backgroundBlurriness=e.backgroundBlurriness),e.backgroundIntensity!==void 0&&(l.backgroundIntensity=e.backgroundIntensity),e.backgroundRotation!==void 0&&l.backgroundRotation.fromArray(e.backgroundRotation),e.environmentIntensity!==void 0&&(l.environmentIntensity=e.environmentIntensity),e.environmentRotation!==void 0&&l.environmentRotation.fromArray(e.environmentRotation);break;case"PerspectiveCamera":l=new Zi(e.fov,e.aspect,e.near,e.far),e.focus!==void 0&&(l.focus=e.focus),e.zoom!==void 0&&(l.zoom=e.zoom),e.filmGauge!==void 0&&(l.filmGauge=e.filmGauge),e.filmOffset!==void 0&&(l.filmOffset=e.filmOffset),e.view!==void 0&&(l.view=Object.assign({},e.view));break;case"OrthographicCamera":l=new vf(e.left,e.right,e.top,e.bottom,e.near,e.far),e.zoom!==void 0&&(l.zoom=e.zoom),e.view!==void 0&&(l.view=Object.assign({},e.view));break;case"AmbientLight":l=new WC(e.color,e.intensity);break;case"DirectionalLight":l=new pS(e.color,e.intensity),l.target=e.target||"";break;case"PointLight":l=new dS(e.color,e.intensity,e.distance,e.decay);break;case"RectAreaLight":l=new JC(e.color,e.intensity,e.width,e.height);break;case"SpotLight":l=new hS(e.color,e.intensity,e.distance,e.angle,e.penumbra,e.decay),l.target=e.target||"";break;case"HemisphereLight":l=new jC(e.color,e.groundColor,e.intensity);break;case"LightProbe":const _=new mS().fromArray(e.sh);l=new KC(_,e.intensity);break;case"SkinnedMesh":g=c(e.geometry),v=d(e.material),l=new UA(g,v),e.bindMode!==void 0&&(l.bindMode=e.bindMode),e.bindMatrix!==void 0&&l.bindMatrix.fromArray(e.bindMatrix),e.skeleton!==void 0&&(l.skeleton=e.skeleton);break;case"Mesh":g=c(e.geometry),v=d(e.material),l=new Ii(g,v);break;case"InstancedMesh":g=c(e.geometry),v=d(e.material);const x=e.count,S=e.instanceMatrix,C=e.instanceColor;l=new LA(g,v,x),l.instanceMatrix=new rf(new Float32Array(S.array),16),C!==void 0&&(l.instanceColor=new rf(new Float32Array(C.array),C.itemSize));break;case"BatchedMesh":g=c(e.geometry),v=d(e.material),l=new lC(e.maxInstanceCount,e.maxVertexCount,e.maxIndexCount,v),l.geometry=g,l.perObjectFrustumCulled=e.perObjectFrustumCulled,l.sortObjects=e.sortObjects,l._drawRanges=e.drawRanges,l._reservedRanges=e.reservedRanges,l._geometryInfo=e.geometryInfo.map(T=>{let M=null,w=null;return T.boundingBox!==void 0&&(M=new Sa().fromJSON(T.boundingBox)),T.boundingSphere!==void 0&&(w=new ua().fromJSON(T.boundingSphere)),{...T,boundingBox:M,boundingSphere:w}}),l._instanceInfo=e.instanceInfo,l._availableInstanceIds=e._availableInstanceIds,l._availableGeometryIds=e._availableGeometryIds,l._nextIndexStart=e.nextIndexStart,l._nextVertexStart=e.nextVertexStart,l._geometryCount=e.geometryCount,l._maxInstanceCount=e.maxInstanceCount,l._maxVertexCount=e.maxVertexCount,l._maxIndexCount=e.maxIndexCount,l._geometryInitialized=e.geometryInitialized,l._matricesTexture=p(e.matricesTexture.uuid),l._indirectTexture=p(e.indirectTexture.uuid),e.colorsTexture!==void 0&&(l._colorsTexture=p(e.colorsTexture.uuid)),e.boundingSphere!==void 0&&(l.boundingSphere=new ua().fromJSON(e.boundingSphere)),e.boundingBox!==void 0&&(l.boundingBox=new Sa().fromJSON(e.boundingBox));break;case"LOD":l=new QT;break;case"Line":l=new Il(c(e.geometry),d(e.material));break;case"LineLoop":l=new HA(c(e.geometry),d(e.material));break;case"LineSegments":l=new Zs(c(e.geometry),d(e.material));break;case"PointCloud":case"Points":l=new VA(c(e.geometry),d(e.material));break;case"Sprite":l=new JT(d(e.material));break;case"Group":l=new Ll;break;case"Bone":l=new Sy;break;default:l=new dn}if(l.uuid=e.uuid,e.name!==void 0&&(l.name=e.name),e.matrix!==void 0?(l.matrix.fromArray(e.matrix),e.matrixAutoUpdate!==void 0&&(l.matrixAutoUpdate=e.matrixAutoUpdate),l.matrixAutoUpdate&&l.matrix.decompose(l.position,l.quaternion,l.scale)):(e.position!==void 0&&l.position.fromArray(e.position),e.rotation!==void 0&&l.rotation.fromArray(e.rotation),e.quaternion!==void 0&&l.quaternion.fromArray(e.quaternion),e.scale!==void 0&&l.scale.fromArray(e.scale)),e.up!==void 0&&l.up.fromArray(e.up),e.castShadow!==void 0&&(l.castShadow=e.castShadow),e.receiveShadow!==void 0&&(l.receiveShadow=e.receiveShadow),e.shadow&&(e.shadow.intensity!==void 0&&(l.shadow.intensity=e.shadow.intensity),e.shadow.bias!==void 0&&(l.shadow.bias=e.shadow.bias),e.shadow.normalBias!==void 0&&(l.shadow.normalBias=e.shadow.normalBias),e.shadow.radius!==void 0&&(l.shadow.radius=e.shadow.radius),e.shadow.mapSize!==void 0&&l.shadow.mapSize.fromArray(e.shadow.mapSize),e.shadow.camera!==void 0&&(l.shadow.camera=this.parseObject(e.shadow.camera))),e.visible!==void 0&&(l.visible=e.visible),e.frustumCulled!==void 0&&(l.frustumCulled=e.frustumCulled),e.renderOrder!==void 0&&(l.renderOrder=e.renderOrder),e.userData!==void 0&&(l.userData=e.userData),e.layers!==void 0&&(l.layers.mask=e.layers),e.children!==void 0){const _=e.children;for(let x=0;x<_.length;x++)l.add(this.parseObject(_[x],t,i,a,s))}if(e.animations!==void 0){const _=e.animations;for(let x=0;x<_.length;x++){const S=_[x];l.animations.push(s[S])}}if(e.type==="LOD"){e.autoUpdate!==void 0&&(l.autoUpdate=e.autoUpdate);const _=e.levels;for(let x=0;x<_.length;x++){const S=_[x],C=l.getObjectByProperty("uuid",S.object);C!==void 0&&l.addLevel(C,S.distance,S.hysteresis)}}return l}bindSkeletons(e,t){Object.keys(t).length!==0&&e.traverse(function(i){if(i.isSkinnedMesh===!0&&i.skeleton!==void 0){const a=t[i.skeleton];a===void 0?ct("ObjectLoader: No skeleton found with UUID:",i.skeleton):i.bind(a,i.bindMatrix)}})}bindLightTargets(e){e.traverse(function(t){if(t.isDirectionalLight||t.isSpotLight){const i=t.target,a=e.getObjectByProperty("uuid",i);a!==void 0?t.target=a:t.target=new dn}})}}const fI={UVMapping:rv,CubeReflectionMapping:Oo,CubeRefractionMapping:Oc,EquirectangularReflectionMapping:tm,EquirectangularRefractionMapping:nm,CubeUVReflectionMapping:wh},$C={RepeatWrapping:Nc,ClampToEdgeWrapping:er,MirroredRepeatWrapping:Bh},eR={NearestFilter:Ei,NearestMipmapNearestFilter:sv,NearestMipmapLinearFilter:Wu,LinearFilter:Zn,LinearMipmapNearestFilter:Dh,LinearMipmapLinearFilter:gs},gS=new WeakMap;class tR extends za{constructor(e){super(e),this.isImageBitmapLoader=!0,typeof createImageBitmap>"u"&&ct("ImageBitmapLoader: createImageBitmap() not supported."),typeof fetch>"u"&&ct("ImageBitmapLoader: fetch() not supported."),this.options={premultiplyAlpha:"none"},this._abortController=new AbortController}setOptions(e){return this.options=e,this}load(e,t,i,a){e===void 0&&(e=""),this.path!==void 0&&(e=this.path+e),e=this.manager.resolveURL(e);const s=this,l=Fo.get(`image-bitmap:${e}`);if(l!==void 0){if(s.manager.itemStart(e),l.then){l.then(p=>{if(gS.has(l)===!0)a&&a(gS.get(l)),s.manager.itemError(e),s.manager.itemEnd(e);else return t&&t(p),s.manager.itemEnd(e),p});return}return setTimeout(function(){t&&t(l),s.manager.itemEnd(e)},0),l}const c={};c.credentials=this.crossOrigin==="anonymous"?"same-origin":"include",c.headers=this.requestHeader,c.signal=typeof AbortSignal.any=="function"?AbortSignal.any([this._abortController.signal,this.manager.abortController.signal]):this._abortController.signal;const d=fetch(e,c).then(function(p){return p.blob()}).then(function(p){return createImageBitmap(p,Object.assign(s.options,{colorSpaceConversion:"none"}))}).then(function(p){return Fo.add(`image-bitmap:${e}`,p),t&&t(p),s.manager.itemEnd(e),p}).catch(function(p){a&&a(p),gS.set(d,p),Fo.remove(`image-bitmap:${e}`),s.manager.itemError(e),s.manager.itemEnd(e)});Fo.add(`image-bitmap:${e}`,d),s.manager.itemStart(e)}abort(){return this._abortController.abort(),this._abortController=new AbortController,this}}let r_;class vS{static getContext(){return r_===void 0&&(r_=new(window.AudioContext||window.webkitAudioContext)),r_}static setContext(e){r_=e}}class hI extends za{constructor(e){super(e)}load(e,t,i,a){const s=this,l=new $r(this.manager);l.setResponseType("arraybuffer"),l.setPath(this.path),l.setRequestHeader(this.requestHeader),l.setWithCredentials(this.withCredentials),l.load(e,function(d){try{const p=d.slice(0);vS.getContext().decodeAudioData(p,function(v){t(v)}).catch(c)}catch(p){c(p)}},i,a);function c(d){a?a(d):Dt(d),s.manager.itemError(e)}}}const nR=new It,iR=new It,yf=new It;class dI{constructor(){this.type="StereoCamera",this.aspect=1,this.eyeSep=.064,this.cameraL=new Zi,this.cameraL.layers.enable(1),this.cameraL.matrixAutoUpdate=!1,this.cameraR=new Zi,this.cameraR.layers.enable(2),this.cameraR.matrixAutoUpdate=!1,this._cache={focus:null,fov:null,aspect:null,near:null,far:null,zoom:null,eyeSep:null}}update(e){const t=this._cache;if(t.focus!==e.focus||t.fov!==e.fov||t.aspect!==e.aspect*this.aspect||t.near!==e.near||t.far!==e.far||t.zoom!==e.zoom||t.eyeSep!==this.eyeSep){t.focus=e.focus,t.fov=e.fov,t.aspect=e.aspect*this.aspect,t.near=e.near,t.far=e.far,t.zoom=e.zoom,t.eyeSep=this.eyeSep,yf.copy(e.projectionMatrix);const a=t.eyeSep/2,s=a*t.near/t.focus,l=t.near*Math.tan($u*t.fov*.5)/t.zoom;let c,d;iR.elements[12]=-a,nR.elements[12]=a,c=-l*t.aspect+s,d=l*t.aspect+s,yf.elements[0]=2*t.near/(d-c),yf.elements[8]=(d+c)/(d-c),this.cameraL.projectionMatrix.copy(yf),c=-l*t.aspect-s,d=l*t.aspect-s,yf.elements[0]=2*t.near/(d-c),yf.elements[8]=(d+c)/(d-c),this.cameraR.projectionMatrix.copy(yf)}this.cameraL.matrixWorld.copy(e.matrixWorld).multiply(iR),this.cameraR.matrixWorld.copy(e.matrixWorld).multiply(nR)}}class aR extends Zi{constructor(e=[]){super(),this.isArrayCamera=!0,this.isMultiViewCamera=!1,this.cameras=e}}class yS{constructor(e=!0){this.autoStart=e,this.startTime=0,this.oldTime=0,this.elapsedTime=0,this.running=!1}start(){this.startTime=performance.now(),this.oldTime=this.startTime,this.elapsedTime=0,this.running=!0}stop(){this.getElapsedTime(),this.running=!1,this.autoStart=!1}getElapsedTime(){return this.getDelta(),this.elapsedTime}getDelta(){let e=0;if(this.autoStart&&!this.running)return this.start(),0;if(this.running){const t=performance.now();e=(t-this.oldTime)/1e3,this.oldTime=t,this.elapsedTime+=e}return e}}const _f=new K,_S=new Ui,pI=new K,xf=new K,bf=new K;class mI extends dn{constructor(){super(),this.type="AudioListener",this.context=vS.getContext(),this.gain=this.context.createGain(),this.gain.connect(this.context.destination),this.filter=null,this.timeDelta=0,this._clock=new yS}getInput(){return this.gain}removeFilter(){return this.filter!==null&&(this.gain.disconnect(this.filter),this.filter.disconnect(this.context.destination),this.gain.connect(this.context.destination),this.filter=null),this}getFilter(){return this.filter}setFilter(e){return this.filter!==null?(this.gain.disconnect(this.filter),this.filter.disconnect(this.context.destination)):this.gain.disconnect(this.context.destination),this.filter=e,this.gain.connect(this.filter),this.filter.connect(this.context.destination),this}getMasterVolume(){return this.gain.gain.value}setMasterVolume(e){return this.gain.gain.setTargetAtTime(e,this.context.currentTime,.01),this}updateMatrixWorld(e){super.updateMatrixWorld(e);const t=this.context.listener;if(this.timeDelta=this._clock.getDelta(),this.matrixWorld.decompose(_f,_S,pI),xf.set(0,0,-1).applyQuaternion(_S),bf.set(0,1,0).applyQuaternion(_S),t.positionX){const i=this.context.currentTime+this.timeDelta;t.positionX.linearRampToValueAtTime(_f.x,i),t.positionY.linearRampToValueAtTime(_f.y,i),t.positionZ.linearRampToValueAtTime(_f.z,i),t.forwardX.linearRampToValueAtTime(xf.x,i),t.forwardY.linearRampToValueAtTime(xf.y,i),t.forwardZ.linearRampToValueAtTime(xf.z,i),t.upX.linearRampToValueAtTime(bf.x,i),t.upY.linearRampToValueAtTime(bf.y,i),t.upZ.linearRampToValueAtTime(bf.z,i)}else t.setPosition(_f.x,_f.y,_f.z),t.setOrientation(xf.x,xf.y,xf.z,bf.x,bf.y,bf.z)}}class rR extends dn{constructor(e){super(),this.type="Audio",this.listener=e,this.context=e.context,this.gain=this.context.createGain(),this.gain.connect(e.getInput()),this.autoplay=!1,this.buffer=null,this.detune=0,this.loop=!1,this.loopStart=0,this.loopEnd=0,this.offset=0,this.duration=void 0,this.playbackRate=1,this.isPlaying=!1,this.hasPlaybackControl=!0,this.source=null,this.sourceType="empty",this._startedAt=0,this._progress=0,this._connected=!1,this.filters=[]}getOutput(){return this.gain}setNodeSource(e){return this.hasPlaybackControl=!1,this.sourceType="audioNode",this.source=e,this.connect(),this}setMediaElementSource(e){return this.hasPlaybackControl=!1,this.sourceType="mediaNode",this.source=this.context.createMediaElementSource(e),this.connect(),this}setMediaStreamSource(e){return this.hasPlaybackControl=!1,this.sourceType="mediaStreamNode",this.source=this.context.createMediaStreamSource(e),this.connect(),this}setBuffer(e){return this.buffer=e,this.sourceType="buffer",this.autoplay&&this.play(),this}play(e=0){if(this.isPlaying===!0){ct("Audio: Audio is already playing.");return}if(this.hasPlaybackControl===!1){ct("Audio: this Audio has no playback control.");return}this._startedAt=this.context.currentTime+e;const t=this.context.createBufferSource();return t.buffer=this.buffer,t.loop=this.loop,t.loopStart=this.loopStart,t.loopEnd=this.loopEnd,t.onended=this.onEnded.bind(this),t.start(this._startedAt,this._progress+this.offset,this.duration),this.isPlaying=!0,this.source=t,this.setDetune(this.detune),this.setPlaybackRate(this.playbackRate),this.connect()}pause(){if(this.hasPlaybackControl===!1){ct("Audio: this Audio has no playback control.");return}return this.isPlaying===!0&&(this._progress+=Math.max(this.context.currentTime-this._startedAt,0)*this.playbackRate,this.loop===!0&&(this._progress=this._progress%(this.duration||this.buffer.duration)),this.source.stop(),this.source.onended=null,this.isPlaying=!1),this}stop(e=0){if(this.hasPlaybackControl===!1){ct("Audio: this Audio has no playback control.");return}return this._progress=0,this.source!==null&&(this.source.stop(this.context.currentTime+e),this.source.onended=null),this.isPlaying=!1,this}connect(){if(this.filters.length>0){this.source.connect(this.filters[0]);for(let e=1,t=this.filters.length;e<t;e++)this.filters[e-1].connect(this.filters[e]);this.filters[this.filters.length-1].connect(this.getOutput())}else this.source.connect(this.getOutput());return this._connected=!0,this}disconnect(){if(this._connected!==!1){if(this.filters.length>0){this.source.disconnect(this.filters[0]);for(let e=1,t=this.filters.length;e<t;e++)this.filters[e-1].disconnect(this.filters[e]);this.filters[this.filters.length-1].disconnect(this.getOutput())}else this.source.disconnect(this.getOutput());return this._connected=!1,this}}getFilters(){return this.filters}setFilters(e){return e||(e=[]),this._connected===!0?(this.disconnect(),this.filters=e.slice(),this.connect()):this.filters=e.slice(),this}setDetune(e){return this.detune=e,this.isPlaying===!0&&this.source.detune!==void 0&&this.source.detune.setTargetAtTime(this.detune,this.context.currentTime,.01),this}getDetune(){return this.detune}getFilter(){return this.getFilters()[0]}setFilter(e){return this.setFilters(e?[e]:[])}setPlaybackRate(e){if(this.hasPlaybackControl===!1){ct("Audio: this Audio has no playback control.");return}return this.playbackRate=e,this.isPlaying===!0&&this.source.playbackRate.setTargetAtTime(this.playbackRate,this.context.currentTime,.01),this}getPlaybackRate(){return this.playbackRate}onEnded(){this.isPlaying=!1,this._progress=0}getLoop(){return this.hasPlaybackControl===!1?(ct("Audio: this Audio has no playback control."),!1):this.loop}setLoop(e){if(this.hasPlaybackControl===!1){ct("Audio: this Audio has no playback control.");return}return this.loop=e,this.isPlaying===!0&&(this.source.loop=this.loop),this}setLoopStart(e){return this.loopStart=e,this}setLoopEnd(e){return this.loopEnd=e,this}getVolume(){return this.gain.gain.value}setVolume(e){return this.gain.gain.setTargetAtTime(e,this.context.currentTime,.01),this}copy(e,t){return super.copy(e,t),e.sourceType!=="buffer"?(ct("Audio: Audio source type cannot be copied."),this):(this.autoplay=e.autoplay,this.buffer=e.buffer,this.detune=e.detune,this.loop=e.loop,this.loopStart=e.loopStart,this.loopEnd=e.loopEnd,this.offset=e.offset,this.duration=e.duration,this.playbackRate=e.playbackRate,this.hasPlaybackControl=e.hasPlaybackControl,this.sourceType=e.sourceType,this.filters=e.filters.slice(),this)}clone(e){return new this.constructor(this.listener).copy(this,e)}}const Af=new K,sR=new Ui,gI=new K,Sf=new K;class vI extends rR{constructor(e){super(e),this.panner=this.context.createPanner(),this.panner.panningModel="HRTF",this.panner.connect(this.gain)}connect(){return super.connect(),this.panner.connect(this.gain),this}disconnect(){return super.disconnect(),this.panner.disconnect(this.gain),this}getOutput(){return this.panner}getRefDistance(){return this.panner.refDistance}setRefDistance(e){return this.panner.refDistance=e,this}getRolloffFactor(){return this.panner.rolloffFactor}setRolloffFactor(e){return this.panner.rolloffFactor=e,this}getDistanceModel(){return this.panner.distanceModel}setDistanceModel(e){return this.panner.distanceModel=e,this}getMaxDistance(){return this.panner.maxDistance}setMaxDistance(e){return this.panner.maxDistance=e,this}setDirectionalCone(e,t,i){return this.panner.coneInnerAngle=e,this.panner.coneOuterAngle=t,this.panner.coneOuterGain=i,this}updateMatrixWorld(e){if(super.updateMatrixWorld(e),this.hasPlaybackControl===!0&&this.isPlaying===!1)return;this.matrixWorld.decompose(Af,sR,gI),Sf.set(0,0,1).applyQuaternion(sR);const t=this.panner;if(t.positionX){const i=this.context.currentTime+this.listener.timeDelta;t.positionX.linearRampToValueAtTime(Af.x,i),t.positionY.linearRampToValueAtTime(Af.y,i),t.positionZ.linearRampToValueAtTime(Af.z,i),t.orientationX.linearRampToValueAtTime(Sf.x,i),t.orientationY.linearRampToValueAtTime(Sf.y,i),t.orientationZ.linearRampToValueAtTime(Sf.z,i)}else t.setPosition(Af.x,Af.y,Af.z),t.setOrientation(Sf.x,Sf.y,Sf.z)}}class yI{constructor(e,t=2048){this.analyser=e.context.createAnalyser(),this.analyser.fftSize=t,this.data=new Uint8Array(this.analyser.frequencyBinCount),e.getOutput().connect(this.analyser)}getFrequencyData(){return this.analyser.getByteFrequencyData(this.data),this.data}getAverageFrequency(){let e=0;const t=this.getFrequencyData();for(let i=0;i<t.length;i++)e+=t[i];return e/t.length}}class oR{constructor(e,t,i){this.binding=e,this.valueSize=i;let a,s,l;switch(t){case"quaternion":a=this._slerp,s=this._slerpAdditive,l=this._setAdditiveIdentityQuaternion,this.buffer=new Float64Array(i*6),this._workIndex=5;break;case"string":case"bool":a=this._select,s=this._select,l=this._setAdditiveIdentityOther,this.buffer=new Array(i*5);break;default:a=this._lerp,s=this._lerpAdditive,l=this._setAdditiveIdentityNumeric,this.buffer=new Float64Array(i*5)}this._mixBufferRegion=a,this._mixBufferRegionAdditive=s,this._setIdentity=l,this._origIndex=3,this._addIndex=4,this.cumulativeWeight=0,this.cumulativeWeightAdditive=0,this.useCount=0,this.referenceCount=0}accumulate(e,t){const i=this.buffer,a=this.valueSize,s=e*a+a;let l=this.cumulativeWeight;if(l===0){for(let c=0;c!==a;++c)i[s+c]=i[c];l=t}else{l+=t;const c=t/l;this._mixBufferRegion(i,s,0,c,a)}this.cumulativeWeight=l}accumulateAdditive(e){const t=this.buffer,i=this.valueSize,a=i*this._addIndex;this.cumulativeWeightAdditive===0&&this._setIdentity(),this._mixBufferRegionAdditive(t,a,0,e,i),this.cumulativeWeightAdditive+=e}apply(e){const t=this.valueSize,i=this.buffer,a=e*t+t,s=this.cumulativeWeight,l=this.cumulativeWeightAdditive,c=this.binding;if(this.cumulativeWeight=0,this.cumulativeWeightAdditive=0,s<1){const d=t*this._origIndex;this._mixBufferRegion(i,a,d,1-s,t)}l>0&&this._mixBufferRegionAdditive(i,a,this._addIndex*t,1,t);for(let d=t,p=t+t;d!==p;++d)if(i[d]!==i[d+t]){c.setValue(i,a);break}}saveOriginalState(){const e=this.binding,t=this.buffer,i=this.valueSize,a=i*this._origIndex;e.getValue(t,a);for(let s=i,l=a;s!==l;++s)t[s]=t[a+s%i];this._setIdentity(),this.cumulativeWeight=0,this.cumulativeWeightAdditive=0}restoreOriginalState(){const e=this.valueSize*3;this.binding.setValue(this.buffer,e)}_setAdditiveIdentityNumeric(){const e=this._addIndex*this.valueSize,t=e+this.valueSize;for(let i=e;i<t;i++)this.buffer[i]=0}_setAdditiveIdentityQuaternion(){this._setAdditiveIdentityNumeric(),this.buffer[this._addIndex*this.valueSize+3]=1}_setAdditiveIdentityOther(){const e=this._origIndex*this.valueSize,t=this._addIndex*this.valueSize;for(let i=0;i<this.valueSize;i++)this.buffer[t+i]=this.buffer[e+i]}_select(e,t,i,a,s){if(a>=.5)for(let l=0;l!==s;++l)e[t+l]=e[i+l]}_slerp(e,t,i,a){Ui.slerpFlat(e,t,e,t,e,i,a)}_slerpAdditive(e,t,i,a,s){const l=this._workIndex*s;Ui.multiplyQuaternionsFlat(e,l,e,t,e,i),Ui.slerpFlat(e,t,e,t,e,l,a)}_lerp(e,t,i,a,s){const l=1-a;for(let c=0;c!==s;++c){const d=t+c;e[d]=e[d]*l+e[i+c]*a}}_lerpAdditive(e,t,i,a,s){for(let l=0;l!==s;++l){const c=t+l;e[c]=e[c]+e[i+l]*a}}}const xS="\\[\\]\\.:\\/",_I=new RegExp("["+xS+"]","g"),bS="[^"+xS+"]",xI="[^"+xS.replace("\\.","")+"]",bI=/((?:WC+[\/:])*)/.source.replace("WC",bS),AI=/(WCOD+)?/.source.replace("WCOD",xI),SI=/(?:\.(WC+)(?:\[(.+)\])?)?/.source.replace("WC",bS),MI=/\.(WC+)(?:\[(.+)\])?/.source.replace("WC",bS),EI=new RegExp("^"+bI+AI+SI+MI+"$"),TI=["material","materials","bones","map"];class CI{constructor(e,t,i){const a=i||Tn.parseTrackName(t);this._targetGroup=e,this._bindings=e.subscribe_(t,a)}getValue(e,t){this.bind();const i=this._targetGroup.nCachedObjects_,a=this._bindings[i];a!==void 0&&a.getValue(e,t)}setValue(e,t){const i=this._bindings;for(let a=this._targetGroup.nCachedObjects_,s=i.length;a!==s;++a)i[a].setValue(e,t)}bind(){const e=this._bindings;for(let t=this._targetGroup.nCachedObjects_,i=e.length;t!==i;++t)e[t].bind()}unbind(){const e=this._bindings;for(let t=this._targetGroup.nCachedObjects_,i=e.length;t!==i;++t)e[t].unbind()}}class Tn{constructor(e,t,i){this.path=t,this.parsedPath=i||Tn.parseTrackName(t),this.node=Tn.findNode(e,this.parsedPath.nodeName),this.rootNode=e,this.getValue=this._getValue_unbound,this.setValue=this._setValue_unbound}static create(e,t,i){return e&&e.isAnimationObjectGroup?new Tn.Composite(e,t,i):new Tn(e,t,i)}static sanitizeNodeName(e){return e.replace(/\s/g,"_").replace(_I,"")}static parseTrackName(e){const t=EI.exec(e);if(t===null)throw new Error("PropertyBinding: Cannot parse trackName: "+e);const i={nodeName:t[2],objectName:t[3],objectIndex:t[4],propertyName:t[5],propertyIndex:t[6]},a=i.nodeName&&i.nodeName.lastIndexOf(".");if(a!==void 0&&a!==-1){const s=i.nodeName.substring(a+1);TI.indexOf(s)!==-1&&(i.nodeName=i.nodeName.substring(0,a),i.objectName=s)}if(i.propertyName===null||i.propertyName.length===0)throw new Error("PropertyBinding: can not parse propertyName from trackName: "+e);return i}static findNode(e,t){if(t===void 0||t===""||t==="."||t===-1||t===e.name||t===e.uuid)return e;if(e.skeleton){const i=e.skeleton.getBoneByName(t);if(i!==void 0)return i}if(e.children){const i=function(s){for(let l=0;l<s.length;l++){const c=s[l];if(c.name===t||c.uuid===t)return c;const d=i(c.children);if(d)return d}return null},a=i(e.children);if(a)return a}return null}_getValue_unavailable(){}_setValue_unavailable(){}_getValue_direct(e,t){e[t]=this.targetObject[this.propertyName]}_getValue_array(e,t){const i=this.resolvedProperty;for(let a=0,s=i.length;a!==s;++a)e[t++]=i[a]}_getValue_arrayElement(e,t){e[t]=this.resolvedProperty[this.propertyIndex]}_getValue_toArray(e,t){this.resolvedProperty.toArray(e,t)}_setValue_direct(e,t){this.targetObject[this.propertyName]=e[t]}_setValue_direct_setNeedsUpdate(e,t){this.targetObject[this.propertyName]=e[t],this.targetObject.needsUpdate=!0}_setValue_direct_setMatrixWorldNeedsUpdate(e,t){this.targetObject[this.propertyName]=e[t],this.targetObject.matrixWorldNeedsUpdate=!0}_setValue_array(e,t){const i=this.resolvedProperty;for(let a=0,s=i.length;a!==s;++a)i[a]=e[t++]}_setValue_array_setNeedsUpdate(e,t){const i=this.resolvedProperty;for(let a=0,s=i.length;a!==s;++a)i[a]=e[t++];this.targetObject.needsUpdate=!0}_setValue_array_setMatrixWorldNeedsUpdate(e,t){const i=this.resolvedProperty;for(let a=0,s=i.length;a!==s;++a)i[a]=e[t++];this.targetObject.matrixWorldNeedsUpdate=!0}_setValue_arrayElement(e,t){this.resolvedProperty[this.propertyIndex]=e[t]}_setValue_arrayElement_setNeedsUpdate(e,t){this.resolvedProperty[this.propertyIndex]=e[t],this.targetObject.needsUpdate=!0}_setValue_arrayElement_setMatrixWorldNeedsUpdate(e,t){this.resolvedProperty[this.propertyIndex]=e[t],this.targetObject.matrixWorldNeedsUpdate=!0}_setValue_fromArray(e,t){this.resolvedProperty.fromArray(e,t)}_setValue_fromArray_setNeedsUpdate(e,t){this.resolvedProperty.fromArray(e,t),this.targetObject.needsUpdate=!0}_setValue_fromArray_setMatrixWorldNeedsUpdate(e,t){this.resolvedProperty.fromArray(e,t),this.targetObject.matrixWorldNeedsUpdate=!0}_getValue_unbound(e,t){this.bind(),this.getValue(e,t)}_setValue_unbound(e,t){this.bind(),this.setValue(e,t)}bind(){let e=this.node;const t=this.parsedPath,i=t.objectName,a=t.propertyName;let s=t.propertyIndex;if(e||(e=Tn.findNode(this.rootNode,t.nodeName),this.node=e),this.getValue=this._getValue_unavailable,this.setValue=this._setValue_unavailable,!e){ct("PropertyBinding: No target node found for track: "+this.path+".");return}if(i){let p=t.objectIndex;switch(i){case"materials":if(!e.material){Dt("PropertyBinding: Can not bind to material as node does not have a material.",this);return}if(!e.material.materials){Dt("PropertyBinding: Can not bind to material.materials as node.material does not have a materials array.",this);return}e=e.material.materials;break;case"bones":if(!e.skeleton){Dt("PropertyBinding: Can not bind to bones as node does not have a skeleton.",this);return}e=e.skeleton.bones;for(let g=0;g<e.length;g++)if(e[g].name===p){p=g;break}break;case"map":if("map"in e){e=e.map;break}if(!e.material){Dt("PropertyBinding: Can not bind to material as node does not have a material.",this);return}if(!e.material.map){Dt("PropertyBinding: Can not bind to material.map as node.material does not have a map.",this);return}e=e.material.map;break;default:if(e[i]===void 0){Dt("PropertyBinding: Can not bind to objectName of node undefined.",this);return}e=e[i]}if(p!==void 0){if(e[p]===void 0){Dt("PropertyBinding: Trying to bind to objectIndex of objectName, but is undefined.",this,e);return}e=e[p]}}const l=e[a];if(l===void 0){const p=t.nodeName;Dt("PropertyBinding: Trying to update property for track: "+p+"."+a+" but it wasn't found.",e);return}let c=this.Versioning.None;this.targetObject=e,e.isMaterial===!0?c=this.Versioning.NeedsUpdate:e.isObject3D===!0&&(c=this.Versioning.MatrixWorldNeedsUpdate);let d=this.BindingType.Direct;if(s!==void 0){if(a==="morphTargetInfluences"){if(!e.geometry){Dt("PropertyBinding: Can not bind to morphTargetInfluences because node does not have a geometry.",this);return}if(!e.geometry.morphAttributes){Dt("PropertyBinding: Can not bind to morphTargetInfluences because node does not have a geometry.morphAttributes.",this);return}e.morphTargetDictionary[s]!==void 0&&(s=e.morphTargetDictionary[s])}d=this.BindingType.ArrayElement,this.resolvedProperty=l,this.propertyIndex=s}else l.fromArray!==void 0&&l.toArray!==void 0?(d=this.BindingType.HasFromToArray,this.resolvedProperty=l):Array.isArray(l)?(d=this.BindingType.EntireArray,this.resolvedProperty=l):this.propertyName=a;this.getValue=this.GetterByBindingType[d],this.setValue=this.SetterByBindingTypeAndVersioning[d][c]}unbind(){this.node=null,this.getValue=this._getValue_unbound,this.setValue=this._setValue_unbound}}Tn.Composite=CI,Tn.prototype.BindingType={Direct:0,EntireArray:1,ArrayElement:2,HasFromToArray:3},Tn.prototype.Versioning={None:0,NeedsUpdate:1,MatrixWorldNeedsUpdate:2},Tn.prototype.GetterByBindingType=[Tn.prototype._getValue_direct,Tn.prototype._getValue_array,Tn.prototype._getValue_arrayElement,Tn.prototype._getValue_toArray],Tn.prototype.SetterByBindingTypeAndVersioning=[[Tn.prototype._setValue_direct,Tn.prototype._setValue_direct_setNeedsUpdate,Tn.prototype._setValue_direct_setMatrixWorldNeedsUpdate],[Tn.prototype._setValue_array,Tn.prototype._setValue_array_setNeedsUpdate,Tn.prototype._setValue_array_setMatrixWorldNeedsUpdate],[Tn.prototype._setValue_arrayElement,Tn.prototype._setValue_arrayElement_setNeedsUpdate,Tn.prototype._setValue_arrayElement_setMatrixWorldNeedsUpdate],[Tn.prototype._setValue_fromArray,Tn.prototype._setValue_fromArray_setNeedsUpdate,Tn.prototype._setValue_fromArray_setMatrixWorldNeedsUpdate]];class RI{constructor(){this.isAnimationObjectGroup=!0,this.uuid=Wr(),this._objects=Array.prototype.slice.call(arguments),this.nCachedObjects_=0;const e={};this._indicesByUUID=e;for(let i=0,a=arguments.length;i!==a;++i)e[arguments[i].uuid]=i;this._paths=[],this._parsedPaths=[],this._bindings=[],this._bindingsIndicesByPath={};const t=this;this.stats={objects:{get total(){return t._objects.length},get inUse(){return this.total-t.nCachedObjects_}},get bindingsPerObject(){return t._bindings.length}}}add(){const e=this._objects,t=this._indicesByUUID,i=this._paths,a=this._parsedPaths,s=this._bindings,l=s.length;let c,d=e.length,p=this.nCachedObjects_;for(let g=0,v=arguments.length;g!==v;++g){const _=arguments[g],x=_.uuid;let S=t[x];if(S===void 0){S=d++,t[x]=S,e.push(_);for(let C=0,T=l;C!==T;++C)s[C].push(new Tn(_,i[C],a[C]))}else if(S<p){c=e[S];const C=--p,T=e[C];t[T.uuid]=S,e[S]=T,t[x]=C,e[C]=_;for(let M=0,w=l;M!==w;++M){const B=s[M],D=B[C];let P=B[S];B[S]=D,P===void 0&&(P=new Tn(_,i[M],a[M])),B[C]=P}}else e[S]!==c&&Dt("AnimationObjectGroup: Different objects with the same UUID detected. Clean the caches or recreate your infrastructure when reloading scenes.")}this.nCachedObjects_=p}remove(){const e=this._objects,t=this._indicesByUUID,i=this._bindings,a=i.length;let s=this.nCachedObjects_;for(let l=0,c=arguments.length;l!==c;++l){const d=arguments[l],p=d.uuid,g=t[p];if(g!==void 0&&g>=s){const v=s++,_=e[v];t[_.uuid]=g,e[g]=_,t[p]=v,e[v]=d;for(let x=0,S=a;x!==S;++x){const C=i[x],T=C[v],M=C[g];C[g]=T,C[v]=M}}}this.nCachedObjects_=s}uncache(){const e=this._objects,t=this._indicesByUUID,i=this._bindings,a=i.length;let s=this.nCachedObjects_,l=e.length;for(let c=0,d=arguments.length;c!==d;++c){const p=arguments[c],g=p.uuid,v=t[g];if(v!==void 0)if(delete t[g],v<s){const _=--s,x=e[_],S=--l,C=e[S];t[x.uuid]=v,e[v]=x,t[C.uuid]=_,e[_]=C,e.pop();for(let T=0,M=a;T!==M;++T){const w=i[T],B=w[_],D=w[S];w[v]=B,w[_]=D,w.pop()}}else{const _=--l,x=e[_];_>0&&(t[x.uuid]=v),e[v]=x,e.pop();for(let S=0,C=a;S!==C;++S){const T=i[S];T[v]=T[_],T.pop()}}}this.nCachedObjects_=s}subscribe_(e,t){const i=this._bindingsIndicesByPath;let a=i[e];const s=this._bindings;if(a!==void 0)return s[a];const l=this._paths,c=this._parsedPaths,d=this._objects,p=d.length,g=this.nCachedObjects_,v=new Array(p);a=s.length,i[e]=a,l.push(e),c.push(t),s.push(v);for(let _=g,x=d.length;_!==x;++_){const S=d[_];v[_]=new Tn(S,e,t)}return v}unsubscribe_(e){const t=this._bindingsIndicesByPath,i=t[e];if(i!==void 0){const a=this._paths,s=this._parsedPaths,l=this._bindings,c=l.length-1,d=l[c],p=e[c];t[p]=i,l[i]=d,l.pop(),s[i]=s[c],s.pop(),a[i]=a[c],a.pop()}}}class lR{constructor(e,t,i=null,a=t.blendMode){this._mixer=e,this._clip=t,this._localRoot=i,this.blendMode=a;const s=t.tracks,l=s.length,c=new Array(l),d={endingStart:Ku,endingEnd:Ku};for(let p=0;p!==l;++p){const g=s[p].createInterpolant(null);c[p]=g,g.settings=d}this._interpolantSettings=d,this._interpolants=c,this._propertyBindings=new Array(l),this._cacheIndex=null,this._byClipCacheIndex=null,this._timeScaleInterpolant=null,this._weightInterpolant=null,this.loop=cT,this._loopCount=-1,this._startTime=null,this.time=0,this.timeScale=1,this._effectiveTimeScale=1,this.weight=1,this._effectiveWeight=1,this.repetitions=1/0,this.paused=!1,this.enabled=!0,this.clampWhenFinished=!1,this.zeroSlopeAtStart=!0,this.zeroSlopeAtEnd=!0}play(){return this._mixer._activateAction(this),this}stop(){return this._mixer._deactivateAction(this),this.reset()}reset(){return this.paused=!1,this.enabled=!0,this.time=0,this._loopCount=-1,this._startTime=null,this.stopFading().stopWarping()}isRunning(){return this.enabled&&!this.paused&&this.timeScale!==0&&this._startTime===null&&this._mixer._isActiveAction(this)}isScheduled(){return this._mixer._isActiveAction(this)}startAt(e){return this._startTime=e,this}setLoop(e,t){return this.loop=e,this.repetitions=t,this}setEffectiveWeight(e){return this.weight=e,this._effectiveWeight=this.enabled?e:0,this.stopFading()}getEffectiveWeight(){return this._effectiveWeight}fadeIn(e){return this._scheduleFading(e,0,1)}fadeOut(e){return this._scheduleFading(e,1,0)}crossFadeFrom(e,t,i=!1){if(e.fadeOut(t),this.fadeIn(t),i===!0){const a=this._clip.duration,s=e._clip.duration,l=s/a,c=a/s;e.warp(1,l,t),this.warp(c,1,t)}return this}crossFadeTo(e,t,i=!1){return e.crossFadeFrom(this,t,i)}stopFading(){const e=this._weightInterpolant;return e!==null&&(this._weightInterpolant=null,this._mixer._takeBackControlInterpolant(e)),this}setEffectiveTimeScale(e){return this.timeScale=e,this._effectiveTimeScale=this.paused?0:e,this.stopWarping()}getEffectiveTimeScale(){return this._effectiveTimeScale}setDuration(e){return this.timeScale=this._clip.duration/e,this.stopWarping()}syncWith(e){return this.time=e.time,this.timeScale=e.timeScale,this.stopWarping()}halt(e){return this.warp(this._effectiveTimeScale,0,e)}warp(e,t,i){const a=this._mixer,s=a.time,l=this.timeScale;let c=this._timeScaleInterpolant;c===null&&(c=a._lendControlInterpolant(),this._timeScaleInterpolant=c);const d=c.parameterPositions,p=c.sampleValues;return d[0]=s,d[1]=s+i,p[0]=e/l,p[1]=t/l,this}stopWarping(){const e=this._timeScaleInterpolant;return e!==null&&(this._timeScaleInterpolant=null,this._mixer._takeBackControlInterpolant(e)),this}getMixer(){return this._mixer}getClip(){return this._clip}getRoot(){return this._localRoot||this._mixer._root}_update(e,t,i,a){if(!this.enabled){this._updateWeight(e);return}const s=this._startTime;if(s!==null){const d=(e-s)*i;d<0||i===0?t=0:(this._startTime=null,t=i*d)}t*=this._updateTimeScale(e);const l=this._updateTime(t),c=this._updateWeight(e);if(c>0){const d=this._interpolants,p=this._propertyBindings;switch(this.blendMode){case eA:for(let g=0,v=d.length;g!==v;++g)d[g].evaluate(l),p[g].accumulateAdditive(c);break;case Yv:default:for(let g=0,v=d.length;g!==v;++g)d[g].evaluate(l),p[g].accumulate(a,c)}}}_updateWeight(e){let t=0;if(this.enabled){t=this.weight;const i=this._weightInterpolant;if(i!==null){const a=i.evaluate(e)[0];t*=a,e>i.parameterPositions[1]&&(this.stopFading(),a===0&&(this.enabled=!1))}}return this._effectiveWeight=t,t}_updateTimeScale(e){let t=0;if(!this.paused){t=this.timeScale;const i=this._timeScaleInterpolant;if(i!==null){const a=i.evaluate(e)[0];t*=a,e>i.parameterPositions[1]&&(this.stopWarping(),t===0?this.paused=!0:this.timeScale=t)}}return this._effectiveTimeScale=t,t}_updateTime(e){const t=this._clip.duration,i=this.loop;let a=this.time+e,s=this._loopCount;const l=i===uT;if(e===0)return s===-1?a:l&&(s&1)===1?t-a:a;if(i===lT){s===-1&&(this._loopCount=0,this._setEndings(!0,!0,!1));e:{if(a>=t)a=t;else if(a<0)a=0;else{this.time=a;break e}this.clampWhenFinished?this.paused=!0:this.enabled=!1,this.time=a,this._mixer.dispatchEvent({type:"finished",action:this,direction:e<0?-1:1})}}else{if(s===-1&&(e>=0?(s=0,this._setEndings(!0,this.repetitions===0,l)):this._setEndings(this.repetitions===0,!0,l)),a>=t||a<0){const c=Math.floor(a/t);a-=t*c,s+=Math.abs(c);const d=this.repetitions-s;if(d<=0)this.clampWhenFinished?this.paused=!0:this.enabled=!1,a=e>0?t:0,this.time=a,this._mixer.dispatchEvent({type:"finished",action:this,direction:e>0?1:-1});else{if(d===1){const p=e<0;this._setEndings(p,!p,l)}else this._setEndings(!1,!1,l);this._loopCount=s,this.time=a,this._mixer.dispatchEvent({type:"loop",action:this,loopDelta:c})}}else this.time=a;if(l&&(s&1)===1)return t-a}return a}_setEndings(e,t,i){const a=this._interpolantSettings;i?(a.endingStart=Qu,a.endingEnd=Qu):(e?a.endingStart=this.zeroSlopeAtStart?Qu:Ku:a.endingStart=lm,t?a.endingEnd=this.zeroSlopeAtEnd?Qu:Ku:a.endingEnd=lm)}_scheduleFading(e,t,i){const a=this._mixer,s=a.time;let l=this._weightInterpolant;l===null&&(l=a._lendControlInterpolant(),this._weightInterpolant=l);const c=l.parameterPositions,d=l.sampleValues;return c[0]=s,d[0]=t,c[1]=s+e,d[1]=i,this}}const wI=new Float32Array(1);class cR extends Lo{constructor(e){super(),this._root=e,this._initMemoryManager(),this._accuIndex=0,this.time=0,this.timeScale=1}_bindAction(e,t){const i=e._localRoot||this._root,a=e._clip.tracks,s=a.length,l=e._propertyBindings,c=e._interpolants,d=i.uuid,p=this._bindingsByRootAndName;let g=p[d];g===void 0&&(g={},p[d]=g);for(let v=0;v!==s;++v){const _=a[v],x=_.name;let S=g[x];if(S!==void 0)++S.referenceCount,l[v]=S;else{if(S=l[v],S!==void 0){S._cacheIndex===null&&(++S.referenceCount,this._addInactiveBinding(S,d,x));continue}const C=t&&t._propertyBindings[v].binding.parsedPath;S=new oR(Tn.create(i,x,C),_.ValueTypeName,_.getValueSize()),++S.referenceCount,this._addInactiveBinding(S,d,x),l[v]=S}c[v].resultBuffer=S.buffer}}_activateAction(e){if(!this._isActiveAction(e)){if(e._cacheIndex===null){const i=(e._localRoot||this._root).uuid,a=e._clip.uuid,s=this._actionsByClip[a];this._bindAction(e,s&&s.knownActions[0]),this._addInactiveAction(e,a,i)}const t=e._propertyBindings;for(let i=0,a=t.length;i!==a;++i){const s=t[i];s.useCount++===0&&(this._lendBinding(s),s.saveOriginalState())}this._lendAction(e)}}_deactivateAction(e){if(this._isActiveAction(e)){const t=e._propertyBindings;for(let i=0,a=t.length;i!==a;++i){const s=t[i];--s.useCount===0&&(s.restoreOriginalState(),this._takeBackBinding(s))}this._takeBackAction(e)}}_initMemoryManager(){this._actions=[],this._nActiveActions=0,this._actionsByClip={},this._bindings=[],this._nActiveBindings=0,this._bindingsByRootAndName={},this._controlInterpolants=[],this._nActiveControlInterpolants=0;const e=this;this.stats={actions:{get total(){return e._actions.length},get inUse(){return e._nActiveActions}},bindings:{get total(){return e._bindings.length},get inUse(){return e._nActiveBindings}},controlInterpolants:{get total(){return e._controlInterpolants.length},get inUse(){return e._nActiveControlInterpolants}}}}_isActiveAction(e){const t=e._cacheIndex;return t!==null&&t<this._nActiveActions}_addInactiveAction(e,t,i){const a=this._actions,s=this._actionsByClip;let l=s[t];if(l===void 0)l={knownActions:[e],actionByRoot:{}},e._byClipCacheIndex=0,s[t]=l;else{const c=l.knownActions;e._byClipCacheIndex=c.length,c.push(e)}e._cacheIndex=a.length,a.push(e),l.actionByRoot[i]=e}_removeInactiveAction(e){const t=this._actions,i=t[t.length-1],a=e._cacheIndex;i._cacheIndex=a,t[a]=i,t.pop(),e._cacheIndex=null;const s=e._clip.uuid,l=this._actionsByClip,c=l[s],d=c.knownActions,p=d[d.length-1],g=e._byClipCacheIndex;p._byClipCacheIndex=g,d[g]=p,d.pop(),e._byClipCacheIndex=null;const v=c.actionByRoot,_=(e._localRoot||this._root).uuid;delete v[_],d.length===0&&delete l[s],this._removeInactiveBindingsForAction(e)}_removeInactiveBindingsForAction(e){const t=e._propertyBindings;for(let i=0,a=t.length;i!==a;++i){const s=t[i];--s.referenceCount===0&&this._removeInactiveBinding(s)}}_lendAction(e){const t=this._actions,i=e._cacheIndex,a=this._nActiveActions++,s=t[a];e._cacheIndex=a,t[a]=e,s._cacheIndex=i,t[i]=s}_takeBackAction(e){const t=this._actions,i=e._cacheIndex,a=--this._nActiveActions,s=t[a];e._cacheIndex=a,t[a]=e,s._cacheIndex=i,t[i]=s}_addInactiveBinding(e,t,i){const a=this._bindingsByRootAndName,s=this._bindings;let l=a[t];l===void 0&&(l={},a[t]=l),l[i]=e,e._cacheIndex=s.length,s.push(e)}_removeInactiveBinding(e){const t=this._bindings,i=e.binding,a=i.rootNode.uuid,s=i.path,l=this._bindingsByRootAndName,c=l[a],d=t[t.length-1],p=e._cacheIndex;d._cacheIndex=p,t[p]=d,t.pop(),delete c[s],Object.keys(c).length===0&&delete l[a]}_lendBinding(e){const t=this._bindings,i=e._cacheIndex,a=this._nActiveBindings++,s=t[a];e._cacheIndex=a,t[a]=e,s._cacheIndex=i,t[i]=s}_takeBackBinding(e){const t=this._bindings,i=e._cacheIndex,a=--this._nActiveBindings,s=t[a];e._cacheIndex=a,t[a]=e,s._cacheIndex=i,t[i]=s}_lendControlInterpolant(){const e=this._controlInterpolants,t=this._nActiveControlInterpolants++;let i=e[t];return i===void 0&&(i=new oS(new Float32Array(2),new Float32Array(2),1,wI),i.__cacheIndex=t,e[t]=i),i}_takeBackControlInterpolant(e){const t=this._controlInterpolants,i=e.__cacheIndex,a=--this._nActiveControlInterpolants,s=t[a];e.__cacheIndex=a,t[a]=e,s.__cacheIndex=i,t[i]=s}clipAction(e,t,i){const a=t||this._root,s=a.uuid;let l=typeof e=="string"?hd.findByName(a,e):e;const c=l!==null?l.uuid:e,d=this._actionsByClip[c];let p=null;if(i===void 0&&(l!==null?i=l.blendMode:i=Yv),d!==void 0){const v=d.actionByRoot[s];if(v!==void 0&&v.blendMode===i)return v;p=d.knownActions[0],l===null&&(l=p._clip)}if(l===null)return null;const g=new lR(this,l,t,i);return this._bindAction(g,p),this._addInactiveAction(g,c,s),g}existingAction(e,t){const i=t||this._root,a=i.uuid,s=typeof e=="string"?hd.findByName(i,e):e,l=s?s.uuid:e,c=this._actionsByClip[l];return c!==void 0&&c.actionByRoot[a]||null}stopAllAction(){const e=this._actions,t=this._nActiveActions;for(let i=t-1;i>=0;--i)e[i].stop();return this}update(e){e*=this.timeScale;const t=this._actions,i=this._nActiveActions,a=this.time+=e,s=Math.sign(e),l=this._accuIndex^=1;for(let p=0;p!==i;++p)t[p]._update(a,e,s,l);const c=this._bindings,d=this._nActiveBindings;for(let p=0;p!==d;++p)c[p].apply(l);return this}setTime(e){this.time=0;for(let t=0;t<this._actions.length;t++)this._actions[t].time=0;return this.update(e)}getRoot(){return this._root}uncacheClip(e){const t=this._actions,i=e.uuid,a=this._actionsByClip,s=a[i];if(s!==void 0){const l=s.knownActions;for(let c=0,d=l.length;c!==d;++c){const p=l[c];this._deactivateAction(p);const g=p._cacheIndex,v=t[t.length-1];p._cacheIndex=null,p._byClipCacheIndex=null,v._cacheIndex=g,t[g]=v,t.pop(),this._removeInactiveBindingsForAction(p)}delete a[i]}}uncacheRoot(e){const t=e.uuid,i=this._actionsByClip;for(const l in i){const c=i[l].actionByRoot,d=c[t];d!==void 0&&(this._deactivateAction(d),this._removeInactiveAction(d))}const a=this._bindingsByRootAndName,s=a[t];if(s!==void 0)for(const l in s){const c=s[l];c.restoreOriginalState(),this._removeInactiveBinding(c)}}uncacheAction(e,t){const i=this.existingAction(e,t);i!==null&&(this._deactivateAction(i),this._removeInactiveAction(i))}}class BI extends cA{constructor(e=1,t=1,i=1,a={}){super(e,t,a),this.isRenderTarget3D=!0,this.depth=i,this.texture=new Qv(null,e,t,i),this._setTextureOptions(a),this.texture.isRenderTargetTexture=!0}}class AS{constructor(e){this.value=e}clone(){return new AS(this.value.clone===void 0?this.value:this.value.clone())}}let DI=0;class OI extends Lo{constructor(){super(),this.isUniformsGroup=!0,Object.defineProperty(this,"id",{value:DI++}),this.name="",this.usage=um,this.uniforms=[]}add(e){return this.uniforms.push(e),this}remove(e){const t=this.uniforms.indexOf(e);return t!==-1&&this.uniforms.splice(t,1),this}setName(e){return this.name=e,this}setUsage(e){return this.usage=e,this}dispose(){this.dispatchEvent({type:"dispose"})}copy(e){this.name=e.name,this.usage=e.usage;const t=e.uniforms;this.uniforms.length=0;for(let i=0,a=t.length;i<a;i++){const s=Array.isArray(t[i])?t[i]:[t[i]];for(let l=0;l<s.length;l++)this.uniforms.push(s[l].clone())}return this}clone(){return new this.constructor().copy(this)}}class NI extends xm{constructor(e,t,i=1){super(e,t),this.isInstancedInterleavedBuffer=!0,this.meshPerAttribute=i}copy(e){return super.copy(e),this.meshPerAttribute=e.meshPerAttribute,this}clone(e){const t=super.clone(e);return t.meshPerAttribute=this.meshPerAttribute,t}toJSON(e){const t=super.toJSON(e);return t.isInstancedInterleavedBuffer=!0,t.meshPerAttribute=this.meshPerAttribute,t}}class UI{constructor(e,t,i,a,s,l=!1){this.isGLBufferAttribute=!0,this.name="",this.buffer=e,this.type=t,this.itemSize=i,this.elementSize=a,this.count=s,this.normalized=l,this.version=0}set needsUpdate(e){e===!0&&this.version++}setBuffer(e){return this.buffer=e,this}setType(e,t){return this.type=e,this.elementSize=t,this}setItemSize(e){return this.itemSize=e,this}setCount(e){return this.count=e,this}}const uR=new It;class fR{constructor(e,t,i=0,a=1/0){this.ray=new jh(e,t),this.near=i,this.far=a,this.camera=null,this.layers=new qh,this.params={Mesh:{},Line:{threshold:1},LOD:{},Points:{threshold:1},Sprite:{}}}set(e,t){this.ray.set(e,t)}setFromCamera(e,t){t.isPerspectiveCamera?(this.ray.origin.setFromMatrixPosition(t.matrixWorld),this.ray.direction.set(e.x,e.y,.5).unproject(t).sub(this.ray.origin).normalize(),this.camera=t):t.isOrthographicCamera?(this.ray.origin.set(e.x,e.y,(t.near+t.far)/(t.near-t.far)).unproject(t),this.ray.direction.set(0,0,-1).transformDirection(t.matrixWorld),this.camera=t):Dt("Raycaster: Unsupported camera type: "+t.type)}setFromXRController(e){return uR.identity().extractRotation(e.matrixWorld),this.ray.origin.setFromMatrixPosition(e.matrixWorld),this.ray.direction.set(0,0,-1).applyMatrix4(uR),this}intersectObject(e,t=!0,i=[]){return SS(e,this,i,t),i.sort(hR),i}intersectObjects(e,t=!0,i=[]){for(let a=0,s=e.length;a<s;a++)SS(e[a],this,i,t);return i.sort(hR),i}}function hR(n,e){return n.distance-e.distance}function SS(n,e,t,i){let a=!0;if(n.layers.test(e.layers)&&n.raycast(e,t)===!1&&(a=!1),a===!0&&i===!0){const s=n.children;for(let l=0,c=s.length;l<c;l++)SS(s[l],e,t,!0)}}class LI{constructor(){this._previousTime=0,this._currentTime=0,this._startTime=performance.now(),this._delta=0,this._elapsed=0,this._timescale=1,this._document=null,this._pageVisibilityHandler=null}connect(e){this._document=e,e.hidden!==void 0&&(this._pageVisibilityHandler=II.bind(this),e.addEventListener("visibilitychange",this._pageVisibilityHandler,!1))}disconnect(){this._pageVisibilityHandler!==null&&(this._document.removeEventListener("visibilitychange",this._pageVisibilityHandler),this._pageVisibilityHandler=null),this._document=null}getDelta(){return this._delta/1e3}getElapsed(){return this._elapsed/1e3}getTimescale(){return this._timescale}setTimescale(e){return this._timescale=e,this}reset(){return this._currentTime=performance.now()-this._startTime,this}dispose(){this.disconnect()}update(e){return this._pageVisibilityHandler!==null&&this._document.hidden===!0?this._delta=0:(this._previousTime=this._currentTime,this._currentTime=(e!==void 0?e:performance.now())-this._startTime,this._delta=(this._currentTime-this._previousTime)*this._timescale,this._elapsed+=this._delta),this}}function II(){this._document.hidden===!1&&this.reset()}class dR{constructor(e=1,t=0,i=0){this.radius=e,this.phi=t,this.theta=i}set(e,t,i){return this.radius=e,this.phi=t,this.theta=i,this}copy(e){return this.radius=e.radius,this.phi=e.phi,this.theta=e.theta,this}makeSafe(){return this.phi=jt(this.phi,1e-6,Math.PI-1e-6),this}setFromVector3(e){return this.setFromCartesianCoords(e.x,e.y,e.z)}setFromCartesianCoords(e,t,i){return this.radius=Math.sqrt(e*e+t*t+i*i),this.radius===0?(this.theta=0,this.phi=0):(this.theta=Math.atan2(e,i),this.phi=Math.acos(jt(t/this.radius,-1,1))),this}clone(){return new this.constructor().copy(this)}}class PI{constructor(e=1,t=0,i=0){this.radius=e,this.theta=t,this.y=i}set(e,t,i){return this.radius=e,this.theta=t,this.y=i,this}copy(e){return this.radius=e.radius,this.theta=e.theta,this.y=e.y,this}setFromVector3(e){return this.setFromCartesianCoords(e.x,e.y,e.z)}setFromCartesianCoords(e,t,i){return this.radius=Math.sqrt(e*e+i*i),this.theta=Math.atan2(e,i),this.y=t,this}clone(){return new this.constructor().copy(this)}}class MS{constructor(e,t,i,a){MS.prototype.isMatrix2=!0,this.elements=[1,0,0,1],e!==void 0&&this.set(e,t,i,a)}identity(){return this.set(1,0,0,1),this}fromArray(e,t=0){for(let i=0;i<4;i++)this.elements[i]=e[i+t];return this}set(e,t,i,a){const s=this.elements;return s[0]=e,s[2]=t,s[1]=i,s[3]=a,this}}const pR=new He;class FI{constructor(e=new He(1/0,1/0),t=new He(-1/0,-1/0)){this.isBox2=!0,this.min=e,this.max=t}set(e,t){return this.min.copy(e),this.max.copy(t),this}setFromPoints(e){this.makeEmpty();for(let t=0,i=e.length;t<i;t++)this.expandByPoint(e[t]);return this}setFromCenterAndSize(e,t){const i=pR.copy(t).multiplyScalar(.5);return this.min.copy(e).sub(i),this.max.copy(e).add(i),this}clone(){return new this.constructor().copy(this)}copy(e){return this.min.copy(e.min),this.max.copy(e.max),this}makeEmpty(){return this.min.x=this.min.y=1/0,this.max.x=this.max.y=-1/0,this}isEmpty(){return this.max.x<this.min.x||this.max.y<this.min.y}getCenter(e){return this.isEmpty()?e.set(0,0):e.addVectors(this.min,this.max).multiplyScalar(.5)}getSize(e){return this.isEmpty()?e.set(0,0):e.subVectors(this.max,this.min)}expandByPoint(e){return this.min.min(e),this.max.max(e),this}expandByVector(e){return this.min.sub(e),this.max.add(e),this}expandByScalar(e){return this.min.addScalar(-e),this.max.addScalar(e),this}containsPoint(e){return e.x>=this.min.x&&e.x<=this.max.x&&e.y>=this.min.y&&e.y<=this.max.y}containsBox(e){return this.min.x<=e.min.x&&e.max.x<=this.max.x&&this.min.y<=e.min.y&&e.max.y<=this.max.y}getParameter(e,t){return t.set((e.x-this.min.x)/(this.max.x-this.min.x),(e.y-this.min.y)/(this.max.y-this.min.y))}intersectsBox(e){return e.max.x>=this.min.x&&e.min.x<=this.max.x&&e.max.y>=this.min.y&&e.min.y<=this.max.y}clampPoint(e,t){return t.copy(e).clamp(this.min,this.max)}distanceToPoint(e){return this.clampPoint(e,pR).distanceTo(e)}intersect(e){return this.min.max(e.min),this.max.min(e.max),this.isEmpty()&&this.makeEmpty(),this}union(e){return this.min.min(e.min),this.max.max(e.max),this}translate(e){return this.min.add(e),this.max.add(e),this}equals(e){return e.min.equals(this.min)&&e.max.equals(this.max)}}const mR=new K,s_=new K,md=new K,gd=new K,ES=new K,zI=new K,HI=new K;class GI{constructor(e=new K,t=new K){this.start=e,this.end=t}set(e,t){return this.start.copy(e),this.end.copy(t),this}copy(e){return this.start.copy(e.start),this.end.copy(e.end),this}getCenter(e){return e.addVectors(this.start,this.end).multiplyScalar(.5)}delta(e){return e.subVectors(this.end,this.start)}distanceSq(){return this.start.distanceToSquared(this.end)}distance(){return this.start.distanceTo(this.end)}at(e,t){return this.delta(t).multiplyScalar(e).add(this.start)}closestPointToPointParameter(e,t){mR.subVectors(e,this.start),s_.subVectors(this.end,this.start);const i=s_.dot(s_);let s=s_.dot(mR)/i;return t&&(s=jt(s,0,1)),s}closestPointToPoint(e,t,i){const a=this.closestPointToPointParameter(e,t);return this.delta(i).multiplyScalar(a).add(this.start)}distanceSqToLine3(e,t=zI,i=HI){const a=10000000000000001e-32;let s,l;const c=this.start,d=e.start,p=this.end,g=e.end;md.subVectors(p,c),gd.subVectors(g,d),ES.subVectors(c,d);const v=md.dot(md),_=gd.dot(gd),x=gd.dot(ES);if(v<=a&&_<=a)return t.copy(c),i.copy(d),t.sub(i),t.dot(t);if(v<=a)s=0,l=x/_,l=jt(l,0,1);else{const S=md.dot(ES);if(_<=a)l=0,s=jt(-S/v,0,1);else{const C=md.dot(gd),T=v*_-C*C;T!==0?s=jt((C*x-S*_)/T,0,1):s=0,l=(C*s+x)/_,l<0?(l=0,s=jt(-S/v,0,1)):l>1&&(l=1,s=jt((C-S)/v,0,1))}}return t.copy(c).add(md.multiplyScalar(s)),i.copy(d).add(gd.multiplyScalar(l)),t.sub(i),t.dot(t)}applyMatrix4(e){return this.start.applyMatrix4(e),this.end.applyMatrix4(e),this}equals(e){return e.start.equals(this.start)&&e.end.equals(this.end)}clone(){return new this.constructor().copy(this)}}const gR=new K;class VI extends dn{constructor(e,t){super(),this.light=e,this.matrixAutoUpdate=!1,this.color=t,this.type="SpotLightHelper";const i=new Jt,a=[0,0,0,0,0,1,0,0,0,1,0,1,0,0,0,-1,0,1,0,0,0,0,1,1,0,0,0,0,-1,1];for(let l=0,c=1,d=32;l<d;l++,c++){const p=l/d*Math.PI*2,g=c/d*Math.PI*2;a.push(Math.cos(p),Math.sin(p),1,Math.cos(g),Math.sin(g),1)}i.setAttribute("position",new _t(a,3));const s=new Fa({fog:!1,toneMapped:!1});this.cone=new Zs(i,s),this.add(this.cone),this.update()}dispose(){this.cone.geometry.dispose(),this.cone.material.dispose()}update(){this.light.updateWorldMatrix(!0,!1),this.light.target.updateWorldMatrix(!0,!1),this.parent?(this.parent.updateWorldMatrix(!0),this.matrix.copy(this.parent.matrixWorld).invert().multiply(this.light.matrixWorld)):this.matrix.copy(this.light.matrixWorld),this.matrixWorld.copy(this.light.matrixWorld);const e=this.light.distance?this.light.distance:1e3,t=e*Math.tan(this.light.angle);this.cone.scale.set(t,t,e),gR.setFromMatrixPosition(this.light.target.matrixWorld),this.cone.lookAt(gR),this.color!==void 0?this.cone.material.color.set(this.color):this.cone.material.color.copy(this.light.color)}}const Kc=new K,o_=new It,TS=new It;class kI extends Zs{constructor(e){const t=vR(e),i=new Jt,a=[],s=[];for(let p=0;p<t.length;p++){const g=t[p];g.parent&&g.parent.isBone&&(a.push(0,0,0),a.push(0,0,0),s.push(0,0,0),s.push(0,0,0))}i.setAttribute("position",new _t(a,3)),i.setAttribute("color",new _t(s,3));const l=new Fa({vertexColors:!0,depthTest:!1,depthWrite:!1,toneMapped:!1,transparent:!0});super(i,l),this.isSkeletonHelper=!0,this.type="SkeletonHelper",this.root=e,this.bones=t,this.matrix=e.matrixWorld,this.matrixAutoUpdate=!1;const c=new st(255),d=new st(65280);this.setColors(c,d)}updateMatrixWorld(e){const t=this.bones,i=this.geometry,a=i.getAttribute("position");TS.copy(this.root.matrixWorld).invert();for(let s=0,l=0;s<t.length;s++){const c=t[s];c.parent&&c.parent.isBone&&(o_.multiplyMatrices(TS,c.matrixWorld),Kc.setFromMatrixPosition(o_),a.setXYZ(l,Kc.x,Kc.y,Kc.z),o_.multiplyMatrices(TS,c.parent.matrixWorld),Kc.setFromMatrixPosition(o_),a.setXYZ(l+1,Kc.x,Kc.y,Kc.z),l+=2)}i.getAttribute("position").needsUpdate=!0,super.updateMatrixWorld(e)}setColors(e,t){const a=this.geometry.getAttribute("color");for(let s=0;s<a.count;s+=2)a.setXYZ(s,e.r,e.g,e.b),a.setXYZ(s+1,t.r,t.g,t.b);return a.needsUpdate=!0,this}dispose(){this.geometry.dispose(),this.material.dispose()}}function vR(n){const e=[];n.isBone===!0&&e.push(n);for(let t=0;t<n.children.length;t++)e.push(...vR(n.children[t]));return e}class XI extends Ii{constructor(e,t,i){const a=new Fm(t,4,2),s=new Qr({wireframe:!0,fog:!1,toneMapped:!1});super(a,s),this.light=e,this.color=i,this.type="PointLightHelper",this.matrix=this.light.matrixWorld,this.matrixAutoUpdate=!1,this.update()}dispose(){this.geometry.dispose(),this.material.dispose()}update(){this.light.updateWorldMatrix(!0,!1),this.color!==void 0?this.material.color.set(this.color):this.material.color.copy(this.light.color)}}const jI=new K,yR=new st,_R=new st;class YI extends dn{constructor(e,t,i){super(),this.light=e,this.matrix=e.matrixWorld,this.matrixAutoUpdate=!1,this.color=i,this.type="HemisphereLightHelper";const a=new Pm(t);a.rotateY(Math.PI*.5),this.material=new Qr({wireframe:!0,fog:!1,toneMapped:!1}),this.color===void 0&&(this.material.vertexColors=!0);const s=a.getAttribute("position"),l=new Float32Array(s.count*3);a.setAttribute("color",new Rn(l,3)),this.add(new Ii(a,this.material)),this.update()}dispose(){this.children[0].geometry.dispose(),this.children[0].material.dispose()}update(){const e=this.children[0];if(this.color!==void 0)this.material.color.set(this.color);else{const t=e.geometry.getAttribute("color");yR.copy(this.light.color),_R.copy(this.light.groundColor);for(let i=0,a=t.count;i<a;i++){const s=i<a/2?yR:_R;t.setXYZ(i,s.r,s.g,s.b)}t.needsUpdate=!0}this.light.updateWorldMatrix(!0,!1),e.lookAt(jI.setFromMatrixPosition(this.light.matrixWorld).negate())}}class qI extends Zs{constructor(e=10,t=10,i=4473924,a=8947848){i=new st(i),a=new st(a);const s=t/2,l=e/t,c=e/2,d=[],p=[];for(let _=0,x=0,S=-c;_<=t;_++,S+=l){d.push(-c,0,S,c,0,S),d.push(S,0,-c,S,0,c);const C=_===s?i:a;C.toArray(p,x),x+=3,C.toArray(p,x),x+=3,C.toArray(p,x),x+=3,C.toArray(p,x),x+=3}const g=new Jt;g.setAttribute("position",new _t(d,3)),g.setAttribute("color",new _t(p,3));const v=new Fa({vertexColors:!0,toneMapped:!1});super(g,v),this.type="GridHelper"}dispose(){this.geometry.dispose(),this.material.dispose()}}class WI extends Zs{constructor(e=10,t=16,i=8,a=64,s=4473924,l=8947848){s=new st(s),l=new st(l);const c=[],d=[];if(t>1)for(let v=0;v<t;v++){const _=v/t*(Math.PI*2),x=Math.sin(_)*e,S=Math.cos(_)*e;c.push(0,0,0),c.push(x,0,S);const C=v&1?s:l;d.push(C.r,C.g,C.b),d.push(C.r,C.g,C.b)}for(let v=0;v<i;v++){const _=v&1?s:l,x=e-e/i*v;for(let S=0;S<a;S++){let C=S/a*(Math.PI*2),T=Math.sin(C)*x,M=Math.cos(C)*x;c.push(T,0,M),d.push(_.r,_.g,_.b),C=(S+1)/a*(Math.PI*2),T=Math.sin(C)*x,M=Math.cos(C)*x,c.push(T,0,M),d.push(_.r,_.g,_.b)}}const p=new Jt;p.setAttribute("position",new _t(c,3)),p.setAttribute("color",new _t(d,3));const g=new Fa({vertexColors:!0,toneMapped:!1});super(p,g),this.type="PolarGridHelper"}dispose(){this.geometry.dispose(),this.material.dispose()}}const xR=new K,l_=new K,bR=new K;class JI extends dn{constructor(e,t,i){super(),this.light=e,this.matrix=e.matrixWorld,this.matrixAutoUpdate=!1,this.color=i,this.type="DirectionalLightHelper",t===void 0&&(t=1);let a=new Jt;a.setAttribute("position",new _t([-t,t,0,t,t,0,t,-t,0,-t,-t,0,-t,t,0],3));const s=new Fa({fog:!1,toneMapped:!1});this.lightPlane=new Il(a,s),this.add(this.lightPlane),a=new Jt,a.setAttribute("position",new _t([0,0,0,0,0,1],3)),this.targetLine=new Il(a,s),this.add(this.targetLine),this.update()}dispose(){this.lightPlane.geometry.dispose(),this.lightPlane.material.dispose(),this.targetLine.geometry.dispose(),this.targetLine.material.dispose()}update(){this.light.updateWorldMatrix(!0,!1),this.light.target.updateWorldMatrix(!0,!1),xR.setFromMatrixPosition(this.light.matrixWorld),l_.setFromMatrixPosition(this.light.target.matrixWorld),bR.subVectors(l_,xR),this.lightPlane.lookAt(l_),this.color!==void 0?(this.lightPlane.material.color.set(this.color),this.targetLine.material.color.set(this.color)):(this.lightPlane.material.color.copy(this.light.color),this.targetLine.material.color.copy(this.light.color)),this.targetLine.lookAt(l_),this.targetLine.scale.z=bR.length()}}const c_=new K,Ti=new py;class KI extends Zs{constructor(e){const t=new Jt,i=new Fa({color:16777215,vertexColors:!0,toneMapped:!1}),a=[],s=[],l={};c("n1","n2"),c("n2","n4"),c("n4","n3"),c("n3","n1"),c("f1","f2"),c("f2","f4"),c("f4","f3"),c("f3","f1"),c("n1","f1"),c("n2","f2"),c("n3","f3"),c("n4","f4"),c("p","n1"),c("p","n2"),c("p","n3"),c("p","n4"),c("u1","u2"),c("u2","u3"),c("u3","u1"),c("c","t"),c("p","c"),c("cn1","cn2"),c("cn3","cn4"),c("cf1","cf2"),c("cf3","cf4");function c(S,C){d(S),d(C)}function d(S){a.push(0,0,0),s.push(0,0,0),l[S]===void 0&&(l[S]=[]),l[S].push(a.length/3-1)}t.setAttribute("position",new _t(a,3)),t.setAttribute("color",new _t(s,3)),super(t,i),this.type="CameraHelper",this.camera=e,this.camera.updateProjectionMatrix&&this.camera.updateProjectionMatrix(),this.matrix=e.matrixWorld,this.matrixAutoUpdate=!1,this.pointMap=l,this.update();const p=new st(16755200),g=new st(16711680),v=new st(43775),_=new st(16777215),x=new st(3355443);this.setColors(p,g,v,_,x)}setColors(e,t,i,a,s){const c=this.geometry.getAttribute("color");return c.setXYZ(0,e.r,e.g,e.b),c.setXYZ(1,e.r,e.g,e.b),c.setXYZ(2,e.r,e.g,e.b),c.setXYZ(3,e.r,e.g,e.b),c.setXYZ(4,e.r,e.g,e.b),c.setXYZ(5,e.r,e.g,e.b),c.setXYZ(6,e.r,e.g,e.b),c.setXYZ(7,e.r,e.g,e.b),c.setXYZ(8,e.r,e.g,e.b),c.setXYZ(9,e.r,e.g,e.b),c.setXYZ(10,e.r,e.g,e.b),c.setXYZ(11,e.r,e.g,e.b),c.setXYZ(12,e.r,e.g,e.b),c.setXYZ(13,e.r,e.g,e.b),c.setXYZ(14,e.r,e.g,e.b),c.setXYZ(15,e.r,e.g,e.b),c.setXYZ(16,e.r,e.g,e.b),c.setXYZ(17,e.r,e.g,e.b),c.setXYZ(18,e.r,e.g,e.b),c.setXYZ(19,e.r,e.g,e.b),c.setXYZ(20,e.r,e.g,e.b),c.setXYZ(21,e.r,e.g,e.b),c.setXYZ(22,e.r,e.g,e.b),c.setXYZ(23,e.r,e.g,e.b),c.setXYZ(24,t.r,t.g,t.b),c.setXYZ(25,t.r,t.g,t.b),c.setXYZ(26,t.r,t.g,t.b),c.setXYZ(27,t.r,t.g,t.b),c.setXYZ(28,t.r,t.g,t.b),c.setXYZ(29,t.r,t.g,t.b),c.setXYZ(30,t.r,t.g,t.b),c.setXYZ(31,t.r,t.g,t.b),c.setXYZ(32,i.r,i.g,i.b),c.setXYZ(33,i.r,i.g,i.b),c.setXYZ(34,i.r,i.g,i.b),c.setXYZ(35,i.r,i.g,i.b),c.setXYZ(36,i.r,i.g,i.b),c.setXYZ(37,i.r,i.g,i.b),c.setXYZ(38,a.r,a.g,a.b),c.setXYZ(39,a.r,a.g,a.b),c.setXYZ(40,s.r,s.g,s.b),c.setXYZ(41,s.r,s.g,s.b),c.setXYZ(42,s.r,s.g,s.b),c.setXYZ(43,s.r,s.g,s.b),c.setXYZ(44,s.r,s.g,s.b),c.setXYZ(45,s.r,s.g,s.b),c.setXYZ(46,s.r,s.g,s.b),c.setXYZ(47,s.r,s.g,s.b),c.setXYZ(48,s.r,s.g,s.b),c.setXYZ(49,s.r,s.g,s.b),c.needsUpdate=!0,this}update(){const e=this.geometry,t=this.pointMap,i=1,a=1;let s,l;if(Ti.projectionMatrixInverse.copy(this.camera.projectionMatrixInverse),this.camera.reversedDepth===!0)s=1,l=0;else if(this.camera.coordinateSystem===qr)s=-1,l=1;else if(this.camera.coordinateSystem===Ih)s=0,l=1;else throw new Error("THREE.CameraHelper.update(): Invalid coordinate system: "+this.camera.coordinateSystem);Pi("c",t,e,Ti,0,0,s),Pi("t",t,e,Ti,0,0,l),Pi("n1",t,e,Ti,-i,-a,s),Pi("n2",t,e,Ti,i,-a,s),Pi("n3",t,e,Ti,-i,a,s),Pi("n4",t,e,Ti,i,a,s),Pi("f1",t,e,Ti,-i,-a,l),Pi("f2",t,e,Ti,i,-a,l),Pi("f3",t,e,Ti,-i,a,l),Pi("f4",t,e,Ti,i,a,l),Pi("u1",t,e,Ti,i*.7,a*1.1,s),Pi("u2",t,e,Ti,-i*.7,a*1.1,s),Pi("u3",t,e,Ti,0,a*2,s),Pi("cf1",t,e,Ti,-i,0,l),Pi("cf2",t,e,Ti,i,0,l),Pi("cf3",t,e,Ti,0,-a,l),Pi("cf4",t,e,Ti,0,a,l),Pi("cn1",t,e,Ti,-i,0,s),Pi("cn2",t,e,Ti,i,0,s),Pi("cn3",t,e,Ti,0,-a,s),Pi("cn4",t,e,Ti,0,a,s),e.getAttribute("position").needsUpdate=!0}dispose(){this.geometry.dispose(),this.material.dispose()}}function Pi(n,e,t,i,a,s,l){c_.set(a,s,l).unproject(i);const c=e[n];if(c!==void 0){const d=t.getAttribute("position");for(let p=0,g=c.length;p<g;p++)d.setXYZ(c[p],c_.x,c_.y,c_.z)}}const u_=new Sa;class QI extends Zs{constructor(e,t=16776960){const i=new Uint16Array([0,1,1,2,2,3,3,0,4,5,5,6,6,7,7,4,0,4,1,5,2,6,3,7]),a=new Float32Array(24),s=new Jt;s.setIndex(new Rn(i,1)),s.setAttribute("position",new Rn(a,3)),super(s,new Fa({color:t,toneMapped:!1})),this.object=e,this.type="BoxHelper",this.matrixAutoUpdate=!1,this.update()}update(){if(this.object!==void 0&&u_.setFromObject(this.object),u_.isEmpty())return;const e=u_.min,t=u_.max,i=this.geometry.attributes.position,a=i.array;a[0]=t.x,a[1]=t.y,a[2]=t.z,a[3]=e.x,a[4]=t.y,a[5]=t.z,a[6]=e.x,a[7]=e.y,a[8]=t.z,a[9]=t.x,a[10]=e.y,a[11]=t.z,a[12]=t.x,a[13]=t.y,a[14]=e.z,a[15]=e.x,a[16]=t.y,a[17]=e.z,a[18]=e.x,a[19]=e.y,a[20]=e.z,a[21]=t.x,a[22]=e.y,a[23]=e.z,i.needsUpdate=!0,this.geometry.computeBoundingSphere()}setFromObject(e){return this.object=e,this.update(),this}copy(e,t){return super.copy(e,t),this.object=e.object,this}dispose(){this.geometry.dispose(),this.material.dispose()}}class ZI extends Zs{constructor(e,t=16776960){const i=new Uint16Array([0,1,1,2,2,3,3,0,4,5,5,6,6,7,7,4,0,4,1,5,2,6,3,7]),a=[1,1,1,-1,1,1,-1,-1,1,1,-1,1,1,1,-1,-1,1,-1,-1,-1,-1,1,-1,-1],s=new Jt;s.setIndex(new Rn(i,1)),s.setAttribute("position",new _t(a,3)),super(s,new Fa({color:t,toneMapped:!1})),this.box=e,this.type="Box3Helper",this.geometry.computeBoundingSphere()}updateMatrixWorld(e){const t=this.box;t.isEmpty()||(t.getCenter(this.position),t.getSize(this.scale),this.scale.multiplyScalar(.5),super.updateMatrixWorld(e))}dispose(){this.geometry.dispose(),this.material.dispose()}}class $I extends Il{constructor(e,t=1,i=16776960){const a=i,s=[1,-1,0,-1,1,0,-1,-1,0,1,1,0,-1,1,0,-1,-1,0,1,-1,0,1,1,0],l=new Jt;l.setAttribute("position",new _t(s,3)),l.computeBoundingSphere(),super(l,new Fa({color:a,toneMapped:!1})),this.type="PlaneHelper",this.plane=e,this.size=t;const c=[1,1,0,-1,1,0,-1,-1,0,1,1,0,-1,-1,0,1,-1,0],d=new Jt;d.setAttribute("position",new _t(c,3)),d.computeBoundingSphere(),this.add(new Ii(d,new Qr({color:a,opacity:.2,transparent:!0,depthWrite:!1,toneMapped:!1})))}updateMatrixWorld(e){this.position.set(0,0,0),this.scale.set(.5*this.size,.5*this.size,1),this.lookAt(this.plane.normal),this.translateZ(-this.plane.constant),super.updateMatrixWorld(e)}dispose(){this.geometry.dispose(),this.material.dispose(),this.children[0].geometry.dispose(),this.children[0].material.dispose()}}const AR=new K;let f_,CS;class eP extends dn{constructor(e=new K(0,0,1),t=new K(0,0,0),i=1,a=16776960,s=i*.2,l=s*.2){super(),this.type="ArrowHelper",f_===void 0&&(f_=new Jt,f_.setAttribute("position",new _t([0,0,0,0,1,0],3)),CS=new Bm(.5,1,5,1),CS.translate(0,-.5,0)),this.position.copy(t),this.line=new Il(f_,new Fa({color:a,toneMapped:!1})),this.line.matrixAutoUpdate=!1,this.add(this.line),this.cone=new Ii(CS,new Qr({color:a,toneMapped:!1})),this.cone.matrixAutoUpdate=!1,this.add(this.cone),this.setDirection(e),this.setLength(i,s,l)}setDirection(e){if(e.y>.99999)this.quaternion.set(0,0,0,1);else if(e.y<-.99999)this.quaternion.set(1,0,0,0);else{AR.set(e.z,0,-e.x).normalize();const t=Math.acos(e.y);this.quaternion.setFromAxisAngle(AR,t)}}setLength(e,t=e*.2,i=t*.2){this.line.scale.set(1,Math.max(1e-4,e-t),1),this.line.updateMatrix(),this.cone.scale.set(i,t,i),this.cone.position.y=e,this.cone.updateMatrix()}setColor(e){this.line.material.color.set(e),this.cone.material.color.set(e)}copy(e){return super.copy(e,!1),this.line.copy(e.line),this.cone.copy(e.cone),this}dispose(){this.line.geometry.dispose(),this.line.material.dispose(),this.cone.geometry.dispose(),this.cone.material.dispose()}}class tP extends Zs{constructor(e=1){const t=[0,0,0,e,0,0,0,0,0,0,e,0,0,0,0,0,0,e],i=[1,0,0,1,.6,0,0,1,0,.6,1,0,0,0,1,0,.6,1],a=new Jt;a.setAttribute("position",new _t(t,3)),a.setAttribute("color",new _t(i,3));const s=new Fa({vertexColors:!0,toneMapped:!1});super(a,s),this.type="AxesHelper"}setColors(e,t,i){const a=new st,s=this.geometry.attributes.color.array;return a.set(e),a.toArray(s,0),a.toArray(s,3),a.set(t),a.toArray(s,6),a.toArray(s,9),a.set(i),a.toArray(s,12),a.toArray(s,15),this.geometry.attributes.color.needsUpdate=!0,this}dispose(){this.geometry.dispose(),this.material.dispose()}}class nP{constructor(){this.type="ShapePath",this.color=new st,this.subPaths=[],this.currentPath=null}moveTo(e,t){return this.currentPath=new Yy,this.subPaths.push(this.currentPath),this.currentPath.moveTo(e,t),this}lineTo(e,t){return this.currentPath.lineTo(e,t),this}quadraticCurveTo(e,t,i,a){return this.currentPath.quadraticCurveTo(e,t,i,a),this}bezierCurveTo(e,t,i,a,s,l){return this.currentPath.bezierCurveTo(e,t,i,a,s,l),this}splineThru(e){return this.currentPath.splineThru(e),this}toShapes(e){function t(M){const w=[];for(let B=0,D=M.length;B<D;B++){const P=M[B],U=new cf;U.curves=P.curves,w.push(U)}return w}function i(M,w){const B=w.length;let D=!1;for(let P=B-1,U=0;U<B;P=U++){let z=w[P],j=w[U],L=j.x-z.x,F=j.y-z.y;if(Math.abs(F)>Number.EPSILON){if(F<0&&(z=w[U],L=-L,j=w[P],F=-F),M.y<z.y||M.y>j.y)continue;if(M.y===z.y){if(M.x===z.x)return!0}else{const W=F*(M.x-z.x)-L*(M.y-z.y);if(W===0)return!0;if(W<0)continue;D=!D}}else{if(M.y!==z.y)continue;if(j.x<=M.x&&M.x<=z.x||z.x<=M.x&&M.x<=j.x)return!0}}return D}const a=eo.isClockWise,s=this.subPaths;if(s.length===0)return[];let l,c,d;const p=[];if(s.length===1)return c=s[0],d=new cf,d.curves=c.curves,p.push(d),p;let g=!a(s[0].getPoints());g=e?!g:g;const v=[],_=[];let x=[],S=0,C;_[S]=void 0,x[S]=[];for(let M=0,w=s.length;M<w;M++)c=s[M],C=c.getPoints(),l=a(C),l=e?!l:l,l?(!g&&_[S]&&S++,_[S]={s:new cf,p:C},_[S].s.curves=c.curves,g&&S++,x[S]=[]):x[S].push({h:c,p:C[0]});if(!_[0])return t(s);if(_.length>1){let M=!1,w=0;for(let B=0,D=_.length;B<D;B++)v[B]=[];for(let B=0,D=_.length;B<D;B++){const P=x[B];for(let U=0;U<P.length;U++){const z=P[U];let j=!0;for(let L=0;L<_.length;L++)i(z.p,_[L].p)&&(B!==L&&w++,j?(j=!1,v[L].push(z)):M=!0);j&&v[B].push(z)}}w>0&&M===!1&&(x=v)}let T;for(let M=0,w=_.length;M<w;M++){d=_[M].s,p.push(d),T=x[M];for(let B=0,D=T.length;B<D;B++)d.holes.push(T[B].h)}return p}}class iP extends Lo{constructor(e,t=null){super(),this.object=e,this.domElement=t,this.enabled=!0,this.state=-1,this.keys={},this.mouseButtons={LEFT:null,MIDDLE:null,RIGHT:null},this.touches={ONE:null,TWO:null}}connect(e){if(e===void 0){ct("Controls: connect() now requires an element.");return}this.domElement!==null&&this.disconnect(),this.domElement=e}disconnect(){}dispose(){}update(){}}function aP(n,e){const t=n.image&&n.image.width?n.image.width/n.image.height:1;return t>e?(n.repeat.x=1,n.repeat.y=t/e,n.offset.x=0,n.offset.y=(1-n.repeat.y)/2):(n.repeat.x=e/t,n.repeat.y=1,n.offset.x=(1-n.repeat.x)/2,n.offset.y=0),n}function rP(n,e){const t=n.image&&n.image.width?n.image.width/n.image.height:1;return t>e?(n.repeat.x=e/t,n.repeat.y=1,n.offset.x=(1-n.repeat.x)/2,n.offset.y=0):(n.repeat.x=1,n.repeat.y=t/e,n.offset.x=0,n.offset.y=(1-n.repeat.y)/2),n}function sP(n){return n.repeat.x=1,n.repeat.y=1,n.offset.x=0,n.offset.y=0,n}function RS(n,e,t,i){const a=oP(i);switch(t){case Zb:return n*e;case uv:return n*e/a.components*a.byteLength;case im:return n*e/a.components*a.byteLength;case Ju:return n*e*2/a.components*a.byteLength;case fv:return n*e*2/a.components*a.byteLength;case $b:return n*e*3/a.components*a.byteLength;case Ua:return n*e*4/a.components*a.byteLength;case hv:return n*e*4/a.components*a.byteLength;case am:case rm:return Math.floor((n+3)/4)*Math.floor((e+3)/4)*8;case sm:case om:return Math.floor((n+3)/4)*Math.floor((e+3)/4)*16;case pv:case gv:return Math.max(n,16)*Math.max(e,8)/4;case dv:case mv:return Math.max(n,8)*Math.max(e,8)/2;case vv:case yv:case xv:case bv:return Math.floor((n+3)/4)*Math.floor((e+3)/4)*8;case _v:case Av:case Sv:return Math.floor((n+3)/4)*Math.floor((e+3)/4)*16;case Mv:return Math.floor((n+3)/4)*Math.floor((e+3)/4)*16;case Ev:return Math.floor((n+4)/5)*Math.floor((e+3)/4)*16;case Tv:return Math.floor((n+4)/5)*Math.floor((e+4)/5)*16;case Cv:return Math.floor((n+5)/6)*Math.floor((e+4)/5)*16;case Rv:return Math.floor((n+5)/6)*Math.floor((e+5)/6)*16;case wv:return Math.floor((n+7)/8)*Math.floor((e+4)/5)*16;case Bv:return Math.floor((n+7)/8)*Math.floor((e+5)/6)*16;case Dv:return Math.floor((n+7)/8)*Math.floor((e+7)/8)*16;case Ov:return Math.floor((n+9)/10)*Math.floor((e+4)/5)*16;case Nv:return Math.floor((n+9)/10)*Math.floor((e+5)/6)*16;case Uv:return Math.floor((n+9)/10)*Math.floor((e+7)/8)*16;case Lv:return Math.floor((n+9)/10)*Math.floor((e+9)/10)*16;case Iv:return Math.floor((n+11)/12)*Math.floor((e+9)/10)*16;case Pv:return Math.floor((n+11)/12)*Math.floor((e+11)/12)*16;case Fv:case zv:case Hv:return Math.ceil(n/4)*Math.ceil(e/4)*16;case Gv:case Vv:return Math.ceil(n/4)*Math.ceil(e/4)*8;case kv:case Xv:return Math.ceil(n/4)*Math.ceil(e/4)*16}throw new Error(`Unable to determine texture byte length for ${t} format.`)}function oP(n){switch(n){case tr:case Wb:return{byteLength:1,components:1};case Oh:case Jb:case No:return{byteLength:2,components:1};case lv:case cv:return{byteLength:2,components:4};case vs:case ov:case nr:return{byteLength:4,components:1};case Kb:case Qb:return{byteLength:4,components:3}}throw new Error(`Unknown texture type ${n}.`)}class lP{static contain(e,t){return aP(e,t)}static cover(e,t){return rP(e,t)}static fill(e){return sP(e)}static getByteLength(e,t,i,a){return RS(e,t,i,a)}}typeof __THREE_DEVTOOLS__<"u"&&__THREE_DEVTOOLS__.dispatchEvent(new CustomEvent("register",{detail:{revision:Zp}})),typeof window<"u"&&(window.__THREE__?ct("WARNING: Multiple instances of Three.js being imported."):window.__THREE__=Zp);function SR(){let n=null,e=!1,t=null,i=null;function a(s,l){t(s,l),i=n.requestAnimationFrame(a)}return{start:function(){e!==!0&&t!==null&&(i=n.requestAnimationFrame(a),e=!0)},stop:function(){n.cancelAnimationFrame(i),e=!1},setAnimationLoop:function(s){t=s},setContext:function(s){n=s}}}function cP(n){const e=new WeakMap;function t(c,d){const p=c.array,g=c.usage,v=p.byteLength,_=n.createBuffer();n.bindBuffer(d,_),n.bufferData(d,p,g),c.onUploadCallback();let x;if(p instanceof Float32Array)x=n.FLOAT;else if(typeof Float16Array<"u"&&p instanceof Float16Array)x=n.HALF_FLOAT;else if(p instanceof Uint16Array)c.isFloat16BufferAttribute?x=n.HALF_FLOAT:x=n.UNSIGNED_SHORT;else if(p instanceof Int16Array)x=n.SHORT;else if(p instanceof Uint32Array)x=n.UNSIGNED_INT;else if(p instanceof Int32Array)x=n.INT;else if(p instanceof Int8Array)x=n.BYTE;else if(p instanceof Uint8Array)x=n.UNSIGNED_BYTE;else if(p instanceof Uint8ClampedArray)x=n.UNSIGNED_BYTE;else throw new Error("THREE.WebGLAttributes: Unsupported buffer data format: "+p);return{buffer:_,type:x,bytesPerElement:p.BYTES_PER_ELEMENT,version:c.version,size:v}}function i(c,d,p){const g=d.array,v=d.updateRanges;if(n.bindBuffer(p,c),v.length===0)n.bufferSubData(p,0,g);else{v.sort((x,S)=>x.start-S.start);let _=0;for(let x=1;x<v.length;x++){const S=v[_],C=v[x];C.start<=S.start+S.count+1?S.count=Math.max(S.count,C.start+C.count-S.start):(++_,v[_]=C)}v.length=_+1;for(let x=0,S=v.length;x<S;x++){const C=v[x];n.bufferSubData(p,C.start*g.BYTES_PER_ELEMENT,g,C.start,C.count)}d.clearUpdateRanges()}d.onUploadCallback()}function a(c){return c.isInterleavedBufferAttribute&&(c=c.data),e.get(c)}function s(c){c.isInterleavedBufferAttribute&&(c=c.data);const d=e.get(c);d&&(n.deleteBuffer(d.buffer),e.delete(c))}function l(c,d){if(c.isInterleavedBufferAttribute&&(c=c.data),c.isGLBufferAttribute){const g=e.get(c);(!g||g.version<c.version)&&e.set(c,{buffer:c.buffer,type:c.type,bytesPerElement:c.elementSize,version:c.version});return}const p=e.get(c);if(p===void 0)e.set(c,t(c,d));else if(p.version<c.version){if(p.size!==c.array.byteLength)throw new Error("THREE.WebGLAttributes: The size of the buffer attribute's array buffer does not match the original size. Resizing buffer attributes is not supported.");i(p.buffer,c,d),p.version=c.version}}return{get:a,remove:s,update:l}}var uP=`#ifdef USE_ALPHAHASH
	if ( diffuseColor.a < getAlphaHashThreshold( vPosition ) ) discard;
#endif`,fP=`#ifdef USE_ALPHAHASH
	const float ALPHA_HASH_SCALE = 0.05;
	float hash2D( vec2 value ) {
		return fract( 1.0e4 * sin( 17.0 * value.x + 0.1 * value.y ) * ( 0.1 + abs( sin( 13.0 * value.y + value.x ) ) ) );
	}
	float hash3D( vec3 value ) {
		return hash2D( vec2( hash2D( value.xy ), value.z ) );
	}
	float getAlphaHashThreshold( vec3 position ) {
		float maxDeriv = max(
			length( dFdx( position.xyz ) ),
			length( dFdy( position.xyz ) )
		);
		float pixScale = 1.0 / ( ALPHA_HASH_SCALE * maxDeriv );
		vec2 pixScales = vec2(
			exp2( floor( log2( pixScale ) ) ),
			exp2( ceil( log2( pixScale ) ) )
		);
		vec2 alpha = vec2(
			hash3D( floor( pixScales.x * position.xyz ) ),
			hash3D( floor( pixScales.y * position.xyz ) )
		);
		float lerpFactor = fract( log2( pixScale ) );
		float x = ( 1.0 - lerpFactor ) * alpha.x + lerpFactor * alpha.y;
		float a = min( lerpFactor, 1.0 - lerpFactor );
		vec3 cases = vec3(
			x * x / ( 2.0 * a * ( 1.0 - a ) ),
			( x - 0.5 * a ) / ( 1.0 - a ),
			1.0 - ( ( 1.0 - x ) * ( 1.0 - x ) / ( 2.0 * a * ( 1.0 - a ) ) )
		);
		float threshold = ( x < ( 1.0 - a ) )
			? ( ( x < a ) ? cases.x : cases.y )
			: cases.z;
		return clamp( threshold , 1.0e-6, 1.0 );
	}
#endif`,hP=`#ifdef USE_ALPHAMAP
	diffuseColor.a *= texture2D( alphaMap, vAlphaMapUv ).g;
#endif`,dP=`#ifdef USE_ALPHAMAP
	uniform sampler2D alphaMap;
#endif`,pP=`#ifdef USE_ALPHATEST
	#ifdef ALPHA_TO_COVERAGE
	diffuseColor.a = smoothstep( alphaTest, alphaTest + fwidth( diffuseColor.a ), diffuseColor.a );
	if ( diffuseColor.a == 0.0 ) discard;
	#else
	if ( diffuseColor.a < alphaTest ) discard;
	#endif
#endif`,mP=`#ifdef USE_ALPHATEST
	uniform float alphaTest;
#endif`,gP=`#ifdef USE_AOMAP
	float ambientOcclusion = ( texture2D( aoMap, vAoMapUv ).r - 1.0 ) * aoMapIntensity + 1.0;
	reflectedLight.indirectDiffuse *= ambientOcclusion;
	#if defined( USE_CLEARCOAT ) 
		clearcoatSpecularIndirect *= ambientOcclusion;
	#endif
	#if defined( USE_SHEEN ) 
		sheenSpecularIndirect *= ambientOcclusion;
	#endif
	#if defined( USE_ENVMAP ) && defined( STANDARD )
		float dotNV = saturate( dot( geometryNormal, geometryViewDir ) );
		reflectedLight.indirectSpecular *= computeSpecularOcclusion( dotNV, ambientOcclusion, material.roughness );
	#endif
#endif`,vP=`#ifdef USE_AOMAP
	uniform sampler2D aoMap;
	uniform float aoMapIntensity;
#endif`,yP=`#ifdef USE_BATCHING
	#if ! defined( GL_ANGLE_multi_draw )
	#define gl_DrawID _gl_DrawID
	uniform int _gl_DrawID;
	#endif
	uniform highp sampler2D batchingTexture;
	uniform highp usampler2D batchingIdTexture;
	mat4 getBatchingMatrix( const in float i ) {
		int size = textureSize( batchingTexture, 0 ).x;
		int j = int( i ) * 4;
		int x = j % size;
		int y = j / size;
		vec4 v1 = texelFetch( batchingTexture, ivec2( x, y ), 0 );
		vec4 v2 = texelFetch( batchingTexture, ivec2( x + 1, y ), 0 );
		vec4 v3 = texelFetch( batchingTexture, ivec2( x + 2, y ), 0 );
		vec4 v4 = texelFetch( batchingTexture, ivec2( x + 3, y ), 0 );
		return mat4( v1, v2, v3, v4 );
	}
	float getIndirectIndex( const in int i ) {
		int size = textureSize( batchingIdTexture, 0 ).x;
		int x = i % size;
		int y = i / size;
		return float( texelFetch( batchingIdTexture, ivec2( x, y ), 0 ).r );
	}
#endif
#ifdef USE_BATCHING_COLOR
	uniform sampler2D batchingColorTexture;
	vec3 getBatchingColor( const in float i ) {
		int size = textureSize( batchingColorTexture, 0 ).x;
		int j = int( i );
		int x = j % size;
		int y = j / size;
		return texelFetch( batchingColorTexture, ivec2( x, y ), 0 ).rgb;
	}
#endif`,_P=`#ifdef USE_BATCHING
	mat4 batchingMatrix = getBatchingMatrix( getIndirectIndex( gl_DrawID ) );
#endif`,xP=`vec3 transformed = vec3( position );
#ifdef USE_ALPHAHASH
	vPosition = vec3( position );
#endif`,bP=`vec3 objectNormal = vec3( normal );
#ifdef USE_TANGENT
	vec3 objectTangent = vec3( tangent.xyz );
#endif`,AP=`float G_BlinnPhong_Implicit( ) {
	return 0.25;
}
float D_BlinnPhong( const in float shininess, const in float dotNH ) {
	return RECIPROCAL_PI * ( shininess * 0.5 + 1.0 ) * pow( dotNH, shininess );
}
vec3 BRDF_BlinnPhong( const in vec3 lightDir, const in vec3 viewDir, const in vec3 normal, const in vec3 specularColor, const in float shininess ) {
	vec3 halfDir = normalize( lightDir + viewDir );
	float dotNH = saturate( dot( normal, halfDir ) );
	float dotVH = saturate( dot( viewDir, halfDir ) );
	vec3 F = F_Schlick( specularColor, 1.0, dotVH );
	float G = G_BlinnPhong_Implicit( );
	float D = D_BlinnPhong( shininess, dotNH );
	return F * ( G * D );
} // validated`,SP=`#ifdef USE_IRIDESCENCE
	const mat3 XYZ_TO_REC709 = mat3(
		 3.2404542, -0.9692660,  0.0556434,
		-1.5371385,  1.8760108, -0.2040259,
		-0.4985314,  0.0415560,  1.0572252
	);
	vec3 Fresnel0ToIor( vec3 fresnel0 ) {
		vec3 sqrtF0 = sqrt( fresnel0 );
		return ( vec3( 1.0 ) + sqrtF0 ) / ( vec3( 1.0 ) - sqrtF0 );
	}
	vec3 IorToFresnel0( vec3 transmittedIor, float incidentIor ) {
		return pow2( ( transmittedIor - vec3( incidentIor ) ) / ( transmittedIor + vec3( incidentIor ) ) );
	}
	float IorToFresnel0( float transmittedIor, float incidentIor ) {
		return pow2( ( transmittedIor - incidentIor ) / ( transmittedIor + incidentIor ));
	}
	vec3 evalSensitivity( float OPD, vec3 shift ) {
		float phase = 2.0 * PI * OPD * 1.0e-9;
		vec3 val = vec3( 5.4856e-13, 4.4201e-13, 5.2481e-13 );
		vec3 pos = vec3( 1.6810e+06, 1.7953e+06, 2.2084e+06 );
		vec3 var = vec3( 4.3278e+09, 9.3046e+09, 6.6121e+09 );
		vec3 xyz = val * sqrt( 2.0 * PI * var ) * cos( pos * phase + shift ) * exp( - pow2( phase ) * var );
		xyz.x += 9.7470e-14 * sqrt( 2.0 * PI * 4.5282e+09 ) * cos( 2.2399e+06 * phase + shift[ 0 ] ) * exp( - 4.5282e+09 * pow2( phase ) );
		xyz /= 1.0685e-7;
		vec3 rgb = XYZ_TO_REC709 * xyz;
		return rgb;
	}
	vec3 evalIridescence( float outsideIOR, float eta2, float cosTheta1, float thinFilmThickness, vec3 baseF0 ) {
		vec3 I;
		float iridescenceIOR = mix( outsideIOR, eta2, smoothstep( 0.0, 0.03, thinFilmThickness ) );
		float sinTheta2Sq = pow2( outsideIOR / iridescenceIOR ) * ( 1.0 - pow2( cosTheta1 ) );
		float cosTheta2Sq = 1.0 - sinTheta2Sq;
		if ( cosTheta2Sq < 0.0 ) {
			return vec3( 1.0 );
		}
		float cosTheta2 = sqrt( cosTheta2Sq );
		float R0 = IorToFresnel0( iridescenceIOR, outsideIOR );
		float R12 = F_Schlick( R0, 1.0, cosTheta1 );
		float T121 = 1.0 - R12;
		float phi12 = 0.0;
		if ( iridescenceIOR < outsideIOR ) phi12 = PI;
		float phi21 = PI - phi12;
		vec3 baseIOR = Fresnel0ToIor( clamp( baseF0, 0.0, 0.9999 ) );		vec3 R1 = IorToFresnel0( baseIOR, iridescenceIOR );
		vec3 R23 = F_Schlick( R1, 1.0, cosTheta2 );
		vec3 phi23 = vec3( 0.0 );
		if ( baseIOR[ 0 ] < iridescenceIOR ) phi23[ 0 ] = PI;
		if ( baseIOR[ 1 ] < iridescenceIOR ) phi23[ 1 ] = PI;
		if ( baseIOR[ 2 ] < iridescenceIOR ) phi23[ 2 ] = PI;
		float OPD = 2.0 * iridescenceIOR * thinFilmThickness * cosTheta2;
		vec3 phi = vec3( phi21 ) + phi23;
		vec3 R123 = clamp( R12 * R23, 1e-5, 0.9999 );
		vec3 r123 = sqrt( R123 );
		vec3 Rs = pow2( T121 ) * R23 / ( vec3( 1.0 ) - R123 );
		vec3 C0 = R12 + Rs;
		I = C0;
		vec3 Cm = Rs - T121;
		for ( int m = 1; m <= 2; ++ m ) {
			Cm *= r123;
			vec3 Sm = 2.0 * evalSensitivity( float( m ) * OPD, float( m ) * phi );
			I += Cm * Sm;
		}
		return max( I, vec3( 0.0 ) );
	}
#endif`,MP=`#ifdef USE_BUMPMAP
	uniform sampler2D bumpMap;
	uniform float bumpScale;
	vec2 dHdxy_fwd() {
		vec2 dSTdx = dFdx( vBumpMapUv );
		vec2 dSTdy = dFdy( vBumpMapUv );
		float Hll = bumpScale * texture2D( bumpMap, vBumpMapUv ).x;
		float dBx = bumpScale * texture2D( bumpMap, vBumpMapUv + dSTdx ).x - Hll;
		float dBy = bumpScale * texture2D( bumpMap, vBumpMapUv + dSTdy ).x - Hll;
		return vec2( dBx, dBy );
	}
	vec3 perturbNormalArb( vec3 surf_pos, vec3 surf_norm, vec2 dHdxy, float faceDirection ) {
		vec3 vSigmaX = normalize( dFdx( surf_pos.xyz ) );
		vec3 vSigmaY = normalize( dFdy( surf_pos.xyz ) );
		vec3 vN = surf_norm;
		vec3 R1 = cross( vSigmaY, vN );
		vec3 R2 = cross( vN, vSigmaX );
		float fDet = dot( vSigmaX, R1 ) * faceDirection;
		vec3 vGrad = sign( fDet ) * ( dHdxy.x * R1 + dHdxy.y * R2 );
		return normalize( abs( fDet ) * surf_norm - vGrad );
	}
#endif`,EP=`#if NUM_CLIPPING_PLANES > 0
	vec4 plane;
	#ifdef ALPHA_TO_COVERAGE
		float distanceToPlane, distanceGradient;
		float clipOpacity = 1.0;
		#pragma unroll_loop_start
		for ( int i = 0; i < UNION_CLIPPING_PLANES; i ++ ) {
			plane = clippingPlanes[ i ];
			distanceToPlane = - dot( vClipPosition, plane.xyz ) + plane.w;
			distanceGradient = fwidth( distanceToPlane ) / 2.0;
			clipOpacity *= smoothstep( - distanceGradient, distanceGradient, distanceToPlane );
			if ( clipOpacity == 0.0 ) discard;
		}
		#pragma unroll_loop_end
		#if UNION_CLIPPING_PLANES < NUM_CLIPPING_PLANES
			float unionClipOpacity = 1.0;
			#pragma unroll_loop_start
			for ( int i = UNION_CLIPPING_PLANES; i < NUM_CLIPPING_PLANES; i ++ ) {
				plane = clippingPlanes[ i ];
				distanceToPlane = - dot( vClipPosition, plane.xyz ) + plane.w;
				distanceGradient = fwidth( distanceToPlane ) / 2.0;
				unionClipOpacity *= 1.0 - smoothstep( - distanceGradient, distanceGradient, distanceToPlane );
			}
			#pragma unroll_loop_end
			clipOpacity *= 1.0 - unionClipOpacity;
		#endif
		diffuseColor.a *= clipOpacity;
		if ( diffuseColor.a == 0.0 ) discard;
	#else
		#pragma unroll_loop_start
		for ( int i = 0; i < UNION_CLIPPING_PLANES; i ++ ) {
			plane = clippingPlanes[ i ];
			if ( dot( vClipPosition, plane.xyz ) > plane.w ) discard;
		}
		#pragma unroll_loop_end
		#if UNION_CLIPPING_PLANES < NUM_CLIPPING_PLANES
			bool clipped = true;
			#pragma unroll_loop_start
			for ( int i = UNION_CLIPPING_PLANES; i < NUM_CLIPPING_PLANES; i ++ ) {
				plane = clippingPlanes[ i ];
				clipped = ( dot( vClipPosition, plane.xyz ) > plane.w ) && clipped;
			}
			#pragma unroll_loop_end
			if ( clipped ) discard;
		#endif
	#endif
#endif`,TP=`#if NUM_CLIPPING_PLANES > 0
	varying vec3 vClipPosition;
	uniform vec4 clippingPlanes[ NUM_CLIPPING_PLANES ];
#endif`,CP=`#if NUM_CLIPPING_PLANES > 0
	varying vec3 vClipPosition;
#endif`,RP=`#if NUM_CLIPPING_PLANES > 0
	vClipPosition = - mvPosition.xyz;
#endif`,wP=`#if defined( USE_COLOR_ALPHA )
	diffuseColor *= vColor;
#elif defined( USE_COLOR )
	diffuseColor.rgb *= vColor;
#endif`,BP=`#if defined( USE_COLOR_ALPHA )
	varying vec4 vColor;
#elif defined( USE_COLOR )
	varying vec3 vColor;
#endif`,DP=`#if defined( USE_COLOR_ALPHA )
	varying vec4 vColor;
#elif defined( USE_COLOR ) || defined( USE_INSTANCING_COLOR ) || defined( USE_BATCHING_COLOR )
	varying vec3 vColor;
#endif`,OP=`#if defined( USE_COLOR_ALPHA )
	vColor = vec4( 1.0 );
#elif defined( USE_COLOR ) || defined( USE_INSTANCING_COLOR ) || defined( USE_BATCHING_COLOR )
	vColor = vec3( 1.0 );
#endif
#ifdef USE_COLOR
	vColor *= color;
#endif
#ifdef USE_INSTANCING_COLOR
	vColor.xyz *= instanceColor.xyz;
#endif
#ifdef USE_BATCHING_COLOR
	vec3 batchingColor = getBatchingColor( getIndirectIndex( gl_DrawID ) );
	vColor.xyz *= batchingColor.xyz;
#endif`,NP=`#define PI 3.141592653589793
#define PI2 6.283185307179586
#define PI_HALF 1.5707963267948966
#define RECIPROCAL_PI 0.3183098861837907
#define RECIPROCAL_PI2 0.15915494309189535
#define EPSILON 1e-6
#ifndef saturate
#define saturate( a ) clamp( a, 0.0, 1.0 )
#endif
#define whiteComplement( a ) ( 1.0 - saturate( a ) )
float pow2( const in float x ) { return x*x; }
vec3 pow2( const in vec3 x ) { return x*x; }
float pow3( const in float x ) { return x*x*x; }
float pow4( const in float x ) { float x2 = x*x; return x2*x2; }
float max3( const in vec3 v ) { return max( max( v.x, v.y ), v.z ); }
float average( const in vec3 v ) { return dot( v, vec3( 0.3333333 ) ); }
highp float rand( const in vec2 uv ) {
	const highp float a = 12.9898, b = 78.233, c = 43758.5453;
	highp float dt = dot( uv.xy, vec2( a,b ) ), sn = mod( dt, PI );
	return fract( sin( sn ) * c );
}
#ifdef HIGH_PRECISION
	float precisionSafeLength( vec3 v ) { return length( v ); }
#else
	float precisionSafeLength( vec3 v ) {
		float maxComponent = max3( abs( v ) );
		return length( v / maxComponent ) * maxComponent;
	}
#endif
struct IncidentLight {
	vec3 color;
	vec3 direction;
	bool visible;
};
struct ReflectedLight {
	vec3 directDiffuse;
	vec3 directSpecular;
	vec3 indirectDiffuse;
	vec3 indirectSpecular;
};
#ifdef USE_ALPHAHASH
	varying vec3 vPosition;
#endif
vec3 transformDirection( in vec3 dir, in mat4 matrix ) {
	return normalize( ( matrix * vec4( dir, 0.0 ) ).xyz );
}
vec3 inverseTransformDirection( in vec3 dir, in mat4 matrix ) {
	return normalize( ( vec4( dir, 0.0 ) * matrix ).xyz );
}
bool isPerspectiveMatrix( mat4 m ) {
	return m[ 2 ][ 3 ] == - 1.0;
}
vec2 equirectUv( in vec3 dir ) {
	float u = atan( dir.z, dir.x ) * RECIPROCAL_PI2 + 0.5;
	float v = asin( clamp( dir.y, - 1.0, 1.0 ) ) * RECIPROCAL_PI + 0.5;
	return vec2( u, v );
}
vec3 BRDF_Lambert( const in vec3 diffuseColor ) {
	return RECIPROCAL_PI * diffuseColor;
}
vec3 F_Schlick( const in vec3 f0, const in float f90, const in float dotVH ) {
	float fresnel = exp2( ( - 5.55473 * dotVH - 6.98316 ) * dotVH );
	return f0 * ( 1.0 - fresnel ) + ( f90 * fresnel );
}
float F_Schlick( const in float f0, const in float f90, const in float dotVH ) {
	float fresnel = exp2( ( - 5.55473 * dotVH - 6.98316 ) * dotVH );
	return f0 * ( 1.0 - fresnel ) + ( f90 * fresnel );
} // validated`,UP=`#ifdef ENVMAP_TYPE_CUBE_UV
	#define cubeUV_minMipLevel 4.0
	#define cubeUV_minTileSize 16.0
	float getFace( vec3 direction ) {
		vec3 absDirection = abs( direction );
		float face = - 1.0;
		if ( absDirection.x > absDirection.z ) {
			if ( absDirection.x > absDirection.y )
				face = direction.x > 0.0 ? 0.0 : 3.0;
			else
				face = direction.y > 0.0 ? 1.0 : 4.0;
		} else {
			if ( absDirection.z > absDirection.y )
				face = direction.z > 0.0 ? 2.0 : 5.0;
			else
				face = direction.y > 0.0 ? 1.0 : 4.0;
		}
		return face;
	}
	vec2 getUV( vec3 direction, float face ) {
		vec2 uv;
		if ( face == 0.0 ) {
			uv = vec2( direction.z, direction.y ) / abs( direction.x );
		} else if ( face == 1.0 ) {
			uv = vec2( - direction.x, - direction.z ) / abs( direction.y );
		} else if ( face == 2.0 ) {
			uv = vec2( - direction.x, direction.y ) / abs( direction.z );
		} else if ( face == 3.0 ) {
			uv = vec2( - direction.z, direction.y ) / abs( direction.x );
		} else if ( face == 4.0 ) {
			uv = vec2( - direction.x, direction.z ) / abs( direction.y );
		} else {
			uv = vec2( direction.x, direction.y ) / abs( direction.z );
		}
		return 0.5 * ( uv + 1.0 );
	}
	vec3 bilinearCubeUV( sampler2D envMap, vec3 direction, float mipInt ) {
		float face = getFace( direction );
		float filterInt = max( cubeUV_minMipLevel - mipInt, 0.0 );
		mipInt = max( mipInt, cubeUV_minMipLevel );
		float faceSize = exp2( mipInt );
		highp vec2 uv = getUV( direction, face ) * ( faceSize - 2.0 ) + 1.0;
		if ( face > 2.0 ) {
			uv.y += faceSize;
			face -= 3.0;
		}
		uv.x += face * faceSize;
		uv.x += filterInt * 3.0 * cubeUV_minTileSize;
		uv.y += 4.0 * ( exp2( CUBEUV_MAX_MIP ) - faceSize );
		uv.x *= CUBEUV_TEXEL_WIDTH;
		uv.y *= CUBEUV_TEXEL_HEIGHT;
		#ifdef texture2DGradEXT
			return texture2DGradEXT( envMap, uv, vec2( 0.0 ), vec2( 0.0 ) ).rgb;
		#else
			return texture2D( envMap, uv ).rgb;
		#endif
	}
	#define cubeUV_r0 1.0
	#define cubeUV_m0 - 2.0
	#define cubeUV_r1 0.8
	#define cubeUV_m1 - 1.0
	#define cubeUV_r4 0.4
	#define cubeUV_m4 2.0
	#define cubeUV_r5 0.305
	#define cubeUV_m5 3.0
	#define cubeUV_r6 0.21
	#define cubeUV_m6 4.0
	float roughnessToMip( float roughness ) {
		float mip = 0.0;
		if ( roughness >= cubeUV_r1 ) {
			mip = ( cubeUV_r0 - roughness ) * ( cubeUV_m1 - cubeUV_m0 ) / ( cubeUV_r0 - cubeUV_r1 ) + cubeUV_m0;
		} else if ( roughness >= cubeUV_r4 ) {
			mip = ( cubeUV_r1 - roughness ) * ( cubeUV_m4 - cubeUV_m1 ) / ( cubeUV_r1 - cubeUV_r4 ) + cubeUV_m1;
		} else if ( roughness >= cubeUV_r5 ) {
			mip = ( cubeUV_r4 - roughness ) * ( cubeUV_m5 - cubeUV_m4 ) / ( cubeUV_r4 - cubeUV_r5 ) + cubeUV_m4;
		} else if ( roughness >= cubeUV_r6 ) {
			mip = ( cubeUV_r5 - roughness ) * ( cubeUV_m6 - cubeUV_m5 ) / ( cubeUV_r5 - cubeUV_r6 ) + cubeUV_m5;
		} else {
			mip = - 2.0 * log2( 1.16 * roughness );		}
		return mip;
	}
	vec4 textureCubeUV( sampler2D envMap, vec3 sampleDir, float roughness ) {
		float mip = clamp( roughnessToMip( roughness ), cubeUV_m0, CUBEUV_MAX_MIP );
		float mipF = fract( mip );
		float mipInt = floor( mip );
		vec3 color0 = bilinearCubeUV( envMap, sampleDir, mipInt );
		if ( mipF == 0.0 ) {
			return vec4( color0, 1.0 );
		} else {
			vec3 color1 = bilinearCubeUV( envMap, sampleDir, mipInt + 1.0 );
			return vec4( mix( color0, color1, mipF ), 1.0 );
		}
	}
#endif`,LP=`vec3 transformedNormal = objectNormal;
#ifdef USE_TANGENT
	vec3 transformedTangent = objectTangent;
#endif
#ifdef USE_BATCHING
	mat3 bm = mat3( batchingMatrix );
	transformedNormal /= vec3( dot( bm[ 0 ], bm[ 0 ] ), dot( bm[ 1 ], bm[ 1 ] ), dot( bm[ 2 ], bm[ 2 ] ) );
	transformedNormal = bm * transformedNormal;
	#ifdef USE_TANGENT
		transformedTangent = bm * transformedTangent;
	#endif
#endif
#ifdef USE_INSTANCING
	mat3 im = mat3( instanceMatrix );
	transformedNormal /= vec3( dot( im[ 0 ], im[ 0 ] ), dot( im[ 1 ], im[ 1 ] ), dot( im[ 2 ], im[ 2 ] ) );
	transformedNormal = im * transformedNormal;
	#ifdef USE_TANGENT
		transformedTangent = im * transformedTangent;
	#endif
#endif
transformedNormal = normalMatrix * transformedNormal;
#ifdef FLIP_SIDED
	transformedNormal = - transformedNormal;
#endif
#ifdef USE_TANGENT
	transformedTangent = ( modelViewMatrix * vec4( transformedTangent, 0.0 ) ).xyz;
	#ifdef FLIP_SIDED
		transformedTangent = - transformedTangent;
	#endif
#endif`,IP=`#ifdef USE_DISPLACEMENTMAP
	uniform sampler2D displacementMap;
	uniform float displacementScale;
	uniform float displacementBias;
#endif`,PP=`#ifdef USE_DISPLACEMENTMAP
	transformed += normalize( objectNormal ) * ( texture2D( displacementMap, vDisplacementMapUv ).x * displacementScale + displacementBias );
#endif`,FP=`#ifdef USE_EMISSIVEMAP
	vec4 emissiveColor = texture2D( emissiveMap, vEmissiveMapUv );
	#ifdef DECODE_VIDEO_TEXTURE_EMISSIVE
		emissiveColor = sRGBTransferEOTF( emissiveColor );
	#endif
	totalEmissiveRadiance *= emissiveColor.rgb;
#endif`,zP=`#ifdef USE_EMISSIVEMAP
	uniform sampler2D emissiveMap;
#endif`,HP="gl_FragColor = linearToOutputTexel( gl_FragColor );",GP=`vec4 LinearTransferOETF( in vec4 value ) {
	return value;
}
vec4 sRGBTransferEOTF( in vec4 value ) {
	return vec4( mix( pow( value.rgb * 0.9478672986 + vec3( 0.0521327014 ), vec3( 2.4 ) ), value.rgb * 0.0773993808, vec3( lessThanEqual( value.rgb, vec3( 0.04045 ) ) ) ), value.a );
}
vec4 sRGBTransferOETF( in vec4 value ) {
	return vec4( mix( pow( value.rgb, vec3( 0.41666 ) ) * 1.055 - vec3( 0.055 ), value.rgb * 12.92, vec3( lessThanEqual( value.rgb, vec3( 0.0031308 ) ) ) ), value.a );
}`,VP=`#ifdef USE_ENVMAP
	#ifdef ENV_WORLDPOS
		vec3 cameraToFrag;
		if ( isOrthographic ) {
			cameraToFrag = normalize( vec3( - viewMatrix[ 0 ][ 2 ], - viewMatrix[ 1 ][ 2 ], - viewMatrix[ 2 ][ 2 ] ) );
		} else {
			cameraToFrag = normalize( vWorldPosition - cameraPosition );
		}
		vec3 worldNormal = inverseTransformDirection( normal, viewMatrix );
		#ifdef ENVMAP_MODE_REFLECTION
			vec3 reflectVec = reflect( cameraToFrag, worldNormal );
		#else
			vec3 reflectVec = refract( cameraToFrag, worldNormal, refractionRatio );
		#endif
	#else
		vec3 reflectVec = vReflect;
	#endif
	#ifdef ENVMAP_TYPE_CUBE
		vec4 envColor = textureCube( envMap, envMapRotation * vec3( flipEnvMap * reflectVec.x, reflectVec.yz ) );
	#else
		vec4 envColor = vec4( 0.0 );
	#endif
	#ifdef ENVMAP_BLENDING_MULTIPLY
		outgoingLight = mix( outgoingLight, outgoingLight * envColor.xyz, specularStrength * reflectivity );
	#elif defined( ENVMAP_BLENDING_MIX )
		outgoingLight = mix( outgoingLight, envColor.xyz, specularStrength * reflectivity );
	#elif defined( ENVMAP_BLENDING_ADD )
		outgoingLight += envColor.xyz * specularStrength * reflectivity;
	#endif
#endif`,kP=`#ifdef USE_ENVMAP
	uniform float envMapIntensity;
	uniform float flipEnvMap;
	uniform mat3 envMapRotation;
	#ifdef ENVMAP_TYPE_CUBE
		uniform samplerCube envMap;
	#else
		uniform sampler2D envMap;
	#endif
#endif`,XP=`#ifdef USE_ENVMAP
	uniform float reflectivity;
	#if defined( USE_BUMPMAP ) || defined( USE_NORMALMAP ) || defined( PHONG ) || defined( LAMBERT )
		#define ENV_WORLDPOS
	#endif
	#ifdef ENV_WORLDPOS
		varying vec3 vWorldPosition;
		uniform float refractionRatio;
	#else
		varying vec3 vReflect;
	#endif
#endif`,jP=`#ifdef USE_ENVMAP
	#if defined( USE_BUMPMAP ) || defined( USE_NORMALMAP ) || defined( PHONG ) || defined( LAMBERT )
		#define ENV_WORLDPOS
	#endif
	#ifdef ENV_WORLDPOS
		
		varying vec3 vWorldPosition;
	#else
		varying vec3 vReflect;
		uniform float refractionRatio;
	#endif
#endif`,YP=`#ifdef USE_ENVMAP
	#ifdef ENV_WORLDPOS
		vWorldPosition = worldPosition.xyz;
	#else
		vec3 cameraToVertex;
		if ( isOrthographic ) {
			cameraToVertex = normalize( vec3( - viewMatrix[ 0 ][ 2 ], - viewMatrix[ 1 ][ 2 ], - viewMatrix[ 2 ][ 2 ] ) );
		} else {
			cameraToVertex = normalize( worldPosition.xyz - cameraPosition );
		}
		vec3 worldNormal = inverseTransformDirection( transformedNormal, viewMatrix );
		#ifdef ENVMAP_MODE_REFLECTION
			vReflect = reflect( cameraToVertex, worldNormal );
		#else
			vReflect = refract( cameraToVertex, worldNormal, refractionRatio );
		#endif
	#endif
#endif`,qP=`#ifdef USE_FOG
	vFogDepth = - mvPosition.z;
#endif`,WP=`#ifdef USE_FOG
	varying float vFogDepth;
#endif`,JP=`#ifdef USE_FOG
	#ifdef FOG_EXP2
		float fogFactor = 1.0 - exp( - fogDensity * fogDensity * vFogDepth * vFogDepth );
	#else
		float fogFactor = smoothstep( fogNear, fogFar, vFogDepth );
	#endif
	gl_FragColor.rgb = mix( gl_FragColor.rgb, fogColor, fogFactor );
#endif`,KP=`#ifdef USE_FOG
	uniform vec3 fogColor;
	varying float vFogDepth;
	#ifdef FOG_EXP2
		uniform float fogDensity;
	#else
		uniform float fogNear;
		uniform float fogFar;
	#endif
#endif`,QP=`#ifdef USE_GRADIENTMAP
	uniform sampler2D gradientMap;
#endif
vec3 getGradientIrradiance( vec3 normal, vec3 lightDirection ) {
	float dotNL = dot( normal, lightDirection );
	vec2 coord = vec2( dotNL * 0.5 + 0.5, 0.0 );
	#ifdef USE_GRADIENTMAP
		return vec3( texture2D( gradientMap, coord ).r );
	#else
		vec2 fw = fwidth( coord ) * 0.5;
		return mix( vec3( 0.7 ), vec3( 1.0 ), smoothstep( 0.7 - fw.x, 0.7 + fw.x, coord.x ) );
	#endif
}`,ZP=`#ifdef USE_LIGHTMAP
	uniform sampler2D lightMap;
	uniform float lightMapIntensity;
#endif`,$P=`LambertMaterial material;
material.diffuseColor = diffuseColor.rgb;
material.specularStrength = specularStrength;`,eF=`varying vec3 vViewPosition;
struct LambertMaterial {
	vec3 diffuseColor;
	float specularStrength;
};
void RE_Direct_Lambert( const in IncidentLight directLight, const in vec3 geometryPosition, const in vec3 geometryNormal, const in vec3 geometryViewDir, const in vec3 geometryClearcoatNormal, const in LambertMaterial material, inout ReflectedLight reflectedLight ) {
	float dotNL = saturate( dot( geometryNormal, directLight.direction ) );
	vec3 irradiance = dotNL * directLight.color;
	reflectedLight.directDiffuse += irradiance * BRDF_Lambert( material.diffuseColor );
}
void RE_IndirectDiffuse_Lambert( const in vec3 irradiance, const in vec3 geometryPosition, const in vec3 geometryNormal, const in vec3 geometryViewDir, const in vec3 geometryClearcoatNormal, const in LambertMaterial material, inout ReflectedLight reflectedLight ) {
	reflectedLight.indirectDiffuse += irradiance * BRDF_Lambert( material.diffuseColor );
}
#define RE_Direct				RE_Direct_Lambert
#define RE_IndirectDiffuse		RE_IndirectDiffuse_Lambert`,tF=`uniform bool receiveShadow;
uniform vec3 ambientLightColor;
#if defined( USE_LIGHT_PROBES )
	uniform vec3 lightProbe[ 9 ];
#endif
vec3 shGetIrradianceAt( in vec3 normal, in vec3 shCoefficients[ 9 ] ) {
	float x = normal.x, y = normal.y, z = normal.z;
	vec3 result = shCoefficients[ 0 ] * 0.886227;
	result += shCoefficients[ 1 ] * 2.0 * 0.511664 * y;
	result += shCoefficients[ 2 ] * 2.0 * 0.511664 * z;
	result += shCoefficients[ 3 ] * 2.0 * 0.511664 * x;
	result += shCoefficients[ 4 ] * 2.0 * 0.429043 * x * y;
	result += shCoefficients[ 5 ] * 2.0 * 0.429043 * y * z;
	result += shCoefficients[ 6 ] * ( 0.743125 * z * z - 0.247708 );
	result += shCoefficients[ 7 ] * 2.0 * 0.429043 * x * z;
	result += shCoefficients[ 8 ] * 0.429043 * ( x * x - y * y );
	return result;
}
vec3 getLightProbeIrradiance( const in vec3 lightProbe[ 9 ], const in vec3 normal ) {
	vec3 worldNormal = inverseTransformDirection( normal, viewMatrix );
	vec3 irradiance = shGetIrradianceAt( worldNormal, lightProbe );
	return irradiance;
}
vec3 getAmbientLightIrradiance( const in vec3 ambientLightColor ) {
	vec3 irradiance = ambientLightColor;
	return irradiance;
}
float getDistanceAttenuation( const in float lightDistance, const in float cutoffDistance, const in float decayExponent ) {
	float distanceFalloff = 1.0 / max( pow( lightDistance, decayExponent ), 0.01 );
	if ( cutoffDistance > 0.0 ) {
		distanceFalloff *= pow2( saturate( 1.0 - pow4( lightDistance / cutoffDistance ) ) );
	}
	return distanceFalloff;
}
float getSpotAttenuation( const in float coneCosine, const in float penumbraCosine, const in float angleCosine ) {
	return smoothstep( coneCosine, penumbraCosine, angleCosine );
}
#if NUM_DIR_LIGHTS > 0
	struct DirectionalLight {
		vec3 direction;
		vec3 color;
	};
	uniform DirectionalLight directionalLights[ NUM_DIR_LIGHTS ];
	void getDirectionalLightInfo( const in DirectionalLight directionalLight, out IncidentLight light ) {
		light.color = directionalLight.color;
		light.direction = directionalLight.direction;
		light.visible = true;
	}
#endif
#if NUM_POINT_LIGHTS > 0
	struct PointLight {
		vec3 position;
		vec3 color;
		float distance;
		float decay;
	};
	uniform PointLight pointLights[ NUM_POINT_LIGHTS ];
	void getPointLightInfo( const in PointLight pointLight, const in vec3 geometryPosition, out IncidentLight light ) {
		vec3 lVector = pointLight.position - geometryPosition;
		light.direction = normalize( lVector );
		float lightDistance = length( lVector );
		light.color = pointLight.color;
		light.color *= getDistanceAttenuation( lightDistance, pointLight.distance, pointLight.decay );
		light.visible = ( light.color != vec3( 0.0 ) );
	}
#endif
#if NUM_SPOT_LIGHTS > 0
	struct SpotLight {
		vec3 position;
		vec3 direction;
		vec3 color;
		float distance;
		float decay;
		float coneCos;
		float penumbraCos;
	};
	uniform SpotLight spotLights[ NUM_SPOT_LIGHTS ];
	void getSpotLightInfo( const in SpotLight spotLight, const in vec3 geometryPosition, out IncidentLight light ) {
		vec3 lVector = spotLight.position - geometryPosition;
		light.direction = normalize( lVector );
		float angleCos = dot( light.direction, spotLight.direction );
		float spotAttenuation = getSpotAttenuation( spotLight.coneCos, spotLight.penumbraCos, angleCos );
		if ( spotAttenuation > 0.0 ) {
			float lightDistance = length( lVector );
			light.color = spotLight.color * spotAttenuation;
			light.color *= getDistanceAttenuation( lightDistance, spotLight.distance, spotLight.decay );
			light.visible = ( light.color != vec3( 0.0 ) );
		} else {
			light.color = vec3( 0.0 );
			light.visible = false;
		}
	}
#endif
#if NUM_RECT_AREA_LIGHTS > 0
	struct RectAreaLight {
		vec3 color;
		vec3 position;
		vec3 halfWidth;
		vec3 halfHeight;
	};
	uniform sampler2D ltc_1;	uniform sampler2D ltc_2;
	uniform RectAreaLight rectAreaLights[ NUM_RECT_AREA_LIGHTS ];
#endif
#if NUM_HEMI_LIGHTS > 0
	struct HemisphereLight {
		vec3 direction;
		vec3 skyColor;
		vec3 groundColor;
	};
	uniform HemisphereLight hemisphereLights[ NUM_HEMI_LIGHTS ];
	vec3 getHemisphereLightIrradiance( const in HemisphereLight hemiLight, const in vec3 normal ) {
		float dotNL = dot( normal, hemiLight.direction );
		float hemiDiffuseWeight = 0.5 * dotNL + 0.5;
		vec3 irradiance = mix( hemiLight.groundColor, hemiLight.skyColor, hemiDiffuseWeight );
		return irradiance;
	}
#endif`,nF=`#ifdef USE_ENVMAP
	vec3 getIBLIrradiance( const in vec3 normal ) {
		#ifdef ENVMAP_TYPE_CUBE_UV
			vec3 worldNormal = inverseTransformDirection( normal, viewMatrix );
			vec4 envMapColor = textureCubeUV( envMap, envMapRotation * worldNormal, 1.0 );
			return PI * envMapColor.rgb * envMapIntensity;
		#else
			return vec3( 0.0 );
		#endif
	}
	vec3 getIBLRadiance( const in vec3 viewDir, const in vec3 normal, const in float roughness ) {
		#ifdef ENVMAP_TYPE_CUBE_UV
			vec3 reflectVec = reflect( - viewDir, normal );
			reflectVec = normalize( mix( reflectVec, normal, pow4( roughness ) ) );
			reflectVec = inverseTransformDirection( reflectVec, viewMatrix );
			vec4 envMapColor = textureCubeUV( envMap, envMapRotation * reflectVec, roughness );
			return envMapColor.rgb * envMapIntensity;
		#else
			return vec3( 0.0 );
		#endif
	}
	#ifdef USE_ANISOTROPY
		vec3 getIBLAnisotropyRadiance( const in vec3 viewDir, const in vec3 normal, const in float roughness, const in vec3 bitangent, const in float anisotropy ) {
			#ifdef ENVMAP_TYPE_CUBE_UV
				vec3 bentNormal = cross( bitangent, viewDir );
				bentNormal = normalize( cross( bentNormal, bitangent ) );
				bentNormal = normalize( mix( bentNormal, normal, pow2( pow2( 1.0 - anisotropy * ( 1.0 - roughness ) ) ) ) );
				return getIBLRadiance( viewDir, bentNormal, roughness );
			#else
				return vec3( 0.0 );
			#endif
		}
	#endif
#endif`,iF=`ToonMaterial material;
material.diffuseColor = diffuseColor.rgb;`,aF=`varying vec3 vViewPosition;
struct ToonMaterial {
	vec3 diffuseColor;
};
void RE_Direct_Toon( const in IncidentLight directLight, const in vec3 geometryPosition, const in vec3 geometryNormal, const in vec3 geometryViewDir, const in vec3 geometryClearcoatNormal, const in ToonMaterial material, inout ReflectedLight reflectedLight ) {
	vec3 irradiance = getGradientIrradiance( geometryNormal, directLight.direction ) * directLight.color;
	reflectedLight.directDiffuse += irradiance * BRDF_Lambert( material.diffuseColor );
}
void RE_IndirectDiffuse_Toon( const in vec3 irradiance, const in vec3 geometryPosition, const in vec3 geometryNormal, const in vec3 geometryViewDir, const in vec3 geometryClearcoatNormal, const in ToonMaterial material, inout ReflectedLight reflectedLight ) {
	reflectedLight.indirectDiffuse += irradiance * BRDF_Lambert( material.diffuseColor );
}
#define RE_Direct				RE_Direct_Toon
#define RE_IndirectDiffuse		RE_IndirectDiffuse_Toon`,rF=`BlinnPhongMaterial material;
material.diffuseColor = diffuseColor.rgb;
material.specularColor = specular;
material.specularShininess = shininess;
material.specularStrength = specularStrength;`,sF=`varying vec3 vViewPosition;
struct BlinnPhongMaterial {
	vec3 diffuseColor;
	vec3 specularColor;
	float specularShininess;
	float specularStrength;
};
void RE_Direct_BlinnPhong( const in IncidentLight directLight, const in vec3 geometryPosition, const in vec3 geometryNormal, const in vec3 geometryViewDir, const in vec3 geometryClearcoatNormal, const in BlinnPhongMaterial material, inout ReflectedLight reflectedLight ) {
	float dotNL = saturate( dot( geometryNormal, directLight.direction ) );
	vec3 irradiance = dotNL * directLight.color;
	reflectedLight.directDiffuse += irradiance * BRDF_Lambert( material.diffuseColor );
	reflectedLight.directSpecular += irradiance * BRDF_BlinnPhong( directLight.direction, geometryViewDir, geometryNormal, material.specularColor, material.specularShininess ) * material.specularStrength;
}
void RE_IndirectDiffuse_BlinnPhong( const in vec3 irradiance, const in vec3 geometryPosition, const in vec3 geometryNormal, const in vec3 geometryViewDir, const in vec3 geometryClearcoatNormal, const in BlinnPhongMaterial material, inout ReflectedLight reflectedLight ) {
	reflectedLight.indirectDiffuse += irradiance * BRDF_Lambert( material.diffuseColor );
}
#define RE_Direct				RE_Direct_BlinnPhong
#define RE_IndirectDiffuse		RE_IndirectDiffuse_BlinnPhong`,oF=`PhysicalMaterial material;
material.diffuseColor = diffuseColor.rgb;
material.diffuseContribution = diffuseColor.rgb * ( 1.0 - metalnessFactor );
material.metalness = metalnessFactor;
vec3 dxy = max( abs( dFdx( nonPerturbedNormal ) ), abs( dFdy( nonPerturbedNormal ) ) );
float geometryRoughness = max( max( dxy.x, dxy.y ), dxy.z );
material.roughness = max( roughnessFactor, 0.0525 );material.roughness += geometryRoughness;
material.roughness = min( material.roughness, 1.0 );
#ifdef IOR
	material.ior = ior;
	#ifdef USE_SPECULAR
		float specularIntensityFactor = specularIntensity;
		vec3 specularColorFactor = specularColor;
		#ifdef USE_SPECULAR_COLORMAP
			specularColorFactor *= texture2D( specularColorMap, vSpecularColorMapUv ).rgb;
		#endif
		#ifdef USE_SPECULAR_INTENSITYMAP
			specularIntensityFactor *= texture2D( specularIntensityMap, vSpecularIntensityMapUv ).a;
		#endif
		material.specularF90 = mix( specularIntensityFactor, 1.0, metalnessFactor );
	#else
		float specularIntensityFactor = 1.0;
		vec3 specularColorFactor = vec3( 1.0 );
		material.specularF90 = 1.0;
	#endif
	material.specularColor = min( pow2( ( material.ior - 1.0 ) / ( material.ior + 1.0 ) ) * specularColorFactor, vec3( 1.0 ) ) * specularIntensityFactor;
	material.specularColorBlended = mix( material.specularColor, diffuseColor.rgb, metalnessFactor );
#else
	material.specularColor = vec3( 0.04 );
	material.specularColorBlended = mix( material.specularColor, diffuseColor.rgb, metalnessFactor );
	material.specularF90 = 1.0;
#endif
#ifdef USE_CLEARCOAT
	material.clearcoat = clearcoat;
	material.clearcoatRoughness = clearcoatRoughness;
	material.clearcoatF0 = vec3( 0.04 );
	material.clearcoatF90 = 1.0;
	#ifdef USE_CLEARCOATMAP
		material.clearcoat *= texture2D( clearcoatMap, vClearcoatMapUv ).x;
	#endif
	#ifdef USE_CLEARCOAT_ROUGHNESSMAP
		material.clearcoatRoughness *= texture2D( clearcoatRoughnessMap, vClearcoatRoughnessMapUv ).y;
	#endif
	material.clearcoat = saturate( material.clearcoat );	material.clearcoatRoughness = max( material.clearcoatRoughness, 0.0525 );
	material.clearcoatRoughness += geometryRoughness;
	material.clearcoatRoughness = min( material.clearcoatRoughness, 1.0 );
#endif
#ifdef USE_DISPERSION
	material.dispersion = dispersion;
#endif
#ifdef USE_IRIDESCENCE
	material.iridescence = iridescence;
	material.iridescenceIOR = iridescenceIOR;
	#ifdef USE_IRIDESCENCEMAP
		material.iridescence *= texture2D( iridescenceMap, vIridescenceMapUv ).r;
	#endif
	#ifdef USE_IRIDESCENCE_THICKNESSMAP
		material.iridescenceThickness = (iridescenceThicknessMaximum - iridescenceThicknessMinimum) * texture2D( iridescenceThicknessMap, vIridescenceThicknessMapUv ).g + iridescenceThicknessMinimum;
	#else
		material.iridescenceThickness = iridescenceThicknessMaximum;
	#endif
#endif
#ifdef USE_SHEEN
	material.sheenColor = sheenColor;
	#ifdef USE_SHEEN_COLORMAP
		material.sheenColor *= texture2D( sheenColorMap, vSheenColorMapUv ).rgb;
	#endif
	material.sheenRoughness = clamp( sheenRoughness, 0.0001, 1.0 );
	#ifdef USE_SHEEN_ROUGHNESSMAP
		material.sheenRoughness *= texture2D( sheenRoughnessMap, vSheenRoughnessMapUv ).a;
	#endif
#endif
#ifdef USE_ANISOTROPY
	#ifdef USE_ANISOTROPYMAP
		mat2 anisotropyMat = mat2( anisotropyVector.x, anisotropyVector.y, - anisotropyVector.y, anisotropyVector.x );
		vec3 anisotropyPolar = texture2D( anisotropyMap, vAnisotropyMapUv ).rgb;
		vec2 anisotropyV = anisotropyMat * normalize( 2.0 * anisotropyPolar.rg - vec2( 1.0 ) ) * anisotropyPolar.b;
	#else
		vec2 anisotropyV = anisotropyVector;
	#endif
	material.anisotropy = length( anisotropyV );
	if( material.anisotropy == 0.0 ) {
		anisotropyV = vec2( 1.0, 0.0 );
	} else {
		anisotropyV /= material.anisotropy;
		material.anisotropy = saturate( material.anisotropy );
	}
	material.alphaT = mix( pow2( material.roughness ), 1.0, pow2( material.anisotropy ) );
	material.anisotropyT = tbn[ 0 ] * anisotropyV.x + tbn[ 1 ] * anisotropyV.y;
	material.anisotropyB = tbn[ 1 ] * anisotropyV.x - tbn[ 0 ] * anisotropyV.y;
#endif`,lF=`uniform sampler2D dfgLUT;
struct PhysicalMaterial {
	vec3 diffuseColor;
	vec3 diffuseContribution;
	vec3 specularColor;
	vec3 specularColorBlended;
	float roughness;
	float metalness;
	float specularF90;
	float dispersion;
	#ifdef USE_CLEARCOAT
		float clearcoat;
		float clearcoatRoughness;
		vec3 clearcoatF0;
		float clearcoatF90;
	#endif
	#ifdef USE_IRIDESCENCE
		float iridescence;
		float iridescenceIOR;
		float iridescenceThickness;
		vec3 iridescenceFresnel;
		vec3 iridescenceF0;
		vec3 iridescenceFresnelDielectric;
		vec3 iridescenceFresnelMetallic;
	#endif
	#ifdef USE_SHEEN
		vec3 sheenColor;
		float sheenRoughness;
	#endif
	#ifdef IOR
		float ior;
	#endif
	#ifdef USE_TRANSMISSION
		float transmission;
		float transmissionAlpha;
		float thickness;
		float attenuationDistance;
		vec3 attenuationColor;
	#endif
	#ifdef USE_ANISOTROPY
		float anisotropy;
		float alphaT;
		vec3 anisotropyT;
		vec3 anisotropyB;
	#endif
};
vec3 clearcoatSpecularDirect = vec3( 0.0 );
vec3 clearcoatSpecularIndirect = vec3( 0.0 );
vec3 sheenSpecularDirect = vec3( 0.0 );
vec3 sheenSpecularIndirect = vec3(0.0 );
vec3 Schlick_to_F0( const in vec3 f, const in float f90, const in float dotVH ) {
    float x = clamp( 1.0 - dotVH, 0.0, 1.0 );
    float x2 = x * x;
    float x5 = clamp( x * x2 * x2, 0.0, 0.9999 );
    return ( f - vec3( f90 ) * x5 ) / ( 1.0 - x5 );
}
float V_GGX_SmithCorrelated( const in float alpha, const in float dotNL, const in float dotNV ) {
	float a2 = pow2( alpha );
	float gv = dotNL * sqrt( a2 + ( 1.0 - a2 ) * pow2( dotNV ) );
	float gl = dotNV * sqrt( a2 + ( 1.0 - a2 ) * pow2( dotNL ) );
	return 0.5 / max( gv + gl, EPSILON );
}
float D_GGX( const in float alpha, const in float dotNH ) {
	float a2 = pow2( alpha );
	float denom = pow2( dotNH ) * ( a2 - 1.0 ) + 1.0;
	return RECIPROCAL_PI * a2 / pow2( denom );
}
#ifdef USE_ANISOTROPY
	float V_GGX_SmithCorrelated_Anisotropic( const in float alphaT, const in float alphaB, const in float dotTV, const in float dotBV, const in float dotTL, const in float dotBL, const in float dotNV, const in float dotNL ) {
		float gv = dotNL * length( vec3( alphaT * dotTV, alphaB * dotBV, dotNV ) );
		float gl = dotNV * length( vec3( alphaT * dotTL, alphaB * dotBL, dotNL ) );
		float v = 0.5 / ( gv + gl );
		return v;
	}
	float D_GGX_Anisotropic( const in float alphaT, const in float alphaB, const in float dotNH, const in float dotTH, const in float dotBH ) {
		float a2 = alphaT * alphaB;
		highp vec3 v = vec3( alphaB * dotTH, alphaT * dotBH, a2 * dotNH );
		highp float v2 = dot( v, v );
		float w2 = a2 / v2;
		return RECIPROCAL_PI * a2 * pow2 ( w2 );
	}
#endif
#ifdef USE_CLEARCOAT
	vec3 BRDF_GGX_Clearcoat( const in vec3 lightDir, const in vec3 viewDir, const in vec3 normal, const in PhysicalMaterial material) {
		vec3 f0 = material.clearcoatF0;
		float f90 = material.clearcoatF90;
		float roughness = material.clearcoatRoughness;
		float alpha = pow2( roughness );
		vec3 halfDir = normalize( lightDir + viewDir );
		float dotNL = saturate( dot( normal, lightDir ) );
		float dotNV = saturate( dot( normal, viewDir ) );
		float dotNH = saturate( dot( normal, halfDir ) );
		float dotVH = saturate( dot( viewDir, halfDir ) );
		vec3 F = F_Schlick( f0, f90, dotVH );
		float V = V_GGX_SmithCorrelated( alpha, dotNL, dotNV );
		float D = D_GGX( alpha, dotNH );
		return F * ( V * D );
	}
#endif
vec3 BRDF_GGX( const in vec3 lightDir, const in vec3 viewDir, const in vec3 normal, const in PhysicalMaterial material ) {
	vec3 f0 = material.specularColorBlended;
	float f90 = material.specularF90;
	float roughness = material.roughness;
	float alpha = pow2( roughness );
	vec3 halfDir = normalize( lightDir + viewDir );
	float dotNL = saturate( dot( normal, lightDir ) );
	float dotNV = saturate( dot( normal, viewDir ) );
	float dotNH = saturate( dot( normal, halfDir ) );
	float dotVH = saturate( dot( viewDir, halfDir ) );
	vec3 F = F_Schlick( f0, f90, dotVH );
	#ifdef USE_IRIDESCENCE
		F = mix( F, material.iridescenceFresnel, material.iridescence );
	#endif
	#ifdef USE_ANISOTROPY
		float dotTL = dot( material.anisotropyT, lightDir );
		float dotTV = dot( material.anisotropyT, viewDir );
		float dotTH = dot( material.anisotropyT, halfDir );
		float dotBL = dot( material.anisotropyB, lightDir );
		float dotBV = dot( material.anisotropyB, viewDir );
		float dotBH = dot( material.anisotropyB, halfDir );
		float V = V_GGX_SmithCorrelated_Anisotropic( material.alphaT, alpha, dotTV, dotBV, dotTL, dotBL, dotNV, dotNL );
		float D = D_GGX_Anisotropic( material.alphaT, alpha, dotNH, dotTH, dotBH );
	#else
		float V = V_GGX_SmithCorrelated( alpha, dotNL, dotNV );
		float D = D_GGX( alpha, dotNH );
	#endif
	return F * ( V * D );
}
vec2 LTC_Uv( const in vec3 N, const in vec3 V, const in float roughness ) {
	const float LUT_SIZE = 64.0;
	const float LUT_SCALE = ( LUT_SIZE - 1.0 ) / LUT_SIZE;
	const float LUT_BIAS = 0.5 / LUT_SIZE;
	float dotNV = saturate( dot( N, V ) );
	vec2 uv = vec2( roughness, sqrt( 1.0 - dotNV ) );
	uv = uv * LUT_SCALE + LUT_BIAS;
	return uv;
}
float LTC_ClippedSphereFormFactor( const in vec3 f ) {
	float l = length( f );
	return max( ( l * l + f.z ) / ( l + 1.0 ), 0.0 );
}
vec3 LTC_EdgeVectorFormFactor( const in vec3 v1, const in vec3 v2 ) {
	float x = dot( v1, v2 );
	float y = abs( x );
	float a = 0.8543985 + ( 0.4965155 + 0.0145206 * y ) * y;
	float b = 3.4175940 + ( 4.1616724 + y ) * y;
	float v = a / b;
	float theta_sintheta = ( x > 0.0 ) ? v : 0.5 * inversesqrt( max( 1.0 - x * x, 1e-7 ) ) - v;
	return cross( v1, v2 ) * theta_sintheta;
}
vec3 LTC_Evaluate( const in vec3 N, const in vec3 V, const in vec3 P, const in mat3 mInv, const in vec3 rectCoords[ 4 ] ) {
	vec3 v1 = rectCoords[ 1 ] - rectCoords[ 0 ];
	vec3 v2 = rectCoords[ 3 ] - rectCoords[ 0 ];
	vec3 lightNormal = cross( v1, v2 );
	if( dot( lightNormal, P - rectCoords[ 0 ] ) < 0.0 ) return vec3( 0.0 );
	vec3 T1, T2;
	T1 = normalize( V - N * dot( V, N ) );
	T2 = - cross( N, T1 );
	mat3 mat = mInv * transpose( mat3( T1, T2, N ) );
	vec3 coords[ 4 ];
	coords[ 0 ] = mat * ( rectCoords[ 0 ] - P );
	coords[ 1 ] = mat * ( rectCoords[ 1 ] - P );
	coords[ 2 ] = mat * ( rectCoords[ 2 ] - P );
	coords[ 3 ] = mat * ( rectCoords[ 3 ] - P );
	coords[ 0 ] = normalize( coords[ 0 ] );
	coords[ 1 ] = normalize( coords[ 1 ] );
	coords[ 2 ] = normalize( coords[ 2 ] );
	coords[ 3 ] = normalize( coords[ 3 ] );
	vec3 vectorFormFactor = vec3( 0.0 );
	vectorFormFactor += LTC_EdgeVectorFormFactor( coords[ 0 ], coords[ 1 ] );
	vectorFormFactor += LTC_EdgeVectorFormFactor( coords[ 1 ], coords[ 2 ] );
	vectorFormFactor += LTC_EdgeVectorFormFactor( coords[ 2 ], coords[ 3 ] );
	vectorFormFactor += LTC_EdgeVectorFormFactor( coords[ 3 ], coords[ 0 ] );
	float result = LTC_ClippedSphereFormFactor( vectorFormFactor );
	return vec3( result );
}
#if defined( USE_SHEEN )
float D_Charlie( float roughness, float dotNH ) {
	float alpha = pow2( roughness );
	float invAlpha = 1.0 / alpha;
	float cos2h = dotNH * dotNH;
	float sin2h = max( 1.0 - cos2h, 0.0078125 );
	return ( 2.0 + invAlpha ) * pow( sin2h, invAlpha * 0.5 ) / ( 2.0 * PI );
}
float V_Neubelt( float dotNV, float dotNL ) {
	return saturate( 1.0 / ( 4.0 * ( dotNL + dotNV - dotNL * dotNV ) ) );
}
vec3 BRDF_Sheen( const in vec3 lightDir, const in vec3 viewDir, const in vec3 normal, vec3 sheenColor, const in float sheenRoughness ) {
	vec3 halfDir = normalize( lightDir + viewDir );
	float dotNL = saturate( dot( normal, lightDir ) );
	float dotNV = saturate( dot( normal, viewDir ) );
	float dotNH = saturate( dot( normal, halfDir ) );
	float D = D_Charlie( sheenRoughness, dotNH );
	float V = V_Neubelt( dotNV, dotNL );
	return sheenColor * ( D * V );
}
#endif
float IBLSheenBRDF( const in vec3 normal, const in vec3 viewDir, const in float roughness ) {
	float dotNV = saturate( dot( normal, viewDir ) );
	float r2 = roughness * roughness;
	float rInv = 1.0 / ( roughness + 0.1 );
	float a = -1.9362 + 1.0678 * roughness + 0.4573 * r2 - 0.8469 * rInv;
	float b = -0.6014 + 0.5538 * roughness - 0.4670 * r2 - 0.1255 * rInv;
	float DG = exp( a * dotNV + b );
	return saturate( DG );
}
vec3 EnvironmentBRDF( const in vec3 normal, const in vec3 viewDir, const in vec3 specularColor, const in float specularF90, const in float roughness ) {
	float dotNV = saturate( dot( normal, viewDir ) );
	vec2 fab = texture2D( dfgLUT, vec2( roughness, dotNV ) ).rg;
	return specularColor * fab.x + specularF90 * fab.y;
}
#ifdef USE_IRIDESCENCE
void computeMultiscatteringIridescence( const in vec3 normal, const in vec3 viewDir, const in vec3 specularColor, const in float specularF90, const in float iridescence, const in vec3 iridescenceF0, const in float roughness, inout vec3 singleScatter, inout vec3 multiScatter ) {
#else
void computeMultiscattering( const in vec3 normal, const in vec3 viewDir, const in vec3 specularColor, const in float specularF90, const in float roughness, inout vec3 singleScatter, inout vec3 multiScatter ) {
#endif
	float dotNV = saturate( dot( normal, viewDir ) );
	vec2 fab = texture2D( dfgLUT, vec2( roughness, dotNV ) ).rg;
	#ifdef USE_IRIDESCENCE
		vec3 Fr = mix( specularColor, iridescenceF0, iridescence );
	#else
		vec3 Fr = specularColor;
	#endif
	vec3 FssEss = Fr * fab.x + specularF90 * fab.y;
	float Ess = fab.x + fab.y;
	float Ems = 1.0 - Ess;
	vec3 Favg = Fr + ( 1.0 - Fr ) * 0.047619;	vec3 Fms = FssEss * Favg / ( 1.0 - Ems * Favg );
	singleScatter += FssEss;
	multiScatter += Fms * Ems;
}
vec3 BRDF_GGX_Multiscatter( const in vec3 lightDir, const in vec3 viewDir, const in vec3 normal, const in PhysicalMaterial material ) {
	vec3 singleScatter = BRDF_GGX( lightDir, viewDir, normal, material );
	float dotNL = saturate( dot( normal, lightDir ) );
	float dotNV = saturate( dot( normal, viewDir ) );
	vec2 dfgV = texture2D( dfgLUT, vec2( material.roughness, dotNV ) ).rg;
	vec2 dfgL = texture2D( dfgLUT, vec2( material.roughness, dotNL ) ).rg;
	vec3 FssEss_V = material.specularColorBlended * dfgV.x + material.specularF90 * dfgV.y;
	vec3 FssEss_L = material.specularColorBlended * dfgL.x + material.specularF90 * dfgL.y;
	float Ess_V = dfgV.x + dfgV.y;
	float Ess_L = dfgL.x + dfgL.y;
	float Ems_V = 1.0 - Ess_V;
	float Ems_L = 1.0 - Ess_L;
	vec3 Favg = material.specularColorBlended + ( 1.0 - material.specularColorBlended ) * 0.047619;
	vec3 Fms = FssEss_V * FssEss_L * Favg / ( 1.0 - Ems_V * Ems_L * Favg + EPSILON );
	float compensationFactor = Ems_V * Ems_L;
	vec3 multiScatter = Fms * compensationFactor;
	return singleScatter + multiScatter;
}
#if NUM_RECT_AREA_LIGHTS > 0
	void RE_Direct_RectArea_Physical( const in RectAreaLight rectAreaLight, const in vec3 geometryPosition, const in vec3 geometryNormal, const in vec3 geometryViewDir, const in vec3 geometryClearcoatNormal, const in PhysicalMaterial material, inout ReflectedLight reflectedLight ) {
		vec3 normal = geometryNormal;
		vec3 viewDir = geometryViewDir;
		vec3 position = geometryPosition;
		vec3 lightPos = rectAreaLight.position;
		vec3 halfWidth = rectAreaLight.halfWidth;
		vec3 halfHeight = rectAreaLight.halfHeight;
		vec3 lightColor = rectAreaLight.color;
		float roughness = material.roughness;
		vec3 rectCoords[ 4 ];
		rectCoords[ 0 ] = lightPos + halfWidth - halfHeight;		rectCoords[ 1 ] = lightPos - halfWidth - halfHeight;
		rectCoords[ 2 ] = lightPos - halfWidth + halfHeight;
		rectCoords[ 3 ] = lightPos + halfWidth + halfHeight;
		vec2 uv = LTC_Uv( normal, viewDir, roughness );
		vec4 t1 = texture2D( ltc_1, uv );
		vec4 t2 = texture2D( ltc_2, uv );
		mat3 mInv = mat3(
			vec3( t1.x, 0, t1.y ),
			vec3(    0, 1,    0 ),
			vec3( t1.z, 0, t1.w )
		);
		vec3 fresnel = ( material.specularColorBlended * t2.x + ( vec3( 1.0 ) - material.specularColorBlended ) * t2.y );
		reflectedLight.directSpecular += lightColor * fresnel * LTC_Evaluate( normal, viewDir, position, mInv, rectCoords );
		reflectedLight.directDiffuse += lightColor * material.diffuseContribution * LTC_Evaluate( normal, viewDir, position, mat3( 1.0 ), rectCoords );
	}
#endif
void RE_Direct_Physical( const in IncidentLight directLight, const in vec3 geometryPosition, const in vec3 geometryNormal, const in vec3 geometryViewDir, const in vec3 geometryClearcoatNormal, const in PhysicalMaterial material, inout ReflectedLight reflectedLight ) {
	float dotNL = saturate( dot( geometryNormal, directLight.direction ) );
	vec3 irradiance = dotNL * directLight.color;
	#ifdef USE_CLEARCOAT
		float dotNLcc = saturate( dot( geometryClearcoatNormal, directLight.direction ) );
		vec3 ccIrradiance = dotNLcc * directLight.color;
		clearcoatSpecularDirect += ccIrradiance * BRDF_GGX_Clearcoat( directLight.direction, geometryViewDir, geometryClearcoatNormal, material );
	#endif
	#ifdef USE_SHEEN
 
 		sheenSpecularDirect += irradiance * BRDF_Sheen( directLight.direction, geometryViewDir, geometryNormal, material.sheenColor, material.sheenRoughness );
 
 		float sheenAlbedoV = IBLSheenBRDF( geometryNormal, geometryViewDir, material.sheenRoughness );
 		float sheenAlbedoL = IBLSheenBRDF( geometryNormal, directLight.direction, material.sheenRoughness );
 
 		float sheenEnergyComp = 1.0 - max3( material.sheenColor ) * max( sheenAlbedoV, sheenAlbedoL );
 
 		irradiance *= sheenEnergyComp;
 
 	#endif
	reflectedLight.directSpecular += irradiance * BRDF_GGX_Multiscatter( directLight.direction, geometryViewDir, geometryNormal, material );
	reflectedLight.directDiffuse += irradiance * BRDF_Lambert( material.diffuseContribution );
}
void RE_IndirectDiffuse_Physical( const in vec3 irradiance, const in vec3 geometryPosition, const in vec3 geometryNormal, const in vec3 geometryViewDir, const in vec3 geometryClearcoatNormal, const in PhysicalMaterial material, inout ReflectedLight reflectedLight ) {
	vec3 diffuse = irradiance * BRDF_Lambert( material.diffuseContribution );
	#ifdef USE_SHEEN
		float sheenAlbedo = IBLSheenBRDF( geometryNormal, geometryViewDir, material.sheenRoughness );
		float sheenEnergyComp = 1.0 - max3( material.sheenColor ) * sheenAlbedo;
		diffuse *= sheenEnergyComp;
	#endif
	reflectedLight.indirectDiffuse += diffuse;
}
void RE_IndirectSpecular_Physical( const in vec3 radiance, const in vec3 irradiance, const in vec3 clearcoatRadiance, const in vec3 geometryPosition, const in vec3 geometryNormal, const in vec3 geometryViewDir, const in vec3 geometryClearcoatNormal, const in PhysicalMaterial material, inout ReflectedLight reflectedLight) {
	#ifdef USE_CLEARCOAT
		clearcoatSpecularIndirect += clearcoatRadiance * EnvironmentBRDF( geometryClearcoatNormal, geometryViewDir, material.clearcoatF0, material.clearcoatF90, material.clearcoatRoughness );
	#endif
	#ifdef USE_SHEEN
		sheenSpecularIndirect += irradiance * material.sheenColor * IBLSheenBRDF( geometryNormal, geometryViewDir, material.sheenRoughness ) * RECIPROCAL_PI;
 	#endif
	vec3 singleScatteringDielectric = vec3( 0.0 );
	vec3 multiScatteringDielectric = vec3( 0.0 );
	vec3 singleScatteringMetallic = vec3( 0.0 );
	vec3 multiScatteringMetallic = vec3( 0.0 );
	#ifdef USE_IRIDESCENCE
		computeMultiscatteringIridescence( geometryNormal, geometryViewDir, material.specularColor, material.specularF90, material.iridescence, material.iridescenceFresnelDielectric, material.roughness, singleScatteringDielectric, multiScatteringDielectric );
		computeMultiscatteringIridescence( geometryNormal, geometryViewDir, material.diffuseColor, material.specularF90, material.iridescence, material.iridescenceFresnelMetallic, material.roughness, singleScatteringMetallic, multiScatteringMetallic );
	#else
		computeMultiscattering( geometryNormal, geometryViewDir, material.specularColor, material.specularF90, material.roughness, singleScatteringDielectric, multiScatteringDielectric );
		computeMultiscattering( geometryNormal, geometryViewDir, material.diffuseColor, material.specularF90, material.roughness, singleScatteringMetallic, multiScatteringMetallic );
	#endif
	vec3 singleScattering = mix( singleScatteringDielectric, singleScatteringMetallic, material.metalness );
	vec3 multiScattering = mix( multiScatteringDielectric, multiScatteringMetallic, material.metalness );
	vec3 totalScatteringDielectric = singleScatteringDielectric + multiScatteringDielectric;
	vec3 diffuse = material.diffuseContribution * ( 1.0 - totalScatteringDielectric );
	vec3 cosineWeightedIrradiance = irradiance * RECIPROCAL_PI;
	vec3 indirectSpecular = radiance * singleScattering;
	indirectSpecular += multiScattering * cosineWeightedIrradiance;
	vec3 indirectDiffuse = diffuse * cosineWeightedIrradiance;
	#ifdef USE_SHEEN
		float sheenAlbedo = IBLSheenBRDF( geometryNormal, geometryViewDir, material.sheenRoughness );
		float sheenEnergyComp = 1.0 - max3( material.sheenColor ) * sheenAlbedo;
		indirectSpecular *= sheenEnergyComp;
		indirectDiffuse *= sheenEnergyComp;
	#endif
	reflectedLight.indirectSpecular += indirectSpecular;
	reflectedLight.indirectDiffuse += indirectDiffuse;
}
#define RE_Direct				RE_Direct_Physical
#define RE_Direct_RectArea		RE_Direct_RectArea_Physical
#define RE_IndirectDiffuse		RE_IndirectDiffuse_Physical
#define RE_IndirectSpecular		RE_IndirectSpecular_Physical
float computeSpecularOcclusion( const in float dotNV, const in float ambientOcclusion, const in float roughness ) {
	return saturate( pow( dotNV + ambientOcclusion, exp2( - 16.0 * roughness - 1.0 ) ) - 1.0 + ambientOcclusion );
}`,cF=`
vec3 geometryPosition = - vViewPosition;
vec3 geometryNormal = normal;
vec3 geometryViewDir = ( isOrthographic ) ? vec3( 0, 0, 1 ) : normalize( vViewPosition );
vec3 geometryClearcoatNormal = vec3( 0.0 );
#ifdef USE_CLEARCOAT
	geometryClearcoatNormal = clearcoatNormal;
#endif
#ifdef USE_IRIDESCENCE
	float dotNVi = saturate( dot( normal, geometryViewDir ) );
	if ( material.iridescenceThickness == 0.0 ) {
		material.iridescence = 0.0;
	} else {
		material.iridescence = saturate( material.iridescence );
	}
	if ( material.iridescence > 0.0 ) {
		material.iridescenceFresnelDielectric = evalIridescence( 1.0, material.iridescenceIOR, dotNVi, material.iridescenceThickness, material.specularColor );
		material.iridescenceFresnelMetallic = evalIridescence( 1.0, material.iridescenceIOR, dotNVi, material.iridescenceThickness, material.diffuseColor );
		material.iridescenceFresnel = mix( material.iridescenceFresnelDielectric, material.iridescenceFresnelMetallic, material.metalness );
		material.iridescenceF0 = Schlick_to_F0( material.iridescenceFresnel, 1.0, dotNVi );
	}
#endif
IncidentLight directLight;
#if ( NUM_POINT_LIGHTS > 0 ) && defined( RE_Direct )
	PointLight pointLight;
	#if defined( USE_SHADOWMAP ) && NUM_POINT_LIGHT_SHADOWS > 0
	PointLightShadow pointLightShadow;
	#endif
	#pragma unroll_loop_start
	for ( int i = 0; i < NUM_POINT_LIGHTS; i ++ ) {
		pointLight = pointLights[ i ];
		getPointLightInfo( pointLight, geometryPosition, directLight );
		#if defined( USE_SHADOWMAP ) && ( UNROLLED_LOOP_INDEX < NUM_POINT_LIGHT_SHADOWS ) && ( defined( SHADOWMAP_TYPE_PCF ) || defined( SHADOWMAP_TYPE_BASIC ) )
		pointLightShadow = pointLightShadows[ i ];
		directLight.color *= ( directLight.visible && receiveShadow ) ? getPointShadow( pointShadowMap[ i ], pointLightShadow.shadowMapSize, pointLightShadow.shadowIntensity, pointLightShadow.shadowBias, pointLightShadow.shadowRadius, vPointShadowCoord[ i ], pointLightShadow.shadowCameraNear, pointLightShadow.shadowCameraFar ) : 1.0;
		#endif
		RE_Direct( directLight, geometryPosition, geometryNormal, geometryViewDir, geometryClearcoatNormal, material, reflectedLight );
	}
	#pragma unroll_loop_end
#endif
#if ( NUM_SPOT_LIGHTS > 0 ) && defined( RE_Direct )
	SpotLight spotLight;
	vec4 spotColor;
	vec3 spotLightCoord;
	bool inSpotLightMap;
	#if defined( USE_SHADOWMAP ) && NUM_SPOT_LIGHT_SHADOWS > 0
	SpotLightShadow spotLightShadow;
	#endif
	#pragma unroll_loop_start
	for ( int i = 0; i < NUM_SPOT_LIGHTS; i ++ ) {
		spotLight = spotLights[ i ];
		getSpotLightInfo( spotLight, geometryPosition, directLight );
		#if ( UNROLLED_LOOP_INDEX < NUM_SPOT_LIGHT_SHADOWS_WITH_MAPS )
		#define SPOT_LIGHT_MAP_INDEX UNROLLED_LOOP_INDEX
		#elif ( UNROLLED_LOOP_INDEX < NUM_SPOT_LIGHT_SHADOWS )
		#define SPOT_LIGHT_MAP_INDEX NUM_SPOT_LIGHT_MAPS
		#else
		#define SPOT_LIGHT_MAP_INDEX ( UNROLLED_LOOP_INDEX - NUM_SPOT_LIGHT_SHADOWS + NUM_SPOT_LIGHT_SHADOWS_WITH_MAPS )
		#endif
		#if ( SPOT_LIGHT_MAP_INDEX < NUM_SPOT_LIGHT_MAPS )
			spotLightCoord = vSpotLightCoord[ i ].xyz / vSpotLightCoord[ i ].w;
			inSpotLightMap = all( lessThan( abs( spotLightCoord * 2. - 1. ), vec3( 1.0 ) ) );
			spotColor = texture2D( spotLightMap[ SPOT_LIGHT_MAP_INDEX ], spotLightCoord.xy );
			directLight.color = inSpotLightMap ? directLight.color * spotColor.rgb : directLight.color;
		#endif
		#undef SPOT_LIGHT_MAP_INDEX
		#if defined( USE_SHADOWMAP ) && ( UNROLLED_LOOP_INDEX < NUM_SPOT_LIGHT_SHADOWS )
		spotLightShadow = spotLightShadows[ i ];
		directLight.color *= ( directLight.visible && receiveShadow ) ? getShadow( spotShadowMap[ i ], spotLightShadow.shadowMapSize, spotLightShadow.shadowIntensity, spotLightShadow.shadowBias, spotLightShadow.shadowRadius, vSpotLightCoord[ i ] ) : 1.0;
		#endif
		RE_Direct( directLight, geometryPosition, geometryNormal, geometryViewDir, geometryClearcoatNormal, material, reflectedLight );
	}
	#pragma unroll_loop_end
#endif
#if ( NUM_DIR_LIGHTS > 0 ) && defined( RE_Direct )
	DirectionalLight directionalLight;
	#if defined( USE_SHADOWMAP ) && NUM_DIR_LIGHT_SHADOWS > 0
	DirectionalLightShadow directionalLightShadow;
	#endif
	#pragma unroll_loop_start
	for ( int i = 0; i < NUM_DIR_LIGHTS; i ++ ) {
		directionalLight = directionalLights[ i ];
		getDirectionalLightInfo( directionalLight, directLight );
		#if defined( USE_SHADOWMAP ) && ( UNROLLED_LOOP_INDEX < NUM_DIR_LIGHT_SHADOWS )
		directionalLightShadow = directionalLightShadows[ i ];
		directLight.color *= ( directLight.visible && receiveShadow ) ? getShadow( directionalShadowMap[ i ], directionalLightShadow.shadowMapSize, directionalLightShadow.shadowIntensity, directionalLightShadow.shadowBias, directionalLightShadow.shadowRadius, vDirectionalShadowCoord[ i ] ) : 1.0;
		#endif
		RE_Direct( directLight, geometryPosition, geometryNormal, geometryViewDir, geometryClearcoatNormal, material, reflectedLight );
	}
	#pragma unroll_loop_end
#endif
#if ( NUM_RECT_AREA_LIGHTS > 0 ) && defined( RE_Direct_RectArea )
	RectAreaLight rectAreaLight;
	#pragma unroll_loop_start
	for ( int i = 0; i < NUM_RECT_AREA_LIGHTS; i ++ ) {
		rectAreaLight = rectAreaLights[ i ];
		RE_Direct_RectArea( rectAreaLight, geometryPosition, geometryNormal, geometryViewDir, geometryClearcoatNormal, material, reflectedLight );
	}
	#pragma unroll_loop_end
#endif
#if defined( RE_IndirectDiffuse )
	vec3 iblIrradiance = vec3( 0.0 );
	vec3 irradiance = getAmbientLightIrradiance( ambientLightColor );
	#if defined( USE_LIGHT_PROBES )
		irradiance += getLightProbeIrradiance( lightProbe, geometryNormal );
	#endif
	#if ( NUM_HEMI_LIGHTS > 0 )
		#pragma unroll_loop_start
		for ( int i = 0; i < NUM_HEMI_LIGHTS; i ++ ) {
			irradiance += getHemisphereLightIrradiance( hemisphereLights[ i ], geometryNormal );
		}
		#pragma unroll_loop_end
	#endif
#endif
#if defined( RE_IndirectSpecular )
	vec3 radiance = vec3( 0.0 );
	vec3 clearcoatRadiance = vec3( 0.0 );
#endif`,uF=`#if defined( RE_IndirectDiffuse )
	#ifdef USE_LIGHTMAP
		vec4 lightMapTexel = texture2D( lightMap, vLightMapUv );
		vec3 lightMapIrradiance = lightMapTexel.rgb * lightMapIntensity;
		irradiance += lightMapIrradiance;
	#endif
	#if defined( USE_ENVMAP ) && defined( STANDARD ) && defined( ENVMAP_TYPE_CUBE_UV )
		iblIrradiance += getIBLIrradiance( geometryNormal );
	#endif
#endif
#if defined( USE_ENVMAP ) && defined( RE_IndirectSpecular )
	#ifdef USE_ANISOTROPY
		radiance += getIBLAnisotropyRadiance( geometryViewDir, geometryNormal, material.roughness, material.anisotropyB, material.anisotropy );
	#else
		radiance += getIBLRadiance( geometryViewDir, geometryNormal, material.roughness );
	#endif
	#ifdef USE_CLEARCOAT
		clearcoatRadiance += getIBLRadiance( geometryViewDir, geometryClearcoatNormal, material.clearcoatRoughness );
	#endif
#endif`,fF=`#if defined( RE_IndirectDiffuse )
	RE_IndirectDiffuse( irradiance, geometryPosition, geometryNormal, geometryViewDir, geometryClearcoatNormal, material, reflectedLight );
#endif
#if defined( RE_IndirectSpecular )
	RE_IndirectSpecular( radiance, iblIrradiance, clearcoatRadiance, geometryPosition, geometryNormal, geometryViewDir, geometryClearcoatNormal, material, reflectedLight );
#endif`,hF=`#if defined( USE_LOGARITHMIC_DEPTH_BUFFER )
	gl_FragDepth = vIsPerspective == 0.0 ? gl_FragCoord.z : log2( vFragDepth ) * logDepthBufFC * 0.5;
#endif`,dF=`#if defined( USE_LOGARITHMIC_DEPTH_BUFFER )
	uniform float logDepthBufFC;
	varying float vFragDepth;
	varying float vIsPerspective;
#endif`,pF=`#ifdef USE_LOGARITHMIC_DEPTH_BUFFER
	varying float vFragDepth;
	varying float vIsPerspective;
#endif`,mF=`#ifdef USE_LOGARITHMIC_DEPTH_BUFFER
	vFragDepth = 1.0 + gl_Position.w;
	vIsPerspective = float( isPerspectiveMatrix( projectionMatrix ) );
#endif`,gF=`#ifdef USE_MAP
	vec4 sampledDiffuseColor = texture2D( map, vMapUv );
	#ifdef DECODE_VIDEO_TEXTURE
		sampledDiffuseColor = sRGBTransferEOTF( sampledDiffuseColor );
	#endif
	diffuseColor *= sampledDiffuseColor;
#endif`,vF=`#ifdef USE_MAP
	uniform sampler2D map;
#endif`,yF=`#if defined( USE_MAP ) || defined( USE_ALPHAMAP )
	#if defined( USE_POINTS_UV )
		vec2 uv = vUv;
	#else
		vec2 uv = ( uvTransform * vec3( gl_PointCoord.x, 1.0 - gl_PointCoord.y, 1 ) ).xy;
	#endif
#endif
#ifdef USE_MAP
	diffuseColor *= texture2D( map, uv );
#endif
#ifdef USE_ALPHAMAP
	diffuseColor.a *= texture2D( alphaMap, uv ).g;
#endif`,_F=`#if defined( USE_POINTS_UV )
	varying vec2 vUv;
#else
	#if defined( USE_MAP ) || defined( USE_ALPHAMAP )
		uniform mat3 uvTransform;
	#endif
#endif
#ifdef USE_MAP
	uniform sampler2D map;
#endif
#ifdef USE_ALPHAMAP
	uniform sampler2D alphaMap;
#endif`,xF=`float metalnessFactor = metalness;
#ifdef USE_METALNESSMAP
	vec4 texelMetalness = texture2D( metalnessMap, vMetalnessMapUv );
	metalnessFactor *= texelMetalness.b;
#endif`,bF=`#ifdef USE_METALNESSMAP
	uniform sampler2D metalnessMap;
#endif`,AF=`#ifdef USE_INSTANCING_MORPH
	float morphTargetInfluences[ MORPHTARGETS_COUNT ];
	float morphTargetBaseInfluence = texelFetch( morphTexture, ivec2( 0, gl_InstanceID ), 0 ).r;
	for ( int i = 0; i < MORPHTARGETS_COUNT; i ++ ) {
		morphTargetInfluences[i] =  texelFetch( morphTexture, ivec2( i + 1, gl_InstanceID ), 0 ).r;
	}
#endif`,SF=`#if defined( USE_MORPHCOLORS )
	vColor *= morphTargetBaseInfluence;
	for ( int i = 0; i < MORPHTARGETS_COUNT; i ++ ) {
		#if defined( USE_COLOR_ALPHA )
			if ( morphTargetInfluences[ i ] != 0.0 ) vColor += getMorph( gl_VertexID, i, 2 ) * morphTargetInfluences[ i ];
		#elif defined( USE_COLOR )
			if ( morphTargetInfluences[ i ] != 0.0 ) vColor += getMorph( gl_VertexID, i, 2 ).rgb * morphTargetInfluences[ i ];
		#endif
	}
#endif`,MF=`#ifdef USE_MORPHNORMALS
	objectNormal *= morphTargetBaseInfluence;
	for ( int i = 0; i < MORPHTARGETS_COUNT; i ++ ) {
		if ( morphTargetInfluences[ i ] != 0.0 ) objectNormal += getMorph( gl_VertexID, i, 1 ).xyz * morphTargetInfluences[ i ];
	}
#endif`,EF=`#ifdef USE_MORPHTARGETS
	#ifndef USE_INSTANCING_MORPH
		uniform float morphTargetBaseInfluence;
		uniform float morphTargetInfluences[ MORPHTARGETS_COUNT ];
	#endif
	uniform sampler2DArray morphTargetsTexture;
	uniform ivec2 morphTargetsTextureSize;
	vec4 getMorph( const in int vertexIndex, const in int morphTargetIndex, const in int offset ) {
		int texelIndex = vertexIndex * MORPHTARGETS_TEXTURE_STRIDE + offset;
		int y = texelIndex / morphTargetsTextureSize.x;
		int x = texelIndex - y * morphTargetsTextureSize.x;
		ivec3 morphUV = ivec3( x, y, morphTargetIndex );
		return texelFetch( morphTargetsTexture, morphUV, 0 );
	}
#endif`,TF=`#ifdef USE_MORPHTARGETS
	transformed *= morphTargetBaseInfluence;
	for ( int i = 0; i < MORPHTARGETS_COUNT; i ++ ) {
		if ( morphTargetInfluences[ i ] != 0.0 ) transformed += getMorph( gl_VertexID, i, 0 ).xyz * morphTargetInfluences[ i ];
	}
#endif`,CF=`float faceDirection = gl_FrontFacing ? 1.0 : - 1.0;
#ifdef FLAT_SHADED
	vec3 fdx = dFdx( vViewPosition );
	vec3 fdy = dFdy( vViewPosition );
	vec3 normal = normalize( cross( fdx, fdy ) );
#else
	vec3 normal = normalize( vNormal );
	#ifdef DOUBLE_SIDED
		normal *= faceDirection;
	#endif
#endif
#if defined( USE_NORMALMAP_TANGENTSPACE ) || defined( USE_CLEARCOAT_NORMALMAP ) || defined( USE_ANISOTROPY )
	#ifdef USE_TANGENT
		mat3 tbn = mat3( normalize( vTangent ), normalize( vBitangent ), normal );
	#else
		mat3 tbn = getTangentFrame( - vViewPosition, normal,
		#if defined( USE_NORMALMAP )
			vNormalMapUv
		#elif defined( USE_CLEARCOAT_NORMALMAP )
			vClearcoatNormalMapUv
		#else
			vUv
		#endif
		);
	#endif
	#if defined( DOUBLE_SIDED ) && ! defined( FLAT_SHADED )
		tbn[0] *= faceDirection;
		tbn[1] *= faceDirection;
	#endif
#endif
#ifdef USE_CLEARCOAT_NORMALMAP
	#ifdef USE_TANGENT
		mat3 tbn2 = mat3( normalize( vTangent ), normalize( vBitangent ), normal );
	#else
		mat3 tbn2 = getTangentFrame( - vViewPosition, normal, vClearcoatNormalMapUv );
	#endif
	#if defined( DOUBLE_SIDED ) && ! defined( FLAT_SHADED )
		tbn2[0] *= faceDirection;
		tbn2[1] *= faceDirection;
	#endif
#endif
vec3 nonPerturbedNormal = normal;`,RF=`#ifdef USE_NORMALMAP_OBJECTSPACE
	normal = texture2D( normalMap, vNormalMapUv ).xyz * 2.0 - 1.0;
	#ifdef FLIP_SIDED
		normal = - normal;
	#endif
	#ifdef DOUBLE_SIDED
		normal = normal * faceDirection;
	#endif
	normal = normalize( normalMatrix * normal );
#elif defined( USE_NORMALMAP_TANGENTSPACE )
	vec3 mapN = texture2D( normalMap, vNormalMapUv ).xyz * 2.0 - 1.0;
	mapN.xy *= normalScale;
	normal = normalize( tbn * mapN );
#elif defined( USE_BUMPMAP )
	normal = perturbNormalArb( - vViewPosition, normal, dHdxy_fwd(), faceDirection );
#endif`,wF=`#ifndef FLAT_SHADED
	varying vec3 vNormal;
	#ifdef USE_TANGENT
		varying vec3 vTangent;
		varying vec3 vBitangent;
	#endif
#endif`,BF=`#ifndef FLAT_SHADED
	varying vec3 vNormal;
	#ifdef USE_TANGENT
		varying vec3 vTangent;
		varying vec3 vBitangent;
	#endif
#endif`,DF=`#ifndef FLAT_SHADED
	vNormal = normalize( transformedNormal );
	#ifdef USE_TANGENT
		vTangent = normalize( transformedTangent );
		vBitangent = normalize( cross( vNormal, vTangent ) * tangent.w );
	#endif
#endif`,OF=`#ifdef USE_NORMALMAP
	uniform sampler2D normalMap;
	uniform vec2 normalScale;
#endif
#ifdef USE_NORMALMAP_OBJECTSPACE
	uniform mat3 normalMatrix;
#endif
#if ! defined ( USE_TANGENT ) && ( defined ( USE_NORMALMAP_TANGENTSPACE ) || defined ( USE_CLEARCOAT_NORMALMAP ) || defined( USE_ANISOTROPY ) )
	mat3 getTangentFrame( vec3 eye_pos, vec3 surf_norm, vec2 uv ) {
		vec3 q0 = dFdx( eye_pos.xyz );
		vec3 q1 = dFdy( eye_pos.xyz );
		vec2 st0 = dFdx( uv.st );
		vec2 st1 = dFdy( uv.st );
		vec3 N = surf_norm;
		vec3 q1perp = cross( q1, N );
		vec3 q0perp = cross( N, q0 );
		vec3 T = q1perp * st0.x + q0perp * st1.x;
		vec3 B = q1perp * st0.y + q0perp * st1.y;
		float det = max( dot( T, T ), dot( B, B ) );
		float scale = ( det == 0.0 ) ? 0.0 : inversesqrt( det );
		return mat3( T * scale, B * scale, N );
	}
#endif`,NF=`#ifdef USE_CLEARCOAT
	vec3 clearcoatNormal = nonPerturbedNormal;
#endif`,UF=`#ifdef USE_CLEARCOAT_NORMALMAP
	vec3 clearcoatMapN = texture2D( clearcoatNormalMap, vClearcoatNormalMapUv ).xyz * 2.0 - 1.0;
	clearcoatMapN.xy *= clearcoatNormalScale;
	clearcoatNormal = normalize( tbn2 * clearcoatMapN );
#endif`,LF=`#ifdef USE_CLEARCOATMAP
	uniform sampler2D clearcoatMap;
#endif
#ifdef USE_CLEARCOAT_NORMALMAP
	uniform sampler2D clearcoatNormalMap;
	uniform vec2 clearcoatNormalScale;
#endif
#ifdef USE_CLEARCOAT_ROUGHNESSMAP
	uniform sampler2D clearcoatRoughnessMap;
#endif`,IF=`#ifdef USE_IRIDESCENCEMAP
	uniform sampler2D iridescenceMap;
#endif
#ifdef USE_IRIDESCENCE_THICKNESSMAP
	uniform sampler2D iridescenceThicknessMap;
#endif`,PF=`#ifdef OPAQUE
diffuseColor.a = 1.0;
#endif
#ifdef USE_TRANSMISSION
diffuseColor.a *= material.transmissionAlpha;
#endif
gl_FragColor = vec4( outgoingLight, diffuseColor.a );`,FF=`vec3 packNormalToRGB( const in vec3 normal ) {
	return normalize( normal ) * 0.5 + 0.5;
}
vec3 unpackRGBToNormal( const in vec3 rgb ) {
	return 2.0 * rgb.xyz - 1.0;
}
const float PackUpscale = 256. / 255.;const float UnpackDownscale = 255. / 256.;const float ShiftRight8 = 1. / 256.;
const float Inv255 = 1. / 255.;
const vec4 PackFactors = vec4( 1.0, 256.0, 256.0 * 256.0, 256.0 * 256.0 * 256.0 );
const vec2 UnpackFactors2 = vec2( UnpackDownscale, 1.0 / PackFactors.g );
const vec3 UnpackFactors3 = vec3( UnpackDownscale / PackFactors.rg, 1.0 / PackFactors.b );
const vec4 UnpackFactors4 = vec4( UnpackDownscale / PackFactors.rgb, 1.0 / PackFactors.a );
vec4 packDepthToRGBA( const in float v ) {
	if( v <= 0.0 )
		return vec4( 0., 0., 0., 0. );
	if( v >= 1.0 )
		return vec4( 1., 1., 1., 1. );
	float vuf;
	float af = modf( v * PackFactors.a, vuf );
	float bf = modf( vuf * ShiftRight8, vuf );
	float gf = modf( vuf * ShiftRight8, vuf );
	return vec4( vuf * Inv255, gf * PackUpscale, bf * PackUpscale, af );
}
vec3 packDepthToRGB( const in float v ) {
	if( v <= 0.0 )
		return vec3( 0., 0., 0. );
	if( v >= 1.0 )
		return vec3( 1., 1., 1. );
	float vuf;
	float bf = modf( v * PackFactors.b, vuf );
	float gf = modf( vuf * ShiftRight8, vuf );
	return vec3( vuf * Inv255, gf * PackUpscale, bf );
}
vec2 packDepthToRG( const in float v ) {
	if( v <= 0.0 )
		return vec2( 0., 0. );
	if( v >= 1.0 )
		return vec2( 1., 1. );
	float vuf;
	float gf = modf( v * 256., vuf );
	return vec2( vuf * Inv255, gf );
}
float unpackRGBAToDepth( const in vec4 v ) {
	return dot( v, UnpackFactors4 );
}
float unpackRGBToDepth( const in vec3 v ) {
	return dot( v, UnpackFactors3 );
}
float unpackRGToDepth( const in vec2 v ) {
	return v.r * UnpackFactors2.r + v.g * UnpackFactors2.g;
}
vec4 pack2HalfToRGBA( const in vec2 v ) {
	vec4 r = vec4( v.x, fract( v.x * 255.0 ), v.y, fract( v.y * 255.0 ) );
	return vec4( r.x - r.y / 255.0, r.y, r.z - r.w / 255.0, r.w );
}
vec2 unpackRGBATo2Half( const in vec4 v ) {
	return vec2( v.x + ( v.y / 255.0 ), v.z + ( v.w / 255.0 ) );
}
float viewZToOrthographicDepth( const in float viewZ, const in float near, const in float far ) {
	return ( viewZ + near ) / ( near - far );
}
float orthographicDepthToViewZ( const in float depth, const in float near, const in float far ) {
	return depth * ( near - far ) - near;
}
float viewZToPerspectiveDepth( const in float viewZ, const in float near, const in float far ) {
	return ( ( near + viewZ ) * far ) / ( ( far - near ) * viewZ );
}
float perspectiveDepthToViewZ( const in float depth, const in float near, const in float far ) {
	return ( near * far ) / ( ( far - near ) * depth - far );
}`,zF=`#ifdef PREMULTIPLIED_ALPHA
	gl_FragColor.rgb *= gl_FragColor.a;
#endif`,HF=`vec4 mvPosition = vec4( transformed, 1.0 );
#ifdef USE_BATCHING
	mvPosition = batchingMatrix * mvPosition;
#endif
#ifdef USE_INSTANCING
	mvPosition = instanceMatrix * mvPosition;
#endif
mvPosition = modelViewMatrix * mvPosition;
gl_Position = projectionMatrix * mvPosition;`,GF=`#ifdef DITHERING
	gl_FragColor.rgb = dithering( gl_FragColor.rgb );
#endif`,VF=`#ifdef DITHERING
	vec3 dithering( vec3 color ) {
		float grid_position = rand( gl_FragCoord.xy );
		vec3 dither_shift_RGB = vec3( 0.25 / 255.0, -0.25 / 255.0, 0.25 / 255.0 );
		dither_shift_RGB = mix( 2.0 * dither_shift_RGB, -2.0 * dither_shift_RGB, grid_position );
		return color + dither_shift_RGB;
	}
#endif`,kF=`float roughnessFactor = roughness;
#ifdef USE_ROUGHNESSMAP
	vec4 texelRoughness = texture2D( roughnessMap, vRoughnessMapUv );
	roughnessFactor *= texelRoughness.g;
#endif`,XF=`#ifdef USE_ROUGHNESSMAP
	uniform sampler2D roughnessMap;
#endif`,jF=`#if NUM_SPOT_LIGHT_COORDS > 0
	varying vec4 vSpotLightCoord[ NUM_SPOT_LIGHT_COORDS ];
#endif
#if NUM_SPOT_LIGHT_MAPS > 0
	uniform sampler2D spotLightMap[ NUM_SPOT_LIGHT_MAPS ];
#endif
#ifdef USE_SHADOWMAP
	#if NUM_DIR_LIGHT_SHADOWS > 0
		#if defined( SHADOWMAP_TYPE_PCF )
			uniform sampler2DShadow directionalShadowMap[ NUM_DIR_LIGHT_SHADOWS ];
		#else
			uniform sampler2D directionalShadowMap[ NUM_DIR_LIGHT_SHADOWS ];
		#endif
		varying vec4 vDirectionalShadowCoord[ NUM_DIR_LIGHT_SHADOWS ];
		struct DirectionalLightShadow {
			float shadowIntensity;
			float shadowBias;
			float shadowNormalBias;
			float shadowRadius;
			vec2 shadowMapSize;
		};
		uniform DirectionalLightShadow directionalLightShadows[ NUM_DIR_LIGHT_SHADOWS ];
	#endif
	#if NUM_SPOT_LIGHT_SHADOWS > 0
		#if defined( SHADOWMAP_TYPE_PCF )
			uniform sampler2DShadow spotShadowMap[ NUM_SPOT_LIGHT_SHADOWS ];
		#else
			uniform sampler2D spotShadowMap[ NUM_SPOT_LIGHT_SHADOWS ];
		#endif
		struct SpotLightShadow {
			float shadowIntensity;
			float shadowBias;
			float shadowNormalBias;
			float shadowRadius;
			vec2 shadowMapSize;
		};
		uniform SpotLightShadow spotLightShadows[ NUM_SPOT_LIGHT_SHADOWS ];
	#endif
	#if NUM_POINT_LIGHT_SHADOWS > 0
		#if defined( SHADOWMAP_TYPE_PCF )
			uniform samplerCubeShadow pointShadowMap[ NUM_POINT_LIGHT_SHADOWS ];
		#elif defined( SHADOWMAP_TYPE_BASIC )
			uniform samplerCube pointShadowMap[ NUM_POINT_LIGHT_SHADOWS ];
		#endif
		varying vec4 vPointShadowCoord[ NUM_POINT_LIGHT_SHADOWS ];
		struct PointLightShadow {
			float shadowIntensity;
			float shadowBias;
			float shadowNormalBias;
			float shadowRadius;
			vec2 shadowMapSize;
			float shadowCameraNear;
			float shadowCameraFar;
		};
		uniform PointLightShadow pointLightShadows[ NUM_POINT_LIGHT_SHADOWS ];
	#endif
	#if defined( SHADOWMAP_TYPE_PCF )
		float interleavedGradientNoise( vec2 position ) {
			return fract( 52.9829189 * fract( dot( position, vec2( 0.06711056, 0.00583715 ) ) ) );
		}
		vec2 vogelDiskSample( int sampleIndex, int samplesCount, float phi ) {
			const float goldenAngle = 2.399963229728653;
			float r = sqrt( ( float( sampleIndex ) + 0.5 ) / float( samplesCount ) );
			float theta = float( sampleIndex ) * goldenAngle + phi;
			return vec2( cos( theta ), sin( theta ) ) * r;
		}
	#endif
	#if defined( SHADOWMAP_TYPE_PCF )
		float getShadow( sampler2DShadow shadowMap, vec2 shadowMapSize, float shadowIntensity, float shadowBias, float shadowRadius, vec4 shadowCoord ) {
			float shadow = 1.0;
			shadowCoord.xyz /= shadowCoord.w;
			shadowCoord.z += shadowBias;
			bool inFrustum = shadowCoord.x >= 0.0 && shadowCoord.x <= 1.0 && shadowCoord.y >= 0.0 && shadowCoord.y <= 1.0;
			bool frustumTest = inFrustum && shadowCoord.z <= 1.0;
			if ( frustumTest ) {
				vec2 texelSize = vec2( 1.0 ) / shadowMapSize;
				float radius = shadowRadius * texelSize.x;
				float phi = interleavedGradientNoise( gl_FragCoord.xy ) * 6.28318530718;
				shadow = (
					texture( shadowMap, vec3( shadowCoord.xy + vogelDiskSample( 0, 5, phi ) * radius, shadowCoord.z ) ) +
					texture( shadowMap, vec3( shadowCoord.xy + vogelDiskSample( 1, 5, phi ) * radius, shadowCoord.z ) ) +
					texture( shadowMap, vec3( shadowCoord.xy + vogelDiskSample( 2, 5, phi ) * radius, shadowCoord.z ) ) +
					texture( shadowMap, vec3( shadowCoord.xy + vogelDiskSample( 3, 5, phi ) * radius, shadowCoord.z ) ) +
					texture( shadowMap, vec3( shadowCoord.xy + vogelDiskSample( 4, 5, phi ) * radius, shadowCoord.z ) )
				) * 0.2;
			}
			return mix( 1.0, shadow, shadowIntensity );
		}
	#elif defined( SHADOWMAP_TYPE_VSM )
		float getShadow( sampler2D shadowMap, vec2 shadowMapSize, float shadowIntensity, float shadowBias, float shadowRadius, vec4 shadowCoord ) {
			float shadow = 1.0;
			shadowCoord.xyz /= shadowCoord.w;
			shadowCoord.z += shadowBias;
			bool inFrustum = shadowCoord.x >= 0.0 && shadowCoord.x <= 1.0 && shadowCoord.y >= 0.0 && shadowCoord.y <= 1.0;
			bool frustumTest = inFrustum && shadowCoord.z <= 1.0;
			if ( frustumTest ) {
				vec2 distribution = texture2D( shadowMap, shadowCoord.xy ).rg;
				float mean = distribution.x;
				float variance = distribution.y * distribution.y;
				#ifdef USE_REVERSED_DEPTH_BUFFER
					float hard_shadow = step( mean, shadowCoord.z );
				#else
					float hard_shadow = step( shadowCoord.z, mean );
				#endif
				if ( hard_shadow == 1.0 ) {
					shadow = 1.0;
				} else {
					variance = max( variance, 0.0000001 );
					float d = shadowCoord.z - mean;
					float p_max = variance / ( variance + d * d );
					p_max = clamp( ( p_max - 0.3 ) / 0.65, 0.0, 1.0 );
					shadow = max( hard_shadow, p_max );
				}
			}
			return mix( 1.0, shadow, shadowIntensity );
		}
	#else
		float getShadow( sampler2D shadowMap, vec2 shadowMapSize, float shadowIntensity, float shadowBias, float shadowRadius, vec4 shadowCoord ) {
			float shadow = 1.0;
			shadowCoord.xyz /= shadowCoord.w;
			shadowCoord.z += shadowBias;
			bool inFrustum = shadowCoord.x >= 0.0 && shadowCoord.x <= 1.0 && shadowCoord.y >= 0.0 && shadowCoord.y <= 1.0;
			bool frustumTest = inFrustum && shadowCoord.z <= 1.0;
			if ( frustumTest ) {
				float depth = texture2D( shadowMap, shadowCoord.xy ).r;
				#ifdef USE_REVERSED_DEPTH_BUFFER
					shadow = step( depth, shadowCoord.z );
				#else
					shadow = step( shadowCoord.z, depth );
				#endif
			}
			return mix( 1.0, shadow, shadowIntensity );
		}
	#endif
	#if NUM_POINT_LIGHT_SHADOWS > 0
	#if defined( SHADOWMAP_TYPE_PCF )
	float getPointShadow( samplerCubeShadow shadowMap, vec2 shadowMapSize, float shadowIntensity, float shadowBias, float shadowRadius, vec4 shadowCoord, float shadowCameraNear, float shadowCameraFar ) {
		float shadow = 1.0;
		vec3 lightToPosition = shadowCoord.xyz;
		vec3 bd3D = normalize( lightToPosition );
		vec3 absVec = abs( lightToPosition );
		float viewSpaceZ = max( max( absVec.x, absVec.y ), absVec.z );
		if ( viewSpaceZ - shadowCameraFar <= 0.0 && viewSpaceZ - shadowCameraNear >= 0.0 ) {
			float dp = ( shadowCameraFar * ( viewSpaceZ - shadowCameraNear ) ) / ( viewSpaceZ * ( shadowCameraFar - shadowCameraNear ) );
			dp += shadowBias;
			float texelSize = shadowRadius / shadowMapSize.x;
			vec3 absDir = abs( bd3D );
			vec3 tangent = absDir.x > absDir.z ? vec3( 0.0, 1.0, 0.0 ) : vec3( 1.0, 0.0, 0.0 );
			tangent = normalize( cross( bd3D, tangent ) );
			vec3 bitangent = cross( bd3D, tangent );
			float phi = interleavedGradientNoise( gl_FragCoord.xy ) * 6.28318530718;
			shadow = (
				texture( shadowMap, vec4( bd3D + ( tangent * vogelDiskSample( 0, 5, phi ).x + bitangent * vogelDiskSample( 0, 5, phi ).y ) * texelSize, dp ) ) +
				texture( shadowMap, vec4( bd3D + ( tangent * vogelDiskSample( 1, 5, phi ).x + bitangent * vogelDiskSample( 1, 5, phi ).y ) * texelSize, dp ) ) +
				texture( shadowMap, vec4( bd3D + ( tangent * vogelDiskSample( 2, 5, phi ).x + bitangent * vogelDiskSample( 2, 5, phi ).y ) * texelSize, dp ) ) +
				texture( shadowMap, vec4( bd3D + ( tangent * vogelDiskSample( 3, 5, phi ).x + bitangent * vogelDiskSample( 3, 5, phi ).y ) * texelSize, dp ) ) +
				texture( shadowMap, vec4( bd3D + ( tangent * vogelDiskSample( 4, 5, phi ).x + bitangent * vogelDiskSample( 4, 5, phi ).y ) * texelSize, dp ) )
			) * 0.2;
		}
		return mix( 1.0, shadow, shadowIntensity );
	}
	#elif defined( SHADOWMAP_TYPE_BASIC )
	float getPointShadow( samplerCube shadowMap, vec2 shadowMapSize, float shadowIntensity, float shadowBias, float shadowRadius, vec4 shadowCoord, float shadowCameraNear, float shadowCameraFar ) {
		float shadow = 1.0;
		vec3 lightToPosition = shadowCoord.xyz;
		vec3 bd3D = normalize( lightToPosition );
		vec3 absVec = abs( lightToPosition );
		float viewSpaceZ = max( max( absVec.x, absVec.y ), absVec.z );
		if ( viewSpaceZ - shadowCameraFar <= 0.0 && viewSpaceZ - shadowCameraNear >= 0.0 ) {
			float dp = ( shadowCameraFar * ( viewSpaceZ - shadowCameraNear ) ) / ( viewSpaceZ * ( shadowCameraFar - shadowCameraNear ) );
			dp += shadowBias;
			float depth = textureCube( shadowMap, bd3D ).r;
			#ifdef USE_REVERSED_DEPTH_BUFFER
				shadow = step( depth, dp );
			#else
				shadow = step( dp, depth );
			#endif
		}
		return mix( 1.0, shadow, shadowIntensity );
	}
	#endif
	#endif
#endif`,YF=`#if NUM_SPOT_LIGHT_COORDS > 0
	uniform mat4 spotLightMatrix[ NUM_SPOT_LIGHT_COORDS ];
	varying vec4 vSpotLightCoord[ NUM_SPOT_LIGHT_COORDS ];
#endif
#ifdef USE_SHADOWMAP
	#if NUM_DIR_LIGHT_SHADOWS > 0
		uniform mat4 directionalShadowMatrix[ NUM_DIR_LIGHT_SHADOWS ];
		varying vec4 vDirectionalShadowCoord[ NUM_DIR_LIGHT_SHADOWS ];
		struct DirectionalLightShadow {
			float shadowIntensity;
			float shadowBias;
			float shadowNormalBias;
			float shadowRadius;
			vec2 shadowMapSize;
		};
		uniform DirectionalLightShadow directionalLightShadows[ NUM_DIR_LIGHT_SHADOWS ];
	#endif
	#if NUM_SPOT_LIGHT_SHADOWS > 0
		struct SpotLightShadow {
			float shadowIntensity;
			float shadowBias;
			float shadowNormalBias;
			float shadowRadius;
			vec2 shadowMapSize;
		};
		uniform SpotLightShadow spotLightShadows[ NUM_SPOT_LIGHT_SHADOWS ];
	#endif
	#if NUM_POINT_LIGHT_SHADOWS > 0
		uniform mat4 pointShadowMatrix[ NUM_POINT_LIGHT_SHADOWS ];
		varying vec4 vPointShadowCoord[ NUM_POINT_LIGHT_SHADOWS ];
		struct PointLightShadow {
			float shadowIntensity;
			float shadowBias;
			float shadowNormalBias;
			float shadowRadius;
			vec2 shadowMapSize;
			float shadowCameraNear;
			float shadowCameraFar;
		};
		uniform PointLightShadow pointLightShadows[ NUM_POINT_LIGHT_SHADOWS ];
	#endif
#endif`,qF=`#if ( defined( USE_SHADOWMAP ) && ( NUM_DIR_LIGHT_SHADOWS > 0 || NUM_POINT_LIGHT_SHADOWS > 0 ) ) || ( NUM_SPOT_LIGHT_COORDS > 0 )
	vec3 shadowWorldNormal = inverseTransformDirection( transformedNormal, viewMatrix );
	vec4 shadowWorldPosition;
#endif
#if defined( USE_SHADOWMAP )
	#if NUM_DIR_LIGHT_SHADOWS > 0
		#pragma unroll_loop_start
		for ( int i = 0; i < NUM_DIR_LIGHT_SHADOWS; i ++ ) {
			shadowWorldPosition = worldPosition + vec4( shadowWorldNormal * directionalLightShadows[ i ].shadowNormalBias, 0 );
			vDirectionalShadowCoord[ i ] = directionalShadowMatrix[ i ] * shadowWorldPosition;
		}
		#pragma unroll_loop_end
	#endif
	#if NUM_POINT_LIGHT_SHADOWS > 0
		#pragma unroll_loop_start
		for ( int i = 0; i < NUM_POINT_LIGHT_SHADOWS; i ++ ) {
			shadowWorldPosition = worldPosition + vec4( shadowWorldNormal * pointLightShadows[ i ].shadowNormalBias, 0 );
			vPointShadowCoord[ i ] = pointShadowMatrix[ i ] * shadowWorldPosition;
		}
		#pragma unroll_loop_end
	#endif
#endif
#if NUM_SPOT_LIGHT_COORDS > 0
	#pragma unroll_loop_start
	for ( int i = 0; i < NUM_SPOT_LIGHT_COORDS; i ++ ) {
		shadowWorldPosition = worldPosition;
		#if ( defined( USE_SHADOWMAP ) && UNROLLED_LOOP_INDEX < NUM_SPOT_LIGHT_SHADOWS )
			shadowWorldPosition.xyz += shadowWorldNormal * spotLightShadows[ i ].shadowNormalBias;
		#endif
		vSpotLightCoord[ i ] = spotLightMatrix[ i ] * shadowWorldPosition;
	}
	#pragma unroll_loop_end
#endif`,WF=`float getShadowMask() {
	float shadow = 1.0;
	#ifdef USE_SHADOWMAP
	#if NUM_DIR_LIGHT_SHADOWS > 0
	DirectionalLightShadow directionalLight;
	#pragma unroll_loop_start
	for ( int i = 0; i < NUM_DIR_LIGHT_SHADOWS; i ++ ) {
		directionalLight = directionalLightShadows[ i ];
		shadow *= receiveShadow ? getShadow( directionalShadowMap[ i ], directionalLight.shadowMapSize, directionalLight.shadowIntensity, directionalLight.shadowBias, directionalLight.shadowRadius, vDirectionalShadowCoord[ i ] ) : 1.0;
	}
	#pragma unroll_loop_end
	#endif
	#if NUM_SPOT_LIGHT_SHADOWS > 0
	SpotLightShadow spotLight;
	#pragma unroll_loop_start
	for ( int i = 0; i < NUM_SPOT_LIGHT_SHADOWS; i ++ ) {
		spotLight = spotLightShadows[ i ];
		shadow *= receiveShadow ? getShadow( spotShadowMap[ i ], spotLight.shadowMapSize, spotLight.shadowIntensity, spotLight.shadowBias, spotLight.shadowRadius, vSpotLightCoord[ i ] ) : 1.0;
	}
	#pragma unroll_loop_end
	#endif
	#if NUM_POINT_LIGHT_SHADOWS > 0 && ( defined( SHADOWMAP_TYPE_PCF ) || defined( SHADOWMAP_TYPE_BASIC ) )
	PointLightShadow pointLight;
	#pragma unroll_loop_start
	for ( int i = 0; i < NUM_POINT_LIGHT_SHADOWS; i ++ ) {
		pointLight = pointLightShadows[ i ];
		shadow *= receiveShadow ? getPointShadow( pointShadowMap[ i ], pointLight.shadowMapSize, pointLight.shadowIntensity, pointLight.shadowBias, pointLight.shadowRadius, vPointShadowCoord[ i ], pointLight.shadowCameraNear, pointLight.shadowCameraFar ) : 1.0;
	}
	#pragma unroll_loop_end
	#endif
	#endif
	return shadow;
}`,JF=`#ifdef USE_SKINNING
	mat4 boneMatX = getBoneMatrix( skinIndex.x );
	mat4 boneMatY = getBoneMatrix( skinIndex.y );
	mat4 boneMatZ = getBoneMatrix( skinIndex.z );
	mat4 boneMatW = getBoneMatrix( skinIndex.w );
#endif`,KF=`#ifdef USE_SKINNING
	uniform mat4 bindMatrix;
	uniform mat4 bindMatrixInverse;
	uniform highp sampler2D boneTexture;
	mat4 getBoneMatrix( const in float i ) {
		int size = textureSize( boneTexture, 0 ).x;
		int j = int( i ) * 4;
		int x = j % size;
		int y = j / size;
		vec4 v1 = texelFetch( boneTexture, ivec2( x, y ), 0 );
		vec4 v2 = texelFetch( boneTexture, ivec2( x + 1, y ), 0 );
		vec4 v3 = texelFetch( boneTexture, ivec2( x + 2, y ), 0 );
		vec4 v4 = texelFetch( boneTexture, ivec2( x + 3, y ), 0 );
		return mat4( v1, v2, v3, v4 );
	}
#endif`,QF=`#ifdef USE_SKINNING
	vec4 skinVertex = bindMatrix * vec4( transformed, 1.0 );
	vec4 skinned = vec4( 0.0 );
	skinned += boneMatX * skinVertex * skinWeight.x;
	skinned += boneMatY * skinVertex * skinWeight.y;
	skinned += boneMatZ * skinVertex * skinWeight.z;
	skinned += boneMatW * skinVertex * skinWeight.w;
	transformed = ( bindMatrixInverse * skinned ).xyz;
#endif`,ZF=`#ifdef USE_SKINNING
	mat4 skinMatrix = mat4( 0.0 );
	skinMatrix += skinWeight.x * boneMatX;
	skinMatrix += skinWeight.y * boneMatY;
	skinMatrix += skinWeight.z * boneMatZ;
	skinMatrix += skinWeight.w * boneMatW;
	skinMatrix = bindMatrixInverse * skinMatrix * bindMatrix;
	objectNormal = vec4( skinMatrix * vec4( objectNormal, 0.0 ) ).xyz;
	#ifdef USE_TANGENT
		objectTangent = vec4( skinMatrix * vec4( objectTangent, 0.0 ) ).xyz;
	#endif
#endif`,$F=`float specularStrength;
#ifdef USE_SPECULARMAP
	vec4 texelSpecular = texture2D( specularMap, vSpecularMapUv );
	specularStrength = texelSpecular.r;
#else
	specularStrength = 1.0;
#endif`,ez=`#ifdef USE_SPECULARMAP
	uniform sampler2D specularMap;
#endif`,tz=`#if defined( TONE_MAPPING )
	gl_FragColor.rgb = toneMapping( gl_FragColor.rgb );
#endif`,nz=`#ifndef saturate
#define saturate( a ) clamp( a, 0.0, 1.0 )
#endif
uniform float toneMappingExposure;
vec3 LinearToneMapping( vec3 color ) {
	return saturate( toneMappingExposure * color );
}
vec3 ReinhardToneMapping( vec3 color ) {
	color *= toneMappingExposure;
	return saturate( color / ( vec3( 1.0 ) + color ) );
}
vec3 CineonToneMapping( vec3 color ) {
	color *= toneMappingExposure;
	color = max( vec3( 0.0 ), color - 0.004 );
	return pow( ( color * ( 6.2 * color + 0.5 ) ) / ( color * ( 6.2 * color + 1.7 ) + 0.06 ), vec3( 2.2 ) );
}
vec3 RRTAndODTFit( vec3 v ) {
	vec3 a = v * ( v + 0.0245786 ) - 0.000090537;
	vec3 b = v * ( 0.983729 * v + 0.4329510 ) + 0.238081;
	return a / b;
}
vec3 ACESFilmicToneMapping( vec3 color ) {
	const mat3 ACESInputMat = mat3(
		vec3( 0.59719, 0.07600, 0.02840 ),		vec3( 0.35458, 0.90834, 0.13383 ),
		vec3( 0.04823, 0.01566, 0.83777 )
	);
	const mat3 ACESOutputMat = mat3(
		vec3(  1.60475, -0.10208, -0.00327 ),		vec3( -0.53108,  1.10813, -0.07276 ),
		vec3( -0.07367, -0.00605,  1.07602 )
	);
	color *= toneMappingExposure / 0.6;
	color = ACESInputMat * color;
	color = RRTAndODTFit( color );
	color = ACESOutputMat * color;
	return saturate( color );
}
const mat3 LINEAR_REC2020_TO_LINEAR_SRGB = mat3(
	vec3( 1.6605, - 0.1246, - 0.0182 ),
	vec3( - 0.5876, 1.1329, - 0.1006 ),
	vec3( - 0.0728, - 0.0083, 1.1187 )
);
const mat3 LINEAR_SRGB_TO_LINEAR_REC2020 = mat3(
	vec3( 0.6274, 0.0691, 0.0164 ),
	vec3( 0.3293, 0.9195, 0.0880 ),
	vec3( 0.0433, 0.0113, 0.8956 )
);
vec3 agxDefaultContrastApprox( vec3 x ) {
	vec3 x2 = x * x;
	vec3 x4 = x2 * x2;
	return + 15.5 * x4 * x2
		- 40.14 * x4 * x
		+ 31.96 * x4
		- 6.868 * x2 * x
		+ 0.4298 * x2
		+ 0.1191 * x
		- 0.00232;
}
vec3 AgXToneMapping( vec3 color ) {
	const mat3 AgXInsetMatrix = mat3(
		vec3( 0.856627153315983, 0.137318972929847, 0.11189821299995 ),
		vec3( 0.0951212405381588, 0.761241990602591, 0.0767994186031903 ),
		vec3( 0.0482516061458583, 0.101439036467562, 0.811302368396859 )
	);
	const mat3 AgXOutsetMatrix = mat3(
		vec3( 1.1271005818144368, - 0.1413297634984383, - 0.14132976349843826 ),
		vec3( - 0.11060664309660323, 1.157823702216272, - 0.11060664309660294 ),
		vec3( - 0.016493938717834573, - 0.016493938717834257, 1.2519364065950405 )
	);
	const float AgxMinEv = - 12.47393;	const float AgxMaxEv = 4.026069;
	color *= toneMappingExposure;
	color = LINEAR_SRGB_TO_LINEAR_REC2020 * color;
	color = AgXInsetMatrix * color;
	color = max( color, 1e-10 );	color = log2( color );
	color = ( color - AgxMinEv ) / ( AgxMaxEv - AgxMinEv );
	color = clamp( color, 0.0, 1.0 );
	color = agxDefaultContrastApprox( color );
	color = AgXOutsetMatrix * color;
	color = pow( max( vec3( 0.0 ), color ), vec3( 2.2 ) );
	color = LINEAR_REC2020_TO_LINEAR_SRGB * color;
	color = clamp( color, 0.0, 1.0 );
	return color;
}
vec3 NeutralToneMapping( vec3 color ) {
	const float StartCompression = 0.8 - 0.04;
	const float Desaturation = 0.15;
	color *= toneMappingExposure;
	float x = min( color.r, min( color.g, color.b ) );
	float offset = x < 0.08 ? x - 6.25 * x * x : 0.04;
	color -= offset;
	float peak = max( color.r, max( color.g, color.b ) );
	if ( peak < StartCompression ) return color;
	float d = 1. - StartCompression;
	float newPeak = 1. - d * d / ( peak + d - StartCompression );
	color *= newPeak / peak;
	float g = 1. - 1. / ( Desaturation * ( peak - newPeak ) + 1. );
	return mix( color, vec3( newPeak ), g );
}
vec3 CustomToneMapping( vec3 color ) { return color; }`,iz=`#ifdef USE_TRANSMISSION
	material.transmission = transmission;
	material.transmissionAlpha = 1.0;
	material.thickness = thickness;
	material.attenuationDistance = attenuationDistance;
	material.attenuationColor = attenuationColor;
	#ifdef USE_TRANSMISSIONMAP
		material.transmission *= texture2D( transmissionMap, vTransmissionMapUv ).r;
	#endif
	#ifdef USE_THICKNESSMAP
		material.thickness *= texture2D( thicknessMap, vThicknessMapUv ).g;
	#endif
	vec3 pos = vWorldPosition;
	vec3 v = normalize( cameraPosition - pos );
	vec3 n = inverseTransformDirection( normal, viewMatrix );
	vec4 transmitted = getIBLVolumeRefraction(
		n, v, material.roughness, material.diffuseContribution, material.specularColorBlended, material.specularF90,
		pos, modelMatrix, viewMatrix, projectionMatrix, material.dispersion, material.ior, material.thickness,
		material.attenuationColor, material.attenuationDistance );
	material.transmissionAlpha = mix( material.transmissionAlpha, transmitted.a, material.transmission );
	totalDiffuse = mix( totalDiffuse, transmitted.rgb, material.transmission );
#endif`,az=`#ifdef USE_TRANSMISSION
	uniform float transmission;
	uniform float thickness;
	uniform float attenuationDistance;
	uniform vec3 attenuationColor;
	#ifdef USE_TRANSMISSIONMAP
		uniform sampler2D transmissionMap;
	#endif
	#ifdef USE_THICKNESSMAP
		uniform sampler2D thicknessMap;
	#endif
	uniform vec2 transmissionSamplerSize;
	uniform sampler2D transmissionSamplerMap;
	uniform mat4 modelMatrix;
	uniform mat4 projectionMatrix;
	varying vec3 vWorldPosition;
	float w0( float a ) {
		return ( 1.0 / 6.0 ) * ( a * ( a * ( - a + 3.0 ) - 3.0 ) + 1.0 );
	}
	float w1( float a ) {
		return ( 1.0 / 6.0 ) * ( a *  a * ( 3.0 * a - 6.0 ) + 4.0 );
	}
	float w2( float a ){
		return ( 1.0 / 6.0 ) * ( a * ( a * ( - 3.0 * a + 3.0 ) + 3.0 ) + 1.0 );
	}
	float w3( float a ) {
		return ( 1.0 / 6.0 ) * ( a * a * a );
	}
	float g0( float a ) {
		return w0( a ) + w1( a );
	}
	float g1( float a ) {
		return w2( a ) + w3( a );
	}
	float h0( float a ) {
		return - 1.0 + w1( a ) / ( w0( a ) + w1( a ) );
	}
	float h1( float a ) {
		return 1.0 + w3( a ) / ( w2( a ) + w3( a ) );
	}
	vec4 bicubic( sampler2D tex, vec2 uv, vec4 texelSize, float lod ) {
		uv = uv * texelSize.zw + 0.5;
		vec2 iuv = floor( uv );
		vec2 fuv = fract( uv );
		float g0x = g0( fuv.x );
		float g1x = g1( fuv.x );
		float h0x = h0( fuv.x );
		float h1x = h1( fuv.x );
		float h0y = h0( fuv.y );
		float h1y = h1( fuv.y );
		vec2 p0 = ( vec2( iuv.x + h0x, iuv.y + h0y ) - 0.5 ) * texelSize.xy;
		vec2 p1 = ( vec2( iuv.x + h1x, iuv.y + h0y ) - 0.5 ) * texelSize.xy;
		vec2 p2 = ( vec2( iuv.x + h0x, iuv.y + h1y ) - 0.5 ) * texelSize.xy;
		vec2 p3 = ( vec2( iuv.x + h1x, iuv.y + h1y ) - 0.5 ) * texelSize.xy;
		return g0( fuv.y ) * ( g0x * textureLod( tex, p0, lod ) + g1x * textureLod( tex, p1, lod ) ) +
			g1( fuv.y ) * ( g0x * textureLod( tex, p2, lod ) + g1x * textureLod( tex, p3, lod ) );
	}
	vec4 textureBicubic( sampler2D sampler, vec2 uv, float lod ) {
		vec2 fLodSize = vec2( textureSize( sampler, int( lod ) ) );
		vec2 cLodSize = vec2( textureSize( sampler, int( lod + 1.0 ) ) );
		vec2 fLodSizeInv = 1.0 / fLodSize;
		vec2 cLodSizeInv = 1.0 / cLodSize;
		vec4 fSample = bicubic( sampler, uv, vec4( fLodSizeInv, fLodSize ), floor( lod ) );
		vec4 cSample = bicubic( sampler, uv, vec4( cLodSizeInv, cLodSize ), ceil( lod ) );
		return mix( fSample, cSample, fract( lod ) );
	}
	vec3 getVolumeTransmissionRay( const in vec3 n, const in vec3 v, const in float thickness, const in float ior, const in mat4 modelMatrix ) {
		vec3 refractionVector = refract( - v, normalize( n ), 1.0 / ior );
		vec3 modelScale;
		modelScale.x = length( vec3( modelMatrix[ 0 ].xyz ) );
		modelScale.y = length( vec3( modelMatrix[ 1 ].xyz ) );
		modelScale.z = length( vec3( modelMatrix[ 2 ].xyz ) );
		return normalize( refractionVector ) * thickness * modelScale;
	}
	float applyIorToRoughness( const in float roughness, const in float ior ) {
		return roughness * clamp( ior * 2.0 - 2.0, 0.0, 1.0 );
	}
	vec4 getTransmissionSample( const in vec2 fragCoord, const in float roughness, const in float ior ) {
		float lod = log2( transmissionSamplerSize.x ) * applyIorToRoughness( roughness, ior );
		return textureBicubic( transmissionSamplerMap, fragCoord.xy, lod );
	}
	vec3 volumeAttenuation( const in float transmissionDistance, const in vec3 attenuationColor, const in float attenuationDistance ) {
		if ( isinf( attenuationDistance ) ) {
			return vec3( 1.0 );
		} else {
			vec3 attenuationCoefficient = -log( attenuationColor ) / attenuationDistance;
			vec3 transmittance = exp( - attenuationCoefficient * transmissionDistance );			return transmittance;
		}
	}
	vec4 getIBLVolumeRefraction( const in vec3 n, const in vec3 v, const in float roughness, const in vec3 diffuseColor,
		const in vec3 specularColor, const in float specularF90, const in vec3 position, const in mat4 modelMatrix,
		const in mat4 viewMatrix, const in mat4 projMatrix, const in float dispersion, const in float ior, const in float thickness,
		const in vec3 attenuationColor, const in float attenuationDistance ) {
		vec4 transmittedLight;
		vec3 transmittance;
		#ifdef USE_DISPERSION
			float halfSpread = ( ior - 1.0 ) * 0.025 * dispersion;
			vec3 iors = vec3( ior - halfSpread, ior, ior + halfSpread );
			for ( int i = 0; i < 3; i ++ ) {
				vec3 transmissionRay = getVolumeTransmissionRay( n, v, thickness, iors[ i ], modelMatrix );
				vec3 refractedRayExit = position + transmissionRay;
				vec4 ndcPos = projMatrix * viewMatrix * vec4( refractedRayExit, 1.0 );
				vec2 refractionCoords = ndcPos.xy / ndcPos.w;
				refractionCoords += 1.0;
				refractionCoords /= 2.0;
				vec4 transmissionSample = getTransmissionSample( refractionCoords, roughness, iors[ i ] );
				transmittedLight[ i ] = transmissionSample[ i ];
				transmittedLight.a += transmissionSample.a;
				transmittance[ i ] = diffuseColor[ i ] * volumeAttenuation( length( transmissionRay ), attenuationColor, attenuationDistance )[ i ];
			}
			transmittedLight.a /= 3.0;
		#else
			vec3 transmissionRay = getVolumeTransmissionRay( n, v, thickness, ior, modelMatrix );
			vec3 refractedRayExit = position + transmissionRay;
			vec4 ndcPos = projMatrix * viewMatrix * vec4( refractedRayExit, 1.0 );
			vec2 refractionCoords = ndcPos.xy / ndcPos.w;
			refractionCoords += 1.0;
			refractionCoords /= 2.0;
			transmittedLight = getTransmissionSample( refractionCoords, roughness, ior );
			transmittance = diffuseColor * volumeAttenuation( length( transmissionRay ), attenuationColor, attenuationDistance );
		#endif
		vec3 attenuatedColor = transmittance * transmittedLight.rgb;
		vec3 F = EnvironmentBRDF( n, v, specularColor, specularF90, roughness );
		float transmittanceFactor = ( transmittance.r + transmittance.g + transmittance.b ) / 3.0;
		return vec4( ( 1.0 - F ) * attenuatedColor, 1.0 - ( 1.0 - transmittedLight.a ) * transmittanceFactor );
	}
#endif`,rz=`#if defined( USE_UV ) || defined( USE_ANISOTROPY )
	varying vec2 vUv;
#endif
#ifdef USE_MAP
	varying vec2 vMapUv;
#endif
#ifdef USE_ALPHAMAP
	varying vec2 vAlphaMapUv;
#endif
#ifdef USE_LIGHTMAP
	varying vec2 vLightMapUv;
#endif
#ifdef USE_AOMAP
	varying vec2 vAoMapUv;
#endif
#ifdef USE_BUMPMAP
	varying vec2 vBumpMapUv;
#endif
#ifdef USE_NORMALMAP
	varying vec2 vNormalMapUv;
#endif
#ifdef USE_EMISSIVEMAP
	varying vec2 vEmissiveMapUv;
#endif
#ifdef USE_METALNESSMAP
	varying vec2 vMetalnessMapUv;
#endif
#ifdef USE_ROUGHNESSMAP
	varying vec2 vRoughnessMapUv;
#endif
#ifdef USE_ANISOTROPYMAP
	varying vec2 vAnisotropyMapUv;
#endif
#ifdef USE_CLEARCOATMAP
	varying vec2 vClearcoatMapUv;
#endif
#ifdef USE_CLEARCOAT_NORMALMAP
	varying vec2 vClearcoatNormalMapUv;
#endif
#ifdef USE_CLEARCOAT_ROUGHNESSMAP
	varying vec2 vClearcoatRoughnessMapUv;
#endif
#ifdef USE_IRIDESCENCEMAP
	varying vec2 vIridescenceMapUv;
#endif
#ifdef USE_IRIDESCENCE_THICKNESSMAP
	varying vec2 vIridescenceThicknessMapUv;
#endif
#ifdef USE_SHEEN_COLORMAP
	varying vec2 vSheenColorMapUv;
#endif
#ifdef USE_SHEEN_ROUGHNESSMAP
	varying vec2 vSheenRoughnessMapUv;
#endif
#ifdef USE_SPECULARMAP
	varying vec2 vSpecularMapUv;
#endif
#ifdef USE_SPECULAR_COLORMAP
	varying vec2 vSpecularColorMapUv;
#endif
#ifdef USE_SPECULAR_INTENSITYMAP
	varying vec2 vSpecularIntensityMapUv;
#endif
#ifdef USE_TRANSMISSIONMAP
	uniform mat3 transmissionMapTransform;
	varying vec2 vTransmissionMapUv;
#endif
#ifdef USE_THICKNESSMAP
	uniform mat3 thicknessMapTransform;
	varying vec2 vThicknessMapUv;
#endif`,sz=`#if defined( USE_UV ) || defined( USE_ANISOTROPY )
	varying vec2 vUv;
#endif
#ifdef USE_MAP
	uniform mat3 mapTransform;
	varying vec2 vMapUv;
#endif
#ifdef USE_ALPHAMAP
	uniform mat3 alphaMapTransform;
	varying vec2 vAlphaMapUv;
#endif
#ifdef USE_LIGHTMAP
	uniform mat3 lightMapTransform;
	varying vec2 vLightMapUv;
#endif
#ifdef USE_AOMAP
	uniform mat3 aoMapTransform;
	varying vec2 vAoMapUv;
#endif
#ifdef USE_BUMPMAP
	uniform mat3 bumpMapTransform;
	varying vec2 vBumpMapUv;
#endif
#ifdef USE_NORMALMAP
	uniform mat3 normalMapTransform;
	varying vec2 vNormalMapUv;
#endif
#ifdef USE_DISPLACEMENTMAP
	uniform mat3 displacementMapTransform;
	varying vec2 vDisplacementMapUv;
#endif
#ifdef USE_EMISSIVEMAP
	uniform mat3 emissiveMapTransform;
	varying vec2 vEmissiveMapUv;
#endif
#ifdef USE_METALNESSMAP
	uniform mat3 metalnessMapTransform;
	varying vec2 vMetalnessMapUv;
#endif
#ifdef USE_ROUGHNESSMAP
	uniform mat3 roughnessMapTransform;
	varying vec2 vRoughnessMapUv;
#endif
#ifdef USE_ANISOTROPYMAP
	uniform mat3 anisotropyMapTransform;
	varying vec2 vAnisotropyMapUv;
#endif
#ifdef USE_CLEARCOATMAP
	uniform mat3 clearcoatMapTransform;
	varying vec2 vClearcoatMapUv;
#endif
#ifdef USE_CLEARCOAT_NORMALMAP
	uniform mat3 clearcoatNormalMapTransform;
	varying vec2 vClearcoatNormalMapUv;
#endif
#ifdef USE_CLEARCOAT_ROUGHNESSMAP
	uniform mat3 clearcoatRoughnessMapTransform;
	varying vec2 vClearcoatRoughnessMapUv;
#endif
#ifdef USE_SHEEN_COLORMAP
	uniform mat3 sheenColorMapTransform;
	varying vec2 vSheenColorMapUv;
#endif
#ifdef USE_SHEEN_ROUGHNESSMAP
	uniform mat3 sheenRoughnessMapTransform;
	varying vec2 vSheenRoughnessMapUv;
#endif
#ifdef USE_IRIDESCENCEMAP
	uniform mat3 iridescenceMapTransform;
	varying vec2 vIridescenceMapUv;
#endif
#ifdef USE_IRIDESCENCE_THICKNESSMAP
	uniform mat3 iridescenceThicknessMapTransform;
	varying vec2 vIridescenceThicknessMapUv;
#endif
#ifdef USE_SPECULARMAP
	uniform mat3 specularMapTransform;
	varying vec2 vSpecularMapUv;
#endif
#ifdef USE_SPECULAR_COLORMAP
	uniform mat3 specularColorMapTransform;
	varying vec2 vSpecularColorMapUv;
#endif
#ifdef USE_SPECULAR_INTENSITYMAP
	uniform mat3 specularIntensityMapTransform;
	varying vec2 vSpecularIntensityMapUv;
#endif
#ifdef USE_TRANSMISSIONMAP
	uniform mat3 transmissionMapTransform;
	varying vec2 vTransmissionMapUv;
#endif
#ifdef USE_THICKNESSMAP
	uniform mat3 thicknessMapTransform;
	varying vec2 vThicknessMapUv;
#endif`,oz=`#if defined( USE_UV ) || defined( USE_ANISOTROPY )
	vUv = vec3( uv, 1 ).xy;
#endif
#ifdef USE_MAP
	vMapUv = ( mapTransform * vec3( MAP_UV, 1 ) ).xy;
#endif
#ifdef USE_ALPHAMAP
	vAlphaMapUv = ( alphaMapTransform * vec3( ALPHAMAP_UV, 1 ) ).xy;
#endif
#ifdef USE_LIGHTMAP
	vLightMapUv = ( lightMapTransform * vec3( LIGHTMAP_UV, 1 ) ).xy;
#endif
#ifdef USE_AOMAP
	vAoMapUv = ( aoMapTransform * vec3( AOMAP_UV, 1 ) ).xy;
#endif
#ifdef USE_BUMPMAP
	vBumpMapUv = ( bumpMapTransform * vec3( BUMPMAP_UV, 1 ) ).xy;
#endif
#ifdef USE_NORMALMAP
	vNormalMapUv = ( normalMapTransform * vec3( NORMALMAP_UV, 1 ) ).xy;
#endif
#ifdef USE_DISPLACEMENTMAP
	vDisplacementMapUv = ( displacementMapTransform * vec3( DISPLACEMENTMAP_UV, 1 ) ).xy;
#endif
#ifdef USE_EMISSIVEMAP
	vEmissiveMapUv = ( emissiveMapTransform * vec3( EMISSIVEMAP_UV, 1 ) ).xy;
#endif
#ifdef USE_METALNESSMAP
	vMetalnessMapUv = ( metalnessMapTransform * vec3( METALNESSMAP_UV, 1 ) ).xy;
#endif
#ifdef USE_ROUGHNESSMAP
	vRoughnessMapUv = ( roughnessMapTransform * vec3( ROUGHNESSMAP_UV, 1 ) ).xy;
#endif
#ifdef USE_ANISOTROPYMAP
	vAnisotropyMapUv = ( anisotropyMapTransform * vec3( ANISOTROPYMAP_UV, 1 ) ).xy;
#endif
#ifdef USE_CLEARCOATMAP
	vClearcoatMapUv = ( clearcoatMapTransform * vec3( CLEARCOATMAP_UV, 1 ) ).xy;
#endif
#ifdef USE_CLEARCOAT_NORMALMAP
	vClearcoatNormalMapUv = ( clearcoatNormalMapTransform * vec3( CLEARCOAT_NORMALMAP_UV, 1 ) ).xy;
#endif
#ifdef USE_CLEARCOAT_ROUGHNESSMAP
	vClearcoatRoughnessMapUv = ( clearcoatRoughnessMapTransform * vec3( CLEARCOAT_ROUGHNESSMAP_UV, 1 ) ).xy;
#endif
#ifdef USE_IRIDESCENCEMAP
	vIridescenceMapUv = ( iridescenceMapTransform * vec3( IRIDESCENCEMAP_UV, 1 ) ).xy;
#endif
#ifdef USE_IRIDESCENCE_THICKNESSMAP
	vIridescenceThicknessMapUv = ( iridescenceThicknessMapTransform * vec3( IRIDESCENCE_THICKNESSMAP_UV, 1 ) ).xy;
#endif
#ifdef USE_SHEEN_COLORMAP
	vSheenColorMapUv = ( sheenColorMapTransform * vec3( SHEEN_COLORMAP_UV, 1 ) ).xy;
#endif
#ifdef USE_SHEEN_ROUGHNESSMAP
	vSheenRoughnessMapUv = ( sheenRoughnessMapTransform * vec3( SHEEN_ROUGHNESSMAP_UV, 1 ) ).xy;
#endif
#ifdef USE_SPECULARMAP
	vSpecularMapUv = ( specularMapTransform * vec3( SPECULARMAP_UV, 1 ) ).xy;
#endif
#ifdef USE_SPECULAR_COLORMAP
	vSpecularColorMapUv = ( specularColorMapTransform * vec3( SPECULAR_COLORMAP_UV, 1 ) ).xy;
#endif
#ifdef USE_SPECULAR_INTENSITYMAP
	vSpecularIntensityMapUv = ( specularIntensityMapTransform * vec3( SPECULAR_INTENSITYMAP_UV, 1 ) ).xy;
#endif
#ifdef USE_TRANSMISSIONMAP
	vTransmissionMapUv = ( transmissionMapTransform * vec3( TRANSMISSIONMAP_UV, 1 ) ).xy;
#endif
#ifdef USE_THICKNESSMAP
	vThicknessMapUv = ( thicknessMapTransform * vec3( THICKNESSMAP_UV, 1 ) ).xy;
#endif`,lz=`#if defined( USE_ENVMAP ) || defined( DISTANCE ) || defined ( USE_SHADOWMAP ) || defined ( USE_TRANSMISSION ) || NUM_SPOT_LIGHT_COORDS > 0
	vec4 worldPosition = vec4( transformed, 1.0 );
	#ifdef USE_BATCHING
		worldPosition = batchingMatrix * worldPosition;
	#endif
	#ifdef USE_INSTANCING
		worldPosition = instanceMatrix * worldPosition;
	#endif
	worldPosition = modelMatrix * worldPosition;
#endif`;const sn={alphahash_fragment:uP,alphahash_pars_fragment:fP,alphamap_fragment:hP,alphamap_pars_fragment:dP,alphatest_fragment:pP,alphatest_pars_fragment:mP,aomap_fragment:gP,aomap_pars_fragment:vP,batching_pars_vertex:yP,batching_vertex:_P,begin_vertex:xP,beginnormal_vertex:bP,bsdfs:AP,iridescence_fragment:SP,bumpmap_pars_fragment:MP,clipping_planes_fragment:EP,clipping_planes_pars_fragment:TP,clipping_planes_pars_vertex:CP,clipping_planes_vertex:RP,color_fragment:wP,color_pars_fragment:BP,color_pars_vertex:DP,color_vertex:OP,common:NP,cube_uv_reflection_fragment:UP,defaultnormal_vertex:LP,displacementmap_pars_vertex:IP,displacementmap_vertex:PP,emissivemap_fragment:FP,emissivemap_pars_fragment:zP,colorspace_fragment:HP,colorspace_pars_fragment:GP,envmap_fragment:VP,envmap_common_pars_fragment:kP,envmap_pars_fragment:XP,envmap_pars_vertex:jP,envmap_physical_pars_fragment:nF,envmap_vertex:YP,fog_vertex:qP,fog_pars_vertex:WP,fog_fragment:JP,fog_pars_fragment:KP,gradientmap_pars_fragment:QP,lightmap_pars_fragment:ZP,lights_lambert_fragment:$P,lights_lambert_pars_fragment:eF,lights_pars_begin:tF,lights_toon_fragment:iF,lights_toon_pars_fragment:aF,lights_phong_fragment:rF,lights_phong_pars_fragment:sF,lights_physical_fragment:oF,lights_physical_pars_fragment:lF,lights_fragment_begin:cF,lights_fragment_maps:uF,lights_fragment_end:fF,logdepthbuf_fragment:hF,logdepthbuf_pars_fragment:dF,logdepthbuf_pars_vertex:pF,logdepthbuf_vertex:mF,map_fragment:gF,map_pars_fragment:vF,map_particle_fragment:yF,map_particle_pars_fragment:_F,metalnessmap_fragment:xF,metalnessmap_pars_fragment:bF,morphinstance_vertex:AF,morphcolor_vertex:SF,morphnormal_vertex:MF,morphtarget_pars_vertex:EF,morphtarget_vertex:TF,normal_fragment_begin:CF,normal_fragment_maps:RF,normal_pars_fragment:wF,normal_pars_vertex:BF,normal_vertex:DF,normalmap_pars_fragment:OF,clearcoat_normal_fragment_begin:NF,clearcoat_normal_fragment_maps:UF,clearcoat_pars_fragment:LF,iridescence_pars_fragment:IF,opaque_fragment:PF,packing:FF,premultiplied_alpha_fragment:zF,project_vertex:HF,dithering_fragment:GF,dithering_pars_fragment:VF,roughnessmap_fragment:kF,roughnessmap_pars_fragment:XF,shadowmap_pars_fragment:jF,shadowmap_pars_vertex:YF,shadowmap_vertex:qF,shadowmask_pars_fragment:WF,skinbase_vertex:JF,skinning_pars_vertex:KF,skinning_vertex:QF,skinnormal_vertex:ZF,specularmap_fragment:$F,specularmap_pars_fragment:ez,tonemapping_fragment:tz,tonemapping_pars_fragment:nz,transmission_fragment:iz,transmission_pars_fragment:az,uv_pars_fragment:rz,uv_pars_vertex:sz,uv_vertex:oz,worldpos_vertex:lz,background_vert:`varying vec2 vUv;
uniform mat3 uvTransform;
void main() {
	vUv = ( uvTransform * vec3( uv, 1 ) ).xy;
	gl_Position = vec4( position.xy, 1.0, 1.0 );
}`,background_frag:`uniform sampler2D t2D;
uniform float backgroundIntensity;
varying vec2 vUv;
void main() {
	vec4 texColor = texture2D( t2D, vUv );
	#ifdef DECODE_VIDEO_TEXTURE
		texColor = vec4( mix( pow( texColor.rgb * 0.9478672986 + vec3( 0.0521327014 ), vec3( 2.4 ) ), texColor.rgb * 0.0773993808, vec3( lessThanEqual( texColor.rgb, vec3( 0.04045 ) ) ) ), texColor.w );
	#endif
	texColor.rgb *= backgroundIntensity;
	gl_FragColor = texColor;
	#include <tonemapping_fragment>
	#include <colorspace_fragment>
}`,backgroundCube_vert:`varying vec3 vWorldDirection;
#include <common>
void main() {
	vWorldDirection = transformDirection( position, modelMatrix );
	#include <begin_vertex>
	#include <project_vertex>
	gl_Position.z = gl_Position.w;
}`,backgroundCube_frag:`#ifdef ENVMAP_TYPE_CUBE
	uniform samplerCube envMap;
#elif defined( ENVMAP_TYPE_CUBE_UV )
	uniform sampler2D envMap;
#endif
uniform float flipEnvMap;
uniform float backgroundBlurriness;
uniform float backgroundIntensity;
uniform mat3 backgroundRotation;
varying vec3 vWorldDirection;
#include <cube_uv_reflection_fragment>
void main() {
	#ifdef ENVMAP_TYPE_CUBE
		vec4 texColor = textureCube( envMap, backgroundRotation * vec3( flipEnvMap * vWorldDirection.x, vWorldDirection.yz ) );
	#elif defined( ENVMAP_TYPE_CUBE_UV )
		vec4 texColor = textureCubeUV( envMap, backgroundRotation * vWorldDirection, backgroundBlurriness );
	#else
		vec4 texColor = vec4( 0.0, 0.0, 0.0, 1.0 );
	#endif
	texColor.rgb *= backgroundIntensity;
	gl_FragColor = texColor;
	#include <tonemapping_fragment>
	#include <colorspace_fragment>
}`,cube_vert:`varying vec3 vWorldDirection;
#include <common>
void main() {
	vWorldDirection = transformDirection( position, modelMatrix );
	#include <begin_vertex>
	#include <project_vertex>
	gl_Position.z = gl_Position.w;
}`,cube_frag:`uniform samplerCube tCube;
uniform float tFlip;
uniform float opacity;
varying vec3 vWorldDirection;
void main() {
	vec4 texColor = textureCube( tCube, vec3( tFlip * vWorldDirection.x, vWorldDirection.yz ) );
	gl_FragColor = texColor;
	gl_FragColor.a *= opacity;
	#include <tonemapping_fragment>
	#include <colorspace_fragment>
}`,depth_vert:`#include <common>
#include <batching_pars_vertex>
#include <uv_pars_vertex>
#include <displacementmap_pars_vertex>
#include <morphtarget_pars_vertex>
#include <skinning_pars_vertex>
#include <logdepthbuf_pars_vertex>
#include <clipping_planes_pars_vertex>
varying vec2 vHighPrecisionZW;
void main() {
	#include <uv_vertex>
	#include <batching_vertex>
	#include <skinbase_vertex>
	#include <morphinstance_vertex>
	#ifdef USE_DISPLACEMENTMAP
		#include <beginnormal_vertex>
		#include <morphnormal_vertex>
		#include <skinnormal_vertex>
	#endif
	#include <begin_vertex>
	#include <morphtarget_vertex>
	#include <skinning_vertex>
	#include <displacementmap_vertex>
	#include <project_vertex>
	#include <logdepthbuf_vertex>
	#include <clipping_planes_vertex>
	vHighPrecisionZW = gl_Position.zw;
}`,depth_frag:`#if DEPTH_PACKING == 3200
	uniform float opacity;
#endif
#include <common>
#include <packing>
#include <uv_pars_fragment>
#include <map_pars_fragment>
#include <alphamap_pars_fragment>
#include <alphatest_pars_fragment>
#include <alphahash_pars_fragment>
#include <logdepthbuf_pars_fragment>
#include <clipping_planes_pars_fragment>
varying vec2 vHighPrecisionZW;
void main() {
	vec4 diffuseColor = vec4( 1.0 );
	#include <clipping_planes_fragment>
	#if DEPTH_PACKING == 3200
		diffuseColor.a = opacity;
	#endif
	#include <map_fragment>
	#include <alphamap_fragment>
	#include <alphatest_fragment>
	#include <alphahash_fragment>
	#include <logdepthbuf_fragment>
	#ifdef USE_REVERSED_DEPTH_BUFFER
		float fragCoordZ = vHighPrecisionZW[ 0 ] / vHighPrecisionZW[ 1 ];
	#else
		float fragCoordZ = 0.5 * vHighPrecisionZW[ 0 ] / vHighPrecisionZW[ 1 ] + 0.5;
	#endif
	#if DEPTH_PACKING == 3200
		gl_FragColor = vec4( vec3( 1.0 - fragCoordZ ), opacity );
	#elif DEPTH_PACKING == 3201
		gl_FragColor = packDepthToRGBA( fragCoordZ );
	#elif DEPTH_PACKING == 3202
		gl_FragColor = vec4( packDepthToRGB( fragCoordZ ), 1.0 );
	#elif DEPTH_PACKING == 3203
		gl_FragColor = vec4( packDepthToRG( fragCoordZ ), 0.0, 1.0 );
	#endif
}`,distance_vert:`#define DISTANCE
varying vec3 vWorldPosition;
#include <common>
#include <batching_pars_vertex>
#include <uv_pars_vertex>
#include <displacementmap_pars_vertex>
#include <morphtarget_pars_vertex>
#include <skinning_pars_vertex>
#include <clipping_planes_pars_vertex>
void main() {
	#include <uv_vertex>
	#include <batching_vertex>
	#include <skinbase_vertex>
	#include <morphinstance_vertex>
	#ifdef USE_DISPLACEMENTMAP
		#include <beginnormal_vertex>
		#include <morphnormal_vertex>
		#include <skinnormal_vertex>
	#endif
	#include <begin_vertex>
	#include <morphtarget_vertex>
	#include <skinning_vertex>
	#include <displacementmap_vertex>
	#include <project_vertex>
	#include <worldpos_vertex>
	#include <clipping_planes_vertex>
	vWorldPosition = worldPosition.xyz;
}`,distance_frag:`#define DISTANCE
uniform vec3 referencePosition;
uniform float nearDistance;
uniform float farDistance;
varying vec3 vWorldPosition;
#include <common>
#include <uv_pars_fragment>
#include <map_pars_fragment>
#include <alphamap_pars_fragment>
#include <alphatest_pars_fragment>
#include <alphahash_pars_fragment>
#include <clipping_planes_pars_fragment>
void main () {
	vec4 diffuseColor = vec4( 1.0 );
	#include <clipping_planes_fragment>
	#include <map_fragment>
	#include <alphamap_fragment>
	#include <alphatest_fragment>
	#include <alphahash_fragment>
	float dist = length( vWorldPosition - referencePosition );
	dist = ( dist - nearDistance ) / ( farDistance - nearDistance );
	dist = saturate( dist );
	gl_FragColor = vec4( dist, 0.0, 0.0, 1.0 );
}`,equirect_vert:`varying vec3 vWorldDirection;
#include <common>
void main() {
	vWorldDirection = transformDirection( position, modelMatrix );
	#include <begin_vertex>
	#include <project_vertex>
}`,equirect_frag:`uniform sampler2D tEquirect;
varying vec3 vWorldDirection;
#include <common>
void main() {
	vec3 direction = normalize( vWorldDirection );
	vec2 sampleUV = equirectUv( direction );
	gl_FragColor = texture2D( tEquirect, sampleUV );
	#include <tonemapping_fragment>
	#include <colorspace_fragment>
}`,linedashed_vert:`uniform float scale;
attribute float lineDistance;
varying float vLineDistance;
#include <common>
#include <uv_pars_vertex>
#include <color_pars_vertex>
#include <fog_pars_vertex>
#include <morphtarget_pars_vertex>
#include <logdepthbuf_pars_vertex>
#include <clipping_planes_pars_vertex>
void main() {
	vLineDistance = scale * lineDistance;
	#include <uv_vertex>
	#include <color_vertex>
	#include <morphinstance_vertex>
	#include <morphcolor_vertex>
	#include <begin_vertex>
	#include <morphtarget_vertex>
	#include <project_vertex>
	#include <logdepthbuf_vertex>
	#include <clipping_planes_vertex>
	#include <fog_vertex>
}`,linedashed_frag:`uniform vec3 diffuse;
uniform float opacity;
uniform float dashSize;
uniform float totalSize;
varying float vLineDistance;
#include <common>
#include <color_pars_fragment>
#include <uv_pars_fragment>
#include <map_pars_fragment>
#include <fog_pars_fragment>
#include <logdepthbuf_pars_fragment>
#include <clipping_planes_pars_fragment>
void main() {
	vec4 diffuseColor = vec4( diffuse, opacity );
	#include <clipping_planes_fragment>
	if ( mod( vLineDistance, totalSize ) > dashSize ) {
		discard;
	}
	vec3 outgoingLight = vec3( 0.0 );
	#include <logdepthbuf_fragment>
	#include <map_fragment>
	#include <color_fragment>
	outgoingLight = diffuseColor.rgb;
	#include <opaque_fragment>
	#include <tonemapping_fragment>
	#include <colorspace_fragment>
	#include <fog_fragment>
	#include <premultiplied_alpha_fragment>
}`,meshbasic_vert:`#include <common>
#include <batching_pars_vertex>
#include <uv_pars_vertex>
#include <envmap_pars_vertex>
#include <color_pars_vertex>
#include <fog_pars_vertex>
#include <morphtarget_pars_vertex>
#include <skinning_pars_vertex>
#include <logdepthbuf_pars_vertex>
#include <clipping_planes_pars_vertex>
void main() {
	#include <uv_vertex>
	#include <color_vertex>
	#include <morphinstance_vertex>
	#include <morphcolor_vertex>
	#include <batching_vertex>
	#if defined ( USE_ENVMAP ) || defined ( USE_SKINNING )
		#include <beginnormal_vertex>
		#include <morphnormal_vertex>
		#include <skinbase_vertex>
		#include <skinnormal_vertex>
		#include <defaultnormal_vertex>
	#endif
	#include <begin_vertex>
	#include <morphtarget_vertex>
	#include <skinning_vertex>
	#include <project_vertex>
	#include <logdepthbuf_vertex>
	#include <clipping_planes_vertex>
	#include <worldpos_vertex>
	#include <envmap_vertex>
	#include <fog_vertex>
}`,meshbasic_frag:`uniform vec3 diffuse;
uniform float opacity;
#ifndef FLAT_SHADED
	varying vec3 vNormal;
#endif
#include <common>
#include <dithering_pars_fragment>
#include <color_pars_fragment>
#include <uv_pars_fragment>
#include <map_pars_fragment>
#include <alphamap_pars_fragment>
#include <alphatest_pars_fragment>
#include <alphahash_pars_fragment>
#include <aomap_pars_fragment>
#include <lightmap_pars_fragment>
#include <envmap_common_pars_fragment>
#include <envmap_pars_fragment>
#include <fog_pars_fragment>
#include <specularmap_pars_fragment>
#include <logdepthbuf_pars_fragment>
#include <clipping_planes_pars_fragment>
void main() {
	vec4 diffuseColor = vec4( diffuse, opacity );
	#include <clipping_planes_fragment>
	#include <logdepthbuf_fragment>
	#include <map_fragment>
	#include <color_fragment>
	#include <alphamap_fragment>
	#include <alphatest_fragment>
	#include <alphahash_fragment>
	#include <specularmap_fragment>
	ReflectedLight reflectedLight = ReflectedLight( vec3( 0.0 ), vec3( 0.0 ), vec3( 0.0 ), vec3( 0.0 ) );
	#ifdef USE_LIGHTMAP
		vec4 lightMapTexel = texture2D( lightMap, vLightMapUv );
		reflectedLight.indirectDiffuse += lightMapTexel.rgb * lightMapIntensity * RECIPROCAL_PI;
	#else
		reflectedLight.indirectDiffuse += vec3( 1.0 );
	#endif
	#include <aomap_fragment>
	reflectedLight.indirectDiffuse *= diffuseColor.rgb;
	vec3 outgoingLight = reflectedLight.indirectDiffuse;
	#include <envmap_fragment>
	#include <opaque_fragment>
	#include <tonemapping_fragment>
	#include <colorspace_fragment>
	#include <fog_fragment>
	#include <premultiplied_alpha_fragment>
	#include <dithering_fragment>
}`,meshlambert_vert:`#define LAMBERT
varying vec3 vViewPosition;
#include <common>
#include <batching_pars_vertex>
#include <uv_pars_vertex>
#include <displacementmap_pars_vertex>
#include <envmap_pars_vertex>
#include <color_pars_vertex>
#include <fog_pars_vertex>
#include <normal_pars_vertex>
#include <morphtarget_pars_vertex>
#include <skinning_pars_vertex>
#include <shadowmap_pars_vertex>
#include <logdepthbuf_pars_vertex>
#include <clipping_planes_pars_vertex>
void main() {
	#include <uv_vertex>
	#include <color_vertex>
	#include <morphinstance_vertex>
	#include <morphcolor_vertex>
	#include <batching_vertex>
	#include <beginnormal_vertex>
	#include <morphnormal_vertex>
	#include <skinbase_vertex>
	#include <skinnormal_vertex>
	#include <defaultnormal_vertex>
	#include <normal_vertex>
	#include <begin_vertex>
	#include <morphtarget_vertex>
	#include <skinning_vertex>
	#include <displacementmap_vertex>
	#include <project_vertex>
	#include <logdepthbuf_vertex>
	#include <clipping_planes_vertex>
	vViewPosition = - mvPosition.xyz;
	#include <worldpos_vertex>
	#include <envmap_vertex>
	#include <shadowmap_vertex>
	#include <fog_vertex>
}`,meshlambert_frag:`#define LAMBERT
uniform vec3 diffuse;
uniform vec3 emissive;
uniform float opacity;
#include <common>
#include <dithering_pars_fragment>
#include <color_pars_fragment>
#include <uv_pars_fragment>
#include <map_pars_fragment>
#include <alphamap_pars_fragment>
#include <alphatest_pars_fragment>
#include <alphahash_pars_fragment>
#include <aomap_pars_fragment>
#include <lightmap_pars_fragment>
#include <emissivemap_pars_fragment>
#include <envmap_common_pars_fragment>
#include <envmap_pars_fragment>
#include <fog_pars_fragment>
#include <bsdfs>
#include <lights_pars_begin>
#include <normal_pars_fragment>
#include <lights_lambert_pars_fragment>
#include <shadowmap_pars_fragment>
#include <bumpmap_pars_fragment>
#include <normalmap_pars_fragment>
#include <specularmap_pars_fragment>
#include <logdepthbuf_pars_fragment>
#include <clipping_planes_pars_fragment>
void main() {
	vec4 diffuseColor = vec4( diffuse, opacity );
	#include <clipping_planes_fragment>
	ReflectedLight reflectedLight = ReflectedLight( vec3( 0.0 ), vec3( 0.0 ), vec3( 0.0 ), vec3( 0.0 ) );
	vec3 totalEmissiveRadiance = emissive;
	#include <logdepthbuf_fragment>
	#include <map_fragment>
	#include <color_fragment>
	#include <alphamap_fragment>
	#include <alphatest_fragment>
	#include <alphahash_fragment>
	#include <specularmap_fragment>
	#include <normal_fragment_begin>
	#include <normal_fragment_maps>
	#include <emissivemap_fragment>
	#include <lights_lambert_fragment>
	#include <lights_fragment_begin>
	#include <lights_fragment_maps>
	#include <lights_fragment_end>
	#include <aomap_fragment>
	vec3 outgoingLight = reflectedLight.directDiffuse + reflectedLight.indirectDiffuse + totalEmissiveRadiance;
	#include <envmap_fragment>
	#include <opaque_fragment>
	#include <tonemapping_fragment>
	#include <colorspace_fragment>
	#include <fog_fragment>
	#include <premultiplied_alpha_fragment>
	#include <dithering_fragment>
}`,meshmatcap_vert:`#define MATCAP
varying vec3 vViewPosition;
#include <common>
#include <batching_pars_vertex>
#include <uv_pars_vertex>
#include <color_pars_vertex>
#include <displacementmap_pars_vertex>
#include <fog_pars_vertex>
#include <normal_pars_vertex>
#include <morphtarget_pars_vertex>
#include <skinning_pars_vertex>
#include <logdepthbuf_pars_vertex>
#include <clipping_planes_pars_vertex>
void main() {
	#include <uv_vertex>
	#include <color_vertex>
	#include <morphinstance_vertex>
	#include <morphcolor_vertex>
	#include <batching_vertex>
	#include <beginnormal_vertex>
	#include <morphnormal_vertex>
	#include <skinbase_vertex>
	#include <skinnormal_vertex>
	#include <defaultnormal_vertex>
	#include <normal_vertex>
	#include <begin_vertex>
	#include <morphtarget_vertex>
	#include <skinning_vertex>
	#include <displacementmap_vertex>
	#include <project_vertex>
	#include <logdepthbuf_vertex>
	#include <clipping_planes_vertex>
	#include <fog_vertex>
	vViewPosition = - mvPosition.xyz;
}`,meshmatcap_frag:`#define MATCAP
uniform vec3 diffuse;
uniform float opacity;
uniform sampler2D matcap;
varying vec3 vViewPosition;
#include <common>
#include <dithering_pars_fragment>
#include <color_pars_fragment>
#include <uv_pars_fragment>
#include <map_pars_fragment>
#include <alphamap_pars_fragment>
#include <alphatest_pars_fragment>
#include <alphahash_pars_fragment>
#include <fog_pars_fragment>
#include <normal_pars_fragment>
#include <bumpmap_pars_fragment>
#include <normalmap_pars_fragment>
#include <logdepthbuf_pars_fragment>
#include <clipping_planes_pars_fragment>
void main() {
	vec4 diffuseColor = vec4( diffuse, opacity );
	#include <clipping_planes_fragment>
	#include <logdepthbuf_fragment>
	#include <map_fragment>
	#include <color_fragment>
	#include <alphamap_fragment>
	#include <alphatest_fragment>
	#include <alphahash_fragment>
	#include <normal_fragment_begin>
	#include <normal_fragment_maps>
	vec3 viewDir = normalize( vViewPosition );
	vec3 x = normalize( vec3( viewDir.z, 0.0, - viewDir.x ) );
	vec3 y = cross( viewDir, x );
	vec2 uv = vec2( dot( x, normal ), dot( y, normal ) ) * 0.495 + 0.5;
	#ifdef USE_MATCAP
		vec4 matcapColor = texture2D( matcap, uv );
	#else
		vec4 matcapColor = vec4( vec3( mix( 0.2, 0.8, uv.y ) ), 1.0 );
	#endif
	vec3 outgoingLight = diffuseColor.rgb * matcapColor.rgb;
	#include <opaque_fragment>
	#include <tonemapping_fragment>
	#include <colorspace_fragment>
	#include <fog_fragment>
	#include <premultiplied_alpha_fragment>
	#include <dithering_fragment>
}`,meshnormal_vert:`#define NORMAL
#if defined( FLAT_SHADED ) || defined( USE_BUMPMAP ) || defined( USE_NORMALMAP_TANGENTSPACE )
	varying vec3 vViewPosition;
#endif
#include <common>
#include <batching_pars_vertex>
#include <uv_pars_vertex>
#include <displacementmap_pars_vertex>
#include <normal_pars_vertex>
#include <morphtarget_pars_vertex>
#include <skinning_pars_vertex>
#include <logdepthbuf_pars_vertex>
#include <clipping_planes_pars_vertex>
void main() {
	#include <uv_vertex>
	#include <batching_vertex>
	#include <beginnormal_vertex>
	#include <morphinstance_vertex>
	#include <morphnormal_vertex>
	#include <skinbase_vertex>
	#include <skinnormal_vertex>
	#include <defaultnormal_vertex>
	#include <normal_vertex>
	#include <begin_vertex>
	#include <morphtarget_vertex>
	#include <skinning_vertex>
	#include <displacementmap_vertex>
	#include <project_vertex>
	#include <logdepthbuf_vertex>
	#include <clipping_planes_vertex>
#if defined( FLAT_SHADED ) || defined( USE_BUMPMAP ) || defined( USE_NORMALMAP_TANGENTSPACE )
	vViewPosition = - mvPosition.xyz;
#endif
}`,meshnormal_frag:`#define NORMAL
uniform float opacity;
#if defined( FLAT_SHADED ) || defined( USE_BUMPMAP ) || defined( USE_NORMALMAP_TANGENTSPACE )
	varying vec3 vViewPosition;
#endif
#include <uv_pars_fragment>
#include <normal_pars_fragment>
#include <bumpmap_pars_fragment>
#include <normalmap_pars_fragment>
#include <logdepthbuf_pars_fragment>
#include <clipping_planes_pars_fragment>
void main() {
	vec4 diffuseColor = vec4( 0.0, 0.0, 0.0, opacity );
	#include <clipping_planes_fragment>
	#include <logdepthbuf_fragment>
	#include <normal_fragment_begin>
	#include <normal_fragment_maps>
	gl_FragColor = vec4( normalize( normal ) * 0.5 + 0.5, diffuseColor.a );
	#ifdef OPAQUE
		gl_FragColor.a = 1.0;
	#endif
}`,meshphong_vert:`#define PHONG
varying vec3 vViewPosition;
#include <common>
#include <batching_pars_vertex>
#include <uv_pars_vertex>
#include <displacementmap_pars_vertex>
#include <envmap_pars_vertex>
#include <color_pars_vertex>
#include <fog_pars_vertex>
#include <normal_pars_vertex>
#include <morphtarget_pars_vertex>
#include <skinning_pars_vertex>
#include <shadowmap_pars_vertex>
#include <logdepthbuf_pars_vertex>
#include <clipping_planes_pars_vertex>
void main() {
	#include <uv_vertex>
	#include <color_vertex>
	#include <morphcolor_vertex>
	#include <batching_vertex>
	#include <beginnormal_vertex>
	#include <morphinstance_vertex>
	#include <morphnormal_vertex>
	#include <skinbase_vertex>
	#include <skinnormal_vertex>
	#include <defaultnormal_vertex>
	#include <normal_vertex>
	#include <begin_vertex>
	#include <morphtarget_vertex>
	#include <skinning_vertex>
	#include <displacementmap_vertex>
	#include <project_vertex>
	#include <logdepthbuf_vertex>
	#include <clipping_planes_vertex>
	vViewPosition = - mvPosition.xyz;
	#include <worldpos_vertex>
	#include <envmap_vertex>
	#include <shadowmap_vertex>
	#include <fog_vertex>
}`,meshphong_frag:`#define PHONG
uniform vec3 diffuse;
uniform vec3 emissive;
uniform vec3 specular;
uniform float shininess;
uniform float opacity;
#include <common>
#include <dithering_pars_fragment>
#include <color_pars_fragment>
#include <uv_pars_fragment>
#include <map_pars_fragment>
#include <alphamap_pars_fragment>
#include <alphatest_pars_fragment>
#include <alphahash_pars_fragment>
#include <aomap_pars_fragment>
#include <lightmap_pars_fragment>
#include <emissivemap_pars_fragment>
#include <envmap_common_pars_fragment>
#include <envmap_pars_fragment>
#include <fog_pars_fragment>
#include <bsdfs>
#include <lights_pars_begin>
#include <normal_pars_fragment>
#include <lights_phong_pars_fragment>
#include <shadowmap_pars_fragment>
#include <bumpmap_pars_fragment>
#include <normalmap_pars_fragment>
#include <specularmap_pars_fragment>
#include <logdepthbuf_pars_fragment>
#include <clipping_planes_pars_fragment>
void main() {
	vec4 diffuseColor = vec4( diffuse, opacity );
	#include <clipping_planes_fragment>
	ReflectedLight reflectedLight = ReflectedLight( vec3( 0.0 ), vec3( 0.0 ), vec3( 0.0 ), vec3( 0.0 ) );
	vec3 totalEmissiveRadiance = emissive;
	#include <logdepthbuf_fragment>
	#include <map_fragment>
	#include <color_fragment>
	#include <alphamap_fragment>
	#include <alphatest_fragment>
	#include <alphahash_fragment>
	#include <specularmap_fragment>
	#include <normal_fragment_begin>
	#include <normal_fragment_maps>
	#include <emissivemap_fragment>
	#include <lights_phong_fragment>
	#include <lights_fragment_begin>
	#include <lights_fragment_maps>
	#include <lights_fragment_end>
	#include <aomap_fragment>
	vec3 outgoingLight = reflectedLight.directDiffuse + reflectedLight.indirectDiffuse + reflectedLight.directSpecular + reflectedLight.indirectSpecular + totalEmissiveRadiance;
	#include <envmap_fragment>
	#include <opaque_fragment>
	#include <tonemapping_fragment>
	#include <colorspace_fragment>
	#include <fog_fragment>
	#include <premultiplied_alpha_fragment>
	#include <dithering_fragment>
}`,meshphysical_vert:`#define STANDARD
varying vec3 vViewPosition;
#ifdef USE_TRANSMISSION
	varying vec3 vWorldPosition;
#endif
#include <common>
#include <batching_pars_vertex>
#include <uv_pars_vertex>
#include <displacementmap_pars_vertex>
#include <color_pars_vertex>
#include <fog_pars_vertex>
#include <normal_pars_vertex>
#include <morphtarget_pars_vertex>
#include <skinning_pars_vertex>
#include <shadowmap_pars_vertex>
#include <logdepthbuf_pars_vertex>
#include <clipping_planes_pars_vertex>
void main() {
	#include <uv_vertex>
	#include <color_vertex>
	#include <morphinstance_vertex>
	#include <morphcolor_vertex>
	#include <batching_vertex>
	#include <beginnormal_vertex>
	#include <morphnormal_vertex>
	#include <skinbase_vertex>
	#include <skinnormal_vertex>
	#include <defaultnormal_vertex>
	#include <normal_vertex>
	#include <begin_vertex>
	#include <morphtarget_vertex>
	#include <skinning_vertex>
	#include <displacementmap_vertex>
	#include <project_vertex>
	#include <logdepthbuf_vertex>
	#include <clipping_planes_vertex>
	vViewPosition = - mvPosition.xyz;
	#include <worldpos_vertex>
	#include <shadowmap_vertex>
	#include <fog_vertex>
#ifdef USE_TRANSMISSION
	vWorldPosition = worldPosition.xyz;
#endif
}`,meshphysical_frag:`#define STANDARD
#ifdef PHYSICAL
	#define IOR
	#define USE_SPECULAR
#endif
uniform vec3 diffuse;
uniform vec3 emissive;
uniform float roughness;
uniform float metalness;
uniform float opacity;
#ifdef IOR
	uniform float ior;
#endif
#ifdef USE_SPECULAR
	uniform float specularIntensity;
	uniform vec3 specularColor;
	#ifdef USE_SPECULAR_COLORMAP
		uniform sampler2D specularColorMap;
	#endif
	#ifdef USE_SPECULAR_INTENSITYMAP
		uniform sampler2D specularIntensityMap;
	#endif
#endif
#ifdef USE_CLEARCOAT
	uniform float clearcoat;
	uniform float clearcoatRoughness;
#endif
#ifdef USE_DISPERSION
	uniform float dispersion;
#endif
#ifdef USE_IRIDESCENCE
	uniform float iridescence;
	uniform float iridescenceIOR;
	uniform float iridescenceThicknessMinimum;
	uniform float iridescenceThicknessMaximum;
#endif
#ifdef USE_SHEEN
	uniform vec3 sheenColor;
	uniform float sheenRoughness;
	#ifdef USE_SHEEN_COLORMAP
		uniform sampler2D sheenColorMap;
	#endif
	#ifdef USE_SHEEN_ROUGHNESSMAP
		uniform sampler2D sheenRoughnessMap;
	#endif
#endif
#ifdef USE_ANISOTROPY
	uniform vec2 anisotropyVector;
	#ifdef USE_ANISOTROPYMAP
		uniform sampler2D anisotropyMap;
	#endif
#endif
varying vec3 vViewPosition;
#include <common>
#include <dithering_pars_fragment>
#include <color_pars_fragment>
#include <uv_pars_fragment>
#include <map_pars_fragment>
#include <alphamap_pars_fragment>
#include <alphatest_pars_fragment>
#include <alphahash_pars_fragment>
#include <aomap_pars_fragment>
#include <lightmap_pars_fragment>
#include <emissivemap_pars_fragment>
#include <iridescence_fragment>
#include <cube_uv_reflection_fragment>
#include <envmap_common_pars_fragment>
#include <envmap_physical_pars_fragment>
#include <fog_pars_fragment>
#include <lights_pars_begin>
#include <normal_pars_fragment>
#include <lights_physical_pars_fragment>
#include <transmission_pars_fragment>
#include <shadowmap_pars_fragment>
#include <bumpmap_pars_fragment>
#include <normalmap_pars_fragment>
#include <clearcoat_pars_fragment>
#include <iridescence_pars_fragment>
#include <roughnessmap_pars_fragment>
#include <metalnessmap_pars_fragment>
#include <logdepthbuf_pars_fragment>
#include <clipping_planes_pars_fragment>
void main() {
	vec4 diffuseColor = vec4( diffuse, opacity );
	#include <clipping_planes_fragment>
	ReflectedLight reflectedLight = ReflectedLight( vec3( 0.0 ), vec3( 0.0 ), vec3( 0.0 ), vec3( 0.0 ) );
	vec3 totalEmissiveRadiance = emissive;
	#include <logdepthbuf_fragment>
	#include <map_fragment>
	#include <color_fragment>
	#include <alphamap_fragment>
	#include <alphatest_fragment>
	#include <alphahash_fragment>
	#include <roughnessmap_fragment>
	#include <metalnessmap_fragment>
	#include <normal_fragment_begin>
	#include <normal_fragment_maps>
	#include <clearcoat_normal_fragment_begin>
	#include <clearcoat_normal_fragment_maps>
	#include <emissivemap_fragment>
	#include <lights_physical_fragment>
	#include <lights_fragment_begin>
	#include <lights_fragment_maps>
	#include <lights_fragment_end>
	#include <aomap_fragment>
	vec3 totalDiffuse = reflectedLight.directDiffuse + reflectedLight.indirectDiffuse;
	vec3 totalSpecular = reflectedLight.directSpecular + reflectedLight.indirectSpecular;
	#include <transmission_fragment>
	vec3 outgoingLight = totalDiffuse + totalSpecular + totalEmissiveRadiance;
	#ifdef USE_SHEEN
 
		outgoingLight = outgoingLight + sheenSpecularDirect + sheenSpecularIndirect;
 
 	#endif
	#ifdef USE_CLEARCOAT
		float dotNVcc = saturate( dot( geometryClearcoatNormal, geometryViewDir ) );
		vec3 Fcc = F_Schlick( material.clearcoatF0, material.clearcoatF90, dotNVcc );
		outgoingLight = outgoingLight * ( 1.0 - material.clearcoat * Fcc ) + ( clearcoatSpecularDirect + clearcoatSpecularIndirect ) * material.clearcoat;
	#endif
	#include <opaque_fragment>
	#include <tonemapping_fragment>
	#include <colorspace_fragment>
	#include <fog_fragment>
	#include <premultiplied_alpha_fragment>
	#include <dithering_fragment>
}`,meshtoon_vert:`#define TOON
varying vec3 vViewPosition;
#include <common>
#include <batching_pars_vertex>
#include <uv_pars_vertex>
#include <displacementmap_pars_vertex>
#include <color_pars_vertex>
#include <fog_pars_vertex>
#include <normal_pars_vertex>
#include <morphtarget_pars_vertex>
#include <skinning_pars_vertex>
#include <shadowmap_pars_vertex>
#include <logdepthbuf_pars_vertex>
#include <clipping_planes_pars_vertex>
void main() {
	#include <uv_vertex>
	#include <color_vertex>
	#include <morphinstance_vertex>
	#include <morphcolor_vertex>
	#include <batching_vertex>
	#include <beginnormal_vertex>
	#include <morphnormal_vertex>
	#include <skinbase_vertex>
	#include <skinnormal_vertex>
	#include <defaultnormal_vertex>
	#include <normal_vertex>
	#include <begin_vertex>
	#include <morphtarget_vertex>
	#include <skinning_vertex>
	#include <displacementmap_vertex>
	#include <project_vertex>
	#include <logdepthbuf_vertex>
	#include <clipping_planes_vertex>
	vViewPosition = - mvPosition.xyz;
	#include <worldpos_vertex>
	#include <shadowmap_vertex>
	#include <fog_vertex>
}`,meshtoon_frag:`#define TOON
uniform vec3 diffuse;
uniform vec3 emissive;
uniform float opacity;
#include <common>
#include <dithering_pars_fragment>
#include <color_pars_fragment>
#include <uv_pars_fragment>
#include <map_pars_fragment>
#include <alphamap_pars_fragment>
#include <alphatest_pars_fragment>
#include <alphahash_pars_fragment>
#include <aomap_pars_fragment>
#include <lightmap_pars_fragment>
#include <emissivemap_pars_fragment>
#include <gradientmap_pars_fragment>
#include <fog_pars_fragment>
#include <bsdfs>
#include <lights_pars_begin>
#include <normal_pars_fragment>
#include <lights_toon_pars_fragment>
#include <shadowmap_pars_fragment>
#include <bumpmap_pars_fragment>
#include <normalmap_pars_fragment>
#include <logdepthbuf_pars_fragment>
#include <clipping_planes_pars_fragment>
void main() {
	vec4 diffuseColor = vec4( diffuse, opacity );
	#include <clipping_planes_fragment>
	ReflectedLight reflectedLight = ReflectedLight( vec3( 0.0 ), vec3( 0.0 ), vec3( 0.0 ), vec3( 0.0 ) );
	vec3 totalEmissiveRadiance = emissive;
	#include <logdepthbuf_fragment>
	#include <map_fragment>
	#include <color_fragment>
	#include <alphamap_fragment>
	#include <alphatest_fragment>
	#include <alphahash_fragment>
	#include <normal_fragment_begin>
	#include <normal_fragment_maps>
	#include <emissivemap_fragment>
	#include <lights_toon_fragment>
	#include <lights_fragment_begin>
	#include <lights_fragment_maps>
	#include <lights_fragment_end>
	#include <aomap_fragment>
	vec3 outgoingLight = reflectedLight.directDiffuse + reflectedLight.indirectDiffuse + totalEmissiveRadiance;
	#include <opaque_fragment>
	#include <tonemapping_fragment>
	#include <colorspace_fragment>
	#include <fog_fragment>
	#include <premultiplied_alpha_fragment>
	#include <dithering_fragment>
}`,points_vert:`uniform float size;
uniform float scale;
#include <common>
#include <color_pars_vertex>
#include <fog_pars_vertex>
#include <morphtarget_pars_vertex>
#include <logdepthbuf_pars_vertex>
#include <clipping_planes_pars_vertex>
#ifdef USE_POINTS_UV
	varying vec2 vUv;
	uniform mat3 uvTransform;
#endif
void main() {
	#ifdef USE_POINTS_UV
		vUv = ( uvTransform * vec3( uv, 1 ) ).xy;
	#endif
	#include <color_vertex>
	#include <morphinstance_vertex>
	#include <morphcolor_vertex>
	#include <begin_vertex>
	#include <morphtarget_vertex>
	#include <project_vertex>
	gl_PointSize = size;
	#ifdef USE_SIZEATTENUATION
		bool isPerspective = isPerspectiveMatrix( projectionMatrix );
		if ( isPerspective ) gl_PointSize *= ( scale / - mvPosition.z );
	#endif
	#include <logdepthbuf_vertex>
	#include <clipping_planes_vertex>
	#include <worldpos_vertex>
	#include <fog_vertex>
}`,points_frag:`uniform vec3 diffuse;
uniform float opacity;
#include <common>
#include <color_pars_fragment>
#include <map_particle_pars_fragment>
#include <alphatest_pars_fragment>
#include <alphahash_pars_fragment>
#include <fog_pars_fragment>
#include <logdepthbuf_pars_fragment>
#include <clipping_planes_pars_fragment>
void main() {
	vec4 diffuseColor = vec4( diffuse, opacity );
	#include <clipping_planes_fragment>
	vec3 outgoingLight = vec3( 0.0 );
	#include <logdepthbuf_fragment>
	#include <map_particle_fragment>
	#include <color_fragment>
	#include <alphatest_fragment>
	#include <alphahash_fragment>
	outgoingLight = diffuseColor.rgb;
	#include <opaque_fragment>
	#include <tonemapping_fragment>
	#include <colorspace_fragment>
	#include <fog_fragment>
	#include <premultiplied_alpha_fragment>
}`,shadow_vert:`#include <common>
#include <batching_pars_vertex>
#include <fog_pars_vertex>
#include <morphtarget_pars_vertex>
#include <skinning_pars_vertex>
#include <logdepthbuf_pars_vertex>
#include <shadowmap_pars_vertex>
void main() {
	#include <batching_vertex>
	#include <beginnormal_vertex>
	#include <morphinstance_vertex>
	#include <morphnormal_vertex>
	#include <skinbase_vertex>
	#include <skinnormal_vertex>
	#include <defaultnormal_vertex>
	#include <begin_vertex>
	#include <morphtarget_vertex>
	#include <skinning_vertex>
	#include <project_vertex>
	#include <logdepthbuf_vertex>
	#include <worldpos_vertex>
	#include <shadowmap_vertex>
	#include <fog_vertex>
}`,shadow_frag:`uniform vec3 color;
uniform float opacity;
#include <common>
#include <fog_pars_fragment>
#include <bsdfs>
#include <lights_pars_begin>
#include <logdepthbuf_pars_fragment>
#include <shadowmap_pars_fragment>
#include <shadowmask_pars_fragment>
void main() {
	#include <logdepthbuf_fragment>
	gl_FragColor = vec4( color, opacity * ( 1.0 - getShadowMask() ) );
	#include <tonemapping_fragment>
	#include <colorspace_fragment>
	#include <fog_fragment>
}`,sprite_vert:`uniform float rotation;
uniform vec2 center;
#include <common>
#include <uv_pars_vertex>
#include <fog_pars_vertex>
#include <logdepthbuf_pars_vertex>
#include <clipping_planes_pars_vertex>
void main() {
	#include <uv_vertex>
	vec4 mvPosition = modelViewMatrix[ 3 ];
	vec2 scale = vec2( length( modelMatrix[ 0 ].xyz ), length( modelMatrix[ 1 ].xyz ) );
	#ifndef USE_SIZEATTENUATION
		bool isPerspective = isPerspectiveMatrix( projectionMatrix );
		if ( isPerspective ) scale *= - mvPosition.z;
	#endif
	vec2 alignedPosition = ( position.xy - ( center - vec2( 0.5 ) ) ) * scale;
	vec2 rotatedPosition;
	rotatedPosition.x = cos( rotation ) * alignedPosition.x - sin( rotation ) * alignedPosition.y;
	rotatedPosition.y = sin( rotation ) * alignedPosition.x + cos( rotation ) * alignedPosition.y;
	mvPosition.xy += rotatedPosition;
	gl_Position = projectionMatrix * mvPosition;
	#include <logdepthbuf_vertex>
	#include <clipping_planes_vertex>
	#include <fog_vertex>
}`,sprite_frag:`uniform vec3 diffuse;
uniform float opacity;
#include <common>
#include <uv_pars_fragment>
#include <map_pars_fragment>
#include <alphamap_pars_fragment>
#include <alphatest_pars_fragment>
#include <alphahash_pars_fragment>
#include <fog_pars_fragment>
#include <logdepthbuf_pars_fragment>
#include <clipping_planes_pars_fragment>
void main() {
	vec4 diffuseColor = vec4( diffuse, opacity );
	#include <clipping_planes_fragment>
	vec3 outgoingLight = vec3( 0.0 );
	#include <logdepthbuf_fragment>
	#include <map_fragment>
	#include <alphamap_fragment>
	#include <alphatest_fragment>
	#include <alphahash_fragment>
	outgoingLight = diffuseColor.rgb;
	#include <opaque_fragment>
	#include <tonemapping_fragment>
	#include <colorspace_fragment>
	#include <fog_fragment>
}`},ut={common:{diffuse:{value:new st(16777215)},opacity:{value:1},map:{value:null},mapTransform:{value:new Zt},alphaMap:{value:null},alphaMapTransform:{value:new Zt},alphaTest:{value:0}},specularmap:{specularMap:{value:null},specularMapTransform:{value:new Zt}},envmap:{envMap:{value:null},envMapRotation:{value:new Zt},flipEnvMap:{value:-1},reflectivity:{value:1},ior:{value:1.5},refractionRatio:{value:.98},dfgLUT:{value:null}},aomap:{aoMap:{value:null},aoMapIntensity:{value:1},aoMapTransform:{value:new Zt}},lightmap:{lightMap:{value:null},lightMapIntensity:{value:1},lightMapTransform:{value:new Zt}},bumpmap:{bumpMap:{value:null},bumpMapTransform:{value:new Zt},bumpScale:{value:1}},normalmap:{normalMap:{value:null},normalMapTransform:{value:new Zt},normalScale:{value:new He(1,1)}},displacementmap:{displacementMap:{value:null},displacementMapTransform:{value:new Zt},displacementScale:{value:1},displacementBias:{value:0}},emissivemap:{emissiveMap:{value:null},emissiveMapTransform:{value:new Zt}},metalnessmap:{metalnessMap:{value:null},metalnessMapTransform:{value:new Zt}},roughnessmap:{roughnessMap:{value:null},roughnessMapTransform:{value:new Zt}},gradientmap:{gradientMap:{value:null}},fog:{fogDensity:{value:25e-5},fogNear:{value:1},fogFar:{value:2e3},fogColor:{value:new st(16777215)}},lights:{ambientLightColor:{value:[]},lightProbe:{value:[]},directionalLights:{value:[],properties:{direction:{},color:{}}},directionalLightShadows:{value:[],properties:{shadowIntensity:1,shadowBias:{},shadowNormalBias:{},shadowRadius:{},shadowMapSize:{}}},directionalShadowMap:{value:[]},directionalShadowMatrix:{value:[]},spotLights:{value:[],properties:{color:{},position:{},direction:{},distance:{},coneCos:{},penumbraCos:{},decay:{}}},spotLightShadows:{value:[],properties:{shadowIntensity:1,shadowBias:{},shadowNormalBias:{},shadowRadius:{},shadowMapSize:{}}},spotLightMap:{value:[]},spotShadowMap:{value:[]},spotLightMatrix:{value:[]},pointLights:{value:[],properties:{color:{},position:{},decay:{},distance:{}}},pointLightShadows:{value:[],properties:{shadowIntensity:1,shadowBias:{},shadowNormalBias:{},shadowRadius:{},shadowMapSize:{},shadowCameraNear:{},shadowCameraFar:{}}},pointShadowMap:{value:[]},pointShadowMatrix:{value:[]},hemisphereLights:{value:[],properties:{direction:{},skyColor:{},groundColor:{}}},rectAreaLights:{value:[],properties:{color:{},position:{},width:{},height:{}}},ltc_1:{value:null},ltc_2:{value:null}},points:{diffuse:{value:new st(16777215)},opacity:{value:1},size:{value:1},scale:{value:1},map:{value:null},alphaMap:{value:null},alphaMapTransform:{value:new Zt},alphaTest:{value:0},uvTransform:{value:new Zt}},sprite:{diffuse:{value:new st(16777215)},opacity:{value:1},center:{value:new He(.5,.5)},rotation:{value:0},map:{value:null},mapTransform:{value:new Zt},alphaMap:{value:null},alphaMapTransform:{value:new Zt},alphaTest:{value:0}}},to={basic:{uniforms:ar([ut.common,ut.specularmap,ut.envmap,ut.aomap,ut.lightmap,ut.fog]),vertexShader:sn.meshbasic_vert,fragmentShader:sn.meshbasic_frag},lambert:{uniforms:ar([ut.common,ut.specularmap,ut.envmap,ut.aomap,ut.lightmap,ut.emissivemap,ut.bumpmap,ut.normalmap,ut.displacementmap,ut.fog,ut.lights,{emissive:{value:new st(0)}}]),vertexShader:sn.meshlambert_vert,fragmentShader:sn.meshlambert_frag},phong:{uniforms:ar([ut.common,ut.specularmap,ut.envmap,ut.aomap,ut.lightmap,ut.emissivemap,ut.bumpmap,ut.normalmap,ut.displacementmap,ut.fog,ut.lights,{emissive:{value:new st(0)},specular:{value:new st(1118481)},shininess:{value:30}}]),vertexShader:sn.meshphong_vert,fragmentShader:sn.meshphong_frag},standard:{uniforms:ar([ut.common,ut.envmap,ut.aomap,ut.lightmap,ut.emissivemap,ut.bumpmap,ut.normalmap,ut.displacementmap,ut.roughnessmap,ut.metalnessmap,ut.fog,ut.lights,{emissive:{value:new st(0)},roughness:{value:1},metalness:{value:0},envMapIntensity:{value:1}}]),vertexShader:sn.meshphysical_vert,fragmentShader:sn.meshphysical_frag},toon:{uniforms:ar([ut.common,ut.aomap,ut.lightmap,ut.emissivemap,ut.bumpmap,ut.normalmap,ut.displacementmap,ut.gradientmap,ut.fog,ut.lights,{emissive:{value:new st(0)}}]),vertexShader:sn.meshtoon_vert,fragmentShader:sn.meshtoon_frag},matcap:{uniforms:ar([ut.common,ut.bumpmap,ut.normalmap,ut.displacementmap,ut.fog,{matcap:{value:null}}]),vertexShader:sn.meshmatcap_vert,fragmentShader:sn.meshmatcap_frag},points:{uniforms:ar([ut.points,ut.fog]),vertexShader:sn.points_vert,fragmentShader:sn.points_frag},dashed:{uniforms:ar([ut.common,ut.fog,{scale:{value:1},dashSize:{value:1},totalSize:{value:2}}]),vertexShader:sn.linedashed_vert,fragmentShader:sn.linedashed_frag},depth:{uniforms:ar([ut.common,ut.displacementmap]),vertexShader:sn.depth_vert,fragmentShader:sn.depth_frag},normal:{uniforms:ar([ut.common,ut.bumpmap,ut.normalmap,ut.displacementmap,{opacity:{value:1}}]),vertexShader:sn.meshnormal_vert,fragmentShader:sn.meshnormal_frag},sprite:{uniforms:ar([ut.sprite,ut.fog]),vertexShader:sn.sprite_vert,fragmentShader:sn.sprite_frag},background:{uniforms:{uvTransform:{value:new Zt},t2D:{value:null},backgroundIntensity:{value:1}},vertexShader:sn.background_vert,fragmentShader:sn.background_frag},backgroundCube:{uniforms:{envMap:{value:null},flipEnvMap:{value:-1},backgroundBlurriness:{value:0},backgroundIntensity:{value:1},backgroundRotation:{value:new Zt}},vertexShader:sn.backgroundCube_vert,fragmentShader:sn.backgroundCube_frag},cube:{uniforms:{tCube:{value:null},tFlip:{value:-1},opacity:{value:1}},vertexShader:sn.cube_vert,fragmentShader:sn.cube_frag},equirect:{uniforms:{tEquirect:{value:null}},vertexShader:sn.equirect_vert,fragmentShader:sn.equirect_frag},distance:{uniforms:ar([ut.common,ut.displacementmap,{referencePosition:{value:new K},nearDistance:{value:1},farDistance:{value:1e3}}]),vertexShader:sn.distance_vert,fragmentShader:sn.distance_frag},shadow:{uniforms:ar([ut.lights,ut.fog,{color:{value:new st(0)},opacity:{value:1}}]),vertexShader:sn.shadow_vert,fragmentShader:sn.shadow_frag}};to.physical={uniforms:ar([to.standard.uniforms,{clearcoat:{value:0},clearcoatMap:{value:null},clearcoatMapTransform:{value:new Zt},clearcoatNormalMap:{value:null},clearcoatNormalMapTransform:{value:new Zt},clearcoatNormalScale:{value:new He(1,1)},clearcoatRoughness:{value:0},clearcoatRoughnessMap:{value:null},clearcoatRoughnessMapTransform:{value:new Zt},dispersion:{value:0},iridescence:{value:0},iridescenceMap:{value:null},iridescenceMapTransform:{value:new Zt},iridescenceIOR:{value:1.3},iridescenceThicknessMinimum:{value:100},iridescenceThicknessMaximum:{value:400},iridescenceThicknessMap:{value:null},iridescenceThicknessMapTransform:{value:new Zt},sheen:{value:0},sheenColor:{value:new st(0)},sheenColorMap:{value:null},sheenColorMapTransform:{value:new Zt},sheenRoughness:{value:1},sheenRoughnessMap:{value:null},sheenRoughnessMapTransform:{value:new Zt},transmission:{value:0},transmissionMap:{value:null},transmissionMapTransform:{value:new Zt},transmissionSamplerSize:{value:new He},transmissionSamplerMap:{value:null},thickness:{value:0},thicknessMap:{value:null},thicknessMapTransform:{value:new Zt},attenuationDistance:{value:0},attenuationColor:{value:new st(0)},specularColor:{value:new st(1,1,1)},specularColorMap:{value:null},specularColorMapTransform:{value:new Zt},specularIntensity:{value:1},specularIntensityMap:{value:null},specularIntensityMapTransform:{value:new Zt},anisotropyVector:{value:new He},anisotropyMap:{value:null},anisotropyMapTransform:{value:new Zt}}]),vertexShader:sn.meshphysical_vert,fragmentShader:sn.meshphysical_frag};const h_={r:0,b:0,g:0},Mf=new wr,cz=new It;function uz(n,e,t,i,a,s,l){const c=new st(0);let d=s===!0?0:1,p,g,v=null,_=0,x=null;function S(B){let D=B.isScene===!0?B.background:null;return D&&D.isTexture&&(D=(B.backgroundBlurriness>0?t:e).get(D)),D}function C(B){let D=!1;const P=S(B);P===null?M(c,d):P&&P.isColor&&(M(P,1),D=!0);const U=n.xr.getEnvironmentBlendMode();U==="additive"?i.buffers.color.setClear(0,0,0,1,l):U==="alpha-blend"&&i.buffers.color.setClear(0,0,0,0,l),(n.autoClear||D)&&(i.buffers.depth.setTest(!0),i.buffers.depth.setMask(!0),i.buffers.color.setMask(!0),n.clear(n.autoClearColor,n.autoClearDepth,n.autoClearStencil))}function T(B,D){const P=S(D);P&&(P.isCubeTexture||P.mapping===wh)?(g===void 0&&(g=new Ii(new af(1,1,1),new _s({name:"BackgroundCubeMaterial",uniforms:$h(to.backgroundCube.uniforms),vertexShader:to.backgroundCube.vertexShader,fragmentShader:to.backgroundCube.fragmentShader,side:$a,depthTest:!1,depthWrite:!1,fog:!1,allowOverride:!1})),g.geometry.deleteAttribute("normal"),g.geometry.deleteAttribute("uv"),g.onBeforeRender=function(U,z,j){this.matrixWorld.copyPosition(j.matrixWorld)},Object.defineProperty(g.material,"envMap",{get:function(){return this.uniforms.envMap.value}}),a.update(g)),Mf.copy(D.backgroundRotation),Mf.x*=-1,Mf.y*=-1,Mf.z*=-1,P.isCubeTexture&&P.isRenderTargetTexture===!1&&(Mf.y*=-1,Mf.z*=-1),g.material.uniforms.envMap.value=P,g.material.uniforms.flipEnvMap.value=P.isCubeTexture&&P.isRenderTargetTexture===!1?-1:1,g.material.uniforms.backgroundBlurriness.value=D.backgroundBlurriness,g.material.uniforms.backgroundIntensity.value=D.backgroundIntensity,g.material.uniforms.backgroundRotation.value.setFromMatrix4(cz.makeRotationFromEuler(Mf)),g.material.toneMapped=vn.getTransfer(P.colorSpace)!==Hn,(v!==P||_!==P.version||x!==n.toneMapping)&&(g.material.needsUpdate=!0,v=P,_=P.version,x=n.toneMapping),g.layers.enableAll(),B.unshift(g,g.geometry,g.material,0,0,null)):P&&P.isTexture&&(p===void 0&&(p=new Ii(new ud(2,2),new _s({name:"BackgroundMaterial",uniforms:$h(to.background.uniforms),vertexShader:to.background.vertexShader,fragmentShader:to.background.fragmentShader,side:Bo,depthTest:!1,depthWrite:!1,fog:!1,allowOverride:!1})),p.geometry.deleteAttribute("normal"),Object.defineProperty(p.material,"map",{get:function(){return this.uniforms.t2D.value}}),a.update(p)),p.material.uniforms.t2D.value=P,p.material.uniforms.backgroundIntensity.value=D.backgroundIntensity,p.material.toneMapped=vn.getTransfer(P.colorSpace)!==Hn,P.matrixAutoUpdate===!0&&P.updateMatrix(),p.material.uniforms.uvTransform.value.copy(P.matrix),(v!==P||_!==P.version||x!==n.toneMapping)&&(p.material.needsUpdate=!0,v=P,_=P.version,x=n.toneMapping),p.layers.enableAll(),B.unshift(p,p.geometry,p.material,0,0,null))}function M(B,D){B.getRGB(h_,GT(n)),i.buffers.color.setClear(h_.r,h_.g,h_.b,D,l)}function w(){g!==void 0&&(g.geometry.dispose(),g.material.dispose(),g=void 0),p!==void 0&&(p.geometry.dispose(),p.material.dispose(),p=void 0)}return{getClearColor:function(){return c},setClearColor:function(B,D=1){c.set(B),d=D,M(c,d)},getClearAlpha:function(){return d},setClearAlpha:function(B){d=B,M(c,d)},render:C,addToRenderList:T,dispose:w}}function fz(n,e){const t=n.getParameter(n.MAX_VERTEX_ATTRIBS),i={},a=_(null);let s=a,l=!1;function c(F,W,te,$,ae){let le=!1;const G=v($,te,W);s!==G&&(s=G,p(s.object)),le=x(F,$,te,ae),le&&S(F,$,te,ae),ae!==null&&e.update(ae,n.ELEMENT_ARRAY_BUFFER),(le||l)&&(l=!1,D(F,W,te,$),ae!==null&&n.bindBuffer(n.ELEMENT_ARRAY_BUFFER,e.get(ae).buffer))}function d(){return n.createVertexArray()}function p(F){return n.bindVertexArray(F)}function g(F){return n.deleteVertexArray(F)}function v(F,W,te){const $=te.wireframe===!0;let ae=i[F.id];ae===void 0&&(ae={},i[F.id]=ae);let le=ae[W.id];le===void 0&&(le={},ae[W.id]=le);let G=le[$];return G===void 0&&(G=_(d()),le[$]=G),G}function _(F){const W=[],te=[],$=[];for(let ae=0;ae<t;ae++)W[ae]=0,te[ae]=0,$[ae]=0;return{geometry:null,program:null,wireframe:!1,newAttributes:W,enabledAttributes:te,attributeDivisors:$,object:F,attributes:{},index:null}}function x(F,W,te,$){const ae=s.attributes,le=W.attributes;let G=0;const J=te.getAttributes();for(const Z in J)if(J[Z].location>=0){const _e=ae[Z];let q=le[Z];if(q===void 0&&(Z==="instanceMatrix"&&F.instanceMatrix&&(q=F.instanceMatrix),Z==="instanceColor"&&F.instanceColor&&(q=F.instanceColor)),_e===void 0||_e.attribute!==q||q&&_e.data!==q.data)return!0;G++}return s.attributesNum!==G||s.index!==$}function S(F,W,te,$){const ae={},le=W.attributes;let G=0;const J=te.getAttributes();for(const Z in J)if(J[Z].location>=0){let _e=le[Z];_e===void 0&&(Z==="instanceMatrix"&&F.instanceMatrix&&(_e=F.instanceMatrix),Z==="instanceColor"&&F.instanceColor&&(_e=F.instanceColor));const q={};q.attribute=_e,_e&&_e.data&&(q.data=_e.data),ae[Z]=q,G++}s.attributes=ae,s.attributesNum=G,s.index=$}function C(){const F=s.newAttributes;for(let W=0,te=F.length;W<te;W++)F[W]=0}function T(F){M(F,0)}function M(F,W){const te=s.newAttributes,$=s.enabledAttributes,ae=s.attributeDivisors;te[F]=1,$[F]===0&&(n.enableVertexAttribArray(F),$[F]=1),ae[F]!==W&&(n.vertexAttribDivisor(F,W),ae[F]=W)}function w(){const F=s.newAttributes,W=s.enabledAttributes;for(let te=0,$=W.length;te<$;te++)W[te]!==F[te]&&(n.disableVertexAttribArray(te),W[te]=0)}function B(F,W,te,$,ae,le,G){G===!0?n.vertexAttribIPointer(F,W,te,ae,le):n.vertexAttribPointer(F,W,te,$,ae,le)}function D(F,W,te,$){C();const ae=$.attributes,le=te.getAttributes(),G=W.defaultAttributeValues;for(const J in le){const Z=le[J];if(Z.location>=0){let pe=ae[J];if(pe===void 0&&(J==="instanceMatrix"&&F.instanceMatrix&&(pe=F.instanceMatrix),J==="instanceColor"&&F.instanceColor&&(pe=F.instanceColor)),pe!==void 0){const _e=pe.normalized,q=pe.itemSize,ce=e.get(pe);if(ce===void 0)continue;const Te=ce.buffer,De=ce.type,qe=ce.bytesPerElement,ge=De===n.INT||De===n.UNSIGNED_INT||pe.gpuType===ov;if(pe.isInterleavedBufferAttribute){const Ee=pe.data,Xe=Ee.stride,tt=pe.offset;if(Ee.isInstancedInterleavedBuffer){for(let ot=0;ot<Z.locationSize;ot++)M(Z.location+ot,Ee.meshPerAttribute);F.isInstancedMesh!==!0&&$._maxInstanceCount===void 0&&($._maxInstanceCount=Ee.meshPerAttribute*Ee.count)}else for(let ot=0;ot<Z.locationSize;ot++)T(Z.location+ot);n.bindBuffer(n.ARRAY_BUFFER,Te);for(let ot=0;ot<Z.locationSize;ot++)B(Z.location+ot,q/Z.locationSize,De,_e,Xe*qe,(tt+q/Z.locationSize*ot)*qe,ge)}else{if(pe.isInstancedBufferAttribute){for(let Ee=0;Ee<Z.locationSize;Ee++)M(Z.location+Ee,pe.meshPerAttribute);F.isInstancedMesh!==!0&&$._maxInstanceCount===void 0&&($._maxInstanceCount=pe.meshPerAttribute*pe.count)}else for(let Ee=0;Ee<Z.locationSize;Ee++)T(Z.location+Ee);n.bindBuffer(n.ARRAY_BUFFER,Te);for(let Ee=0;Ee<Z.locationSize;Ee++)B(Z.location+Ee,q/Z.locationSize,De,_e,q*qe,q/Z.locationSize*Ee*qe,ge)}}else if(G!==void 0){const _e=G[J];if(_e!==void 0)switch(_e.length){case 2:n.vertexAttrib2fv(Z.location,_e);break;case 3:n.vertexAttrib3fv(Z.location,_e);break;case 4:n.vertexAttrib4fv(Z.location,_e);break;default:n.vertexAttrib1fv(Z.location,_e)}}}}w()}function P(){j();for(const F in i){const W=i[F];for(const te in W){const $=W[te];for(const ae in $)g($[ae].object),delete $[ae];delete W[te]}delete i[F]}}function U(F){if(i[F.id]===void 0)return;const W=i[F.id];for(const te in W){const $=W[te];for(const ae in $)g($[ae].object),delete $[ae];delete W[te]}delete i[F.id]}function z(F){for(const W in i){const te=i[W];if(te[F.id]===void 0)continue;const $=te[F.id];for(const ae in $)g($[ae].object),delete $[ae];delete te[F.id]}}function j(){L(),l=!0,s!==a&&(s=a,p(s.object))}function L(){a.geometry=null,a.program=null,a.wireframe=!1}return{setup:c,reset:j,resetDefaultState:L,dispose:P,releaseStatesOfGeometry:U,releaseStatesOfProgram:z,initAttributes:C,enableAttribute:T,disableUnusedAttributes:w}}function hz(n,e,t){let i;function a(p){i=p}function s(p,g){n.drawArrays(i,p,g),t.update(g,i,1)}function l(p,g,v){v!==0&&(n.drawArraysInstanced(i,p,g,v),t.update(g,i,v))}function c(p,g,v){if(v===0)return;e.get("WEBGL_multi_draw").multiDrawArraysWEBGL(i,p,0,g,0,v);let x=0;for(let S=0;S<v;S++)x+=g[S];t.update(x,i,1)}function d(p,g,v,_){if(v===0)return;const x=e.get("WEBGL_multi_draw");if(x===null)for(let S=0;S<p.length;S++)l(p[S],g[S],_[S]);else{x.multiDrawArraysInstancedWEBGL(i,p,0,g,0,_,0,v);let S=0;for(let C=0;C<v;C++)S+=g[C]*_[C];t.update(S,i,1)}}this.setMode=a,this.render=s,this.renderInstances=l,this.renderMultiDraw=c,this.renderMultiDrawInstances=d}function dz(n,e,t,i){let a;function s(){if(a!==void 0)return a;if(e.has("EXT_texture_filter_anisotropic")===!0){const z=e.get("EXT_texture_filter_anisotropic");a=n.getParameter(z.MAX_TEXTURE_MAX_ANISOTROPY_EXT)}else a=0;return a}function l(z){return!(z!==Ua&&i.convert(z)!==n.getParameter(n.IMPLEMENTATION_COLOR_READ_FORMAT))}function c(z){const j=z===No&&(e.has("EXT_color_buffer_half_float")||e.has("EXT_color_buffer_float"));return!(z!==tr&&i.convert(z)!==n.getParameter(n.IMPLEMENTATION_COLOR_READ_TYPE)&&z!==nr&&!j)}function d(z){if(z==="highp"){if(n.getShaderPrecisionFormat(n.VERTEX_SHADER,n.HIGH_FLOAT).precision>0&&n.getShaderPrecisionFormat(n.FRAGMENT_SHADER,n.HIGH_FLOAT).precision>0)return"highp";z="mediump"}return z==="mediump"&&n.getShaderPrecisionFormat(n.VERTEX_SHADER,n.MEDIUM_FLOAT).precision>0&&n.getShaderPrecisionFormat(n.FRAGMENT_SHADER,n.MEDIUM_FLOAT).precision>0?"mediump":"lowp"}let p=t.precision!==void 0?t.precision:"highp";const g=d(p);g!==p&&(ct("WebGLRenderer:",p,"not supported, using",g,"instead."),p=g);const v=t.logarithmicDepthBuffer===!0,_=t.reversedDepthBuffer===!0&&e.has("EXT_clip_control"),x=n.getParameter(n.MAX_TEXTURE_IMAGE_UNITS),S=n.getParameter(n.MAX_VERTEX_TEXTURE_IMAGE_UNITS),C=n.getParameter(n.MAX_TEXTURE_SIZE),T=n.getParameter(n.MAX_CUBE_MAP_TEXTURE_SIZE),M=n.getParameter(n.MAX_VERTEX_ATTRIBS),w=n.getParameter(n.MAX_VERTEX_UNIFORM_VECTORS),B=n.getParameter(n.MAX_VARYING_VECTORS),D=n.getParameter(n.MAX_FRAGMENT_UNIFORM_VECTORS),P=n.getParameter(n.MAX_SAMPLES),U=n.getParameter(n.SAMPLES);return{isWebGL2:!0,getMaxAnisotropy:s,getMaxPrecision:d,textureFormatReadable:l,textureTypeReadable:c,precision:p,logarithmicDepthBuffer:v,reversedDepthBuffer:_,maxTextures:x,maxVertexTextures:S,maxTextureSize:C,maxCubemapSize:T,maxAttributes:M,maxVertexUniforms:w,maxVaryings:B,maxFragmentUniforms:D,maxSamples:P,samples:U}}function pz(n){const e=this;let t=null,i=0,a=!1,s=!1;const l=new Yc,c=new Zt,d={value:null,needsUpdate:!1};this.uniform=d,this.numPlanes=0,this.numIntersection=0,this.init=function(v,_){const x=v.length!==0||_||i!==0||a;return a=_,i=v.length,x},this.beginShadows=function(){s=!0,g(null)},this.endShadows=function(){s=!1},this.setGlobalState=function(v,_){t=g(v,_,0)},this.setState=function(v,_,x){const S=v.clippingPlanes,C=v.clipIntersection,T=v.clipShadows,M=n.get(v);if(!a||S===null||S.length===0||s&&!T)s?g(null):p();else{const w=s?0:i,B=w*4;let D=M.clippingState||null;d.value=D,D=g(S,_,B,x);for(let P=0;P!==B;++P)D[P]=t[P];M.clippingState=D,this.numIntersection=C?this.numPlanes:0,this.numPlanes+=w}};function p(){d.value!==t&&(d.value=t,d.needsUpdate=i>0),e.numPlanes=i,e.numIntersection=0}function g(v,_,x,S){const C=v!==null?v.length:0;let T=null;if(C!==0){if(T=d.value,S!==!0||T===null){const M=x+C*4,w=_.matrixWorldInverse;c.getNormalMatrix(w),(T===null||T.length<M)&&(T=new Float32Array(M));for(let B=0,D=x;B!==C;++B,D+=4)l.copy(v[B]).applyMatrix4(w,c),l.normal.toArray(T,D),T[D+3]=l.constant}d.value=T,d.needsUpdate=!0}return e.numPlanes=C,e.numIntersection=0,T}}function mz(n){let e=new WeakMap;function t(l,c){return c===tm?l.mapping=Oo:c===nm&&(l.mapping=Oc),l}function i(l){if(l&&l.isTexture){const c=l.mapping;if(c===tm||c===nm)if(e.has(l)){const d=e.get(l).texture;return t(d,l.mapping)}else{const d=l.image;if(d&&d.height>0){const p=new RA(d.height);return p.fromEquirectangularTexture(n,l),e.set(l,p),l.addEventListener("dispose",a),t(p.texture,l.mapping)}else return null}}return l}function a(l){const c=l.target;c.removeEventListener("dispose",a);const d=e.get(c);d!==void 0&&(e.delete(c),d.dispose())}function s(){e=new WeakMap}return{get:i,dispose:s}}const Qc=4,MR=[.125,.215,.35,.446,.526,.582],Ef=20,gz=256,Vm=new vf,ER=new st;let wS=null,BS=0,DS=0,OS=!1;const vz=new K;class NS{constructor(e){this._renderer=e,this._pingPongRenderTarget=null,this._lodMax=0,this._cubeSize=0,this._sizeLods=[],this._sigmas=[],this._lodMeshes=[],this._backgroundBox=null,this._cubemapMaterial=null,this._equirectMaterial=null,this._blurMaterial=null,this._ggxMaterial=null}fromScene(e,t=0,i=.1,a=100,s={}){const{size:l=256,position:c=vz}=s;wS=this._renderer.getRenderTarget(),BS=this._renderer.getActiveCubeFace(),DS=this._renderer.getActiveMipmapLevel(),OS=this._renderer.xr.enabled,this._renderer.xr.enabled=!1,this._setSize(l);const d=this._allocateTargets();return d.depthBuffer=!0,this._sceneToCubeUV(e,i,a,d,c),t>0&&this._blur(d,0,0,t),this._applyPMREM(d),this._cleanup(d),d}fromEquirectangular(e,t=null){return this._fromTexture(e,t)}fromCubemap(e,t=null){return this._fromTexture(e,t)}compileCubemapShader(){this._cubemapMaterial===null&&(this._cubemapMaterial=RR(),this._compileMaterial(this._cubemapMaterial))}compileEquirectangularShader(){this._equirectMaterial===null&&(this._equirectMaterial=CR(),this._compileMaterial(this._equirectMaterial))}dispose(){this._dispose(),this._cubemapMaterial!==null&&this._cubemapMaterial.dispose(),this._equirectMaterial!==null&&this._equirectMaterial.dispose(),this._backgroundBox!==null&&(this._backgroundBox.geometry.dispose(),this._backgroundBox.material.dispose())}_setSize(e){this._lodMax=Math.floor(Math.log2(e)),this._cubeSize=Math.pow(2,this._lodMax)}_dispose(){this._blurMaterial!==null&&this._blurMaterial.dispose(),this._ggxMaterial!==null&&this._ggxMaterial.dispose(),this._pingPongRenderTarget!==null&&this._pingPongRenderTarget.dispose();for(let e=0;e<this._lodMeshes.length;e++)this._lodMeshes[e].geometry.dispose()}_cleanup(e){this._renderer.setRenderTarget(wS,BS,DS),this._renderer.xr.enabled=OS,e.scissorTest=!1,vd(e,0,0,e.width,e.height)}_fromTexture(e,t){e.mapping===Oo||e.mapping===Oc?this._setSize(e.image.length===0?16:e.image[0].width||e.image[0].image.width):this._setSize(e.image.width/4),wS=this._renderer.getRenderTarget(),BS=this._renderer.getActiveCubeFace(),DS=this._renderer.getActiveMipmapLevel(),OS=this._renderer.xr.enabled,this._renderer.xr.enabled=!1;const i=t||this._allocateTargets();return this._textureToCubeUV(e,i),this._applyPMREM(i),this._cleanup(i),i}_allocateTargets(){const e=3*Math.max(this._cubeSize,112),t=4*this._cubeSize,i={magFilter:Zn,minFilter:Zn,generateMipmaps:!1,type:No,format:Ua,colorSpace:Ic,depthBuffer:!1},a=TR(e,t,i);if(this._pingPongRenderTarget===null||this._pingPongRenderTarget.width!==e||this._pingPongRenderTarget.height!==t){this._pingPongRenderTarget!==null&&this._dispose(),this._pingPongRenderTarget=TR(e,t,i);const{_lodMax:s}=this;({lodMeshes:this._lodMeshes,sizeLods:this._sizeLods,sigmas:this._sigmas}=yz(s)),this._blurMaterial=xz(s,e,t),this._ggxMaterial=_z(s,e,t)}return a}_compileMaterial(e){const t=new Ii(new Jt,e);this._renderer.compile(t,Vm)}_sceneToCubeUV(e,t,i,a,s){const d=new Zi(90,1,t,i),p=[1,-1,1,1,1,1],g=[1,1,1,-1,-1,-1],v=this._renderer,_=v.autoClear,x=v.toneMapping;v.getClearColor(ER),v.toneMapping=ms,v.autoClear=!1,v.state.buffers.depth.getReversed()&&(v.setRenderTarget(a),v.clearDepth(),v.setRenderTarget(null)),this._backgroundBox===null&&(this._backgroundBox=new Ii(new af,new Qr({name:"PMREM.Background",side:$a,depthWrite:!1,depthTest:!1})));const C=this._backgroundBox,T=C.material;let M=!1;const w=e.background;w?w.isColor&&(T.color.copy(w),e.background=null,M=!0):(T.color.copy(ER),M=!0);for(let B=0;B<6;B++){const D=B%3;D===0?(d.up.set(0,p[B],0),d.position.set(s.x,s.y,s.z),d.lookAt(s.x+g[B],s.y,s.z)):D===1?(d.up.set(0,0,p[B]),d.position.set(s.x,s.y,s.z),d.lookAt(s.x,s.y+g[B],s.z)):(d.up.set(0,p[B],0),d.position.set(s.x,s.y,s.z),d.lookAt(s.x,s.y,s.z+g[B]));const P=this._cubeSize;vd(a,D*P,B>2?P:0,P,P),v.setRenderTarget(a),M&&v.render(C,d),v.render(e,d)}v.toneMapping=x,v.autoClear=_,e.background=w}_textureToCubeUV(e,t){const i=this._renderer,a=e.mapping===Oo||e.mapping===Oc;a?(this._cubemapMaterial===null&&(this._cubemapMaterial=RR()),this._cubemapMaterial.uniforms.flipEnvMap.value=e.isRenderTargetTexture===!1?-1:1):this._equirectMaterial===null&&(this._equirectMaterial=CR());const s=a?this._cubemapMaterial:this._equirectMaterial,l=this._lodMeshes[0];l.material=s;const c=s.uniforms;c.envMap.value=e;const d=this._cubeSize;vd(t,0,0,3*d,2*d),i.setRenderTarget(t),i.render(l,Vm)}_applyPMREM(e){const t=this._renderer,i=t.autoClear;t.autoClear=!1;const a=this._lodMeshes.length;for(let s=1;s<a;s++)this._applyGGXFilter(e,s-1,s);t.autoClear=i}_applyGGXFilter(e,t,i){const a=this._renderer,s=this._pingPongRenderTarget,l=this._ggxMaterial,c=this._lodMeshes[i];c.material=l;const d=l.uniforms,p=i/(this._lodMeshes.length-1),g=t/(this._lodMeshes.length-1),v=Math.sqrt(p*p-g*g),_=0+p*1.25,x=v*_,{_lodMax:S}=this,C=this._sizeLods[i],T=3*C*(i>S-Qc?i-S+Qc:0),M=4*(this._cubeSize-C);d.envMap.value=e.texture,d.roughness.value=x,d.mipInt.value=S-t,vd(s,T,M,3*C,2*C),a.setRenderTarget(s),a.render(c,Vm),d.envMap.value=s.texture,d.roughness.value=0,d.mipInt.value=S-i,vd(e,T,M,3*C,2*C),a.setRenderTarget(e),a.render(c,Vm)}_blur(e,t,i,a,s){const l=this._pingPongRenderTarget;this._halfBlur(e,l,t,i,a,"latitudinal",s),this._halfBlur(l,e,i,i,a,"longitudinal",s)}_halfBlur(e,t,i,a,s,l,c){const d=this._renderer,p=this._blurMaterial;l!=="latitudinal"&&l!=="longitudinal"&&Dt("blur direction must be either latitudinal or longitudinal!");const g=3,v=this._lodMeshes[a];v.material=p;const _=p.uniforms,x=this._sizeLods[i]-1,S=isFinite(s)?Math.PI/(2*x):2*Math.PI/(2*Ef-1),C=s/S,T=isFinite(s)?1+Math.floor(g*C):Ef;T>Ef&&ct(`sigmaRadians, ${s}, is too large and will clip, as it requested ${T} samples when the maximum is set to ${Ef}`);const M=[];let w=0;for(let z=0;z<Ef;++z){const j=z/C,L=Math.exp(-j*j/2);M.push(L),z===0?w+=L:z<T&&(w+=2*L)}for(let z=0;z<M.length;z++)M[z]=M[z]/w;_.envMap.value=e.texture,_.samples.value=T,_.weights.value=M,_.latitudinal.value=l==="latitudinal",c&&(_.poleAxis.value=c);const{_lodMax:B}=this;_.dTheta.value=S,_.mipInt.value=B-i;const D=this._sizeLods[a],P=3*D*(a>B-Qc?a-B+Qc:0),U=4*(this._cubeSize-D);vd(t,P,U,3*D,2*D),d.setRenderTarget(t),d.render(v,Vm)}}function yz(n){const e=[],t=[],i=[];let a=n;const s=n-Qc+1+MR.length;for(let l=0;l<s;l++){const c=Math.pow(2,a);e.push(c);let d=1/c;l>n-Qc?d=MR[l-n+Qc-1]:l===0&&(d=0),t.push(d);const p=1/(c-2),g=-p,v=1+p,_=[g,g,v,g,v,v,g,g,v,v,g,v],x=6,S=6,C=3,T=2,M=1,w=new Float32Array(C*S*x),B=new Float32Array(T*S*x),D=new Float32Array(M*S*x);for(let U=0;U<x;U++){const z=U%3*2/3-1,j=U>2?0:-1,L=[z,j,0,z+2/3,j,0,z+2/3,j+1,0,z,j,0,z+2/3,j+1,0,z,j+1,0];w.set(L,C*S*U),B.set(_,T*S*U);const F=[U,U,U,U,U,U];D.set(F,M*S*U)}const P=new Jt;P.setAttribute("position",new Rn(w,C)),P.setAttribute("uv",new Rn(B,T)),P.setAttribute("faceIndex",new Rn(D,M)),i.push(new Ii(P,null)),a>Qc&&a--}return{lodMeshes:i,sizeLods:e,sigmas:t}}function TR(n,e,t){const i=new Jr(n,e,t);return i.texture.mapping=wh,i.texture.name="PMREM.cubeUv",i.scissorTest=!0,i}function vd(n,e,t,i,a){n.viewport.set(e,t,i,a),n.scissor.set(e,t,i,a)}function _z(n,e,t){return new _s({name:"PMREMGGXConvolution",defines:{GGX_SAMPLES:gz,CUBEUV_TEXEL_WIDTH:1/e,CUBEUV_TEXEL_HEIGHT:1/t,CUBEUV_MAX_MIP:`${n}.0`},uniforms:{envMap:{value:null},roughness:{value:0},mipInt:{value:0}},vertexShader:d_(),fragmentShader:`

			precision highp float;
			precision highp int;

			varying vec3 vOutputDirection;

			uniform sampler2D envMap;
			uniform float roughness;
			uniform float mipInt;

			#define ENVMAP_TYPE_CUBE_UV
			#include <cube_uv_reflection_fragment>

			#define PI 3.14159265359

			// Van der Corput radical inverse
			float radicalInverse_VdC(uint bits) {
				bits = (bits << 16u) | (bits >> 16u);
				bits = ((bits & 0x55555555u) << 1u) | ((bits & 0xAAAAAAAAu) >> 1u);
				bits = ((bits & 0x33333333u) << 2u) | ((bits & 0xCCCCCCCCu) >> 2u);
				bits = ((bits & 0x0F0F0F0Fu) << 4u) | ((bits & 0xF0F0F0F0u) >> 4u);
				bits = ((bits & 0x00FF00FFu) << 8u) | ((bits & 0xFF00FF00u) >> 8u);
				return float(bits) * 2.3283064365386963e-10; // / 0x100000000
			}

			// Hammersley sequence
			vec2 hammersley(uint i, uint N) {
				return vec2(float(i) / float(N), radicalInverse_VdC(i));
			}

			// GGX VNDF importance sampling (Eric Heitz 2018)
			// "Sampling the GGX Distribution of Visible Normals"
			// https://jcgt.org/published/0007/04/01/
			vec3 importanceSampleGGX_VNDF(vec2 Xi, vec3 V, float roughness) {
				float alpha = roughness * roughness;

				// Section 3.2: Transform view direction to hemisphere configuration
				vec3 Vh = normalize(vec3(alpha * V.x, alpha * V.y, V.z));

				// Section 4.1: Orthonormal basis
				float lensq = Vh.x * Vh.x + Vh.y * Vh.y;
				vec3 T1 = lensq > 0.0 ? vec3(-Vh.y, Vh.x, 0.0) / sqrt(lensq) : vec3(1.0, 0.0, 0.0);
				vec3 T2 = cross(Vh, T1);

				// Section 4.2: Parameterization of projected area
				float r = sqrt(Xi.x);
				float phi = 2.0 * PI * Xi.y;
				float t1 = r * cos(phi);
				float t2 = r * sin(phi);
				float s = 0.5 * (1.0 + Vh.z);
				t2 = (1.0 - s) * sqrt(1.0 - t1 * t1) + s * t2;

				// Section 4.3: Reprojection onto hemisphere
				vec3 Nh = t1 * T1 + t2 * T2 + sqrt(max(0.0, 1.0 - t1 * t1 - t2 * t2)) * Vh;

				// Section 3.4: Transform back to ellipsoid configuration
				return normalize(vec3(alpha * Nh.x, alpha * Nh.y, max(0.0, Nh.z)));
			}

			void main() {
				vec3 N = normalize(vOutputDirection);
				vec3 V = N; // Assume view direction equals normal for pre-filtering

				vec3 prefilteredColor = vec3(0.0);
				float totalWeight = 0.0;

				// For very low roughness, just sample the environment directly
				if (roughness < 0.001) {
					gl_FragColor = vec4(bilinearCubeUV(envMap, N, mipInt), 1.0);
					return;
				}

				// Tangent space basis for VNDF sampling
				vec3 up = abs(N.z) < 0.999 ? vec3(0.0, 0.0, 1.0) : vec3(1.0, 0.0, 0.0);
				vec3 tangent = normalize(cross(up, N));
				vec3 bitangent = cross(N, tangent);

				for(uint i = 0u; i < uint(GGX_SAMPLES); i++) {
					vec2 Xi = hammersley(i, uint(GGX_SAMPLES));

					// For PMREM, V = N, so in tangent space V is always (0, 0, 1)
					vec3 H_tangent = importanceSampleGGX_VNDF(Xi, vec3(0.0, 0.0, 1.0), roughness);

					// Transform H back to world space
					vec3 H = normalize(tangent * H_tangent.x + bitangent * H_tangent.y + N * H_tangent.z);
					vec3 L = normalize(2.0 * dot(V, H) * H - V);

					float NdotL = max(dot(N, L), 0.0);

					if(NdotL > 0.0) {
						// Sample environment at fixed mip level
						// VNDF importance sampling handles the distribution filtering
						vec3 sampleColor = bilinearCubeUV(envMap, L, mipInt);

						// Weight by NdotL for the split-sum approximation
						// VNDF PDF naturally accounts for the visible microfacet distribution
						prefilteredColor += sampleColor * NdotL;
						totalWeight += NdotL;
					}
				}

				if (totalWeight > 0.0) {
					prefilteredColor = prefilteredColor / totalWeight;
				}

				gl_FragColor = vec4(prefilteredColor, 1.0);
			}
		`,blending:Do,depthTest:!1,depthWrite:!1})}function xz(n,e,t){const i=new Float32Array(Ef),a=new K(0,1,0);return new _s({name:"SphericalGaussianBlur",defines:{n:Ef,CUBEUV_TEXEL_WIDTH:1/e,CUBEUV_TEXEL_HEIGHT:1/t,CUBEUV_MAX_MIP:`${n}.0`},uniforms:{envMap:{value:null},samples:{value:1},weights:{value:i},latitudinal:{value:!1},dTheta:{value:0},mipInt:{value:0},poleAxis:{value:a}},vertexShader:d_(),fragmentShader:`

			precision mediump float;
			precision mediump int;

			varying vec3 vOutputDirection;

			uniform sampler2D envMap;
			uniform int samples;
			uniform float weights[ n ];
			uniform bool latitudinal;
			uniform float dTheta;
			uniform float mipInt;
			uniform vec3 poleAxis;

			#define ENVMAP_TYPE_CUBE_UV
			#include <cube_uv_reflection_fragment>

			vec3 getSample( float theta, vec3 axis ) {

				float cosTheta = cos( theta );
				// Rodrigues' axis-angle rotation
				vec3 sampleDirection = vOutputDirection * cosTheta
					+ cross( axis, vOutputDirection ) * sin( theta )
					+ axis * dot( axis, vOutputDirection ) * ( 1.0 - cosTheta );

				return bilinearCubeUV( envMap, sampleDirection, mipInt );

			}

			void main() {

				vec3 axis = latitudinal ? poleAxis : cross( poleAxis, vOutputDirection );

				if ( all( equal( axis, vec3( 0.0 ) ) ) ) {

					axis = vec3( vOutputDirection.z, 0.0, - vOutputDirection.x );

				}

				axis = normalize( axis );

				gl_FragColor = vec4( 0.0, 0.0, 0.0, 1.0 );
				gl_FragColor.rgb += weights[ 0 ] * getSample( 0.0, axis );

				for ( int i = 1; i < n; i++ ) {

					if ( i >= samples ) {

						break;

					}

					float theta = dTheta * float( i );
					gl_FragColor.rgb += weights[ i ] * getSample( -1.0 * theta, axis );
					gl_FragColor.rgb += weights[ i ] * getSample( theta, axis );

				}

			}
		`,blending:Do,depthTest:!1,depthWrite:!1})}function CR(){return new _s({name:"EquirectangularToCubeUV",uniforms:{envMap:{value:null}},vertexShader:d_(),fragmentShader:`

			precision mediump float;
			precision mediump int;

			varying vec3 vOutputDirection;

			uniform sampler2D envMap;

			#include <common>

			void main() {

				vec3 outputDirection = normalize( vOutputDirection );
				vec2 uv = equirectUv( outputDirection );

				gl_FragColor = vec4( texture2D ( envMap, uv ).rgb, 1.0 );

			}
		`,blending:Do,depthTest:!1,depthWrite:!1})}function RR(){return new _s({name:"CubemapToCubeUV",uniforms:{envMap:{value:null},flipEnvMap:{value:-1}},vertexShader:d_(),fragmentShader:`

			precision mediump float;
			precision mediump int;

			uniform float flipEnvMap;

			varying vec3 vOutputDirection;

			uniform samplerCube envMap;

			void main() {

				gl_FragColor = textureCube( envMap, vec3( flipEnvMap * vOutputDirection.x, vOutputDirection.yz ) );

			}
		`,blending:Do,depthTest:!1,depthWrite:!1})}function d_(){return`

		precision mediump float;
		precision mediump int;

		attribute float faceIndex;

		varying vec3 vOutputDirection;

		// RH coordinate system; PMREM face-indexing convention
		vec3 getDirection( vec2 uv, float face ) {

			uv = 2.0 * uv - 1.0;

			vec3 direction = vec3( uv, 1.0 );

			if ( face == 0.0 ) {

				direction = direction.zyx; // ( 1, v, u ) pos x

			} else if ( face == 1.0 ) {

				direction = direction.xzy;
				direction.xz *= -1.0; // ( -u, 1, -v ) pos y

			} else if ( face == 2.0 ) {

				direction.x *= -1.0; // ( -u, v, 1 ) pos z

			} else if ( face == 3.0 ) {

				direction = direction.zyx;
				direction.xz *= -1.0; // ( -1, v, -u ) neg x

			} else if ( face == 4.0 ) {

				direction = direction.xzy;
				direction.xy *= -1.0; // ( -u, -1, v ) neg y

			} else if ( face == 5.0 ) {

				direction.z *= -1.0; // ( u, v, -1 ) neg z

			}

			return direction;

		}

		void main() {

			vOutputDirection = getDirection( uv, faceIndex );
			gl_Position = vec4( position, 1.0 );

		}
	`}function bz(n){let e=new WeakMap,t=null;function i(c){if(c&&c.isTexture){const d=c.mapping,p=d===tm||d===nm,g=d===Oo||d===Oc;if(p||g){let v=e.get(c);const _=v!==void 0?v.texture.pmremVersion:0;if(c.isRenderTargetTexture&&c.pmremVersion!==_)return t===null&&(t=new NS(n)),v=p?t.fromEquirectangular(c,v):t.fromCubemap(c,v),v.texture.pmremVersion=c.pmremVersion,e.set(c,v),v.texture;if(v!==void 0)return v.texture;{const x=c.image;return p&&x&&x.height>0||g&&x&&a(x)?(t===null&&(t=new NS(n)),v=p?t.fromEquirectangular(c):t.fromCubemap(c),v.texture.pmremVersion=c.pmremVersion,e.set(c,v),c.addEventListener("dispose",s),v.texture):null}}}return c}function a(c){let d=0;const p=6;for(let g=0;g<p;g++)c[g]!==void 0&&d++;return d===p}function s(c){const d=c.target;d.removeEventListener("dispose",s);const p=e.get(d);p!==void 0&&(e.delete(d),p.dispose())}function l(){e=new WeakMap,t!==null&&(t.dispose(),t=null)}return{get:i,dispose:l}}function Az(n){const e={};function t(i){if(e[i]!==void 0)return e[i];const a=n.getExtension(i);return e[i]=a,a}return{has:function(i){return t(i)!==null},init:function(){t("EXT_color_buffer_float"),t("WEBGL_clip_cull_distance"),t("OES_texture_float_linear"),t("EXT_color_buffer_half_float"),t("WEBGL_multisampled_render_to_texture"),t("WEBGL_render_shared_exponent")},get:function(i){const a=t(i);return a===null&&Fh("WebGLRenderer: "+i+" extension not supported."),a}}}function Sz(n,e,t,i){const a={},s=new WeakMap;function l(v){const _=v.target;_.index!==null&&e.remove(_.index);for(const S in _.attributes)e.remove(_.attributes[S]);_.removeEventListener("dispose",l),delete a[_.id];const x=s.get(_);x&&(e.remove(x),s.delete(_)),i.releaseStatesOfGeometry(_),_.isInstancedBufferGeometry===!0&&delete _._maxInstanceCount,t.memory.geometries--}function c(v,_){return a[_.id]===!0||(_.addEventListener("dispose",l),a[_.id]=!0,t.memory.geometries++),_}function d(v){const _=v.attributes;for(const x in _)e.update(_[x],n.ARRAY_BUFFER)}function p(v){const _=[],x=v.index,S=v.attributes.position;let C=0;if(x!==null){const w=x.array;C=x.version;for(let B=0,D=w.length;B<D;B+=3){const P=w[B+0],U=w[B+1],z=w[B+2];_.push(P,U,U,z,z,P)}}else if(S!==void 0){const w=S.array;C=S.version;for(let B=0,D=w.length/3-1;B<D;B+=3){const P=B+0,U=B+1,z=B+2;_.push(P,U,U,z,z,P)}}else return;const T=new(xT(_)?EA:MA)(_,1);T.version=C;const M=s.get(v);M&&e.remove(M),s.set(v,T)}function g(v){const _=s.get(v);if(_){const x=v.index;x!==null&&_.version<x.version&&p(v)}else p(v);return s.get(v)}return{get:c,update:d,getWireframeAttribute:g}}function Mz(n,e,t){let i;function a(_){i=_}let s,l;function c(_){s=_.type,l=_.bytesPerElement}function d(_,x){n.drawElements(i,x,s,_*l),t.update(x,i,1)}function p(_,x,S){S!==0&&(n.drawElementsInstanced(i,x,s,_*l,S),t.update(x,i,S))}function g(_,x,S){if(S===0)return;e.get("WEBGL_multi_draw").multiDrawElementsWEBGL(i,x,0,s,_,0,S);let T=0;for(let M=0;M<S;M++)T+=x[M];t.update(T,i,1)}function v(_,x,S,C){if(S===0)return;const T=e.get("WEBGL_multi_draw");if(T===null)for(let M=0;M<_.length;M++)p(_[M]/l,x[M],C[M]);else{T.multiDrawElementsInstancedWEBGL(i,x,0,s,_,0,C,0,S);let M=0;for(let w=0;w<S;w++)M+=x[w]*C[w];t.update(M,i,1)}}this.setMode=a,this.setIndex=c,this.render=d,this.renderInstances=p,this.renderMultiDraw=g,this.renderMultiDrawInstances=v}function Ez(n){const e={geometries:0,textures:0},t={frame:0,calls:0,triangles:0,points:0,lines:0};function i(s,l,c){switch(t.calls++,l){case n.TRIANGLES:t.triangles+=c*(s/3);break;case n.LINES:t.lines+=c*(s/2);break;case n.LINE_STRIP:t.lines+=c*(s-1);break;case n.LINE_LOOP:t.lines+=c*s;break;case n.POINTS:t.points+=c*s;break;default:Dt("WebGLInfo: Unknown draw mode:",l);break}}function a(){t.calls=0,t.triangles=0,t.points=0,t.lines=0}return{memory:e,render:t,programs:null,autoReset:!0,reset:a,update:i}}function Tz(n,e,t){const i=new WeakMap,a=new Fn;function s(l,c,d){const p=l.morphTargetInfluences,g=c.morphAttributes.position||c.morphAttributes.normal||c.morphAttributes.color,v=g!==void 0?g.length:0;let _=i.get(c);if(_===void 0||_.count!==v){let L=function(){z.dispose(),i.delete(c),c.removeEventListener("dispose",L)};_!==void 0&&_.texture.dispose();const x=c.morphAttributes.position!==void 0,S=c.morphAttributes.normal!==void 0,C=c.morphAttributes.color!==void 0,T=c.morphAttributes.position||[],M=c.morphAttributes.normal||[],w=c.morphAttributes.color||[];let B=0;x===!0&&(B=1),S===!0&&(B=2),C===!0&&(B=3);let D=c.attributes.position.count*B,P=1;D>e.maxTextureSize&&(P=Math.ceil(D/e.maxTextureSize),D=e.maxTextureSize);const U=new Float32Array(D*P*4*v),z=new Kv(U,D,P,v);z.type=nr,z.needsUpdate=!0;const j=B*4;for(let F=0;F<v;F++){const W=T[F],te=M[F],$=w[F],ae=D*P*4*F;for(let le=0;le<W.count;le++){const G=le*j;x===!0&&(a.fromBufferAttribute(W,le),U[ae+G+0]=a.x,U[ae+G+1]=a.y,U[ae+G+2]=a.z,U[ae+G+3]=0),S===!0&&(a.fromBufferAttribute(te,le),U[ae+G+4]=a.x,U[ae+G+5]=a.y,U[ae+G+6]=a.z,U[ae+G+7]=0),C===!0&&(a.fromBufferAttribute($,le),U[ae+G+8]=a.x,U[ae+G+9]=a.y,U[ae+G+10]=a.z,U[ae+G+11]=$.itemSize===4?a.w:1)}}_={count:v,texture:z,size:new He(D,P)},i.set(c,_),c.addEventListener("dispose",L)}if(l.isInstancedMesh===!0&&l.morphTexture!==null)d.getUniforms().setValue(n,"morphTexture",l.morphTexture,t);else{let x=0;for(let C=0;C<p.length;C++)x+=p[C];const S=c.morphTargetsRelative?1:1-x;d.getUniforms().setValue(n,"morphTargetBaseInfluence",S),d.getUniforms().setValue(n,"morphTargetInfluences",p)}d.getUniforms().setValue(n,"morphTargetsTexture",_.texture,t),d.getUniforms().setValue(n,"morphTargetsTextureSize",_.size)}return{update:s}}function Cz(n,e,t,i){let a=new WeakMap;function s(d){const p=i.render.frame,g=d.geometry,v=e.get(d,g);if(a.get(v)!==p&&(e.update(v),a.set(v,p)),d.isInstancedMesh&&(d.hasEventListener("dispose",c)===!1&&d.addEventListener("dispose",c),a.get(d)!==p&&(t.update(d.instanceMatrix,n.ARRAY_BUFFER),d.instanceColor!==null&&t.update(d.instanceColor,n.ARRAY_BUFFER),a.set(d,p))),d.isSkinnedMesh){const _=d.skeleton;a.get(_)!==p&&(_.update(),a.set(_,p))}return v}function l(){a=new WeakMap}function c(d){const p=d.target;p.removeEventListener("dispose",c),t.remove(p.instanceMatrix),p.instanceColor!==null&&t.remove(p.instanceColor)}return{update:s,dispose:l}}const Rz={[Gb]:"LINEAR_TONE_MAPPING",[Vb]:"REINHARD_TONE_MAPPING",[kb]:"CINEON_TONE_MAPPING",[av]:"ACES_FILMIC_TONE_MAPPING",[jb]:"AGX_TONE_MAPPING",[Yb]:"NEUTRAL_TONE_MAPPING",[Xb]:"CUSTOM_TONE_MAPPING"};function wz(n,e,t,i,a){const s=new Jr(e,t,{type:n,depthBuffer:i,stencilBuffer:a}),l=new Jr(e,t,{type:No,depthBuffer:!1,stencilBuffer:!1}),c=new Jt;c.setAttribute("position",new _t([-1,3,0,-1,-1,0,3,-1,0],3)),c.setAttribute("uv",new _t([0,2,0,0,2,0],2));const d=new nS({uniforms:{tDiffuse:{value:null}},vertexShader:`
			precision highp float;

			uniform mat4 modelViewMatrix;
			uniform mat4 projectionMatrix;

			attribute vec3 position;
			attribute vec2 uv;

			varying vec2 vUv;

			void main() {
				vUv = uv;
				gl_Position = projectionMatrix * modelViewMatrix * vec4( position, 1.0 );
			}`,fragmentShader:`
			precision highp float;

			uniform sampler2D tDiffuse;

			varying vec2 vUv;

			#include <tonemapping_pars_fragment>
			#include <colorspace_pars_fragment>

			void main() {
				gl_FragColor = texture2D( tDiffuse, vUv );

				#ifdef LINEAR_TONE_MAPPING
					gl_FragColor.rgb = LinearToneMapping( gl_FragColor.rgb );
				#elif defined( REINHARD_TONE_MAPPING )
					gl_FragColor.rgb = ReinhardToneMapping( gl_FragColor.rgb );
				#elif defined( CINEON_TONE_MAPPING )
					gl_FragColor.rgb = CineonToneMapping( gl_FragColor.rgb );
				#elif defined( ACES_FILMIC_TONE_MAPPING )
					gl_FragColor.rgb = ACESFilmicToneMapping( gl_FragColor.rgb );
				#elif defined( AGX_TONE_MAPPING )
					gl_FragColor.rgb = AgXToneMapping( gl_FragColor.rgb );
				#elif defined( NEUTRAL_TONE_MAPPING )
					gl_FragColor.rgb = NeutralToneMapping( gl_FragColor.rgb );
				#elif defined( CUSTOM_TONE_MAPPING )
					gl_FragColor.rgb = CustomToneMapping( gl_FragColor.rgb );
				#endif

				#ifdef SRGB_TRANSFER
					gl_FragColor = sRGBTransferOETF( gl_FragColor );
				#endif
			}`,depthTest:!1,depthWrite:!1}),p=new Ii(c,d),g=new vf(-1,1,1,-1,0,1);let v=null,_=null,x=!1,S,C=null,T=[],M=!1;this.setSize=function(w,B){s.setSize(w,B),l.setSize(w,B);for(let D=0;D<T.length;D++){const P=T[D];P.setSize&&P.setSize(w,B)}},this.setEffects=function(w){T=w,M=T.length>0&&T[0].isRenderPass===!0;const B=s.width,D=s.height;for(let P=0;P<T.length;P++){const U=T[P];U.setSize&&U.setSize(B,D)}},this.begin=function(w,B){if(x||w.toneMapping===ms&&T.length===0)return!1;if(C=B,B!==null){const D=B.width,P=B.height;(s.width!==D||s.height!==P)&&this.setSize(D,P)}return M===!1&&w.setRenderTarget(s),S=w.toneMapping,w.toneMapping=ms,!0},this.hasRenderPass=function(){return M},this.end=function(w,B){w.toneMapping=S,x=!0;let D=s,P=l;for(let U=0;U<T.length;U++){const z=T[U];if(z.enabled!==!1&&(z.render(w,P,D,B),z.needsSwap!==!1)){const j=D;D=P,P=j}}if(v!==w.outputColorSpace||_!==w.toneMapping){v=w.outputColorSpace,_=w.toneMapping,d.defines={},vn.getTransfer(v)===Hn&&(d.defines.SRGB_TRANSFER="");const U=Rz[_];U&&(d.defines[U]=""),d.needsUpdate=!0}d.uniforms.tDiffuse.value=D.texture,w.setRenderTarget(C),w.render(p,g),C=null,x=!1},this.isCompositing=function(){return x},this.dispose=function(){s.dispose(),l.dispose(),c.dispose(),d.dispose()}}const wR=new ai,US=new ld(1,1),BR=new Kv,DR=new Qv,OR=new _m,NR=[],UR=[],LR=new Float32Array(16),IR=new Float32Array(9),PR=new Float32Array(4);function yd(n,e,t){const i=n[0];if(i<=0||i>0)return n;const a=e*t;let s=NR[a];if(s===void 0&&(s=new Float32Array(a),NR[a]=s),e!==0){i.toArray(s,0);for(let l=1,c=0;l!==e;++l)c+=t,n[l].toArray(s,c)}return s}function $i(n,e){if(n.length!==e.length)return!1;for(let t=0,i=n.length;t<i;t++)if(n[t]!==e[t])return!1;return!0}function ea(n,e){for(let t=0,i=e.length;t<i;t++)n[t]=e[t]}function p_(n,e){let t=UR[e];t===void 0&&(t=new Int32Array(e),UR[e]=t);for(let i=0;i!==e;++i)t[i]=n.allocateTextureUnit();return t}function Bz(n,e){const t=this.cache;t[0]!==e&&(n.uniform1f(this.addr,e),t[0]=e)}function Dz(n,e){const t=this.cache;if(e.x!==void 0)(t[0]!==e.x||t[1]!==e.y)&&(n.uniform2f(this.addr,e.x,e.y),t[0]=e.x,t[1]=e.y);else{if($i(t,e))return;n.uniform2fv(this.addr,e),ea(t,e)}}function Oz(n,e){const t=this.cache;if(e.x!==void 0)(t[0]!==e.x||t[1]!==e.y||t[2]!==e.z)&&(n.uniform3f(this.addr,e.x,e.y,e.z),t[0]=e.x,t[1]=e.y,t[2]=e.z);else if(e.r!==void 0)(t[0]!==e.r||t[1]!==e.g||t[2]!==e.b)&&(n.uniform3f(this.addr,e.r,e.g,e.b),t[0]=e.r,t[1]=e.g,t[2]=e.b);else{if($i(t,e))return;n.uniform3fv(this.addr,e),ea(t,e)}}function Nz(n,e){const t=this.cache;if(e.x!==void 0)(t[0]!==e.x||t[1]!==e.y||t[2]!==e.z||t[3]!==e.w)&&(n.uniform4f(this.addr,e.x,e.y,e.z,e.w),t[0]=e.x,t[1]=e.y,t[2]=e.z,t[3]=e.w);else{if($i(t,e))return;n.uniform4fv(this.addr,e),ea(t,e)}}function Uz(n,e){const t=this.cache,i=e.elements;if(i===void 0){if($i(t,e))return;n.uniformMatrix2fv(this.addr,!1,e),ea(t,e)}else{if($i(t,i))return;PR.set(i),n.uniformMatrix2fv(this.addr,!1,PR),ea(t,i)}}function Lz(n,e){const t=this.cache,i=e.elements;if(i===void 0){if($i(t,e))return;n.uniformMatrix3fv(this.addr,!1,e),ea(t,e)}else{if($i(t,i))return;IR.set(i),n.uniformMatrix3fv(this.addr,!1,IR),ea(t,i)}}function Iz(n,e){const t=this.cache,i=e.elements;if(i===void 0){if($i(t,e))return;n.uniformMatrix4fv(this.addr,!1,e),ea(t,e)}else{if($i(t,i))return;LR.set(i),n.uniformMatrix4fv(this.addr,!1,LR),ea(t,i)}}function Pz(n,e){const t=this.cache;t[0]!==e&&(n.uniform1i(this.addr,e),t[0]=e)}function Fz(n,e){const t=this.cache;if(e.x!==void 0)(t[0]!==e.x||t[1]!==e.y)&&(n.uniform2i(this.addr,e.x,e.y),t[0]=e.x,t[1]=e.y);else{if($i(t,e))return;n.uniform2iv(this.addr,e),ea(t,e)}}function zz(n,e){const t=this.cache;if(e.x!==void 0)(t[0]!==e.x||t[1]!==e.y||t[2]!==e.z)&&(n.uniform3i(this.addr,e.x,e.y,e.z),t[0]=e.x,t[1]=e.y,t[2]=e.z);else{if($i(t,e))return;n.uniform3iv(this.addr,e),ea(t,e)}}function Hz(n,e){const t=this.cache;if(e.x!==void 0)(t[0]!==e.x||t[1]!==e.y||t[2]!==e.z||t[3]!==e.w)&&(n.uniform4i(this.addr,e.x,e.y,e.z,e.w),t[0]=e.x,t[1]=e.y,t[2]=e.z,t[3]=e.w);else{if($i(t,e))return;n.uniform4iv(this.addr,e),ea(t,e)}}function Gz(n,e){const t=this.cache;t[0]!==e&&(n.uniform1ui(this.addr,e),t[0]=e)}function Vz(n,e){const t=this.cache;if(e.x!==void 0)(t[0]!==e.x||t[1]!==e.y)&&(n.uniform2ui(this.addr,e.x,e.y),t[0]=e.x,t[1]=e.y);else{if($i(t,e))return;n.uniform2uiv(this.addr,e),ea(t,e)}}function kz(n,e){const t=this.cache;if(e.x!==void 0)(t[0]!==e.x||t[1]!==e.y||t[2]!==e.z)&&(n.uniform3ui(this.addr,e.x,e.y,e.z),t[0]=e.x,t[1]=e.y,t[2]=e.z);else{if($i(t,e))return;n.uniform3uiv(this.addr,e),ea(t,e)}}function Xz(n,e){const t=this.cache;if(e.x!==void 0)(t[0]!==e.x||t[1]!==e.y||t[2]!==e.z||t[3]!==e.w)&&(n.uniform4ui(this.addr,e.x,e.y,e.z,e.w),t[0]=e.x,t[1]=e.y,t[2]=e.z,t[3]=e.w);else{if($i(t,e))return;n.uniform4uiv(this.addr,e),ea(t,e)}}function jz(n,e,t){const i=this.cache,a=t.allocateTextureUnit();i[0]!==a&&(n.uniform1i(this.addr,a),i[0]=a);let s;this.type===n.SAMPLER_2D_SHADOW?(US.compareFunction=t.isReversedDepthBuffer()?Jv:Wv,s=US):s=wR,t.setTexture2D(e||s,a)}function Yz(n,e,t){const i=this.cache,a=t.allocateTextureUnit();i[0]!==a&&(n.uniform1i(this.addr,a),i[0]=a),t.setTexture3D(e||DR,a)}function qz(n,e,t){const i=this.cache,a=t.allocateTextureUnit();i[0]!==a&&(n.uniform1i(this.addr,a),i[0]=a),t.setTextureCube(e||OR,a)}function Wz(n,e,t){const i=this.cache,a=t.allocateTextureUnit();i[0]!==a&&(n.uniform1i(this.addr,a),i[0]=a),t.setTexture2DArray(e||BR,a)}function Jz(n){switch(n){case 5126:return Bz;case 35664:return Dz;case 35665:return Oz;case 35666:return Nz;case 35674:return Uz;case 35675:return Lz;case 35676:return Iz;case 5124:case 35670:return Pz;case 35667:case 35671:return Fz;case 35668:case 35672:return zz;case 35669:case 35673:return Hz;case 5125:return Gz;case 36294:return Vz;case 36295:return kz;case 36296:return Xz;case 35678:case 36198:case 36298:case 36306:case 35682:return jz;case 35679:case 36299:case 36307:return Yz;case 35680:case 36300:case 36308:case 36293:return qz;case 36289:case 36303:case 36311:case 36292:return Wz}}function Kz(n,e){n.uniform1fv(this.addr,e)}function Qz(n,e){const t=yd(e,this.size,2);n.uniform2fv(this.addr,t)}function Zz(n,e){const t=yd(e,this.size,3);n.uniform3fv(this.addr,t)}function $z(n,e){const t=yd(e,this.size,4);n.uniform4fv(this.addr,t)}function e4(n,e){const t=yd(e,this.size,4);n.uniformMatrix2fv(this.addr,!1,t)}function t4(n,e){const t=yd(e,this.size,9);n.uniformMatrix3fv(this.addr,!1,t)}function n4(n,e){const t=yd(e,this.size,16);n.uniformMatrix4fv(this.addr,!1,t)}function i4(n,e){n.uniform1iv(this.addr,e)}function a4(n,e){n.uniform2iv(this.addr,e)}function r4(n,e){n.uniform3iv(this.addr,e)}function s4(n,e){n.uniform4iv(this.addr,e)}function o4(n,e){n.uniform1uiv(this.addr,e)}function l4(n,e){n.uniform2uiv(this.addr,e)}function c4(n,e){n.uniform3uiv(this.addr,e)}function u4(n,e){n.uniform4uiv(this.addr,e)}function f4(n,e,t){const i=this.cache,a=e.length,s=p_(t,a);$i(i,s)||(n.uniform1iv(this.addr,s),ea(i,s));let l;this.type===n.SAMPLER_2D_SHADOW?l=US:l=wR;for(let c=0;c!==a;++c)t.setTexture2D(e[c]||l,s[c])}function h4(n,e,t){const i=this.cache,a=e.length,s=p_(t,a);$i(i,s)||(n.uniform1iv(this.addr,s),ea(i,s));for(let l=0;l!==a;++l)t.setTexture3D(e[l]||DR,s[l])}function d4(n,e,t){const i=this.cache,a=e.length,s=p_(t,a);$i(i,s)||(n.uniform1iv(this.addr,s),ea(i,s));for(let l=0;l!==a;++l)t.setTextureCube(e[l]||OR,s[l])}function p4(n,e,t){const i=this.cache,a=e.length,s=p_(t,a);$i(i,s)||(n.uniform1iv(this.addr,s),ea(i,s));for(let l=0;l!==a;++l)t.setTexture2DArray(e[l]||BR,s[l])}function m4(n){switch(n){case 5126:return Kz;case 35664:return Qz;case 35665:return Zz;case 35666:return $z;case 35674:return e4;case 35675:return t4;case 35676:return n4;case 5124:case 35670:return i4;case 35667:case 35671:return a4;case 35668:case 35672:return r4;case 35669:case 35673:return s4;case 5125:return o4;case 36294:return l4;case 36295:return c4;case 36296:return u4;case 35678:case 36198:case 36298:case 36306:case 35682:return f4;case 35679:case 36299:case 36307:return h4;case 35680:case 36300:case 36308:case 36293:return d4;case 36289:case 36303:case 36311:case 36292:return p4}}class g4{constructor(e,t,i){this.id=e,this.addr=i,this.cache=[],this.type=t.type,this.setValue=Jz(t.type)}}class v4{constructor(e,t,i){this.id=e,this.addr=i,this.cache=[],this.type=t.type,this.size=t.size,this.setValue=m4(t.type)}}class y4{constructor(e){this.id=e,this.seq=[],this.map={}}setValue(e,t,i){const a=this.seq;for(let s=0,l=a.length;s!==l;++s){const c=a[s];c.setValue(e,t[c.id],i)}}}const LS=/(\w+)(\])?(\[|\.)?/g;function FR(n,e){n.seq.push(e),n.map[e.id]=e}function _4(n,e,t){const i=n.name,a=i.length;for(LS.lastIndex=0;;){const s=LS.exec(i),l=LS.lastIndex;let c=s[1];const d=s[2]==="]",p=s[3];if(d&&(c=c|0),p===void 0||p==="["&&l+2===a){FR(t,p===void 0?new g4(c,n,e):new v4(c,n,e));break}else{let v=t.map[c];v===void 0&&(v=new y4(c),FR(t,v)),t=v}}}class m_{constructor(e,t){this.seq=[],this.map={};const i=e.getProgramParameter(t,e.ACTIVE_UNIFORMS);for(let l=0;l<i;++l){const c=e.getActiveUniform(t,l),d=e.getUniformLocation(t,c.name);_4(c,d,this)}const a=[],s=[];for(const l of this.seq)l.type===e.SAMPLER_2D_SHADOW||l.type===e.SAMPLER_CUBE_SHADOW||l.type===e.SAMPLER_2D_ARRAY_SHADOW?a.push(l):s.push(l);a.length>0&&(this.seq=a.concat(s))}setValue(e,t,i,a){const s=this.map[t];s!==void 0&&s.setValue(e,i,a)}setOptional(e,t,i){const a=t[i];a!==void 0&&this.setValue(e,i,a)}static upload(e,t,i,a){for(let s=0,l=t.length;s!==l;++s){const c=t[s],d=i[c.id];d.needsUpdate!==!1&&c.setValue(e,d.value,a)}}static seqWithValue(e,t){const i=[];for(let a=0,s=e.length;a!==s;++a){const l=e[a];l.id in t&&i.push(l)}return i}}function zR(n,e,t){const i=n.createShader(e);return n.shaderSource(i,t),n.compileShader(i),i}const x4=37297;let b4=0;function A4(n,e){const t=n.split(`
`),i=[],a=Math.max(e-6,0),s=Math.min(e+6,t.length);for(let l=a;l<s;l++){const c=l+1;i.push(`${c===e?">":" "} ${c}: ${t[l]}`)}return i.join(`
`)}const HR=new Zt;function S4(n){vn._getMatrix(HR,vn.workingColorSpace,n);const e=`mat3( ${HR.elements.map(t=>t.toFixed(4))} )`;switch(vn.getTransfer(n)){case cm:return[e,"LinearTransferOETF"];case Hn:return[e,"sRGBTransferOETF"];default:return ct("WebGLProgram: Unsupported color space: ",n),[e,"LinearTransferOETF"]}}function GR(n,e,t){const i=n.getShaderParameter(e,n.COMPILE_STATUS),s=(n.getShaderInfoLog(e)||"").trim();if(i&&s==="")return"";const l=/ERROR: 0:(\d+)/.exec(s);if(l){const c=parseInt(l[1]);return t.toUpperCase()+`

`+s+`

`+A4(n.getShaderSource(e),c)}else return s}function M4(n,e){const t=S4(e);return[`vec4 ${n}( vec4 value ) {`,`	return ${t[1]}( vec4( value.rgb * ${t[0]}, value.a ) );`,"}"].join(`
`)}const E4={[Gb]:"Linear",[Vb]:"Reinhard",[kb]:"Cineon",[av]:"ACESFilmic",[jb]:"AgX",[Yb]:"Neutral",[Xb]:"Custom"};function T4(n,e){const t=E4[e];return t===void 0?(ct("WebGLProgram: Unsupported toneMapping:",e),"vec3 "+n+"( vec3 color ) { return LinearToneMapping( color ); }"):"vec3 "+n+"( vec3 color ) { return "+t+"ToneMapping( color ); }"}const g_=new K;function C4(){vn.getLuminanceCoefficients(g_);const n=g_.x.toFixed(4),e=g_.y.toFixed(4),t=g_.z.toFixed(4);return["float luminance( const in vec3 rgb ) {",`	const vec3 weights = vec3( ${n}, ${e}, ${t} );`,"	return dot( weights, rgb );","}"].join(`
`)}function R4(n){return[n.extensionClipCullDistance?"#extension GL_ANGLE_clip_cull_distance : require":"",n.extensionMultiDraw?"#extension GL_ANGLE_multi_draw : require":""].filter(km).join(`
`)}function w4(n){const e=[];for(const t in n){const i=n[t];i!==!1&&e.push("#define "+t+" "+i)}return e.join(`
`)}function B4(n,e){const t={},i=n.getProgramParameter(e,n.ACTIVE_ATTRIBUTES);for(let a=0;a<i;a++){const s=n.getActiveAttrib(e,a),l=s.name;let c=1;s.type===n.FLOAT_MAT2&&(c=2),s.type===n.FLOAT_MAT3&&(c=3),s.type===n.FLOAT_MAT4&&(c=4),t[l]={type:s.type,location:n.getAttribLocation(e,l),locationSize:c}}return t}function km(n){return n!==""}function VR(n,e){const t=e.numSpotLightShadows+e.numSpotLightMaps-e.numSpotLightShadowsWithMaps;return n.replace(/NUM_DIR_LIGHTS/g,e.numDirLights).replace(/NUM_SPOT_LIGHTS/g,e.numSpotLights).replace(/NUM_SPOT_LIGHT_MAPS/g,e.numSpotLightMaps).replace(/NUM_SPOT_LIGHT_COORDS/g,t).replace(/NUM_RECT_AREA_LIGHTS/g,e.numRectAreaLights).replace(/NUM_POINT_LIGHTS/g,e.numPointLights).replace(/NUM_HEMI_LIGHTS/g,e.numHemiLights).replace(/NUM_DIR_LIGHT_SHADOWS/g,e.numDirLightShadows).replace(/NUM_SPOT_LIGHT_SHADOWS_WITH_MAPS/g,e.numSpotLightShadowsWithMaps).replace(/NUM_SPOT_LIGHT_SHADOWS/g,e.numSpotLightShadows).replace(/NUM_POINT_LIGHT_SHADOWS/g,e.numPointLightShadows)}function kR(n,e){return n.replace(/NUM_CLIPPING_PLANES/g,e.numClippingPlanes).replace(/UNION_CLIPPING_PLANES/g,e.numClippingPlanes-e.numClipIntersection)}const D4=/^[ \t]*#include +<([\w\d./]+)>/gm;function IS(n){return n.replace(D4,N4)}const O4=new Map;function N4(n,e){let t=sn[e];if(t===void 0){const i=O4.get(e);if(i!==void 0)t=sn[i],ct('WebGLRenderer: Shader chunk "%s" has been deprecated. Use "%s" instead.',e,i);else throw new Error("Can not resolve #include <"+e+">")}return IS(t)}const U4=/#pragma unroll_loop_start\s+for\s*\(\s*int\s+i\s*=\s*(\d+)\s*;\s*i\s*<\s*(\d+)\s*;\s*i\s*\+\+\s*\)\s*{([\s\S]+?)}\s+#pragma unroll_loop_end/g;function XR(n){return n.replace(U4,L4)}function L4(n,e,t,i){let a="";for(let s=parseInt(e);s<parseInt(t);s++)a+=i.replace(/\[\s*i\s*\]/g,"[ "+s+" ]").replace(/UNROLLED_LOOP_INDEX/g,s);return a}function jR(n){let e=`precision ${n.precision} float;
	precision ${n.precision} int;
	precision ${n.precision} sampler2D;
	precision ${n.precision} samplerCube;
	precision ${n.precision} sampler3D;
	precision ${n.precision} sampler2DArray;
	precision ${n.precision} sampler2DShadow;
	precision ${n.precision} samplerCubeShadow;
	precision ${n.precision} sampler2DArrayShadow;
	precision ${n.precision} isampler2D;
	precision ${n.precision} isampler3D;
	precision ${n.precision} isamplerCube;
	precision ${n.precision} isampler2DArray;
	precision ${n.precision} usampler2D;
	precision ${n.precision} usampler3D;
	precision ${n.precision} usamplerCube;
	precision ${n.precision} usampler2DArray;
	`;return n.precision==="highp"?e+=`
#define HIGH_PRECISION`:n.precision==="mediump"?e+=`
#define MEDIUM_PRECISION`:n.precision==="lowp"&&(e+=`
#define LOW_PRECISION`),e}const I4={[Rh]:"SHADOWMAP_TYPE_PCF",[ju]:"SHADOWMAP_TYPE_VSM"};function P4(n){return I4[n.shadowMapType]||"SHADOWMAP_TYPE_BASIC"}const F4={[Oo]:"ENVMAP_TYPE_CUBE",[Oc]:"ENVMAP_TYPE_CUBE",[wh]:"ENVMAP_TYPE_CUBE_UV"};function z4(n){return n.envMap===!1?"ENVMAP_TYPE_CUBE":F4[n.envMapMode]||"ENVMAP_TYPE_CUBE"}const H4={[Oc]:"ENVMAP_MODE_REFRACTION"};function G4(n){return n.envMap===!1?"ENVMAP_MODE_REFLECTION":H4[n.envMapMode]||"ENVMAP_MODE_REFLECTION"}const V4={[em]:"ENVMAP_BLENDING_MULTIPLY",[rT]:"ENVMAP_BLENDING_MIX",[sT]:"ENVMAP_BLENDING_ADD"};function k4(n){return n.envMap===!1?"ENVMAP_BLENDING_NONE":V4[n.combine]||"ENVMAP_BLENDING_NONE"}function X4(n){const e=n.envMapCubeUVHeight;if(e===null)return null;const t=Math.log2(e)-2,i=1/e;return{texelWidth:1/(3*Math.max(Math.pow(2,t),112)),texelHeight:i,maxMip:t}}function j4(n,e,t,i){const a=n.getContext(),s=t.defines;let l=t.vertexShader,c=t.fragmentShader;const d=P4(t),p=z4(t),g=G4(t),v=k4(t),_=X4(t),x=R4(t),S=w4(s),C=a.createProgram();let T,M,w=t.glslVersion?"#version "+t.glslVersion+`
`:"";t.isRawShaderMaterial?(T=["#define SHADER_TYPE "+t.shaderType,"#define SHADER_NAME "+t.shaderName,S].filter(km).join(`
`),T.length>0&&(T+=`
`),M=["#define SHADER_TYPE "+t.shaderType,"#define SHADER_NAME "+t.shaderName,S].filter(km).join(`
`),M.length>0&&(M+=`
`)):(T=[jR(t),"#define SHADER_TYPE "+t.shaderType,"#define SHADER_NAME "+t.shaderName,S,t.extensionClipCullDistance?"#define USE_CLIP_DISTANCE":"",t.batching?"#define USE_BATCHING":"",t.batchingColor?"#define USE_BATCHING_COLOR":"",t.instancing?"#define USE_INSTANCING":"",t.instancingColor?"#define USE_INSTANCING_COLOR":"",t.instancingMorph?"#define USE_INSTANCING_MORPH":"",t.useFog&&t.fog?"#define USE_FOG":"",t.useFog&&t.fogExp2?"#define FOG_EXP2":"",t.map?"#define USE_MAP":"",t.envMap?"#define USE_ENVMAP":"",t.envMap?"#define "+g:"",t.lightMap?"#define USE_LIGHTMAP":"",t.aoMap?"#define USE_AOMAP":"",t.bumpMap?"#define USE_BUMPMAP":"",t.normalMap?"#define USE_NORMALMAP":"",t.normalMapObjectSpace?"#define USE_NORMALMAP_OBJECTSPACE":"",t.normalMapTangentSpace?"#define USE_NORMALMAP_TANGENTSPACE":"",t.displacementMap?"#define USE_DISPLACEMENTMAP":"",t.emissiveMap?"#define USE_EMISSIVEMAP":"",t.anisotropy?"#define USE_ANISOTROPY":"",t.anisotropyMap?"#define USE_ANISOTROPYMAP":"",t.clearcoatMap?"#define USE_CLEARCOATMAP":"",t.clearcoatRoughnessMap?"#define USE_CLEARCOAT_ROUGHNESSMAP":"",t.clearcoatNormalMap?"#define USE_CLEARCOAT_NORMALMAP":"",t.iridescenceMap?"#define USE_IRIDESCENCEMAP":"",t.iridescenceThicknessMap?"#define USE_IRIDESCENCE_THICKNESSMAP":"",t.specularMap?"#define USE_SPECULARMAP":"",t.specularColorMap?"#define USE_SPECULAR_COLORMAP":"",t.specularIntensityMap?"#define USE_SPECULAR_INTENSITYMAP":"",t.roughnessMap?"#define USE_ROUGHNESSMAP":"",t.metalnessMap?"#define USE_METALNESSMAP":"",t.alphaMap?"#define USE_ALPHAMAP":"",t.alphaHash?"#define USE_ALPHAHASH":"",t.transmission?"#define USE_TRANSMISSION":"",t.transmissionMap?"#define USE_TRANSMISSIONMAP":"",t.thicknessMap?"#define USE_THICKNESSMAP":"",t.sheenColorMap?"#define USE_SHEEN_COLORMAP":"",t.sheenRoughnessMap?"#define USE_SHEEN_ROUGHNESSMAP":"",t.mapUv?"#define MAP_UV "+t.mapUv:"",t.alphaMapUv?"#define ALPHAMAP_UV "+t.alphaMapUv:"",t.lightMapUv?"#define LIGHTMAP_UV "+t.lightMapUv:"",t.aoMapUv?"#define AOMAP_UV "+t.aoMapUv:"",t.emissiveMapUv?"#define EMISSIVEMAP_UV "+t.emissiveMapUv:"",t.bumpMapUv?"#define BUMPMAP_UV "+t.bumpMapUv:"",t.normalMapUv?"#define NORMALMAP_UV "+t.normalMapUv:"",t.displacementMapUv?"#define DISPLACEMENTMAP_UV "+t.displacementMapUv:"",t.metalnessMapUv?"#define METALNESSMAP_UV "+t.metalnessMapUv:"",t.roughnessMapUv?"#define ROUGHNESSMAP_UV "+t.roughnessMapUv:"",t.anisotropyMapUv?"#define ANISOTROPYMAP_UV "+t.anisotropyMapUv:"",t.clearcoatMapUv?"#define CLEARCOATMAP_UV "+t.clearcoatMapUv:"",t.clearcoatNormalMapUv?"#define CLEARCOAT_NORMALMAP_UV "+t.clearcoatNormalMapUv:"",t.clearcoatRoughnessMapUv?"#define CLEARCOAT_ROUGHNESSMAP_UV "+t.clearcoatRoughnessMapUv:"",t.iridescenceMapUv?"#define IRIDESCENCEMAP_UV "+t.iridescenceMapUv:"",t.iridescenceThicknessMapUv?"#define IRIDESCENCE_THICKNESSMAP_UV "+t.iridescenceThicknessMapUv:"",t.sheenColorMapUv?"#define SHEEN_COLORMAP_UV "+t.sheenColorMapUv:"",t.sheenRoughnessMapUv?"#define SHEEN_ROUGHNESSMAP_UV "+t.sheenRoughnessMapUv:"",t.specularMapUv?"#define SPECULARMAP_UV "+t.specularMapUv:"",t.specularColorMapUv?"#define SPECULAR_COLORMAP_UV "+t.specularColorMapUv:"",t.specularIntensityMapUv?"#define SPECULAR_INTENSITYMAP_UV "+t.specularIntensityMapUv:"",t.transmissionMapUv?"#define TRANSMISSIONMAP_UV "+t.transmissionMapUv:"",t.thicknessMapUv?"#define THICKNESSMAP_UV "+t.thicknessMapUv:"",t.vertexTangents&&t.flatShading===!1?"#define USE_TANGENT":"",t.vertexColors?"#define USE_COLOR":"",t.vertexAlphas?"#define USE_COLOR_ALPHA":"",t.vertexUv1s?"#define USE_UV1":"",t.vertexUv2s?"#define USE_UV2":"",t.vertexUv3s?"#define USE_UV3":"",t.pointsUvs?"#define USE_POINTS_UV":"",t.flatShading?"#define FLAT_SHADED":"",t.skinning?"#define USE_SKINNING":"",t.morphTargets?"#define USE_MORPHTARGETS":"",t.morphNormals&&t.flatShading===!1?"#define USE_MORPHNORMALS":"",t.morphColors?"#define USE_MORPHCOLORS":"",t.morphTargetsCount>0?"#define MORPHTARGETS_TEXTURE_STRIDE "+t.morphTextureStride:"",t.morphTargetsCount>0?"#define MORPHTARGETS_COUNT "+t.morphTargetsCount:"",t.doubleSided?"#define DOUBLE_SIDED":"",t.flipSided?"#define FLIP_SIDED":"",t.shadowMapEnabled?"#define USE_SHADOWMAP":"",t.shadowMapEnabled?"#define "+d:"",t.sizeAttenuation?"#define USE_SIZEATTENUATION":"",t.numLightProbes>0?"#define USE_LIGHT_PROBES":"",t.logarithmicDepthBuffer?"#define USE_LOGARITHMIC_DEPTH_BUFFER":"",t.reversedDepthBuffer?"#define USE_REVERSED_DEPTH_BUFFER":"","uniform mat4 modelMatrix;","uniform mat4 modelViewMatrix;","uniform mat4 projectionMatrix;","uniform mat4 viewMatrix;","uniform mat3 normalMatrix;","uniform vec3 cameraPosition;","uniform bool isOrthographic;","#ifdef USE_INSTANCING","	attribute mat4 instanceMatrix;","#endif","#ifdef USE_INSTANCING_COLOR","	attribute vec3 instanceColor;","#endif","#ifdef USE_INSTANCING_MORPH","	uniform sampler2D morphTexture;","#endif","attribute vec3 position;","attribute vec3 normal;","attribute vec2 uv;","#ifdef USE_UV1","	attribute vec2 uv1;","#endif","#ifdef USE_UV2","	attribute vec2 uv2;","#endif","#ifdef USE_UV3","	attribute vec2 uv3;","#endif","#ifdef USE_TANGENT","	attribute vec4 tangent;","#endif","#if defined( USE_COLOR_ALPHA )","	attribute vec4 color;","#elif defined( USE_COLOR )","	attribute vec3 color;","#endif","#ifdef USE_SKINNING","	attribute vec4 skinIndex;","	attribute vec4 skinWeight;","#endif",`
`].filter(km).join(`
`),M=[jR(t),"#define SHADER_TYPE "+t.shaderType,"#define SHADER_NAME "+t.shaderName,S,t.useFog&&t.fog?"#define USE_FOG":"",t.useFog&&t.fogExp2?"#define FOG_EXP2":"",t.alphaToCoverage?"#define ALPHA_TO_COVERAGE":"",t.map?"#define USE_MAP":"",t.matcap?"#define USE_MATCAP":"",t.envMap?"#define USE_ENVMAP":"",t.envMap?"#define "+p:"",t.envMap?"#define "+g:"",t.envMap?"#define "+v:"",_?"#define CUBEUV_TEXEL_WIDTH "+_.texelWidth:"",_?"#define CUBEUV_TEXEL_HEIGHT "+_.texelHeight:"",_?"#define CUBEUV_MAX_MIP "+_.maxMip+".0":"",t.lightMap?"#define USE_LIGHTMAP":"",t.aoMap?"#define USE_AOMAP":"",t.bumpMap?"#define USE_BUMPMAP":"",t.normalMap?"#define USE_NORMALMAP":"",t.normalMapObjectSpace?"#define USE_NORMALMAP_OBJECTSPACE":"",t.normalMapTangentSpace?"#define USE_NORMALMAP_TANGENTSPACE":"",t.emissiveMap?"#define USE_EMISSIVEMAP":"",t.anisotropy?"#define USE_ANISOTROPY":"",t.anisotropyMap?"#define USE_ANISOTROPYMAP":"",t.clearcoat?"#define USE_CLEARCOAT":"",t.clearcoatMap?"#define USE_CLEARCOATMAP":"",t.clearcoatRoughnessMap?"#define USE_CLEARCOAT_ROUGHNESSMAP":"",t.clearcoatNormalMap?"#define USE_CLEARCOAT_NORMALMAP":"",t.dispersion?"#define USE_DISPERSION":"",t.iridescence?"#define USE_IRIDESCENCE":"",t.iridescenceMap?"#define USE_IRIDESCENCEMAP":"",t.iridescenceThicknessMap?"#define USE_IRIDESCENCE_THICKNESSMAP":"",t.specularMap?"#define USE_SPECULARMAP":"",t.specularColorMap?"#define USE_SPECULAR_COLORMAP":"",t.specularIntensityMap?"#define USE_SPECULAR_INTENSITYMAP":"",t.roughnessMap?"#define USE_ROUGHNESSMAP":"",t.metalnessMap?"#define USE_METALNESSMAP":"",t.alphaMap?"#define USE_ALPHAMAP":"",t.alphaTest?"#define USE_ALPHATEST":"",t.alphaHash?"#define USE_ALPHAHASH":"",t.sheen?"#define USE_SHEEN":"",t.sheenColorMap?"#define USE_SHEEN_COLORMAP":"",t.sheenRoughnessMap?"#define USE_SHEEN_ROUGHNESSMAP":"",t.transmission?"#define USE_TRANSMISSION":"",t.transmissionMap?"#define USE_TRANSMISSIONMAP":"",t.thicknessMap?"#define USE_THICKNESSMAP":"",t.vertexTangents&&t.flatShading===!1?"#define USE_TANGENT":"",t.vertexColors||t.instancingColor||t.batchingColor?"#define USE_COLOR":"",t.vertexAlphas?"#define USE_COLOR_ALPHA":"",t.vertexUv1s?"#define USE_UV1":"",t.vertexUv2s?"#define USE_UV2":"",t.vertexUv3s?"#define USE_UV3":"",t.pointsUvs?"#define USE_POINTS_UV":"",t.gradientMap?"#define USE_GRADIENTMAP":"",t.flatShading?"#define FLAT_SHADED":"",t.doubleSided?"#define DOUBLE_SIDED":"",t.flipSided?"#define FLIP_SIDED":"",t.shadowMapEnabled?"#define USE_SHADOWMAP":"",t.shadowMapEnabled?"#define "+d:"",t.premultipliedAlpha?"#define PREMULTIPLIED_ALPHA":"",t.numLightProbes>0?"#define USE_LIGHT_PROBES":"",t.decodeVideoTexture?"#define DECODE_VIDEO_TEXTURE":"",t.decodeVideoTextureEmissive?"#define DECODE_VIDEO_TEXTURE_EMISSIVE":"",t.logarithmicDepthBuffer?"#define USE_LOGARITHMIC_DEPTH_BUFFER":"",t.reversedDepthBuffer?"#define USE_REVERSED_DEPTH_BUFFER":"","uniform mat4 viewMatrix;","uniform vec3 cameraPosition;","uniform bool isOrthographic;",t.toneMapping!==ms?"#define TONE_MAPPING":"",t.toneMapping!==ms?sn.tonemapping_pars_fragment:"",t.toneMapping!==ms?T4("toneMapping",t.toneMapping):"",t.dithering?"#define DITHERING":"",t.opaque?"#define OPAQUE":"",sn.colorspace_pars_fragment,M4("linearToOutputTexel",t.outputColorSpace),C4(),t.useDepthPacking?"#define DEPTH_PACKING "+t.depthPacking:"",`
`].filter(km).join(`
`)),l=IS(l),l=VR(l,t),l=kR(l,t),c=IS(c),c=VR(c,t),c=kR(c,t),l=XR(l),c=XR(c),t.isRawShaderMaterial!==!0&&(w=`#version 300 es
`,T=[x,"#define attribute in","#define varying out","#define texture2D texture"].join(`
`)+`
`+T,M=["#define varying in",t.glslVersion===iA?"":"layout(location = 0) out highp vec4 pc_fragColor;",t.glslVersion===iA?"":"#define gl_FragColor pc_fragColor","#define gl_FragDepthEXT gl_FragDepth","#define texture2D texture","#define textureCube texture","#define texture2DProj textureProj","#define texture2DLodEXT textureLod","#define texture2DProjLodEXT textureProjLod","#define textureCubeLodEXT textureLod","#define texture2DGradEXT textureGrad","#define texture2DProjGradEXT textureProjGrad","#define textureCubeGradEXT textureGrad"].join(`
`)+`
`+M);const B=w+T+l,D=w+M+c,P=zR(a,a.VERTEX_SHADER,B),U=zR(a,a.FRAGMENT_SHADER,D);a.attachShader(C,P),a.attachShader(C,U),t.index0AttributeName!==void 0?a.bindAttribLocation(C,0,t.index0AttributeName):t.morphTargets===!0&&a.bindAttribLocation(C,0,"position"),a.linkProgram(C);function z(W){if(n.debug.checkShaderErrors){const te=a.getProgramInfoLog(C)||"",$=a.getShaderInfoLog(P)||"",ae=a.getShaderInfoLog(U)||"",le=te.trim(),G=$.trim(),J=ae.trim();let Z=!0,pe=!0;if(a.getProgramParameter(C,a.LINK_STATUS)===!1)if(Z=!1,typeof n.debug.onShaderError=="function")n.debug.onShaderError(a,C,P,U);else{const _e=GR(a,P,"vertex"),q=GR(a,U,"fragment");Dt("THREE.WebGLProgram: Shader Error "+a.getError()+" - VALIDATE_STATUS "+a.getProgramParameter(C,a.VALIDATE_STATUS)+`

Material Name: `+W.name+`
Material Type: `+W.type+`

Program Info Log: `+le+`
`+_e+`
`+q)}else le!==""?ct("WebGLProgram: Program Info Log:",le):(G===""||J==="")&&(pe=!1);pe&&(W.diagnostics={runnable:Z,programLog:le,vertexShader:{log:G,prefix:T},fragmentShader:{log:J,prefix:M}})}a.deleteShader(P),a.deleteShader(U),j=new m_(a,C),L=B4(a,C)}let j;this.getUniforms=function(){return j===void 0&&z(this),j};let L;this.getAttributes=function(){return L===void 0&&z(this),L};let F=t.rendererExtensionParallelShaderCompile===!1;return this.isReady=function(){return F===!1&&(F=a.getProgramParameter(C,x4)),F},this.destroy=function(){i.releaseStatesOfProgram(this),a.deleteProgram(C),this.program=void 0},this.type=t.shaderType,this.name=t.shaderName,this.id=b4++,this.cacheKey=e,this.usedTimes=1,this.program=C,this.vertexShader=P,this.fragmentShader=U,this}let Y4=0;class q4{constructor(){this.shaderCache=new Map,this.materialCache=new Map}update(e){const t=e.vertexShader,i=e.fragmentShader,a=this._getShaderStage(t),s=this._getShaderStage(i),l=this._getShaderCacheForMaterial(e);return l.has(a)===!1&&(l.add(a),a.usedTimes++),l.has(s)===!1&&(l.add(s),s.usedTimes++),this}remove(e){const t=this.materialCache.get(e);for(const i of t)i.usedTimes--,i.usedTimes===0&&this.shaderCache.delete(i.code);return this.materialCache.delete(e),this}getVertexShaderID(e){return this._getShaderStage(e.vertexShader).id}getFragmentShaderID(e){return this._getShaderStage(e.fragmentShader).id}dispose(){this.shaderCache.clear(),this.materialCache.clear()}_getShaderCacheForMaterial(e){const t=this.materialCache;let i=t.get(e);return i===void 0&&(i=new Set,t.set(e,i)),i}_getShaderStage(e){const t=this.shaderCache;let i=t.get(e);return i===void 0&&(i=new W4(e),t.set(e,i)),i}}class W4{constructor(e){this.id=Y4++,this.code=e,this.usedTimes=0}}function J4(n,e,t,i,a,s,l){const c=new qh,d=new q4,p=new Set,g=[],v=new Map,_=a.logarithmicDepthBuffer;let x=a.precision;const S={MeshDepthMaterial:"depth",MeshDistanceMaterial:"distance",MeshNormalMaterial:"normal",MeshBasicMaterial:"basic",MeshLambertMaterial:"lambert",MeshPhongMaterial:"phong",MeshToonMaterial:"toon",MeshStandardMaterial:"physical",MeshPhysicalMaterial:"physical",MeshMatcapMaterial:"matcap",LineBasicMaterial:"basic",LineDashedMaterial:"dashed",PointsMaterial:"points",ShadowMaterial:"shadow",SpriteMaterial:"sprite"};function C(L){return p.add(L),L===0?"uv":`uv${L}`}function T(L,F,W,te,$){const ae=te.fog,le=$.geometry,G=L.isMeshStandardMaterial?te.environment:null,J=(L.isMeshStandardMaterial?t:e).get(L.envMap||G),Z=J&&J.mapping===wh?J.image.height:null,pe=S[L.type];L.precision!==null&&(x=a.getMaxPrecision(L.precision),x!==L.precision&&ct("WebGLProgram.getParameters:",L.precision,"not supported, using",x,"instead."));const _e=le.morphAttributes.position||le.morphAttributes.normal||le.morphAttributes.color,q=_e!==void 0?_e.length:0;let ce=0;le.morphAttributes.position!==void 0&&(ce=1),le.morphAttributes.normal!==void 0&&(ce=2),le.morphAttributes.color!==void 0&&(ce=3);let Te,De,qe,ge;if(pe){const un=to[pe];Te=un.vertexShader,De=un.fragmentShader}else Te=L.vertexShader,De=L.fragmentShader,d.update(L),qe=d.getVertexShaderID(L),ge=d.getFragmentShaderID(L);const Ee=n.getRenderTarget(),Xe=n.state.buffers.depth.getReversed(),tt=$.isInstancedMesh===!0,ot=$.isBatchedMesh===!0,Vt=!!L.map,en=!!L.matcap,Et=!!J,Ne=!!L.aoMap,Ge=!!L.lightMap,Ie=!!L.bumpMap,et=!!L.normalMap,Q=!!L.displacementMap,Tt=!!L.emissiveMap,Ze=!!L.metalnessMap,At=!!L.roughnessMap,Ke=L.anisotropy>0,V=L.clearcoat>0,I=L.dispersion>0,re=L.iridescence>0,Ae=L.sheen>0,Be=L.transmission>0,Re=Ke&&!!L.anisotropyMap,pt=V&&!!L.clearcoatMap,Qe=V&&!!L.clearcoatNormalMap,gt=V&&!!L.clearcoatRoughnessMap,wt=re&&!!L.iridescenceMap,Fe=re&&!!L.iridescenceThicknessMap,ke=Ae&&!!L.sheenColorMap,nt=Ae&&!!L.sheenRoughnessMap,it=!!L.specularMap,Je=!!L.specularColorMap,Yt=!!L.specularIntensityMap,oe=Be&&!!L.transmissionMap,rt=Be&&!!L.thicknessMap,Ye=!!L.gradientMap,ft=!!L.alphaMap,Ve=L.alphaTest>0,Pe=!!L.alphaHash,$e=!!L.extensions;let Ht=ms;L.toneMapped&&(Ee===null||Ee.isXRRenderTarget===!0)&&(Ht=n.toneMapping);const bn={shaderID:pe,shaderType:L.type,shaderName:L.name,vertexShader:Te,fragmentShader:De,defines:L.defines,customVertexShaderID:qe,customFragmentShaderID:ge,isRawShaderMaterial:L.isRawShaderMaterial===!0,glslVersion:L.glslVersion,precision:x,batching:ot,batchingColor:ot&&$._colorsTexture!==null,instancing:tt,instancingColor:tt&&$.instanceColor!==null,instancingMorph:tt&&$.morphTexture!==null,outputColorSpace:Ee===null?n.outputColorSpace:Ee.isXRRenderTarget===!0?Ee.texture.colorSpace:Ic,alphaToCoverage:!!L.alphaToCoverage,map:Vt,matcap:en,envMap:Et,envMapMode:Et&&J.mapping,envMapCubeUVHeight:Z,aoMap:Ne,lightMap:Ge,bumpMap:Ie,normalMap:et,displacementMap:Q,emissiveMap:Tt,normalMapObjectSpace:et&&L.normalMapType===dT,normalMapTangentSpace:et&&L.normalMapType===Lc,metalnessMap:Ze,roughnessMap:At,anisotropy:Ke,anisotropyMap:Re,clearcoat:V,clearcoatMap:pt,clearcoatNormalMap:Qe,clearcoatRoughnessMap:gt,dispersion:I,iridescence:re,iridescenceMap:wt,iridescenceThicknessMap:Fe,sheen:Ae,sheenColorMap:ke,sheenRoughnessMap:nt,specularMap:it,specularColorMap:Je,specularIntensityMap:Yt,transmission:Be,transmissionMap:oe,thicknessMap:rt,gradientMap:Ye,opaque:L.transparent===!1&&L.blending===Yu&&L.alphaToCoverage===!1,alphaMap:ft,alphaTest:Ve,alphaHash:Pe,combine:L.combine,mapUv:Vt&&C(L.map.channel),aoMapUv:Ne&&C(L.aoMap.channel),lightMapUv:Ge&&C(L.lightMap.channel),bumpMapUv:Ie&&C(L.bumpMap.channel),normalMapUv:et&&C(L.normalMap.channel),displacementMapUv:Q&&C(L.displacementMap.channel),emissiveMapUv:Tt&&C(L.emissiveMap.channel),metalnessMapUv:Ze&&C(L.metalnessMap.channel),roughnessMapUv:At&&C(L.roughnessMap.channel),anisotropyMapUv:Re&&C(L.anisotropyMap.channel),clearcoatMapUv:pt&&C(L.clearcoatMap.channel),clearcoatNormalMapUv:Qe&&C(L.clearcoatNormalMap.channel),clearcoatRoughnessMapUv:gt&&C(L.clearcoatRoughnessMap.channel),iridescenceMapUv:wt&&C(L.iridescenceMap.channel),iridescenceThicknessMapUv:Fe&&C(L.iridescenceThicknessMap.channel),sheenColorMapUv:ke&&C(L.sheenColorMap.channel),sheenRoughnessMapUv:nt&&C(L.sheenRoughnessMap.channel),specularMapUv:it&&C(L.specularMap.channel),specularColorMapUv:Je&&C(L.specularColorMap.channel),specularIntensityMapUv:Yt&&C(L.specularIntensityMap.channel),transmissionMapUv:oe&&C(L.transmissionMap.channel),thicknessMapUv:rt&&C(L.thicknessMap.channel),alphaMapUv:ft&&C(L.alphaMap.channel),vertexTangents:!!le.attributes.tangent&&(et||Ke),vertexColors:L.vertexColors,vertexAlphas:L.vertexColors===!0&&!!le.attributes.color&&le.attributes.color.itemSize===4,pointsUvs:$.isPoints===!0&&!!le.attributes.uv&&(Vt||ft),fog:!!ae,useFog:L.fog===!0,fogExp2:!!ae&&ae.isFogExp2,flatShading:L.flatShading===!0&&L.wireframe===!1,sizeAttenuation:L.sizeAttenuation===!0,logarithmicDepthBuffer:_,reversedDepthBuffer:Xe,skinning:$.isSkinnedMesh===!0,morphTargets:le.morphAttributes.position!==void 0,morphNormals:le.morphAttributes.normal!==void 0,morphColors:le.morphAttributes.color!==void 0,morphTargetsCount:q,morphTextureStride:ce,numDirLights:F.directional.length,numPointLights:F.point.length,numSpotLights:F.spot.length,numSpotLightMaps:F.spotLightMap.length,numRectAreaLights:F.rectArea.length,numHemiLights:F.hemi.length,numDirLightShadows:F.directionalShadowMap.length,numPointLightShadows:F.pointShadowMap.length,numSpotLightShadows:F.spotShadowMap.length,numSpotLightShadowsWithMaps:F.numSpotLightShadowsWithMaps,numLightProbes:F.numLightProbes,numClippingPlanes:l.numPlanes,numClipIntersection:l.numIntersection,dithering:L.dithering,shadowMapEnabled:n.shadowMap.enabled&&W.length>0,shadowMapType:n.shadowMap.type,toneMapping:Ht,decodeVideoTexture:Vt&&L.map.isVideoTexture===!0&&vn.getTransfer(L.map.colorSpace)===Hn,decodeVideoTextureEmissive:Tt&&L.emissiveMap.isVideoTexture===!0&&vn.getTransfer(L.emissiveMap.colorSpace)===Hn,premultipliedAlpha:L.premultipliedAlpha,doubleSided:L.side===qs,flipSided:L.side===$a,useDepthPacking:L.depthPacking>=0,depthPacking:L.depthPacking||0,index0AttributeName:L.index0AttributeName,extensionClipCullDistance:$e&&L.extensions.clipCullDistance===!0&&i.has("WEBGL_clip_cull_distance"),extensionMultiDraw:($e&&L.extensions.multiDraw===!0||ot)&&i.has("WEBGL_multi_draw"),rendererExtensionParallelShaderCompile:i.has("KHR_parallel_shader_compile"),customProgramCacheKey:L.customProgramCacheKey()};return bn.vertexUv1s=p.has(1),bn.vertexUv2s=p.has(2),bn.vertexUv3s=p.has(3),p.clear(),bn}function M(L){const F=[];if(L.shaderID?F.push(L.shaderID):(F.push(L.customVertexShaderID),F.push(L.customFragmentShaderID)),L.defines!==void 0)for(const W in L.defines)F.push(W),F.push(L.defines[W]);return L.isRawShaderMaterial===!1&&(w(F,L),B(F,L),F.push(n.outputColorSpace)),F.push(L.customProgramCacheKey),F.join()}function w(L,F){L.push(F.precision),L.push(F.outputColorSpace),L.push(F.envMapMode),L.push(F.envMapCubeUVHeight),L.push(F.mapUv),L.push(F.alphaMapUv),L.push(F.lightMapUv),L.push(F.aoMapUv),L.push(F.bumpMapUv),L.push(F.normalMapUv),L.push(F.displacementMapUv),L.push(F.emissiveMapUv),L.push(F.metalnessMapUv),L.push(F.roughnessMapUv),L.push(F.anisotropyMapUv),L.push(F.clearcoatMapUv),L.push(F.clearcoatNormalMapUv),L.push(F.clearcoatRoughnessMapUv),L.push(F.iridescenceMapUv),L.push(F.iridescenceThicknessMapUv),L.push(F.sheenColorMapUv),L.push(F.sheenRoughnessMapUv),L.push(F.specularMapUv),L.push(F.specularColorMapUv),L.push(F.specularIntensityMapUv),L.push(F.transmissionMapUv),L.push(F.thicknessMapUv),L.push(F.combine),L.push(F.fogExp2),L.push(F.sizeAttenuation),L.push(F.morphTargetsCount),L.push(F.morphAttributeCount),L.push(F.numDirLights),L.push(F.numPointLights),L.push(F.numSpotLights),L.push(F.numSpotLightMaps),L.push(F.numHemiLights),L.push(F.numRectAreaLights),L.push(F.numDirLightShadows),L.push(F.numPointLightShadows),L.push(F.numSpotLightShadows),L.push(F.numSpotLightShadowsWithMaps),L.push(F.numLightProbes),L.push(F.shadowMapType),L.push(F.toneMapping),L.push(F.numClippingPlanes),L.push(F.numClipIntersection),L.push(F.depthPacking)}function B(L,F){c.disableAll(),F.instancing&&c.enable(0),F.instancingColor&&c.enable(1),F.instancingMorph&&c.enable(2),F.matcap&&c.enable(3),F.envMap&&c.enable(4),F.normalMapObjectSpace&&c.enable(5),F.normalMapTangentSpace&&c.enable(6),F.clearcoat&&c.enable(7),F.iridescence&&c.enable(8),F.alphaTest&&c.enable(9),F.vertexColors&&c.enable(10),F.vertexAlphas&&c.enable(11),F.vertexUv1s&&c.enable(12),F.vertexUv2s&&c.enable(13),F.vertexUv3s&&c.enable(14),F.vertexTangents&&c.enable(15),F.anisotropy&&c.enable(16),F.alphaHash&&c.enable(17),F.batching&&c.enable(18),F.dispersion&&c.enable(19),F.batchingColor&&c.enable(20),F.gradientMap&&c.enable(21),L.push(c.mask),c.disableAll(),F.fog&&c.enable(0),F.useFog&&c.enable(1),F.flatShading&&c.enable(2),F.logarithmicDepthBuffer&&c.enable(3),F.reversedDepthBuffer&&c.enable(4),F.skinning&&c.enable(5),F.morphTargets&&c.enable(6),F.morphNormals&&c.enable(7),F.morphColors&&c.enable(8),F.premultipliedAlpha&&c.enable(9),F.shadowMapEnabled&&c.enable(10),F.doubleSided&&c.enable(11),F.flipSided&&c.enable(12),F.useDepthPacking&&c.enable(13),F.dithering&&c.enable(14),F.transmission&&c.enable(15),F.sheen&&c.enable(16),F.opaque&&c.enable(17),F.pointsUvs&&c.enable(18),F.decodeVideoTexture&&c.enable(19),F.decodeVideoTextureEmissive&&c.enable(20),F.alphaToCoverage&&c.enable(21),L.push(c.mask)}function D(L){const F=S[L.type];let W;if(F){const te=to[F];W=VT.clone(te.uniforms)}else W=L.uniforms;return W}function P(L,F){let W=v.get(F);return W!==void 0?++W.usedTimes:(W=new j4(n,F,L,s),g.push(W),v.set(F,W)),W}function U(L){if(--L.usedTimes===0){const F=g.indexOf(L);g[F]=g[g.length-1],g.pop(),v.delete(L.cacheKey),L.destroy()}}function z(L){d.remove(L)}function j(){d.dispose()}return{getParameters:T,getProgramCacheKey:M,getUniforms:D,acquireProgram:P,releaseProgram:U,releaseShaderCache:z,programs:g,dispose:j}}function K4(){let n=new WeakMap;function e(l){return n.has(l)}function t(l){let c=n.get(l);return c===void 0&&(c={},n.set(l,c)),c}function i(l){n.delete(l)}function a(l,c,d){n.get(l)[c]=d}function s(){n=new WeakMap}return{has:e,get:t,remove:i,update:a,dispose:s}}function Q4(n,e){return n.groupOrder!==e.groupOrder?n.groupOrder-e.groupOrder:n.renderOrder!==e.renderOrder?n.renderOrder-e.renderOrder:n.material.id!==e.material.id?n.material.id-e.material.id:n.z!==e.z?n.z-e.z:n.id-e.id}function YR(n,e){return n.groupOrder!==e.groupOrder?n.groupOrder-e.groupOrder:n.renderOrder!==e.renderOrder?n.renderOrder-e.renderOrder:n.z!==e.z?e.z-n.z:n.id-e.id}function qR(){const n=[];let e=0;const t=[],i=[],a=[];function s(){e=0,t.length=0,i.length=0,a.length=0}function l(v,_,x,S,C,T){let M=n[e];return M===void 0?(M={id:v.id,object:v,geometry:_,material:x,groupOrder:S,renderOrder:v.renderOrder,z:C,group:T},n[e]=M):(M.id=v.id,M.object=v,M.geometry=_,M.material=x,M.groupOrder=S,M.renderOrder=v.renderOrder,M.z=C,M.group=T),e++,M}function c(v,_,x,S,C,T){const M=l(v,_,x,S,C,T);x.transmission>0?i.push(M):x.transparent===!0?a.push(M):t.push(M)}function d(v,_,x,S,C,T){const M=l(v,_,x,S,C,T);x.transmission>0?i.unshift(M):x.transparent===!0?a.unshift(M):t.unshift(M)}function p(v,_){t.length>1&&t.sort(v||Q4),i.length>1&&i.sort(_||YR),a.length>1&&a.sort(_||YR)}function g(){for(let v=e,_=n.length;v<_;v++){const x=n[v];if(x.id===null)break;x.id=null,x.object=null,x.geometry=null,x.material=null,x.group=null}}return{opaque:t,transmissive:i,transparent:a,init:s,push:c,unshift:d,finish:g,sort:p}}function Z4(){let n=new WeakMap;function e(i,a){const s=n.get(i);let l;return s===void 0?(l=new qR,n.set(i,[l])):a>=s.length?(l=new qR,s.push(l)):l=s[a],l}function t(){n=new WeakMap}return{get:e,dispose:t}}function $4(){const n={};return{get:function(e){if(n[e.id]!==void 0)return n[e.id];let t;switch(e.type){case"DirectionalLight":t={direction:new K,color:new st};break;case"SpotLight":t={position:new K,direction:new K,color:new st,distance:0,coneCos:0,penumbraCos:0,decay:0};break;case"PointLight":t={position:new K,color:new st,distance:0,decay:0};break;case"HemisphereLight":t={direction:new K,skyColor:new st,groundColor:new st};break;case"RectAreaLight":t={color:new st,position:new K,halfWidth:new K,halfHeight:new K};break}return n[e.id]=t,t}}}function eH(){const n={};return{get:function(e){if(n[e.id]!==void 0)return n[e.id];let t;switch(e.type){case"DirectionalLight":t={shadowIntensity:1,shadowBias:0,shadowNormalBias:0,shadowRadius:1,shadowMapSize:new He};break;case"SpotLight":t={shadowIntensity:1,shadowBias:0,shadowNormalBias:0,shadowRadius:1,shadowMapSize:new He};break;case"PointLight":t={shadowIntensity:1,shadowBias:0,shadowNormalBias:0,shadowRadius:1,shadowMapSize:new He,shadowCameraNear:1,shadowCameraFar:1e3};break}return n[e.id]=t,t}}}let tH=0;function nH(n,e){return(e.castShadow?2:0)-(n.castShadow?2:0)+(e.map?1:0)-(n.map?1:0)}function iH(n){const e=new $4,t=eH(),i={version:0,hash:{directionalLength:-1,pointLength:-1,spotLength:-1,rectAreaLength:-1,hemiLength:-1,numDirectionalShadows:-1,numPointShadows:-1,numSpotShadows:-1,numSpotMaps:-1,numLightProbes:-1},ambient:[0,0,0],probe:[],directional:[],directionalShadow:[],directionalShadowMap:[],directionalShadowMatrix:[],spot:[],spotLightMap:[],spotShadow:[],spotShadowMap:[],spotLightMatrix:[],rectArea:[],rectAreaLTC1:null,rectAreaLTC2:null,point:[],pointShadow:[],pointShadowMap:[],pointShadowMatrix:[],hemi:[],numSpotLightShadowsWithMaps:0,numLightProbes:0};for(let p=0;p<9;p++)i.probe.push(new K);const a=new K,s=new It,l=new It;function c(p){let g=0,v=0,_=0;for(let L=0;L<9;L++)i.probe[L].set(0,0,0);let x=0,S=0,C=0,T=0,M=0,w=0,B=0,D=0,P=0,U=0,z=0;p.sort(nH);for(let L=0,F=p.length;L<F;L++){const W=p[L],te=W.color,$=W.intensity,ae=W.distance;let le=null;if(W.shadow&&W.shadow.map&&(W.shadow.map.texture.format===Ju?le=W.shadow.map.texture:le=W.shadow.map.depthTexture||W.shadow.map.texture),W.isAmbientLight)g+=te.r*$,v+=te.g*$,_+=te.b*$;else if(W.isLightProbe){for(let G=0;G<9;G++)i.probe[G].addScaledVector(W.sh.coefficients[G],$);z++}else if(W.isDirectionalLight){const G=e.get(W);if(G.color.copy(W.color).multiplyScalar(W.intensity),W.castShadow){const J=W.shadow,Z=t.get(W);Z.shadowIntensity=J.intensity,Z.shadowBias=J.bias,Z.shadowNormalBias=J.normalBias,Z.shadowRadius=J.radius,Z.shadowMapSize=J.mapSize,i.directionalShadow[x]=Z,i.directionalShadowMap[x]=le,i.directionalShadowMatrix[x]=W.shadow.matrix,w++}i.directional[x]=G,x++}else if(W.isSpotLight){const G=e.get(W);G.position.setFromMatrixPosition(W.matrixWorld),G.color.copy(te).multiplyScalar($),G.distance=ae,G.coneCos=Math.cos(W.angle),G.penumbraCos=Math.cos(W.angle*(1-W.penumbra)),G.decay=W.decay,i.spot[C]=G;const J=W.shadow;if(W.map&&(i.spotLightMap[P]=W.map,P++,J.updateMatrices(W),W.castShadow&&U++),i.spotLightMatrix[C]=J.matrix,W.castShadow){const Z=t.get(W);Z.shadowIntensity=J.intensity,Z.shadowBias=J.bias,Z.shadowNormalBias=J.normalBias,Z.shadowRadius=J.radius,Z.shadowMapSize=J.mapSize,i.spotShadow[C]=Z,i.spotShadowMap[C]=le,D++}C++}else if(W.isRectAreaLight){const G=e.get(W);G.color.copy(te).multiplyScalar($),G.halfWidth.set(W.width*.5,0,0),G.halfHeight.set(0,W.height*.5,0),i.rectArea[T]=G,T++}else if(W.isPointLight){const G=e.get(W);if(G.color.copy(W.color).multiplyScalar(W.intensity),G.distance=W.distance,G.decay=W.decay,W.castShadow){const J=W.shadow,Z=t.get(W);Z.shadowIntensity=J.intensity,Z.shadowBias=J.bias,Z.shadowNormalBias=J.normalBias,Z.shadowRadius=J.radius,Z.shadowMapSize=J.mapSize,Z.shadowCameraNear=J.camera.near,Z.shadowCameraFar=J.camera.far,i.pointShadow[S]=Z,i.pointShadowMap[S]=le,i.pointShadowMatrix[S]=W.shadow.matrix,B++}i.point[S]=G,S++}else if(W.isHemisphereLight){const G=e.get(W);G.skyColor.copy(W.color).multiplyScalar($),G.groundColor.copy(W.groundColor).multiplyScalar($),i.hemi[M]=G,M++}}T>0&&(n.has("OES_texture_float_linear")===!0?(i.rectAreaLTC1=ut.LTC_FLOAT_1,i.rectAreaLTC2=ut.LTC_FLOAT_2):(i.rectAreaLTC1=ut.LTC_HALF_1,i.rectAreaLTC2=ut.LTC_HALF_2)),i.ambient[0]=g,i.ambient[1]=v,i.ambient[2]=_;const j=i.hash;(j.directionalLength!==x||j.pointLength!==S||j.spotLength!==C||j.rectAreaLength!==T||j.hemiLength!==M||j.numDirectionalShadows!==w||j.numPointShadows!==B||j.numSpotShadows!==D||j.numSpotMaps!==P||j.numLightProbes!==z)&&(i.directional.length=x,i.spot.length=C,i.rectArea.length=T,i.point.length=S,i.hemi.length=M,i.directionalShadow.length=w,i.directionalShadowMap.length=w,i.pointShadow.length=B,i.pointShadowMap.length=B,i.spotShadow.length=D,i.spotShadowMap.length=D,i.directionalShadowMatrix.length=w,i.pointShadowMatrix.length=B,i.spotLightMatrix.length=D+P-U,i.spotLightMap.length=P,i.numSpotLightShadowsWithMaps=U,i.numLightProbes=z,j.directionalLength=x,j.pointLength=S,j.spotLength=C,j.rectAreaLength=T,j.hemiLength=M,j.numDirectionalShadows=w,j.numPointShadows=B,j.numSpotShadows=D,j.numSpotMaps=P,j.numLightProbes=z,i.version=tH++)}function d(p,g){let v=0,_=0,x=0,S=0,C=0;const T=g.matrixWorldInverse;for(let M=0,w=p.length;M<w;M++){const B=p[M];if(B.isDirectionalLight){const D=i.directional[v];D.direction.setFromMatrixPosition(B.matrixWorld),a.setFromMatrixPosition(B.target.matrixWorld),D.direction.sub(a),D.direction.transformDirection(T),v++}else if(B.isSpotLight){const D=i.spot[x];D.position.setFromMatrixPosition(B.matrixWorld),D.position.applyMatrix4(T),D.direction.setFromMatrixPosition(B.matrixWorld),a.setFromMatrixPosition(B.target.matrixWorld),D.direction.sub(a),D.direction.transformDirection(T),x++}else if(B.isRectAreaLight){const D=i.rectArea[S];D.position.setFromMatrixPosition(B.matrixWorld),D.position.applyMatrix4(T),l.identity(),s.copy(B.matrixWorld),s.premultiply(T),l.extractRotation(s),D.halfWidth.set(B.width*.5,0,0),D.halfHeight.set(0,B.height*.5,0),D.halfWidth.applyMatrix4(l),D.halfHeight.applyMatrix4(l),S++}else if(B.isPointLight){const D=i.point[_];D.position.setFromMatrixPosition(B.matrixWorld),D.position.applyMatrix4(T),_++}else if(B.isHemisphereLight){const D=i.hemi[C];D.direction.setFromMatrixPosition(B.matrixWorld),D.direction.transformDirection(T),C++}}}return{setup:c,setupView:d,state:i}}function WR(n){const e=new iH(n),t=[],i=[];function a(g){p.camera=g,t.length=0,i.length=0}function s(g){t.push(g)}function l(g){i.push(g)}function c(){e.setup(t)}function d(g){e.setupView(t,g)}const p={lightsArray:t,shadowsArray:i,camera:null,lights:e,transmissionRenderTarget:{}};return{init:a,state:p,setupLights:c,setupLightsView:d,pushLight:s,pushShadow:l}}function aH(n){let e=new WeakMap;function t(a,s=0){const l=e.get(a);let c;return l===void 0?(c=new WR(n),e.set(a,[c])):s>=l.length?(c=new WR(n),l.push(c)):c=l[s],c}function i(){e=new WeakMap}return{get:t,dispose:i}}const rH=`void main() {
	gl_Position = vec4( position, 1.0 );
}`,sH=`uniform sampler2D shadow_pass;
uniform vec2 resolution;
uniform float radius;
void main() {
	const float samples = float( VSM_SAMPLES );
	float mean = 0.0;
	float squared_mean = 0.0;
	float uvStride = samples <= 1.0 ? 0.0 : 2.0 / ( samples - 1.0 );
	float uvStart = samples <= 1.0 ? 0.0 : - 1.0;
	for ( float i = 0.0; i < samples; i ++ ) {
		float uvOffset = uvStart + i * uvStride;
		#ifdef HORIZONTAL_PASS
			vec2 distribution = texture2D( shadow_pass, ( gl_FragCoord.xy + vec2( uvOffset, 0.0 ) * radius ) / resolution ).rg;
			mean += distribution.x;
			squared_mean += distribution.y * distribution.y + distribution.x * distribution.x;
		#else
			float depth = texture2D( shadow_pass, ( gl_FragCoord.xy + vec2( 0.0, uvOffset ) * radius ) / resolution ).r;
			mean += depth;
			squared_mean += depth * depth;
		#endif
	}
	mean = mean / samples;
	squared_mean = squared_mean / samples;
	float std_dev = sqrt( max( 0.0, squared_mean - mean * mean ) );
	gl_FragColor = vec4( mean, std_dev, 0.0, 1.0 );
}`,oH=[new K(1,0,0),new K(-1,0,0),new K(0,1,0),new K(0,-1,0),new K(0,0,1),new K(0,0,-1)],lH=[new K(0,-1,0),new K(0,-1,0),new K(0,0,1),new K(0,0,-1),new K(0,-1,0),new K(0,-1,0)],JR=new It,Xm=new K,PS=new K;function cH(n,e,t){let i=new od;const a=new He,s=new He,l=new Fn,c=new iS,d=new aS,p={},g=t.maxTextureSize,v={[Bo]:$a,[$a]:Bo,[qs]:qs},_=new _s({defines:{VSM_SAMPLES:8},uniforms:{shadow_pass:{value:null},resolution:{value:new He},radius:{value:4}},vertexShader:rH,fragmentShader:sH}),x=_.clone();x.defines.HORIZONTAL_PASS=1;const S=new Jt;S.setAttribute("position",new Rn(new Float32Array([-1,-1,.5,3,-1,.5,-1,3,.5]),3));const C=new Ii(S,_),T=this;this.enabled=!1,this.autoUpdate=!0,this.needsUpdate=!1,this.type=Rh;let M=this.type;this.render=function(U,z,j){if(T.enabled===!1||T.autoUpdate===!1&&T.needsUpdate===!1||U.length===0)return;U.type===$p&&(ct("WebGLShadowMap: PCFSoftShadowMap has been deprecated. Using PCFShadowMap instead."),U.type=Rh);const L=n.getRenderTarget(),F=n.getActiveCubeFace(),W=n.getActiveMipmapLevel(),te=n.state;te.setBlending(Do),te.buffers.depth.getReversed()===!0?te.buffers.color.setClear(0,0,0,0):te.buffers.color.setClear(1,1,1,1),te.buffers.depth.setTest(!0),te.setScissorTest(!1);const $=M!==this.type;$&&z.traverse(function(ae){ae.material&&(Array.isArray(ae.material)?ae.material.forEach(le=>le.needsUpdate=!0):ae.material.needsUpdate=!0)});for(let ae=0,le=U.length;ae<le;ae++){const G=U[ae],J=G.shadow;if(J===void 0){ct("WebGLShadowMap:",G,"has no shadow.");continue}if(J.autoUpdate===!1&&J.needsUpdate===!1)continue;a.copy(J.mapSize);const Z=J.getFrameExtents();if(a.multiply(Z),s.copy(J.mapSize),(a.x>g||a.y>g)&&(a.x>g&&(s.x=Math.floor(g/Z.x),a.x=s.x*Z.x,J.mapSize.x=s.x),a.y>g&&(s.y=Math.floor(g/Z.y),a.y=s.y*Z.y,J.mapSize.y=s.y)),J.map===null||$===!0){if(J.map!==null&&(J.map.depthTexture!==null&&(J.map.depthTexture.dispose(),J.map.depthTexture=null),J.map.dispose()),this.type===ju){if(G.isPointLight){ct("WebGLShadowMap: VSM shadow maps are not supported for PointLights. Use PCF or BasicShadowMap instead.");continue}J.map=new Jr(a.x,a.y,{format:Ju,type:No,minFilter:Zn,magFilter:Zn,generateMipmaps:!1}),J.map.texture.name=G.name+".shadowMap",J.map.depthTexture=new ld(a.x,a.y,nr),J.map.depthTexture.name=G.name+".shadowMapDepth",J.map.depthTexture.format=Uo,J.map.depthTexture.compareFunction=null,J.map.depthTexture.minFilter=Ei,J.map.depthTexture.magFilter=Ei}else{G.isPointLight?(J.map=new RA(a.x),J.map.depthTexture=new gC(a.x,vs)):(J.map=new Jr(a.x,a.y),J.map.depthTexture=new ld(a.x,a.y,vs)),J.map.depthTexture.name=G.name+".shadowMap",J.map.depthTexture.format=Uo;const _e=n.state.buffers.depth.getReversed();this.type===Rh?(J.map.depthTexture.compareFunction=_e?Jv:Wv,J.map.depthTexture.minFilter=Zn,J.map.depthTexture.magFilter=Zn):(J.map.depthTexture.compareFunction=null,J.map.depthTexture.minFilter=Ei,J.map.depthTexture.magFilter=Ei)}J.camera.updateProjectionMatrix()}const pe=J.map.isWebGLCubeRenderTarget?6:1;for(let _e=0;_e<pe;_e++){if(J.map.isWebGLCubeRenderTarget)n.setRenderTarget(J.map,_e),n.clear();else{_e===0&&(n.setRenderTarget(J.map),n.clear());const q=J.getViewport(_e);l.set(s.x*q.x,s.y*q.y,s.x*q.z,s.y*q.w),te.viewport(l)}if(G.isPointLight){const q=J.camera,ce=J.matrix,Te=G.distance||q.far;Te!==q.far&&(q.far=Te,q.updateProjectionMatrix()),Xm.setFromMatrixPosition(G.matrixWorld),q.position.copy(Xm),PS.copy(q.position),PS.add(oH[_e]),q.up.copy(lH[_e]),q.lookAt(PS),q.updateMatrixWorld(),ce.makeTranslation(-Xm.x,-Xm.y,-Xm.z),JR.multiplyMatrices(q.projectionMatrix,q.matrixWorldInverse),J._frustum.setFromProjectionMatrix(JR,q.coordinateSystem,q.reversedDepth)}else J.updateMatrices(G);i=J.getFrustum(),D(z,j,J.camera,G,this.type)}J.isPointLightShadow!==!0&&this.type===ju&&w(J,j),J.needsUpdate=!1}M=this.type,T.needsUpdate=!1,n.setRenderTarget(L,F,W)};function w(U,z){const j=e.update(C);_.defines.VSM_SAMPLES!==U.blurSamples&&(_.defines.VSM_SAMPLES=U.blurSamples,x.defines.VSM_SAMPLES=U.blurSamples,_.needsUpdate=!0,x.needsUpdate=!0),U.mapPass===null&&(U.mapPass=new Jr(a.x,a.y,{format:Ju,type:No})),_.uniforms.shadow_pass.value=U.map.depthTexture,_.uniforms.resolution.value=U.mapSize,_.uniforms.radius.value=U.radius,n.setRenderTarget(U.mapPass),n.clear(),n.renderBufferDirect(z,null,j,_,C,null),x.uniforms.shadow_pass.value=U.mapPass.texture,x.uniforms.resolution.value=U.mapSize,x.uniforms.radius.value=U.radius,n.setRenderTarget(U.map),n.clear(),n.renderBufferDirect(z,null,j,x,C,null)}function B(U,z,j,L){let F=null;const W=j.isPointLight===!0?U.customDistanceMaterial:U.customDepthMaterial;if(W!==void 0)F=W;else if(F=j.isPointLight===!0?d:c,n.localClippingEnabled&&z.clipShadows===!0&&Array.isArray(z.clippingPlanes)&&z.clippingPlanes.length!==0||z.displacementMap&&z.displacementScale!==0||z.alphaMap&&z.alphaTest>0||z.map&&z.alphaTest>0||z.alphaToCoverage===!0){const te=F.uuid,$=z.uuid;let ae=p[te];ae===void 0&&(ae={},p[te]=ae);let le=ae[$];le===void 0&&(le=F.clone(),ae[$]=le,z.addEventListener("dispose",P)),F=le}if(F.visible=z.visible,F.wireframe=z.wireframe,L===ju?F.side=z.shadowSide!==null?z.shadowSide:z.side:F.side=z.shadowSide!==null?z.shadowSide:v[z.side],F.alphaMap=z.alphaMap,F.alphaTest=z.alphaToCoverage===!0?.5:z.alphaTest,F.map=z.map,F.clipShadows=z.clipShadows,F.clippingPlanes=z.clippingPlanes,F.clipIntersection=z.clipIntersection,F.displacementMap=z.displacementMap,F.displacementScale=z.displacementScale,F.displacementBias=z.displacementBias,F.wireframeLinewidth=z.wireframeLinewidth,F.linewidth=z.linewidth,j.isPointLight===!0&&F.isMeshDistanceMaterial===!0){const te=n.properties.get(F);te.light=j}return F}function D(U,z,j,L,F){if(U.visible===!1)return;if(U.layers.test(z.layers)&&(U.isMesh||U.isLine||U.isPoints)&&(U.castShadow||U.receiveShadow&&F===ju)&&(!U.frustumCulled||i.intersectsObject(U))){U.modelViewMatrix.multiplyMatrices(j.matrixWorldInverse,U.matrixWorld);const $=e.update(U),ae=U.material;if(Array.isArray(ae)){const le=$.groups;for(let G=0,J=le.length;G<J;G++){const Z=le[G],pe=ae[Z.materialIndex];if(pe&&pe.visible){const _e=B(U,pe,L,F);U.onBeforeShadow(n,U,z,j,$,_e,Z),n.renderBufferDirect(j,null,$,_e,U,Z),U.onAfterShadow(n,U,z,j,$,_e,Z)}}}else if(ae.visible){const le=B(U,ae,L,F);U.onBeforeShadow(n,U,z,j,$,le,null),n.renderBufferDirect(j,null,$,le,U,null),U.onAfterShadow(n,U,z,j,$,le,null)}}const te=U.children;for(let $=0,ae=te.length;$<ae;$++)D(te[$],z,j,L,F)}function P(U){U.target.removeEventListener("dispose",P);for(const j in p){const L=p[j],F=U.target.uuid;F in L&&(L[F].dispose(),delete L[F])}}}const uH={[Q0]:Z0,[$0]:nv,[ev]:iv,[qu]:tv,[Z0]:Q0,[nv]:$0,[iv]:ev,[tv]:qu};function fH(n,e){function t(){let oe=!1;const rt=new Fn;let Ye=null;const ft=new Fn(0,0,0,0);return{setMask:function(Ve){Ye!==Ve&&!oe&&(n.colorMask(Ve,Ve,Ve,Ve),Ye=Ve)},setLocked:function(Ve){oe=Ve},setClear:function(Ve,Pe,$e,Ht,bn){bn===!0&&(Ve*=Ht,Pe*=Ht,$e*=Ht),rt.set(Ve,Pe,$e,Ht),ft.equals(rt)===!1&&(n.clearColor(Ve,Pe,$e,Ht),ft.copy(rt))},reset:function(){oe=!1,Ye=null,ft.set(-1,0,0,0)}}}function i(){let oe=!1,rt=!1,Ye=null,ft=null,Ve=null;return{setReversed:function(Pe){if(rt!==Pe){const $e=e.get("EXT_clip_control");Pe?$e.clipControlEXT($e.LOWER_LEFT_EXT,$e.ZERO_TO_ONE_EXT):$e.clipControlEXT($e.LOWER_LEFT_EXT,$e.NEGATIVE_ONE_TO_ONE_EXT),rt=Pe;const Ht=Ve;Ve=null,this.setClear(Ht)}},getReversed:function(){return rt},setTest:function(Pe){Pe?Ee(n.DEPTH_TEST):Xe(n.DEPTH_TEST)},setMask:function(Pe){Ye!==Pe&&!oe&&(n.depthMask(Pe),Ye=Pe)},setFunc:function(Pe){if(rt&&(Pe=uH[Pe]),ft!==Pe){switch(Pe){case Q0:n.depthFunc(n.NEVER);break;case Z0:n.depthFunc(n.ALWAYS);break;case $0:n.depthFunc(n.LESS);break;case qu:n.depthFunc(n.LEQUAL);break;case ev:n.depthFunc(n.EQUAL);break;case tv:n.depthFunc(n.GEQUAL);break;case nv:n.depthFunc(n.GREATER);break;case iv:n.depthFunc(n.NOTEQUAL);break;default:n.depthFunc(n.LEQUAL)}ft=Pe}},setLocked:function(Pe){oe=Pe},setClear:function(Pe){Ve!==Pe&&(rt&&(Pe=1-Pe),n.clearDepth(Pe),Ve=Pe)},reset:function(){oe=!1,Ye=null,ft=null,Ve=null,rt=!1}}}function a(){let oe=!1,rt=null,Ye=null,ft=null,Ve=null,Pe=null,$e=null,Ht=null,bn=null;return{setTest:function(un){oe||(un?Ee(n.STENCIL_TEST):Xe(n.STENCIL_TEST))},setMask:function(un){rt!==un&&!oe&&(n.stencilMask(un),rt=un)},setFunc:function(un,na,Lr){(Ye!==un||ft!==na||Ve!==Lr)&&(n.stencilFunc(un,na,Lr),Ye=un,ft=na,Ve=Lr)},setOp:function(un,na,Lr){(Pe!==un||$e!==na||Ht!==Lr)&&(n.stencilOp(un,na,Lr),Pe=un,$e=na,Ht=Lr)},setLocked:function(un){oe=un},setClear:function(un){bn!==un&&(n.clearStencil(un),bn=un)},reset:function(){oe=!1,rt=null,Ye=null,ft=null,Ve=null,Pe=null,$e=null,Ht=null,bn=null}}}const s=new t,l=new i,c=new a,d=new WeakMap,p=new WeakMap;let g={},v={},_=new WeakMap,x=[],S=null,C=!1,T=null,M=null,w=null,B=null,D=null,P=null,U=null,z=new st(0,0,0),j=0,L=!1,F=null,W=null,te=null,$=null,ae=null;const le=n.getParameter(n.MAX_COMBINED_TEXTURE_IMAGE_UNITS);let G=!1,J=0;const Z=n.getParameter(n.VERSION);Z.indexOf("WebGL")!==-1?(J=parseFloat(/^WebGL (\d)/.exec(Z)[1]),G=J>=1):Z.indexOf("OpenGL ES")!==-1&&(J=parseFloat(/^OpenGL ES (\d)/.exec(Z)[1]),G=J>=2);let pe=null,_e={};const q=n.getParameter(n.SCISSOR_BOX),ce=n.getParameter(n.VIEWPORT),Te=new Fn().fromArray(q),De=new Fn().fromArray(ce);function qe(oe,rt,Ye,ft){const Ve=new Uint8Array(4),Pe=n.createTexture();n.bindTexture(oe,Pe),n.texParameteri(oe,n.TEXTURE_MIN_FILTER,n.NEAREST),n.texParameteri(oe,n.TEXTURE_MAG_FILTER,n.NEAREST);for(let $e=0;$e<Ye;$e++)oe===n.TEXTURE_3D||oe===n.TEXTURE_2D_ARRAY?n.texImage3D(rt,0,n.RGBA,1,1,ft,0,n.RGBA,n.UNSIGNED_BYTE,Ve):n.texImage2D(rt+$e,0,n.RGBA,1,1,0,n.RGBA,n.UNSIGNED_BYTE,Ve);return Pe}const ge={};ge[n.TEXTURE_2D]=qe(n.TEXTURE_2D,n.TEXTURE_2D,1),ge[n.TEXTURE_CUBE_MAP]=qe(n.TEXTURE_CUBE_MAP,n.TEXTURE_CUBE_MAP_POSITIVE_X,6),ge[n.TEXTURE_2D_ARRAY]=qe(n.TEXTURE_2D_ARRAY,n.TEXTURE_2D_ARRAY,1,1),ge[n.TEXTURE_3D]=qe(n.TEXTURE_3D,n.TEXTURE_3D,1,1),s.setClear(0,0,0,1),l.setClear(1),c.setClear(0),Ee(n.DEPTH_TEST),l.setFunc(qu),Ie(!1),et(Pb),Ee(n.CULL_FACE),Ne(Do);function Ee(oe){g[oe]!==!0&&(n.enable(oe),g[oe]=!0)}function Xe(oe){g[oe]!==!1&&(n.disable(oe),g[oe]=!1)}function tt(oe,rt){return v[oe]!==rt?(n.bindFramebuffer(oe,rt),v[oe]=rt,oe===n.DRAW_FRAMEBUFFER&&(v[n.FRAMEBUFFER]=rt),oe===n.FRAMEBUFFER&&(v[n.DRAW_FRAMEBUFFER]=rt),!0):!1}function ot(oe,rt){let Ye=x,ft=!1;if(oe){Ye=_.get(rt),Ye===void 0&&(Ye=[],_.set(rt,Ye));const Ve=oe.textures;if(Ye.length!==Ve.length||Ye[0]!==n.COLOR_ATTACHMENT0){for(let Pe=0,$e=Ve.length;Pe<$e;Pe++)Ye[Pe]=n.COLOR_ATTACHMENT0+Pe;Ye.length=Ve.length,ft=!0}}else Ye[0]!==n.BACK&&(Ye[0]=n.BACK,ft=!0);ft&&n.drawBuffers(Ye)}function Vt(oe){return S!==oe?(n.useProgram(oe),S=oe,!0):!1}const en={[Dc]:n.FUNC_ADD,[VE]:n.FUNC_SUBTRACT,[kE]:n.FUNC_REVERSE_SUBTRACT};en[XE]=n.MIN,en[jE]=n.MAX;const Et={[YE]:n.ZERO,[qE]:n.ONE,[WE]:n.SRC_COLOR,[J0]:n.SRC_ALPHA,[eT]:n.SRC_ALPHA_SATURATE,[ZE]:n.DST_COLOR,[KE]:n.DST_ALPHA,[JE]:n.ONE_MINUS_SRC_COLOR,[K0]:n.ONE_MINUS_SRC_ALPHA,[$E]:n.ONE_MINUS_DST_COLOR,[QE]:n.ONE_MINUS_DST_ALPHA,[tT]:n.CONSTANT_COLOR,[nT]:n.ONE_MINUS_CONSTANT_COLOR,[iT]:n.CONSTANT_ALPHA,[aT]:n.ONE_MINUS_CONSTANT_ALPHA};function Ne(oe,rt,Ye,ft,Ve,Pe,$e,Ht,bn,un){if(oe===Do){C===!0&&(Xe(n.BLEND),C=!1);return}if(C===!1&&(Ee(n.BLEND),C=!0),oe!==GE){if(oe!==T||un!==L){if((M!==Dc||D!==Dc)&&(n.blendEquation(n.FUNC_ADD),M=Dc,D=Dc),un)switch(oe){case Yu:n.blendFuncSeparate(n.ONE,n.ONE_MINUS_SRC_ALPHA,n.ONE,n.ONE_MINUS_SRC_ALPHA);break;case Fb:n.blendFunc(n.ONE,n.ONE);break;case zb:n.blendFuncSeparate(n.ZERO,n.ONE_MINUS_SRC_COLOR,n.ZERO,n.ONE);break;case Hb:n.blendFuncSeparate(n.DST_COLOR,n.ONE_MINUS_SRC_ALPHA,n.ZERO,n.ONE);break;default:Dt("WebGLState: Invalid blending: ",oe);break}else switch(oe){case Yu:n.blendFuncSeparate(n.SRC_ALPHA,n.ONE_MINUS_SRC_ALPHA,n.ONE,n.ONE_MINUS_SRC_ALPHA);break;case Fb:n.blendFuncSeparate(n.SRC_ALPHA,n.ONE,n.ONE,n.ONE);break;case zb:Dt("WebGLState: SubtractiveBlending requires material.premultipliedAlpha = true");break;case Hb:Dt("WebGLState: MultiplyBlending requires material.premultipliedAlpha = true");break;default:Dt("WebGLState: Invalid blending: ",oe);break}w=null,B=null,P=null,U=null,z.set(0,0,0),j=0,T=oe,L=un}return}Ve=Ve||rt,Pe=Pe||Ye,$e=$e||ft,(rt!==M||Ve!==D)&&(n.blendEquationSeparate(en[rt],en[Ve]),M=rt,D=Ve),(Ye!==w||ft!==B||Pe!==P||$e!==U)&&(n.blendFuncSeparate(Et[Ye],Et[ft],Et[Pe],Et[$e]),w=Ye,B=ft,P=Pe,U=$e),(Ht.equals(z)===!1||bn!==j)&&(n.blendColor(Ht.r,Ht.g,Ht.b,bn),z.copy(Ht),j=bn),T=oe,L=!1}function Ge(oe,rt){oe.side===qs?Xe(n.CULL_FACE):Ee(n.CULL_FACE);let Ye=oe.side===$a;rt&&(Ye=!Ye),Ie(Ye),oe.blending===Yu&&oe.transparent===!1?Ne(Do):Ne(oe.blending,oe.blendEquation,oe.blendSrc,oe.blendDst,oe.blendEquationAlpha,oe.blendSrcAlpha,oe.blendDstAlpha,oe.blendColor,oe.blendAlpha,oe.premultipliedAlpha),l.setFunc(oe.depthFunc),l.setTest(oe.depthTest),l.setMask(oe.depthWrite),s.setMask(oe.colorWrite);const ft=oe.stencilWrite;c.setTest(ft),ft&&(c.setMask(oe.stencilWriteMask),c.setFunc(oe.stencilFunc,oe.stencilRef,oe.stencilFuncMask),c.setOp(oe.stencilFail,oe.stencilZFail,oe.stencilZPass)),Tt(oe.polygonOffset,oe.polygonOffsetFactor,oe.polygonOffsetUnits),oe.alphaToCoverage===!0?Ee(n.SAMPLE_ALPHA_TO_COVERAGE):Xe(n.SAMPLE_ALPHA_TO_COVERAGE)}function Ie(oe){F!==oe&&(oe?n.frontFace(n.CW):n.frontFace(n.CCW),F=oe)}function et(oe){oe!==FE?(Ee(n.CULL_FACE),oe!==W&&(oe===Pb?n.cullFace(n.BACK):oe===zE?n.cullFace(n.FRONT):n.cullFace(n.FRONT_AND_BACK))):Xe(n.CULL_FACE),W=oe}function Q(oe){oe!==te&&(G&&n.lineWidth(oe),te=oe)}function Tt(oe,rt,Ye){oe?(Ee(n.POLYGON_OFFSET_FILL),($!==rt||ae!==Ye)&&(n.polygonOffset(rt,Ye),$=rt,ae=Ye)):Xe(n.POLYGON_OFFSET_FILL)}function Ze(oe){oe?Ee(n.SCISSOR_TEST):Xe(n.SCISSOR_TEST)}function At(oe){oe===void 0&&(oe=n.TEXTURE0+le-1),pe!==oe&&(n.activeTexture(oe),pe=oe)}function Ke(oe,rt,Ye){Ye===void 0&&(pe===null?Ye=n.TEXTURE0+le-1:Ye=pe);let ft=_e[Ye];ft===void 0&&(ft={type:void 0,texture:void 0},_e[Ye]=ft),(ft.type!==oe||ft.texture!==rt)&&(pe!==Ye&&(n.activeTexture(Ye),pe=Ye),n.bindTexture(oe,rt||ge[oe]),ft.type=oe,ft.texture=rt)}function V(){const oe=_e[pe];oe!==void 0&&oe.type!==void 0&&(n.bindTexture(oe.type,null),oe.type=void 0,oe.texture=void 0)}function I(){try{n.compressedTexImage2D(...arguments)}catch(oe){Dt("WebGLState:",oe)}}function re(){try{n.compressedTexImage3D(...arguments)}catch(oe){Dt("WebGLState:",oe)}}function Ae(){try{n.texSubImage2D(...arguments)}catch(oe){Dt("WebGLState:",oe)}}function Be(){try{n.texSubImage3D(...arguments)}catch(oe){Dt("WebGLState:",oe)}}function Re(){try{n.compressedTexSubImage2D(...arguments)}catch(oe){Dt("WebGLState:",oe)}}function pt(){try{n.compressedTexSubImage3D(...arguments)}catch(oe){Dt("WebGLState:",oe)}}function Qe(){try{n.texStorage2D(...arguments)}catch(oe){Dt("WebGLState:",oe)}}function gt(){try{n.texStorage3D(...arguments)}catch(oe){Dt("WebGLState:",oe)}}function wt(){try{n.texImage2D(...arguments)}catch(oe){Dt("WebGLState:",oe)}}function Fe(){try{n.texImage3D(...arguments)}catch(oe){Dt("WebGLState:",oe)}}function ke(oe){Te.equals(oe)===!1&&(n.scissor(oe.x,oe.y,oe.z,oe.w),Te.copy(oe))}function nt(oe){De.equals(oe)===!1&&(n.viewport(oe.x,oe.y,oe.z,oe.w),De.copy(oe))}function it(oe,rt){let Ye=p.get(rt);Ye===void 0&&(Ye=new WeakMap,p.set(rt,Ye));let ft=Ye.get(oe);ft===void 0&&(ft=n.getUniformBlockIndex(rt,oe.name),Ye.set(oe,ft))}function Je(oe,rt){const ft=p.get(rt).get(oe);d.get(rt)!==ft&&(n.uniformBlockBinding(rt,ft,oe.__bindingPointIndex),d.set(rt,ft))}function Yt(){n.disable(n.BLEND),n.disable(n.CULL_FACE),n.disable(n.DEPTH_TEST),n.disable(n.POLYGON_OFFSET_FILL),n.disable(n.SCISSOR_TEST),n.disable(n.STENCIL_TEST),n.disable(n.SAMPLE_ALPHA_TO_COVERAGE),n.blendEquation(n.FUNC_ADD),n.blendFunc(n.ONE,n.ZERO),n.blendFuncSeparate(n.ONE,n.ZERO,n.ONE,n.ZERO),n.blendColor(0,0,0,0),n.colorMask(!0,!0,!0,!0),n.clearColor(0,0,0,0),n.depthMask(!0),n.depthFunc(n.LESS),l.setReversed(!1),n.clearDepth(1),n.stencilMask(4294967295),n.stencilFunc(n.ALWAYS,0,4294967295),n.stencilOp(n.KEEP,n.KEEP,n.KEEP),n.clearStencil(0),n.cullFace(n.BACK),n.frontFace(n.CCW),n.polygonOffset(0,0),n.activeTexture(n.TEXTURE0),n.bindFramebuffer(n.FRAMEBUFFER,null),n.bindFramebuffer(n.DRAW_FRAMEBUFFER,null),n.bindFramebuffer(n.READ_FRAMEBUFFER,null),n.useProgram(null),n.lineWidth(1),n.scissor(0,0,n.canvas.width,n.canvas.height),n.viewport(0,0,n.canvas.width,n.canvas.height),g={},pe=null,_e={},v={},_=new WeakMap,x=[],S=null,C=!1,T=null,M=null,w=null,B=null,D=null,P=null,U=null,z=new st(0,0,0),j=0,L=!1,F=null,W=null,te=null,$=null,ae=null,Te.set(0,0,n.canvas.width,n.canvas.height),De.set(0,0,n.canvas.width,n.canvas.height),s.reset(),l.reset(),c.reset()}return{buffers:{color:s,depth:l,stencil:c},enable:Ee,disable:Xe,bindFramebuffer:tt,drawBuffers:ot,useProgram:Vt,setBlending:Ne,setMaterial:Ge,setFlipSided:Ie,setCullFace:et,setLineWidth:Q,setPolygonOffset:Tt,setScissorTest:Ze,activeTexture:At,bindTexture:Ke,unbindTexture:V,compressedTexImage2D:I,compressedTexImage3D:re,texImage2D:wt,texImage3D:Fe,updateUBOMapping:it,uniformBlockBinding:Je,texStorage2D:Qe,texStorage3D:gt,texSubImage2D:Ae,texSubImage3D:Be,compressedTexSubImage2D:Re,compressedTexSubImage3D:pt,scissor:ke,viewport:nt,reset:Yt}}function hH(n,e,t,i,a,s,l){const c=e.has("WEBGL_multisampled_render_to_texture")?e.get("WEBGL_multisampled_render_to_texture"):null,d=typeof navigator>"u"?!1:/OculusBrowser/g.test(navigator.userAgent),p=new He,g=new WeakMap;let v;const _=new WeakMap;let x=!1;try{x=typeof OffscreenCanvas<"u"&&new OffscreenCanvas(1,1).getContext("2d")!==null}catch{}function S(V,I){return x?new OffscreenCanvas(V,I):fm("canvas")}function C(V,I,re){let Ae=1;const Be=Ke(V);if((Be.width>re||Be.height>re)&&(Ae=re/Math.max(Be.width,Be.height)),Ae<1)if(typeof HTMLImageElement<"u"&&V instanceof HTMLImageElement||typeof HTMLCanvasElement<"u"&&V instanceof HTMLCanvasElement||typeof ImageBitmap<"u"&&V instanceof ImageBitmap||typeof VideoFrame<"u"&&V instanceof VideoFrame){const Re=Math.floor(Ae*Be.width),pt=Math.floor(Ae*Be.height);v===void 0&&(v=S(Re,pt));const Qe=I?S(Re,pt):v;return Qe.width=Re,Qe.height=pt,Qe.getContext("2d").drawImage(V,0,0,Re,pt),ct("WebGLRenderer: Texture has been resized from ("+Be.width+"x"+Be.height+") to ("+Re+"x"+pt+")."),Qe}else return"data"in V&&ct("WebGLRenderer: Image in DataTexture is too big ("+Be.width+"x"+Be.height+")."),V;return V}function T(V){return V.generateMipmaps}function M(V){n.generateMipmap(V)}function w(V){return V.isWebGLCubeRenderTarget?n.TEXTURE_CUBE_MAP:V.isWebGL3DRenderTarget?n.TEXTURE_3D:V.isWebGLArrayRenderTarget||V.isCompressedArrayTexture?n.TEXTURE_2D_ARRAY:n.TEXTURE_2D}function B(V,I,re,Ae,Be=!1){if(V!==null){if(n[V]!==void 0)return n[V];ct("WebGLRenderer: Attempt to use non-existing WebGL internal format '"+V+"'")}let Re=I;if(I===n.RED&&(re===n.FLOAT&&(Re=n.R32F),re===n.HALF_FLOAT&&(Re=n.R16F),re===n.UNSIGNED_BYTE&&(Re=n.R8)),I===n.RED_INTEGER&&(re===n.UNSIGNED_BYTE&&(Re=n.R8UI),re===n.UNSIGNED_SHORT&&(Re=n.R16UI),re===n.UNSIGNED_INT&&(Re=n.R32UI),re===n.BYTE&&(Re=n.R8I),re===n.SHORT&&(Re=n.R16I),re===n.INT&&(Re=n.R32I)),I===n.RG&&(re===n.FLOAT&&(Re=n.RG32F),re===n.HALF_FLOAT&&(Re=n.RG16F),re===n.UNSIGNED_BYTE&&(Re=n.RG8)),I===n.RG_INTEGER&&(re===n.UNSIGNED_BYTE&&(Re=n.RG8UI),re===n.UNSIGNED_SHORT&&(Re=n.RG16UI),re===n.UNSIGNED_INT&&(Re=n.RG32UI),re===n.BYTE&&(Re=n.RG8I),re===n.SHORT&&(Re=n.RG16I),re===n.INT&&(Re=n.RG32I)),I===n.RGB_INTEGER&&(re===n.UNSIGNED_BYTE&&(Re=n.RGB8UI),re===n.UNSIGNED_SHORT&&(Re=n.RGB16UI),re===n.UNSIGNED_INT&&(Re=n.RGB32UI),re===n.BYTE&&(Re=n.RGB8I),re===n.SHORT&&(Re=n.RGB16I),re===n.INT&&(Re=n.RGB32I)),I===n.RGBA_INTEGER&&(re===n.UNSIGNED_BYTE&&(Re=n.RGBA8UI),re===n.UNSIGNED_SHORT&&(Re=n.RGBA16UI),re===n.UNSIGNED_INT&&(Re=n.RGBA32UI),re===n.BYTE&&(Re=n.RGBA8I),re===n.SHORT&&(Re=n.RGBA16I),re===n.INT&&(Re=n.RGBA32I)),I===n.RGB&&(re===n.UNSIGNED_INT_5_9_9_9_REV&&(Re=n.RGB9_E5),re===n.UNSIGNED_INT_10F_11F_11F_REV&&(Re=n.R11F_G11F_B10F)),I===n.RGBA){const pt=Be?cm:vn.getTransfer(Ae);re===n.FLOAT&&(Re=n.RGBA32F),re===n.HALF_FLOAT&&(Re=n.RGBA16F),re===n.UNSIGNED_BYTE&&(Re=pt===Hn?n.SRGB8_ALPHA8:n.RGBA8),re===n.UNSIGNED_SHORT_4_4_4_4&&(Re=n.RGBA4),re===n.UNSIGNED_SHORT_5_5_5_1&&(Re=n.RGB5_A1)}return(Re===n.R16F||Re===n.R32F||Re===n.RG16F||Re===n.RG32F||Re===n.RGBA16F||Re===n.RGBA32F)&&e.get("EXT_color_buffer_float"),Re}function D(V,I){let re;return V?I===null||I===vs||I===Nh?re=n.DEPTH24_STENCIL8:I===nr?re=n.DEPTH32F_STENCIL8:I===Oh&&(re=n.DEPTH24_STENCIL8,ct("DepthTexture: 16 bit depth attachment is not supported with stencil. Using 24-bit attachment.")):I===null||I===vs||I===Nh?re=n.DEPTH_COMPONENT24:I===nr?re=n.DEPTH_COMPONENT32F:I===Oh&&(re=n.DEPTH_COMPONENT16),re}function P(V,I){return T(V)===!0||V.isFramebufferTexture&&V.minFilter!==Ei&&V.minFilter!==Zn?Math.log2(Math.max(I.width,I.height))+1:V.mipmaps!==void 0&&V.mipmaps.length>0?V.mipmaps.length:V.isCompressedTexture&&Array.isArray(V.image)?I.mipmaps.length:1}function U(V){const I=V.target;I.removeEventListener("dispose",U),j(I),I.isVideoTexture&&g.delete(I)}function z(V){const I=V.target;I.removeEventListener("dispose",z),F(I)}function j(V){const I=i.get(V);if(I.__webglInit===void 0)return;const re=V.source,Ae=_.get(re);if(Ae){const Be=Ae[I.__cacheKey];Be.usedTimes--,Be.usedTimes===0&&L(V),Object.keys(Ae).length===0&&_.delete(re)}i.remove(V)}function L(V){const I=i.get(V);n.deleteTexture(I.__webglTexture);const re=V.source,Ae=_.get(re);delete Ae[I.__cacheKey],l.memory.textures--}function F(V){const I=i.get(V);if(V.depthTexture&&(V.depthTexture.dispose(),i.remove(V.depthTexture)),V.isWebGLCubeRenderTarget)for(let Ae=0;Ae<6;Ae++){if(Array.isArray(I.__webglFramebuffer[Ae]))for(let Be=0;Be<I.__webglFramebuffer[Ae].length;Be++)n.deleteFramebuffer(I.__webglFramebuffer[Ae][Be]);else n.deleteFramebuffer(I.__webglFramebuffer[Ae]);I.__webglDepthbuffer&&n.deleteRenderbuffer(I.__webglDepthbuffer[Ae])}else{if(Array.isArray(I.__webglFramebuffer))for(let Ae=0;Ae<I.__webglFramebuffer.length;Ae++)n.deleteFramebuffer(I.__webglFramebuffer[Ae]);else n.deleteFramebuffer(I.__webglFramebuffer);if(I.__webglDepthbuffer&&n.deleteRenderbuffer(I.__webglDepthbuffer),I.__webglMultisampledFramebuffer&&n.deleteFramebuffer(I.__webglMultisampledFramebuffer),I.__webglColorRenderbuffer)for(let Ae=0;Ae<I.__webglColorRenderbuffer.length;Ae++)I.__webglColorRenderbuffer[Ae]&&n.deleteRenderbuffer(I.__webglColorRenderbuffer[Ae]);I.__webglDepthRenderbuffer&&n.deleteRenderbuffer(I.__webglDepthRenderbuffer)}const re=V.textures;for(let Ae=0,Be=re.length;Ae<Be;Ae++){const Re=i.get(re[Ae]);Re.__webglTexture&&(n.deleteTexture(Re.__webglTexture),l.memory.textures--),i.remove(re[Ae])}i.remove(V)}let W=0;function te(){W=0}function $(){const V=W;return V>=a.maxTextures&&ct("WebGLTextures: Trying to use "+V+" texture units while this GPU supports only "+a.maxTextures),W+=1,V}function ae(V){const I=[];return I.push(V.wrapS),I.push(V.wrapT),I.push(V.wrapR||0),I.push(V.magFilter),I.push(V.minFilter),I.push(V.anisotropy),I.push(V.internalFormat),I.push(V.format),I.push(V.type),I.push(V.generateMipmaps),I.push(V.premultiplyAlpha),I.push(V.flipY),I.push(V.unpackAlignment),I.push(V.colorSpace),I.join()}function le(V,I){const re=i.get(V);if(V.isVideoTexture&&Ze(V),V.isRenderTargetTexture===!1&&V.isExternalTexture!==!0&&V.version>0&&re.__version!==V.version){const Ae=V.image;if(Ae===null)ct("WebGLRenderer: Texture marked for update but no image data found.");else if(Ae.complete===!1)ct("WebGLRenderer: Texture marked for update but image is incomplete");else{ge(re,V,I);return}}else V.isExternalTexture&&(re.__webglTexture=V.sourceTexture?V.sourceTexture:null);t.bindTexture(n.TEXTURE_2D,re.__webglTexture,n.TEXTURE0+I)}function G(V,I){const re=i.get(V);if(V.isRenderTargetTexture===!1&&V.version>0&&re.__version!==V.version){ge(re,V,I);return}else V.isExternalTexture&&(re.__webglTexture=V.sourceTexture?V.sourceTexture:null);t.bindTexture(n.TEXTURE_2D_ARRAY,re.__webglTexture,n.TEXTURE0+I)}function J(V,I){const re=i.get(V);if(V.isRenderTargetTexture===!1&&V.version>0&&re.__version!==V.version){ge(re,V,I);return}t.bindTexture(n.TEXTURE_3D,re.__webglTexture,n.TEXTURE0+I)}function Z(V,I){const re=i.get(V);if(V.isCubeDepthTexture!==!0&&V.version>0&&re.__version!==V.version){Ee(re,V,I);return}t.bindTexture(n.TEXTURE_CUBE_MAP,re.__webglTexture,n.TEXTURE0+I)}const pe={[Nc]:n.REPEAT,[er]:n.CLAMP_TO_EDGE,[Bh]:n.MIRRORED_REPEAT},_e={[Ei]:n.NEAREST,[sv]:n.NEAREST_MIPMAP_NEAREST,[Wu]:n.NEAREST_MIPMAP_LINEAR,[Zn]:n.LINEAR,[Dh]:n.LINEAR_MIPMAP_NEAREST,[gs]:n.LINEAR_MIPMAP_LINEAR},q={[pT]:n.NEVER,[_T]:n.ALWAYS,[mT]:n.LESS,[Wv]:n.LEQUAL,[gT]:n.EQUAL,[Jv]:n.GEQUAL,[vT]:n.GREATER,[yT]:n.NOTEQUAL};function ce(V,I){if(I.type===nr&&e.has("OES_texture_float_linear")===!1&&(I.magFilter===Zn||I.magFilter===Dh||I.magFilter===Wu||I.magFilter===gs||I.minFilter===Zn||I.minFilter===Dh||I.minFilter===Wu||I.minFilter===gs)&&ct("WebGLRenderer: Unable to use linear filtering with floating point textures. OES_texture_float_linear not supported on this device."),n.texParameteri(V,n.TEXTURE_WRAP_S,pe[I.wrapS]),n.texParameteri(V,n.TEXTURE_WRAP_T,pe[I.wrapT]),(V===n.TEXTURE_3D||V===n.TEXTURE_2D_ARRAY)&&n.texParameteri(V,n.TEXTURE_WRAP_R,pe[I.wrapR]),n.texParameteri(V,n.TEXTURE_MAG_FILTER,_e[I.magFilter]),n.texParameteri(V,n.TEXTURE_MIN_FILTER,_e[I.minFilter]),I.compareFunction&&(n.texParameteri(V,n.TEXTURE_COMPARE_MODE,n.COMPARE_REF_TO_TEXTURE),n.texParameteri(V,n.TEXTURE_COMPARE_FUNC,q[I.compareFunction])),e.has("EXT_texture_filter_anisotropic")===!0){if(I.magFilter===Ei||I.minFilter!==Wu&&I.minFilter!==gs||I.type===nr&&e.has("OES_texture_float_linear")===!1)return;if(I.anisotropy>1||i.get(I).__currentAnisotropy){const re=e.get("EXT_texture_filter_anisotropic");n.texParameterf(V,re.TEXTURE_MAX_ANISOTROPY_EXT,Math.min(I.anisotropy,a.getMaxAnisotropy())),i.get(I).__currentAnisotropy=I.anisotropy}}}function Te(V,I){let re=!1;V.__webglInit===void 0&&(V.__webglInit=!0,I.addEventListener("dispose",U));const Ae=I.source;let Be=_.get(Ae);Be===void 0&&(Be={},_.set(Ae,Be));const Re=ae(I);if(Re!==V.__cacheKey){Be[Re]===void 0&&(Be[Re]={texture:n.createTexture(),usedTimes:0},l.memory.textures++,re=!0),Be[Re].usedTimes++;const pt=Be[V.__cacheKey];pt!==void 0&&(Be[V.__cacheKey].usedTimes--,pt.usedTimes===0&&L(I)),V.__cacheKey=Re,V.__webglTexture=Be[Re].texture}return re}function De(V,I,re){return Math.floor(Math.floor(V/re)/I)}function qe(V,I,re,Ae){const Re=V.updateRanges;if(Re.length===0)t.texSubImage2D(n.TEXTURE_2D,0,0,0,I.width,I.height,re,Ae,I.data);else{Re.sort((Fe,ke)=>Fe.start-ke.start);let pt=0;for(let Fe=1;Fe<Re.length;Fe++){const ke=Re[pt],nt=Re[Fe],it=ke.start+ke.count,Je=De(nt.start,I.width,4),Yt=De(ke.start,I.width,4);nt.start<=it+1&&Je===Yt&&De(nt.start+nt.count-1,I.width,4)===Je?ke.count=Math.max(ke.count,nt.start+nt.count-ke.start):(++pt,Re[pt]=nt)}Re.length=pt+1;const Qe=n.getParameter(n.UNPACK_ROW_LENGTH),gt=n.getParameter(n.UNPACK_SKIP_PIXELS),wt=n.getParameter(n.UNPACK_SKIP_ROWS);n.pixelStorei(n.UNPACK_ROW_LENGTH,I.width);for(let Fe=0,ke=Re.length;Fe<ke;Fe++){const nt=Re[Fe],it=Math.floor(nt.start/4),Je=Math.ceil(nt.count/4),Yt=it%I.width,oe=Math.floor(it/I.width),rt=Je,Ye=1;n.pixelStorei(n.UNPACK_SKIP_PIXELS,Yt),n.pixelStorei(n.UNPACK_SKIP_ROWS,oe),t.texSubImage2D(n.TEXTURE_2D,0,Yt,oe,rt,Ye,re,Ae,I.data)}V.clearUpdateRanges(),n.pixelStorei(n.UNPACK_ROW_LENGTH,Qe),n.pixelStorei(n.UNPACK_SKIP_PIXELS,gt),n.pixelStorei(n.UNPACK_SKIP_ROWS,wt)}}function ge(V,I,re){let Ae=n.TEXTURE_2D;(I.isDataArrayTexture||I.isCompressedArrayTexture)&&(Ae=n.TEXTURE_2D_ARRAY),I.isData3DTexture&&(Ae=n.TEXTURE_3D);const Be=Te(V,I),Re=I.source;t.bindTexture(Ae,V.__webglTexture,n.TEXTURE0+re);const pt=i.get(Re);if(Re.version!==pt.__version||Be===!0){t.activeTexture(n.TEXTURE0+re);const Qe=vn.getPrimaries(vn.workingColorSpace),gt=I.colorSpace===Tl?null:vn.getPrimaries(I.colorSpace),wt=I.colorSpace===Tl||Qe===gt?n.NONE:n.BROWSER_DEFAULT_WEBGL;n.pixelStorei(n.UNPACK_FLIP_Y_WEBGL,I.flipY),n.pixelStorei(n.UNPACK_PREMULTIPLY_ALPHA_WEBGL,I.premultiplyAlpha),n.pixelStorei(n.UNPACK_ALIGNMENT,I.unpackAlignment),n.pixelStorei(n.UNPACK_COLORSPACE_CONVERSION_WEBGL,wt);let Fe=C(I.image,!1,a.maxTextureSize);Fe=At(I,Fe);const ke=s.convert(I.format,I.colorSpace),nt=s.convert(I.type);let it=B(I.internalFormat,ke,nt,I.colorSpace,I.isVideoTexture);ce(Ae,I);let Je;const Yt=I.mipmaps,oe=I.isVideoTexture!==!0,rt=pt.__version===void 0||Be===!0,Ye=Re.dataReady,ft=P(I,Fe);if(I.isDepthTexture)it=D(I.format===Uc,I.type),rt&&(oe?t.texStorage2D(n.TEXTURE_2D,1,it,Fe.width,Fe.height):t.texImage2D(n.TEXTURE_2D,0,it,Fe.width,Fe.height,0,ke,nt,null));else if(I.isDataTexture)if(Yt.length>0){oe&&rt&&t.texStorage2D(n.TEXTURE_2D,ft,it,Yt[0].width,Yt[0].height);for(let Ve=0,Pe=Yt.length;Ve<Pe;Ve++)Je=Yt[Ve],oe?Ye&&t.texSubImage2D(n.TEXTURE_2D,Ve,0,0,Je.width,Je.height,ke,nt,Je.data):t.texImage2D(n.TEXTURE_2D,Ve,it,Je.width,Je.height,0,ke,nt,Je.data);I.generateMipmaps=!1}else oe?(rt&&t.texStorage2D(n.TEXTURE_2D,ft,it,Fe.width,Fe.height),Ye&&qe(I,Fe,ke,nt)):t.texImage2D(n.TEXTURE_2D,0,it,Fe.width,Fe.height,0,ke,nt,Fe.data);else if(I.isCompressedTexture)if(I.isCompressedArrayTexture){oe&&rt&&t.texStorage3D(n.TEXTURE_2D_ARRAY,ft,it,Yt[0].width,Yt[0].height,Fe.depth);for(let Ve=0,Pe=Yt.length;Ve<Pe;Ve++)if(Je=Yt[Ve],I.format!==Ua)if(ke!==null)if(oe){if(Ye)if(I.layerUpdates.size>0){const $e=RS(Je.width,Je.height,I.format,I.type);for(const Ht of I.layerUpdates){const bn=Je.data.subarray(Ht*$e/Je.data.BYTES_PER_ELEMENT,(Ht+1)*$e/Je.data.BYTES_PER_ELEMENT);t.compressedTexSubImage3D(n.TEXTURE_2D_ARRAY,Ve,0,0,Ht,Je.width,Je.height,1,ke,bn)}I.clearLayerUpdates()}else t.compressedTexSubImage3D(n.TEXTURE_2D_ARRAY,Ve,0,0,0,Je.width,Je.height,Fe.depth,ke,Je.data)}else t.compressedTexImage3D(n.TEXTURE_2D_ARRAY,Ve,it,Je.width,Je.height,Fe.depth,0,Je.data,0,0);else ct("WebGLRenderer: Attempt to load unsupported compressed texture format in .uploadTexture()");else oe?Ye&&t.texSubImage3D(n.TEXTURE_2D_ARRAY,Ve,0,0,0,Je.width,Je.height,Fe.depth,ke,nt,Je.data):t.texImage3D(n.TEXTURE_2D_ARRAY,Ve,it,Je.width,Je.height,Fe.depth,0,ke,nt,Je.data)}else{oe&&rt&&t.texStorage2D(n.TEXTURE_2D,ft,it,Yt[0].width,Yt[0].height);for(let Ve=0,Pe=Yt.length;Ve<Pe;Ve++)Je=Yt[Ve],I.format!==Ua?ke!==null?oe?Ye&&t.compressedTexSubImage2D(n.TEXTURE_2D,Ve,0,0,Je.width,Je.height,ke,Je.data):t.compressedTexImage2D(n.TEXTURE_2D,Ve,it,Je.width,Je.height,0,Je.data):ct("WebGLRenderer: Attempt to load unsupported compressed texture format in .uploadTexture()"):oe?Ye&&t.texSubImage2D(n.TEXTURE_2D,Ve,0,0,Je.width,Je.height,ke,nt,Je.data):t.texImage2D(n.TEXTURE_2D,Ve,it,Je.width,Je.height,0,ke,nt,Je.data)}else if(I.isDataArrayTexture)if(oe){if(rt&&t.texStorage3D(n.TEXTURE_2D_ARRAY,ft,it,Fe.width,Fe.height,Fe.depth),Ye)if(I.layerUpdates.size>0){const Ve=RS(Fe.width,Fe.height,I.format,I.type);for(const Pe of I.layerUpdates){const $e=Fe.data.subarray(Pe*Ve/Fe.data.BYTES_PER_ELEMENT,(Pe+1)*Ve/Fe.data.BYTES_PER_ELEMENT);t.texSubImage3D(n.TEXTURE_2D_ARRAY,0,0,0,Pe,Fe.width,Fe.height,1,ke,nt,$e)}I.clearLayerUpdates()}else t.texSubImage3D(n.TEXTURE_2D_ARRAY,0,0,0,0,Fe.width,Fe.height,Fe.depth,ke,nt,Fe.data)}else t.texImage3D(n.TEXTURE_2D_ARRAY,0,it,Fe.width,Fe.height,Fe.depth,0,ke,nt,Fe.data);else if(I.isData3DTexture)oe?(rt&&t.texStorage3D(n.TEXTURE_3D,ft,it,Fe.width,Fe.height,Fe.depth),Ye&&t.texSubImage3D(n.TEXTURE_3D,0,0,0,0,Fe.width,Fe.height,Fe.depth,ke,nt,Fe.data)):t.texImage3D(n.TEXTURE_3D,0,it,Fe.width,Fe.height,Fe.depth,0,ke,nt,Fe.data);else if(I.isFramebufferTexture){if(rt)if(oe)t.texStorage2D(n.TEXTURE_2D,ft,it,Fe.width,Fe.height);else{let Ve=Fe.width,Pe=Fe.height;for(let $e=0;$e<ft;$e++)t.texImage2D(n.TEXTURE_2D,$e,it,Ve,Pe,0,ke,nt,null),Ve>>=1,Pe>>=1}}else if(Yt.length>0){if(oe&&rt){const Ve=Ke(Yt[0]);t.texStorage2D(n.TEXTURE_2D,ft,it,Ve.width,Ve.height)}for(let Ve=0,Pe=Yt.length;Ve<Pe;Ve++)Je=Yt[Ve],oe?Ye&&t.texSubImage2D(n.TEXTURE_2D,Ve,0,0,ke,nt,Je):t.texImage2D(n.TEXTURE_2D,Ve,it,ke,nt,Je);I.generateMipmaps=!1}else if(oe){if(rt){const Ve=Ke(Fe);t.texStorage2D(n.TEXTURE_2D,ft,it,Ve.width,Ve.height)}Ye&&t.texSubImage2D(n.TEXTURE_2D,0,0,0,ke,nt,Fe)}else t.texImage2D(n.TEXTURE_2D,0,it,ke,nt,Fe);T(I)&&M(Ae),pt.__version=Re.version,I.onUpdate&&I.onUpdate(I)}V.__version=I.version}function Ee(V,I,re){if(I.image.length!==6)return;const Ae=Te(V,I),Be=I.source;t.bindTexture(n.TEXTURE_CUBE_MAP,V.__webglTexture,n.TEXTURE0+re);const Re=i.get(Be);if(Be.version!==Re.__version||Ae===!0){t.activeTexture(n.TEXTURE0+re);const pt=vn.getPrimaries(vn.workingColorSpace),Qe=I.colorSpace===Tl?null:vn.getPrimaries(I.colorSpace),gt=I.colorSpace===Tl||pt===Qe?n.NONE:n.BROWSER_DEFAULT_WEBGL;n.pixelStorei(n.UNPACK_FLIP_Y_WEBGL,I.flipY),n.pixelStorei(n.UNPACK_PREMULTIPLY_ALPHA_WEBGL,I.premultiplyAlpha),n.pixelStorei(n.UNPACK_ALIGNMENT,I.unpackAlignment),n.pixelStorei(n.UNPACK_COLORSPACE_CONVERSION_WEBGL,gt);const wt=I.isCompressedTexture||I.image[0].isCompressedTexture,Fe=I.image[0]&&I.image[0].isDataTexture,ke=[];for(let Pe=0;Pe<6;Pe++)!wt&&!Fe?ke[Pe]=C(I.image[Pe],!0,a.maxCubemapSize):ke[Pe]=Fe?I.image[Pe].image:I.image[Pe],ke[Pe]=At(I,ke[Pe]);const nt=ke[0],it=s.convert(I.format,I.colorSpace),Je=s.convert(I.type),Yt=B(I.internalFormat,it,Je,I.colorSpace),oe=I.isVideoTexture!==!0,rt=Re.__version===void 0||Ae===!0,Ye=Be.dataReady;let ft=P(I,nt);ce(n.TEXTURE_CUBE_MAP,I);let Ve;if(wt){oe&&rt&&t.texStorage2D(n.TEXTURE_CUBE_MAP,ft,Yt,nt.width,nt.height);for(let Pe=0;Pe<6;Pe++){Ve=ke[Pe].mipmaps;for(let $e=0;$e<Ve.length;$e++){const Ht=Ve[$e];I.format!==Ua?it!==null?oe?Ye&&t.compressedTexSubImage2D(n.TEXTURE_CUBE_MAP_POSITIVE_X+Pe,$e,0,0,Ht.width,Ht.height,it,Ht.data):t.compressedTexImage2D(n.TEXTURE_CUBE_MAP_POSITIVE_X+Pe,$e,Yt,Ht.width,Ht.height,0,Ht.data):ct("WebGLRenderer: Attempt to load unsupported compressed texture format in .setTextureCube()"):oe?Ye&&t.texSubImage2D(n.TEXTURE_CUBE_MAP_POSITIVE_X+Pe,$e,0,0,Ht.width,Ht.height,it,Je,Ht.data):t.texImage2D(n.TEXTURE_CUBE_MAP_POSITIVE_X+Pe,$e,Yt,Ht.width,Ht.height,0,it,Je,Ht.data)}}}else{if(Ve=I.mipmaps,oe&&rt){Ve.length>0&&ft++;const Pe=Ke(ke[0]);t.texStorage2D(n.TEXTURE_CUBE_MAP,ft,Yt,Pe.width,Pe.height)}for(let Pe=0;Pe<6;Pe++)if(Fe){oe?Ye&&t.texSubImage2D(n.TEXTURE_CUBE_MAP_POSITIVE_X+Pe,0,0,0,ke[Pe].width,ke[Pe].height,it,Je,ke[Pe].data):t.texImage2D(n.TEXTURE_CUBE_MAP_POSITIVE_X+Pe,0,Yt,ke[Pe].width,ke[Pe].height,0,it,Je,ke[Pe].data);for(let $e=0;$e<Ve.length;$e++){const bn=Ve[$e].image[Pe].image;oe?Ye&&t.texSubImage2D(n.TEXTURE_CUBE_MAP_POSITIVE_X+Pe,$e+1,0,0,bn.width,bn.height,it,Je,bn.data):t.texImage2D(n.TEXTURE_CUBE_MAP_POSITIVE_X+Pe,$e+1,Yt,bn.width,bn.height,0,it,Je,bn.data)}}else{oe?Ye&&t.texSubImage2D(n.TEXTURE_CUBE_MAP_POSITIVE_X+Pe,0,0,0,it,Je,ke[Pe]):t.texImage2D(n.TEXTURE_CUBE_MAP_POSITIVE_X+Pe,0,Yt,it,Je,ke[Pe]);for(let $e=0;$e<Ve.length;$e++){const Ht=Ve[$e];oe?Ye&&t.texSubImage2D(n.TEXTURE_CUBE_MAP_POSITIVE_X+Pe,$e+1,0,0,it,Je,Ht.image[Pe]):t.texImage2D(n.TEXTURE_CUBE_MAP_POSITIVE_X+Pe,$e+1,Yt,it,Je,Ht.image[Pe])}}}T(I)&&M(n.TEXTURE_CUBE_MAP),Re.__version=Be.version,I.onUpdate&&I.onUpdate(I)}V.__version=I.version}function Xe(V,I,re,Ae,Be,Re){const pt=s.convert(re.format,re.colorSpace),Qe=s.convert(re.type),gt=B(re.internalFormat,pt,Qe,re.colorSpace),wt=i.get(I),Fe=i.get(re);if(Fe.__renderTarget=I,!wt.__hasExternalTextures){const ke=Math.max(1,I.width>>Re),nt=Math.max(1,I.height>>Re);Be===n.TEXTURE_3D||Be===n.TEXTURE_2D_ARRAY?t.texImage3D(Be,Re,gt,ke,nt,I.depth,0,pt,Qe,null):t.texImage2D(Be,Re,gt,ke,nt,0,pt,Qe,null)}t.bindFramebuffer(n.FRAMEBUFFER,V),Tt(I)?c.framebufferTexture2DMultisampleEXT(n.FRAMEBUFFER,Ae,Be,Fe.__webglTexture,0,Q(I)):(Be===n.TEXTURE_2D||Be>=n.TEXTURE_CUBE_MAP_POSITIVE_X&&Be<=n.TEXTURE_CUBE_MAP_NEGATIVE_Z)&&n.framebufferTexture2D(n.FRAMEBUFFER,Ae,Be,Fe.__webglTexture,Re),t.bindFramebuffer(n.FRAMEBUFFER,null)}function tt(V,I,re){if(n.bindRenderbuffer(n.RENDERBUFFER,V),I.depthBuffer){const Ae=I.depthTexture,Be=Ae&&Ae.isDepthTexture?Ae.type:null,Re=D(I.stencilBuffer,Be),pt=I.stencilBuffer?n.DEPTH_STENCIL_ATTACHMENT:n.DEPTH_ATTACHMENT;Tt(I)?c.renderbufferStorageMultisampleEXT(n.RENDERBUFFER,Q(I),Re,I.width,I.height):re?n.renderbufferStorageMultisample(n.RENDERBUFFER,Q(I),Re,I.width,I.height):n.renderbufferStorage(n.RENDERBUFFER,Re,I.width,I.height),n.framebufferRenderbuffer(n.FRAMEBUFFER,pt,n.RENDERBUFFER,V)}else{const Ae=I.textures;for(let Be=0;Be<Ae.length;Be++){const Re=Ae[Be],pt=s.convert(Re.format,Re.colorSpace),Qe=s.convert(Re.type),gt=B(Re.internalFormat,pt,Qe,Re.colorSpace);Tt(I)?c.renderbufferStorageMultisampleEXT(n.RENDERBUFFER,Q(I),gt,I.width,I.height):re?n.renderbufferStorageMultisample(n.RENDERBUFFER,Q(I),gt,I.width,I.height):n.renderbufferStorage(n.RENDERBUFFER,gt,I.width,I.height)}}n.bindRenderbuffer(n.RENDERBUFFER,null)}function ot(V,I,re){const Ae=I.isWebGLCubeRenderTarget===!0;if(t.bindFramebuffer(n.FRAMEBUFFER,V),!(I.depthTexture&&I.depthTexture.isDepthTexture))throw new Error("renderTarget.depthTexture must be an instance of THREE.DepthTexture");const Be=i.get(I.depthTexture);if(Be.__renderTarget=I,(!Be.__webglTexture||I.depthTexture.image.width!==I.width||I.depthTexture.image.height!==I.height)&&(I.depthTexture.image.width=I.width,I.depthTexture.image.height=I.height,I.depthTexture.needsUpdate=!0),Ae){if(Be.__webglInit===void 0&&(Be.__webglInit=!0,I.depthTexture.addEventListener("dispose",U)),Be.__webglTexture===void 0){Be.__webglTexture=n.createTexture(),t.bindTexture(n.TEXTURE_CUBE_MAP,Be.__webglTexture),ce(n.TEXTURE_CUBE_MAP,I.depthTexture);const wt=s.convert(I.depthTexture.format),Fe=s.convert(I.depthTexture.type);let ke;I.depthTexture.format===Uo?ke=n.DEPTH_COMPONENT24:I.depthTexture.format===Uc&&(ke=n.DEPTH24_STENCIL8);for(let nt=0;nt<6;nt++)n.texImage2D(n.TEXTURE_CUBE_MAP_POSITIVE_X+nt,0,ke,I.width,I.height,0,wt,Fe,null)}}else le(I.depthTexture,0);const Re=Be.__webglTexture,pt=Q(I),Qe=Ae?n.TEXTURE_CUBE_MAP_POSITIVE_X+re:n.TEXTURE_2D,gt=I.depthTexture.format===Uc?n.DEPTH_STENCIL_ATTACHMENT:n.DEPTH_ATTACHMENT;if(I.depthTexture.format===Uo)Tt(I)?c.framebufferTexture2DMultisampleEXT(n.FRAMEBUFFER,gt,Qe,Re,0,pt):n.framebufferTexture2D(n.FRAMEBUFFER,gt,Qe,Re,0);else if(I.depthTexture.format===Uc)Tt(I)?c.framebufferTexture2DMultisampleEXT(n.FRAMEBUFFER,gt,Qe,Re,0,pt):n.framebufferTexture2D(n.FRAMEBUFFER,gt,Qe,Re,0);else throw new Error("Unknown depthTexture format")}function Vt(V){const I=i.get(V),re=V.isWebGLCubeRenderTarget===!0;if(I.__boundDepthTexture!==V.depthTexture){const Ae=V.depthTexture;if(I.__depthDisposeCallback&&I.__depthDisposeCallback(),Ae){const Be=()=>{delete I.__boundDepthTexture,delete I.__depthDisposeCallback,Ae.removeEventListener("dispose",Be)};Ae.addEventListener("dispose",Be),I.__depthDisposeCallback=Be}I.__boundDepthTexture=Ae}if(V.depthTexture&&!I.__autoAllocateDepthBuffer)if(re)for(let Ae=0;Ae<6;Ae++)ot(I.__webglFramebuffer[Ae],V,Ae);else{const Ae=V.texture.mipmaps;Ae&&Ae.length>0?ot(I.__webglFramebuffer[0],V,0):ot(I.__webglFramebuffer,V,0)}else if(re){I.__webglDepthbuffer=[];for(let Ae=0;Ae<6;Ae++)if(t.bindFramebuffer(n.FRAMEBUFFER,I.__webglFramebuffer[Ae]),I.__webglDepthbuffer[Ae]===void 0)I.__webglDepthbuffer[Ae]=n.createRenderbuffer(),tt(I.__webglDepthbuffer[Ae],V,!1);else{const Be=V.stencilBuffer?n.DEPTH_STENCIL_ATTACHMENT:n.DEPTH_ATTACHMENT,Re=I.__webglDepthbuffer[Ae];n.bindRenderbuffer(n.RENDERBUFFER,Re),n.framebufferRenderbuffer(n.FRAMEBUFFER,Be,n.RENDERBUFFER,Re)}}else{const Ae=V.texture.mipmaps;if(Ae&&Ae.length>0?t.bindFramebuffer(n.FRAMEBUFFER,I.__webglFramebuffer[0]):t.bindFramebuffer(n.FRAMEBUFFER,I.__webglFramebuffer),I.__webglDepthbuffer===void 0)I.__webglDepthbuffer=n.createRenderbuffer(),tt(I.__webglDepthbuffer,V,!1);else{const Be=V.stencilBuffer?n.DEPTH_STENCIL_ATTACHMENT:n.DEPTH_ATTACHMENT,Re=I.__webglDepthbuffer;n.bindRenderbuffer(n.RENDERBUFFER,Re),n.framebufferRenderbuffer(n.FRAMEBUFFER,Be,n.RENDERBUFFER,Re)}}t.bindFramebuffer(n.FRAMEBUFFER,null)}function en(V,I,re){const Ae=i.get(V);I!==void 0&&Xe(Ae.__webglFramebuffer,V,V.texture,n.COLOR_ATTACHMENT0,n.TEXTURE_2D,0),re!==void 0&&Vt(V)}function Et(V){const I=V.texture,re=i.get(V),Ae=i.get(I);V.addEventListener("dispose",z);const Be=V.textures,Re=V.isWebGLCubeRenderTarget===!0,pt=Be.length>1;if(pt||(Ae.__webglTexture===void 0&&(Ae.__webglTexture=n.createTexture()),Ae.__version=I.version,l.memory.textures++),Re){re.__webglFramebuffer=[];for(let Qe=0;Qe<6;Qe++)if(I.mipmaps&&I.mipmaps.length>0){re.__webglFramebuffer[Qe]=[];for(let gt=0;gt<I.mipmaps.length;gt++)re.__webglFramebuffer[Qe][gt]=n.createFramebuffer()}else re.__webglFramebuffer[Qe]=n.createFramebuffer()}else{if(I.mipmaps&&I.mipmaps.length>0){re.__webglFramebuffer=[];for(let Qe=0;Qe<I.mipmaps.length;Qe++)re.__webglFramebuffer[Qe]=n.createFramebuffer()}else re.__webglFramebuffer=n.createFramebuffer();if(pt)for(let Qe=0,gt=Be.length;Qe<gt;Qe++){const wt=i.get(Be[Qe]);wt.__webglTexture===void 0&&(wt.__webglTexture=n.createTexture(),l.memory.textures++)}if(V.samples>0&&Tt(V)===!1){re.__webglMultisampledFramebuffer=n.createFramebuffer(),re.__webglColorRenderbuffer=[],t.bindFramebuffer(n.FRAMEBUFFER,re.__webglMultisampledFramebuffer);for(let Qe=0;Qe<Be.length;Qe++){const gt=Be[Qe];re.__webglColorRenderbuffer[Qe]=n.createRenderbuffer(),n.bindRenderbuffer(n.RENDERBUFFER,re.__webglColorRenderbuffer[Qe]);const wt=s.convert(gt.format,gt.colorSpace),Fe=s.convert(gt.type),ke=B(gt.internalFormat,wt,Fe,gt.colorSpace,V.isXRRenderTarget===!0),nt=Q(V);n.renderbufferStorageMultisample(n.RENDERBUFFER,nt,ke,V.width,V.height),n.framebufferRenderbuffer(n.FRAMEBUFFER,n.COLOR_ATTACHMENT0+Qe,n.RENDERBUFFER,re.__webglColorRenderbuffer[Qe])}n.bindRenderbuffer(n.RENDERBUFFER,null),V.depthBuffer&&(re.__webglDepthRenderbuffer=n.createRenderbuffer(),tt(re.__webglDepthRenderbuffer,V,!0)),t.bindFramebuffer(n.FRAMEBUFFER,null)}}if(Re){t.bindTexture(n.TEXTURE_CUBE_MAP,Ae.__webglTexture),ce(n.TEXTURE_CUBE_MAP,I);for(let Qe=0;Qe<6;Qe++)if(I.mipmaps&&I.mipmaps.length>0)for(let gt=0;gt<I.mipmaps.length;gt++)Xe(re.__webglFramebuffer[Qe][gt],V,I,n.COLOR_ATTACHMENT0,n.TEXTURE_CUBE_MAP_POSITIVE_X+Qe,gt);else Xe(re.__webglFramebuffer[Qe],V,I,n.COLOR_ATTACHMENT0,n.TEXTURE_CUBE_MAP_POSITIVE_X+Qe,0);T(I)&&M(n.TEXTURE_CUBE_MAP),t.unbindTexture()}else if(pt){for(let Qe=0,gt=Be.length;Qe<gt;Qe++){const wt=Be[Qe],Fe=i.get(wt);let ke=n.TEXTURE_2D;(V.isWebGL3DRenderTarget||V.isWebGLArrayRenderTarget)&&(ke=V.isWebGL3DRenderTarget?n.TEXTURE_3D:n.TEXTURE_2D_ARRAY),t.bindTexture(ke,Fe.__webglTexture),ce(ke,wt),Xe(re.__webglFramebuffer,V,wt,n.COLOR_ATTACHMENT0+Qe,ke,0),T(wt)&&M(ke)}t.unbindTexture()}else{let Qe=n.TEXTURE_2D;if((V.isWebGL3DRenderTarget||V.isWebGLArrayRenderTarget)&&(Qe=V.isWebGL3DRenderTarget?n.TEXTURE_3D:n.TEXTURE_2D_ARRAY),t.bindTexture(Qe,Ae.__webglTexture),ce(Qe,I),I.mipmaps&&I.mipmaps.length>0)for(let gt=0;gt<I.mipmaps.length;gt++)Xe(re.__webglFramebuffer[gt],V,I,n.COLOR_ATTACHMENT0,Qe,gt);else Xe(re.__webglFramebuffer,V,I,n.COLOR_ATTACHMENT0,Qe,0);T(I)&&M(Qe),t.unbindTexture()}V.depthBuffer&&Vt(V)}function Ne(V){const I=V.textures;for(let re=0,Ae=I.length;re<Ae;re++){const Be=I[re];if(T(Be)){const Re=w(V),pt=i.get(Be).__webglTexture;t.bindTexture(Re,pt),M(Re),t.unbindTexture()}}}const Ge=[],Ie=[];function et(V){if(V.samples>0){if(Tt(V)===!1){const I=V.textures,re=V.width,Ae=V.height;let Be=n.COLOR_BUFFER_BIT;const Re=V.stencilBuffer?n.DEPTH_STENCIL_ATTACHMENT:n.DEPTH_ATTACHMENT,pt=i.get(V),Qe=I.length>1;if(Qe)for(let wt=0;wt<I.length;wt++)t.bindFramebuffer(n.FRAMEBUFFER,pt.__webglMultisampledFramebuffer),n.framebufferRenderbuffer(n.FRAMEBUFFER,n.COLOR_ATTACHMENT0+wt,n.RENDERBUFFER,null),t.bindFramebuffer(n.FRAMEBUFFER,pt.__webglFramebuffer),n.framebufferTexture2D(n.DRAW_FRAMEBUFFER,n.COLOR_ATTACHMENT0+wt,n.TEXTURE_2D,null,0);t.bindFramebuffer(n.READ_FRAMEBUFFER,pt.__webglMultisampledFramebuffer);const gt=V.texture.mipmaps;gt&&gt.length>0?t.bindFramebuffer(n.DRAW_FRAMEBUFFER,pt.__webglFramebuffer[0]):t.bindFramebuffer(n.DRAW_FRAMEBUFFER,pt.__webglFramebuffer);for(let wt=0;wt<I.length;wt++){if(V.resolveDepthBuffer&&(V.depthBuffer&&(Be|=n.DEPTH_BUFFER_BIT),V.stencilBuffer&&V.resolveStencilBuffer&&(Be|=n.STENCIL_BUFFER_BIT)),Qe){n.framebufferRenderbuffer(n.READ_FRAMEBUFFER,n.COLOR_ATTACHMENT0,n.RENDERBUFFER,pt.__webglColorRenderbuffer[wt]);const Fe=i.get(I[wt]).__webglTexture;n.framebufferTexture2D(n.DRAW_FRAMEBUFFER,n.COLOR_ATTACHMENT0,n.TEXTURE_2D,Fe,0)}n.blitFramebuffer(0,0,re,Ae,0,0,re,Ae,Be,n.NEAREST),d===!0&&(Ge.length=0,Ie.length=0,Ge.push(n.COLOR_ATTACHMENT0+wt),V.depthBuffer&&V.resolveDepthBuffer===!1&&(Ge.push(Re),Ie.push(Re),n.invalidateFramebuffer(n.DRAW_FRAMEBUFFER,Ie)),n.invalidateFramebuffer(n.READ_FRAMEBUFFER,Ge))}if(t.bindFramebuffer(n.READ_FRAMEBUFFER,null),t.bindFramebuffer(n.DRAW_FRAMEBUFFER,null),Qe)for(let wt=0;wt<I.length;wt++){t.bindFramebuffer(n.FRAMEBUFFER,pt.__webglMultisampledFramebuffer),n.framebufferRenderbuffer(n.FRAMEBUFFER,n.COLOR_ATTACHMENT0+wt,n.RENDERBUFFER,pt.__webglColorRenderbuffer[wt]);const Fe=i.get(I[wt]).__webglTexture;t.bindFramebuffer(n.FRAMEBUFFER,pt.__webglFramebuffer),n.framebufferTexture2D(n.DRAW_FRAMEBUFFER,n.COLOR_ATTACHMENT0+wt,n.TEXTURE_2D,Fe,0)}t.bindFramebuffer(n.DRAW_FRAMEBUFFER,pt.__webglMultisampledFramebuffer)}else if(V.depthBuffer&&V.resolveDepthBuffer===!1&&d){const I=V.stencilBuffer?n.DEPTH_STENCIL_ATTACHMENT:n.DEPTH_ATTACHMENT;n.invalidateFramebuffer(n.DRAW_FRAMEBUFFER,[I])}}}function Q(V){return Math.min(a.maxSamples,V.samples)}function Tt(V){const I=i.get(V);return V.samples>0&&e.has("WEBGL_multisampled_render_to_texture")===!0&&I.__useRenderToTexture!==!1}function Ze(V){const I=l.render.frame;g.get(V)!==I&&(g.set(V,I),V.update())}function At(V,I){const re=V.colorSpace,Ae=V.format,Be=V.type;return V.isCompressedTexture===!0||V.isVideoTexture===!0||re!==Ic&&re!==Tl&&(vn.getTransfer(re)===Hn?(Ae!==Ua||Be!==tr)&&ct("WebGLTextures: sRGB encoded textures have to use RGBAFormat and UnsignedByteType."):Dt("WebGLTextures: Unsupported texture color space:",re)),I}function Ke(V){return typeof HTMLImageElement<"u"&&V instanceof HTMLImageElement?(p.width=V.naturalWidth||V.width,p.height=V.naturalHeight||V.height):typeof VideoFrame<"u"&&V instanceof VideoFrame?(p.width=V.displayWidth,p.height=V.displayHeight):(p.width=V.width,p.height=V.height),p}this.allocateTextureUnit=$,this.resetTextureUnits=te,this.setTexture2D=le,this.setTexture2DArray=G,this.setTexture3D=J,this.setTextureCube=Z,this.rebindTextures=en,this.setupRenderTarget=Et,this.updateRenderTargetMipmap=Ne,this.updateMultisampleRenderTarget=et,this.setupDepthRenderbuffer=Vt,this.setupFrameBufferTexture=Xe,this.useMultisampledRTT=Tt,this.isReversedDepthBuffer=function(){return t.buffers.depth.getReversed()}}function KR(n,e){function t(i,a=Tl){let s;const l=vn.getTransfer(a);if(i===tr)return n.UNSIGNED_BYTE;if(i===lv)return n.UNSIGNED_SHORT_4_4_4_4;if(i===cv)return n.UNSIGNED_SHORT_5_5_5_1;if(i===Kb)return n.UNSIGNED_INT_5_9_9_9_REV;if(i===Qb)return n.UNSIGNED_INT_10F_11F_11F_REV;if(i===Wb)return n.BYTE;if(i===Jb)return n.SHORT;if(i===Oh)return n.UNSIGNED_SHORT;if(i===ov)return n.INT;if(i===vs)return n.UNSIGNED_INT;if(i===nr)return n.FLOAT;if(i===No)return n.HALF_FLOAT;if(i===Zb)return n.ALPHA;if(i===$b)return n.RGB;if(i===Ua)return n.RGBA;if(i===Uo)return n.DEPTH_COMPONENT;if(i===Uc)return n.DEPTH_STENCIL;if(i===uv)return n.RED;if(i===im)return n.RED_INTEGER;if(i===Ju)return n.RG;if(i===fv)return n.RG_INTEGER;if(i===hv)return n.RGBA_INTEGER;if(i===am||i===rm||i===sm||i===om)if(l===Hn)if(s=e.get("WEBGL_compressed_texture_s3tc_srgb"),s!==null){if(i===am)return s.COMPRESSED_SRGB_S3TC_DXT1_EXT;if(i===rm)return s.COMPRESSED_SRGB_ALPHA_S3TC_DXT1_EXT;if(i===sm)return s.COMPRESSED_SRGB_ALPHA_S3TC_DXT3_EXT;if(i===om)return s.COMPRESSED_SRGB_ALPHA_S3TC_DXT5_EXT}else return null;else if(s=e.get("WEBGL_compressed_texture_s3tc"),s!==null){if(i===am)return s.COMPRESSED_RGB_S3TC_DXT1_EXT;if(i===rm)return s.COMPRESSED_RGBA_S3TC_DXT1_EXT;if(i===sm)return s.COMPRESSED_RGBA_S3TC_DXT3_EXT;if(i===om)return s.COMPRESSED_RGBA_S3TC_DXT5_EXT}else return null;if(i===dv||i===pv||i===mv||i===gv)if(s=e.get("WEBGL_compressed_texture_pvrtc"),s!==null){if(i===dv)return s.COMPRESSED_RGB_PVRTC_4BPPV1_IMG;if(i===pv)return s.COMPRESSED_RGB_PVRTC_2BPPV1_IMG;if(i===mv)return s.COMPRESSED_RGBA_PVRTC_4BPPV1_IMG;if(i===gv)return s.COMPRESSED_RGBA_PVRTC_2BPPV1_IMG}else return null;if(i===vv||i===yv||i===_v||i===xv||i===bv||i===Av||i===Sv)if(s=e.get("WEBGL_compressed_texture_etc"),s!==null){if(i===vv||i===yv)return l===Hn?s.COMPRESSED_SRGB8_ETC2:s.COMPRESSED_RGB8_ETC2;if(i===_v)return l===Hn?s.COMPRESSED_SRGB8_ALPHA8_ETC2_EAC:s.COMPRESSED_RGBA8_ETC2_EAC;if(i===xv)return s.COMPRESSED_R11_EAC;if(i===bv)return s.COMPRESSED_SIGNED_R11_EAC;if(i===Av)return s.COMPRESSED_RG11_EAC;if(i===Sv)return s.COMPRESSED_SIGNED_RG11_EAC}else return null;if(i===Mv||i===Ev||i===Tv||i===Cv||i===Rv||i===wv||i===Bv||i===Dv||i===Ov||i===Nv||i===Uv||i===Lv||i===Iv||i===Pv)if(s=e.get("WEBGL_compressed_texture_astc"),s!==null){if(i===Mv)return l===Hn?s.COMPRESSED_SRGB8_ALPHA8_ASTC_4x4_KHR:s.COMPRESSED_RGBA_ASTC_4x4_KHR;if(i===Ev)return l===Hn?s.COMPRESSED_SRGB8_ALPHA8_ASTC_5x4_KHR:s.COMPRESSED_RGBA_ASTC_5x4_KHR;if(i===Tv)return l===Hn?s.COMPRESSED_SRGB8_ALPHA8_ASTC_5x5_KHR:s.COMPRESSED_RGBA_ASTC_5x5_KHR;if(i===Cv)return l===Hn?s.COMPRESSED_SRGB8_ALPHA8_ASTC_6x5_KHR:s.COMPRESSED_RGBA_ASTC_6x5_KHR;if(i===Rv)return l===Hn?s.COMPRESSED_SRGB8_ALPHA8_ASTC_6x6_KHR:s.COMPRESSED_RGBA_ASTC_6x6_KHR;if(i===wv)return l===Hn?s.COMPRESSED_SRGB8_ALPHA8_ASTC_8x5_KHR:s.COMPRESSED_RGBA_ASTC_8x5_KHR;if(i===Bv)return l===Hn?s.COMPRESSED_SRGB8_ALPHA8_ASTC_8x6_KHR:s.COMPRESSED_RGBA_ASTC_8x6_KHR;if(i===Dv)return l===Hn?s.COMPRESSED_SRGB8_ALPHA8_ASTC_8x8_KHR:s.COMPRESSED_RGBA_ASTC_8x8_KHR;if(i===Ov)return l===Hn?s.COMPRESSED_SRGB8_ALPHA8_ASTC_10x5_KHR:s.COMPRESSED_RGBA_ASTC_10x5_KHR;if(i===Nv)return l===Hn?s.COMPRESSED_SRGB8_ALPHA8_ASTC_10x6_KHR:s.COMPRESSED_RGBA_ASTC_10x6_KHR;if(i===Uv)return l===Hn?s.COMPRESSED_SRGB8_ALPHA8_ASTC_10x8_KHR:s.COMPRESSED_RGBA_ASTC_10x8_KHR;if(i===Lv)return l===Hn?s.COMPRESSED_SRGB8_ALPHA8_ASTC_10x10_KHR:s.COMPRESSED_RGBA_ASTC_10x10_KHR;if(i===Iv)return l===Hn?s.COMPRESSED_SRGB8_ALPHA8_ASTC_12x10_KHR:s.COMPRESSED_RGBA_ASTC_12x10_KHR;if(i===Pv)return l===Hn?s.COMPRESSED_SRGB8_ALPHA8_ASTC_12x12_KHR:s.COMPRESSED_RGBA_ASTC_12x12_KHR}else return null;if(i===Fv||i===zv||i===Hv)if(s=e.get("EXT_texture_compression_bptc"),s!==null){if(i===Fv)return l===Hn?s.COMPRESSED_SRGB_ALPHA_BPTC_UNORM_EXT:s.COMPRESSED_RGBA_BPTC_UNORM_EXT;if(i===zv)return s.COMPRESSED_RGB_BPTC_SIGNED_FLOAT_EXT;if(i===Hv)return s.COMPRESSED_RGB_BPTC_UNSIGNED_FLOAT_EXT}else return null;if(i===Gv||i===Vv||i===kv||i===Xv)if(s=e.get("EXT_texture_compression_rgtc"),s!==null){if(i===Gv)return s.COMPRESSED_RED_RGTC1_EXT;if(i===Vv)return s.COMPRESSED_SIGNED_RED_RGTC1_EXT;if(i===kv)return s.COMPRESSED_RED_GREEN_RGTC2_EXT;if(i===Xv)return s.COMPRESSED_SIGNED_RED_GREEN_RGTC2_EXT}else return null;return i===Nh?n.UNSIGNED_INT_24_8:n[i]!==void 0?n[i]:null}return{convert:t}}const dH=`
void main() {

	gl_Position = vec4( position, 1.0 );

}`,pH=`
uniform sampler2DArray depthColor;
uniform float depthWidth;
uniform float depthHeight;

void main() {

	vec2 coord = vec2( gl_FragCoord.x / depthWidth, gl_FragCoord.y / depthHeight );

	if ( coord.x >= 1.0 ) {

		gl_FragDepth = texture( depthColor, vec3( coord.x - 1.0, coord.y, 1 ) ).r;

	} else {

		gl_FragDepth = texture( depthColor, vec3( coord.x, coord.y, 0 ) ).r;

	}

}`;class mH{constructor(){this.texture=null,this.mesh=null,this.depthNear=0,this.depthFar=0}init(e,t){if(this.texture===null){const i=new kA(e.texture);(e.depthNear!==t.depthNear||e.depthFar!==t.depthFar)&&(this.depthNear=e.depthNear,this.depthFar=e.depthFar),this.texture=i}}getMesh(e){if(this.texture!==null&&this.mesh===null){const t=e.cameras[0].viewport,i=new _s({vertexShader:dH,fragmentShader:pH,uniforms:{depthColor:{value:this.texture},depthWidth:{value:t.z},depthHeight:{value:t.w}}});this.mesh=new Ii(new ud(20,20),i)}return this.mesh}reset(){this.texture=null,this.mesh=null}getDepthTexture(){return this.texture}}class gH extends Lo{constructor(e,t){super();const i=this;let a=null,s=1,l=null,c="local-floor",d=1,p=null,g=null,v=null,_=null,x=null,S=null;const C=typeof XRWebGLBinding<"u",T=new mH,M={},w=t.getContextAttributes();let B=null,D=null;const P=[],U=[],z=new He;let j=null;const L=new Zi;L.viewport=new Fn;const F=new Zi;F.viewport=new Fn;const W=[L,F],te=new aR;let $=null,ae=null;this.cameraAutoUpdate=!0,this.enabled=!1,this.isPresenting=!1,this.getController=function(ge){let Ee=P[ge];return Ee===void 0&&(Ee=new my,P[ge]=Ee),Ee.getTargetRaySpace()},this.getControllerGrip=function(ge){let Ee=P[ge];return Ee===void 0&&(Ee=new my,P[ge]=Ee),Ee.getGripSpace()},this.getHand=function(ge){let Ee=P[ge];return Ee===void 0&&(Ee=new my,P[ge]=Ee),Ee.getHandSpace()};function le(ge){const Ee=U.indexOf(ge.inputSource);if(Ee===-1)return;const Xe=P[Ee];Xe!==void 0&&(Xe.update(ge.inputSource,ge.frame,p||l),Xe.dispatchEvent({type:ge.type,data:ge.inputSource}))}function G(){a.removeEventListener("select",le),a.removeEventListener("selectstart",le),a.removeEventListener("selectend",le),a.removeEventListener("squeeze",le),a.removeEventListener("squeezestart",le),a.removeEventListener("squeezeend",le),a.removeEventListener("end",G),a.removeEventListener("inputsourceschange",J);for(let ge=0;ge<P.length;ge++){const Ee=U[ge];Ee!==null&&(U[ge]=null,P[ge].disconnect(Ee))}$=null,ae=null,T.reset();for(const ge in M)delete M[ge];e.setRenderTarget(B),x=null,_=null,v=null,a=null,D=null,qe.stop(),i.isPresenting=!1,e.setPixelRatio(j),e.setSize(z.width,z.height,!1),i.dispatchEvent({type:"sessionend"})}this.setFramebufferScaleFactor=function(ge){s=ge,i.isPresenting===!0&&ct("WebXRManager: Cannot change framebuffer scale while presenting.")},this.setReferenceSpaceType=function(ge){c=ge,i.isPresenting===!0&&ct("WebXRManager: Cannot change reference space type while presenting.")},this.getReferenceSpace=function(){return p||l},this.setReferenceSpace=function(ge){p=ge},this.getBaseLayer=function(){return _!==null?_:x},this.getBinding=function(){return v===null&&C&&(v=new XRWebGLBinding(a,t)),v},this.getFrame=function(){return S},this.getSession=function(){return a},this.setSession=async function(ge){if(a=ge,a!==null){if(B=e.getRenderTarget(),a.addEventListener("select",le),a.addEventListener("selectstart",le),a.addEventListener("selectend",le),a.addEventListener("squeeze",le),a.addEventListener("squeezestart",le),a.addEventListener("squeezeend",le),a.addEventListener("end",G),a.addEventListener("inputsourceschange",J),w.xrCompatible!==!0&&await t.makeXRCompatible(),j=e.getPixelRatio(),e.getSize(z),C&&"createProjectionLayer"in XRWebGLBinding.prototype){let Xe=null,tt=null,ot=null;w.depth&&(ot=w.stencil?t.DEPTH24_STENCIL8:t.DEPTH_COMPONENT24,Xe=w.stencil?Uc:Uo,tt=w.stencil?Nh:vs);const Vt={colorFormat:t.RGBA8,depthFormat:ot,scaleFactor:s};v=this.getBinding(),_=v.createProjectionLayer(Vt),a.updateRenderState({layers:[_]}),e.setPixelRatio(1),e.setSize(_.textureWidth,_.textureHeight,!1),D=new Jr(_.textureWidth,_.textureHeight,{format:Ua,type:tr,depthTexture:new ld(_.textureWidth,_.textureHeight,tt,void 0,void 0,void 0,void 0,void 0,void 0,Xe),stencilBuffer:w.stencil,colorSpace:e.outputColorSpace,samples:w.antialias?4:0,resolveDepthBuffer:_.ignoreDepthValues===!1,resolveStencilBuffer:_.ignoreDepthValues===!1})}else{const Xe={antialias:w.antialias,alpha:!0,depth:w.depth,stencil:w.stencil,framebufferScaleFactor:s};x=new XRWebGLLayer(a,t,Xe),a.updateRenderState({baseLayer:x}),e.setPixelRatio(1),e.setSize(x.framebufferWidth,x.framebufferHeight,!1),D=new Jr(x.framebufferWidth,x.framebufferHeight,{format:Ua,type:tr,colorSpace:e.outputColorSpace,stencilBuffer:w.stencil,resolveDepthBuffer:x.ignoreDepthValues===!1,resolveStencilBuffer:x.ignoreDepthValues===!1})}D.isXRRenderTarget=!0,this.setFoveation(d),p=null,l=await a.requestReferenceSpace(c),qe.setContext(a),qe.start(),i.isPresenting=!0,i.dispatchEvent({type:"sessionstart"})}},this.getEnvironmentBlendMode=function(){if(a!==null)return a.environmentBlendMode},this.getDepthTexture=function(){return T.getDepthTexture()};function J(ge){for(let Ee=0;Ee<ge.removed.length;Ee++){const Xe=ge.removed[Ee],tt=U.indexOf(Xe);tt>=0&&(U[tt]=null,P[tt].disconnect(Xe))}for(let Ee=0;Ee<ge.added.length;Ee++){const Xe=ge.added[Ee];let tt=U.indexOf(Xe);if(tt===-1){for(let Vt=0;Vt<P.length;Vt++)if(Vt>=U.length){U.push(Xe),tt=Vt;break}else if(U[Vt]===null){U[Vt]=Xe,tt=Vt;break}if(tt===-1)break}const ot=P[tt];ot&&ot.connect(Xe)}}const Z=new K,pe=new K;function _e(ge,Ee,Xe){Z.setFromMatrixPosition(Ee.matrixWorld),pe.setFromMatrixPosition(Xe.matrixWorld);const tt=Z.distanceTo(pe),ot=Ee.projectionMatrix.elements,Vt=Xe.projectionMatrix.elements,en=ot[14]/(ot[10]-1),Et=ot[14]/(ot[10]+1),Ne=(ot[9]+1)/ot[5],Ge=(ot[9]-1)/ot[5],Ie=(ot[8]-1)/ot[0],et=(Vt[8]+1)/Vt[0],Q=en*Ie,Tt=en*et,Ze=tt/(-Ie+et),At=Ze*-Ie;if(Ee.matrixWorld.decompose(ge.position,ge.quaternion,ge.scale),ge.translateX(At),ge.translateZ(Ze),ge.matrixWorld.compose(ge.position,ge.quaternion,ge.scale),ge.matrixWorldInverse.copy(ge.matrixWorld).invert(),ot[10]===-1)ge.projectionMatrix.copy(Ee.projectionMatrix),ge.projectionMatrixInverse.copy(Ee.projectionMatrixInverse);else{const Ke=en+Ze,V=Et+Ze,I=Q-At,re=Tt+(tt-At),Ae=Ne*Et/V*Ke,Be=Ge*Et/V*Ke;ge.projectionMatrix.makePerspective(I,re,Ae,Be,Ke,V),ge.projectionMatrixInverse.copy(ge.projectionMatrix).invert()}}function q(ge,Ee){Ee===null?ge.matrixWorld.copy(ge.matrix):ge.matrixWorld.multiplyMatrices(Ee.matrixWorld,ge.matrix),ge.matrixWorldInverse.copy(ge.matrixWorld).invert()}this.updateCamera=function(ge){if(a===null)return;let Ee=ge.near,Xe=ge.far;T.texture!==null&&(T.depthNear>0&&(Ee=T.depthNear),T.depthFar>0&&(Xe=T.depthFar)),te.near=F.near=L.near=Ee,te.far=F.far=L.far=Xe,($!==te.near||ae!==te.far)&&(a.updateRenderState({depthNear:te.near,depthFar:te.far}),$=te.near,ae=te.far),te.layers.mask=ge.layers.mask|6,L.layers.mask=te.layers.mask&3,F.layers.mask=te.layers.mask&5;const tt=ge.parent,ot=te.cameras;q(te,tt);for(let Vt=0;Vt<ot.length;Vt++)q(ot[Vt],tt);ot.length===2?_e(te,L,F):te.projectionMatrix.copy(L.projectionMatrix),ce(ge,te,tt)};function ce(ge,Ee,Xe){Xe===null?ge.matrix.copy(Ee.matrixWorld):(ge.matrix.copy(Xe.matrixWorld),ge.matrix.invert(),ge.matrix.multiply(Ee.matrixWorld)),ge.matrix.decompose(ge.position,ge.quaternion,ge.scale),ge.updateMatrixWorld(!0),ge.projectionMatrix.copy(Ee.projectionMatrix),ge.projectionMatrixInverse.copy(Ee.projectionMatrixInverse),ge.isPerspectiveCamera&&(ge.fov=zh*2*Math.atan(1/ge.projectionMatrix.elements[5]),ge.zoom=1)}this.getCamera=function(){return te},this.getFoveation=function(){if(!(_===null&&x===null))return d},this.setFoveation=function(ge){d=ge,_!==null&&(_.fixedFoveation=ge),x!==null&&x.fixedFoveation!==void 0&&(x.fixedFoveation=ge)},this.hasDepthSensing=function(){return T.texture!==null},this.getDepthSensingMesh=function(){return T.getMesh(te)},this.getCameraTexture=function(ge){return M[ge]};let Te=null;function De(ge,Ee){if(g=Ee.getViewerPose(p||l),S=Ee,g!==null){const Xe=g.views;x!==null&&(e.setRenderTargetFramebuffer(D,x.framebuffer),e.setRenderTarget(D));let tt=!1;Xe.length!==te.cameras.length&&(te.cameras.length=0,tt=!0);for(let Et=0;Et<Xe.length;Et++){const Ne=Xe[Et];let Ge=null;if(x!==null)Ge=x.getViewport(Ne);else{const et=v.getViewSubImage(_,Ne);Ge=et.viewport,Et===0&&(e.setRenderTargetTextures(D,et.colorTexture,et.depthStencilTexture),e.setRenderTarget(D))}let Ie=W[Et];Ie===void 0&&(Ie=new Zi,Ie.layers.enable(Et),Ie.viewport=new Fn,W[Et]=Ie),Ie.matrix.fromArray(Ne.transform.matrix),Ie.matrix.decompose(Ie.position,Ie.quaternion,Ie.scale),Ie.projectionMatrix.fromArray(Ne.projectionMatrix),Ie.projectionMatrixInverse.copy(Ie.projectionMatrix).invert(),Ie.viewport.set(Ge.x,Ge.y,Ge.width,Ge.height),Et===0&&(te.matrix.copy(Ie.matrix),te.matrix.decompose(te.position,te.quaternion,te.scale)),tt===!0&&te.cameras.push(Ie)}const ot=a.enabledFeatures;if(ot&&ot.includes("depth-sensing")&&a.depthUsage=="gpu-optimized"&&C){v=i.getBinding();const Et=v.getDepthInformation(Xe[0]);Et&&Et.isValid&&Et.texture&&T.init(Et,a.renderState)}if(ot&&ot.includes("camera-access")&&C){e.state.unbindTexture(),v=i.getBinding();for(let Et=0;Et<Xe.length;Et++){const Ne=Xe[Et].camera;if(Ne){let Ge=M[Ne];Ge||(Ge=new kA,M[Ne]=Ge);const Ie=v.getCameraImage(Ne);Ge.sourceTexture=Ie}}}}for(let Xe=0;Xe<P.length;Xe++){const tt=U[Xe],ot=P[Xe];tt!==null&&ot!==void 0&&ot.update(tt,Ee,p||l)}Te&&Te(ge,Ee),Ee.detectedPlanes&&i.dispatchEvent({type:"planesdetected",data:Ee}),S=null}const qe=new SR;qe.setAnimationLoop(De),this.setAnimationLoop=function(ge){Te=ge},this.dispose=function(){}}}const Tf=new wr,vH=new It;function yH(n,e){function t(T,M){T.matrixAutoUpdate===!0&&T.updateMatrix(),M.value.copy(T.matrix)}function i(T,M){M.color.getRGB(T.fogColor.value,GT(n)),M.isFog?(T.fogNear.value=M.near,T.fogFar.value=M.far):M.isFogExp2&&(T.fogDensity.value=M.density)}function a(T,M,w,B,D){M.isMeshBasicMaterial||M.isMeshLambertMaterial?s(T,M):M.isMeshToonMaterial?(s(T,M),v(T,M)):M.isMeshPhongMaterial?(s(T,M),g(T,M)):M.isMeshStandardMaterial?(s(T,M),_(T,M),M.isMeshPhysicalMaterial&&x(T,M,D)):M.isMeshMatcapMaterial?(s(T,M),S(T,M)):M.isMeshDepthMaterial?s(T,M):M.isMeshDistanceMaterial?(s(T,M),C(T,M)):M.isMeshNormalMaterial?s(T,M):M.isLineBasicMaterial?(l(T,M),M.isLineDashedMaterial&&c(T,M)):M.isPointsMaterial?d(T,M,w,B):M.isSpriteMaterial?p(T,M):M.isShadowMaterial?(T.color.value.copy(M.color),T.opacity.value=M.opacity):M.isShaderMaterial&&(M.uniformsNeedUpdate=!1)}function s(T,M){T.opacity.value=M.opacity,M.color&&T.diffuse.value.copy(M.color),M.emissive&&T.emissive.value.copy(M.emissive).multiplyScalar(M.emissiveIntensity),M.map&&(T.map.value=M.map,t(M.map,T.mapTransform)),M.alphaMap&&(T.alphaMap.value=M.alphaMap,t(M.alphaMap,T.alphaMapTransform)),M.bumpMap&&(T.bumpMap.value=M.bumpMap,t(M.bumpMap,T.bumpMapTransform),T.bumpScale.value=M.bumpScale,M.side===$a&&(T.bumpScale.value*=-1)),M.normalMap&&(T.normalMap.value=M.normalMap,t(M.normalMap,T.normalMapTransform),T.normalScale.value.copy(M.normalScale),M.side===$a&&T.normalScale.value.negate()),M.displacementMap&&(T.displacementMap.value=M.displacementMap,t(M.displacementMap,T.displacementMapTransform),T.displacementScale.value=M.displacementScale,T.displacementBias.value=M.displacementBias),M.emissiveMap&&(T.emissiveMap.value=M.emissiveMap,t(M.emissiveMap,T.emissiveMapTransform)),M.specularMap&&(T.specularMap.value=M.specularMap,t(M.specularMap,T.specularMapTransform)),M.alphaTest>0&&(T.alphaTest.value=M.alphaTest);const w=e.get(M),B=w.envMap,D=w.envMapRotation;B&&(T.envMap.value=B,Tf.copy(D),Tf.x*=-1,Tf.y*=-1,Tf.z*=-1,B.isCubeTexture&&B.isRenderTargetTexture===!1&&(Tf.y*=-1,Tf.z*=-1),T.envMapRotation.value.setFromMatrix4(vH.makeRotationFromEuler(Tf)),T.flipEnvMap.value=B.isCubeTexture&&B.isRenderTargetTexture===!1?-1:1,T.reflectivity.value=M.reflectivity,T.ior.value=M.ior,T.refractionRatio.value=M.refractionRatio),M.lightMap&&(T.lightMap.value=M.lightMap,T.lightMapIntensity.value=M.lightMapIntensity,t(M.lightMap,T.lightMapTransform)),M.aoMap&&(T.aoMap.value=M.aoMap,T.aoMapIntensity.value=M.aoMapIntensity,t(M.aoMap,T.aoMapTransform))}function l(T,M){T.diffuse.value.copy(M.color),T.opacity.value=M.opacity,M.map&&(T.map.value=M.map,t(M.map,T.mapTransform))}function c(T,M){T.dashSize.value=M.dashSize,T.totalSize.value=M.dashSize+M.gapSize,T.scale.value=M.scale}function d(T,M,w,B){T.diffuse.value.copy(M.color),T.opacity.value=M.opacity,T.size.value=M.size*w,T.scale.value=B*.5,M.map&&(T.map.value=M.map,t(M.map,T.uvTransform)),M.alphaMap&&(T.alphaMap.value=M.alphaMap,t(M.alphaMap,T.alphaMapTransform)),M.alphaTest>0&&(T.alphaTest.value=M.alphaTest)}function p(T,M){T.diffuse.value.copy(M.color),T.opacity.value=M.opacity,T.rotation.value=M.rotation,M.map&&(T.map.value=M.map,t(M.map,T.mapTransform)),M.alphaMap&&(T.alphaMap.value=M.alphaMap,t(M.alphaMap,T.alphaMapTransform)),M.alphaTest>0&&(T.alphaTest.value=M.alphaTest)}function g(T,M){T.specular.value.copy(M.specular),T.shininess.value=Math.max(M.shininess,1e-4)}function v(T,M){M.gradientMap&&(T.gradientMap.value=M.gradientMap)}function _(T,M){T.metalness.value=M.metalness,M.metalnessMap&&(T.metalnessMap.value=M.metalnessMap,t(M.metalnessMap,T.metalnessMapTransform)),T.roughness.value=M.roughness,M.roughnessMap&&(T.roughnessMap.value=M.roughnessMap,t(M.roughnessMap,T.roughnessMapTransform)),M.envMap&&(T.envMapIntensity.value=M.envMapIntensity)}function x(T,M,w){T.ior.value=M.ior,M.sheen>0&&(T.sheenColor.value.copy(M.sheenColor).multiplyScalar(M.sheen),T.sheenRoughness.value=M.sheenRoughness,M.sheenColorMap&&(T.sheenColorMap.value=M.sheenColorMap,t(M.sheenColorMap,T.sheenColorMapTransform)),M.sheenRoughnessMap&&(T.sheenRoughnessMap.value=M.sheenRoughnessMap,t(M.sheenRoughnessMap,T.sheenRoughnessMapTransform))),M.clearcoat>0&&(T.clearcoat.value=M.clearcoat,T.clearcoatRoughness.value=M.clearcoatRoughness,M.clearcoatMap&&(T.clearcoatMap.value=M.clearcoatMap,t(M.clearcoatMap,T.clearcoatMapTransform)),M.clearcoatRoughnessMap&&(T.clearcoatRoughnessMap.value=M.clearcoatRoughnessMap,t(M.clearcoatRoughnessMap,T.clearcoatRoughnessMapTransform)),M.clearcoatNormalMap&&(T.clearcoatNormalMap.value=M.clearcoatNormalMap,t(M.clearcoatNormalMap,T.clearcoatNormalMapTransform),T.clearcoatNormalScale.value.copy(M.clearcoatNormalScale),M.side===$a&&T.clearcoatNormalScale.value.negate())),M.dispersion>0&&(T.dispersion.value=M.dispersion),M.iridescence>0&&(T.iridescence.value=M.iridescence,T.iridescenceIOR.value=M.iridescenceIOR,T.iridescenceThicknessMinimum.value=M.iridescenceThicknessRange[0],T.iridescenceThicknessMaximum.value=M.iridescenceThicknessRange[1],M.iridescenceMap&&(T.iridescenceMap.value=M.iridescenceMap,t(M.iridescenceMap,T.iridescenceMapTransform)),M.iridescenceThicknessMap&&(T.iridescenceThicknessMap.value=M.iridescenceThicknessMap,t(M.iridescenceThicknessMap,T.iridescenceThicknessMapTransform))),M.transmission>0&&(T.transmission.value=M.transmission,T.transmissionSamplerMap.value=w.texture,T.transmissionSamplerSize.value.set(w.width,w.height),M.transmissionMap&&(T.transmissionMap.value=M.transmissionMap,t(M.transmissionMap,T.transmissionMapTransform)),T.thickness.value=M.thickness,M.thicknessMap&&(T.thicknessMap.value=M.thicknessMap,t(M.thicknessMap,T.thicknessMapTransform)),T.attenuationDistance.value=M.attenuationDistance,T.attenuationColor.value.copy(M.attenuationColor)),M.anisotropy>0&&(T.anisotropyVector.value.set(M.anisotropy*Math.cos(M.anisotropyRotation),M.anisotropy*Math.sin(M.anisotropyRotation)),M.anisotropyMap&&(T.anisotropyMap.value=M.anisotropyMap,t(M.anisotropyMap,T.anisotropyMapTransform))),T.specularIntensity.value=M.specularIntensity,T.specularColor.value.copy(M.specularColor),M.specularColorMap&&(T.specularColorMap.value=M.specularColorMap,t(M.specularColorMap,T.specularColorMapTransform)),M.specularIntensityMap&&(T.specularIntensityMap.value=M.specularIntensityMap,t(M.specularIntensityMap,T.specularIntensityMapTransform))}function S(T,M){M.matcap&&(T.matcap.value=M.matcap)}function C(T,M){const w=e.get(M).light;T.referencePosition.value.setFromMatrixPosition(w.matrixWorld),T.nearDistance.value=w.shadow.camera.near,T.farDistance.value=w.shadow.camera.far}return{refreshFogUniforms:i,refreshMaterialUniforms:a}}function _H(n,e,t,i){let a={},s={},l=[];const c=n.getParameter(n.MAX_UNIFORM_BUFFER_BINDINGS);function d(w,B){const D=B.program;i.uniformBlockBinding(w,D)}function p(w,B){let D=a[w.id];D===void 0&&(S(w),D=g(w),a[w.id]=D,w.addEventListener("dispose",T));const P=B.program;i.updateUBOMapping(w,P);const U=e.render.frame;s[w.id]!==U&&(_(w),s[w.id]=U)}function g(w){const B=v();w.__bindingPointIndex=B;const D=n.createBuffer(),P=w.__size,U=w.usage;return n.bindBuffer(n.UNIFORM_BUFFER,D),n.bufferData(n.UNIFORM_BUFFER,P,U),n.bindBuffer(n.UNIFORM_BUFFER,null),n.bindBufferBase(n.UNIFORM_BUFFER,B,D),D}function v(){for(let w=0;w<c;w++)if(l.indexOf(w)===-1)return l.push(w),w;return Dt("WebGLRenderer: Maximum number of simultaneously usable uniforms groups reached."),0}function _(w){const B=a[w.id],D=w.uniforms,P=w.__cache;n.bindBuffer(n.UNIFORM_BUFFER,B);for(let U=0,z=D.length;U<z;U++){const j=Array.isArray(D[U])?D[U]:[D[U]];for(let L=0,F=j.length;L<F;L++){const W=j[L];if(x(W,U,L,P)===!0){const te=W.__offset,$=Array.isArray(W.value)?W.value:[W.value];let ae=0;for(let le=0;le<$.length;le++){const G=$[le],J=C(G);typeof G=="number"||typeof G=="boolean"?(W.__data[0]=G,n.bufferSubData(n.UNIFORM_BUFFER,te+ae,W.__data)):G.isMatrix3?(W.__data[0]=G.elements[0],W.__data[1]=G.elements[1],W.__data[2]=G.elements[2],W.__data[3]=0,W.__data[4]=G.elements[3],W.__data[5]=G.elements[4],W.__data[6]=G.elements[5],W.__data[7]=0,W.__data[8]=G.elements[6],W.__data[9]=G.elements[7],W.__data[10]=G.elements[8],W.__data[11]=0):(G.toArray(W.__data,ae),ae+=J.storage/Float32Array.BYTES_PER_ELEMENT)}n.bufferSubData(n.UNIFORM_BUFFER,te,W.__data)}}}n.bindBuffer(n.UNIFORM_BUFFER,null)}function x(w,B,D,P){const U=w.value,z=B+"_"+D;if(P[z]===void 0)return typeof U=="number"||typeof U=="boolean"?P[z]=U:P[z]=U.clone(),!0;{const j=P[z];if(typeof U=="number"||typeof U=="boolean"){if(j!==U)return P[z]=U,!0}else if(j.equals(U)===!1)return j.copy(U),!0}return!1}function S(w){const B=w.uniforms;let D=0;const P=16;for(let z=0,j=B.length;z<j;z++){const L=Array.isArray(B[z])?B[z]:[B[z]];for(let F=0,W=L.length;F<W;F++){const te=L[F],$=Array.isArray(te.value)?te.value:[te.value];for(let ae=0,le=$.length;ae<le;ae++){const G=$[ae],J=C(G),Z=D%P,pe=Z%J.boundary,_e=Z+pe;D+=pe,_e!==0&&P-_e<J.storage&&(D+=P-_e),te.__data=new Float32Array(J.storage/Float32Array.BYTES_PER_ELEMENT),te.__offset=D,D+=J.storage}}}const U=D%P;return U>0&&(D+=P-U),w.__size=D,w.__cache={},this}function C(w){const B={boundary:0,storage:0};return typeof w=="number"||typeof w=="boolean"?(B.boundary=4,B.storage=4):w.isVector2?(B.boundary=8,B.storage=8):w.isVector3||w.isColor?(B.boundary=16,B.storage=12):w.isVector4?(B.boundary=16,B.storage=16):w.isMatrix3?(B.boundary=48,B.storage=48):w.isMatrix4?(B.boundary=64,B.storage=64):w.isTexture?ct("WebGLRenderer: Texture samplers can not be part of an uniforms group."):ct("WebGLRenderer: Unsupported uniform value type.",w),B}function T(w){const B=w.target;B.removeEventListener("dispose",T);const D=l.indexOf(B.__bindingPointIndex);l.splice(D,1),n.deleteBuffer(a[B.id]),delete a[B.id],delete s[B.id]}function M(){for(const w in a)n.deleteBuffer(a[w]);l=[],a={},s={}}return{bind:d,update:p,dispose:M}}const xH=new Uint16Array([12469,15057,12620,14925,13266,14620,13807,14376,14323,13990,14545,13625,14713,13328,14840,12882,14931,12528,14996,12233,15039,11829,15066,11525,15080,11295,15085,10976,15082,10705,15073,10495,13880,14564,13898,14542,13977,14430,14158,14124,14393,13732,14556,13410,14702,12996,14814,12596,14891,12291,14937,11834,14957,11489,14958,11194,14943,10803,14921,10506,14893,10278,14858,9960,14484,14039,14487,14025,14499,13941,14524,13740,14574,13468,14654,13106,14743,12678,14818,12344,14867,11893,14889,11509,14893,11180,14881,10751,14852,10428,14812,10128,14765,9754,14712,9466,14764,13480,14764,13475,14766,13440,14766,13347,14769,13070,14786,12713,14816,12387,14844,11957,14860,11549,14868,11215,14855,10751,14825,10403,14782,10044,14729,9651,14666,9352,14599,9029,14967,12835,14966,12831,14963,12804,14954,12723,14936,12564,14917,12347,14900,11958,14886,11569,14878,11247,14859,10765,14828,10401,14784,10011,14727,9600,14660,9289,14586,8893,14508,8533,15111,12234,15110,12234,15104,12216,15092,12156,15067,12010,15028,11776,14981,11500,14942,11205,14902,10752,14861,10393,14812,9991,14752,9570,14682,9252,14603,8808,14519,8445,14431,8145,15209,11449,15208,11451,15202,11451,15190,11438,15163,11384,15117,11274,15055,10979,14994,10648,14932,10343,14871,9936,14803,9532,14729,9218,14645,8742,14556,8381,14461,8020,14365,7603,15273,10603,15272,10607,15267,10619,15256,10631,15231,10614,15182,10535,15118,10389,15042,10167,14963,9787,14883,9447,14800,9115,14710,8665,14615,8318,14514,7911,14411,7507,14279,7198,15314,9675,15313,9683,15309,9712,15298,9759,15277,9797,15229,9773,15166,9668,15084,9487,14995,9274,14898,8910,14800,8539,14697,8234,14590,7790,14479,7409,14367,7067,14178,6621,15337,8619,15337,8631,15333,8677,15325,8769,15305,8871,15264,8940,15202,8909,15119,8775,15022,8565,14916,8328,14804,8009,14688,7614,14569,7287,14448,6888,14321,6483,14088,6171,15350,7402,15350,7419,15347,7480,15340,7613,15322,7804,15287,7973,15229,8057,15148,8012,15046,7846,14933,7611,14810,7357,14682,7069,14552,6656,14421,6316,14251,5948,14007,5528,15356,5942,15356,5977,15353,6119,15348,6294,15332,6551,15302,6824,15249,7044,15171,7122,15070,7050,14949,6861,14818,6611,14679,6349,14538,6067,14398,5651,14189,5311,13935,4958,15359,4123,15359,4153,15356,4296,15353,4646,15338,5160,15311,5508,15263,5829,15188,6042,15088,6094,14966,6001,14826,5796,14678,5543,14527,5287,14377,4985,14133,4586,13869,4257,15360,1563,15360,1642,15358,2076,15354,2636,15341,3350,15317,4019,15273,4429,15203,4732,15105,4911,14981,4932,14836,4818,14679,4621,14517,4386,14359,4156,14083,3795,13808,3437,15360,122,15360,137,15358,285,15355,636,15344,1274,15322,2177,15281,2765,15215,3223,15120,3451,14995,3569,14846,3567,14681,3466,14511,3305,14344,3121,14037,2800,13753,2467,15360,0,15360,1,15359,21,15355,89,15346,253,15325,479,15287,796,15225,1148,15133,1492,15008,1749,14856,1882,14685,1886,14506,1783,14324,1608,13996,1398,13702,1183]);let zo=null;function bH(){return zo===null&&(zo=new Qs(xH,16,16,Ju,No),zo.name="DFG_LUT",zo.minFilter=Zn,zo.magFilter=Zn,zo.wrapS=er,zo.wrapT=er,zo.generateMipmaps=!1,zo.needsUpdate=!0),zo}class QR{constructor(e={}){const{canvas:t=AT(),context:i=null,depth:a=!0,stencil:s=!1,alpha:l=!1,antialias:c=!1,premultipliedAlpha:d=!0,preserveDrawingBuffer:p=!1,powerPreference:g="default",failIfMajorPerformanceCaveat:v=!1,reversedDepthBuffer:_=!1,outputBufferType:x=tr}=e;this.isWebGLRenderer=!0;let S;if(i!==null){if(typeof WebGLRenderingContext<"u"&&i instanceof WebGLRenderingContext)throw new Error("THREE.WebGLRenderer: WebGL 1 is not supported since r163.");S=i.getContextAttributes().alpha}else S=l;const C=x,T=new Set([hv,fv,im]),M=new Set([tr,vs,Oh,Nh,lv,cv]),w=new Uint32Array(4),B=new Int32Array(4);let D=null,P=null;const U=[],z=[];let j=null;this.domElement=t,this.debug={checkShaderErrors:!0,onShaderError:null},this.autoClear=!0,this.autoClearColor=!0,this.autoClearDepth=!0,this.autoClearStencil=!0,this.sortObjects=!0,this.clippingPlanes=[],this.localClippingEnabled=!1,this.toneMapping=ms,this.toneMappingExposure=1,this.transmissionResolutionScale=1;const L=this;let F=!1;this._outputColorSpace=Aa;let W=0,te=0,$=null,ae=-1,le=null;const G=new Fn,J=new Fn;let Z=null;const pe=new st(0);let _e=0,q=t.width,ce=t.height,Te=1,De=null,qe=null;const ge=new Fn(0,0,q,ce),Ee=new Fn(0,0,q,ce);let Xe=!1;const tt=new od;let ot=!1,Vt=!1;const en=new It,Et=new K,Ne=new Fn,Ge={background:null,fog:null,environment:null,overrideMaterial:null,isScene:!0};let Ie=!1;function et(){return $===null?Te:1}let Q=i;function Tt(k,ue){return t.getContext(k,ue)}try{const k={alpha:!0,depth:a,stencil:s,antialias:c,premultipliedAlpha:d,preserveDrawingBuffer:p,powerPreference:g,failIfMajorPerformanceCaveat:v};if("setAttribute"in t&&t.setAttribute("data-engine",`three.js r${Zp}`),t.addEventListener("webglcontextlost",Ht,!1),t.addEventListener("webglcontextrestored",bn,!1),t.addEventListener("webglcontextcreationerror",un,!1),Q===null){const ue="webgl2";if(Q=Tt(ue,k),Q===null)throw Tt(ue)?new Error("Error creating WebGL context with your selected attributes."):new Error("Error creating WebGL context.")}}catch(k){throw Dt("WebGLRenderer: "+k.message),k}let Ze,At,Ke,V,I,re,Ae,Be,Re,pt,Qe,gt,wt,Fe,ke,nt,it,Je,Yt,oe,rt,Ye,ft,Ve;function Pe(){Ze=new Az(Q),Ze.init(),Ye=new KR(Q,Ze),At=new dz(Q,Ze,e,Ye),Ke=new fH(Q,Ze),At.reversedDepthBuffer&&_&&Ke.buffers.depth.setReversed(!0),V=new Ez(Q),I=new K4,re=new hH(Q,Ze,Ke,I,At,Ye,V),Ae=new mz(L),Be=new bz(L),Re=new cP(Q),ft=new fz(Q,Re),pt=new Sz(Q,Re,V,ft),Qe=new Cz(Q,pt,Re,V),Yt=new Tz(Q,At,re),nt=new pz(I),gt=new J4(L,Ae,Be,Ze,At,ft,nt),wt=new yH(L,I),Fe=new Z4,ke=new aH(Ze),Je=new uz(L,Ae,Be,Ke,Qe,S,d),it=new cH(L,Qe,At),Ve=new _H(Q,V,At,Ke),oe=new hz(Q,Ze,V),rt=new Mz(Q,Ze,V),V.programs=gt.programs,L.capabilities=At,L.extensions=Ze,L.properties=I,L.renderLists=Fe,L.shadowMap=it,L.state=Ke,L.info=V}Pe(),C!==tr&&(j=new wz(C,t.width,t.height,a,s));const $e=new gH(L,Q);this.xr=$e,this.getContext=function(){return Q},this.getContextAttributes=function(){return Q.getContextAttributes()},this.forceContextLoss=function(){const k=Ze.get("WEBGL_lose_context");k&&k.loseContext()},this.forceContextRestore=function(){const k=Ze.get("WEBGL_lose_context");k&&k.restoreContext()},this.getPixelRatio=function(){return Te},this.setPixelRatio=function(k){k!==void 0&&(Te=k,this.setSize(q,ce,!1))},this.getSize=function(k){return k.set(q,ce)},this.setSize=function(k,ue,Me=!0){if($e.isPresenting){ct("WebGLRenderer: Can't change size while VR device is presenting.");return}q=k,ce=ue,t.width=Math.floor(k*Te),t.height=Math.floor(ue*Te),Me===!0&&(t.style.width=k+"px",t.style.height=ue+"px"),j!==null&&j.setSize(t.width,t.height),this.setViewport(0,0,k,ue)},this.getDrawingBufferSize=function(k){return k.set(q*Te,ce*Te).floor()},this.setDrawingBufferSize=function(k,ue,Me){q=k,ce=ue,Te=Me,t.width=Math.floor(k*Me),t.height=Math.floor(ue*Me),this.setViewport(0,0,k,ue)},this.setEffects=function(k){if(C===tr){console.error("THREE.WebGLRenderer: setEffects() requires outputBufferType set to HalfFloatType or FloatType.");return}if(k){for(let ue=0;ue<k.length;ue++)if(k[ue].isOutputPass===!0){console.warn("THREE.WebGLRenderer: OutputPass is not needed in setEffects(). Tone mapping and color space conversion are applied automatically.");break}}j.setEffects(k||[])},this.getCurrentViewport=function(k){return k.copy(G)},this.getViewport=function(k){return k.copy(ge)},this.setViewport=function(k,ue,Me,xe){k.isVector4?ge.set(k.x,k.y,k.z,k.w):ge.set(k,ue,Me,xe),Ke.viewport(G.copy(ge).multiplyScalar(Te).round())},this.getScissor=function(k){return k.copy(Ee)},this.setScissor=function(k,ue,Me,xe){k.isVector4?Ee.set(k.x,k.y,k.z,k.w):Ee.set(k,ue,Me,xe),Ke.scissor(J.copy(Ee).multiplyScalar(Te).round())},this.getScissorTest=function(){return Xe},this.setScissorTest=function(k){Ke.setScissorTest(Xe=k)},this.setOpaqueSort=function(k){De=k},this.setTransparentSort=function(k){qe=k},this.getClearColor=function(k){return k.copy(Je.getClearColor())},this.setClearColor=function(){Je.setClearColor(...arguments)},this.getClearAlpha=function(){return Je.getClearAlpha()},this.setClearAlpha=function(){Je.setClearAlpha(...arguments)},this.clear=function(k=!0,ue=!0,Me=!0){let xe=0;if(k){let me=!1;if($!==null){const at=$.texture.format;me=T.has(at)}if(me){const at=$.texture.type,vt=M.has(at),lt=Je.getClearColor(),yt=Je.getClearAlpha(),St=lt.r,Ut=lt.g,xt=lt.b;vt?(w[0]=St,w[1]=Ut,w[2]=xt,w[3]=yt,Q.clearBufferuiv(Q.COLOR,0,w)):(B[0]=St,B[1]=Ut,B[2]=xt,B[3]=yt,Q.clearBufferiv(Q.COLOR,0,B))}else xe|=Q.COLOR_BUFFER_BIT}ue&&(xe|=Q.DEPTH_BUFFER_BIT),Me&&(xe|=Q.STENCIL_BUFFER_BIT,this.state.buffers.stencil.setMask(4294967295)),Q.clear(xe)},this.clearColor=function(){this.clear(!0,!1,!1)},this.clearDepth=function(){this.clear(!1,!0,!1)},this.clearStencil=function(){this.clear(!1,!1,!0)},this.dispose=function(){t.removeEventListener("webglcontextlost",Ht,!1),t.removeEventListener("webglcontextrestored",bn,!1),t.removeEventListener("webglcontextcreationerror",un,!1),Je.dispose(),Fe.dispose(),ke.dispose(),I.dispose(),Ae.dispose(),Be.dispose(),Qe.dispose(),ft.dispose(),Ve.dispose(),gt.dispose(),$e.dispose(),$e.removeEventListener("sessionstart",Ql),$e.removeEventListener("sessionend",Pr),Xi.stop()};function Ht(k){k.preventDefault(),hm("WebGLRenderer: Context Lost."),F=!0}function bn(){hm("WebGLRenderer: Context Restored."),F=!1;const k=V.autoReset,ue=it.enabled,Me=it.autoUpdate,xe=it.needsUpdate,me=it.type;Pe(),V.autoReset=k,it.enabled=ue,it.autoUpdate=Me,it.needsUpdate=xe,it.type=me}function un(k){Dt("WebGLRenderer: A WebGL context could not be created. Reason: ",k.statusMessage)}function na(k){const ue=k.target;ue.removeEventListener("dispose",na),Lr(ue)}function Lr(k){Pf(k),I.remove(k)}function Pf(k){const ue=I.get(k).programs;ue!==void 0&&(ue.forEach(function(Me){gt.releaseProgram(Me)}),k.isShaderMaterial&&gt.releaseShaderCache(k))}this.renderBufferDirect=function(k,ue,Me,xe,me,at){ue===null&&(ue=Ge);const vt=me.isMesh&&me.matrixWorld.determinant()<0,lt=so(k,ue,Me,xe,me);Ke.setMaterial(xe,vt);let yt=Me.index,St=1;if(xe.wireframe===!0){if(yt=pt.getWireframeAttribute(Me),yt===void 0)return;St=2}const Ut=Me.drawRange,xt=Me.attributes.position;let Pt=Ut.start*St,wn=(Ut.start+Ut.count)*St;at!==null&&(Pt=Math.max(Pt,at.start*St),wn=Math.min(wn,(at.start+at.count)*St)),yt!==null?(Pt=Math.max(Pt,0),wn=Math.min(wn,yt.count)):xt!=null&&(Pt=Math.max(Pt,0),wn=Math.min(wn,xt.count));const $n=wn-Pt;if($n<0||$n===1/0)return;ft.setup(me,xe,lt,Me,yt);let Xn,Bn=oe;if(yt!==null&&(Xn=Re.get(yt),Bn=rt,Bn.setIndex(Xn)),me.isMesh)xe.wireframe===!0?(Ke.setLineWidth(xe.wireframeLinewidth*et()),Bn.setMode(Q.LINES)):Bn.setMode(Q.TRIANGLES);else if(me.isLine){let Ct=xe.linewidth;Ct===void 0&&(Ct=1),Ke.setLineWidth(Ct*et()),me.isLineSegments?Bn.setMode(Q.LINES):me.isLineLoop?Bn.setMode(Q.LINE_LOOP):Bn.setMode(Q.LINE_STRIP)}else me.isPoints?Bn.setMode(Q.POINTS):me.isSprite&&Bn.setMode(Q.TRIANGLES);if(me.isBatchedMesh)if(me._multiDrawInstances!==null)Fh("WebGLRenderer: renderMultiDrawInstances has been deprecated and will be removed in r184. Append to renderMultiDraw arguments and use indirection."),Bn.renderMultiDrawInstances(me._multiDrawStarts,me._multiDrawCounts,me._multiDrawCount,me._multiDrawInstances);else if(Ze.get("WEBGL_multi_draw"))Bn.renderMultiDraw(me._multiDrawStarts,me._multiDrawCounts,me._multiDrawCount);else{const Ct=me._multiDrawStarts,Cn=me._multiDrawCounts,qt=me._multiDrawCount,ji=yt?Re.get(yt).bytesPerElement:1,Cs=I.get(xe).currentProgram.getUniforms();for(let Yi=0;Yi<qt;Yi++)Cs.setValue(Q,"_gl_DrawID",Yi),Bn.render(Ct[Yi]/ji,Cn[Yi])}else if(me.isInstancedMesh)Bn.renderInstances(Pt,$n,me.count);else if(Me.isInstancedBufferGeometry){const Ct=Me._maxInstanceCount!==void 0?Me._maxInstanceCount:1/0,Cn=Math.min(Me.instanceCount,Ct);Bn.renderInstances(Pt,$n,Cn)}else Bn.render(Pt,$n)};function Kl(k,ue,Me){k.transparent===!0&&k.side===qs&&k.forceSinglePass===!1?(k.side=$a,k.needsUpdate=!0,$l(k,ue,Me),k.side=Bo,k.needsUpdate=!0,$l(k,ue,Me),k.side=qs):$l(k,ue,Me)}this.compile=function(k,ue,Me=null){Me===null&&(Me=k),P=ke.get(Me),P.init(ue),z.push(P),Me.traverseVisible(function(me){me.isLight&&me.layers.test(ue.layers)&&(P.pushLight(me),me.castShadow&&P.pushShadow(me))}),k!==Me&&k.traverseVisible(function(me){me.isLight&&me.layers.test(ue.layers)&&(P.pushLight(me),me.castShadow&&P.pushShadow(me))}),P.setupLights();const xe=new Set;return k.traverse(function(me){if(!(me.isMesh||me.isPoints||me.isLine||me.isSprite))return;const at=me.material;if(at)if(Array.isArray(at))for(let vt=0;vt<at.length;vt++){const lt=at[vt];Kl(lt,Me,me),xe.add(lt)}else Kl(at,Me,me),xe.add(at)}),P=z.pop(),xe},this.compileAsync=function(k,ue,Me=null){const xe=this.compile(k,ue,Me);return new Promise(me=>{function at(){if(xe.forEach(function(vt){I.get(vt).currentProgram.isReady()&&xe.delete(vt)}),xe.size===0){me(k);return}setTimeout(at,10)}Ze.get("KHR_parallel_shader_compile")!==null?at():setTimeout(at,10)})};let Yo=null;function Ir(k){Yo&&Yo(k)}function Ql(){Xi.stop()}function Pr(){Xi.start()}const Xi=new SR;Xi.setAnimationLoop(Ir),typeof self<"u"&&Xi.setContext(self),this.setAnimationLoop=function(k){Yo=k,$e.setAnimationLoop(k),k===null?Xi.stop():Xi.start()},$e.addEventListener("sessionstart",Ql),$e.addEventListener("sessionend",Pr),this.render=function(k,ue){if(ue!==void 0&&ue.isCamera!==!0){Dt("WebGLRenderer.render: camera is not an instance of THREE.Camera.");return}if(F===!0)return;const Me=$e.enabled===!0&&$e.isPresenting===!0,xe=j!==null&&($===null||Me)&&j.begin(L,$);if(k.matrixWorldAutoUpdate===!0&&k.updateMatrixWorld(),ue.parent===null&&ue.matrixWorldAutoUpdate===!0&&ue.updateMatrixWorld(),$e.enabled===!0&&$e.isPresenting===!0&&(j===null||j.isCompositing()===!1)&&($e.cameraAutoUpdate===!0&&$e.updateCamera(ue),ue=$e.getCamera()),k.isScene===!0&&k.onBeforeRender(L,k,ue,$),P=ke.get(k,z.length),P.init(ue),z.push(P),en.multiplyMatrices(ue.projectionMatrix,ue.matrixWorldInverse),tt.setFromProjectionMatrix(en,qr,ue.reversedDepth),Vt=this.localClippingEnabled,ot=nt.init(this.clippingPlanes,Vt),D=Fe.get(k,U.length),D.init(),U.push(D),$e.enabled===!0&&$e.isPresenting===!0){const vt=L.xr.getDepthSensingMesh();vt!==null&&Ma(vt,ue,-1/0,L.sortObjects)}Ma(k,ue,0,L.sortObjects),D.finish(),L.sortObjects===!0&&D.sort(De,qe),Ie=$e.enabled===!1||$e.isPresenting===!1||$e.hasDepthSensing()===!1,Ie&&Je.addToRenderList(D,k),this.info.render.frame++,ot===!0&&nt.beginShadows();const me=P.state.shadowsArray;if(it.render(me,k,ue),ot===!0&&nt.endShadows(),this.info.autoReset===!0&&this.info.reset(),(xe&&j.hasRenderPass())===!1){const vt=D.opaque,lt=D.transmissive;if(P.setupLights(),ue.isArrayCamera){const yt=ue.cameras;if(lt.length>0)for(let St=0,Ut=yt.length;St<Ut;St++){const xt=yt[St];Fi(vt,lt,k,xt)}Ie&&Je.render(k);for(let St=0,Ut=yt.length;St<Ut;St++){const xt=yt[St];rn(D,k,xt,xt.viewport)}}else lt.length>0&&Fi(vt,lt,k,ue),Ie&&Je.render(k),rn(D,k,ue)}$!==null&&te===0&&(re.updateMultisampleRenderTarget($),re.updateRenderTargetMipmap($)),xe&&j.end(L),k.isScene===!0&&k.onAfterRender(L,k,ue),ft.resetDefaultState(),ae=-1,le=null,z.pop(),z.length>0?(P=z[z.length-1],ot===!0&&nt.setGlobalState(L.clippingPlanes,P.state.camera)):P=null,U.pop(),U.length>0?D=U[U.length-1]:D=null};function Ma(k,ue,Me,xe){if(k.visible===!1)return;if(k.layers.test(ue.layers)){if(k.isGroup)Me=k.renderOrder;else if(k.isLOD)k.autoUpdate===!0&&k.update(ue);else if(k.isLight)P.pushLight(k),k.castShadow&&P.pushShadow(k);else if(k.isSprite){if(!k.frustumCulled||tt.intersectsSprite(k)){xe&&Ne.setFromMatrixPosition(k.matrixWorld).applyMatrix4(en);const vt=Qe.update(k),lt=k.material;lt.visible&&D.push(k,vt,lt,Me,Ne.z,null)}}else if((k.isMesh||k.isLine||k.isPoints)&&(!k.frustumCulled||tt.intersectsObject(k))){const vt=Qe.update(k),lt=k.material;if(xe&&(k.boundingSphere!==void 0?(k.boundingSphere===null&&k.computeBoundingSphere(),Ne.copy(k.boundingSphere.center)):(vt.boundingSphere===null&&vt.computeBoundingSphere(),Ne.copy(vt.boundingSphere.center)),Ne.applyMatrix4(k.matrixWorld).applyMatrix4(en)),Array.isArray(lt)){const yt=vt.groups;for(let St=0,Ut=yt.length;St<Ut;St++){const xt=yt[St],Pt=lt[xt.materialIndex];Pt&&Pt.visible&&D.push(k,vt,Pt,Me,Ne.z,xt)}}else lt.visible&&D.push(k,vt,lt,Me,Ne.z,null)}}const at=k.children;for(let vt=0,lt=at.length;vt<lt;vt++)Ma(at[vt],ue,Me,xe)}function rn(k,ue,Me,xe){const{opaque:me,transmissive:at,transparent:vt}=k;P.setupLightsView(Me),ot===!0&&nt.setGlobalState(L.clippingPlanes,Me),xe&&Ke.viewport(G.copy(xe)),me.length>0&&ur(me,ue,Me),at.length>0&&ur(at,ue,Me),vt.length>0&&ur(vt,ue,Me),Ke.buffers.depth.setTest(!0),Ke.buffers.depth.setMask(!0),Ke.buffers.color.setMask(!0),Ke.setPolygonOffset(!1)}function Fi(k,ue,Me,xe){if((Me.isScene===!0?Me.overrideMaterial:null)!==null)return;if(P.state.transmissionRenderTarget[xe.id]===void 0){const Pt=Ze.has("EXT_color_buffer_half_float")||Ze.has("EXT_color_buffer_float");P.state.transmissionRenderTarget[xe.id]=new Jr(1,1,{generateMipmaps:!0,type:Pt?No:tr,minFilter:gs,samples:At.samples,stencilBuffer:s,resolveDepthBuffer:!1,resolveStencilBuffer:!1,colorSpace:vn.workingColorSpace})}const at=P.state.transmissionRenderTarget[xe.id],vt=xe.viewport||G;at.setSize(vt.z*L.transmissionResolutionScale,vt.w*L.transmissionResolutionScale);const lt=L.getRenderTarget(),yt=L.getActiveCubeFace(),St=L.getActiveMipmapLevel();L.setRenderTarget(at),L.getClearColor(pe),_e=L.getClearAlpha(),_e<1&&L.setClearColor(16777215,.5),L.clear(),Ie&&Je.render(Me);const Ut=L.toneMapping;L.toneMapping=ms;const xt=xe.viewport;if(xe.viewport!==void 0&&(xe.viewport=void 0),P.setupLightsView(xe),ot===!0&&nt.setGlobalState(L.clippingPlanes,xe),ur(k,Me,xe),re.updateMultisampleRenderTarget(at),re.updateRenderTargetMipmap(at),Ze.has("WEBGL_multisampled_render_to_texture")===!1){let Pt=!1;for(let wn=0,$n=ue.length;wn<$n;wn++){const Xn=ue[wn],{object:Bn,geometry:Ct,material:Cn,group:qt}=Xn;if(Cn.side===qs&&Bn.layers.test(xe.layers)){const ji=Cn.side;Cn.side=$a,Cn.needsUpdate=!0,Zl(Bn,Me,xe,Ct,Cn,qt),Cn.side=ji,Cn.needsUpdate=!0,Pt=!0}}Pt===!0&&(re.updateMultisampleRenderTarget(at),re.updateRenderTargetMipmap(at))}L.setRenderTarget(lt,yt,St),L.setClearColor(pe,_e),xt!==void 0&&(xe.viewport=xt),L.toneMapping=Ut}function ur(k,ue,Me){const xe=ue.isScene===!0?ue.overrideMaterial:null;for(let me=0,at=k.length;me<at;me++){const vt=k[me],{object:lt,geometry:yt,group:St}=vt;let Ut=vt.material;Ut.allowOverride===!0&&xe!==null&&(Ut=xe),lt.layers.test(Me.layers)&&Zl(lt,ue,Me,yt,Ut,St)}}function Zl(k,ue,Me,xe,me,at){k.onBeforeRender(L,ue,Me,xe,me,at),k.modelViewMatrix.multiplyMatrices(Me.matrixWorldInverse,k.matrixWorld),k.normalMatrix.getNormalMatrix(k.modelViewMatrix),me.onBeforeRender(L,ue,Me,xe,k,at),me.transparent===!0&&me.side===qs&&me.forceSinglePass===!1?(me.side=$a,me.needsUpdate=!0,L.renderBufferDirect(Me,ue,xe,me,k,at),me.side=Bo,me.needsUpdate=!0,L.renderBufferDirect(Me,ue,xe,me,k,at),me.side=qs):L.renderBufferDirect(Me,ue,xe,me,k,at),k.onAfterRender(L,ue,Me,xe,me,at)}function $l(k,ue,Me){ue.isScene!==!0&&(ue=Ge);const xe=I.get(k),me=P.state.lights,at=P.state.shadowsArray,vt=me.state.version,lt=gt.getParameters(k,me.state,at,ue,Me),yt=gt.getProgramCacheKey(lt);let St=xe.programs;xe.environment=k.isMeshStandardMaterial?ue.environment:null,xe.fog=ue.fog,xe.envMap=(k.isMeshStandardMaterial?Be:Ae).get(k.envMap||xe.environment),xe.envMapRotation=xe.environment!==null&&k.envMap===null?ue.environmentRotation:k.envMapRotation,St===void 0&&(k.addEventListener("dispose",na),St=new Map,xe.programs=St);let Ut=St.get(yt);if(Ut!==void 0){if(xe.currentProgram===Ut&&xe.lightsStateVersion===vt)return ec(k,lt),Ut}else lt.uniforms=gt.getUniforms(k),k.onBeforeCompile(lt,L),Ut=gt.acquireProgram(lt,yt),St.set(yt,Ut),xe.uniforms=lt.uniforms;const xt=xe.uniforms;return(!k.isShaderMaterial&&!k.isRawShaderMaterial||k.clipping===!0)&&(xt.clippingPlanes=nt.uniform),ec(k,lt),xe.needsLights=_i(k),xe.lightsStateVersion=vt,xe.needsLights&&(xt.ambientLightColor.value=me.state.ambient,xt.lightProbe.value=me.state.probe,xt.directionalLights.value=me.state.directional,xt.directionalLightShadows.value=me.state.directionalShadow,xt.spotLights.value=me.state.spot,xt.spotLightShadows.value=me.state.spotShadow,xt.rectAreaLights.value=me.state.rectArea,xt.ltc_1.value=me.state.rectAreaLTC1,xt.ltc_2.value=me.state.rectAreaLTC2,xt.pointLights.value=me.state.point,xt.pointLightShadows.value=me.state.pointShadow,xt.hemisphereLights.value=me.state.hemi,xt.directionalShadowMap.value=me.state.directionalShadowMap,xt.directionalShadowMatrix.value=me.state.directionalShadowMatrix,xt.spotShadowMap.value=me.state.spotShadowMap,xt.spotLightMatrix.value=me.state.spotLightMatrix,xt.spotLightMap.value=me.state.spotLightMap,xt.pointShadowMap.value=me.state.pointShadowMap,xt.pointShadowMatrix.value=me.state.pointShadowMatrix),xe.currentProgram=Ut,xe.uniformsList=null,Ut}function Xd(k){if(k.uniformsList===null){const ue=k.currentProgram.getUniforms();k.uniformsList=m_.seqWithValue(ue.seq,k.uniforms)}return k.uniformsList}function ec(k,ue){const Me=I.get(k);Me.outputColorSpace=ue.outputColorSpace,Me.batching=ue.batching,Me.batchingColor=ue.batchingColor,Me.instancing=ue.instancing,Me.instancingColor=ue.instancingColor,Me.instancingMorph=ue.instancingMorph,Me.skinning=ue.skinning,Me.morphTargets=ue.morphTargets,Me.morphNormals=ue.morphNormals,Me.morphColors=ue.morphColors,Me.morphTargetsCount=ue.morphTargetsCount,Me.numClippingPlanes=ue.numClippingPlanes,Me.numIntersection=ue.numClipIntersection,Me.vertexAlphas=ue.vertexAlphas,Me.vertexTangents=ue.vertexTangents,Me.toneMapping=ue.toneMapping}function so(k,ue,Me,xe,me){ue.isScene!==!0&&(ue=Ge),re.resetTextureUnits();const at=ue.fog,vt=xe.isMeshStandardMaterial?ue.environment:null,lt=$===null?L.outputColorSpace:$.isXRRenderTarget===!0?$.texture.colorSpace:Ic,yt=(xe.isMeshStandardMaterial?Be:Ae).get(xe.envMap||vt),St=xe.vertexColors===!0&&!!Me.attributes.color&&Me.attributes.color.itemSize===4,Ut=!!Me.attributes.tangent&&(!!xe.normalMap||xe.anisotropy>0),xt=!!Me.morphAttributes.position,Pt=!!Me.morphAttributes.normal,wn=!!Me.morphAttributes.color;let $n=ms;xe.toneMapped&&($===null||$.isXRRenderTarget===!0)&&($n=L.toneMapping);const Xn=Me.morphAttributes.position||Me.morphAttributes.normal||Me.morphAttributes.color,Bn=Xn!==void 0?Xn.length:0,Ct=I.get(xe),Cn=P.state.lights;if(ot===!0&&(Vt===!0||k!==le)){const wi=k===le&&xe.id===ae;nt.setState(xe,k,wi)}let qt=!1;xe.version===Ct.__version?(Ct.needsLights&&Ct.lightsStateVersion!==Cn.state.version||Ct.outputColorSpace!==lt||me.isBatchedMesh&&Ct.batching===!1||!me.isBatchedMesh&&Ct.batching===!0||me.isBatchedMesh&&Ct.batchingColor===!0&&me.colorTexture===null||me.isBatchedMesh&&Ct.batchingColor===!1&&me.colorTexture!==null||me.isInstancedMesh&&Ct.instancing===!1||!me.isInstancedMesh&&Ct.instancing===!0||me.isSkinnedMesh&&Ct.skinning===!1||!me.isSkinnedMesh&&Ct.skinning===!0||me.isInstancedMesh&&Ct.instancingColor===!0&&me.instanceColor===null||me.isInstancedMesh&&Ct.instancingColor===!1&&me.instanceColor!==null||me.isInstancedMesh&&Ct.instancingMorph===!0&&me.morphTexture===null||me.isInstancedMesh&&Ct.instancingMorph===!1&&me.morphTexture!==null||Ct.envMap!==yt||xe.fog===!0&&Ct.fog!==at||Ct.numClippingPlanes!==void 0&&(Ct.numClippingPlanes!==nt.numPlanes||Ct.numIntersection!==nt.numIntersection)||Ct.vertexAlphas!==St||Ct.vertexTangents!==Ut||Ct.morphTargets!==xt||Ct.morphNormals!==Pt||Ct.morphColors!==wn||Ct.toneMapping!==$n||Ct.morphTargetsCount!==Bn)&&(qt=!0):(qt=!0,Ct.__version=xe.version);let ji=Ct.currentProgram;qt===!0&&(ji=$l(xe,ue,me));let Cs=!1,Yi=!1,Fr=!1;const On=ji.getUniforms(),ci=Ct.uniforms;if(Ke.useProgram(ji.program)&&(Cs=!0,Yi=!0,Fr=!0),xe.id!==ae&&(ae=xe.id,Yi=!0),Cs||le!==k){Ke.buffers.depth.getReversed()&&k.reversedDepth!==!0&&(k._reversedDepth=!0,k.updateProjectionMatrix()),On.setValue(Q,"projectionMatrix",k.projectionMatrix),On.setValue(Q,"viewMatrix",k.matrixWorldInverse);const Bi=On.map.cameraPosition;Bi!==void 0&&Bi.setValue(Q,Et.setFromMatrixPosition(k.matrixWorld)),At.logarithmicDepthBuffer&&On.setValue(Q,"logDepthBufFC",2/(Math.log(k.far+1)/Math.LN2)),(xe.isMeshPhongMaterial||xe.isMeshToonMaterial||xe.isMeshLambertMaterial||xe.isMeshBasicMaterial||xe.isMeshStandardMaterial||xe.isShaderMaterial)&&On.setValue(Q,"isOrthographic",k.isOrthographicCamera===!0),le!==k&&(le=k,Yi=!0,Fr=!0)}if(Ct.needsLights&&(Cn.state.directionalShadowMap.length>0&&On.setValue(Q,"directionalShadowMap",Cn.state.directionalShadowMap,re),Cn.state.spotShadowMap.length>0&&On.setValue(Q,"spotShadowMap",Cn.state.spotShadowMap,re),Cn.state.pointShadowMap.length>0&&On.setValue(Q,"pointShadowMap",Cn.state.pointShadowMap,re)),me.isSkinnedMesh){On.setOptional(Q,me,"bindMatrix"),On.setOptional(Q,me,"bindMatrixInverse");const wi=me.skeleton;wi&&(wi.boneTexture===null&&wi.computeBoneTexture(),On.setValue(Q,"boneTexture",wi.boneTexture,re))}me.isBatchedMesh&&(On.setOptional(Q,me,"batchingTexture"),On.setValue(Q,"batchingTexture",me._matricesTexture,re),On.setOptional(Q,me,"batchingIdTexture"),On.setValue(Q,"batchingIdTexture",me._indirectTexture,re),On.setOptional(Q,me,"batchingColorTexture"),me._colorsTexture!==null&&On.setValue(Q,"batchingColorTexture",me._colorsTexture,re));const Ri=Me.morphAttributes;if((Ri.position!==void 0||Ri.normal!==void 0||Ri.color!==void 0)&&Yt.update(me,Me,ji),(Yi||Ct.receiveShadow!==me.receiveShadow)&&(Ct.receiveShadow=me.receiveShadow,On.setValue(Q,"receiveShadow",me.receiveShadow)),xe.isMeshGouraudMaterial&&xe.envMap!==null&&(ci.envMap.value=yt,ci.flipEnvMap.value=yt.isCubeTexture&&yt.isRenderTargetTexture===!1?-1:1),xe.isMeshStandardMaterial&&xe.envMap===null&&ue.environment!==null&&(ci.envMapIntensity.value=ue.environmentIntensity),ci.dfgLUT!==void 0&&(ci.dfgLUT.value=bH()),Yi&&(On.setValue(Q,"toneMappingExposure",L.toneMappingExposure),Ct.needsLights&&tc(ci,Fr),at&&xe.fog===!0&&wt.refreshFogUniforms(ci,at),wt.refreshMaterialUniforms(ci,xe,Te,ce,P.state.transmissionRenderTarget[k.id]),m_.upload(Q,Xd(Ct),ci,re)),xe.isShaderMaterial&&xe.uniformsNeedUpdate===!0&&(m_.upload(Q,Xd(Ct),ci,re),xe.uniformsNeedUpdate=!1),xe.isSpriteMaterial&&On.setValue(Q,"center",me.center),On.setValue(Q,"modelViewMatrix",me.modelViewMatrix),On.setValue(Q,"normalMatrix",me.normalMatrix),On.setValue(Q,"modelMatrix",me.matrixWorld),xe.isShaderMaterial||xe.isRawShaderMaterial){const wi=xe.uniformsGroups;for(let Bi=0,nc=wi.length;Bi<nc;Bi++){const fr=wi[Bi];Ve.update(fr,ji),Ve.bind(fr,ji)}}return ji}function tc(k,ue){k.ambientLightColor.needsUpdate=ue,k.lightProbe.needsUpdate=ue,k.directionalLights.needsUpdate=ue,k.directionalLightShadows.needsUpdate=ue,k.pointLights.needsUpdate=ue,k.pointLightShadows.needsUpdate=ue,k.spotLights.needsUpdate=ue,k.spotLightShadows.needsUpdate=ue,k.rectAreaLights.needsUpdate=ue,k.hemisphereLights.needsUpdate=ue}function _i(k){return k.isMeshLambertMaterial||k.isMeshToonMaterial||k.isMeshPhongMaterial||k.isMeshStandardMaterial||k.isShadowMaterial||k.isShaderMaterial&&k.lights===!0}this.getActiveCubeFace=function(){return W},this.getActiveMipmapLevel=function(){return te},this.getRenderTarget=function(){return $},this.setRenderTargetTextures=function(k,ue,Me){const xe=I.get(k);xe.__autoAllocateDepthBuffer=k.resolveDepthBuffer===!1,xe.__autoAllocateDepthBuffer===!1&&(xe.__useRenderToTexture=!1),I.get(k.texture).__webglTexture=ue,I.get(k.depthTexture).__webglTexture=xe.__autoAllocateDepthBuffer?void 0:Me,xe.__hasExternalTextures=!0},this.setRenderTargetFramebuffer=function(k,ue){const Me=I.get(k);Me.__webglFramebuffer=ue,Me.__useDefaultFramebuffer=ue===void 0};const kn=Q.createFramebuffer();this.setRenderTarget=function(k,ue=0,Me=0){$=k,W=ue,te=Me;let xe=null,me=!1,at=!1;if(k){const lt=I.get(k);if(lt.__useDefaultFramebuffer!==void 0){Ke.bindFramebuffer(Q.FRAMEBUFFER,lt.__webglFramebuffer),G.copy(k.viewport),J.copy(k.scissor),Z=k.scissorTest,Ke.viewport(G),Ke.scissor(J),Ke.setScissorTest(Z),ae=-1;return}else if(lt.__webglFramebuffer===void 0)re.setupRenderTarget(k);else if(lt.__hasExternalTextures)re.rebindTextures(k,I.get(k.texture).__webglTexture,I.get(k.depthTexture).__webglTexture);else if(k.depthBuffer){const Ut=k.depthTexture;if(lt.__boundDepthTexture!==Ut){if(Ut!==null&&I.has(Ut)&&(k.width!==Ut.image.width||k.height!==Ut.image.height))throw new Error("WebGLRenderTarget: Attached DepthTexture is initialized to the incorrect size.");re.setupDepthRenderbuffer(k)}}const yt=k.texture;(yt.isData3DTexture||yt.isDataArrayTexture||yt.isCompressedArrayTexture)&&(at=!0);const St=I.get(k).__webglFramebuffer;k.isWebGLCubeRenderTarget?(Array.isArray(St[ue])?xe=St[ue][Me]:xe=St[ue],me=!0):k.samples>0&&re.useMultisampledRTT(k)===!1?xe=I.get(k).__webglMultisampledFramebuffer:Array.isArray(St)?xe=St[Me]:xe=St,G.copy(k.viewport),J.copy(k.scissor),Z=k.scissorTest}else G.copy(ge).multiplyScalar(Te).floor(),J.copy(Ee).multiplyScalar(Te).floor(),Z=Xe;if(Me!==0&&(xe=kn),Ke.bindFramebuffer(Q.FRAMEBUFFER,xe)&&Ke.drawBuffers(k,xe),Ke.viewport(G),Ke.scissor(J),Ke.setScissorTest(Z),me){const lt=I.get(k.texture);Q.framebufferTexture2D(Q.FRAMEBUFFER,Q.COLOR_ATTACHMENT0,Q.TEXTURE_CUBE_MAP_POSITIVE_X+ue,lt.__webglTexture,Me)}else if(at){const lt=ue;for(let yt=0;yt<k.textures.length;yt++){const St=I.get(k.textures[yt]);Q.framebufferTextureLayer(Q.FRAMEBUFFER,Q.COLOR_ATTACHMENT0+yt,St.__webglTexture,Me,lt)}}else if(k!==null&&Me!==0){const lt=I.get(k.texture);Q.framebufferTexture2D(Q.FRAMEBUFFER,Q.COLOR_ATTACHMENT0,Q.TEXTURE_2D,lt.__webglTexture,Me)}ae=-1},this.readRenderTargetPixels=function(k,ue,Me,xe,me,at,vt,lt=0){if(!(k&&k.isWebGLRenderTarget)){Dt("WebGLRenderer.readRenderTargetPixels: renderTarget is not THREE.WebGLRenderTarget.");return}let yt=I.get(k).__webglFramebuffer;if(k.isWebGLCubeRenderTarget&&vt!==void 0&&(yt=yt[vt]),yt){Ke.bindFramebuffer(Q.FRAMEBUFFER,yt);try{const St=k.textures[lt],Ut=St.format,xt=St.type;if(!At.textureFormatReadable(Ut)){Dt("WebGLRenderer.readRenderTargetPixels: renderTarget is not in RGBA or implementation defined format.");return}if(!At.textureTypeReadable(xt)){Dt("WebGLRenderer.readRenderTargetPixels: renderTarget is not in UnsignedByteType or implementation defined type.");return}ue>=0&&ue<=k.width-xe&&Me>=0&&Me<=k.height-me&&(k.textures.length>1&&Q.readBuffer(Q.COLOR_ATTACHMENT0+lt),Q.readPixels(ue,Me,xe,me,Ye.convert(Ut),Ye.convert(xt),at))}finally{const St=$!==null?I.get($).__webglFramebuffer:null;Ke.bindFramebuffer(Q.FRAMEBUFFER,St)}}},this.readRenderTargetPixelsAsync=async function(k,ue,Me,xe,me,at,vt,lt=0){if(!(k&&k.isWebGLRenderTarget))throw new Error("THREE.WebGLRenderer.readRenderTargetPixels: renderTarget is not THREE.WebGLRenderTarget.");let yt=I.get(k).__webglFramebuffer;if(k.isWebGLCubeRenderTarget&&vt!==void 0&&(yt=yt[vt]),yt)if(ue>=0&&ue<=k.width-xe&&Me>=0&&Me<=k.height-me){Ke.bindFramebuffer(Q.FRAMEBUFFER,yt);const St=k.textures[lt],Ut=St.format,xt=St.type;if(!At.textureFormatReadable(Ut))throw new Error("THREE.WebGLRenderer.readRenderTargetPixelsAsync: renderTarget is not in RGBA or implementation defined format.");if(!At.textureTypeReadable(xt))throw new Error("THREE.WebGLRenderer.readRenderTargetPixelsAsync: renderTarget is not in UnsignedByteType or implementation defined type.");const Pt=Q.createBuffer();Q.bindBuffer(Q.PIXEL_PACK_BUFFER,Pt),Q.bufferData(Q.PIXEL_PACK_BUFFER,at.byteLength,Q.STREAM_READ),k.textures.length>1&&Q.readBuffer(Q.COLOR_ATTACHMENT0+lt),Q.readPixels(ue,Me,xe,me,Ye.convert(Ut),Ye.convert(xt),0);const wn=$!==null?I.get($).__webglFramebuffer:null;Ke.bindFramebuffer(Q.FRAMEBUFFER,wn);const $n=Q.fenceSync(Q.SYNC_GPU_COMMANDS_COMPLETE,0);return Q.flush(),await pU(Q,$n,4),Q.bindBuffer(Q.PIXEL_PACK_BUFFER,Pt),Q.getBufferSubData(Q.PIXEL_PACK_BUFFER,0,at),Q.deleteBuffer(Pt),Q.deleteSync($n),at}else throw new Error("THREE.WebGLRenderer.readRenderTargetPixelsAsync: requested read bounds are out of range.")},this.copyFramebufferToTexture=function(k,ue=null,Me=0){const xe=Math.pow(2,-Me),me=Math.floor(k.image.width*xe),at=Math.floor(k.image.height*xe),vt=ue!==null?ue.x:0,lt=ue!==null?ue.y:0;re.setTexture2D(k,0),Q.copyTexSubImage2D(Q.TEXTURE_2D,Me,0,0,vt,lt,me,at),Ke.unbindTexture()};const ns=Q.createFramebuffer(),is=Q.createFramebuffer();this.copyTextureToTexture=function(k,ue,Me=null,xe=null,me=0,at=null){at===null&&(me!==0?(Fh("WebGLRenderer: copyTextureToTexture function signature has changed to support src and dst mipmap levels."),at=me,me=0):at=0);let vt,lt,yt,St,Ut,xt,Pt,wn,$n;const Xn=k.isCompressedTexture?k.mipmaps[at]:k.image;if(Me!==null)vt=Me.max.x-Me.min.x,lt=Me.max.y-Me.min.y,yt=Me.isBox3?Me.max.z-Me.min.z:1,St=Me.min.x,Ut=Me.min.y,xt=Me.isBox3?Me.min.z:0;else{const Ri=Math.pow(2,-me);vt=Math.floor(Xn.width*Ri),lt=Math.floor(Xn.height*Ri),k.isDataArrayTexture?yt=Xn.depth:k.isData3DTexture?yt=Math.floor(Xn.depth*Ri):yt=1,St=0,Ut=0,xt=0}xe!==null?(Pt=xe.x,wn=xe.y,$n=xe.z):(Pt=0,wn=0,$n=0);const Bn=Ye.convert(ue.format),Ct=Ye.convert(ue.type);let Cn;ue.isData3DTexture?(re.setTexture3D(ue,0),Cn=Q.TEXTURE_3D):ue.isDataArrayTexture||ue.isCompressedArrayTexture?(re.setTexture2DArray(ue,0),Cn=Q.TEXTURE_2D_ARRAY):(re.setTexture2D(ue,0),Cn=Q.TEXTURE_2D),Q.pixelStorei(Q.UNPACK_FLIP_Y_WEBGL,ue.flipY),Q.pixelStorei(Q.UNPACK_PREMULTIPLY_ALPHA_WEBGL,ue.premultiplyAlpha),Q.pixelStorei(Q.UNPACK_ALIGNMENT,ue.unpackAlignment);const qt=Q.getParameter(Q.UNPACK_ROW_LENGTH),ji=Q.getParameter(Q.UNPACK_IMAGE_HEIGHT),Cs=Q.getParameter(Q.UNPACK_SKIP_PIXELS),Yi=Q.getParameter(Q.UNPACK_SKIP_ROWS),Fr=Q.getParameter(Q.UNPACK_SKIP_IMAGES);Q.pixelStorei(Q.UNPACK_ROW_LENGTH,Xn.width),Q.pixelStorei(Q.UNPACK_IMAGE_HEIGHT,Xn.height),Q.pixelStorei(Q.UNPACK_SKIP_PIXELS,St),Q.pixelStorei(Q.UNPACK_SKIP_ROWS,Ut),Q.pixelStorei(Q.UNPACK_SKIP_IMAGES,xt);const On=k.isDataArrayTexture||k.isData3DTexture,ci=ue.isDataArrayTexture||ue.isData3DTexture;if(k.isDepthTexture){const Ri=I.get(k),wi=I.get(ue),Bi=I.get(Ri.__renderTarget),nc=I.get(wi.__renderTarget);Ke.bindFramebuffer(Q.READ_FRAMEBUFFER,Bi.__webglFramebuffer),Ke.bindFramebuffer(Q.DRAW_FRAMEBUFFER,nc.__webglFramebuffer);for(let fr=0;fr<yt;fr++)On&&(Q.framebufferTextureLayer(Q.READ_FRAMEBUFFER,Q.COLOR_ATTACHMENT0,I.get(k).__webglTexture,me,xt+fr),Q.framebufferTextureLayer(Q.DRAW_FRAMEBUFFER,Q.COLOR_ATTACHMENT0,I.get(ue).__webglTexture,at,$n+fr)),Q.blitFramebuffer(St,Ut,vt,lt,Pt,wn,vt,lt,Q.DEPTH_BUFFER_BIT,Q.NEAREST);Ke.bindFramebuffer(Q.READ_FRAMEBUFFER,null),Ke.bindFramebuffer(Q.DRAW_FRAMEBUFFER,null)}else if(me!==0||k.isRenderTargetTexture||I.has(k)){const Ri=I.get(k),wi=I.get(ue);Ke.bindFramebuffer(Q.READ_FRAMEBUFFER,ns),Ke.bindFramebuffer(Q.DRAW_FRAMEBUFFER,is);for(let Bi=0;Bi<yt;Bi++)On?Q.framebufferTextureLayer(Q.READ_FRAMEBUFFER,Q.COLOR_ATTACHMENT0,Ri.__webglTexture,me,xt+Bi):Q.framebufferTexture2D(Q.READ_FRAMEBUFFER,Q.COLOR_ATTACHMENT0,Q.TEXTURE_2D,Ri.__webglTexture,me),ci?Q.framebufferTextureLayer(Q.DRAW_FRAMEBUFFER,Q.COLOR_ATTACHMENT0,wi.__webglTexture,at,$n+Bi):Q.framebufferTexture2D(Q.DRAW_FRAMEBUFFER,Q.COLOR_ATTACHMENT0,Q.TEXTURE_2D,wi.__webglTexture,at),me!==0?Q.blitFramebuffer(St,Ut,vt,lt,Pt,wn,vt,lt,Q.COLOR_BUFFER_BIT,Q.NEAREST):ci?Q.copyTexSubImage3D(Cn,at,Pt,wn,$n+Bi,St,Ut,vt,lt):Q.copyTexSubImage2D(Cn,at,Pt,wn,St,Ut,vt,lt);Ke.bindFramebuffer(Q.READ_FRAMEBUFFER,null),Ke.bindFramebuffer(Q.DRAW_FRAMEBUFFER,null)}else ci?k.isDataTexture||k.isData3DTexture?Q.texSubImage3D(Cn,at,Pt,wn,$n,vt,lt,yt,Bn,Ct,Xn.data):ue.isCompressedArrayTexture?Q.compressedTexSubImage3D(Cn,at,Pt,wn,$n,vt,lt,yt,Bn,Xn.data):Q.texSubImage3D(Cn,at,Pt,wn,$n,vt,lt,yt,Bn,Ct,Xn):k.isDataTexture?Q.texSubImage2D(Q.TEXTURE_2D,at,Pt,wn,vt,lt,Bn,Ct,Xn.data):k.isCompressedTexture?Q.compressedTexSubImage2D(Q.TEXTURE_2D,at,Pt,wn,Xn.width,Xn.height,Bn,Xn.data):Q.texSubImage2D(Q.TEXTURE_2D,at,Pt,wn,vt,lt,Bn,Ct,Xn);Q.pixelStorei(Q.UNPACK_ROW_LENGTH,qt),Q.pixelStorei(Q.UNPACK_IMAGE_HEIGHT,ji),Q.pixelStorei(Q.UNPACK_SKIP_PIXELS,Cs),Q.pixelStorei(Q.UNPACK_SKIP_ROWS,Yi),Q.pixelStorei(Q.UNPACK_SKIP_IMAGES,Fr),at===0&&ue.generateMipmaps&&Q.generateMipmap(Cn),Ke.unbindTexture()},this.initRenderTarget=function(k){I.get(k).__webglFramebuffer===void 0&&re.setupRenderTarget(k)},this.initTexture=function(k){k.isCubeTexture?re.setTextureCube(k,0):k.isData3DTexture?re.setTexture3D(k,0):k.isDataArrayTexture||k.isCompressedArrayTexture?re.setTexture2DArray(k,0):re.setTexture2D(k,0),Ke.unbindTexture()},this.resetState=function(){W=0,te=0,$=null,Ke.reset(),ft.reset()},typeof __THREE_DEVTOOLS__<"u"&&__THREE_DEVTOOLS__.dispatchEvent(new CustomEvent("observe",{detail:this}))}get coordinateSystem(){return qr}get outputColorSpace(){return this._outputColorSpace}set outputColorSpace(e){this._outputColorSpace=e;const t=this.getContext();t.drawingBufferColorSpace=vn._getDrawingBufferColorSpace(e),t.unpackColorSpace=vn._getUnpackColorSpace()}}const AH=Object.freeze(Object.defineProperty({__proto__:null,ACESFilmicToneMapping:av,AddEquation:Dc,AddOperation:sT,AdditiveAnimationBlendMode:eA,AdditiveBlending:Fb,AgXToneMapping:jb,AlphaFormat:Zb,AlwaysCompare:_T,AlwaysDepth:Z0,AlwaysStencilFunc:nA,AmbientLight:WC,AnimationAction:lR,AnimationClip:hd,AnimationLoader:iI,AnimationMixer:cR,AnimationObjectGroup:RI,AnimationUtils:$L,ArcCurve:yC,ArrayCamera:aR,ArrowHelper:eP,AttachedBindMode:qb,Audio:rR,AudioAnalyser:yI,AudioContext:vS,AudioListener:mI,AudioLoader:hI,AxesHelper:tP,BackSide:$a,BasicDepthPacking:hT,BasicShadowMap:HE,BatchedMesh:lC,Bone:Sy,BooleanKeyframeTrack:hf,Box2:FI,Box3:Sa,Box3Helper:ZI,BoxGeometry:af,BoxHelper:QI,BufferAttribute:Rn,BufferGeometry:Jt,BufferGeometryLoader:ZC,ByteType:Wb,Cache:Fo,Camera:py,CameraHelper:KI,CanvasTexture:AL,CapsuleGeometry:Py,CatmullRomCurve3:_C,CineonToneMapping:kb,CircleGeometry:Fy,ClampToEdgeWrapping:er,Clock:yS,Color:st,ColorKeyframeTrack:lS,ColorManagement:vn,CompressedArrayTexture:xL,CompressedCubeTexture:bL,CompressedTexture:Iy,CompressedTextureLoader:aI,ConeGeometry:Bm,ConstantAlphaFactor:iT,ConstantColorFactor:tT,Controls:iP,CubeCamera:jT,CubeDepthTexture:gC,CubeReflectionMapping:Oo,CubeRefractionMapping:Oc,CubeTexture:_m,CubeTextureLoader:rI,CubeUVReflectionMapping:wh,CubicBezierCurve:JA,CubicBezierCurve3:bC,CubicInterpolant:VC,CullFaceBack:Pb,CullFaceFront:zE,CullFaceFrontBack:CN,CullFaceNone:FE,Curve:$s,CurvePath:SC,CustomBlending:GE,CustomToneMapping:Xb,CylinderGeometry:wm,Cylindrical:PI,Data3DTexture:Qv,DataArrayTexture:Kv,DataTexture:Qs,DataTextureLoader:sI,DataUtils:jU,DecrementStencilOp:VN,DecrementWrapStencilOp:XN,DefaultLoadingManager:dd,DepthFormat:Uo,DepthStencilFormat:Uc,DepthTexture:ld,DetachedBindMode:oT,DirectionalLight:pS,DirectionalLightHelper:JI,DiscreteInterpolant:kC,DodecahedronGeometry:zy,DoubleSide:qs,DstAlphaFactor:KE,DstColorFactor:ZE,DynamicCopyUsage:rU,DynamicDrawUsage:$N,DynamicReadUsage:nU,EdgesGeometry:vC,EllipseCurve:ky,EqualCompare:gT,EqualDepth:ev,EqualStencilFunc:WN,EquirectangularReflectionMapping:tm,EquirectangularRefractionMapping:nm,Euler:wr,EventDispatcher:Lo,ExternalTexture:kA,ExtrudeGeometry:Jy,FileLoader:$r,Float16BufferAttribute:ZU,Float32BufferAttribute:_t,FloatType:nr,Fog:vy,FogExp2:gy,FramebufferTexture:_L,FrontSide:Bo,Frustum:od,FrustumArray:Ty,GLBufferAttribute:UI,GLSL1:oU,GLSL3:iA,GreaterCompare:vT,GreaterDepth:nv,GreaterEqualCompare:Jv,GreaterEqualDepth:tv,GreaterEqualStencilFunc:ZN,GreaterStencilFunc:KN,GridHelper:qI,Group:Ll,HalfFloatType:No,HemisphereLight:jC,HemisphereLightHelper:YI,IcosahedronGeometry:Ky,ImageBitmapLoader:tR,ImageLoader:Hm,ImageUtils:RT,IncrementStencilOp:GN,IncrementWrapStencilOp:kN,InstancedBufferAttribute:rf,InstancedBufferGeometry:QC,InstancedInterleavedBuffer:NI,InstancedMesh:LA,Int16BufferAttribute:KU,Int32BufferAttribute:QU,Int8BufferAttribute:qU,IntType:ov,InterleavedBuffer:xm,InterleavedBufferAttribute:jc,Interpolant:fd,InterpolateDiscrete:Uh,InterpolateLinear:Lh,InterpolateSmooth:jv,InterpolationSamplingMode:uU,InterpolationSamplingType:cU,InvertStencilOp:jN,KeepStencilOp:Zu,KeyframeTrack:bs,LOD:QT,LatheGeometry:Qy,Layers:qh,LessCompare:mT,LessDepth:$0,LessEqualCompare:Wv,LessEqualDepth:qu,LessEqualStencilFunc:JN,LessStencilFunc:qN,Light:Wc,LightProbe:KC,Line:Il,Line3:GI,LineBasicMaterial:Fa,LineCurve:KA,LineCurve3:AC,LineDashedMaterial:HC,LineLoop:HA,LineSegments:Zs,LinearFilter:Zn,LinearInterpolant:oS,LinearMipMapLinearFilter:DN,LinearMipMapNearestFilter:BN,LinearMipmapLinearFilter:gs,LinearMipmapNearestFilter:Dh,LinearSRGBColorSpace:Ic,LinearToneMapping:Gb,LinearTransfer:cm,Loader:za,LoaderUtils:Jc,LoadingManager:cS,LoopOnce:lT,LoopPingPong:uT,LoopRepeat:cT,MOUSE:EN,Material:Li,MaterialLoader:a_,MathUtils:Cl,Matrix2:MS,Matrix3:Zt,Matrix4:It,MaxEquation:jE,Mesh:Ii,MeshBasicMaterial:Qr,MeshDepthMaterial:iS,MeshDistanceMaterial:aS,MeshLambertMaterial:FC,MeshMatcapMaterial:zC,MeshNormalMaterial:PC,MeshPhongMaterial:LC,MeshPhysicalMaterial:xs,MeshStandardMaterial:zm,MeshToonMaterial:IC,MinEquation:XE,MirroredRepeatWrapping:Bh,MixOperation:rT,MultiplyBlending:Hb,MultiplyOperation:em,NearestFilter:Ei,NearestMipMapLinearFilter:wN,NearestMipMapNearestFilter:RN,NearestMipmapLinearFilter:Wu,NearestMipmapNearestFilter:sv,NeutralToneMapping:Yb,NeverCompare:pT,NeverDepth:Q0,NeverStencilFunc:YN,NoBlending:Do,NoColorSpace:Tl,NoNormalPacking:IN,NoToneMapping:ms,NormalAnimationBlendMode:Yv,NormalBlending:Yu,NormalGAPacking:FN,NormalRGPacking:PN,NotEqualCompare:yT,NotEqualDepth:iv,NotEqualStencilFunc:QN,NumberKeyframeTrack:df,Object3D:dn,ObjectLoader:uI,ObjectSpaceNormalMap:dT,OctahedronGeometry:Pm,OneFactor:qE,OneMinusConstantAlphaFactor:aT,OneMinusConstantColorFactor:nT,OneMinusDstAlphaFactor:QE,OneMinusDstColorFactor:$E,OneMinusSrcAlphaFactor:K0,OneMinusSrcColorFactor:JE,OrthographicCamera:vf,PCFShadowMap:Rh,PCFSoftShadowMap:$p,PMREMGenerator:NS,Path:Yy,PerspectiveCamera:Zi,Plane:Yc,PlaneGeometry:ud,PlaneHelper:$I,PointLight:dS,PointLightHelper:XI,Points:VA,PointsMaterial:Ny,PolarGridHelper:WI,PolyhedronGeometry:qc,PositionalAudio:vI,PropertyBinding:Tn,PropertyMixer:oR,QuadraticBezierCurve:QA,QuadraticBezierCurve3:ZA,Quaternion:Ui,QuaternionKeyframeTrack:pf,QuaternionLinearInterpolant:XC,R11_EAC_Format:xv,RED_GREEN_RGTC2_Format:kv,RED_RGTC1_Format:Gv,REVISION:Zp,RG11_EAC_Format:Av,RGBADepthPacking:NN,RGBAFormat:Ua,RGBAIntegerFormat:hv,RGBA_ASTC_10x10_Format:Lv,RGBA_ASTC_10x5_Format:Ov,RGBA_ASTC_10x6_Format:Nv,RGBA_ASTC_10x8_Format:Uv,RGBA_ASTC_12x10_Format:Iv,RGBA_ASTC_12x12_Format:Pv,RGBA_ASTC_4x4_Format:Mv,RGBA_ASTC_5x4_Format:Ev,RGBA_ASTC_5x5_Format:Tv,RGBA_ASTC_6x5_Format:Cv,RGBA_ASTC_6x6_Format:Rv,RGBA_ASTC_8x5_Format:wv,RGBA_ASTC_8x6_Format:Bv,RGBA_ASTC_8x8_Format:Dv,RGBA_BPTC_Format:Fv,RGBA_ETC2_EAC_Format:_v,RGBA_PVRTC_2BPPV1_Format:gv,RGBA_PVRTC_4BPPV1_Format:mv,RGBA_S3TC_DXT1_Format:rm,RGBA_S3TC_DXT3_Format:sm,RGBA_S3TC_DXT5_Format:om,RGBDepthPacking:UN,RGBFormat:$b,RGBIntegerFormat:ON,RGB_BPTC_SIGNED_Format:zv,RGB_BPTC_UNSIGNED_Format:Hv,RGB_ETC1_Format:vv,RGB_ETC2_Format:yv,RGB_PVRTC_2BPPV1_Format:pv,RGB_PVRTC_4BPPV1_Format:dv,RGB_S3TC_DXT1_Format:am,RGDepthPacking:LN,RGFormat:Ju,RGIntegerFormat:fv,RawShaderMaterial:nS,Ray:jh,Raycaster:fR,RectAreaLight:JC,RedFormat:uv,RedIntegerFormat:im,ReinhardToneMapping:Vb,RenderTarget:cA,RenderTarget3D:BI,RepeatWrapping:Nc,ReplaceStencilOp:HN,ReverseSubtractEquation:kE,RingGeometry:Zy,SIGNED_R11_EAC_Format:bv,SIGNED_RED_GREEN_RGTC2_Format:Xv,SIGNED_RED_RGTC1_Format:Vv,SIGNED_RG11_EAC_Format:Sv,SRGBColorSpace:Aa,SRGBTransfer:Hn,Scene:wA,ShaderChunk:sn,ShaderLib:to,ShaderMaterial:_s,ShadowMaterial:UC,Shape:cf,ShapeGeometry:$y,ShapePath:nP,ShapeUtils:eo,ShortType:Jb,Skeleton:Mm,SkeletonHelper:kI,SkinnedMesh:UA,Source:Fc,Sphere:ua,SphereGeometry:Fm,Spherical:dR,SphericalHarmonics3:mS,SplineCurve:$A,SpotLight:hS,SpotLightHelper:VI,Sprite:JT,SpriteMaterial:BA,SrcAlphaFactor:J0,SrcAlphaSaturateFactor:eT,SrcColorFactor:WE,StaticCopyUsage:aU,StaticDrawUsage:um,StaticReadUsage:tU,StereoCamera:dI,StreamCopyUsage:sU,StreamDrawUsage:eU,StreamReadUsage:iU,StringKeyframeTrack:mf,SubtractEquation:VE,SubtractiveBlending:zb,TOUCH:TN,TangentSpaceNormalMap:Lc,TetrahedronGeometry:e_,Texture:ai,TextureLoader:Gm,TextureUtils:lP,Timer:LI,TimestampQuery:lU,TorusGeometry:t_,TorusKnotGeometry:n_,Triangle:Br,TriangleFanDrawMode:qv,TriangleStripDrawMode:tA,TrianglesDrawMode:fT,TubeGeometry:i_,UVMapping:rv,Uint16BufferAttribute:MA,Uint32BufferAttribute:EA,Uint8BufferAttribute:WU,Uint8ClampedBufferAttribute:JU,Uniform:AS,UniformsGroup:OI,UniformsLib:ut,UniformsUtils:VT,UnsignedByteType:tr,UnsignedInt101111Type:Qb,UnsignedInt248Type:Nh,UnsignedInt5999Type:Kb,UnsignedIntType:vs,UnsignedShort4444Type:lv,UnsignedShort5551Type:cv,UnsignedShortType:Oh,VSMShadowMap:ju,Vector2:He,Vector3:K,Vector4:Fn,VectorKeyframeTrack:gf,VideoFrameTexture:yL,VideoTexture:mC,WebGL3DRenderTarget:LU,WebGLArrayRenderTarget:UU,WebGLCoordinateSystem:qr,WebGLCubeRenderTarget:RA,WebGLRenderTarget:Jr,WebGLRenderer:QR,WebGLUtils:KR,WebGPUCoordinateSystem:Ih,WebXRController:my,WireframeGeometry:DC,WrapAroundEnding:lm,ZeroCurvatureEnding:Ku,ZeroFactor:YE,ZeroSlopeEnding:Qu,ZeroStencilOp:zN,createCanvasElement:AT,error:Dt,getConsoleFunction:dU,log:hm,setConsoleFunction:hU,warn:ct,warnOnce:Fh},Symbol.toStringTag,{value:"Module"}));var FS={exports:{}},zS={},HS={exports:{}},GS={};var ZR;function SH(){if(ZR)return GS;ZR=1;var n=Ch();function e(v,_){return v===_&&(v!==0||1/v===1/_)||v!==v&&_!==_}var t=typeof Object.is=="function"?Object.is:e,i=n.useState,a=n.useEffect,s=n.useLayoutEffect,l=n.useDebugValue;function c(v,_){var x=_(),S=i({inst:{value:x,getSnapshot:_}}),C=S[0].inst,T=S[1];return s(function(){C.value=x,C.getSnapshot=_,d(C)&&T({inst:C})},[v,x,_]),a(function(){return d(C)&&T({inst:C}),v(function(){d(C)&&T({inst:C})})},[v]),l(x),x}function d(v){var _=v.getSnapshot;v=v.value;try{var x=_();return!t(v,x)}catch{return!0}}function p(v,_){return _()}var g=typeof window>"u"||typeof window.document>"u"||typeof window.document.createElement>"u"?p:c;return GS.useSyncExternalStore=n.useSyncExternalStore!==void 0?n.useSyncExternalStore:g,GS}var $R;function MH(){return $R||($R=1,HS.exports=SH()),HS.exports}var e2;function EH(){if(e2)return zS;e2=1;var n=Ch(),e=MH();function t(p,g){return p===g&&(p!==0||1/p===1/g)||p!==p&&g!==g}var i=typeof Object.is=="function"?Object.is:t,a=e.useSyncExternalStore,s=n.useRef,l=n.useEffect,c=n.useMemo,d=n.useDebugValue;return zS.useSyncExternalStoreWithSelector=function(p,g,v,_,x){var S=s(null);if(S.current===null){var C={hasValue:!1,value:null};S.current=C}else C=S.current;S=c(function(){function M(U){if(!w){if(w=!0,B=U,U=_(U),x!==void 0&&C.hasValue){var z=C.value;if(x(z,U))return D=z}return D=U}if(z=D,i(B,U))return z;var j=_(U);return x!==void 0&&x(z,j)?(B=U,z):(B=U,D=j)}var w=!1,B,D,P=v===void 0?null:v;return[function(){return M(g())},P===null?void 0:function(){return M(P())}]},[g,v,_,x]);var T=a(p,S[0],S[1]);return l(function(){C.hasValue=!0,C.value=T},[T]),d(T),T},zS}var t2;function TH(){return t2||(t2=1,FS.exports=EH()),FS.exports}var CH=TH();const RH=Xu(CH),n2=n=>{let e;const t=new Set,i=(p,g)=>{const v=typeof p=="function"?p(e):p;if(!Object.is(v,e)){const _=e;e=g??(typeof v!="object"||v===null)?v:Object.assign({},e,v),t.forEach(x=>x(e,_))}},a=()=>e,c={setState:i,getState:a,getInitialState:()=>d,subscribe:p=>(t.add(p),()=>t.delete(p))},d=e=n(i,a,c);return c},i2=(n=>n?n2(n):n2),{useSyncExternalStoreWithSelector:wH}=RH,BH=n=>n;function DH(n,e=BH,t){const i=wH(n.subscribe,n.getState,n.getInitialState,e,t);return ee.useDebugValue(i),i}const a2=(n,e)=>{const t=i2(n),i=(a,s=e)=>DH(t,a,s);return Object.assign(i,t),i},OH=((n,e)=>n?a2(n,e):a2),NH=n=>typeof n=="object"&&typeof n.then=="function",Cf=[];function r2(n,e,t=(i,a)=>i===a){if(n===e)return!0;if(!n||!e)return!1;const i=n.length;if(e.length!==i)return!1;for(let a=0;a<i;a++)if(!t(n[a],e[a]))return!1;return!0}function s2(n,e=null,t=!1,i={}){e===null&&(e=[n]);for(const s of Cf)if(r2(e,s.keys,s.equal)){if(t)return;if(Object.prototype.hasOwnProperty.call(s,"error"))throw s.error;if(Object.prototype.hasOwnProperty.call(s,"response"))return i.lifespan&&i.lifespan>0&&(s.timeout&&clearTimeout(s.timeout),s.timeout=setTimeout(s.remove,i.lifespan)),s.response;if(!t)throw s.promise}const a={keys:e,equal:i.equal,remove:()=>{const s=Cf.indexOf(a);s!==-1&&Cf.splice(s,1)},promise:(NH(n)?n:n(...e)).then(s=>{a.response=s,i.lifespan&&i.lifespan>0&&(a.timeout=setTimeout(a.remove,i.lifespan))}).catch(s=>a.error=s)};if(Cf.push(a),!t)throw a.promise}const UH=(n,e,t)=>s2(n,e,!1,t),LH=(n,e,t)=>{s2(n,e,!0,t)},IH=n=>{if(n===void 0||n.length===0)Cf.splice(0,Cf.length);else{const e=Cf.find(t=>r2(n,t.keys,t.equal));e&&e.remove()}};var VS={exports:{}},kS={exports:{}},XS={exports:{}},jS={};var o2;function PH(){return o2||(o2=1,(function(n){function e(G,J){var Z=G.length;G.push(J);e:for(;0<Z;){var pe=Z-1>>>1,_e=G[pe];if(0<a(_e,J))G[pe]=J,G[Z]=_e,Z=pe;else break e}}function t(G){return G.length===0?null:G[0]}function i(G){if(G.length===0)return null;var J=G[0],Z=G.pop();if(Z!==J){G[0]=Z;e:for(var pe=0,_e=G.length,q=_e>>>1;pe<q;){var ce=2*(pe+1)-1,Te=G[ce],De=ce+1,qe=G[De];if(0>a(Te,Z))De<_e&&0>a(qe,Te)?(G[pe]=qe,G[De]=Z,pe=De):(G[pe]=Te,G[ce]=Z,pe=ce);else if(De<_e&&0>a(qe,Z))G[pe]=qe,G[De]=Z,pe=De;else break e}}return J}function a(G,J){var Z=G.sortIndex-J.sortIndex;return Z!==0?Z:G.id-J.id}if(n.unstable_now=void 0,typeof performance=="object"&&typeof performance.now=="function"){var s=performance;n.unstable_now=function(){return s.now()}}else{var l=Date,c=l.now();n.unstable_now=function(){return l.now()-c}}var d=[],p=[],g=1,v=null,_=3,x=!1,S=!1,C=!1,T=typeof setTimeout=="function"?setTimeout:null,M=typeof clearTimeout=="function"?clearTimeout:null,w=typeof setImmediate<"u"?setImmediate:null;function B(G){for(var J=t(p);J!==null;){if(J.callback===null)i(p);else if(J.startTime<=G)i(p),J.sortIndex=J.expirationTime,e(d,J);else break;J=t(p)}}function D(G){if(C=!1,B(G),!S)if(t(d)!==null)S=!0,ae();else{var J=t(p);J!==null&&le(D,J.startTime-G)}}var P=!1,U=-1,z=5,j=-1;function L(){return!(n.unstable_now()-j<z)}function F(){if(P){var G=n.unstable_now();j=G;var J=!0;try{e:{S=!1,C&&(C=!1,M(U),U=-1),x=!0;var Z=_;try{t:{for(B(G),v=t(d);v!==null&&!(v.expirationTime>G&&L());){var pe=v.callback;if(typeof pe=="function"){v.callback=null,_=v.priorityLevel;var _e=pe(v.expirationTime<=G);if(G=n.unstable_now(),typeof _e=="function"){v.callback=_e,B(G),J=!0;break t}v===t(d)&&i(d),B(G)}else i(d);v=t(d)}if(v!==null)J=!0;else{var q=t(p);q!==null&&le(D,q.startTime-G),J=!1}}break e}finally{v=null,_=Z,x=!1}J=void 0}}finally{J?W():P=!1}}}var W;if(typeof w=="function")W=function(){w(F)};else if(typeof MessageChannel<"u"){var te=new MessageChannel,$=te.port2;te.port1.onmessage=F,W=function(){$.postMessage(null)}}else W=function(){T(F,0)};function ae(){P||(P=!0,W())}function le(G,J){U=T(function(){G(n.unstable_now())},J)}n.unstable_IdlePriority=5,n.unstable_ImmediatePriority=1,n.unstable_LowPriority=4,n.unstable_NormalPriority=3,n.unstable_Profiling=null,n.unstable_UserBlockingPriority=2,n.unstable_cancelCallback=function(G){G.callback=null},n.unstable_continueExecution=function(){S||x||(S=!0,ae())},n.unstable_forceFrameRate=function(G){0>G||125<G?console.error("forceFrameRate takes a positive int between 0 and 125, forcing frame rates higher than 125 fps is not supported"):z=0<G?Math.floor(1e3/G):5},n.unstable_getCurrentPriorityLevel=function(){return _},n.unstable_getFirstCallbackNode=function(){return t(d)},n.unstable_next=function(G){switch(_){case 1:case 2:case 3:var J=3;break;default:J=_}var Z=_;_=J;try{return G()}finally{_=Z}},n.unstable_pauseExecution=function(){},n.unstable_requestPaint=function(){},n.unstable_runWithPriority=function(G,J){switch(G){case 1:case 2:case 3:case 4:case 5:break;default:G=3}var Z=_;_=G;try{return J()}finally{_=Z}},n.unstable_scheduleCallback=function(G,J,Z){var pe=n.unstable_now();switch(typeof Z=="object"&&Z!==null?(Z=Z.delay,Z=typeof Z=="number"&&0<Z?pe+Z:pe):Z=pe,G){case 1:var _e=-1;break;case 2:_e=250;break;case 5:_e=1073741823;break;case 4:_e=1e4;break;default:_e=5e3}return _e=Z+_e,G={id:g++,callback:J,priorityLevel:G,startTime:Z,expirationTime:_e,sortIndex:-1},Z>pe?(G.sortIndex=Z,e(p,G),t(d)===null&&G===t(p)&&(C?(M(U),U=-1):C=!0,le(D,Z-pe))):(G.sortIndex=_e,e(d,G),S||x||(S=!0,ae())),G},n.unstable_shouldYield=L,n.unstable_wrapCallback=function(G){var J=_;return function(){var Z=_;_=J;try{return G.apply(this,arguments)}finally{_=Z}}}})(jS)),jS}var l2;function c2(){return l2||(l2=1,XS.exports=PH()),XS.exports}var u2;function FH(){return u2||(u2=1,(function(n){n.exports=function(e){function t(u,f,y,A){return new Jg(u,f,y,A)}function i(){}function a(u){var f="https://react.dev/errors/"+u;if(1<arguments.length){f+="?args[]="+encodeURIComponent(arguments[1]);for(var y=2;y<arguments.length;y++)f+="&args[]="+encodeURIComponent(arguments[y])}return"Minified React error #"+u+"; visit "+f+" for the full message or use the non-minified dev environment for full errors and additional helpful warnings."}function s(u){return u===null||typeof u!="object"?null:(u=n0&&u[n0]||u["@@iterator"],typeof u=="function"?u:null)}function l(u){if(u==null)return null;if(typeof u=="function")return u.$$typeof===gc?null:u.displayName||u.name||null;if(typeof u=="string")return u;switch(u){case bu:return"Fragment";case os:return"Portal";case t0:return"Profiler";case e0:return"StrictMode";case gp:return"Suspense";case fl:return"SuspenseList"}if(typeof u=="object")switch(u.$$typeof){case Ls:return(u.displayName||"Context")+".Provider";case ul:return(u._context.displayName||"Context")+".Consumer";case Au:var f=u.render;return u=u.displayName,u||(u=f.displayName||f.name||"",u=u!==""?"ForwardRef("+u+")":"ForwardRef"),u;case ih:return f=u.displayName||null,f!==null?f:l(u.type)||"Memo";case ls:f=u._payload,u=u._init;try{return l(u(f))}catch{}}return null}function c(u){if(vp===void 0)try{throw Error()}catch(y){var f=y.stack.trim().match(/\n( *(at )?)/);vp=f&&f[1]||"",i0=-1<y.stack.indexOf(`
    at`)?" (<anonymous>)":-1<y.stack.indexOf("@")?"@unknown:0:0":""}return`
`+vp+u+i0}function d(u,f){if(!u||hl)return"";hl=!0;var y=Error.prepareStackTrace;Error.prepareStackTrace=void 0;try{var A={DetermineComponentFrameRoot:function(){try{if(f){var ht=function(){throw Error()};if(Object.defineProperty(ht.prototype,"props",{set:function(){throw Error()}}),typeof Reflect=="object"&&Reflect.construct){try{Reflect.construct(ht,[])}catch(Wt){var mt=Wt}Reflect.construct(u,[],ht)}else{try{ht.call()}catch(Wt){mt=Wt}u.call(ht.prototype)}}else{try{throw Error()}catch(Wt){mt=Wt}(ht=u())&&typeof ht.catch=="function"&&ht.catch(function(){})}}catch(Wt){if(Wt&&mt&&typeof Wt.stack=="string")return[Wt.stack,mt.stack]}return[null,null]}};A.DetermineComponentFrameRoot.displayName="DetermineComponentFrameRoot";var R=Object.getOwnPropertyDescriptor(A.DetermineComponentFrameRoot,"name");R&&R.configurable&&Object.defineProperty(A.DetermineComponentFrameRoot,"name",{value:"DetermineComponentFrameRoot"});var O=A.DetermineComponentFrameRoot(),Y=O[0],ne=O[1];if(Y&&ne){var de=Y.split(`
`),Ue=ne.split(`
`);for(R=A=0;A<de.length&&!de[A].includes("DetermineComponentFrameRoot");)A++;for(;R<Ue.length&&!Ue[R].includes("DetermineComponentFrameRoot");)R++;if(A===de.length||R===Ue.length)for(A=de.length-1,R=Ue.length-1;1<=A&&0<=R&&de[A]!==Ue[R];)R--;for(;1<=A&&0<=R;A--,R--)if(de[A]!==Ue[R]){if(A!==1||R!==1)do if(A--,R--,0>R||de[A]!==Ue[R]){var We=`
`+de[A].replace(" at new "," at ");return u.displayName&&We.includes("<anonymous>")&&(We=We.replace("<anonymous>",u.displayName)),We}while(1<=A&&0<=R);break}}}finally{hl=!1,Error.prepareStackTrace=y}return(y=u?u.displayName||u.name:"")?c(y):""}function p(u){switch(u.tag){case 26:case 27:case 5:return c(u.type);case 16:return c("Lazy");case 13:return c("Suspense");case 19:return c("SuspenseList");case 0:case 15:return u=d(u.type,!1),u;case 11:return u=d(u.type.render,!1),u;case 1:return u=d(u.type,!0),u;default:return""}}function g(u){try{var f="";do f+=p(u),u=u.return;while(u);return f}catch(y){return`
Error generating stack: `+y.message+`
`+y.stack}}function v(u){var f=u,y=u;if(u.alternate)for(;f.return;)f=f.return;else{u=f;do f=u,(f.flags&4098)!==0&&(y=f.return),u=f.return;while(u)}return f.tag===3?y:null}function _(u){if(v(u)!==u)throw Error(a(188))}function x(u){var f=u.alternate;if(!f){if(f=v(u),f===null)throw Error(a(188));return f!==u?null:u}for(var y=u,A=f;;){var R=y.return;if(R===null)break;var O=R.alternate;if(O===null){if(A=R.return,A!==null){y=A;continue}break}if(R.child===O.child){for(O=R.child;O;){if(O===y)return _(R),u;if(O===A)return _(R),f;O=O.sibling}throw Error(a(188))}if(y.return!==A.return)y=R,A=O;else{for(var Y=!1,ne=R.child;ne;){if(ne===y){Y=!0,y=R,A=O;break}if(ne===A){Y=!0,A=R,y=O;break}ne=ne.sibling}if(!Y){for(ne=O.child;ne;){if(ne===y){Y=!0,y=O,A=R;break}if(ne===A){Y=!0,A=O,y=R;break}ne=ne.sibling}if(!Y)throw Error(a(189))}}if(y.alternate!==A)throw Error(a(190))}if(y.tag!==3)throw Error(a(188));return y.stateNode.current===y?u:f}function S(u){var f=u.tag;if(f===5||f===26||f===27||f===6)return u;for(u=u.child;u!==null;){if(f=S(u),f!==null)return f;u=u.sibling}return null}function C(u){var f=u.tag;if(f===5||f===26||f===27||f===6)return u;for(u=u.child;u!==null;){if(u.tag!==4&&(f=C(u),f!==null))return f;u=u.sibling}return null}function T(u){return{current:u}}function M(u){0>bo||(u.current=hh[bo],hh[bo]=null,bo--)}function w(u,f){bo++,hh[bo]=u.current,u.current=f}function B(u){return u>>>=0,u===0?32:31-(dh(u)/ib|0)|0}function D(u){var f=u&42;if(f!==0)return f;switch(u&-u){case 1:return 1;case 2:return 2;case 4:return 4;case 8:return 8;case 16:return 16;case 32:return 32;case 64:return 64;case 128:case 256:case 512:case 1024:case 2048:case 4096:case 8192:case 16384:case 32768:case 65536:case 131072:case 262144:case 524288:case 1048576:case 2097152:return u&4194176;case 4194304:case 8388608:case 16777216:case 33554432:return u&62914560;case 67108864:return 67108864;case 134217728:return 134217728;case 268435456:return 268435456;case 536870912:return 536870912;case 1073741824:return 0;default:return u}}function P(u,f){var y=u.pendingLanes;if(y===0)return 0;var A=0,R=u.suspendedLanes,O=u.pingedLanes,Y=u.warmLanes;u=u.finishedLanes!==0;var ne=y&134217727;return ne!==0?(y=ne&~R,y!==0?A=D(y):(O&=ne,O!==0?A=D(O):u||(Y=ne&~Y,Y!==0&&(A=D(Y))))):(ne=y&~R,ne!==0?A=D(ne):O!==0?A=D(O):u||(Y=y&~Y,Y!==0&&(A=D(Y)))),A===0?0:f!==0&&f!==A&&(f&R)===0&&(R=A&-A,Y=f&-f,R>=Y||R===32&&(Y&4194176)!==0)?f:A}function U(u,f){return(u.pendingLanes&~(u.suspendedLanes&~u.pingedLanes)&f)===0}function z(u,f){switch(u){case 1:case 2:case 4:case 8:return f+250;case 16:case 32:case 64:case 128:case 256:case 512:case 1024:case 2048:case 4096:case 8192:case 16384:case 32768:case 65536:case 131072:case 262144:case 524288:case 1048576:case 2097152:return f+5e3;case 4194304:case 8388608:case 16777216:case 33554432:return-1;case 67108864:case 134217728:case 268435456:case 536870912:case 1073741824:return-1;default:return-1}}function j(){var u=Tu;return Tu<<=1,(Tu&4194176)===0&&(Tu=128),u}function L(){var u=ph;return ph<<=1,(ph&62914560)===0&&(ph=4194304),u}function F(u){for(var f=[],y=0;31>y;y++)f.push(u);return f}function W(u,f){u.pendingLanes|=f,f!==268435456&&(u.suspendedLanes=0,u.pingedLanes=0,u.warmLanes=0)}function te(u,f,y,A,R,O){var Y=u.pendingLanes;u.pendingLanes=y,u.suspendedLanes=0,u.pingedLanes=0,u.warmLanes=0,u.expiredLanes&=y,u.entangledLanes&=y,u.errorRecoveryDisabledLanes&=y,u.shellSuspendCounter=0;var ne=u.entanglements,de=u.expirationTimes,Ue=u.hiddenUpdates;for(y=Y&~y;0<y;){var We=31-Ya(y),ht=1<<We;ne[We]=0,de[We]=-1;var mt=Ue[We];if(mt!==null)for(Ue[We]=null,We=0;We<mt.length;We++){var Wt=mt[We];Wt!==null&&(Wt.lane&=-536870913)}y&=~ht}A!==0&&$(u,A,0),O!==0&&R===0&&u.tag!==0&&(u.suspendedLanes|=O&~(Y&~f))}function $(u,f,y){u.pendingLanes|=f,u.suspendedLanes&=~f;var A=31-Ya(f);u.entangledLanes|=f,u.entanglements[A]=u.entanglements[A]|1073741824|y&4194218}function ae(u,f){var y=u.entangledLanes|=f;for(u=u.entanglements;y;){var A=31-Ya(y),R=1<<A;R&f|u[A]&f&&(u[A]|=f),y&=~R}}function le(u){return u&=-u,2<u?8<u?(u&134217727)!==0?32:268435456:8:2}function G(u){if(qa&&typeof qa.onCommitFiberRoot=="function")try{qa.onCommitFiberRoot(Ru,u,void 0,(u.current.flags&128)===128)}catch{}}function J(u){if(typeof ob=="function"&&U0(u),qa&&typeof qa.setStrictMode=="function")try{qa.setStrictMode(Ru,u)}catch{}}function Z(u,f){return u===f&&(u!==0||1/u===1/f)||u!==u&&f!==f}function pe(u,f){if(typeof u=="object"&&u!==null){var y=Up.get(u);return y!==void 0?y:(f={value:u,source:f,stack:g(f)},Up.set(u,f),f)}return{value:u,source:f,stack:g(f)}}function _e(u,f){ni[hi++]=vh,ni[hi++]=gh,gh=u,vh=f}function q(u,f,y){_r[xr++]=Hs,_r[xr++]=Gr,_r[xr++]=cs,cs=u;var A=Hs;u=Gr;var R=32-Ya(A)-1;A&=~(1<<R),y+=1;var O=32-Ya(f)+R;if(30<O){var Y=R-R%5;O=(A&(1<<Y)-1).toString(32),A>>=Y,R-=Y,Hs=1<<32-Ya(f)+R|y<<R|A,Gr=O+u}else Hs=1<<O|y<<R|A,Gr=u}function ce(u){u.return!==null&&(_e(u,1),q(u,1,0))}function Te(u){for(;u===gh;)gh=ni[--hi],ni[hi]=null,vh=ni[--hi],ni[hi]=null;for(;u===cs;)cs=_r[--xr],_r[xr]=null,Gr=_r[--xr],_r[xr]=null,Hs=_r[--xr],_r[xr]=null}function De(u,f){w(us,f),w(yh,u),w(Qi,null),u=vc(f),M(Qi),w(Qi,u)}function qe(){M(Qi),M(yh),M(us)}function ge(u){u.memoizedState!==null&&w(wu,u);var f=Qi.current,y=Ix(f,u.type);f!==y&&(w(yh,u),w(Qi,y))}function Ee(u){yh.current===u&&(M(Qi),M(yh)),wu.current===u&&(M(wu),Ps?kt._currentValue=ja:kt._currentValue2=ja)}function Xe(u){var f=Error(a(418,""));throw Et(pe(f,u)),_h}function tt(u,f){if(!Ra)throw Error(a(175));WM(u.stateNode,u.type,u.memoizedProps,f,u)||Xe(u)}function ot(u){for(ya=u.return;ya;)switch(ya.tag){case 3:case 27:Vr=!0;return;case 5:case 13:Vr=!1;return;default:ya=ya.return}}function Vt(u){if(!Ra||u!==ya)return!1;if(!An)return ot(u),An=!0,!1;var f=!1;if(oa?u.tag!==3&&u.tag!==27&&(u.tag!==5||Zx(u.type)&&!ml(u.type,u.memoizedProps))&&(f=!0):u.tag!==3&&(u.tag!==5||Zx(u.type)&&!ml(u.type,u.memoizedProps))&&(f=!0),f&&ca&&Xe(u),ot(u),u.tag===13){if(!Ra)throw Error(a(316));if(u=u.memoizedState,u=u!==null?u.dehydrated:null,!u)throw Error(a(317));ca=Kx(u)}else ca=ya?b0(u.stateNode):null;return!0}function en(){Ra&&(ca=ya=null,An=!1)}function Et(u){br===null?br=[u]:br.push(u)}function Ne(){for(var u=vl,f=Bu=vl=0;f<u;){var y=Ar[f];Ar[f++]=null;var A=Ar[f];Ar[f++]=null;var R=Ar[f];Ar[f++]=null;var O=Ar[f];if(Ar[f++]=null,A!==null&&R!==null){var Y=A.pending;Y===null?R.next=R:(R.next=Y.next,Y.next=R),A.pending=R}O!==0&&Q(y,R,O)}}function Ge(u,f,y,A){Ar[vl++]=u,Ar[vl++]=f,Ar[vl++]=y,Ar[vl++]=A,Bu|=A,u.lanes|=A,u=u.alternate,u!==null&&(u.lanes|=A)}function Ie(u,f,y,A){return Ge(u,f,y,A),Tt(u)}function et(u,f){return Ge(u,null,null,f),Tt(u)}function Q(u,f,y){u.lanes|=y;var A=u.alternate;A!==null&&(A.lanes|=y);for(var R=!1,O=u.return;O!==null;)O.childLanes|=y,A=O.alternate,A!==null&&(A.childLanes|=y),O.tag===22&&(u=O.stateNode,u===null||u._visibility&1||(R=!0)),u=O,O=O.return;R&&f!==null&&u.tag===3&&(O=u.stateNode,R=31-Ya(y),O=O.hiddenUpdates,u=O[R],u===null?O[R]=[f]:u.push(f),f.lane=y|536870912)}function Tt(u){if(50<Rc)throw Rc=0,Da=null,Error(a(185));for(var f=u.return;f!==null;)u=f,f=u.return;return u.tag===3?u.stateNode:null}function Ze(u){u!==bc&&u.next===null&&(bc===null?Du=bc=u:bc=bc.next=u),bh=!0,xh||(xh=!0,Ae(Ke))}function At(u,f){if(!fs&&bh){fs=!0;do for(var y=!1,A=Du;A!==null;){if(u!==0){var R=A.pendingLanes;if(R===0)var O=0;else{var Y=A.suspendedLanes,ne=A.pingedLanes;O=(1<<31-Ya(42|u)+1)-1,O&=R&~(Y&~ne),O=O&201326677?O&201326677|1:O?O|2:0}O!==0&&(y=!0,re(A,O))}else O=on,O=P(A,A===cn?O:0),(O&3)===0||U(A,O)||(y=!0,re(A,O));A=A.next}while(y);fs=!1}}function Ke(){bh=xh=!1;var u=0;yl!==0&&(gl()&&(u=yl),yl=0);for(var f=la(),y=null,A=Du;A!==null;){var R=A.next,O=V(A,f);O===0?(A.next=null,y===null?Du=R:y.next=R,R===null&&(bc=y)):(y=A,(u!==0||(O&3)!==0)&&(bh=!0)),A=R}At(u)}function V(u,f){for(var y=u.suspendedLanes,A=u.pingedLanes,R=u.expirationTimes,O=u.pendingLanes&-62914561;0<O;){var Y=31-Ya(O),ne=1<<Y,de=R[Y];de===-1?((ne&y)===0||(ne&A)!==0)&&(R[Y]=z(ne,f)):de<=f&&(u.expiredLanes|=ne),O&=~ne}if(f=cn,y=on,y=P(u,u===f?y:0),A=u.callbackNode,y===0||u===f&&Vn===2||u.cancelPendingCommit!==null)return A!==null&&A!==null&&mh(A),u.callbackNode=null,u.callbackPriority=0;if((y&3)===0||U(u,y)){if(f=y&-y,f===u.callbackPriority)return f;switch(A!==null&&mh(A),le(y)){case 2:case 8:y=sb;break;case 32:y=Op;break;case 268435456:y=Np;break;default:y=Op}return A=I.bind(null,u),y=Cu(y,A),u.callbackPriority=f,u.callbackNode=y,f}return A!==null&&A!==null&&mh(A),u.callbackPriority=2,u.callbackNode=null,2}function I(u,f){var y=u.callbackNode;if(Ji()&&u.callbackNode!==y)return null;var A=on;return A=P(u,u===cn?A:0),A===0?null:(Zf(u,A,f),V(u,la()),u.callbackNode!=null&&u.callbackNode===y?I.bind(null,u):null)}function re(u,f){if(Ji())return null;Zf(u,f,!0)}function Ae(u){Di?bp(function(){(Nt&6)!==0?Cu(N0,u):u()}):Cu(N0,u)}function Be(){return yl===0&&(yl=j()),yl}function Re(u,f){if(Ah===null){var y=Ah=[];Lp=0,Wa=Be(),_l={status:"pending",value:void 0,then:function(A){y.push(A)}}}return Lp++,f.then(pt,pt),f}function pt(){if(--Lp===0&&Ah!==null){_l!==null&&(_l.status="fulfilled");var u=Ah;Ah=null,Wa=0,_l=null;for(var f=0;f<u.length;f++)(0,u[f])()}}function Qe(u,f){var y=[],A={status:"pending",value:null,reason:null,then:function(R){y.push(R)}};return u.then(function(){A.status="fulfilled",A.value=f;for(var R=0;R<y.length;R++)(0,y[R])(f)},function(R){for(A.status="rejected",A.reason=R,R=0;R<y.length;R++)(0,y[R])(void 0)}),A}function gt(u){u.updateQueue={baseState:u.memoizedState,firstBaseUpdate:null,lastBaseUpdate:null,shared:{pending:null,lanes:0,hiddenCallbacks:null},callbacks:null}}function wt(u,f){u=u.updateQueue,f.updateQueue===u&&(f.updateQueue={baseState:u.baseState,firstBaseUpdate:u.firstBaseUpdate,lastBaseUpdate:u.lastBaseUpdate,shared:u.shared,callbacks:null})}function Fe(u){return{lane:u,tag:0,payload:null,callback:null,next:null}}function ke(u,f,y){var A=u.updateQueue;if(A===null)return null;if(A=A.shared,(Nt&2)!==0){var R=A.pending;return R===null?f.next=f:(f.next=R.next,R.next=f),A.pending=f,f=Tt(u),Q(u,null,y),f}return Ge(u,A,f,y),Tt(u)}function nt(u,f,y){if(f=f.updateQueue,f!==null&&(f=f.shared,(y&4194176)!==0)){var A=f.lanes;A&=u.pendingLanes,y|=A,f.lanes=y,ae(u,y)}}function it(u,f){var y=u.updateQueue,A=u.alternate;if(A!==null&&(A=A.updateQueue,y===A)){var R=null,O=null;if(y=y.firstBaseUpdate,y!==null){do{var Y={lane:y.lane,tag:y.tag,payload:y.payload,callback:null,next:null};O===null?R=O=Y:O=O.next=Y,y=y.next}while(y!==null);O===null?R=O=f:O=O.next=f}else R=O=f;y={baseState:A.baseState,firstBaseUpdate:R,lastBaseUpdate:O,shared:A.shared,callbacks:A.callbacks},u.updateQueue=y;return}u=y.lastBaseUpdate,u===null?y.firstBaseUpdate=f:u.next=f,y.lastBaseUpdate=f}function Je(){if(Ou){var u=_l;if(u!==null)throw u}}function Yt(u,f,y,A){Ou=!1;var R=u.updateQueue;Ao=!1;var O=R.firstBaseUpdate,Y=R.lastBaseUpdate,ne=R.shared.pending;if(ne!==null){R.shared.pending=null;var de=ne,Ue=de.next;de.next=null,Y===null?O=Ue:Y.next=Ue,Y=de;var We=u.alternate;We!==null&&(We=We.updateQueue,ne=We.lastBaseUpdate,ne!==Y&&(ne===null?We.firstBaseUpdate=Ue:ne.next=Ue,We.lastBaseUpdate=de))}if(O!==null){var ht=R.baseState;Y=0,We=Ue=de=null,ne=O;do{var mt=ne.lane&-536870913,Wt=mt!==ne.lane;if(Wt?(on&mt)===mt:(A&mt)===mt){mt!==0&&mt===Wa&&(Ou=!0),We!==null&&(We=We.next={lane:0,tag:ne.tag,payload:ne.payload,callback:null,next:null});e:{var Za=u,Th=ne;mt=f;var wc=y;switch(Th.tag){case 1:if(Za=Th.payload,typeof Za=="function"){ht=Za.call(wc,ht,mt);break e}ht=Za;break e;case 3:Za.flags=Za.flags&-65537|128;case 0:if(Za=Th.payload,mt=typeof Za=="function"?Za.call(wc,ht,mt):Za,mt==null)break e;ht=mc({},ht,mt);break e;case 2:Ao=!0}}mt=ne.callback,mt!==null&&(u.flags|=64,Wt&&(u.flags|=8192),Wt=R.callbacks,Wt===null?R.callbacks=[mt]:Wt.push(mt))}else Wt={lane:mt,tag:ne.tag,payload:ne.payload,callback:ne.callback,next:null},We===null?(Ue=We=Wt,de=ht):We=We.next=Wt,Y|=mt;if(ne=ne.next,ne===null){if(ne=R.shared.pending,ne===null)break;Wt=ne,ne=Wt.next,Wt.next=null,R.lastBaseUpdate=Wt,R.shared.pending=null}}while(!0);We===null&&(de=ht),R.baseState=de,R.firstBaseUpdate=Ue,R.lastBaseUpdate=We,O===null&&(R.shared.lanes=0),Tr|=Y,u.lanes=Y,u.memoizedState=ht}}function oe(u,f){if(typeof u!="function")throw Error(a(191,u));u.call(f)}function rt(u,f){var y=u.callbacks;if(y!==null)for(u.callbacks=null,u=0;u<y.length;u++)oe(y[u],f)}function Ye(u,f){if(yr(u,f))return!0;if(typeof u!="object"||u===null||typeof f!="object"||f===null)return!1;var y=Object.keys(u),A=Object.keys(f);if(y.length!==A.length)return!1;for(A=0;A<y.length;A++){var R=y[A];if(!Sh.call(f,R)||!yr(u[R],f[R]))return!1}return!0}function ft(u){return u=u.status,u==="fulfilled"||u==="rejected"}function Ve(){}function Pe(u,f,y){switch(y=u[y],y===void 0?u.push(f):y!==f&&(f.then(Ve,Ve),f=y),f.status){case"fulfilled":return f.value;case"rejected":throw u=f.reason,u===zn?Error(a(483)):u;default:if(typeof f.status=="string")f.then(Ve,Ve);else{if(u=cn,u!==null&&100<u.shellSuspendCounter)throw Error(a(482));u=f,u.status="pending",u.then(function(A){if(f.status==="pending"){var R=f;R.status="fulfilled",R.value=A}},function(A){if(f.status==="pending"){var R=f;R.status="rejected",R.reason=A}})}switch(f.status){case"fulfilled":return f.value;case"rejected":throw u=f.reason,u===zn?Error(a(483)):u}throw Ac=f,zn}}function $e(){if(Ac===null)throw Error(a(459));var u=Ac;return Ac=null,u}function Ht(u){var f=kr;return kr+=1,Gs===null&&(Gs=[]),Pe(Gs,u,f)}function bn(u,f){f=f.props.ref,u.ref=f!==void 0?f:null}function un(u,f){throw f.$$typeof===$g?Error(a(525)):(u=Object.prototype.toString.call(f),Error(a(31,u==="[object Object]"?"object with keys {"+Object.keys(f).join(", ")+"}":u)))}function na(u){var f=u._init;return f(u._payload)}function Lr(u){function f(be,fe){if(u){var Ce=be.deletions;Ce===null?(be.deletions=[fe],be.flags|=16):Ce.push(fe)}}function y(be,fe){if(!u)return null;for(;fe!==null;)f(be,fe),fe=fe.sibling;return null}function A(be){for(var fe=new Map;be!==null;)be.key!==null?fe.set(be.key,be):fe.set(be.index,be),be=be.sibling;return fe}function R(be,fe){return be=ga(be,fe),be.index=0,be.sibling=null,be}function O(be,fe,Ce){return be.index=Ce,u?(Ce=be.alternate,Ce!==null?(Ce=Ce.index,Ce<fe?(be.flags|=33554434,fe):Ce):(be.flags|=33554434,fe)):(be.flags|=1048576,fe)}function Y(be){return u&&be.alternate===null&&(be.flags|=33554434),be}function ne(be,fe,Ce,je){return fe===null||fe.tag!==6?(fe=cl(Ce,be.mode,je),fe.return=be,fe):(fe=R(fe,Ce),fe.return=be,fe)}function de(be,fe,Ce,je){var Bt=Ce.type;return Bt===bu?We(be,fe,Ce.props.children,je,Ce.key):fe!==null&&(fe.elementType===Bt||typeof Bt=="object"&&Bt!==null&&Bt.$$typeof===ls&&na(Bt)===fe.type)?(fe=R(fe,Ce.props),bn(fe,Ce),fe.return=be,fe):(fe=zr(Ce.type,Ce.key,Ce.props,null,be.mode,je),bn(fe,Ce),fe.return=be,fe)}function Ue(be,fe,Ce,je){return fe===null||fe.tag!==4||fe.stateNode.containerInfo!==Ce.containerInfo||fe.stateNode.implementation!==Ce.implementation?(fe=xu(Ce,be.mode,je),fe.return=be,fe):(fe=R(fe,Ce.children||[]),fe.return=be,fe)}function We(be,fe,Ce,je,Bt){return fe===null||fe.tag!==7?(fe=go(Ce,be.mode,je,Bt),fe.return=be,fe):(fe=R(fe,Ce),fe.return=be,fe)}function ht(be,fe,Ce){if(typeof fe=="string"&&fe!==""||typeof fe=="number"||typeof fe=="bigint")return fe=cl(""+fe,be.mode,Ce),fe.return=be,fe;if(typeof fe=="object"&&fe!==null){switch(fe.$$typeof){case vo:return Ce=zr(fe.type,fe.key,fe.props,null,be.mode,Ce),bn(Ce,fe),Ce.return=be,Ce;case os:return fe=xu(fe,be.mode,Ce),fe.return=be,fe;case ls:var je=fe._init;return fe=je(fe._payload),ht(be,fe,Ce)}if(dl(fe)||s(fe))return fe=go(fe,be.mode,Ce,null),fe.return=be,fe;if(typeof fe.then=="function")return ht(be,Ht(fe),Ce);if(fe.$$typeof===Ls)return ht(be,qf(be,fe),Ce);un(be,fe)}return null}function mt(be,fe,Ce,je){var Bt=fe!==null?fe.key:null;if(typeof Ce=="string"&&Ce!==""||typeof Ce=="number"||typeof Ce=="bigint")return Bt!==null?null:ne(be,fe,""+Ce,je);if(typeof Ce=="object"&&Ce!==null){switch(Ce.$$typeof){case vo:return Ce.key===Bt?de(be,fe,Ce,je):null;case os:return Ce.key===Bt?Ue(be,fe,Ce,je):null;case ls:return Bt=Ce._init,Ce=Bt(Ce._payload),mt(be,fe,Ce,je)}if(dl(Ce)||s(Ce))return Bt!==null?null:We(be,fe,Ce,je,null);if(typeof Ce.then=="function")return mt(be,fe,Ht(Ce),je);if(Ce.$$typeof===Ls)return mt(be,fe,qf(be,Ce),je);un(be,Ce)}return null}function Wt(be,fe,Ce,je,Bt){if(typeof je=="string"&&je!==""||typeof je=="number"||typeof je=="bigint")return be=be.get(Ce)||null,ne(fe,be,""+je,Bt);if(typeof je=="object"&&je!==null){switch(je.$$typeof){case vo:return be=be.get(je.key===null?Ce:je.key)||null,de(fe,be,je,Bt);case os:return be=be.get(je.key===null?Ce:je.key)||null,Ue(fe,be,je,Bt);case ls:var Jn=je._init;return je=Jn(je._payload),Wt(be,fe,Ce,je,Bt)}if(dl(je)||s(je))return be=be.get(Ce)||null,We(fe,be,je,Bt,null);if(typeof je.then=="function")return Wt(be,fe,Ce,Ht(je),Bt);if(je.$$typeof===Ls)return Wt(be,fe,Ce,qf(fe,je),Bt);un(fe,je)}return null}function Za(be,fe,Ce,je){for(var Bt=null,Jn=null,Xt=fe,Mn=fe=0,Gi=null;Xt!==null&&Mn<Ce.length;Mn++){Xt.index>Mn?(Gi=Xt,Xt=null):Gi=Xt.sibling;var En=mt(be,Xt,Ce[Mn],je);if(En===null){Xt===null&&(Xt=Gi);break}u&&Xt&&En.alternate===null&&f(be,Xt),fe=O(En,fe,Mn),Jn===null?Bt=En:Jn.sibling=En,Jn=En,Xt=Gi}if(Mn===Ce.length)return y(be,Xt),An&&_e(be,Mn),Bt;if(Xt===null){for(;Mn<Ce.length;Mn++)Xt=ht(be,Ce[Mn],je),Xt!==null&&(fe=O(Xt,fe,Mn),Jn===null?Bt=Xt:Jn.sibling=Xt,Jn=Xt);return An&&_e(be,Mn),Bt}for(Xt=A(Xt);Mn<Ce.length;Mn++)Gi=Wt(Xt,be,Mn,Ce[Mn],je),Gi!==null&&(u&&Gi.alternate!==null&&Xt.delete(Gi.key===null?Mn:Gi.key),fe=O(Gi,fe,Mn),Jn===null?Bt=Gi:Jn.sibling=Gi,Jn=Gi);return u&&Xt.forEach(function(wo){return f(be,wo)}),An&&_e(be,Mn),Bt}function Th(be,fe,Ce,je){if(Ce==null)throw Error(a(151));for(var Bt=null,Jn=null,Xt=fe,Mn=fe=0,Gi=null,En=Ce.next();Xt!==null&&!En.done;Mn++,En=Ce.next()){Xt.index>Mn?(Gi=Xt,Xt=null):Gi=Xt.sibling;var wo=mt(be,Xt,En.value,je);if(wo===null){Xt===null&&(Xt=Gi);break}u&&Xt&&wo.alternate===null&&f(be,Xt),fe=O(wo,fe,Mn),Jn===null?Bt=wo:Jn.sibling=wo,Jn=wo,Xt=Gi}if(En.done)return y(be,Xt),An&&_e(be,Mn),Bt;if(Xt===null){for(;!En.done;Mn++,En=Ce.next())En=ht(be,En.value,je),En!==null&&(fe=O(En,fe,Mn),Jn===null?Bt=En:Jn.sibling=En,Jn=En);return An&&_e(be,Mn),Bt}for(Xt=A(Xt);!En.done;Mn++,En=Ce.next())En=Wt(Xt,be,Mn,En.value,je),En!==null&&(u&&En.alternate!==null&&Xt.delete(En.key===null?Mn:En.key),fe=O(En,fe,Mn),Jn===null?Bt=En:Jn.sibling=En,Jn=En);return u&&Xt.forEach(function(Xp){return f(be,Xp)}),An&&_e(be,Mn),Bt}function wc(be,fe,Ce,je){if(typeof Ce=="object"&&Ce!==null&&Ce.type===bu&&Ce.key===null&&(Ce=Ce.props.children),typeof Ce=="object"&&Ce!==null){switch(Ce.$$typeof){case vo:e:{for(var Bt=Ce.key;fe!==null;){if(fe.key===Bt){if(Bt=Ce.type,Bt===bu){if(fe.tag===7){y(be,fe.sibling),je=R(fe,Ce.props.children),je.return=be,be=je;break e}}else if(fe.elementType===Bt||typeof Bt=="object"&&Bt!==null&&Bt.$$typeof===ls&&na(Bt)===fe.type){y(be,fe.sibling),je=R(fe,Ce.props),bn(je,Ce),je.return=be,be=je;break e}y(be,fe);break}else f(be,fe);fe=fe.sibling}Ce.type===bu?(je=go(Ce.props.children,be.mode,je,Ce.key),je.return=be,be=je):(je=zr(Ce.type,Ce.key,Ce.props,null,be.mode,je),bn(je,Ce),je.return=be,be=je)}return Y(be);case os:e:{for(Bt=Ce.key;fe!==null;){if(fe.key===Bt)if(fe.tag===4&&fe.stateNode.containerInfo===Ce.containerInfo&&fe.stateNode.implementation===Ce.implementation){y(be,fe.sibling),je=R(fe,Ce.children||[]),je.return=be,be=je;break e}else{y(be,fe);break}else f(be,fe);fe=fe.sibling}je=xu(Ce,be.mode,je),je.return=be,be=je}return Y(be);case ls:return Bt=Ce._init,Ce=Bt(Ce._payload),wc(be,fe,Ce,je)}if(dl(Ce))return Za(be,fe,Ce,je);if(s(Ce)){if(Bt=s(Ce),typeof Bt!="function")throw Error(a(150));return Ce=Bt.call(Ce),Th(be,fe,Ce,je)}if(typeof Ce.then=="function")return wc(be,fe,Ht(Ce),je);if(Ce.$$typeof===Ls)return wc(be,fe,qf(be,Ce),je);un(be,Ce)}return typeof Ce=="string"&&Ce!==""||typeof Ce=="number"||typeof Ce=="bigint"?(Ce=""+Ce,fe!==null&&fe.tag===6?(y(be,fe.sibling),je=R(fe,Ce),je.return=be,be=je):(y(be,fe),je=cl(Ce,be.mode,je),je.return=be,be=je),Y(be)):y(be,fe)}return function(be,fe,Ce,je){try{kr=0;var Bt=wc(be,fe,Ce,je);return Gs=null,Bt}catch(Xt){if(Xt===zn)throw Xt;var Jn=t(29,Xt,null,be.mode);return Jn.lanes=je,Jn.return=be,Jn}}}function Pf(u,f){u=hs,w(Sr,u),w(Vs,f),hs=u|f.baseLanes}function Kl(){w(Sr,hs),w(Vs,Vs.current)}function Yo(){hs=Sr.current,M(Vs),M(Sr)}function Ir(u){var f=u.alternate;w(Oi,Oi.current&1),w(Mr,u),Xr===null&&(f===null||Vs.current!==null||f.memoizedState!==null)&&(Xr=u)}function Ql(u){if(u.tag===22){if(w(Oi,Oi.current),w(Mr,u),Xr===null){var f=u.alternate;f!==null&&f.memoizedState!==null&&(Xr=u)}}else Pr()}function Pr(){w(Oi,Oi.current),w(Mr,Mr.current)}function Xi(u){M(Mr),Xr===u&&(Xr=null),M(Oi)}function Ma(u){for(var f=u;f!==null;){if(f.tag===13){var y=f.memoizedState;if(y!==null&&(y=y.dehydrated,y===null||Tp(y)||fh(y)))return f}else if(f.tag===19&&f.memoizedProps.revealOrder!==void 0){if((f.flags&128)!==0)return f}else if(f.child!==null){f.child.return=f,f=f.child;continue}if(f===u)break;for(;f.sibling===null;){if(f.return===null||f.return===u)return null;f=f.return}f.sibling.return=f.return,f=f.sibling}return null}function rn(){throw Error(a(321))}function Fi(u,f){if(f===null)return!1;for(var y=0;y<f.length&&y<u.length;y++)if(!yr(u[y],f[y]))return!1;return!0}function ur(u,f,y,A,R,O){return ks=O,tn=f,f.memoizedState=null,f.updateQueue=null,f.lanes=0,Ft.H=u===null||u.memoizedState===null?Ni:_a,So=!1,O=y(A,R),So=!1,ii&&(O=$l(f,y,A,R)),Zl(u),O}function Zl(u){Ft.H=Sn;var f=Dn!==null&&Dn.next!==null;if(ks=0,bi=Dn=tn=null,jr=!1,di=0,Nu=null,f)throw Error(a(300));u===null||Ai||(u=u.dependencies,u!==null&&Zo(u)&&(Ai=!0))}function $l(u,f,y,A){tn=u;var R=0;do{if(ii&&(Nu=null),di=0,ii=!1,25<=R)throw Error(a(301));if(R+=1,bi=Dn=null,u.updateQueue!=null){var O=u.updateQueue;O.lastEffect=null,O.events=null,O.stores=null,O.memoCache!=null&&(O.memoCache.index=0)}Ft.H=bl,O=f(y,A)}while(ii);return O}function Xd(){var u=Ft.H,f=u.useState()[0];return f=typeof f.then=="function"?ns(f):f,u=u.useState()[0],(Dn!==null?Dn.memoizedState:null)!==u&&(tn.flags|=1024),f}function ec(){var u=Mh!==0;return Mh=0,u}function so(u,f,y){f.updateQueue=u.updateQueue,f.flags&=-2053,u.lanes&=~y}function tc(u){if(jr){for(u=u.memoizedState;u!==null;){var f=u.queue;f!==null&&(f.pending=null),u=u.next}jr=!1}ks=0,bi=Dn=tn=null,ii=!1,di=Mh=0,Nu=null}function _i(){var u={memoizedState:null,baseState:null,baseQueue:null,queue:null,next:null};return bi===null?tn.memoizedState=bi=u:bi=bi.next=u,bi}function kn(){if(Dn===null){var u=tn.alternate;u=u!==null?u.memoizedState:null}else u=Dn.next;var f=bi===null?tn.memoizedState:bi.next;if(f!==null)bi=f,Dn=u;else{if(u===null)throw tn.alternate===null?Error(a(467)):Error(a(310));Dn=u,u={memoizedState:Dn.memoizedState,baseState:Dn.baseState,baseQueue:Dn.baseQueue,queue:Dn.queue,next:null},bi===null?tn.memoizedState=bi=u:bi=bi.next=u}return bi}function ns(u){var f=di;return di+=1,Nu===null&&(Nu=[]),u=Pe(Nu,u,f),f=tn,(bi===null?f.memoizedState:bi.next)===null&&(f=f.alternate,Ft.H=f===null||f.memoizedState===null?Ni:_a),u}function is(u){if(u!==null&&typeof u=="object"){if(typeof u.then=="function")return ns(u);if(u.$$typeof===Ls)return aa(u)}throw Error(a(438,String(u)))}function k(u){var f=null,y=tn.updateQueue;if(y!==null&&(f=y.memoCache),f==null){var A=tn.alternate;A!==null&&(A=A.updateQueue,A!==null&&(A=A.memoCache,A!=null&&(f={data:A.data.map(function(R){return R.slice()}),index:0})))}if(f==null&&(f={data:[],index:0}),y===null&&(y=Pp(),tn.updateQueue=y),y.memoCache=f,y=f.data[f.index],y===void 0)for(y=f.data[f.index]=Array(u),A=0;A<u;A++)y[A]=Lx;return f.index++,y}function ue(u,f){return typeof f=="function"?f(u):f}function Me(u){var f=kn();return xe(f,Dn,u)}function xe(u,f,y){var A=u.queue;if(A===null)throw Error(a(311));A.lastRenderedReducer=y;var R=u.baseQueue,O=A.pending;if(O!==null){if(R!==null){var Y=R.next;R.next=O.next,O.next=Y}f.baseQueue=R=O,A.pending=null}if(O=u.baseState,R===null)u.memoizedState=O;else{f=R.next;var ne=Y=null,de=null,Ue=f,We=!1;do{var ht=Ue.lane&-536870913;if(ht!==Ue.lane?(on&ht)===ht:(ks&ht)===ht){var mt=Ue.revertLane;if(mt===0)de!==null&&(de=de.next={lane:0,revertLane:0,action:Ue.action,hasEagerState:Ue.hasEagerState,eagerState:Ue.eagerState,next:null}),ht===Wa&&(We=!0);else if((ks&mt)===mt){Ue=Ue.next,mt===Wa&&(We=!0);continue}else ht={lane:0,revertLane:Ue.revertLane,action:Ue.action,hasEagerState:Ue.hasEagerState,eagerState:Ue.eagerState,next:null},de===null?(ne=de=ht,Y=O):de=de.next=ht,tn.lanes|=mt,Tr|=mt;ht=Ue.action,So&&y(O,ht),O=Ue.hasEagerState?Ue.eagerState:y(O,ht)}else mt={lane:ht,revertLane:Ue.revertLane,action:Ue.action,hasEagerState:Ue.hasEagerState,eagerState:Ue.eagerState,next:null},de===null?(ne=de=mt,Y=O):de=de.next=mt,tn.lanes|=ht,Tr|=ht;Ue=Ue.next}while(Ue!==null&&Ue!==f);if(de===null?Y=O:de.next=ne,!yr(O,u.memoizedState)&&(Ai=!0,We&&(y=_l,y!==null)))throw y;u.memoizedState=O,u.baseState=Y,u.baseQueue=de,A.lastRenderedState=O}return R===null&&(A.lanes=0),[u.memoizedState,A.dispatch]}function me(u){var f=kn(),y=f.queue;if(y===null)throw Error(a(311));y.lastRenderedReducer=u;var A=y.dispatch,R=y.pending,O=f.memoizedState;if(R!==null){y.pending=null;var Y=R=R.next;do O=u(O,Y.action),Y=Y.next;while(Y!==R);yr(O,f.memoizedState)||(Ai=!0),f.memoizedState=O,f.baseQueue===null&&(f.baseState=O),y.lastRenderedState=O}return[O,A]}function at(u,f,y){var A=tn,R=kn(),O=An;if(O){if(y===void 0)throw Error(a(407));y=y()}else y=f();var Y=!yr((Dn||R).memoizedState,y);if(Y&&(R.memoizedState=y,Ai=!0),R=R.queue,fr(yt.bind(null,A,R,u),[u]),R.getSnapshot!==f||Y||bi!==null&&bi.memoizedState.tag&1){if(A.flags|=2048,ci(9,lt.bind(null,A,R,y,f),{destroy:void 0},null),cn===null)throw Error(a(349));O||(ks&60)!==0||vt(A,f,y)}return y}function vt(u,f,y){u.flags|=16384,u={getSnapshot:f,value:y},f=tn.updateQueue,f===null?(f=Pp(),tn.updateQueue=f,f.stores=[u]):(y=f.stores,y===null?f.stores=[u]:y.push(u))}function lt(u,f,y,A){f.value=y,f.getSnapshot=A,St(f)&&Ut(u)}function yt(u,f,y){return y(function(){St(f)&&Ut(u)})}function St(u){var f=u.getSnapshot;u=u.value;try{var y=f();return!yr(u,y)}catch{return!0}}function Ut(u){var f=et(u,2);f!==null&&ma(f,u,2)}function xt(u){var f=_i();if(typeof u=="function"){var y=u;if(u=y(),So){J(!0);try{y()}finally{J(!1)}}}return f.memoizedState=f.baseState=u,f.queue={pending:null,lanes:0,dispatch:null,lastRenderedReducer:ue,lastRenderedState:u},f}function Pt(u,f,y,A){return u.baseState=y,xe(u,Dn,typeof A=="function"?A:ue)}function wn(u,f,y,A,R){if(rc(u))throw Error(a(485));if(u=f.action,u!==null){var O={payload:R,action:u,next:null,isTransition:!0,status:"pending",value:null,reason:null,listeners:[],then:function(Y){O.listeners.push(Y)}};Ft.T!==null?y(!0):O.isTransition=!1,A(O),y=f.pending,y===null?(O.next=f.pending=O,$n(f,O)):(O.next=y.next,f.pending=y.next=O)}}function $n(u,f){var y=f.action,A=f.payload,R=u.state;if(f.isTransition){var O=Ft.T,Y={};Ft.T=Y;try{var ne=y(R,A),de=Ft.S;de!==null&&de(Y,ne),Xn(u,f,ne)}catch(Ue){Ct(u,f,Ue)}finally{Ft.T=O}}else try{O=y(R,A),Xn(u,f,O)}catch(Ue){Ct(u,f,Ue)}}function Xn(u,f,y){y!==null&&typeof y=="object"&&typeof y.then=="function"?y.then(function(A){Bn(u,f,A)},function(A){return Ct(u,f,A)}):Bn(u,f,y)}function Bn(u,f,y){f.status="fulfilled",f.value=y,Cn(f),u.state=y,f=u.pending,f!==null&&(y=f.next,y===f?u.pending=null:(y=y.next,f.next=y,$n(u,y)))}function Ct(u,f,y){var A=u.pending;if(u.pending=null,A!==null){A=A.next;do f.status="rejected",f.reason=y,Cn(f),f=f.next;while(f!==A)}u.action=null}function Cn(u){u=u.listeners;for(var f=0;f<u.length;f++)(0,u[f])()}function qt(u,f){return f}function ji(u,f){if(An){var y=cn.formState;if(y!==null){e:{var A=tn;if(An){if(ca){var R=Vx(ca,Vr);if(R){ca=b0(R),A=kx(R);break e}}Xe(A)}A=!1}A&&(f=y[0])}}y=_i(),y.memoizedState=y.baseState=f,A={pending:null,lanes:0,dispatch:null,lastRenderedReducer:qt,lastRenderedState:f},y.queue=A,y=Wd.bind(null,tn,A),A.dispatch=y,A=xt(!1);var O=Jd.bind(null,tn,!1,A.queue);return A=_i(),R={state:f,dispatch:null,action:u,pending:null},A.queue=R,y=wn.bind(null,tn,R,O,y),R.dispatch=y,A.memoizedState=u,[f,y,!1]}function Cs(u){var f=kn();return Yi(f,Dn,u)}function Yi(u,f,y){f=xe(u,f,qt)[0],u=Me(ue)[0],f=typeof f=="object"&&f!==null&&typeof f.then=="function"?ns(f):f;var A=kn(),R=A.queue,O=R.dispatch;return y!==A.memoizedState&&(tn.flags|=2048,ci(9,Fr.bind(null,R,y),{destroy:void 0},null)),[f,O,u]}function Fr(u,f){u.action=f}function On(u){var f=kn(),y=Dn;if(y!==null)return Yi(f,y,u);kn(),f=f.memoizedState,y=kn();var A=y.queue.dispatch;return y.memoizedState=u,[f,A,!1]}function ci(u,f,y,A){return u={tag:u,create:f,inst:y,deps:A,next:null},f=tn.updateQueue,f===null&&(f=Pp(),tn.updateQueue=f),y=f.lastEffect,y===null?f.lastEffect=u.next=u:(A=y.next,y.next=u,u.next=A,f.lastEffect=u),u}function Ri(){return kn().memoizedState}function wi(u,f,y,A){var R=_i();tn.flags|=u,R.memoizedState=ci(1|f,y,{destroy:void 0},A===void 0?null:A)}function Bi(u,f,y,A){var R=kn();A=A===void 0?null:A;var O=R.memoizedState.inst;Dn!==null&&A!==null&&Fi(A,Dn.memoizedState.deps)?R.memoizedState=ci(f,y,O,A):(tn.flags|=u,R.memoizedState=ci(1|f,y,O,A))}function nc(u,f){wi(8390656,8,u,f)}function fr(u,f){Bi(2048,8,u,f)}function ux(u,f){return Bi(4,2,u,f)}function fx(u,f){return Bi(4,4,u,f)}function Ff(u,f){if(typeof f=="function"){u=u();var y=f(u);return function(){typeof y=="function"?y():f(null)}}if(f!=null)return u=u(),f.current=u,function(){f.current=null}}function Rs(u,f,y){y=y!=null?y.concat([u]):null,Bi(4,4,Ff.bind(null,f,u),y)}function zf(){}function jd(u,f){var y=kn();f=f===void 0?null:f;var A=y.memoizedState;return f!==null&&Fi(f,A[1])?A[0]:(y.memoizedState=[u,f],u)}function ic(u,f){var y=kn();f=f===void 0?null:f;var A=y.memoizedState;if(f!==null&&Fi(f,A[1]))return A[0];if(A=u(),So){J(!0);try{u()}finally{J(!1)}}return y.memoizedState=[A,f],A}function qo(u,f,y){return y===void 0||(ks&1073741824)!==0?u.memoizedState=f:(u.memoizedState=y,u=Ds(),tn.lanes|=u,Tr|=u,y)}function Eg(u,f,y,A){return yr(y,f)?y:Vs.current!==null?(u=qo(u,y,A),yr(u,f)||(Ai=!0),u):(ks&42)===0?(Ai=!0,u.memoizedState=y):(u=Ds(),tn.lanes|=u,Tr|=u,f)}function Yd(u,f,y,A,R){var O=zi();va(O!==0&&8>O?O:8);var Y=Ft.T,ne={};Ft.T=ne,Jd(u,!1,f,y);try{var de=R(),Ue=Ft.S;if(Ue!==null&&Ue(ne,de),de!==null&&typeof de=="object"&&typeof de.then=="function"){var We=Qe(de,A);Jo(u,f,We,Ca(u))}else Jo(u,f,A,Ca(u))}catch(ht){Jo(u,f,{then:function(){},status:"rejected",reason:ht},Ca())}finally{va(O),Ft.T=Y}}function Tg(u){var f=u.memoizedState;if(f!==null)return f;f={memoizedState:ja,baseState:ja,baseQueue:null,queue:{pending:null,lanes:0,dispatch:null,lastRenderedReducer:ue,lastRenderedState:ja},next:null};var y={};return f.next={memoizedState:y,baseState:y,baseQueue:null,queue:{pending:null,lanes:0,dispatch:null,lastRenderedReducer:ue,lastRenderedState:y},next:null},u.memoizedState=f,u=u.alternate,u!==null&&(u.memoizedState=f),f}function ac(){return aa(kt)}function ws(){return kn().memoizedState}function qd(){return kn().memoizedState}function Hf(u){for(var f=u.return;f!==null;){switch(f.tag){case 24:case 3:var y=Ca();u=Fe(y);var A=ke(f,u,y);A!==null&&(ma(A,f,y),nt(A,f,y)),f={cache:ep()},u.payload=f;return}f=f.return}}function Wo(u,f,y){var A=Ca();y={lane:A,revertLane:0,action:y,hasEagerState:!1,eagerState:null,next:null},rc(u)?Gf(f,y):(y=Ie(u,f,y,A),y!==null&&(ma(y,u,A),Cg(y,f,A)))}function Wd(u,f,y){var A=Ca();Jo(u,f,y,A)}function Jo(u,f,y,A){var R={lane:A,revertLane:0,action:y,hasEagerState:!1,eagerState:null,next:null};if(rc(u))Gf(f,R);else{var O=u.alternate;if(u.lanes===0&&(O===null||O.lanes===0)&&(O=f.lastRenderedReducer,O!==null))try{var Y=f.lastRenderedState,ne=O(Y,y);if(R.hasEagerState=!0,R.eagerState=ne,yr(ne,Y))return Ge(u,f,R,0),cn===null&&Ne(),!1}catch{}if(y=Ie(u,f,R,A),y!==null)return ma(y,u,A),Cg(y,f,A),!0}return!1}function Jd(u,f,y,A){if(A={lane:2,revertLane:Be(),action:A,hasEagerState:!1,eagerState:null,next:null},rc(u)){if(f)throw Error(a(479))}else f=Ie(u,y,A,2),f!==null&&ma(f,u,2)}function rc(u){var f=u.alternate;return u===tn||f!==null&&f===tn}function Gf(u,f){ii=jr=!0;var y=u.pending;y===null?f.next=f:(f.next=y.next,y.next=f),u.pending=f}function Cg(u,f,y){if((y&4194176)!==0){var A=f.lanes;A&=u.pendingLanes,y|=A,f.lanes=y,ae(u,y)}}function da(u,f,y,A){f=u.memoizedState,y=y(A,f),y=y==null?f:mc({},f,y),u.memoizedState=y,u.lanes===0&&(u.updateQueue.baseState=y)}function Ko(u,f,y,A,R,O,Y){return u=u.stateNode,typeof u.shouldComponentUpdate=="function"?u.shouldComponentUpdate(A,O,Y):f.prototype&&f.prototype.isPureReactComponent?!Ye(y,A)||!Ye(R,O):!0}function Vf(u,f,y,A){u=f.state,typeof f.componentWillReceiveProps=="function"&&f.componentWillReceiveProps(y,A),typeof f.UNSAFE_componentWillReceiveProps=="function"&&f.UNSAFE_componentWillReceiveProps(y,A),f.state!==u&&Fp.enqueueReplaceState(f,f.state,null)}function as(u,f){var y=f;if("ref"in f){y={};for(var A in f)A!=="ref"&&(y[A]=f[A])}if(u=u.defaultProps){y===f&&(y=mc({},y));for(var R in u)y[R]===void 0&&(y[R]=u[R])}return y}function Kd(u,f){try{var y=u.onUncaughtError;y(f.value,{componentStack:f.stack})}catch(A){setTimeout(function(){throw A})}}function Qd(u,f,y){try{var A=u.onCaughtError;A(y.value,{componentStack:y.stack,errorBoundary:f.tag===1?f.stateNode:null})}catch(R){setTimeout(function(){throw R})}}function kf(u,f,y){return y=Fe(y),y.tag=3,y.payload={element:null},y.callback=function(){Kd(u,f)},y}function su(u){return u=Fe(u),u.tag=3,u}function Xf(u,f,y,A){var R=y.type.getDerivedStateFromError;if(typeof R=="function"){var O=A.value;u.payload=function(){return R(O)},u.callback=function(){Qd(f,y,A)}}var Y=y.stateNode;Y!==null&&typeof Y.componentDidCatch=="function"&&(u.callback=function(){Qd(f,y,A),typeof R!="function"&&(Rr===null?Rr=new Set([this]):Rr.add(this));var ne=A.stack;this.componentDidCatch(A.value,{componentStack:ne!==null?ne:""})})}function hx(u,f,y,A,R){if(y.flags|=32768,A!==null&&typeof A=="object"&&typeof A.then=="function"){if(f=y.alternate,f!==null&&sc(f,y,R,!0),y=Mr.current,y!==null){switch(y.tag){case 13:return Xr===null?Xa():y.alternate===null&&_n===0&&(_n=3),y.flags&=-257,y.flags|=65536,y.lanes=R,A===Ip?y.flags|=16384:(f=y.updateQueue,f===null?y.updateQueue=new Set([A]):f.add(A),pp(u,A,R)),!1;case 22:return y.flags|=65536,A===Ip?y.flags|=16384:(f=y.updateQueue,f===null?(f={transitions:null,markerInstances:null,retryQueue:new Set([A])},y.updateQueue=f):(y=f.retryQueue,y===null?f.retryQueue=new Set([A]):y.add(A)),pp(u,A,R)),!1}throw Error(a(435,y.tag))}return pp(u,A,R),Xa(),!1}if(An)return f=Mr.current,f!==null?((f.flags&65536)===0&&(f.flags|=256),f.flags|=65536,f.lanes=R,A!==_h&&(u=Error(a(422),{cause:A}),Et(pe(u,y)))):(A!==_h&&(f=Error(a(423),{cause:A}),Et(pe(f,y))),u=u.current.alternate,u.flags|=65536,R&=-R,u.lanes|=R,A=pe(A,y),R=kf(u.stateNode,A,R),it(u,R),_n!==4&&(_n=2)),!1;var O=Error(a(520),{cause:A});if(O=pe(O,y),Lu===null?Lu=[O]:Lu.push(O),_n!==4&&(_n=2),f===null)return!0;A=pe(A,y),y=f;do{switch(y.tag){case 3:return y.flags|=65536,u=R&-R,y.lanes|=u,u=kf(y.stateNode,A,u),it(y,u),!1;case 1:if(f=y.type,O=y.stateNode,(y.flags&128)===0&&(typeof f.getDerivedStateFromError=="function"||O!==null&&typeof O.componentDidCatch=="function"&&(Rr===null||!Rr.has(O))))return y.flags|=65536,R&=-R,y.lanes|=R,R=su(R),Xf(R,u,y,A),it(y,R),!1}y=y.return}while(y!==null);return!1}function ia(u,f,y,A){f.child=u===null?I0(f,null,y,A):xl(f,u.child,y,A)}function dx(u,f,y,A,R){y=y.render;var O=f.ref;if("ref"in A){var Y={};for(var ne in A)ne!=="ref"&&(Y[ne]=A[ne])}else Y=A;return oc(f),A=ur(u,f,y,Y,O,R),ne=ec(),u!==null&&!Ai?(so(u,f,R),oo(u,f,R)):(An&&ne&&ce(f),f.flags|=1,ia(u,f,A,R),f.child)}function px(u,f,y,A,R){if(u===null){var O=y.type;return typeof O=="function"&&!po(O)&&O.defaultProps===void 0&&y.compare===null?(f.tag=15,f.type=O,Zd(u,f,O,A,R)):(u=zr(y.type,null,A,f,f.mode,R),u.ref=f.ref,u.return=f,f.child=u)}if(O=u.child,!Ug(u,R)){var Y=O.memoizedProps;if(y=y.compare,y=y!==null?y:Ye,y(Y,A)&&u.ref===f.ref)return oo(u,f,R)}return f.flags|=1,u=ga(O,A),u.ref=f.ref,u.return=f,f.child=u}function Zd(u,f,y,A,R){if(u!==null){var O=u.memoizedProps;if(Ye(O,A)&&u.ref===f.ref)if(Ai=!1,f.pendingProps=A=O,Ug(u,R))(u.flags&131072)!==0&&(Ai=!0);else return f.lanes=u.lanes,oo(u,f,R)}return Rg(u,f,y,A,R)}function mx(u,f,y){var A=f.pendingProps,R=A.children,O=(f.stateNode._pendingVisibility&2)!==0,Y=u!==null?u.memoizedState:null;if(jf(u,f),A.mode==="hidden"||O){if((f.flags&128)!==0){if(A=Y!==null?Y.baseLanes|y:y,u!==null){for(R=f.child=u.child,O=0;R!==null;)O=O|R.lanes|R.childLanes,R=R.sibling;f.childLanes=O&~A}else f.childLanes=0,f.child=null;return gx(u,f,A,y)}if((y&536870912)!==0)f.memoizedState={baseLanes:0,cachePool:null},u!==null&&tp(f,Y!==null?Y.cachePool:null),Y!==null?Pf(f,Y):Kl(),Ql(f);else return f.lanes=f.childLanes=536870912,gx(u,f,Y!==null?Y.baseLanes|y:y,y)}else Y!==null?(tp(f,Y.cachePool),Pf(f,Y),Pr(),f.memoizedState=null):(u!==null&&tp(f,null),Kl(),Pr());return ia(u,f,R,y),f.child}function gx(u,f,y,A){var R=$o();return R=R===null?null:{parent:Ps?Nn._currentValue:Nn._currentValue2,pool:R},f.memoizedState={baseLanes:y,cachePool:R},u!==null&&tp(f,null),Kl(),Ql(f),u!==null&&sc(u,f,A,!0),null}function jf(u,f){var y=f.ref;if(y===null)u!==null&&u.ref!==null&&(f.flags|=2097664);else{if(typeof y!="function"&&typeof y!="object")throw Error(a(284));(u===null||u.ref!==y)&&(f.flags|=2097664)}}function Rg(u,f,y,A,R){return oc(f),y=ur(u,f,y,A,void 0,R),A=ec(),u!==null&&!Ai?(so(u,f,R),oo(u,f,R)):(An&&A&&ce(f),f.flags|=1,ia(u,f,y,R),f.child)}function vx(u,f,y,A,R,O){return oc(f),f.updateQueue=null,y=$l(f,A,y,R),Zl(u),A=ec(),u!==null&&!Ai?(so(u,f,O),oo(u,f,O)):(An&&A&&ce(f),f.flags|=1,ia(u,f,y,O),f.child)}function wg(u,f,y,A,R){if(oc(f),f.stateNode===null){var O=xc,Y=y.contextType;typeof Y=="object"&&Y!==null&&(O=aa(Y)),O=new y(A,O),f.memoizedState=O.state!==null&&O.state!==void 0?O.state:null,O.updater=Fp,f.stateNode=O,O._reactInternals=f,O=f.stateNode,O.props=A,O.state=f.memoizedState,O.refs={},gt(f),Y=y.contextType,O.context=typeof Y=="object"&&Y!==null?aa(Y):xc,O.state=f.memoizedState,Y=y.getDerivedStateFromProps,typeof Y=="function"&&(da(f,y,Y,A),O.state=f.memoizedState),typeof y.getDerivedStateFromProps=="function"||typeof O.getSnapshotBeforeUpdate=="function"||typeof O.UNSAFE_componentWillMount!="function"&&typeof O.componentWillMount!="function"||(Y=O.state,typeof O.componentWillMount=="function"&&O.componentWillMount(),typeof O.UNSAFE_componentWillMount=="function"&&O.UNSAFE_componentWillMount(),Y!==O.state&&Fp.enqueueReplaceState(O,O.state,null),Yt(f,A,O,R),Je(),O.state=f.memoizedState),typeof O.componentDidMount=="function"&&(f.flags|=4194308),A=!0}else if(u===null){O=f.stateNode;var ne=f.memoizedProps,de=as(y,ne);O.props=de;var Ue=O.context,We=y.contextType;Y=xc,typeof We=="object"&&We!==null&&(Y=aa(We));var ht=y.getDerivedStateFromProps;We=typeof ht=="function"||typeof O.getSnapshotBeforeUpdate=="function",ne=f.pendingProps!==ne,We||typeof O.UNSAFE_componentWillReceiveProps!="function"&&typeof O.componentWillReceiveProps!="function"||(ne||Ue!==Y)&&Vf(f,O,A,Y),Ao=!1;var mt=f.memoizedState;O.state=mt,Yt(f,A,O,R),Je(),Ue=f.memoizedState,ne||mt!==Ue||Ao?(typeof ht=="function"&&(da(f,y,ht,A),Ue=f.memoizedState),(de=Ao||Ko(f,y,de,A,mt,Ue,Y))?(We||typeof O.UNSAFE_componentWillMount!="function"&&typeof O.componentWillMount!="function"||(typeof O.componentWillMount=="function"&&O.componentWillMount(),typeof O.UNSAFE_componentWillMount=="function"&&O.UNSAFE_componentWillMount()),typeof O.componentDidMount=="function"&&(f.flags|=4194308)):(typeof O.componentDidMount=="function"&&(f.flags|=4194308),f.memoizedProps=A,f.memoizedState=Ue),O.props=A,O.state=Ue,O.context=Y,A=de):(typeof O.componentDidMount=="function"&&(f.flags|=4194308),A=!1)}else{O=f.stateNode,wt(u,f),Y=f.memoizedProps,We=as(y,Y),O.props=We,ht=f.pendingProps,mt=O.context,Ue=y.contextType,de=xc,typeof Ue=="object"&&Ue!==null&&(de=aa(Ue)),ne=y.getDerivedStateFromProps,(Ue=typeof ne=="function"||typeof O.getSnapshotBeforeUpdate=="function")||typeof O.UNSAFE_componentWillReceiveProps!="function"&&typeof O.componentWillReceiveProps!="function"||(Y!==ht||mt!==de)&&Vf(f,O,A,de),Ao=!1,mt=f.memoizedState,O.state=mt,Yt(f,A,O,R),Je();var Wt=f.memoizedState;Y!==ht||mt!==Wt||Ao||u!==null&&u.dependencies!==null&&Zo(u.dependencies)?(typeof ne=="function"&&(da(f,y,ne,A),Wt=f.memoizedState),(We=Ao||Ko(f,y,We,A,mt,Wt,de)||u!==null&&u.dependencies!==null&&Zo(u.dependencies))?(Ue||typeof O.UNSAFE_componentWillUpdate!="function"&&typeof O.componentWillUpdate!="function"||(typeof O.componentWillUpdate=="function"&&O.componentWillUpdate(A,Wt,de),typeof O.UNSAFE_componentWillUpdate=="function"&&O.UNSAFE_componentWillUpdate(A,Wt,de)),typeof O.componentDidUpdate=="function"&&(f.flags|=4),typeof O.getSnapshotBeforeUpdate=="function"&&(f.flags|=1024)):(typeof O.componentDidUpdate!="function"||Y===u.memoizedProps&&mt===u.memoizedState||(f.flags|=4),typeof O.getSnapshotBeforeUpdate!="function"||Y===u.memoizedProps&&mt===u.memoizedState||(f.flags|=1024),f.memoizedProps=A,f.memoizedState=Wt),O.props=A,O.state=Wt,O.context=de,A=We):(typeof O.componentDidUpdate!="function"||Y===u.memoizedProps&&mt===u.memoizedState||(f.flags|=4),typeof O.getSnapshotBeforeUpdate!="function"||Y===u.memoizedProps&&mt===u.memoizedState||(f.flags|=1024),A=!1)}return O=A,jf(u,f),A=(f.flags&128)!==0,O||A?(O=f.stateNode,y=A&&typeof y.getDerivedStateFromError!="function"?null:O.render(),f.flags|=1,u!==null&&A?(f.child=xl(f,u.child,null,R),f.child=xl(f,null,y,R)):ia(u,f,y,R),f.memoizedState=O.state,u=f.child):u=oo(u,f,R),u}function yx(u,f,y,A){return en(),f.flags|=256,ia(u,f,y,A),f.child}function Bg(u){return{baseLanes:u,cachePool:Sx()}}function Dg(u,f,y){return u=u!==null?u.childLanes&~y:0,f&&(u|=Qa),u}function _x(u,f,y){var A=f.pendingProps,R=!1,O=(f.flags&128)!==0,Y;if((Y=O)||(Y=u!==null&&u.memoizedState===null?!1:(Oi.current&2)!==0),Y&&(R=!0,f.flags&=-129),Y=(f.flags&32)!==0,f.flags&=-33,u===null){if(An){if(R?Ir(f):Pr(),An){var ne=ca,de;(de=ne)&&(ne=Wx(ne,Vr),ne!==null?(f.memoizedState={dehydrated:ne,treeContext:cs!==null?{id:Hs,overflow:Gr}:null,retryLane:536870912},de=t(18,null,null,0),de.stateNode=ne,de.return=f,f.child=de,ya=f,ca=null,de=!0):de=!1),de||Xe(f)}if(ne=f.memoizedState,ne!==null&&(ne=ne.dehydrated,ne!==null))return fh(ne)?f.lanes=16:f.lanes=536870912,null;Xi(f)}return ne=A.children,A=A.fallback,R?(Pr(),R=f.mode,ne=Og({mode:"hidden",children:ne},R),A=go(A,R,y,null),ne.return=f,A.return=f,ne.sibling=A,f.child=ne,R=f.child,R.memoizedState=Bg(y),R.childLanes=Dg(u,Y,y),f.memoizedState=xa,A):(Ir(f),Yf(f,ne))}if(de=u.memoizedState,de!==null&&(ne=de.dehydrated,ne!==null)){if(O)f.flags&256?(Ir(f),f.flags&=-257,f=Ng(u,f,y)):f.memoizedState!==null?(Pr(),f.child=u.child,f.flags|=128,f=null):(Pr(),R=A.fallback,ne=f.mode,A=Og({mode:"visible",children:A.children},ne),R=go(R,ne,y,null),R.flags|=2,A.return=f,R.return=f,A.sibling=R,f.child=A,xl(f,u.child,null,y),A=f.child,A.memoizedState=Bg(y),A.childLanes=Dg(u,Y,y),f.memoizedState=xa,f=R);else if(Ir(f),fh(ne))Y=Gx(ne).digest,A=Error(a(419)),A.stack="",A.digest=Y,Et({value:A,source:null,stack:null}),f=Ng(u,f,y);else if(Ai||sc(u,f,y,!1),Y=(y&u.childLanes)!==0,Ai||Y){if(Y=cn,Y!==null){if(A=y&-y,(A&42)!==0)A=1;else switch(A){case 2:A=1;break;case 8:A=4;break;case 32:A=16;break;case 128:case 256:case 512:case 1024:case 2048:case 4096:case 8192:case 16384:case 32768:case 65536:case 131072:case 262144:case 524288:case 1048576:case 2097152:case 4194304:case 8388608:case 16777216:case 33554432:A=64;break;case 268435456:A=134217728;break;default:A=0}if(A=(A&(Y.suspendedLanes|y))!==0?0:A,A!==0&&A!==de.retryLane)throw de.retryLane=A,et(u,A),ma(Y,u,A),cb}Tp(ne)||Xa(),f=Ng(u,f,y)}else Tp(ne)?(f.flags|=128,f.child=u.child,f=dc.bind(null,u),qM(ne,f),f=null):(u=de.treeContext,Ra&&(ca=jx(ne),ya=f,An=!0,br=null,Vr=!1,u!==null&&(_r[xr++]=Hs,_r[xr++]=Gr,_r[xr++]=cs,Hs=u.id,Gr=u.overflow,cs=f)),f=Yf(f,A.children),f.flags|=4096);return f}return R?(Pr(),R=A.fallback,ne=f.mode,de=u.child,O=de.sibling,A=ga(de,{mode:"hidden",children:A.children}),A.subtreeFlags=de.subtreeFlags&31457280,O!==null?R=ga(O,R):(R=go(R,ne,y,null),R.flags|=2),R.return=f,A.return=f,A.sibling=R,f.child=A,A=R,R=f.child,ne=u.child.memoizedState,ne===null?ne=Bg(y):(de=ne.cachePool,de!==null?(O=Ps?Nn._currentValue:Nn._currentValue2,de=de.parent!==O?{parent:O,pool:O}:de):de=Sx(),ne={baseLanes:ne.baseLanes|y,cachePool:de}),R.memoizedState=ne,R.childLanes=Dg(u,Y,y),f.memoizedState=xa,A):(Ir(f),y=u.child,u=y.sibling,y=ga(y,{mode:"visible",children:A.children}),y.return=f,y.sibling=null,u!==null&&(Y=f.deletions,Y===null?(f.deletions=[u],f.flags|=16):Y.push(u)),f.child=y,f.memoizedState=null,y)}function Yf(u,f){return f=Og({mode:"visible",children:f},u.mode),f.return=u,u.child=f}function Og(u,f){return mp(u,f,0,null)}function Ng(u,f,y){return xl(f,u.child,null,y),u=Yf(f,f.pendingProps.children),u.flags|=2,f.memoizedState=null,u}function xx(u,f,y){u.lanes|=f;var A=u.alternate;A!==null&&(A.lanes|=f),Lg(u.return,f,y)}function $d(u,f,y,A,R){var O=u.memoizedState;O===null?u.memoizedState={isBackwards:f,rendering:null,renderingStartTime:0,last:A,tail:y,tailMode:R}:(O.isBackwards=f,O.rendering=null,O.renderingStartTime=0,O.last=A,O.tail=y,O.tailMode=R)}function bx(u,f,y){var A=f.pendingProps,R=A.revealOrder,O=A.tail;if(ia(u,f,A.children,y),A=Oi.current,(A&2)!==0)A=A&1|2,f.flags|=128;else{if(u!==null&&(u.flags&128)!==0)e:for(u=f.child;u!==null;){if(u.tag===13)u.memoizedState!==null&&xx(u,y,f);else if(u.tag===19)xx(u,y,f);else if(u.child!==null){u.child.return=u,u=u.child;continue}if(u===f)break e;for(;u.sibling===null;){if(u.return===null||u.return===f)break e;u=u.return}u.sibling.return=u.return,u=u.sibling}A&=1}switch(w(Oi,A),R){case"forwards":for(y=f.child,R=null;y!==null;)u=y.alternate,u!==null&&Ma(u)===null&&(R=y),y=y.sibling;y=R,y===null?(R=f.child,f.child=null):(R=y.sibling,y.sibling=null),$d(f,!1,R,y,O);break;case"backwards":for(y=null,R=f.child,f.child=null;R!==null;){if(u=R.alternate,u!==null&&Ma(u)===null){f.child=R;break}u=R.sibling,R.sibling=y,y=R,R=u}$d(f,!0,y,null,O);break;case"together":$d(f,!1,null,null,void 0);break;default:f.memoizedState=null}return f.child}function oo(u,f,y){if(u!==null&&(f.dependencies=u.dependencies),Tr|=f.lanes,(y&f.childLanes)===0)if(u!==null){if(sc(u,f,y,!1),(y&f.childLanes)===0)return null}else return null;if(u!==null&&f.child!==u.child)throw Error(a(153));if(f.child!==null){for(u=f.child,y=ga(u,u.pendingProps),f.child=y,y.return=f;u.sibling!==null;)u=u.sibling,y=y.sibling=ga(u,u.pendingProps),y.return=f;y.sibling=null}return f.child}function Ug(u,f){return(u.lanes&f)!==0?!0:(u=u.dependencies,!!(u!==null&&Zo(u)))}function XM(u,f,y){switch(f.tag){case 3:De(f,f.stateNode.containerInfo),Qo(f,Nn,u.memoizedState.cache),en();break;case 27:case 5:ge(f);break;case 4:De(f,f.stateNode.containerInfo);break;case 10:Qo(f,f.type,f.memoizedProps.value);break;case 13:var A=f.memoizedState;if(A!==null)return A.dehydrated!==null?(Ir(f),f.flags|=128,null):(y&f.child.childLanes)!==0?_x(u,f,y):(Ir(f),u=oo(u,f,y),u!==null?u.sibling:null);Ir(f);break;case 19:var R=(u.flags&128)!==0;if(A=(y&f.childLanes)!==0,A||(sc(u,f,y,!1),A=(y&f.childLanes)!==0),R){if(A)return bx(u,f,y);f.flags|=128}if(R=f.memoizedState,R!==null&&(R.rendering=null,R.tail=null,R.lastEffect=null),w(Oi,Oi.current),A)break;return null;case 22:case 23:return f.lanes=0,mx(u,f,y);case 24:Qo(f,Nn,u.memoizedState.cache)}return oo(u,f,y)}function Ax(u,f,y){if(u!==null)if(u.memoizedProps!==f.pendingProps)Ai=!0;else{if(!Ug(u,y)&&(f.flags&128)===0)return Ai=!1,XM(u,f,y);Ai=(u.flags&131072)!==0}else Ai=!1,An&&(f.flags&1048576)!==0&&q(f,vh,f.index);switch(f.lanes=0,f.tag){case 16:e:{u=f.pendingProps;var A=f.elementType,R=A._init;if(A=R(A._payload),f.type=A,typeof A=="function")po(A)?(u=as(A,u),f.tag=1,f=wg(null,f,A,u,y)):(f.tag=0,f=Rg(null,f,A,u,y));else{if(A!=null){if(R=A.$$typeof,R===Au){f.tag=11,f=dx(null,f,A,u,y);break e}else if(R===ih){f.tag=14,f=px(null,f,A,u,y);break e}}throw f=l(A)||A,Error(a(306,f,""))}}return f;case 0:return Rg(u,f,f.type,f.pendingProps,y);case 1:return A=f.type,R=as(A,f.pendingProps),wg(u,f,A,R,y);case 3:e:{if(De(f,f.stateNode.containerInfo),u===null)throw Error(a(387));var O=f.pendingProps;R=f.memoizedState,A=R.element,wt(u,f),Yt(f,O,null,y);var Y=f.memoizedState;if(O=Y.cache,Qo(f,Nn,O),O!==R.cache&&Ig(f,[Nn],y,!0),Je(),O=Y.element,Ra&&R.isDehydrated)if(R={element:O,isDehydrated:!1,cache:Y.cache},f.updateQueue.baseState=R,f.memoizedState=R,f.flags&256){f=yx(u,f,O,y);break e}else if(O!==A){A=pe(Error(a(424)),f),Et(A),f=yx(u,f,O,y);break e}else for(Ra&&(ca=Xx(f.stateNode.containerInfo),ya=f,An=!0,br=null,Vr=!0),y=I0(f,null,O,y),f.child=y;y;)y.flags=y.flags&-3|4096,y=y.sibling;else{if(en(),O===A){f=oo(u,f,y);break e}ia(u,f,O,y)}f=f.child}return f;case 26:if(vr)return jf(u,f),u===null?(y=Dp(f.type,null,f.pendingProps,null))?f.memoizedState=y:An||(f.stateNode=JM(f.type,f.pendingProps,us.current,f)):f.memoizedState=Dp(f.type,u.memoizedProps,f.pendingProps,u.memoizedState),null;case 27:if(oa)return ge(f),u===null&&oa&&An&&(A=f.stateNode=O0(f.type,f.pendingProps,us.current,Qi.current,!1),ya=f,Vr=!0,ca=Cp(A)),A=f.pendingProps.children,u!==null||An?ia(u,f,A,y):f.child=xl(f,null,A,y),jf(u,f),f.child;case 5:return u===null&&An&&($x(f.type,f.pendingProps,Qi.current),(R=A=ca)&&(A=Yx(A,f.type,f.pendingProps,Vr),A!==null?(f.stateNode=A,ya=f,ca=Cp(A),Vr=!1,R=!0):R=!1),R||Xe(f)),ge(f),R=f.type,O=f.pendingProps,Y=u!==null?u.memoizedProps:null,A=O.children,ml(R,O)?A=null:Y!==null&&ml(R,Y)&&(f.flags|=32),f.memoizedState!==null&&(R=ur(u,f,Xd,null,null,y),Ps?kt._currentValue=R:kt._currentValue2=R),jf(u,f),ia(u,f,A,y),f.child;case 6:return u===null&&An&&(eb(f.pendingProps,Qi.current),(u=y=ca)&&(y=qx(y,f.pendingProps,Vr),y!==null?(f.stateNode=y,ya=f,ca=null,u=!0):u=!1),u||Xe(f)),null;case 13:return _x(u,f,y);case 4:return De(f,f.stateNode.containerInfo),A=f.pendingProps,u===null?f.child=xl(f,null,A,y):ia(u,f,A,y),f.child;case 11:return dx(u,f,f.type,f.pendingProps,y);case 7:return ia(u,f,f.pendingProps,y),f.child;case 8:return ia(u,f,f.pendingProps.children,y),f.child;case 12:return ia(u,f,f.pendingProps.children,y),f.child;case 10:return A=f.pendingProps,Qo(f,f.type,A.value),ia(u,f,A.children,y),f.child;case 9:return R=f.type._context,A=f.pendingProps.children,oc(f),R=aa(R),A=A(R),f.flags|=1,ia(u,f,A,y),f.child;case 14:return px(u,f,f.type,f.pendingProps,y);case 15:return Zd(u,f,f.type,f.pendingProps,y);case 19:return bx(u,f,y);case 22:return mx(u,f,y);case 24:return oc(f),A=aa(Nn),u===null?(R=$o(),R===null&&(R=cn,O=ep(),R.pooledCache=O,O.refCount++,O!==null&&(R.pooledCacheLanes|=y),R=O),f.memoizedState={parent:A,cache:R},gt(f),Qo(f,Nn,R)):((u.lanes&y)!==0&&(wt(u,f),Yt(f,null,null,y),Je()),R=u.memoizedState,O=f.memoizedState,R.parent!==A?(R={parent:A,cache:A},f.memoizedState=R,f.lanes===0&&(f.memoizedState=f.updateQueue.baseState=R),Qo(f,Nn,A)):(A=O.cache,Qo(f,Nn,A),A!==R.cache&&Ig(f,[Nn],y,!0))),ia(u,f,f.pendingProps.children,y),f.child;case 29:throw f.pendingProps}throw Error(a(156,f.tag))}function Qo(u,f,y){Ps?(w(Ja,f._currentValue),f._currentValue=y):(w(Ja,f._currentValue2),f._currentValue2=y)}function lo(u){var f=Ja.current;Ps?u._currentValue=f:u._currentValue2=f,M(Ja)}function Lg(u,f,y){for(;u!==null;){var A=u.alternate;if((u.childLanes&f)!==f?(u.childLanes|=f,A!==null&&(A.childLanes|=f)):A!==null&&(A.childLanes&f)!==f&&(A.childLanes|=f),u===y)break;u=u.return}}function Ig(u,f,y,A){var R=u.child;for(R!==null&&(R.return=u);R!==null;){var O=R.dependencies;if(O!==null){var Y=R.child;O=O.firstContext;e:for(;O!==null;){var ne=O;O=R;for(var de=0;de<f.length;de++)if(ne.context===f[de]){O.lanes|=y,ne=O.alternate,ne!==null&&(ne.lanes|=y),Lg(O.return,y,u),A||(Y=null);break e}O=ne.next}}else if(R.tag===18){if(Y=R.return,Y===null)throw Error(a(341));Y.lanes|=y,O=Y.alternate,O!==null&&(O.lanes|=y),Lg(Y,y,u),Y=null}else Y=R.child;if(Y!==null)Y.return=R;else for(Y=R;Y!==null;){if(Y===u){Y=null;break}if(R=Y.sibling,R!==null){R.return=Y.return,Y=R;break}Y=Y.return}R=Y}}function sc(u,f,y,A){u=null;for(var R=f,O=!1;R!==null;){if(!O){if((R.flags&524288)!==0)O=!0;else if((R.flags&262144)!==0)break}if(R.tag===10){var Y=R.alternate;if(Y===null)throw Error(a(387));if(Y=Y.memoizedProps,Y!==null){var ne=R.type;yr(R.pendingProps.value,Y.value)||(u!==null?u.push(ne):u=[ne])}}else if(R===wu.current){if(Y=R.alternate,Y===null)throw Error(a(387));Y.memoizedState.memoizedState!==R.memoizedState.memoizedState&&(u!==null?u.push(kt):u=[kt])}R=R.return}u!==null&&Ig(f,u,y,A),f.flags|=262144}function Zo(u){for(u=u.firstContext;u!==null;){var f=u.context;if(!yr(Ps?f._currentValue:f._currentValue2,u.memoizedValue))return!0;u=u.next}return!1}function oc(u){Al=u,pi=null,u=u.dependencies,u!==null&&(u.firstContext=null)}function aa(u){return Pg(Al,u)}function qf(u,f){return Al===null&&oc(u),Pg(u,f)}function Pg(u,f){var y=Ps?f._currentValue:f._currentValue2;if(f={context:f,memoizedValue:y,next:null},pi===null){if(u===null)throw Error(a(308));pi=f,u.dependencies={lanes:0,firstContext:f},u.flags|=524288}else pi=pi.next=f;return y}function ep(){return{controller:new ub,data:new Map,refCount:0}}function ou(u){u.refCount--,u.refCount===0&&Mo(Sc,function(){u.controller.abort()})}function $o(){var u=Eo.current;return u!==null?u:cn.pooledCache}function tp(u,f){f===null?w(Eo,Eo.current):w(Eo,f.pool)}function Sx(){var u=$o();return u===null?null:{parent:Ps?Nn._currentValue:Nn._currentValue2,pool:u}}function hr(u){u.flags|=4}function Fg(u,f){if(u!==null&&u.child===f.child)return!1;if((f.flags&16)!==0)return!0;for(u=f.child;u!==null;){if((u.flags&13878)!==0||(u.subtreeFlags&13878)!==0)return!0;u=u.sibling}return!1}function np(u,f,y,A){if(sa)for(y=f.child;y!==null;){if(y.tag===5||y.tag===6)Is(u,y.stateNode);else if(!(y.tag===4||oa&&y.tag===27)&&y.child!==null){y.child.return=y,y=y.child;continue}if(y===f)break;for(;y.sibling===null;){if(y.return===null||y.return===f)return;y=y.return}y.sibling.return=y.return,y=y.sibling}else if(mr)for(var R=f.child;R!==null;){if(R.tag===5){var O=R.stateNode;y&&A&&(O=_0(O,R.type,R.memoizedProps)),Is(u,O)}else if(R.tag===6)O=R.stateNode,y&&A&&(O=x0(O,R.memoizedProps)),Is(u,O);else if(R.tag!==4){if(R.tag===22&&R.memoizedState!==null)O=R.child,O!==null&&(O.return=R),np(u,R,!0,!0);else if(R.child!==null){R.child.return=R,R=R.child;continue}}if(R===f)break;for(;R.sibling===null;){if(R.return===null||R.return===f)return;R=R.return}R.sibling.return=R.return,R=R.sibling}}function lu(u,f,y,A){if(mr)for(var R=f.child;R!==null;){if(R.tag===5){var O=R.stateNode;y&&A&&(O=_0(O,R.type,R.memoizedProps)),v0(u,O)}else if(R.tag===6)O=R.stateNode,y&&A&&(O=x0(O,R.memoizedProps)),v0(u,O);else if(R.tag!==4){if(R.tag===22&&R.memoizedState!==null)O=R.child,O!==null&&(O.return=R),lu(u,R,!(R.memoizedProps!==null&&R.memoizedProps.mode==="manual"),!0);else if(R.child!==null){R.child.return=R,R=R.child;continue}}if(R===f)break;for(;R.sibling===null;){if(R.return===null||R.return===f)return;R=R.return}R.sibling.return=R.return,R=R.sibling}}function cu(u,f){if(mr&&Fg(u,f)){u=f.stateNode;var y=u.containerInfo,A=Ep();lu(A,f,!1,!1),u.pendingChildren=A,hr(f),Hx(y,A)}}function zg(u,f,y,A){if(sa)u.memoizedProps!==A&&hr(f);else if(mr){var R=u.stateNode,O=u.memoizedProps;if((u=Fg(u,f))||O!==A){var Y=Qi.current;O=g0(R,y,O,A,!u,null),O===R?f.stateNode=R:(yo(O,y,A,Y)&&hr(f),f.stateNode=O,u?np(O,f,!1,!1):hr(f))}else f.stateNode=R}}function uu(u,f,y){if(Px(f,y)){if(u.flags|=16777216,!_o(f,y))if($f())u.flags|=8192;else throw Ac=Ip,L0}else u.flags&=-16777217}function Hg(u,f){if(tb(f)){if(u.flags|=16777216,!B0(f))if($f())u.flags|=8192;else throw Ac=Ip,L0}else u.flags&=-16777217}function Wf(u,f){f!==null&&(u.flags|=4),u.flags&16384&&(f=u.tag!==22?L():536870912,u.lanes|=f,Co|=f)}function lc(u,f){if(!An)switch(u.tailMode){case"hidden":f=u.tail;for(var y=null;f!==null;)f.alternate!==null&&(y=f),f=f.sibling;y===null?u.tail=null:y.sibling=null;break;case"collapsed":y=u.tail;for(var A=null;y!==null;)y.alternate!==null&&(A=y),y=y.sibling;A===null?f||u.tail===null?u.tail=null:u.tail.sibling=null:A.sibling=null}}function ei(u){var f=u.alternate!==null&&u.alternate.child===u.child,y=0,A=0;if(f)for(var R=u.child;R!==null;)y|=R.lanes|R.childLanes,A|=R.subtreeFlags&31457280,A|=R.flags&31457280,R.return=u,R=R.sibling;else for(R=u.child;R!==null;)y|=R.lanes|R.childLanes,A|=R.subtreeFlags,A|=R.flags,R.return=u,R=R.sibling;return u.subtreeFlags|=A,u.childLanes=y,f}function Mx(u,f,y){var A=f.pendingProps;switch(Te(f),f.tag){case 16:case 15:case 0:case 11:case 7:case 8:case 12:case 9:case 14:return ei(f),null;case 1:return ei(f),null;case 3:return y=f.stateNode,A=null,u!==null&&(A=u.memoizedState.cache),f.memoizedState.cache!==A&&(f.flags|=2048),lo(Nn),qe(),y.pendingContext&&(y.context=y.pendingContext,y.pendingContext=null),(u===null||u.child===null)&&(Vt(f)?hr(f):u===null||u.memoizedState.isDehydrated&&(f.flags&256)===0||(f.flags|=1024,br!==null&&(uo(br),br=null))),cu(u,f),ei(f),null;case 26:if(vr){y=f.type;var R=f.memoizedState;return u===null?(hr(f),R!==null?(ei(f),Hg(f,R)):(ei(f),uu(f,y,A))):R?R!==u.memoizedState?(hr(f),ei(f),Hg(f,R)):(ei(f),f.flags&=-16777217):(sa?u.memoizedProps!==A&&hr(f):zg(u,f,y,A),ei(f),uu(f,y,A)),null}case 27:if(oa){if(Ee(f),y=us.current,R=f.type,u!==null&&f.stateNode!=null)sa?u.memoizedProps!==A&&hr(f):zg(u,f,R,A);else{if(!A){if(f.stateNode===null)throw Error(a(166));return ei(f),null}u=Qi.current,Vt(f)?tt(f,u):(u=O0(R,A,y,u,!0),f.stateNode=u,hr(f))}return ei(f),null}case 5:if(Ee(f),y=f.type,u!==null&&f.stateNode!=null)zg(u,f,y,A);else{if(!A){if(f.stateNode===null)throw Error(a(166));return ei(f),null}u=Qi.current,Vt(f)?tt(f,u):(R=r0(y,A,us.current,u,f),np(R,f,!1,!1),f.stateNode=R,yo(R,y,A,u)&&hr(f))}return ei(f),uu(f,f.type,f.pendingProps),null;case 6:if(u&&f.stateNode!=null)y=u.memoizedProps,sa?y!==A&&hr(f):mr&&(y!==A?(f.stateNode=_p(A,us.current,Qi.current,f),hr(f)):f.stateNode=u.stateNode);else{if(typeof A!="string"&&f.stateNode===null)throw Error(a(166));if(u=us.current,y=Qi.current,Vt(f)){if(!Ra)throw Error(a(176));if(u=f.stateNode,y=f.memoizedProps,A=null,R=ya,R!==null)switch(R.tag){case 27:case 5:A=R.memoizedProps}Jx(u,y,f,A)||Xe(f)}else f.stateNode=_p(A,u,y,f)}return ei(f),null;case 13:if(A=f.memoizedState,u===null||u.memoizedState!==null&&u.memoizedState.dehydrated!==null){if(R=Vt(f),A!==null&&A.dehydrated!==null){if(u===null){if(!R)throw Error(a(318));if(!Ra)throw Error(a(344));if(R=f.memoizedState,R=R!==null?R.dehydrated:null,!R)throw Error(a(317));Mu(R,f)}else en(),(f.flags&128)===0&&(f.memoizedState=null),f.flags|=4;ei(f),R=!1}else br!==null&&(uo(br),br=null),R=!0;if(!R)return f.flags&256?(Xi(f),f):(Xi(f),null)}if(Xi(f),(f.flags&128)!==0)return f.lanes=y,f;if(y=A!==null,u=u!==null&&u.memoizedState!==null,y){A=f.child,R=null,A.alternate!==null&&A.alternate.memoizedState!==null&&A.alternate.memoizedState.cachePool!==null&&(R=A.alternate.memoizedState.cachePool.pool);var O=null;A.memoizedState!==null&&A.memoizedState.cachePool!==null&&(O=A.memoizedState.cachePool.pool),O!==R&&(A.flags|=2048)}return y!==u&&y&&(f.child.flags|=8192),Wf(f,f.updateQueue),ei(f),null;case 4:return qe(),cu(u,f),u===null&&l0(f.stateNode.containerInfo),ei(f),null;case 10:return lo(f.type),ei(f),null;case 19:if(M(Oi),R=f.memoizedState,R===null)return ei(f),null;if(A=(f.flags&128)!==0,O=R.rendering,O===null)if(A)lc(R,!1);else{if(_n!==0||u!==null&&(u.flags&128)!==0)for(u=f.child;u!==null;){if(O=Ma(u),O!==null){for(f.flags|=128,lc(R,!1),u=O.updateQueue,f.updateQueue=u,Wf(f,u),f.subtreeFlags=0,u=y,y=f.child;y!==null;)mo(y,u),y=y.sibling;return w(Oi,Oi.current&1|2),f.child}u=u.sibling}R.tail!==null&&la()>oi&&(f.flags|=128,A=!0,lc(R,!1),f.lanes=4194304)}else{if(!A)if(u=Ma(O),u!==null){if(f.flags|=128,A=!0,u=u.updateQueue,f.updateQueue=u,Wf(f,u),lc(R,!0),R.tail===null&&R.tailMode==="hidden"&&!O.alternate&&!An)return ei(f),null}else 2*la()-R.renderingStartTime>oi&&y!==536870912&&(f.flags|=128,A=!0,lc(R,!1),f.lanes=4194304);R.isBackwards?(O.sibling=f.child,f.child=O):(u=R.last,u!==null?u.sibling=O:f.child=O,R.last=O)}return R.tail!==null?(f=R.tail,R.rendering=f,R.tail=f.sibling,R.renderingStartTime=la(),f.sibling=null,u=Oi.current,w(Oi,A?u&1|2:u&1),f):(ei(f),null);case 22:case 23:return Xi(f),Yo(),A=f.memoizedState!==null,u!==null?u.memoizedState!==null!==A&&(f.flags|=8192):A&&(f.flags|=8192),A?(y&536870912)!==0&&(f.flags&128)===0&&(ei(f),f.subtreeFlags&6&&(f.flags|=8192)):ei(f),y=f.updateQueue,y!==null&&Wf(f,y.retryQueue),y=null,u!==null&&u.memoizedState!==null&&u.memoizedState.cachePool!==null&&(y=u.memoizedState.cachePool.pool),A=null,f.memoizedState!==null&&f.memoizedState.cachePool!==null&&(A=f.memoizedState.cachePool.pool),A!==y&&(f.flags|=2048),u!==null&&M(Eo),null;case 24:return y=null,u!==null&&(y=u.memoizedState.cache),f.memoizedState.cache!==y&&(f.flags|=2048),lo(Nn),ei(f),null;case 25:return null}throw Error(a(156,f.tag))}function Ex(u,f){switch(Te(f),f.tag){case 1:return u=f.flags,u&65536?(f.flags=u&-65537|128,f):null;case 3:return lo(Nn),qe(),u=f.flags,(u&65536)!==0&&(u&128)===0?(f.flags=u&-65537|128,f):null;case 26:case 27:case 5:return Ee(f),null;case 13:if(Xi(f),u=f.memoizedState,u!==null&&u.dehydrated!==null){if(f.alternate===null)throw Error(a(340));en()}return u=f.flags,u&65536?(f.flags=u&-65537|128,f):null;case 19:return M(Oi),null;case 4:return qe(),null;case 10:return lo(f.type),null;case 22:case 23:return Xi(f),Yo(),u!==null&&M(Eo),u=f.flags,u&65536?(f.flags=u&-65537|128,f):null;case 24:return lo(Nn),null;case 25:return null;default:return null}}function Gg(u,f){switch(Te(f),f.tag){case 3:lo(Nn),qe();break;case 26:case 27:case 5:Ee(f);break;case 4:qe();break;case 13:Xi(f);break;case 19:M(Oi);break;case 10:lo(f.type);break;case 22:case 23:Xi(f),Yo(),u!==null&&M(Eo);break;case 24:lo(Nn)}}function Jf(u,f){try{var y=f.updateQueue,A=y!==null?y.lastEffect:null;if(A!==null){var R=A.next;y=R;do{if((y.tag&u)===u){A=void 0;var O=y.create,Y=y.inst;A=O(),Y.destroy=A}y=y.next}while(y!==R)}}catch(ne){fn(f,f.return,ne)}}function el(u,f,y){try{var A=f.updateQueue,R=A!==null?A.lastEffect:null;if(R!==null){var O=R.next;A=O;do{if((A.tag&u)===u){var Y=A.inst,ne=Y.destroy;if(ne!==void 0){Y.destroy=void 0,R=f;var de=y;try{ne()}catch(Ue){fn(R,de,Ue)}}}A=A.next}while(A!==O)}}catch(Ue){fn(f,f.return,Ue)}}function Tx(u){var f=u.updateQueue;if(f!==null){var y=u.stateNode;try{rt(f,y)}catch(A){fn(u,u.return,A)}}}function Cx(u,f,y){y.props=as(u.type,u.memoizedProps),y.state=u.memoizedState;try{y.componentWillUnmount()}catch(A){fn(u,f,A)}}function cc(u,f){try{var y=u.ref;if(y!==null){var A=u.stateNode;switch(u.tag){case 26:case 27:case 5:var R=Su(A);break;default:R=A}typeof y=="function"?u.refCleanup=y(R):y.current=R}}catch(O){fn(u,f,O)}}function ti(u,f){var y=u.ref,A=u.refCleanup;if(y!==null)if(typeof A=="function")try{A()}catch(R){fn(u,f,R)}finally{u.refCleanup=null,u=u.alternate,u!=null&&(u.refCleanup=null)}else if(typeof y=="function")try{y(null)}catch(R){fn(u,f,R)}else y.current=null}function fu(u){var f=u.type,y=u.memoizedProps,A=u.stateNode;try{YM(A,f,y,u)}catch(R){fn(u,u.return,R)}}function Vg(u,f,y){try{h0(u.stateNode,u.type,y,f,u)}catch(A){fn(u,u.return,A)}}function kg(u){return u.tag===5||u.tag===3||(vr?u.tag===26:!1)||(oa?u.tag===27:!1)||u.tag===4}function ip(u){e:for(;;){for(;u.sibling===null;){if(u.return===null||kg(u.return))return null;u=u.return}for(u.sibling.return=u.return,u=u.sibling;u.tag!==5&&u.tag!==6&&(!oa||u.tag!==27)&&u.tag!==18;){if(u.flags&2||u.child===null||u.tag===4)continue e;u.child.return=u,u=u.child}if(!(u.flags&2))return u.stateNode}}function ap(u,f,y){var A=u.tag;if(A===5||A===6)u=u.stateNode,f?p0(y,u,f):Fx(y,u);else if(!(A===4||oa&&A===27)&&(u=u.child,u!==null))for(ap(u,f,y),u=u.sibling;u!==null;)ap(u,f,y),u=u.sibling}function hu(u,f,y){var A=u.tag;if(A===5||A===6)u=u.stateNode,f?d0(y,u,f):f0(y,u);else if(!(A===4||oa&&A===27)&&(u=u.child,u!==null))for(hu(u,f,y),u=u.sibling;u!==null;)hu(u,f,y),u=u.sibling}function Rx(u,f,y){u=u.containerInfo;try{y0(u,y)}catch(A){fn(f,f.return,A)}}function du(u,f){for(pl(u.containerInfo),mi=f;mi!==null;)if(u=mi,f=u.child,(u.subtreeFlags&1028)!==0&&f!==null)f.return=u,mi=f;else for(;mi!==null;){u=mi;var y=u.alternate;switch(f=u.flags,u.tag){case 0:break;case 11:case 15:break;case 1:if((f&1024)!==0&&y!==null){f=void 0;var A=u,R=y.memoizedProps;y=y.memoizedState;var O=A.stateNode;try{var Y=as(A.type,R,A.elementType===A.type);f=O.getSnapshotBeforeUpdate(Y,y),O.__reactInternalSnapshotBeforeUpdate=f}catch(ne){fn(A,A.return,ne)}}break;case 3:(f&1024)!==0&&sa&&Mp(u.stateNode.containerInfo);break;case 5:case 26:case 27:case 6:case 4:case 17:break;default:if((f&1024)!==0)throw Error(a(163))}if(f=u.sibling,f!==null){f.return=u.return,mi=f;break}mi=u.return}return Y=Mc,Mc=!1,Y}function rp(u,f,y){var A=y.flags;switch(y.tag){case 0:case 11:case 15:Bs(u,y),A&4&&Jf(5,y);break;case 1:if(Bs(u,y),A&4)if(u=y.stateNode,f===null)try{u.componentDidMount()}catch(ne){fn(y,y.return,ne)}else{var R=as(y.type,f.memoizedProps);f=f.memoizedState;try{u.componentDidUpdate(R,f,u.__reactInternalSnapshotBeforeUpdate)}catch(ne){fn(y,y.return,ne)}}A&64&&Tx(y),A&512&&cc(y,y.return);break;case 3:if(Bs(u,y),A&64&&(A=y.updateQueue,A!==null)){if(u=null,y.child!==null)switch(y.child.tag){case 27:case 5:u=Su(y.child.stateNode);break;case 1:u=y.child.stateNode}try{rt(A,u)}catch(ne){fn(y,y.return,ne)}}break;case 26:if(vr){Bs(u,y),A&512&&cc(y,y.return);break}case 27:case 5:Bs(u,y),f===null&&A&4&&fu(y),A&512&&cc(y,y.return);break;case 12:Bs(u,y);break;case 13:Bs(u,y),A&4&&tl(u,y);break;case 22:if(R=y.memoizedState!==null||Hi,!R){f=f!==null&&f.memoizedState!==null||si;var O=Hi,Y=si;Hi=R,(si=f)&&!Y?il(u,y,(y.subtreeFlags&8772)!==0):Bs(u,y),Hi=O,si=Y}A&512&&(y.memoizedProps.mode==="manual"?cc(y,y.return):ti(y,y.return));break;default:Bs(u,y)}}function pu(u){var f=u.alternate;f!==null&&(u.alternate=null,pu(f)),u.child=null,u.deletions=null,u.sibling=null,u.tag===5&&(f=u.stateNode,f!==null&&c0(f)),u.stateNode=null,u.return=null,u.dependencies=null,u.memoizedProps=null,u.memoizedState=null,u.pendingProps=null,u.stateNode=null,u.updateQueue=null}function dr(u,f,y){for(y=y.child;y!==null;)sp(u,f,y),y=y.sibling}function sp(u,f,y){if(qa&&typeof qa.onCommitFiberUnmount=="function")try{qa.onCommitFiberUnmount(Ru,y)}catch{}switch(y.tag){case 26:if(vr){si||ti(y,f),dr(u,f,y),y.memoizedState?E0(y.memoizedState):y.stateNode&&R0(y.stateNode);break}case 27:if(oa){si||ti(y,f);var A=Si,R=Ka;Si=y.stateNode,dr(u,f,y),nb(y.stateNode),Si=A,Ka=R;break}case 5:si||ti(y,f);case 6:if(sa){if(A=Si,R=Ka,Si=null,dr(u,f,y),Si=A,Ka=R,Si!==null)if(Ka)try{xi(Si,y.stateNode)}catch(O){fn(y,f,O)}else try{wa(Si,y.stateNode)}catch(O){fn(y,f,O)}}else dr(u,f,y);break;case 18:sa&&Si!==null&&(Ka?A0(Si,y.stateNode):Qx(Si,y.stateNode));break;case 4:sa?(A=Si,R=Ka,Si=y.stateNode.containerInfo,Ka=!0,dr(u,f,y),Si=A,Ka=R):(mr&&Rx(y.stateNode,y,Ep()),dr(u,f,y));break;case 0:case 11:case 14:case 15:si||el(2,y,f),si||el(4,y,f),dr(u,f,y);break;case 1:si||(ti(y,f),A=y.stateNode,typeof A.componentWillUnmount=="function"&&Cx(y,f,A)),dr(u,f,y);break;case 21:dr(u,f,y);break;case 22:si||ti(y,f),si=(A=si)||y.memoizedState!==null,dr(u,f,y),si=A;break;default:dr(u,f,y)}}function tl(u,f){if(Ra&&f.memoizedState===null&&(u=f.alternate,u!==null&&(u=u.memoizedState,u!==null&&(u=u.dehydrated,u!==null))))try{wp(u)}catch(y){fn(f,f.return,y)}}function mu(u){switch(u.tag){case 13:case 19:var f=u.stateNode;return f===null&&(f=u.stateNode=new Uu),f;case 22:return u=u.stateNode,f=u._retryCache,f===null&&(f=u._retryCache=new Uu),f;default:throw Error(a(435,u.tag))}}function Kf(u,f){var y=mu(u);f.forEach(function(A){var R=Wg.bind(null,u,A);y.has(A)||(y.add(A),A.then(R,R))})}function Ea(u,f){var y=f.deletions;if(y!==null)for(var A=0;A<y.length;A++){var R=y[A],O=u,Y=f;if(sa){var ne=Y;e:for(;ne!==null;){switch(ne.tag){case 27:case 5:Si=ne.stateNode,Ka=!1;break e;case 3:Si=ne.stateNode.containerInfo,Ka=!0;break e;case 4:Si=ne.stateNode.containerInfo,Ka=!0;break e}ne=ne.return}if(Si===null)throw Error(a(160));sp(O,Y,R),Si=null,Ka=!1}else sp(O,Y,R);O=R.alternate,O!==null&&(O.return=null),R.return=null}if(f.subtreeFlags&13878)for(f=f.child;f!==null;)nl(f,u),f=f.sibling}function nl(u,f){var y=u.alternate,A=u.flags;switch(u.tag){case 0:case 11:case 14:case 15:Ea(f,u),Va(u),A&4&&(el(3,u,u.return),Jf(3,u),el(5,u,u.return));break;case 1:Ea(f,u),Va(u),A&512&&(si||y===null||ti(y,y.return)),A&64&&Hi&&(u=u.updateQueue,u!==null&&(A=u.callbacks,A!==null&&(y=u.shared.hiddenCallbacks,u.shared.hiddenCallbacks=y===null?A:y.concat(A))));break;case 26:if(vr){var R=Ba;Ea(f,u),Va(u),A&512&&(si||y===null||ti(y,y.return)),A&4&&(A=y!==null?y.memoizedState:null,f=u.memoizedState,y===null?f===null?u.stateNode===null?u.stateNode=T0(R,u.type,u.memoizedProps,u):C0(R,u.type,u.stateNode):u.stateNode=M0(R,f,u.memoizedProps):A!==f?(A===null?y.stateNode!==null&&R0(y.stateNode):E0(A),f===null?C0(R,u.type,u.stateNode):M0(R,f,u.memoizedProps)):f===null&&u.stateNode!==null&&Vg(u,u.memoizedProps,y.memoizedProps));break}case 27:if(oa&&A&4&&u.alternate===null){R=u.stateNode;var O=u.memoizedProps;try{KM(R),QM(u.type,O,R,u)}catch(We){fn(u,u.return,We)}}case 5:if(Ea(f,u),Va(u),A&512&&(si||y===null||ti(y,y.return)),sa){if(u.flags&32){f=u.stateNode;try{ch(f)}catch(We){fn(u,u.return,We)}}A&4&&u.stateNode!=null&&(f=u.memoizedProps,Vg(u,f,y!==null?y.memoizedProps:f)),A&1024&&(Sl=!0)}break;case 6:if(Ea(f,u),Va(u),A&4&&sa){if(u.stateNode===null)throw Error(a(162));A=u.memoizedProps,y=y!==null?y.memoizedProps:A,f=u.stateNode;try{zx(f,y,A)}catch(We){fn(u,u.return,We)}}break;case 3:if(vr?(w0(),R=Ba,Ba=Bp(f.containerInfo),Ea(f,u),Ba=R):Ea(f,u),Va(u),A&4){if(sa&&Ra&&y!==null&&y.memoizedState.isDehydrated)try{Rp(f.containerInfo)}catch(We){fn(u,u.return,We)}if(mr){A=f.containerInfo,y=f.pendingChildren;try{y0(A,y)}catch(We){fn(u,u.return,We)}}}Sl&&(Sl=!1,Xg(u));break;case 4:vr?(y=Ba,Ba=Bp(u.stateNode.containerInfo),Ea(f,u),Va(u),Ba=y):(Ea(f,u),Va(u)),A&4&&mr&&Rx(u.stateNode,u,u.stateNode.pendingChildren);break;case 12:Ea(f,u),Va(u);break;case 13:Ea(f,u),Va(u),u.child.flags&8192&&u.memoizedState!==null!=(y!==null&&y.memoizedState!==null)&&(Xs=la()),A&4&&(A=u.updateQueue,A!==null&&(u.updateQueue=null,Kf(u,A)));break;case 22:A&512&&(si||y===null||ti(y,y.return)),R=u.memoizedState!==null;var Y=y!==null&&y.memoizedState!==null,ne=Hi,de=si;if(Hi=ne||R,si=de||Y,Ea(f,u),si=de,Hi=ne,Va(u),f=u.stateNode,f._current=u,f._visibility&=-3,f._visibility|=f._pendingVisibility&2,A&8192&&(f._visibility=R?f._visibility&-2:f._visibility|1,R&&(f=Hi||si,y===null||Y||f||gu(u)),sa&&(u.memoizedProps===null||u.memoizedProps.mode!=="manual"))){e:if(y=null,sa)for(f=u;;){if(f.tag===5||vr&&f.tag===26||oa&&f.tag===27){if(y===null){Y=y=f;try{O=Y.stateNode,R?uh(O):m0(Y.stateNode,Y.memoizedProps)}catch(We){fn(Y,Y.return,We)}}}else if(f.tag===6){if(y===null){Y=f;try{var Ue=Y.stateNode;R?Sp(Ue):xo(Ue,Y.memoizedProps)}catch(We){fn(Y,Y.return,We)}}}else if((f.tag!==22&&f.tag!==23||f.memoizedState===null||f===u)&&f.child!==null){f.child.return=f,f=f.child;continue}if(f===u)break e;for(;f.sibling===null;){if(f.return===null||f.return===u)break e;y===f&&(y=null),f=f.return}y===f&&(y=null),f.sibling.return=f.return,f=f.sibling}}A&4&&(A=u.updateQueue,A!==null&&(y=A.retryQueue,y!==null&&(A.retryQueue=null,Kf(u,y))));break;case 19:Ea(f,u),Va(u),A&4&&(A=u.updateQueue,A!==null&&(u.updateQueue=null,Kf(u,A)));break;case 21:break;default:Ea(f,u),Va(u)}}function Va(u){var f=u.flags;if(f&2){try{if(sa&&(!oa||u.tag!==27)){e:{for(var y=u.return;y!==null;){if(kg(y)){var A=y;break e}y=y.return}throw Error(a(160))}switch(A.tag){case 27:if(oa){var R=A.stateNode,O=ip(u);hu(u,O,R);break}case 5:var Y=A.stateNode;A.flags&32&&(ch(Y),A.flags&=-33);var ne=ip(u);hu(u,ne,Y);break;case 3:case 4:var de=A.stateNode.containerInfo,Ue=ip(u);ap(u,Ue,de);break;default:throw Error(a(161))}}}catch(We){fn(u,u.return,We)}u.flags&=-3}f&4096&&(u.flags&=-4097)}function Xg(u){if(u.subtreeFlags&1024)for(u=u.child;u!==null;){var f=u;Xg(f),f.tag===5&&f.flags&1024&&Gn(f.stateNode),u=u.sibling}}function Bs(u,f){if(f.subtreeFlags&8772)for(f=f.child;f!==null;)rp(u,f.alternate,f),f=f.sibling}function gu(u){for(u=u.child;u!==null;){var f=u;switch(f.tag){case 0:case 11:case 14:case 15:el(4,f,f.return),gu(f);break;case 1:ti(f,f.return);var y=f.stateNode;typeof y.componentWillUnmount=="function"&&Cx(f,f.return,y),gu(f);break;case 26:case 27:case 5:ti(f,f.return),gu(f);break;case 22:ti(f,f.return),f.memoizedState===null&&gu(f);break;default:gu(f)}u=u.sibling}}function il(u,f,y){for(y=y&&(f.subtreeFlags&8772)!==0,f=f.child;f!==null;){var A=f.alternate,R=u,O=f,Y=O.flags;switch(O.tag){case 0:case 11:case 15:il(R,O,y),Jf(4,O);break;case 1:if(il(R,O,y),A=O,R=A.stateNode,typeof R.componentDidMount=="function")try{R.componentDidMount()}catch(Ue){fn(A,A.return,Ue)}if(A=O,R=A.updateQueue,R!==null){var ne=A.stateNode;try{var de=R.shared.hiddenCallbacks;if(de!==null)for(R.shared.hiddenCallbacks=null,R=0;R<de.length;R++)oe(de[R],ne)}catch(Ue){fn(A,A.return,Ue)}}y&&Y&64&&Tx(O),cc(O,O.return);break;case 26:case 27:case 5:il(R,O,y),y&&A===null&&Y&4&&fu(O),cc(O,O.return);break;case 12:il(R,O,y);break;case 13:il(R,O,y),y&&Y&4&&tl(R,O);break;case 22:O.memoizedState===null&&il(R,O,y),cc(O,O.return);break;default:il(R,O,y)}f=f.sibling}}function jg(u,f){var y=null;u!==null&&u.memoizedState!==null&&u.memoizedState.cachePool!==null&&(y=u.memoizedState.cachePool.pool),u=null,f.memoizedState!==null&&f.memoizedState.cachePool!==null&&(u=f.memoizedState.cachePool.pool),u!==y&&(u!=null&&u.refCount++,y!=null&&ou(y))}function op(u,f){u=null,f.alternate!==null&&(u=f.alternate.memoizedState.cache),f=f.memoizedState.cache,f!==u&&(f.refCount++,u!=null&&ou(u))}function co(u,f,y,A){if(f.subtreeFlags&10256)for(f=f.child;f!==null;)lp(u,f,y,A),f=f.sibling}function lp(u,f,y,A){var R=f.flags;switch(f.tag){case 0:case 11:case 15:co(u,f,y,A),R&2048&&Jf(9,f);break;case 3:co(u,f,y,A),R&2048&&(u=null,f.alternate!==null&&(u=f.alternate.memoizedState.cache),f=f.memoizedState.cache,f!==u&&(f.refCount++,u!=null&&ou(u)));break;case 12:if(R&2048){co(u,f,y,A),u=f.stateNode;try{var O=f.memoizedProps,Y=O.id,ne=O.onPostCommit;typeof ne=="function"&&ne(Y,f.alternate===null?"mount":"update",u.passiveEffectDuration,-0)}catch(de){fn(f,f.return,de)}}else co(u,f,y,A);break;case 23:break;case 22:O=f.stateNode,f.memoizedState!==null?O._visibility&4?co(u,f,y,A):al(u,f):O._visibility&4?co(u,f,y,A):(O._visibility|=4,pa(u,f,y,A,(f.subtreeFlags&10256)!==0)),R&2048&&jg(f.alternate,f);break;case 24:co(u,f,y,A),R&2048&&op(f.alternate,f);break;default:co(u,f,y,A)}}function pa(u,f,y,A,R){for(R=R&&(f.subtreeFlags&10256)!==0,f=f.child;f!==null;){var O=u,Y=f,ne=y,de=A,Ue=Y.flags;switch(Y.tag){case 0:case 11:case 15:pa(O,Y,ne,de,R),Jf(8,Y);break;case 23:break;case 22:var We=Y.stateNode;Y.memoizedState!==null?We._visibility&4?pa(O,Y,ne,de,R):al(O,Y):(We._visibility|=4,pa(O,Y,ne,de,R)),R&&Ue&2048&&jg(Y.alternate,Y);break;case 24:pa(O,Y,ne,de,R),R&&Ue&2048&&op(Y.alternate,Y);break;default:pa(O,Y,ne,de,R)}f=f.sibling}}function al(u,f){if(f.subtreeFlags&10256)for(f=f.child;f!==null;){var y=u,A=f,R=A.flags;switch(A.tag){case 22:al(y,A),R&2048&&jg(A.alternate,A);break;case 24:al(y,A),R&2048&&op(A.alternate,A);break;default:al(y,A)}f=f.sibling}}function qi(u){if(u.subtreeFlags&Ec)for(u=u.child;u!==null;)uc(u),u=u.sibling}function uc(u){switch(u.tag){case 26:qi(u),u.flags&Ec&&(u.memoizedState!==null?D0(Ba,u.memoizedState,u.memoizedProps):ui(u.type,u.memoizedProps));break;case 5:qi(u),u.flags&Ec&&ui(u.type,u.memoizedProps);break;case 3:case 4:if(vr){var f=Ba;Ba=Bp(u.stateNode.containerInfo),qi(u),Ba=f}else qi(u);break;case 22:u.memoizedState===null&&(f=u.alternate,f!==null&&f.memoizedState!==null?(f=Ec,Ec=16777216,qi(u),Ec=f):qi(u));break;default:qi(u)}}function cp(u){var f=u.alternate;if(f!==null&&(u=f.child,u!==null)){f.child=null;do f=u.sibling,u.sibling=null,u=f;while(u!==null)}}function rl(u){var f=u.deletions;if((u.flags&16)!==0){if(f!==null)for(var y=0;y<f.length;y++){var A=f[y];mi=A,sl(A,u)}cp(u)}if(u.subtreeFlags&10256)for(u=u.child;u!==null;)Qf(u),u=u.sibling}function Qf(u){switch(u.tag){case 0:case 11:case 15:rl(u),u.flags&2048&&el(9,u,u.return);break;case 3:rl(u);break;case 12:rl(u);break;case 22:var f=u.stateNode;u.memoizedState!==null&&f._visibility&4&&(u.return===null||u.return.tag!==13)?(f._visibility&=-5,vu(u)):rl(u);break;default:rl(u)}}function vu(u){var f=u.deletions;if((u.flags&16)!==0){if(f!==null)for(var y=0;y<f.length;y++){var A=f[y];mi=A,sl(A,u)}cp(u)}for(u=u.child;u!==null;){switch(f=u,f.tag){case 0:case 11:case 15:el(8,f,f.return),vu(f);break;case 22:y=f.stateNode,y._visibility&4&&(y._visibility&=-5,vu(f));break;default:vu(f)}u=u.sibling}}function sl(u,f){for(;mi!==null;){var y=mi;switch(y.tag){case 0:case 11:case 15:el(8,y,f);break;case 23:case 22:if(y.memoizedState!==null&&y.memoizedState.cachePool!==null){var A=y.memoizedState.cachePool.pool;A!=null&&A.refCount++}break;case 24:ou(y.memoizedState.cache)}if(A=y.child,A!==null)A.return=y,mi=A;else e:for(y=u;mi!==null;){A=mi;var R=A.sibling,O=A.return;if(pu(A),A===y){mi=null;break e}if(R!==null){R.return=O,mi=R;break e}mi=O}}}function up(u){var f=o0(u);if(f!=null){if(typeof f.memoizedProps["data-testname"]!="string")throw Error(a(364));return f}if(u=_c(u),u===null)throw Error(a(362));return u.stateNode.current}function yu(u,f){var y=u.tag;switch(f.$$typeof){case Eh:if(u.type===f.value)return!0;break;case Gp:e:{for(f=f.value,u=[u,0],y=0;y<u.length;){var A=u[y++],R=A.tag,O=u[y++],Y=f[O];if(R!==5&&R!==26&&R!==27||!zs(A)){for(;Y!=null&&yu(A,Y);)O++,Y=f[O];if(O===f.length){f=!0;break e}else for(A=A.child;A!==null;)u.push(A,O),A=A.sibling}}f=!1}return f;case Vp:if((y===5||y===26||y===27)&&jM(u.stateNode,f.value))return!0;break;case Un:if((y===5||y===6||y===26||y===27)&&(u=lh(u),u!==null&&0<=u.indexOf(f.value)))return!0;break;case yn:if((y===5||y===26||y===27)&&(u=u.memoizedProps["data-testname"],typeof u=="string"&&u.toLowerCase()===f.value.toLowerCase()))return!0;break;default:throw Error(a(365))}return!1}function ol(u){switch(u.$$typeof){case Eh:return"<"+(l(u.value)||"Unknown")+">";case Gp:return":has("+(ol(u)||"")+")";case Vp:return'[role="'+u.value+'"]';case Un:return'"'+u.value+'"';case yn:return'[data-testname="'+u.value+'"]';default:throw Error(a(365))}}function wx(u,f){var y=[];u=[u,0];for(var A=0;A<u.length;){var R=u[A++],O=R.tag,Y=u[A++],ne=f[Y];if(O!==5&&O!==26&&O!==27||!zs(R)){for(;ne!=null&&yu(R,ne);)Y++,ne=f[Y];if(Y===f.length)y.push(R);else for(R=R.child;R!==null;)u.push(R,Y),R=R.sibling}}return y}function Ta(u,f){if(!Fs)throw Error(a(363));u=up(u),u=wx(u,f),f=[],u=Array.from(u);for(var y=0;y<u.length;){var A=u[y++],R=A.tag;if(R===5||R===26||R===27)zs(A)||f.push(A.stateNode);else for(A=A.child;A!==null;)u.push(A),A=A.sibling}return f}function Ca(){if((Nt&2)!==0&&on!==0)return on&-on;if(Ft.T!==null){var u=Wa;return u!==0?u:Be()}return Hr()}function Ds(){Qa===0&&(Qa=(on&536870912)===0||An?j():536870912);var u=Mr.current;return u!==null&&(u.flags|=32),Qa}function ma(u,f,y){(u===cn&&Vn===2||u.cancelPendingCommit!==null)&&(ss(u,0),rs(u,on,Qa,!1)),W(u,y),((Nt&2)===0||u!==cn)&&(u===cn&&((Nt&2)===0&&(ds|=y),_n===4&&rs(u,on,Qa,!1)),Ze(u))}function Zf(u,f,y){if((Nt&6)!==0)throw Error(a(327));var A=!y&&(f&60)===0&&(f&u.expiredLanes)===0||U(u,f),R=A?Us(u,f):Os(u,f,!0),O=A;do{if(R===0){Er&&!A&&rs(u,f,0,!1);break}else if(R===6)rs(u,f,0,!Ln);else{if(y=u.current.alternate,O&&!Bx(y)){R=Os(u,f,!1),O=!1;continue}if(R===2){if(O=f,u.errorRecoveryDisabledLanes&O)var Y=0;else Y=u.pendingLanes&-536870913,Y=Y!==0?Y:Y&536870912?536870912:0;if(Y!==0){f=Y;e:{var ne=u;R=Lu;var de=Ra&&ne.current.memoizedState.isDehydrated;if(de&&(ss(ne,Y).flags|=256),Y=Os(ne,Y,!1),Y!==2){if(To&&!de){ne.errorRecoveryDisabledLanes|=O,ds|=O,R=4;break e}O=Cr,Cr=R,O!==null&&uo(O)}R=Y}if(O=!1,R!==2)continue}}if(R===1){ss(u,0),rs(u,f,0,!0);break}e:{switch(A=u,R){case 0:case 1:throw Error(a(345));case 4:if((f&4194176)===f){rs(A,f,Qa,!Ln);break e}break;case 2:Cr=null;break;case 3:case 5:break;default:throw Error(a(329))}if(A.finishedWork=y,A.finishedLanes=f,(f&62914560)===f&&(O=Xs+300-la(),10<O)){if(rs(A,f,Qa,!Ln),P(A,0)!==0)break e;A.timeoutHandle=s0(fp.bind(null,A,y,Cr,ps,Iu,f,Qa,ds,Co,Ln,2,-0,0),O);break e}fp(A,y,Cr,ps,Iu,f,Qa,ds,Co,Ln,0,-0,0)}}break}while(!0);Ze(u)}function uo(u){Cr===null?Cr=u:Cr.push.apply(Cr,u)}function fp(u,f,y,A,R,O,Y,ne,de,Ue,We,ht,mt){var Wt=f.subtreeFlags;if((Wt&8192||(Wt&16785408)===16785408)&&(gr(),uc(f),f=xp(),f!==null)){u.cancelPendingCommit=f(Wn.bind(null,u,y,A,R,Y,ne,de,1,ht,mt)),rs(u,O,Y,!Ue);return}Wn(u,y,A,R,Y,ne,de,We,ht,mt)}function Bx(u){for(var f=u;;){var y=f.tag;if((y===0||y===11||y===15)&&f.flags&16384&&(y=f.updateQueue,y!==null&&(y=y.stores,y!==null)))for(var A=0;A<y.length;A++){var R=y[A],O=R.getSnapshot;R=R.value;try{if(!yr(O(),R))return!1}catch{return!1}}if(y=f.child,f.subtreeFlags&16384&&y!==null)y.return=f,f=y;else{if(f===u)break;for(;f.sibling===null;){if(f.return===null||f.return===u)return!0;f=f.return}f.sibling.return=f.return,f=f.sibling}}return!0}function rs(u,f,y,A){f&=~ba,f&=~ds,u.suspendedLanes|=f,u.pingedLanes&=~f,A&&(u.warmLanes|=f),A=u.expirationTimes;for(var R=f;0<R;){var O=31-Ya(R),Y=1<<O;A[O]=-1,R&=~Y}y!==0&&$(u,y,f)}function Yg(){return(Nt&6)===0?(At(0),!1):!0}function ka(){if(Kt!==null){if(Vn===0)var u=Kt.return;else u=Kt,pi=Al=null,tc(u),Gs=null,kr=0,u=Kt;for(;u!==null;)Gg(u.alternate,u),u=u.return;Kt=null}}function ss(u,f){u.finishedWork=null,u.finishedLanes=0;var y=u.timeoutHandle;y!==yc&&(u.timeoutHandle=yc,oh(y)),y=u.cancelPendingCommit,y!==null&&(u.cancelPendingCommit=null,y()),ka(),cn=u,Kt=y=ga(u.current,null),on=f,Vn=0,Mi=null,Ln=!1,Er=U(u,f),To=!1,Co=Qa=ba=ds=Tr=_n=0,Cr=Lu=null,Iu=!1,(f&8)!==0&&(f|=f&32);var A=u.entangledLanes;if(A!==0)for(u=u.entanglements,A&=f;0<A;){var R=31-Ya(A),O=1<<R;f|=u[R],A&=~O}return hs=f,Ne(),y}function fc(u,f){tn=null,Ft.H=Sn,f===zn?(f=$e(),Vn=3):f===L0?(f=$e(),Vn=4):Vn=f===cb?8:f!==null&&typeof f=="object"&&typeof f.then=="function"?6:1,Mi=f,Kt===null&&(_n=1,Kd(u,pe(f,u.current)))}function $f(){var u=Mr.current;return u===null?!0:(on&4194176)===on?Xr===null:(on&62914560)===on||(on&536870912)!==0?u===Xr:!1}function _u(){var u=Ft.H;return Ft.H=Sn,u===null?Sn:u}function pr(){var u=Ft.A;return Ft.A=Hp,u}function Xa(){_n=4,Ln||(on&4194176)!==on&&Mr.current!==null||(Er=!0),(Tr&134217727)===0&&(ds&134217727)===0||cn===null||rs(cn,on,Qa,!1)}function Os(u,f,y){var A=Nt;Nt|=2;var R=_u(),O=pr();(cn!==u||on!==f)&&(ps=null,ss(u,f)),f=!1;var Y=_n;e:do try{if(Vn!==0&&Kt!==null){var ne=Kt,de=Mi;switch(Vn){case 8:ka(),Y=6;break e;case 3:case 2:case 6:Mr.current===null&&(f=!0);var Ue=Vn;if(Vn=0,Mi=null,ll(u,ne,de,Ue),y&&Er){Y=0;break e}break;default:Ue=Vn,Vn=0,Mi=null,ll(u,ne,de,Ue)}}Ns(),Y=_n;break}catch(We){fc(u,We)}while(!0);return f&&u.shellSuspendCounter++,pi=Al=null,Nt=A,Ft.H=R,Ft.A=O,Kt===null&&(cn=null,on=0,Ne()),Y}function Ns(){for(;Kt!==null;)qg(Kt)}function Us(u,f){var y=Nt;Nt|=2;var A=_u(),R=pr();cn!==u||on!==f?(ps=null,oi=la()+500,ss(u,f)):Er=U(u,f);e:do try{if(Vn!==0&&Kt!==null){f=Kt;var O=Mi;t:switch(Vn){case 1:Vn=0,Mi=null,ll(u,f,O,1);break;case 2:if(ft(O)){Vn=0,Mi=null,hp(f);break}f=function(){Vn===2&&cn===u&&(Vn=7),Ze(u)},O.then(f,f);break e;case 3:Vn=7;break e;case 4:Vn=5;break e;case 7:ft(O)?(Vn=0,Mi=null,hp(f)):(Vn=0,Mi=null,ll(u,f,O,7));break;case 5:var Y=null;switch(Kt.tag){case 26:Y=Kt.memoizedState;case 5:case 27:var ne=Kt,de=ne.type,Ue=ne.pendingProps;if(Y?B0(Y):_o(de,Ue)){Vn=0,Mi=null;var We=ne.sibling;if(We!==null)Kt=We;else{var ht=ne.return;ht!==null?(Kt=ht,eh(ht)):Kt=null}break t}}Vn=0,Mi=null,ll(u,f,O,5);break;case 6:Vn=0,Mi=null,ll(u,f,O,6);break;case 8:ka(),_n=6;break e;default:throw Error(a(462))}}fo();break}catch(mt){fc(u,mt)}while(!0);return pi=Al=null,Ft.H=A,Ft.A=R,Nt=y,Kt!==null?0:(cn=null,on=0,Ne(),_n)}function fo(){for(;Kt!==null&&!ab();)qg(Kt)}function qg(u){var f=Ax(u.alternate,u,hs);u.memoizedProps=u.pendingProps,f===null?eh(u):Kt=f}function hp(u){var f=u,y=f.alternate;switch(f.tag){case 15:case 0:f=vx(y,f,f.pendingProps,f.type,void 0,on);break;case 11:f=vx(y,f,f.pendingProps,f.type.render,f.ref,on);break;case 5:tc(f);default:Gg(y,f),f=Kt=mo(f,hs),f=Ax(y,f,hs)}u.memoizedProps=u.pendingProps,f===null?eh(u):Kt=f}function ll(u,f,y,A){pi=Al=null,tc(f),Gs=null,kr=0;var R=f.return;try{if(hx(u,R,f,y,on)){_n=1,Kd(u,pe(y,u.current)),Kt=null;return}}catch(O){if(R!==null)throw Kt=R,O;_n=1,Kd(u,pe(y,u.current)),Kt=null;return}f.flags&32768?(An||A===1?u=!0:Er||(on&536870912)!==0?u=!1:(Ln=u=!0,(A===2||A===3||A===6)&&(A=Mr.current,A!==null&&A.tag===13&&(A.flags|=16384))),Wi(f,u)):eh(f)}function eh(u){var f=u;do{if((f.flags&32768)!==0){Wi(f,Ln);return}u=f.return;var y=Mx(f.alternate,f,hs);if(y!==null){Kt=y;return}if(f=f.sibling,f!==null){Kt=f;return}Kt=f=u}while(f!==null);_n===0&&(_n=5)}function Wi(u,f){do{var y=Ex(u.alternate,u);if(y!==null){y.flags&=32767,Kt=y;return}if(y=u.return,y!==null&&(y.flags|=32768,y.subtreeFlags=0,y.deletions=null),!f&&(u=u.sibling,u!==null)){Kt=u;return}Kt=u=y}while(u!==null);_n=6,Kt=null}function Wn(u,f,y,A,R,O,Y,ne,de,Ue){var We=Ft.T,ht=zi();try{va(2),Ft.T=null,mn(u,f,y,A,ht,R,O,Y,ne,de,Ue)}finally{Ft.T=We,va(ht)}}function mn(u,f,y,A,R,O,Y,ne){do Ji();while(Ro!==null);if((Nt&6)!==0)throw Error(a(327));var de=u.finishedWork;if(A=u.finishedLanes,de===null)return null;if(u.finishedWork=null,u.finishedLanes=0,de===u.current)throw Error(a(177));u.callbackNode=null,u.callbackPriority=0,u.cancelPendingCommit=null;var Ue=de.lanes|de.childLanes;if(Ue|=Bu,te(u,A,Ue,O,Y,ne),u===cn&&(Kt=cn=null,on=0),(de.subtreeFlags&10256)===0&&(de.flags&10256)===0||Yr||(Yr=!0,kp=Ue,Cc=y,th(Op,function(){return Ji(),null})),y=(de.flags&15990)!==0,(de.subtreeFlags&15990)!==0||y?(y=Ft.T,Ft.T=null,O=zi(),va(2),Y=Nt,Nt|=4,du(u,de),nl(de,u),a0(u.containerInfo),u.current=de,rp(u,de.alternate,de),rb(),Nt=Y,va(O),Ft.T=y):u.current=de,Yr?(Yr=!1,Ro=u,Tc=A):ho(u,Ue),Ue=u.pendingLanes,Ue===0&&(Rr=null),G(de.stateNode),Ze(u),f!==null)for(R=u.onRecoverableError,de=0;de<f.length;de++)Ue=f[de],R(Ue.value,{componentStack:Ue.stack});return(Tc&3)!==0&&Ji(),Ue=u.pendingLanes,(A&4194218)!==0&&(Ue&42)!==0?u===Da?Rc++:(Rc=0,Da=u):Rc=0,At(0),null}function ho(u,f){(u.pooledCacheLanes&=f)===0&&(f=u.pooledCache,f!=null&&(u.pooledCache=null,ou(f)))}function Ji(){if(Ro!==null){var u=Ro,f=kp;kp=0;var y=le(Tc),A=32>y?32:y;y=Ft.T;var R=zi();try{if(va(A),Ft.T=null,Ro===null)var O=!1;else{A=Cc,Cc=null;var Y=Ro,ne=Tc;if(Ro=null,Tc=0,(Nt&6)!==0)throw Error(a(331));var de=Nt;if(Nt|=4,Qf(Y.current),lp(Y,Y.current,ne,A),Nt=de,At(0,!1),qa&&typeof qa.onPostCommitFiberRoot=="function")try{qa.onPostCommitFiberRoot(Ru,Y)}catch{}O=!0}return O}finally{va(R),Ft.T=y,ho(u,f)}}return!1}function dp(u,f,y){f=pe(y,f),f=kf(u.stateNode,f,2),u=ke(u,f,2),u!==null&&(W(u,2),Ze(u))}function fn(u,f,y){if(u.tag===3)dp(u,u,y);else for(;f!==null;){if(f.tag===3){dp(f,u,y);break}else if(f.tag===1){var A=f.stateNode;if(typeof f.type.getDerivedStateFromError=="function"||typeof A.componentDidCatch=="function"&&(Rr===null||!Rr.has(A))){u=pe(y,u),y=su(2),A=ke(f,y,2),A!==null&&(Xf(y,A,f,u),W(A,2),Ze(A));break}}f=f.return}}function pp(u,f,y){var A=u.pingCache;if(A===null){A=u.pingCache=new hn;var R=new Set;A.set(f,R)}else R=A.get(f),R===void 0&&(R=new Set,A.set(f,R));R.has(y)||(To=!0,R.add(y),u=Dx.bind(null,u,f,y),f.then(u,u))}function Dx(u,f,y){var A=u.pingCache;A!==null&&A.delete(f),u.pingedLanes|=u.suspendedLanes&y,u.warmLanes&=~y,cn===u&&(on&y)===y&&(_n===4||_n===3&&(on&62914560)===on&&300>la()-Xs?(Nt&2)===0&&ss(u,0):ba|=y,Co===on&&(Co=0)),Ze(u)}function hc(u,f){f===0&&(f=L()),u=et(u,f),u!==null&&(W(u,f),Ze(u))}function dc(u){var f=u.memoizedState,y=0;f!==null&&(y=f.retryLane),hc(u,y)}function Wg(u,f){var y=0;switch(u.tag){case 13:var A=u.stateNode,R=u.memoizedState;R!==null&&(y=R.retryLane);break;case 19:A=u.stateNode;break;case 22:A=u.stateNode._retryCache;break;default:throw Error(a(314))}A!==null&&A.delete(f),hc(u,y)}function th(u,f){return Cu(u,f)}function Jg(u,f,y,A){this.tag=u,this.key=y,this.sibling=this.child=this.return=this.stateNode=this.type=this.elementType=null,this.index=0,this.refCleanup=this.ref=null,this.pendingProps=f,this.dependencies=this.memoizedState=this.updateQueue=this.memoizedProps=null,this.mode=A,this.subtreeFlags=this.flags=0,this.deletions=null,this.childLanes=this.lanes=0,this.alternate=null}function po(u){return u=u.prototype,!(!u||!u.isReactComponent)}function ga(u,f){var y=u.alternate;return y===null?(y=t(u.tag,f,u.key,u.mode),y.elementType=u.elementType,y.type=u.type,y.stateNode=u.stateNode,y.alternate=u,u.alternate=y):(y.pendingProps=f,y.type=u.type,y.flags=0,y.subtreeFlags=0,y.deletions=null),y.flags=u.flags&31457280,y.childLanes=u.childLanes,y.lanes=u.lanes,y.child=u.child,y.memoizedProps=u.memoizedProps,y.memoizedState=u.memoizedState,y.updateQueue=u.updateQueue,f=u.dependencies,y.dependencies=f===null?null:{lanes:f.lanes,firstContext:f.firstContext},y.sibling=u.sibling,y.index=u.index,y.ref=u.ref,y.refCleanup=u.refCleanup,y}function mo(u,f){u.flags&=31457282;var y=u.alternate;return y===null?(u.childLanes=0,u.lanes=f,u.child=null,u.subtreeFlags=0,u.memoizedProps=null,u.memoizedState=null,u.updateQueue=null,u.dependencies=null,u.stateNode=null):(u.childLanes=y.childLanes,u.lanes=y.lanes,u.child=y.child,u.subtreeFlags=0,u.deletions=null,u.memoizedProps=y.memoizedProps,u.memoizedState=y.memoizedState,u.updateQueue=y.updateQueue,u.type=y.type,f=y.dependencies,u.dependencies=f===null?null:{lanes:f.lanes,firstContext:f.firstContext}),u}function zr(u,f,y,A,R,O){var Y=0;if(A=u,typeof u=="function")po(u)&&(Y=1);else if(typeof u=="string")Y=vr&&oa?S0(u,y,Qi.current)?26:Eu(u)?27:5:vr?S0(u,y,Qi.current)?26:5:oa&&Eu(u)?27:5;else e:switch(u){case bu:return go(y.children,R,O,f);case e0:Y=8,R|=24;break;case t0:return u=t(12,y,f,R|2),u.elementType=t0,u.lanes=O,u;case gp:return u=t(13,y,f,R),u.elementType=gp,u.lanes=O,u;case fl:return u=t(19,y,f,R),u.elementType=fl,u.lanes=O,u;case ah:return mp(y,R,O,f);default:if(typeof u=="object"&&u!==null)switch(u.$$typeof){case Ux:case Ls:Y=10;break e;case ul:Y=9;break e;case Au:Y=11;break e;case ih:Y=14;break e;case ls:Y=16,A=null;break e}Y=29,y=Error(a(130,u===null?"null":typeof u,"")),A=null}return f=t(Y,y,f,R),f.elementType=u,f.type=A,f.lanes=O,f}function go(u,f,y,A){return u=t(7,u,A,f),u.lanes=y,u}function mp(u,f,y,A){u=t(22,u,A,f),u.elementType=ah,u.lanes=y;var R={_visibility:1,_pendingVisibility:1,_pendingMarkers:null,_retryCache:null,_transitions:null,_current:null,detach:function(){var O=R._current;if(O===null)throw Error(a(456));if((R._pendingVisibility&2)===0){var Y=et(O,2);Y!==null&&(R._pendingVisibility|=2,ma(Y,O,2))}},attach:function(){var O=R._current;if(O===null)throw Error(a(456));if((R._pendingVisibility&2)!==0){var Y=et(O,2);Y!==null&&(R._pendingVisibility&=-3,ma(Y,O,2))}}};return u.stateNode=R,u}function cl(u,f,y){return u=t(6,u,null,f),u.lanes=y,u}function xu(u,f,y){return f=t(4,u.children!==null?u.children:[],u.key,f),f.lanes=y,f.stateNode={containerInfo:u.containerInfo,pendingChildren:null,implementation:u.implementation},f}function pc(u,f,y,A,R,O,Y,ne){this.tag=1,this.containerInfo=u,this.finishedWork=this.pingCache=this.current=this.pendingChildren=null,this.timeoutHandle=yc,this.callbackNode=this.next=this.pendingContext=this.context=this.cancelPendingCommit=null,this.callbackPriority=0,this.expirationTimes=F(-1),this.entangledLanes=this.shellSuspendCounter=this.errorRecoveryDisabledLanes=this.finishedLanes=this.expiredLanes=this.warmLanes=this.pingedLanes=this.suspendedLanes=this.pendingLanes=0,this.entanglements=F(0),this.hiddenUpdates=F(null),this.identifierPrefix=A,this.onUncaughtError=R,this.onCaughtError=O,this.onRecoverableError=Y,this.pooledCache=null,this.pooledCacheLanes=0,this.formState=ne,this.incompleteTransitions=new Map}function Ki(u,f,y,A,R,O,Y,ne,de,Ue,We,ht){return u=new pc(u,f,y,Y,ne,de,Ue,ht),f=1,O===!0&&(f|=24),O=t(3,null,null,f),u.current=O,O.stateNode=u,f=ep(),f.refCount++,u.pooledCache=f,f.refCount++,O.memoizedState={element:A,isDehydrated:y,cache:f},gt(O),u}function nh(u){return u?(u=xc,u):xc}function Kg(u){var f=u._reactInternals;if(f===void 0)throw typeof u.render=="function"?Error(a(188)):(u=Object.keys(u).join(","),Error(a(268,u)));return u=x(f),u=u!==null?S(u):null,u===null?null:Su(u.stateNode)}function Ox(u,f,y,A,R,O){R=nh(R),A.context===null?A.context=R:A.pendingContext=R,A=Fe(f),A.payload={element:y},O=O===void 0?null:O,O!==null&&(A.callback=O),y=ke(u,A,f),y!==null&&(ma(y,u,f),nt(y,u,f))}function Nx(u,f){if(u=u.memoizedState,u!==null&&u.dehydrated!==null){var y=u.retryLane;u.retryLane=y!==0&&y<f?y:f}}function Qg(u,f){Nx(u,f),(u=u.alternate)&&Nx(u,f)}var Ot={},Zg=Ch(),ra=c2(),mc=Object.assign,$g=Symbol.for("react.element"),vo=Symbol.for("react.transitional.element"),os=Symbol.for("react.portal"),bu=Symbol.for("react.fragment"),e0=Symbol.for("react.strict_mode"),t0=Symbol.for("react.profiler"),Ux=Symbol.for("react.provider"),ul=Symbol.for("react.consumer"),Ls=Symbol.for("react.context"),Au=Symbol.for("react.forward_ref"),gp=Symbol.for("react.suspense"),fl=Symbol.for("react.suspense_list"),ih=Symbol.for("react.memo"),ls=Symbol.for("react.lazy"),ah=Symbol.for("react.offscreen"),Lx=Symbol.for("react.memo_cache_sentinel"),n0=Symbol.iterator,gc=Symbol.for("react.client.reference"),Ft=Zg.__CLIENT_INTERNALS_DO_NOT_USE_OR_WARN_USERS_THEY_CANNOT_UPGRADE,vp,i0,hl=!1,dl=Array.isArray,yp=e.rendererVersion,rh=e.rendererPackageName,sh=e.extraDevToolsConfig,Su=e.getPublicInstance,vc=e.getRootHostContext,Ix=e.getChildHostContext,pl=e.prepareForCommit,a0=e.resetAfterCommit,r0=e.createInstance,Is=e.appendInitialChild,yo=e.finalizeInitialChildren,ml=e.shouldSetTextContent,_p=e.createTextInstance,s0=e.scheduleTimeout,oh=e.cancelTimeout,yc=e.noTimeout,Ps=e.isPrimaryRenderer;e.warnsIfNotActing;var sa=e.supportsMutation,mr=e.supportsPersistence,Ra=e.supportsHydration,o0=e.getInstanceFromNode;e.beforeActiveInstanceBlur,e.afterActiveInstanceBlur;var l0=e.preparePortalMount;e.prepareScopeUpdate,e.getInstanceFromScope;var va=e.setCurrentUpdatePriority,zi=e.getCurrentUpdatePriority,Hr=e.resolveUpdatePriority;e.resolveEventType,e.resolveEventTimeStamp;var gl=e.shouldAttemptEagerTransition,c0=e.detachDeletedInstance;e.requestPostPaintCallback;var Px=e.maySuspendCommit,_o=e.preloadInstance,gr=e.startSuspendingCommit,ui=e.suspendInstance,xp=e.waitForCommitToBeReady,ja=e.NotPendingTransition,kt=e.HostTransitionContext,Gn=e.resetFormInstance;e.bindToConsole;var Di=e.supportsMicrotasks,bp=e.scheduleMicrotask,Fs=e.supportsTestSelectors,_c=e.findFiberRoot,Ap=e.getBoundingRect,lh=e.getTextContent,zs=e.isHiddenSubtree,jM=e.matchAccessibilityRole,fi=e.setFocusIfFocusable,u0=e.setupIntersectionObserver,f0=e.appendChild,Fx=e.appendChildToContainer,zx=e.commitTextUpdate,YM=e.commitMount,h0=e.commitUpdate,d0=e.insertBefore,p0=e.insertInContainerBefore,wa=e.removeChild,xi=e.removeChildFromContainer,ch=e.resetTextContent,uh=e.hideInstance,Sp=e.hideTextInstance,m0=e.unhideInstance,xo=e.unhideTextInstance,Mp=e.clearContainer,g0=e.cloneInstance,Ep=e.createContainerChildSet,v0=e.appendChildToContainerChildSet,Hx=e.finalizeContainerChildren,y0=e.replaceContainerChildren,_0=e.cloneHiddenInstance,x0=e.cloneHiddenTextInstance,Tp=e.isSuspenseInstancePending,fh=e.isSuspenseInstanceFallback,Gx=e.getSuspenseInstanceFallbackErrorDetails,qM=e.registerSuspenseInstanceRetry,Vx=e.canHydrateFormStateMarker,kx=e.isFormStateMarkerMatching,b0=e.getNextHydratableSibling,Cp=e.getFirstHydratableChild,Xx=e.getFirstHydratableChildWithinContainer,jx=e.getFirstHydratableChildWithinSuspenseInstance,Yx=e.canHydrateInstance,qx=e.canHydrateTextInstance,Wx=e.canHydrateSuspenseInstance,WM=e.hydrateInstance,Jx=e.hydrateTextInstance,Mu=e.hydrateSuspenseInstance,Kx=e.getNextHydratableInstanceAfterSuspenseInstance,Rp=e.commitHydratedContainer,wp=e.commitHydratedSuspenseInstance,Qx=e.clearSuspenseBoundary,A0=e.clearSuspenseBoundaryFromContainer,Zx=e.shouldDeleteUnhydratedTailInstances;e.diffHydratedPropsForDevWarnings,e.diffHydratedTextForDevWarnings,e.describeHydratableInstanceForDevWarnings;var $x=e.validateHydratableInstance,eb=e.validateHydratableTextInstance,vr=e.supportsResources,S0=e.isHostHoistableType,Bp=e.getHoistableRoot,Dp=e.getResource,M0=e.acquireResource,E0=e.releaseResource,T0=e.hydrateHoistable,C0=e.mountHoistable,R0=e.unmountHoistable,JM=e.createHoistableInstance,w0=e.prepareToCommitHoistables,tb=e.mayResourceSuspendCommit,B0=e.preloadResource,D0=e.suspendResource,oa=e.supportsSingletons,O0=e.resolveSingletonInstance,KM=e.clearSingleton,QM=e.acquireSingletonInstance,nb=e.releaseSingletonInstance,Eu=e.isHostSingletonType,hh=[],bo=-1,xc={},Ya=Math.clz32?Math.clz32:B,dh=Math.log,ib=Math.LN2,Tu=128,ph=4194304,Cu=ra.unstable_scheduleCallback,mh=ra.unstable_cancelCallback,ab=ra.unstable_shouldYield,rb=ra.unstable_requestPaint,la=ra.unstable_now,N0=ra.unstable_ImmediatePriority,sb=ra.unstable_UserBlockingPriority,Op=ra.unstable_NormalPriority,Np=ra.unstable_IdlePriority,ob=ra.log,U0=ra.unstable_setDisableYieldValue,Ru=null,qa=null,yr=typeof Object.is=="function"?Object.is:Z,Up=new WeakMap,ni=[],hi=0,gh=null,vh=0,_r=[],xr=0,cs=null,Hs=1,Gr="",Qi=T(null),yh=T(null),us=T(null),wu=T(null),ya=null,ca=null,An=!1,br=null,Vr=!1,_h=Error(a(519)),Ar=[],vl=0,Bu=0,Du=null,bc=null,xh=!1,bh=!1,fs=!1,yl=0,Ah=null,Lp=0,Wa=0,_l=null,Ao=!1,Ou=!1,Sh=Object.prototype.hasOwnProperty,zn=Error(a(460)),L0=Error(a(474)),Ip={then:function(){}},Ac=null,Gs=null,kr=0,xl=Lr(!0),I0=Lr(!1),Vs=T(null),Sr=T(0),Mr=T(null),Xr=null,Oi=T(0),ks=0,tn=null,Dn=null,bi=null,jr=!1,ii=!1,So=!1,Mh=0,di=0,Nu=null,lb=0,Pp=function(){return{lastEffect:null,events:null,stores:null,memoCache:null}},Sn={readContext:aa,use:is,useCallback:rn,useContext:rn,useEffect:rn,useImperativeHandle:rn,useLayoutEffect:rn,useInsertionEffect:rn,useMemo:rn,useReducer:rn,useRef:rn,useState:rn,useDebugValue:rn,useDeferredValue:rn,useTransition:rn,useSyncExternalStore:rn,useId:rn};Sn.useCacheRefresh=rn,Sn.useMemoCache=rn,Sn.useHostTransitionStatus=rn,Sn.useFormState=rn,Sn.useActionState=rn,Sn.useOptimistic=rn;var Ni={readContext:aa,use:is,useCallback:function(u,f){return _i().memoizedState=[u,f===void 0?null:f],u},useContext:aa,useEffect:nc,useImperativeHandle:function(u,f,y){y=y!=null?y.concat([u]):null,wi(4194308,4,Ff.bind(null,f,u),y)},useLayoutEffect:function(u,f){return wi(4194308,4,u,f)},useInsertionEffect:function(u,f){wi(4,2,u,f)},useMemo:function(u,f){var y=_i();f=f===void 0?null:f;var A=u();if(So){J(!0);try{u()}finally{J(!1)}}return y.memoizedState=[A,f],A},useReducer:function(u,f,y){var A=_i();if(y!==void 0){var R=y(f);if(So){J(!0);try{y(f)}finally{J(!1)}}}else R=f;return A.memoizedState=A.baseState=R,u={pending:null,lanes:0,dispatch:null,lastRenderedReducer:u,lastRenderedState:R},A.queue=u,u=u.dispatch=Wo.bind(null,tn,u),[A.memoizedState,u]},useRef:function(u){var f=_i();return u={current:u},f.memoizedState=u},useState:function(u){u=xt(u);var f=u.queue,y=Wd.bind(null,tn,f);return f.dispatch=y,[u.memoizedState,y]},useDebugValue:zf,useDeferredValue:function(u,f){var y=_i();return qo(y,u,f)},useTransition:function(){var u=xt(!1);return u=Yd.bind(null,tn,u.queue,!0,!1),_i().memoizedState=u,[!1,u]},useSyncExternalStore:function(u,f,y){var A=tn,R=_i();if(An){if(y===void 0)throw Error(a(407));y=y()}else{if(y=f(),cn===null)throw Error(a(349));(on&60)!==0||vt(A,f,y)}R.memoizedState=y;var O={value:y,getSnapshot:f};return R.queue=O,nc(yt.bind(null,A,O,u),[u]),A.flags|=2048,ci(9,lt.bind(null,A,O,y,f),{destroy:void 0},null),y},useId:function(){var u=_i(),f=cn.identifierPrefix;if(An){var y=Gr,A=Hs;y=(A&~(1<<32-Ya(A)-1)).toString(32)+y,f=":"+f+"R"+y,y=Mh++,0<y&&(f+="H"+y.toString(32)),f+=":"}else y=lb++,f=":"+f+"r"+y.toString(32)+":";return u.memoizedState=f},useCacheRefresh:function(){return _i().memoizedState=Hf.bind(null,tn)}};Ni.useMemoCache=k,Ni.useHostTransitionStatus=ac,Ni.useFormState=ji,Ni.useActionState=ji,Ni.useOptimistic=function(u){var f=_i();f.memoizedState=f.baseState=u;var y={pending:null,lanes:0,dispatch:null,lastRenderedReducer:null,lastRenderedState:null};return f.queue=y,f=Jd.bind(null,tn,!0,y),y.dispatch=f,[u,f]};var _a={readContext:aa,use:is,useCallback:jd,useContext:aa,useEffect:fr,useImperativeHandle:Rs,useInsertionEffect:ux,useLayoutEffect:fx,useMemo:ic,useReducer:Me,useRef:Ri,useState:function(){return Me(ue)},useDebugValue:zf,useDeferredValue:function(u,f){var y=kn();return Eg(y,Dn.memoizedState,u,f)},useTransition:function(){var u=Me(ue)[0],f=kn().memoizedState;return[typeof u=="boolean"?u:ns(u),f]},useSyncExternalStore:at,useId:ws};_a.useCacheRefresh=qd,_a.useMemoCache=k,_a.useHostTransitionStatus=ac,_a.useFormState=Cs,_a.useActionState=Cs,_a.useOptimistic=function(u,f){var y=kn();return Pt(y,Dn,u,f)};var bl={readContext:aa,use:is,useCallback:jd,useContext:aa,useEffect:fr,useImperativeHandle:Rs,useInsertionEffect:ux,useLayoutEffect:fx,useMemo:ic,useReducer:me,useRef:Ri,useState:function(){return me(ue)},useDebugValue:zf,useDeferredValue:function(u,f){var y=kn();return Dn===null?qo(y,u,f):Eg(y,Dn.memoizedState,u,f)},useTransition:function(){var u=me(ue)[0],f=kn().memoizedState;return[typeof u=="boolean"?u:ns(u),f]},useSyncExternalStore:at,useId:ws};bl.useCacheRefresh=qd,bl.useMemoCache=k,bl.useHostTransitionStatus=ac,bl.useFormState=On,bl.useActionState=On,bl.useOptimistic=function(u,f){var y=kn();return Dn!==null?Pt(y,Dn,u,f):(y.baseState=u,[u,y.queue.dispatch])};var Fp={isMounted:function(u){return(u=u._reactInternals)?v(u)===u:!1},enqueueSetState:function(u,f,y){u=u._reactInternals;var A=Ca(),R=Fe(A);R.payload=f,y!=null&&(R.callback=y),f=ke(u,R,A),f!==null&&(ma(f,u,A),nt(f,u,A))},enqueueReplaceState:function(u,f,y){u=u._reactInternals;var A=Ca(),R=Fe(A);R.tag=1,R.payload=f,y!=null&&(R.callback=y),f=ke(u,R,A),f!==null&&(ma(f,u,A),nt(f,u,A))},enqueueForceUpdate:function(u,f){u=u._reactInternals;var y=Ca(),A=Fe(y);A.tag=2,f!=null&&(A.callback=f),f=ke(u,A,y),f!==null&&(ma(f,u,y),nt(f,u,y))}},P0=typeof reportError=="function"?reportError:function(u){if(typeof window=="object"&&typeof window.ErrorEvent=="function"){var f=new window.ErrorEvent("error",{bubbles:!0,cancelable:!0,message:typeof u=="object"&&u!==null&&typeof u.message=="string"?String(u.message):String(u),error:u});if(!window.dispatchEvent(f))return}else if(typeof process=="object"&&typeof process.emit=="function"){process.emit("uncaughtException",u);return}console.error(u)},cb=Error(a(461)),Ai=!1,xa={dehydrated:null,treeContext:null,retryLane:0},Ja=T(null),Al=null,pi=null,ub=typeof AbortController<"u"?AbortController:function(){var u=[],f=this.signal={aborted:!1,addEventListener:function(y,A){u.push(A)}};this.abort=function(){f.aborted=!0,u.forEach(function(y){return y()})}},Mo=ra.unstable_scheduleCallback,Sc=ra.unstable_NormalPriority,Nn={$$typeof:Ls,Consumer:null,Provider:null,_currentValue:null,_currentValue2:null,_threadCount:0},zp=Ft.S;Ft.S=function(u,f){typeof f=="object"&&f!==null&&typeof f.then=="function"&&Re(u,f),zp!==null&&zp(u,f)};var Eo=T(null),Hi=!1,si=!1,Sl=!1,Uu=typeof WeakSet=="function"?WeakSet:Set,mi=null,Mc=!1,Si=null,Ka=!1,Ba=null,Ec=8192,Hp={getCacheForType:function(u){var f=aa(Nn),y=f.data.get(u);return y===void 0&&(y=u(),f.data.set(u,y)),y}},Eh=0,Gp=1,Vp=2,yn=3,Un=4;if(typeof Symbol=="function"&&Symbol.for){var nn=Symbol.for;Eh=nn("selector.component"),Gp=nn("selector.has_pseudo_class"),Vp=nn("selector.role"),yn=nn("selector.test_id"),Un=nn("selector.text")}var hn=typeof WeakMap=="function"?WeakMap:Map,Nt=0,cn=null,Kt=null,on=0,Vn=0,Mi=null,Ln=!1,Er=!1,To=!1,hs=0,_n=0,Tr=0,ds=0,ba=0,Qa=0,Co=0,Lu=null,Cr=null,Iu=!1,Xs=0,oi=1/0,ps=null,Rr=null,Yr=!1,Ro=null,Tc=0,kp=0,Cc=null,Rc=0,Da=null;return Ot.attemptContinuousHydration=function(u){if(u.tag===13){var f=et(u,67108864);f!==null&&ma(f,u,67108864),Qg(u,67108864)}},Ot.attemptHydrationAtCurrentPriority=function(u){if(u.tag===13){var f=Ca(),y=et(u,f);y!==null&&ma(y,u,f),Qg(u,f)}},Ot.attemptSynchronousHydration=function(u){switch(u.tag){case 3:if(u=u.stateNode,u.current.memoizedState.isDehydrated){var f=D(u.pendingLanes);if(f!==0){for(u.pendingLanes|=2,u.entangledLanes|=2;f;){var y=1<<31-Ya(f);u.entanglements[1]|=y,f&=~y}Ze(u),(Nt&6)===0&&(oi=la()+500,At(0))}}break;case 13:f=et(u,2),f!==null&&ma(f,u,2),Yg(),Qg(u,2)}},Ot.batchedUpdates=function(u,f){return u(f)},Ot.createComponentSelector=function(u){return{$$typeof:Eh,value:u}},Ot.createContainer=function(u,f,y,A,R,O,Y,ne,de,Ue){return Ki(u,f,!1,null,y,A,O,Y,ne,de,Ue,null)},Ot.createHasPseudoClassSelector=function(u){return{$$typeof:Gp,value:u}},Ot.createHydrationContainer=function(u,f,y,A,R,O,Y,ne,de,Ue,We,ht,mt){return u=Ki(y,A,!0,u,R,O,ne,de,Ue,We,ht,mt),u.context=nh(null),y=u.current,A=Ca(),R=Fe(A),R.callback=f??null,ke(y,R,A),u.current.lanes=A,W(u,A),Ze(u),u},Ot.createPortal=function(u,f,y){var A=3<arguments.length&&arguments[3]!==void 0?arguments[3]:null;return{$$typeof:os,key:A==null?null:""+A,children:u,containerInfo:f,implementation:y}},Ot.createRoleSelector=function(u){return{$$typeof:Vp,value:u}},Ot.createTestNameSelector=function(u){return{$$typeof:yn,value:u}},Ot.createTextSelector=function(u){return{$$typeof:Un,value:u}},Ot.defaultOnCaughtError=function(u){console.error(u)},Ot.defaultOnRecoverableError=function(u){P0(u)},Ot.defaultOnUncaughtError=function(u){P0(u)},Ot.deferredUpdates=function(u){var f=Ft.T,y=zi();try{return va(32),Ft.T=null,u()}finally{va(y),Ft.T=f}},Ot.discreteUpdates=function(u,f,y,A,R){var O=Ft.T,Y=zi();try{return va(2),Ft.T=null,u(f,y,A,R)}finally{va(Y),Ft.T=O,Nt===0&&(oi=la()+500)}},Ot.findAllNodes=Ta,Ot.findBoundingRects=function(u,f){if(!Fs)throw Error(a(363));f=Ta(u,f),u=[];for(var y=0;y<f.length;y++)u.push(Ap(f[y]));for(f=u.length-1;0<f;f--){y=u[f];for(var A=y.x,R=A+y.width,O=y.y,Y=O+y.height,ne=f-1;0<=ne;ne--)if(f!==ne){var de=u[ne],Ue=de.x,We=Ue+de.width,ht=de.y,mt=ht+de.height;if(A>=Ue&&O>=ht&&R<=We&&Y<=mt){u.splice(f,1);break}else if(A!==Ue||y.width!==de.width||mt<O||ht>Y){if(!(O!==ht||y.height!==de.height||We<A||Ue>R)){Ue>A&&(de.width+=Ue-A,de.x=A),We<R&&(de.width=R-Ue),u.splice(f,1);break}}else{ht>O&&(de.height+=ht-O,de.y=O),mt<Y&&(de.height=Y-ht),u.splice(f,1);break}}}return u},Ot.findHostInstance=Kg,Ot.findHostInstanceWithNoPortals=function(u){return u=x(u),u=u!==null?C(u):null,u===null?null:Su(u.stateNode)},Ot.findHostInstanceWithWarning=function(u){return Kg(u)},Ot.flushPassiveEffects=Ji,Ot.flushSyncFromReconciler=function(u){var f=Nt;Nt|=1;var y=Ft.T,A=zi();try{if(va(2),Ft.T=null,u)return u()}finally{va(A),Ft.T=y,Nt=f,(Nt&6)===0&&At(0)}},Ot.flushSyncWork=Yg,Ot.focusWithin=function(u,f){if(!Fs)throw Error(a(363));for(u=up(u),f=wx(u,f),f=Array.from(f),u=0;u<f.length;){var y=f[u++],A=y.tag;if(!zs(y)){if((A===5||A===26||A===27)&&fi(y.stateNode))return!0;for(y=y.child;y!==null;)f.push(y),y=y.sibling}}return!1},Ot.getFindAllNodesFailureDescription=function(u,f){if(!Fs)throw Error(a(363));var y=0,A=[];u=[up(u),0];for(var R=0;R<u.length;){var O=u[R++],Y=O.tag,ne=u[R++],de=f[ne];if((Y!==5&&Y!==26&&Y!==27||!zs(O))&&(yu(O,de)&&(A.push(ol(de)),ne++,ne>y&&(y=ne)),ne<f.length))for(O=O.child;O!==null;)u.push(O,ne),O=O.sibling}if(y<f.length){for(u=[];y<f.length;y++)u.push(ol(f[y]));return`findAllNodes was able to match part of the selector:
  `+(A.join(" > ")+`

No matching component was found for:
  `)+u.join(" > ")}return null},Ot.getPublicRootInstance=function(u){if(u=u.current,!u.child)return null;switch(u.child.tag){case 27:case 5:return Su(u.child.stateNode);default:return u.child.stateNode}},Ot.injectIntoDevTools=function(){var u={bundleType:0,version:yp,rendererPackageName:rh,currentDispatcherRef:Ft,findFiberByHostInstance:o0,reconcilerVersion:"19.0.0"};if(sh!==null&&(u.rendererConfig=sh),typeof __REACT_DEVTOOLS_GLOBAL_HOOK__>"u")u=!1;else{var f=__REACT_DEVTOOLS_GLOBAL_HOOK__;if(f.isDisabled||!f.supportsFiber)u=!0;else{try{Ru=f.inject(u),qa=f}catch{}u=!!f.checkDCE}}return u},Ot.isAlreadyRendering=function(){return!1},Ot.observeVisibleRects=function(u,f,y,A){if(!Fs)throw Error(a(363));u=Ta(u,f);var R=u0(u,y,A).disconnect;return{disconnect:function(){R()}}},Ot.shouldError=function(){return null},Ot.shouldSuspend=function(){return!1},Ot.startHostTransition=function(u,f,y,A){if(u.tag!==5)throw Error(a(476));var R=Tg(u).queue;Yd(u,R,f,ja,y===null?i:function(){var O=Tg(u).next.queue;return Jo(u,O,{},Ca()),y(A)})},Ot.updateContainer=function(u,f,y,A){var R=f.current,O=Ca();return Ox(R,O,u,f,y,A),O},Ot.updateContainerSync=function(u,f,y,A){return f.tag===0&&Ji(),Ox(f.current,2,u,f,y,A),2},Ot},n.exports.default=n.exports,Object.defineProperty(n.exports,"__esModule",{value:!0})})(kS)),kS.exports}var f2;function zH(){return f2||(f2=1,VS.exports=FH()),VS.exports}var HH=zH();const GH=Xu(HH);var h2=c2();function YS(n,e,t){if(!n)return;if(t(n)===!0)return n;let i=e?n.return:n.child;for(;i;){const a=YS(i,e,t);if(a)return a;i=e?null:i.sibling}}function d2(n){try{return Object.defineProperties(n,{_currentRenderer:{get(){return null},set(){}},_currentRenderer2:{get(){return null},set(){}}})}catch{return n}}const qS=d2(H.createContext(null));let p2=class extends H.Component{render(){return H.createElement(qS.Provider,{value:this._reactInternals},this.props.children)}};function m2(){const n=H.useContext(qS);if(n===null)throw new Error("its-fine: useFiber must be called within a <FiberProvider />!");const e=H.useId();return H.useMemo(()=>{for(const t of[n,n?.alternate]){if(!t)continue;const i=YS(t,!1,a=>{let s=a.memoizedState;for(;s;){if(s.memoizedState===e)return!0;s=s.next}});if(i)return i}},[n,e])}const VH=Symbol.for("react.context"),kH=n=>n!==null&&typeof n=="object"&&"$$typeof"in n&&n.$$typeof===VH;function XH(){const n=m2(),[e]=H.useState(()=>new Map);e.clear();let t=n;for(;t;){const i=t.type;kH(i)&&i!==qS&&!e.has(i)&&e.set(i,H.use(d2(i))),t=t.return}return e}function jH(){const n=XH();return H.useMemo(()=>Array.from(n.keys()).reduce((e,t)=>i=>H.createElement(e,null,H.createElement(t.Provider,{...i,value:n.get(t)})),e=>H.createElement(p2,{...e})),[n])}function g2(n){let e=n.root;for(;e.getState().previousRoot;)e=e.getState().previousRoot;return e}const v2=n=>n&&n.isOrthographicCamera,YH=n=>n&&n.hasOwnProperty("current"),qH=n=>n!=null&&(typeof n=="string"||typeof n=="number"||n.isColor),jm=((n,e)=>typeof window<"u"&&(((n=window.document)==null?void 0:n.createElement)||((e=window.navigator)==null?void 0:e.product)==="ReactNative"))()?H.useLayoutEffect:H.useEffect;function y2(n){const e=H.useRef(n);return jm(()=>{e.current=n},[n]),e}function WH(){const n=m2(),e=jH();return H.useMemo(()=>({children:t})=>{const a=!!YS(n,!0,s=>s.type===H.StrictMode)?H.StrictMode:H.Fragment;return dt.jsx(a,{children:dt.jsx(e,{children:t})})},[n,e])}function JH({set:n}){return jm(()=>(n(new Promise(()=>null)),()=>n(!1)),[n]),null}const KH=(n=>(n=class extends H.Component{constructor(...t){super(...t),this.state={error:!1}}componentDidCatch(t){this.props.set(t)}render(){return this.state.error?null:this.props.children}},n.getDerivedStateFromError=()=>({error:!0}),n))();function _2(n){var e;const t=typeof window<"u"?(e=window.devicePixelRatio)!=null?e:2:1;return Array.isArray(n)?Math.min(Math.max(n[0],t),n[1]):n}function _d(n){var e;return(e=n.__r3f)==null?void 0:e.root.getState()}const li={obj:n=>n===Object(n)&&!li.arr(n)&&typeof n!="function",fun:n=>typeof n=="function",str:n=>typeof n=="string",num:n=>typeof n=="number",boo:n=>typeof n=="boolean",und:n=>n===void 0,nul:n=>n===null,arr:n=>Array.isArray(n),equ(n,e,{arrays:t="shallow",objects:i="reference",strict:a=!0}={}){if(typeof n!=typeof e||!!n!=!!e)return!1;if(li.str(n)||li.num(n)||li.boo(n))return n===e;const s=li.obj(n);if(s&&i==="reference")return n===e;const l=li.arr(n);if(l&&t==="reference")return n===e;if((l||s)&&n===e)return!0;let c;for(c in n)if(!(c in e))return!1;if(s&&t==="shallow"&&i==="shallow"){for(c in a?e:n)if(!li.equ(n[c],e[c],{strict:a,objects:"reference"}))return!1}else for(c in a?e:n)if(n[c]!==e[c])return!1;if(li.und(c)){if(l&&n.length===0&&e.length===0||s&&Object.keys(n).length===0&&Object.keys(e).length===0)return!0;if(n!==e)return!1}return!0}};function QH(n){const e={nodes:{},materials:{},meshes:{}};return n&&n.traverse(t=>{t.name&&(e.nodes[t.name]=t),t.material&&!e.materials[t.material.name]&&(e.materials[t.material.name]=t.material),t.isMesh&&!e.meshes[t.name]&&(e.meshes[t.name]=t)}),e}function ZH(n){n.type!=="Scene"&&(n.dispose==null||n.dispose());for(const e in n){const t=n[e];t?.type!=="Scene"&&(t==null||t.dispose==null||t.dispose())}}const x2=["children","key","ref"];function $H(n){const e={};for(const t in n)x2.includes(t)||(e[t]=n[t]);return e}function v_(n,e,t,i){const a=n;let s=a?.__r3f;return s||(s={root:e,type:t,parent:null,children:[],props:$H(i),object:a,eventCount:0,handlers:{},isHidden:!1},a&&(a.__r3f=s)),s}function Ym(n,e){if(!e.includes("-"))return{root:n,key:e,target:n[e]};if(e in n)return{root:n,key:e,target:n[e]};let t=n;const i=e.split("-");for(const a of i){if(typeof t!="object"||t===null){if(t!==void 0){const s=i.slice(i.indexOf(a)).join("-");return{root:t,key:s,target:void 0}}return{root:n,key:e,target:void 0}}e=a,n=t,t=t[e]}return{root:n,key:e,target:t}}const b2=/-\d+$/;function y_(n,e){if(li.str(e.props.attach)){if(b2.test(e.props.attach)){const a=e.props.attach.replace(b2,""),{root:s,key:l}=Ym(n.object,a);Array.isArray(s[l])||(s[l]=[])}const{root:t,key:i}=Ym(n.object,e.props.attach);e.previousAttach=t[i],t[i]=e.object}else li.fun(e.props.attach)&&(e.previousAttach=e.props.attach(n.object,e.object))}function __(n,e){if(li.str(e.props.attach)){const{root:t,key:i}=Ym(n.object,e.props.attach),a=e.previousAttach;a===void 0?delete t[i]:t[i]=a}else e.previousAttach==null||e.previousAttach(n.object,e.object);delete e.previousAttach}const WS=[...x2,"args","dispose","attach","object","onUpdate","dispose"],A2=new Map;function eG(n){let e=A2.get(n.constructor);try{e||(e=new n.constructor,A2.set(n.constructor,e))}catch{}return e}function tG(n,e){const t={};for(const i in e)if(!WS.includes(i)&&!li.equ(e[i],n.props[i])){t[i]=e[i];for(const a in e)a.startsWith(`${i}-`)&&(t[a]=e[a])}for(const i in n.props){if(WS.includes(i)||e.hasOwnProperty(i))continue;const{root:a,key:s}=Ym(n.object,i);if(a.constructor&&a.constructor.length===0){const l=eG(a);li.und(l)||(t[s]=l[s])}else t[s]=0}return t}const nG=["map","emissiveMap","sheenColorMap","specularColorMap","envMap"],iG=/^on(Pointer|Click|DoubleClick|ContextMenu|Wheel)/;function Zc(n,e){var t;const i=n.__r3f,a=i&&g2(i).getState(),s=i?.eventCount;for(const c in e){let d=e[c];if(WS.includes(c))continue;if(i&&iG.test(c)){typeof d=="function"?i.handlers[c]=d:delete i.handlers[c],i.eventCount=Object.keys(i.handlers).length;continue}if(d===void 0)continue;let{root:p,key:g,target:v}=Ym(n,c);if(v===void 0&&(typeof p!="object"||p===null))throw Error(`R3F: Cannot set "${c}". Ensure it is an object before setting "${g}".`);if(v instanceof qh&&d instanceof qh)v.mask=d.mask;else if(v instanceof st&&qH(d))v.set(d);else if(v!==null&&typeof v=="object"&&typeof v.set=="function"&&typeof v.copy=="function"&&d!=null&&d.constructor&&v.constructor===d.constructor)v.copy(d);else if(v!==null&&typeof v=="object"&&typeof v.set=="function"&&Array.isArray(d))typeof v.fromArray=="function"?v.fromArray(d):v.set(...d);else if(v!==null&&typeof v=="object"&&typeof v.set=="function"&&typeof d=="number")typeof v.setScalar=="function"?v.setScalar(d):v.set(d);else{var l;p[g]=d,a&&!a.linear&&nG.includes(g)&&(l=p[g])!=null&&l.isTexture&&p[g].format===Ua&&p[g].type===tr&&(p[g].colorSpace=Aa)}}if(i!=null&&i.parent&&a!=null&&a.internal&&(t=i.object)!=null&&t.isObject3D&&s!==i.eventCount){const c=i.object,d=a.internal.interaction.indexOf(c);d>-1&&a.internal.interaction.splice(d,1),i.eventCount&&c.raycast!==null&&a.internal.interaction.push(c)}return i&&i.props.attach===void 0&&(i.object.isBufferGeometry?i.props.attach="geometry":i.object.isMaterial&&(i.props.attach="material")),i&&xd(i),n}function xd(n){var e;if(!n.parent)return;n.props.onUpdate==null||n.props.onUpdate(n.object);const t=(e=n.root)==null||e.getState==null?void 0:e.getState();t&&t.internal.frames===0&&t.invalidate()}function aG(n,e){n.manual||(v2(n)?(n.left=e.width/-2,n.right=e.width/2,n.top=e.height/2,n.bottom=e.height/-2):n.aspect=e.width/e.height,n.updateProjectionMatrix())}const sr=n=>n?.isObject3D;function x_(n){return(n.eventObject||n.object).uuid+"/"+n.index+n.instanceId}function S2(n,e,t,i){const a=t.get(e);a&&(t.delete(e),t.size===0&&(n.delete(i),a.target.releasePointerCapture(i)))}function rG(n,e){const{internal:t}=n.getState();t.interaction=t.interaction.filter(i=>i!==e),t.initialHits=t.initialHits.filter(i=>i!==e),t.hovered.forEach((i,a)=>{(i.eventObject===e||i.object===e)&&t.hovered.delete(a)}),t.capturedMap.forEach((i,a)=>{S2(t.capturedMap,e,i,a)})}function sG(n){function e(d){const{internal:p}=n.getState(),g=d.offsetX-p.initialClick[0],v=d.offsetY-p.initialClick[1];return Math.round(Math.sqrt(g*g+v*v))}function t(d){return d.filter(p=>["Move","Over","Enter","Out","Leave"].some(g=>{var v;return(v=p.__r3f)==null?void 0:v.handlers["onPointer"+g]}))}function i(d,p){const g=n.getState(),v=new Set,_=[],x=p?p(g.internal.interaction):g.internal.interaction;for(let M=0;M<x.length;M++){const w=_d(x[M]);w&&(w.raycaster.camera=void 0)}g.previousRoot||g.events.compute==null||g.events.compute(d,g);function S(M){const w=_d(M);if(!w||!w.events.enabled||w.raycaster.camera===null)return[];if(w.raycaster.camera===void 0){var B;w.events.compute==null||w.events.compute(d,w,(B=w.previousRoot)==null?void 0:B.getState()),w.raycaster.camera===void 0&&(w.raycaster.camera=null)}return w.raycaster.camera?w.raycaster.intersectObject(M,!0):[]}let C=x.flatMap(S).sort((M,w)=>{const B=_d(M.object),D=_d(w.object);return!B||!D?M.distance-w.distance:D.events.priority-B.events.priority||M.distance-w.distance}).filter(M=>{const w=x_(M);return v.has(w)?!1:(v.add(w),!0)});g.events.filter&&(C=g.events.filter(C,g));for(const M of C){let w=M.object;for(;w;){var T;(T=w.__r3f)!=null&&T.eventCount&&_.push({...M,eventObject:w}),w=w.parent}}if("pointerId"in d&&g.internal.capturedMap.has(d.pointerId))for(let M of g.internal.capturedMap.get(d.pointerId).values())v.has(x_(M.intersection))||_.push(M.intersection);return _}function a(d,p,g,v){if(d.length){const _={stopped:!1};for(const x of d){let S=_d(x.object);if(S||x.object.traverseAncestors(C=>{const T=_d(C);if(T)return S=T,!1}),S){const{raycaster:C,pointer:T,camera:M,internal:w}=S,B=new K(T.x,T.y,0).unproject(M),D=L=>{var F,W;return(F=(W=w.capturedMap.get(L))==null?void 0:W.has(x.eventObject))!=null?F:!1},P=L=>{const F={intersection:x,target:p.target};w.capturedMap.has(L)?w.capturedMap.get(L).set(x.eventObject,F):w.capturedMap.set(L,new Map([[x.eventObject,F]])),p.target.setPointerCapture(L)},U=L=>{const F=w.capturedMap.get(L);F&&S2(w.capturedMap,x.eventObject,F,L)};let z={};for(let L in p){let F=p[L];typeof F!="function"&&(z[L]=F)}let j={...x,...z,pointer:T,intersections:d,stopped:_.stopped,delta:g,unprojectedPoint:B,ray:C.ray,camera:M,stopPropagation(){const L="pointerId"in p&&w.capturedMap.get(p.pointerId);if((!L||L.has(x.eventObject))&&(j.stopped=_.stopped=!0,w.hovered.size&&Array.from(w.hovered.values()).find(F=>F.eventObject===x.eventObject))){const F=d.slice(0,d.indexOf(x));s([...F,x])}},target:{hasPointerCapture:D,setPointerCapture:P,releasePointerCapture:U},currentTarget:{hasPointerCapture:D,setPointerCapture:P,releasePointerCapture:U},nativeEvent:p};if(v(j),_.stopped===!0)break}}}return d}function s(d){const{internal:p}=n.getState();for(const g of p.hovered.values())if(!d.length||!d.find(v=>v.object===g.object&&v.index===g.index&&v.instanceId===g.instanceId)){const _=g.eventObject.__r3f;if(p.hovered.delete(x_(g)),_!=null&&_.eventCount){const x=_.handlers,S={...g,intersections:d};x.onPointerOut==null||x.onPointerOut(S),x.onPointerLeave==null||x.onPointerLeave(S)}}}function l(d,p){for(let g=0;g<p.length;g++){const v=p[g].__r3f;v==null||v.handlers.onPointerMissed==null||v.handlers.onPointerMissed(d)}}function c(d){switch(d){case"onPointerLeave":case"onPointerCancel":return()=>s([]);case"onLostPointerCapture":return p=>{const{internal:g}=n.getState();"pointerId"in p&&g.capturedMap.has(p.pointerId)&&requestAnimationFrame(()=>{g.capturedMap.has(p.pointerId)&&(g.capturedMap.delete(p.pointerId),s([]))})}}return function(g){const{onPointerMissed:v,internal:_}=n.getState();_.lastEvent.current=g;const x=d==="onPointerMove",S=d==="onClick"||d==="onContextMenu"||d==="onDoubleClick",T=i(g,x?t:void 0),M=S?e(g):0;d==="onPointerDown"&&(_.initialClick=[g.offsetX,g.offsetY],_.initialHits=T.map(B=>B.eventObject)),S&&!T.length&&M<=2&&(l(g,_.interaction),v&&v(g)),x&&s(T);function w(B){const D=B.eventObject,P=D.__r3f;if(!(P!=null&&P.eventCount))return;const U=P.handlers;if(x){if(U.onPointerOver||U.onPointerEnter||U.onPointerOut||U.onPointerLeave){const z=x_(B),j=_.hovered.get(z);j?j.stopped&&B.stopPropagation():(_.hovered.set(z,B),U.onPointerOver==null||U.onPointerOver(B),U.onPointerEnter==null||U.onPointerEnter(B))}U.onPointerMove==null||U.onPointerMove(B)}else{const z=U[d];z?(!S||_.initialHits.includes(D))&&(l(g,_.interaction.filter(j=>!_.initialHits.includes(j))),z(B)):S&&_.initialHits.includes(D)&&l(g,_.interaction.filter(j=>!_.initialHits.includes(j)))}}a(T,g,M,w)}}return{handlePointer:c}}const M2=n=>!!(n!=null&&n.render),E2=H.createContext(null),oG=(n,e)=>{const t=OH((c,d)=>{const p=new K,g=new K,v=new K;function _(M=d().camera,w=g,B=d().size){const{width:D,height:P,top:U,left:z}=B,j=D/P;w.isVector3?v.copy(w):v.set(...w);const L=M.getWorldPosition(p).distanceTo(v);if(v2(M))return{width:D/M.zoom,height:P/M.zoom,top:U,left:z,factor:1,distance:L,aspect:j};{const F=M.fov*Math.PI/180,W=2*Math.tan(F/2)*L,te=W*(D/P);return{width:te,height:W,top:U,left:z,factor:D/te,distance:L,aspect:j}}}let x;const S=M=>c(w=>({performance:{...w.performance,current:M}})),C=new He;return{set:c,get:d,gl:null,camera:null,raycaster:null,events:{priority:1,enabled:!0,connected:!1},scene:null,xr:null,invalidate:(M=1)=>n(d(),M),advance:(M,w)=>e(M,w,d()),legacy:!1,linear:!1,flat:!1,controls:null,clock:new yS,pointer:C,mouse:C,frameloop:"always",onPointerMissed:void 0,performance:{current:1,min:.5,max:1,debounce:200,regress:()=>{const M=d();x&&clearTimeout(x),M.performance.current!==M.performance.min&&S(M.performance.min),x=setTimeout(()=>S(d().performance.max),M.performance.debounce)}},size:{width:0,height:0,top:0,left:0},viewport:{initialDpr:0,dpr:0,width:0,height:0,top:0,left:0,aspect:0,distance:0,factor:0,getCurrentViewport:_},setEvents:M=>c(w=>({...w,events:{...w.events,...M}})),setSize:(M,w,B=0,D=0)=>{const P=d().camera,U={width:M,height:w,top:B,left:D};c(z=>({size:U,viewport:{...z.viewport,..._(P,g,U)}}))},setDpr:M=>c(w=>{const B=_2(M);return{viewport:{...w.viewport,dpr:B,initialDpr:w.viewport.initialDpr||B}}}),setFrameloop:(M="always")=>{const w=d().clock;w.stop(),w.elapsedTime=0,M!=="never"&&(w.start(),w.elapsedTime=0),c(()=>({frameloop:M}))},previousRoot:void 0,internal:{interaction:[],hovered:new Map,subscribers:[],initialClick:[0,0],initialHits:[],capturedMap:new Map,lastEvent:H.createRef(),active:!1,frames:0,priority:0,subscribe:(M,w,B)=>{const D=d().internal;return D.priority=D.priority+(w>0?1:0),D.subscribers.push({ref:M,priority:w,store:B}),D.subscribers=D.subscribers.sort((P,U)=>P.priority-U.priority),()=>{const P=d().internal;P!=null&&P.subscribers&&(P.priority=P.priority-(w>0?1:0),P.subscribers=P.subscribers.filter(U=>U.ref!==M))}}}}}),i=t.getState();let a=i.size,s=i.viewport.dpr,l=i.camera;return t.subscribe(()=>{const{camera:c,size:d,viewport:p,gl:g,set:v}=t.getState();if(d.width!==a.width||d.height!==a.height||p.dpr!==s){a=d,s=p.dpr,aG(c,d),p.dpr>0&&g.setPixelRatio(p.dpr);const _=typeof HTMLCanvasElement<"u"&&g.domElement instanceof HTMLCanvasElement;g.setSize(d.width,d.height,_)}c!==l&&(l=c,v(_=>({viewport:{..._.viewport,..._.viewport.getCurrentViewport(c)}})))}),t.subscribe(c=>n(c)),t};function T2(){const n=H.useContext(E2);if(!n)throw new Error("R3F: Hooks can only be used within the Canvas component!");return n}function C2(n=t=>t,e){return T2()(n,e)}function JS(n,e=0){const t=T2(),i=t.getState().internal.subscribe,a=y2(n);return jm(()=>i(a,e,t),[e,i,t]),null}const R2=new WeakMap,lG=n=>{var e;return typeof n=="function"&&(n==null||(e=n.prototype)==null?void 0:e.constructor)===n};function w2(n,e){return function(t,...i){let a;return lG(t)?(a=R2.get(t),a||(a=new t,R2.set(t,a))):a=t,n&&n(a),Promise.all(i.map(s=>new Promise((l,c)=>a.load(s,d=>{sr(d?.scene)&&Object.assign(d,QH(d.scene)),l(d)},e,d=>c(new Error(`Could not load ${s}: ${d?.message}`))))))}}function $c(n,e,t,i){const a=Array.isArray(e)?e:[e],s=UH(w2(t,i),[n,...a],{equal:li.equ});return Array.isArray(e)?s:s[0]}$c.preload=function(n,e,t){const i=Array.isArray(e)?e:[e];return LH(w2(t),[n,...i])},$c.clear=function(n,e){const t=Array.isArray(e)?e:[e];return IH([n,...t])};var cG={version:"9.4.2"};function uG(n){const e=GH(n);return e.injectIntoDevTools(),e}const B2=0,bd={},fG=/^three(?=[A-Z])/,b_=n=>`${n[0].toUpperCase()}${n.slice(1)}`;let hG=0;const dG=n=>typeof n=="function";function pG(n){if(dG(n)){const e=`${hG++}`;return bd[e]=n,e}else Object.assign(bd,n)}function D2(n,e){const t=b_(n),i=bd[t];if(n!=="primitive"&&!i)throw new Error(`R3F: ${t} is not part of the THREE namespace! Did you forget to extend? See: https://docs.pmnd.rs/react-three-fiber/api/objects#using-3rd-party-objects-declaratively`);if(n==="primitive"&&!e.object)throw new Error("R3F: Primitives without 'object' are invalid!");if(e.args!==void 0&&!Array.isArray(e.args))throw new Error("R3F: The args prop must be an array!")}function mG(n,e,t){var i;return n=b_(n)in bd?n:n.replace(fG,""),D2(n,e),n==="primitive"&&(i=e.object)!=null&&i.__r3f&&delete e.object.__r3f,v_(e.object,t,n,e)}function gG(n){if(!n.isHidden){var e;n.props.attach&&(e=n.parent)!=null&&e.object?__(n.parent,n):sr(n.object)&&(n.object.visible=!1),n.isHidden=!0,xd(n)}}function O2(n){if(n.isHidden){var e;n.props.attach&&(e=n.parent)!=null&&e.object?y_(n.parent,n):sr(n.object)&&n.props.visible!==!1&&(n.object.visible=!0),n.isHidden=!1,xd(n)}}function KS(n,e,t){const i=e.root.getState();if(!(!n.parent&&n.object!==i.scene)){if(!e.object){var a,s;const l=bd[b_(e.type)];e.object=(a=e.props.object)!=null?a:new l(...(s=e.props.args)!=null?s:[]),e.object.__r3f=e}if(Zc(e.object,e.props),e.props.attach)y_(n,e);else if(sr(e.object)&&sr(n.object)){const l=n.object.children.indexOf(t?.object);if(t&&l!==-1){const c=n.object.children.indexOf(e.object);if(c!==-1){n.object.children.splice(c,1);const d=c<l?l-1:l;n.object.children.splice(d,0,e.object)}else e.object.parent=n.object,n.object.children.splice(l,0,e.object),e.object.dispatchEvent({type:"added"}),n.object.dispatchEvent({type:"childadded",child:e.object})}else n.object.add(e.object)}for(const l of e.children)KS(e,l);xd(e)}}function QS(n,e){e&&(e.parent=n,n.children.push(e),KS(n,e))}function N2(n,e,t){if(!e||!t)return;e.parent=n;const i=n.children.indexOf(t);i!==-1?n.children.splice(i,0,e):n.children.push(e),KS(n,e,t)}function U2(n){if(typeof n.dispose=="function"){const e=()=>{try{n.dispose()}catch{}};typeof IS_REACT_ACT_ENVIRONMENT<"u"?e():h2.unstable_scheduleCallback(h2.unstable_IdlePriority,e)}}function ZS(n,e,t){if(!e)return;e.parent=null;const i=n.children.indexOf(e);i!==-1&&n.children.splice(i,1),e.props.attach?__(n,e):sr(e.object)&&sr(n.object)&&(n.object.remove(e.object),rG(g2(e),e.object));const a=e.props.dispose!==null&&t!==!1;for(let s=e.children.length-1;s>=0;s--){const l=e.children[s];ZS(e,l,a)}e.children.length=0,delete e.object.__r3f,a&&e.type!=="primitive"&&e.object.type!=="Scene"&&U2(e.object),t===void 0&&xd(e)}function vG(n,e){for(const t of[n,n.alternate])if(t!==null)if(typeof t.ref=="function"){t.refCleanup==null||t.refCleanup();const i=t.ref(e);typeof i=="function"&&(t.refCleanup=i)}else t.ref&&(t.ref.current=e)}const A_=[];function yG(){for(const[t]of A_){const i=t.parent;if(i){t.props.attach?__(i,t):sr(t.object)&&sr(i.object)&&i.object.remove(t.object);for(const a of t.children)a.props.attach?__(t,a):sr(a.object)&&sr(t.object)&&t.object.remove(a.object)}t.isHidden&&O2(t),t.object.__r3f&&delete t.object.__r3f,t.type!=="primitive"&&U2(t.object)}for(const[t,i,a]of A_){t.props=i;const s=t.parent;if(s){var n,e;const l=bd[b_(t.type)];t.object=(n=t.props.object)!=null?n:new l(...(e=t.props.args)!=null?e:[]),t.object.__r3f=t,vG(a,t.object),Zc(t.object,t.props),t.props.attach?y_(s,t):sr(t.object)&&sr(s.object)&&s.object.add(t.object);for(const c of t.children)c.props.attach?y_(t,c):sr(c.object)&&sr(t.object)&&t.object.add(c.object);xd(t)}}A_.length=0}const $S=()=>{},L2={};let S_=B2;const _G=0,xG=4,e1=uG({isPrimaryRenderer:!1,warnsIfNotActing:!1,supportsMutation:!0,supportsPersistence:!1,supportsHydration:!1,createInstance:mG,removeChild:ZS,appendChild:QS,appendInitialChild:QS,insertBefore:N2,appendChildToContainer(n,e){const t=n.getState().scene.__r3f;!e||!t||QS(t,e)},removeChildFromContainer(n,e){const t=n.getState().scene.__r3f;!e||!t||ZS(t,e)},insertInContainerBefore(n,e,t){const i=n.getState().scene.__r3f;!e||!t||!i||N2(i,e,t)},getRootHostContext:()=>L2,getChildHostContext:()=>L2,commitUpdate(n,e,t,i,a){var s,l,c;D2(e,i);let d=!1;if((n.type==="primitive"&&t.object!==i.object||((s=i.args)==null?void 0:s.length)!==((l=t.args)==null?void 0:l.length)||(c=i.args)!=null&&c.some((g,v)=>{var _;return g!==((_=t.args)==null?void 0:_[v])}))&&(d=!0),d)A_.push([n,{...i},a]);else{const g=tG(n,i);Object.keys(g).length&&(Object.assign(n.props,g),Zc(n.object,g))}(a.sibling===null||(a.flags&xG)===_G)&&yG()},finalizeInitialChildren:()=>!1,commitMount(){},getPublicInstance:n=>n?.object,prepareForCommit:()=>null,preparePortalMount:n=>v_(n.getState().scene,n,"",{}),resetAfterCommit:()=>{},shouldSetTextContent:()=>!1,clearContainer:()=>!1,hideInstance:gG,unhideInstance:O2,createTextInstance:$S,hideTextInstance:$S,unhideTextInstance:$S,scheduleTimeout:typeof setTimeout=="function"?setTimeout:void 0,cancelTimeout:typeof clearTimeout=="function"?clearTimeout:void 0,noTimeout:-1,getInstanceFromNode:()=>null,beforeActiveInstanceBlur(){},afterActiveInstanceBlur(){},detachDeletedInstance(){},prepareScopeUpdate(){},getInstanceFromScope:()=>null,shouldAttemptEagerTransition:()=>!1,trackSchedulerEvent:()=>{},resolveEventType:()=>null,resolveEventTimeStamp:()=>-1.1,requestPostPaintCallback(){},maySuspendCommit:()=>!1,preloadInstance:()=>!0,startSuspendingCommit(){},suspendInstance(){},waitForCommitToBeReady:()=>null,NotPendingTransition:null,HostTransitionContext:H.createContext(null),setCurrentUpdatePriority(n){S_=n},getCurrentUpdatePriority(){return S_},resolveUpdatePriority(){var n;if(S_!==B2)return S_;switch(typeof window<"u"&&((n=window.event)==null?void 0:n.type)){case"click":case"contextmenu":case"dblclick":case"pointercancel":case"pointerdown":case"pointerup":return W0.DiscreteEventPriority;case"pointermove":case"pointerout":case"pointerover":case"pointerenter":case"pointerleave":case"wheel":return W0.ContinuousEventPriority;default:return W0.DefaultEventPriority}},resetFormInstance(){},rendererPackageName:"@react-three/fiber",rendererVersion:cG.version}),Rf=new Map,Ad={objects:"shallow",strict:!1};function bG(n,e){if(!e&&typeof HTMLCanvasElement<"u"&&n instanceof HTMLCanvasElement&&n.parentElement){const{width:t,height:i,top:a,left:s}=n.parentElement.getBoundingClientRect();return{width:t,height:i,top:a,left:s}}else if(!e&&typeof OffscreenCanvas<"u"&&n instanceof OffscreenCanvas)return{width:n.width,height:n.height,top:0,left:0};return{width:0,height:0,top:0,left:0,...e}}function AG(n){const e=Rf.get(n),t=e?.fiber,i=e?.store;e&&console.warn("R3F.createRoot should only be called once!");const a=typeof reportError=="function"?reportError:console.error,s=i||oG(o1,z2),l=t||e1.createContainer(s,W0.ConcurrentRoot,null,!1,null,"",a,a,a,null);e||Rf.set(n,{fiber:l,store:s});let c,d,p=!1,g=null;return{async configure(v={}){let _;g=new Promise(q=>_=q);let{gl:x,size:S,scene:C,events:T,onCreated:M,shadows:w=!1,linear:B=!1,flat:D=!1,legacy:P=!1,orthographic:U=!1,frameloop:z="always",dpr:j=[1,2],performance:L,raycaster:F,camera:W,onPointerMissed:te}=v,$=s.getState(),ae=$.gl;if(!$.gl){const q={canvas:n,powerPreference:"high-performance",antialias:!0,alpha:!0},ce=typeof x=="function"?await x(q):x;M2(ce)?ae=ce:ae=new QR({...q,...x}),$.set({gl:ae})}let le=$.raycaster;le||$.set({raycaster:le=new fR});const{params:G,...J}=F||{};if(li.equ(J,le,Ad)||Zc(le,{...J}),li.equ(G,le.params,Ad)||Zc(le,{params:{...le.params,...G}}),!$.camera||$.camera===d&&!li.equ(d,W,Ad)){d=W;const q=W?.isCamera,ce=q?W:U?new vf(0,0,0,0,.1,1e3):new Zi(75,0,.1,1e3);q||(ce.position.z=5,W&&(Zc(ce,W),ce.manual||("aspect"in W||"left"in W||"right"in W||"bottom"in W||"top"in W)&&(ce.manual=!0,ce.updateProjectionMatrix())),!$.camera&&!(W!=null&&W.rotation)&&ce.lookAt(0,0,0)),$.set({camera:ce}),le.camera=ce}if(!$.scene){let q;C!=null&&C.isScene?(q=C,v_(q,s,"",{})):(q=new wA,v_(q,s,"",{}),C&&Zc(q,C)),$.set({scene:q})}T&&!$.events.handlers&&$.set({events:T(s)});const Z=bG(n,S);if(li.equ(Z,$.size,Ad)||$.setSize(Z.width,Z.height,Z.top,Z.left),j&&$.viewport.dpr!==_2(j)&&$.setDpr(j),$.frameloop!==z&&$.setFrameloop(z),$.onPointerMissed||$.set({onPointerMissed:te}),L&&!li.equ(L,$.performance,Ad)&&$.set(q=>({performance:{...q.performance,...L}})),!$.xr){var pe;const q=(De,qe)=>{const ge=s.getState();ge.frameloop!=="never"&&z2(De,!0,ge,qe)},ce=()=>{const De=s.getState();De.gl.xr.enabled=De.gl.xr.isPresenting,De.gl.xr.setAnimationLoop(De.gl.xr.isPresenting?q:null),De.gl.xr.isPresenting||o1(De)},Te={connect(){const De=s.getState().gl;De.xr.addEventListener("sessionstart",ce),De.xr.addEventListener("sessionend",ce)},disconnect(){const De=s.getState().gl;De.xr.removeEventListener("sessionstart",ce),De.xr.removeEventListener("sessionend",ce)}};typeof((pe=ae.xr)==null?void 0:pe.addEventListener)=="function"&&Te.connect(),$.set({xr:Te})}if(ae.shadowMap){const q=ae.shadowMap.enabled,ce=ae.shadowMap.type;if(ae.shadowMap.enabled=!!w,li.boo(w))ae.shadowMap.type=$p;else if(li.str(w)){var _e;const Te={basic:HE,percentage:Rh,soft:$p,variance:ju};ae.shadowMap.type=(_e=Te[w])!=null?_e:$p}else li.obj(w)&&Object.assign(ae.shadowMap,w);(q!==ae.shadowMap.enabled||ce!==ae.shadowMap.type)&&(ae.shadowMap.needsUpdate=!0)}return vn.enabled=!P,p||(ae.outputColorSpace=B?Ic:Aa,ae.toneMapping=D?ms:av),$.legacy!==P&&$.set(()=>({legacy:P})),$.linear!==B&&$.set(()=>({linear:B})),$.flat!==D&&$.set(()=>({flat:D})),x&&!li.fun(x)&&!M2(x)&&!li.equ(x,ae,Ad)&&Zc(ae,x),c=M,p=!0,_(),this},render(v){return!p&&!g&&this.configure(),g.then(()=>{e1.updateContainer(dt.jsx(SG,{store:s,children:v,onCreated:c,rootElement:n}),l,null,()=>{})}),s},unmount(){I2(n)}}}function SG({store:n,children:e,onCreated:t,rootElement:i}){return jm(()=>{const a=n.getState();a.set(s=>({internal:{...s.internal,active:!0}})),t&&t(a),n.getState().events.connected||a.events.connect==null||a.events.connect(i)},[]),dt.jsx(E2.Provider,{value:n,children:e})}function I2(n,e){const t=Rf.get(n),i=t?.fiber;if(i){const a=t?.store.getState();a&&(a.internal.active=!1),e1.updateContainer(null,i,null,()=>{a&&setTimeout(()=>{try{var s,l,c,d;a.events.disconnect==null||a.events.disconnect(),(s=a.gl)==null||(l=s.renderLists)==null||l.dispose==null||l.dispose(),(c=a.gl)==null||c.forceContextLoss==null||c.forceContextLoss(),(d=a.gl)!=null&&d.xr&&a.xr.disconnect(),ZH(a.scene),Rf.delete(n)}catch{}},500)})}}const MG=new Set,EG=new Set,TG=new Set;function t1(n,e){if(n.size)for(const{callback:t}of n.values())t(e)}function qm(n,e){switch(n){case"before":return t1(MG,e);case"after":return t1(EG,e);case"tail":return t1(TG,e)}}let n1,i1;function a1(n,e,t){let i=e.clock.getDelta();e.frameloop==="never"&&typeof n=="number"&&(i=n-e.clock.elapsedTime,e.clock.oldTime=e.clock.elapsedTime,e.clock.elapsedTime=n),n1=e.internal.subscribers;for(let a=0;a<n1.length;a++)i1=n1[a],i1.ref.current(i1.store.getState(),i,t);return!e.internal.priority&&e.gl.render&&e.gl.render(e.scene,e.camera),e.internal.frames=Math.max(0,e.internal.frames-1),e.frameloop==="always"?1:e.internal.frames}let M_=!1,r1=!1,s1,P2,Sd;function F2(n){P2=requestAnimationFrame(F2),M_=!0,s1=0,qm("before",n),r1=!0;for(const t of Rf.values()){var e;Sd=t.store.getState(),Sd.internal.active&&(Sd.frameloop==="always"||Sd.internal.frames>0)&&!((e=Sd.gl.xr)!=null&&e.isPresenting)&&(s1+=a1(n,Sd))}if(r1=!1,qm("after",n),s1===0)return qm("tail",n),M_=!1,cancelAnimationFrame(P2)}function o1(n,e=1){var t;if(!n)return Rf.forEach(i=>o1(i.store.getState(),e));(t=n.gl.xr)!=null&&t.isPresenting||!n.internal.active||n.frameloop==="never"||(e>1?n.internal.frames=Math.min(60,n.internal.frames+e):r1?n.internal.frames=2:n.internal.frames=1,M_||(M_=!0,requestAnimationFrame(F2)))}function z2(n,e=!0,t,i){if(e&&qm("before",n),t)a1(n,t,i);else for(const a of Rf.values())a1(n,a.store.getState());e&&qm("after",n)}const l1={onClick:["click",!1],onContextMenu:["contextmenu",!1],onDoubleClick:["dblclick",!1],onWheel:["wheel",!0],onPointerDown:["pointerdown",!0],onPointerUp:["pointerup",!0],onPointerLeave:["pointerleave",!0],onPointerMove:["pointermove",!0],onPointerCancel:["pointercancel",!0],onLostPointerCapture:["lostpointercapture",!0]};function CG(n){const{handlePointer:e}=sG(n);return{priority:1,enabled:!0,compute(t,i,a){i.pointer.set(t.offsetX/i.size.width*2-1,-(t.offsetY/i.size.height)*2+1),i.raycaster.setFromCamera(i.pointer,i.camera)},connected:void 0,handlers:Object.keys(l1).reduce((t,i)=>({...t,[i]:e(i)}),{}),update:()=>{var t;const{events:i,internal:a}=n.getState();(t=a.lastEvent)!=null&&t.current&&i.handlers&&i.handlers.onPointerMove(a.lastEvent.current)},connect:t=>{const{set:i,events:a}=n.getState();if(a.disconnect==null||a.disconnect(),i(s=>({events:{...s.events,connected:t}})),a.handlers)for(const s in a.handlers){const l=a.handlers[s],[c,d]=l1[s];t.addEventListener(c,l,{passive:d})}},disconnect:()=>{const{set:t,events:i}=n.getState();if(i.connected){if(i.handlers)for(const a in i.handlers){const s=i.handlers[a],[l]=l1[a];i.connected.removeEventListener(l,s)}t(a=>({events:{...a.events,connected:void 0}}))}}}}function H2(n,e){let t;return(...i)=>{window.clearTimeout(t),t=window.setTimeout(()=>n(...i),e)}}function RG({debounce:n,scroll:e,polyfill:t,offsetSize:i}={debounce:0,scroll:!1,offsetSize:!1}){const a=t||(typeof window>"u"?class{}:window.ResizeObserver);if(!a)throw new Error("This browser does not support ResizeObserver out of the box. See: https://github.com/react-spring/react-use-measure/#resize-observer-polyfills");const[s,l]=H.useState({left:0,top:0,width:0,height:0,bottom:0,right:0,x:0,y:0}),c=H.useRef({element:null,scrollContainers:null,resizeObserver:null,lastBounds:s,orientationHandler:null}),d=n?typeof n=="number"?n:n.scroll:null,p=n?typeof n=="number"?n:n.resize:null,g=H.useRef(!1);H.useEffect(()=>(g.current=!0,()=>{g.current=!1}));const[v,_,x]=H.useMemo(()=>{const M=()=>{if(!c.current.element)return;const{left:w,top:B,width:D,height:P,bottom:U,right:z,x:j,y:L}=c.current.element.getBoundingClientRect(),F={left:w,top:B,width:D,height:P,bottom:U,right:z,x:j,y:L};c.current.element instanceof HTMLElement&&i&&(F.height=c.current.element.offsetHeight,F.width=c.current.element.offsetWidth),Object.freeze(F),g.current&&!OG(c.current.lastBounds,F)&&l(c.current.lastBounds=F)};return[M,p?H2(M,p):M,d?H2(M,d):M]},[l,i,d,p]);function S(){c.current.scrollContainers&&(c.current.scrollContainers.forEach(M=>M.removeEventListener("scroll",x,!0)),c.current.scrollContainers=null),c.current.resizeObserver&&(c.current.resizeObserver.disconnect(),c.current.resizeObserver=null),c.current.orientationHandler&&("orientation"in screen&&"removeEventListener"in screen.orientation?screen.orientation.removeEventListener("change",c.current.orientationHandler):"onorientationchange"in window&&window.removeEventListener("orientationchange",c.current.orientationHandler))}function C(){c.current.element&&(c.current.resizeObserver=new a(x),c.current.resizeObserver.observe(c.current.element),e&&c.current.scrollContainers&&c.current.scrollContainers.forEach(M=>M.addEventListener("scroll",x,{capture:!0,passive:!0})),c.current.orientationHandler=()=>{x()},"orientation"in screen&&"addEventListener"in screen.orientation?screen.orientation.addEventListener("change",c.current.orientationHandler):"onorientationchange"in window&&window.addEventListener("orientationchange",c.current.orientationHandler))}const T=M=>{!M||M===c.current.element||(S(),c.current.element=M,c.current.scrollContainers=G2(M),C())};return BG(x,!!e),wG(_),H.useEffect(()=>{S(),C()},[e,x,_]),H.useEffect(()=>S,[]),[T,s,v]}function wG(n){H.useEffect(()=>{const e=n;return window.addEventListener("resize",e),()=>{window.removeEventListener("resize",e)}},[n])}function BG(n,e){H.useEffect(()=>{if(e){const t=n;return window.addEventListener("scroll",t,{capture:!0,passive:!0}),()=>{window.removeEventListener("scroll",t,!0)}}},[n,e])}function G2(n){const e=[];if(!n||n===document.body)return e;const{overflow:t,overflowX:i,overflowY:a}=window.getComputedStyle(n);return[t,i,a].some(s=>s==="auto"||s==="scroll")&&e.push(n),[...e,...G2(n.parentElement)]}const DG=["x","y","top","bottom","left","right","width","height"],OG=(n,e)=>DG.every(t=>n[t]===e[t]);function NG({ref:n,children:e,fallback:t,resize:i,style:a,gl:s,events:l=CG,eventSource:c,eventPrefix:d,shadows:p,linear:g,flat:v,legacy:_,orthographic:x,frameloop:S,dpr:C,performance:T,raycaster:M,camera:w,scene:B,onPointerMissed:D,onCreated:P,...U}){H.useMemo(()=>pG(AH),[]);const z=WH(),[j,L]=RG({scroll:!0,debounce:{scroll:50,resize:0},...i}),F=H.useRef(null),W=H.useRef(null);H.useImperativeHandle(n,()=>F.current);const te=y2(D),[$,ae]=H.useState(!1),[le,G]=H.useState(!1);if($)throw $;if(le)throw le;const J=H.useRef(null);jm(()=>{const pe=F.current;if(L.width>0&&L.height>0&&pe){J.current||(J.current=AG(pe));async function _e(){await J.current.configure({gl:s,scene:B,events:l,shadows:p,linear:g,flat:v,legacy:_,orthographic:x,frameloop:S,dpr:C,performance:T,raycaster:M,camera:w,size:L,onPointerMissed:(...q)=>te.current==null?void 0:te.current(...q),onCreated:q=>{q.events.connect==null||q.events.connect(c?YH(c)?c.current:c:W.current),d&&q.setEvents({compute:(ce,Te)=>{const De=ce[d+"X"],qe=ce[d+"Y"];Te.pointer.set(De/Te.size.width*2-1,-(qe/Te.size.height)*2+1),Te.raycaster.setFromCamera(Te.pointer,Te.camera)}}),P?.(q)}}),J.current.render(dt.jsx(z,{children:dt.jsx(KH,{set:G,children:dt.jsx(H.Suspense,{fallback:dt.jsx(JH,{set:ae}),children:e??null})})}))}_e()}}),H.useEffect(()=>{const pe=F.current;if(pe)return()=>I2(pe)},[]);const Z=c?"none":"auto";return dt.jsx("div",{ref:W,style:{position:"relative",width:"100%",height:"100%",overflow:"hidden",pointerEvents:Z,...a},...U,children:dt.jsx("div",{ref:j,style:{width:"100%",height:"100%"},children:dt.jsx("canvas",{ref:F,style:{display:"block"},children:t})})})}function UG(n){return dt.jsx(p2,{children:dt.jsx(NG,{...n})})}const LG=n=>n;function IG(n,e=LG){const t=ee.useSyncExternalStore(n.subscribe,ee.useCallback(()=>e(n.getState()),[n,e]),ee.useCallback(()=>e(n.getInitialState()),[n,e]));return ee.useDebugValue(t),t}const V2=n=>{const e=i2(n),t=i=>IG(e,i);return Object.assign(t,e),t},PG=(n=>n?V2(n):V2);let Wm=0;const FG=PG(n=>(dd.onStart=(e,t,i)=>{n({active:!0,item:e,loaded:t,total:i,progress:(t-Wm)/(i-Wm)*100})},dd.onLoad=()=>{n({active:!1})},dd.onError=e=>n(t=>({errors:[...t.errors,e]})),dd.onProgress=(e,t,i)=>{t===i&&(Wm=i),n({active:!0,item:e,loaded:t,total:i,progress:(t-Wm)/(i-Wm)*100||100})},{errors:[],active:!1,progress:0,item:"",loaded:0,total:0}));function zG(n,e,t){return Math.max(e,Math.min(n,t))}const Ha={toVector(n,e){return n===void 0&&(n=e),Array.isArray(n)?n:[n,n]},add(n,e){return[n[0]+e[0],n[1]+e[1]]},sub(n,e){return[n[0]-e[0],n[1]-e[1]]},addTo(n,e){n[0]+=e[0],n[1]+=e[1]},subTo(n,e){n[0]-=e[0],n[1]-=e[1]}};function k2(n,e,t){return e===0||Math.abs(e)===1/0?Math.pow(n,t*5):n*e*t/(e+t*n)}function X2(n,e,t,i=.15){return i===0?zG(n,e,t):n<e?-k2(e-n,t-e,i)+e:n>t?+k2(n-t,t-e,i)+t:n}function HG(n,[e,t],[i,a]){const[[s,l],[c,d]]=n;return[X2(e,s,l,i),X2(t,c,d,a)]}function GG(n,e){if(typeof n!="object"||n===null)return n;var t=n[Symbol.toPrimitive];if(t!==void 0){var i=t.call(n,e);if(typeof i!="object")return i;throw new TypeError("@@toPrimitive must return a primitive value.")}return(e==="string"?String:Number)(n)}function VG(n){var e=GG(n,"string");return typeof e=="symbol"?e:String(e)}function Nr(n,e,t){return e=VG(e),e in n?Object.defineProperty(n,e,{value:t,enumerable:!0,configurable:!0,writable:!0}):n[e]=t,n}function j2(n,e){var t=Object.keys(n);if(Object.getOwnPropertySymbols){var i=Object.getOwnPropertySymbols(n);e&&(i=i.filter(function(a){return Object.getOwnPropertyDescriptor(n,a).enumerable})),t.push.apply(t,i)}return t}function vi(n){for(var e=1;e<arguments.length;e++){var t=arguments[e]!=null?arguments[e]:{};e%2?j2(Object(t),!0).forEach(function(i){Nr(n,i,t[i])}):Object.getOwnPropertyDescriptors?Object.defineProperties(n,Object.getOwnPropertyDescriptors(t)):j2(Object(t)).forEach(function(i){Object.defineProperty(n,i,Object.getOwnPropertyDescriptor(t,i))})}return n}const Y2={pointer:{start:"down",change:"move",end:"up"},mouse:{start:"down",change:"move",end:"up"},touch:{start:"start",change:"move",end:"end"},gesture:{start:"start",change:"change",end:"end"}};function q2(n){return n?n[0].toUpperCase()+n.slice(1):""}const kG=["enter","leave"];function XG(n=!1,e){return n&&!kG.includes(e)}function jG(n,e="",t=!1){const i=Y2[n],a=i&&i[e]||e;return"on"+q2(n)+q2(a)+(XG(t,a)?"Capture":"")}const YG=["gotpointercapture","lostpointercapture"];function qG(n){let e=n.substring(2).toLowerCase();const t=!!~e.indexOf("passive");t&&(e=e.replace("passive",""));const i=YG.includes(e)?"capturecapture":"capture",a=!!~e.indexOf(i);return a&&(e=e.replace("capture","")),{device:e,capture:a,passive:t}}function WG(n,e=""){const t=Y2[n],i=t&&t[e]||e;return n+i}function E_(n){return"touches"in n}function W2(n){return E_(n)?"touch":"pointerType"in n?n.pointerType:"mouse"}function JG(n){return Array.from(n.touches).filter(e=>{var t,i;return e.target===n.currentTarget||((t=n.currentTarget)===null||t===void 0||(i=t.contains)===null||i===void 0?void 0:i.call(t,e.target))})}function KG(n){return n.type==="touchend"||n.type==="touchcancel"?n.changedTouches:n.targetTouches}function J2(n){return E_(n)?KG(n)[0]:n}function QG(n){return JG(n).map(e=>e.identifier)}function c1(n){const e=J2(n);return E_(n)?e.identifier:e.pointerId}function K2(n){const e=J2(n);return[e.clientX,e.clientY]}function ZG(n){const e={};if("buttons"in n&&(e.buttons=n.buttons),"shiftKey"in n){const{shiftKey:t,altKey:i,metaKey:a,ctrlKey:s}=n;Object.assign(e,{shiftKey:t,altKey:i,metaKey:a,ctrlKey:s})}return e}function T_(n,...e){return typeof n=="function"?n(...e):n}function $G(){}function e5(...n){return n.length===0?$G:n.length===1?n[0]:function(){let e;for(const t of n)e=t.apply(this,arguments)||e;return e}}function Q2(n,e){return Object.assign({},e,n||{})}const t5=32;class n5{constructor(e,t,i){this.ctrl=e,this.args=t,this.key=i,this.state||(this.state={},this.computeValues([0,0]),this.computeInitial(),this.init&&this.init(),this.reset())}get state(){return this.ctrl.state[this.key]}set state(e){this.ctrl.state[this.key]=e}get shared(){return this.ctrl.state.shared}get eventStore(){return this.ctrl.gestureEventStores[this.key]}get timeoutStore(){return this.ctrl.gestureTimeoutStores[this.key]}get config(){return this.ctrl.config[this.key]}get sharedConfig(){return this.ctrl.config.shared}get handler(){return this.ctrl.handlers[this.key]}reset(){const{state:e,shared:t,ingKey:i,args:a}=this;t[i]=e._active=e.active=e._blocked=e._force=!1,e._step=[!1,!1],e.intentional=!1,e._movement=[0,0],e._distance=[0,0],e._direction=[0,0],e._delta=[0,0],e._bounds=[[-1/0,1/0],[-1/0,1/0]],e.args=a,e.axis=void 0,e.memo=void 0,e.elapsedTime=e.timeDelta=0,e.direction=[0,0],e.distance=[0,0],e.overflow=[0,0],e._movementBound=[!1,!1],e.velocity=[0,0],e.movement=[0,0],e.delta=[0,0],e.timeStamp=0}start(e){const t=this.state,i=this.config;t._active||(this.reset(),this.computeInitial(),t._active=!0,t.target=e.target,t.currentTarget=e.currentTarget,t.lastOffset=i.from?T_(i.from,t):t.offset,t.offset=t.lastOffset,t.startTime=t.timeStamp=e.timeStamp)}computeValues(e){const t=this.state;t._values=e,t.values=this.config.transform(e)}computeInitial(){const e=this.state;e._initial=e._values,e.initial=e.values}compute(e){const{state:t,config:i,shared:a}=this;t.args=this.args;let s=0;if(e&&(t.event=e,i.preventDefault&&e.cancelable&&t.event.preventDefault(),t.type=e.type,a.touches=this.ctrl.pointerIds.size||this.ctrl.touchIds.size,a.locked=!!document.pointerLockElement,Object.assign(a,ZG(e)),a.down=a.pressed=a.buttons%2===1||a.touches>0,s=e.timeStamp-t.timeStamp,t.timeStamp=e.timeStamp,t.elapsedTime=t.timeStamp-t.startTime),t._active){const U=t._delta.map(Math.abs);Ha.addTo(t._distance,U)}this.axisIntent&&this.axisIntent(e);const[l,c]=t._movement,[d,p]=i.threshold,{_step:g,values:v}=t;if(i.hasCustomTransform?(g[0]===!1&&(g[0]=Math.abs(l)>=d&&v[0]),g[1]===!1&&(g[1]=Math.abs(c)>=p&&v[1])):(g[0]===!1&&(g[0]=Math.abs(l)>=d&&Math.sign(l)*d),g[1]===!1&&(g[1]=Math.abs(c)>=p&&Math.sign(c)*p)),t.intentional=g[0]!==!1||g[1]!==!1,!t.intentional)return;const _=[0,0];if(i.hasCustomTransform){const[U,z]=v;_[0]=g[0]!==!1?U-g[0]:0,_[1]=g[1]!==!1?z-g[1]:0}else _[0]=g[0]!==!1?l-g[0]:0,_[1]=g[1]!==!1?c-g[1]:0;this.restrictToAxis&&!t._blocked&&this.restrictToAxis(_);const x=t.offset,S=t._active&&!t._blocked||t.active;S&&(t.first=t._active&&!t.active,t.last=!t._active&&t.active,t.active=a[this.ingKey]=t._active,e&&(t.first&&("bounds"in i&&(t._bounds=T_(i.bounds,t)),this.setup&&this.setup()),t.movement=_,this.computeOffset()));const[C,T]=t.offset,[[M,w],[B,D]]=t._bounds;t.overflow=[C<M?-1:C>w?1:0,T<B?-1:T>D?1:0],t._movementBound[0]=t.overflow[0]?t._movementBound[0]===!1?t._movement[0]:t._movementBound[0]:!1,t._movementBound[1]=t.overflow[1]?t._movementBound[1]===!1?t._movement[1]:t._movementBound[1]:!1;const P=t._active?i.rubberband||[0,0]:[0,0];if(t.offset=HG(t._bounds,t.offset,P),t.delta=Ha.sub(t.offset,x),this.computeMovement(),S&&(!t.last||s>t5)){t.delta=Ha.sub(t.offset,x);const U=t.delta.map(Math.abs);Ha.addTo(t.distance,U),t.direction=t.delta.map(Math.sign),t._direction=t._delta.map(Math.sign),!t.first&&s>0&&(t.velocity=[U[0]/s,U[1]/s],t.timeDelta=s)}}emit(){const e=this.state,t=this.shared,i=this.config;if(e._active||this.clean(),(e._blocked||!e.intentional)&&!e._force&&!i.triggerAllEvents)return;const a=this.handler(vi(vi(vi({},t),e),{},{[this.aliasKey]:e.values}));a!==void 0&&(e.memo=a)}clean(){this.eventStore.clean(),this.timeoutStore.clean()}}function i5([n,e],t){const i=Math.abs(n),a=Math.abs(e);if(i>a&&i>t)return"x";if(a>i&&a>t)return"y"}class a5 extends n5{constructor(...e){super(...e),Nr(this,"aliasKey","xy")}reset(){super.reset(),this.state.axis=void 0}init(){this.state.offset=[0,0],this.state.lastOffset=[0,0]}computeOffset(){this.state.offset=Ha.add(this.state.lastOffset,this.state.movement)}computeMovement(){this.state.movement=Ha.sub(this.state.offset,this.state.lastOffset)}axisIntent(e){const t=this.state,i=this.config;if(!t.axis&&e){const a=typeof i.axisThreshold=="object"?i.axisThreshold[W2(e)]:i.axisThreshold;t.axis=i5(t._movement,a)}t._blocked=(i.lockDirection||!!i.axis)&&!t.axis||!!i.axis&&i.axis!==t.axis}restrictToAxis(e){if(this.config.axis||this.config.lockDirection)switch(this.state.axis){case"x":e[1]=0;break;case"y":e[0]=0;break}}}const r5=n=>n,Z2=.15,$2={enabled(n=!0){return n},eventOptions(n,e,t){return vi(vi({},t.shared.eventOptions),n)},preventDefault(n=!1){return n},triggerAllEvents(n=!1){return n},rubberband(n=0){switch(n){case!0:return[Z2,Z2];case!1:return[0,0];default:return Ha.toVector(n)}},from(n){if(typeof n=="function")return n;if(n!=null)return Ha.toVector(n)},transform(n,e,t){const i=n||t.shared.transform;return this.hasCustomTransform=!!i,i||r5},threshold(n){return Ha.toVector(n,0)}},s5=0,Jm=vi(vi({},$2),{},{axis(n,e,{axis:t}){if(this.lockDirection=t==="lock",!this.lockDirection)return t},axisThreshold(n=s5){return n},bounds(n={}){if(typeof n=="function")return s=>Jm.bounds(n(s));if("current"in n)return()=>n.current;if(typeof HTMLElement=="function"&&n instanceof HTMLElement)return n;const{left:e=-1/0,right:t=1/0,top:i=-1/0,bottom:a=1/0}=n;return[[e,t],[i,a]]}}),ew={ArrowRight:(n,e=1)=>[n*e,0],ArrowLeft:(n,e=1)=>[-1*n*e,0],ArrowUp:(n,e=1)=>[0,-1*n*e],ArrowDown:(n,e=1)=>[0,n*e]};class o5 extends a5{constructor(...e){super(...e),Nr(this,"ingKey","dragging")}reset(){super.reset();const e=this.state;e._pointerId=void 0,e._pointerActive=!1,e._keyboardActive=!1,e._preventScroll=!1,e._delayed=!1,e.swipe=[0,0],e.tap=!1,e.canceled=!1,e.cancel=this.cancel.bind(this)}setup(){const e=this.state;if(e._bounds instanceof HTMLElement){const t=e._bounds.getBoundingClientRect(),i=e.currentTarget.getBoundingClientRect(),a={left:t.left-i.left+e.offset[0],right:t.right-i.right+e.offset[0],top:t.top-i.top+e.offset[1],bottom:t.bottom-i.bottom+e.offset[1]};e._bounds=Jm.bounds(a)}}cancel(){const e=this.state;e.canceled||(e.canceled=!0,e._active=!1,setTimeout(()=>{this.compute(),this.emit()},0))}setActive(){this.state._active=this.state._pointerActive||this.state._keyboardActive}clean(){this.pointerClean(),this.state._pointerActive=!1,this.state._keyboardActive=!1,super.clean()}pointerDown(e){const t=this.config,i=this.state;if(e.buttons!=null&&(Array.isArray(t.pointerButtons)?!t.pointerButtons.includes(e.buttons):t.pointerButtons!==-1&&t.pointerButtons!==e.buttons))return;const a=this.ctrl.setEventIds(e);t.pointerCapture&&e.target.setPointerCapture(e.pointerId),!(a&&a.size>1&&i._pointerActive)&&(this.start(e),this.setupPointer(e),i._pointerId=c1(e),i._pointerActive=!0,this.computeValues(K2(e)),this.computeInitial(),t.preventScrollAxis&&W2(e)!=="mouse"?(i._active=!1,this.setupScrollPrevention(e)):t.delay>0?(this.setupDelayTrigger(e),t.triggerAllEvents&&(this.compute(e),this.emit())):this.startPointerDrag(e))}startPointerDrag(e){const t=this.state;t._active=!0,t._preventScroll=!0,t._delayed=!1,this.compute(e),this.emit()}pointerMove(e){const t=this.state,i=this.config;if(!t._pointerActive)return;const a=c1(e);if(t._pointerId!==void 0&&a!==t._pointerId)return;const s=K2(e);if(document.pointerLockElement===e.target?t._delta=[e.movementX,e.movementY]:(t._delta=Ha.sub(s,t._values),this.computeValues(s)),Ha.addTo(t._movement,t._delta),this.compute(e),t._delayed&&t.intentional){this.timeoutStore.remove("dragDelay"),t.active=!1,this.startPointerDrag(e);return}if(i.preventScrollAxis&&!t._preventScroll)if(t.axis)if(t.axis===i.preventScrollAxis||i.preventScrollAxis==="xy"){t._active=!1,this.clean();return}else{this.timeoutStore.remove("startPointerDrag"),this.startPointerDrag(e);return}else return;this.emit()}pointerUp(e){this.ctrl.setEventIds(e);try{this.config.pointerCapture&&e.target.hasPointerCapture(e.pointerId)&&e.target.releasePointerCapture(e.pointerId)}catch{}const t=this.state,i=this.config;if(!t._active||!t._pointerActive)return;const a=c1(e);if(t._pointerId!==void 0&&a!==t._pointerId)return;this.state._pointerActive=!1,this.setActive(),this.compute(e);const[s,l]=t._distance;if(t.tap=s<=i.tapsThreshold&&l<=i.tapsThreshold,t.tap&&i.filterTaps)t._force=!0;else{const[c,d]=t._delta,[p,g]=t._movement,[v,_]=i.swipe.velocity,[x,S]=i.swipe.distance,C=i.swipe.duration;if(t.elapsedTime<C){const T=Math.abs(c/t.timeDelta),M=Math.abs(d/t.timeDelta);T>v&&Math.abs(p)>x&&(t.swipe[0]=Math.sign(c)),M>_&&Math.abs(g)>S&&(t.swipe[1]=Math.sign(d))}}this.emit()}pointerClick(e){!this.state.tap&&e.detail>0&&(e.preventDefault(),e.stopPropagation())}setupPointer(e){const t=this.config,i=t.device;t.pointerLock&&e.currentTarget.requestPointerLock(),t.pointerCapture||(this.eventStore.add(this.sharedConfig.window,i,"change",this.pointerMove.bind(this)),this.eventStore.add(this.sharedConfig.window,i,"end",this.pointerUp.bind(this)),this.eventStore.add(this.sharedConfig.window,i,"cancel",this.pointerUp.bind(this)))}pointerClean(){this.config.pointerLock&&document.pointerLockElement===this.state.currentTarget&&document.exitPointerLock()}preventScroll(e){this.state._preventScroll&&e.cancelable&&e.preventDefault()}setupScrollPrevention(e){this.state._preventScroll=!1,l5(e);const t=this.eventStore.add(this.sharedConfig.window,"touch","change",this.preventScroll.bind(this),{passive:!1});this.eventStore.add(this.sharedConfig.window,"touch","end",t),this.eventStore.add(this.sharedConfig.window,"touch","cancel",t),this.timeoutStore.add("startPointerDrag",this.startPointerDrag.bind(this),this.config.preventScrollDelay,e)}setupDelayTrigger(e){this.state._delayed=!0,this.timeoutStore.add("dragDelay",()=>{this.state._step=[0,0],this.startPointerDrag(e)},this.config.delay)}keyDown(e){const t=ew[e.key];if(t){const i=this.state,a=e.shiftKey?10:e.altKey?.1:1;this.start(e),i._delta=t(this.config.keyboardDisplacement,a),i._keyboardActive=!0,Ha.addTo(i._movement,i._delta),this.compute(e),this.emit()}}keyUp(e){e.key in ew&&(this.state._keyboardActive=!1,this.setActive(),this.compute(e),this.emit())}bind(e){const t=this.config.device;e(t,"start",this.pointerDown.bind(this)),this.config.pointerCapture&&(e(t,"change",this.pointerMove.bind(this)),e(t,"end",this.pointerUp.bind(this)),e(t,"cancel",this.pointerUp.bind(this)),e("lostPointerCapture","",this.pointerUp.bind(this))),this.config.keys&&(e("key","down",this.keyDown.bind(this)),e("key","up",this.keyUp.bind(this))),this.config.filterTaps&&e("click","",this.pointerClick.bind(this),{capture:!0,passive:!1})}}function l5(n){"persist"in n&&typeof n.persist=="function"&&n.persist()}const Km=typeof window<"u"&&window.document&&window.document.createElement;function tw(){return Km&&"ontouchstart"in window}function c5(){return tw()||Km&&window.navigator.maxTouchPoints>1}function u5(){return Km&&"onpointerdown"in window}function f5(){return Km&&"exitPointerLock"in window.document}function h5(){try{return"constructor"in GestureEvent}catch{return!1}}const As={isBrowser:Km,gesture:h5(),touch:tw(),touchscreen:c5(),pointer:u5(),pointerLock:f5()},d5=250,p5=180,m5=.5,g5=50,v5=250,y5=10,nw={mouse:0,touch:0,pen:8},_5=vi(vi({},Jm),{},{device(n,e,{pointer:{touch:t=!1,lock:i=!1,mouse:a=!1}={}}){return this.pointerLock=i&&As.pointerLock,As.touch&&t?"touch":this.pointerLock?"mouse":As.pointer&&!a?"pointer":As.touch?"touch":"mouse"},preventScrollAxis(n,e,{preventScroll:t}){if(this.preventScrollDelay=typeof t=="number"?t:t||t===void 0&&n?d5:void 0,!(!As.touchscreen||t===!1))return n||(t!==void 0?"y":void 0)},pointerCapture(n,e,{pointer:{capture:t=!0,buttons:i=1,keys:a=!0}={}}){return this.pointerButtons=i,this.keys=a,!this.pointerLock&&this.device==="pointer"&&t},threshold(n,e,{filterTaps:t=!1,tapsThreshold:i=3,axis:a=void 0}){const s=Ha.toVector(n,t?i:a?1:0);return this.filterTaps=t,this.tapsThreshold=i,s},swipe({velocity:n=m5,distance:e=g5,duration:t=v5}={}){return{velocity:this.transform(Ha.toVector(n)),distance:this.transform(Ha.toVector(e)),duration:t}},delay(n=0){switch(n){case!0:return p5;case!1:return 0;default:return n}},axisThreshold(n){return n?vi(vi({},nw),n):nw},keyboardDisplacement(n=y5){return n}});vi(vi({},$2),{},{device(n,e,{shared:t,pointer:{touch:i=!1}={}}){if(t.target&&!As.touch&&As.gesture)return"gesture";if(As.touch&&i)return"touch";if(As.touchscreen){if(As.pointer)return"pointer";if(As.touch)return"touch"}},bounds(n,e,{scaleBounds:t={},angleBounds:i={}}){const a=l=>{const c=Q2(T_(t,l),{min:-1/0,max:1/0});return[c.min,c.max]},s=l=>{const c=Q2(T_(i,l),{min:-1/0,max:1/0});return[c.min,c.max]};return typeof t!="function"&&typeof i!="function"?[a(),s()]:l=>[a(l),s(l)]},threshold(n,e,t){return this.lockDirection=t.axis==="lock",Ha.toVector(n,this.lockDirection?[.1,3]:0)},modifierKey(n){return n===void 0?"ctrlKey":n},pinchOnWheel(n=!0){return n}}),vi(vi({},Jm),{},{mouseOnly:(n=!0)=>n}),vi(vi({},Jm),{},{mouseOnly:(n=!0)=>n});const iw=new Map,u1=new Map;function x5(n){iw.set(n.key,n.engine),u1.set(n.key,n.resolver)}const b5={key:"drag",engine:o5,resolver:_5};function A5(n,e){if(n==null)return{};var t={},i=Object.keys(n),a,s;for(s=0;s<i.length;s++)a=i[s],!(e.indexOf(a)>=0)&&(t[a]=n[a]);return t}function S5(n,e){if(n==null)return{};var t=A5(n,e),i,a;if(Object.getOwnPropertySymbols){var s=Object.getOwnPropertySymbols(n);for(a=0;a<s.length;a++)i=s[a],!(e.indexOf(i)>=0)&&Object.prototype.propertyIsEnumerable.call(n,i)&&(t[i]=n[i])}return t}const M5={target(n){if(n)return()=>"current"in n?n.current:n},enabled(n=!0){return n},window(n=As.isBrowser?window:void 0){return n},eventOptions({passive:n=!0,capture:e=!1}={}){return{passive:n,capture:e}},transform(n){return n}},E5=["target","eventOptions","window","enabled","transform"];function C_(n={},e){const t={};for(const[i,a]of Object.entries(e))switch(typeof a){case"function":t[i]=a.call(t,n[i],i,n);break;case"object":t[i]=C_(n[i],a);break;case"boolean":a&&(t[i]=n[i]);break}return t}function T5(n,e,t={}){const i=n,{target:a,eventOptions:s,window:l,enabled:c,transform:d}=i,p=S5(i,E5);if(t.shared=C_({target:a,eventOptions:s,window:l,enabled:c,transform:d},M5),e){const g=u1.get(e);t[e]=C_(vi({shared:t.shared},p),g)}else for(const g in p){const v=u1.get(g);v&&(t[g]=C_(vi({shared:t.shared},p[g]),v))}return t}class aw{constructor(e,t){Nr(this,"_listeners",new Set),this._ctrl=e,this._gestureKey=t}add(e,t,i,a,s){const l=this._listeners,c=WG(t,i),d=this._gestureKey?this._ctrl.config[this._gestureKey].eventOptions:{},p=vi(vi({},d),s);e.addEventListener(c,a,p);const g=()=>{e.removeEventListener(c,a,p),l.delete(g)};return l.add(g),g}clean(){this._listeners.forEach(e=>e()),this._listeners.clear()}}class C5{constructor(){Nr(this,"_timeouts",new Map)}add(e,t,i=140,...a){this.remove(e),this._timeouts.set(e,window.setTimeout(t,i,...a))}remove(e){const t=this._timeouts.get(e);t&&window.clearTimeout(t)}clean(){this._timeouts.forEach(e=>{window.clearTimeout(e)}),this._timeouts.clear()}}class R5{constructor(e){Nr(this,"gestures",new Set),Nr(this,"_targetEventStore",new aw(this)),Nr(this,"gestureEventStores",{}),Nr(this,"gestureTimeoutStores",{}),Nr(this,"handlers",{}),Nr(this,"config",{}),Nr(this,"pointerIds",new Set),Nr(this,"touchIds",new Set),Nr(this,"state",{shared:{shiftKey:!1,metaKey:!1,ctrlKey:!1,altKey:!1}}),w5(this,e)}setEventIds(e){if(E_(e))return this.touchIds=new Set(QG(e)),this.touchIds;if("pointerId"in e)return e.type==="pointerup"||e.type==="pointercancel"?this.pointerIds.delete(e.pointerId):e.type==="pointerdown"&&this.pointerIds.add(e.pointerId),this.pointerIds}applyHandlers(e,t){this.handlers=e,this.nativeHandlers=t}applyConfig(e,t){this.config=T5(e,t,this.config)}clean(){this._targetEventStore.clean();for(const e of this.gestures)this.gestureEventStores[e].clean(),this.gestureTimeoutStores[e].clean()}effect(){return this.config.shared.target&&this.bind(),()=>this._targetEventStore.clean()}bind(...e){const t=this.config.shared,i={};let a;if(!(t.target&&(a=t.target(),!a))){if(t.enabled){for(const l of this.gestures){const c=this.config[l],d=rw(i,c.eventOptions,!!a);if(c.enabled){const p=iw.get(l);new p(this,e,l).bind(d)}}const s=rw(i,t.eventOptions,!!a);for(const l in this.nativeHandlers)s(l,"",c=>this.nativeHandlers[l](vi(vi({},this.state.shared),{},{event:c,args:e})),void 0,!0)}for(const s in i)i[s]=e5(...i[s]);if(!a)return i;for(const s in i){const{device:l,capture:c,passive:d}=qG(s);this._targetEventStore.add(a,l,"",i[s],{capture:c,passive:d})}}}}function Md(n,e){n.gestures.add(e),n.gestureEventStores[e]=new aw(n,e),n.gestureTimeoutStores[e]=new C5}function w5(n,e){e.drag&&Md(n,"drag"),e.wheel&&Md(n,"wheel"),e.scroll&&Md(n,"scroll"),e.move&&Md(n,"move"),e.pinch&&Md(n,"pinch"),e.hover&&Md(n,"hover")}const rw=(n,e,t)=>(i,a,s,l={},c=!1)=>{var d,p;const g=(d=l.capture)!==null&&d!==void 0?d:e.capture,v=(p=l.passive)!==null&&p!==void 0?p:e.passive;let _=c?i:jG(i,a,g);t&&v&&(_+="Passive"),n[_]=n[_]||[],n[_].push(s)};function B5(n,e={},t,i){const a=ee.useMemo(()=>new R5(n),[]);if(a.applyHandlers(n,i),a.applyConfig(e,t),ee.useEffect(a.effect.bind(a)),ee.useEffect(()=>a.clean.bind(a),[]),e.target===void 0)return a.bind.bind(a)}function D5(n,e){return x5(b5),B5({drag:n},e||{},"drag")}function Qm(n,e,t){return e in n?Object.defineProperty(n,e,{value:t,enumerable:!0,configurable:!0,writable:!0}):n[e]=t,n}function f1(n,e){(e==null||e>n.length)&&(e=n.length);for(var t=0,i=new Array(e);t<e;t++)i[t]=n[t];return i}function O5(n,e){if(n){if(typeof n=="string")return f1(n,e);var t=Object.prototype.toString.call(n).slice(8,-1);if(t==="Object"&&n.constructor&&(t=n.constructor.name),t==="Map"||t==="Set")return Array.from(n);if(t==="Arguments"||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(t))return f1(n,e)}}function N5(n){if(Array.isArray(n))return f1(n)}function U5(n){if(typeof Symbol<"u"&&n[Symbol.iterator]!=null||n["@@iterator"]!=null)return Array.from(n)}function L5(){throw new TypeError(`Invalid attempt to spread non-iterable instance.
In order to be iterable, non-array objects must have a [Symbol.iterator]() method.`)}function I5(n){return N5(n)||U5(n)||O5(n)||L5()}new He,new He;function P5(n,e,t){return Math.max(e,Math.min(t,n))}function F5(n,e){return P5(n-Math.floor(n/e)*e,0,e)}function z5(n,e){var t=F5(e-n,Math.PI*2);return t>Math.PI&&(t-=Math.PI*2),t}function sw(n,e){if(!(n instanceof e))throw new TypeError("Cannot call a class as a function")}var Ss=function n(e,t,i){var a=this;sw(this,n),Qm(this,"dot2",function(s,l){return a.x*s+a.y*l}),Qm(this,"dot3",function(s,l,c){return a.x*s+a.y*l+a.z*c}),this.x=e,this.y=t,this.z=i},H5=[new Ss(1,1,0),new Ss(-1,1,0),new Ss(1,-1,0),new Ss(-1,-1,0),new Ss(1,0,1),new Ss(-1,0,1),new Ss(1,0,-1),new Ss(-1,0,-1),new Ss(0,1,1),new Ss(0,-1,1),new Ss(0,1,-1),new Ss(0,-1,-1)],ow=[151,160,137,91,90,15,131,13,201,95,96,53,194,233,7,225,140,36,103,30,69,142,8,99,37,240,21,10,23,190,6,148,247,120,234,75,0,26,197,62,94,252,219,203,117,35,11,32,57,177,33,88,237,149,56,87,174,20,125,136,171,168,68,175,74,165,71,134,139,48,27,166,77,146,158,231,83,111,229,122,60,211,133,230,220,105,92,41,55,46,245,40,244,102,143,54,65,25,63,161,1,216,80,73,209,76,132,187,208,89,18,169,200,196,135,130,116,188,159,86,164,100,109,198,173,186,3,64,52,217,226,250,124,123,5,202,38,147,118,126,255,82,85,212,207,206,59,227,47,16,58,17,182,189,28,42,223,183,170,213,119,248,152,2,44,154,163,70,221,153,101,155,167,43,172,9,129,22,39,253,19,98,108,110,79,113,224,232,178,185,112,104,218,246,97,228,251,34,242,193,238,210,144,12,191,179,162,241,81,51,145,235,249,14,239,107,49,192,214,31,181,199,106,157,184,84,204,176,115,121,50,45,127,4,150,254,138,236,205,93,222,114,67,29,24,72,243,141,128,195,78,66,215,61,156,180],lw=new Array(512),cw=new Array(512),G5=function(e){e>0&&e<1&&(e*=65536),e=Math.floor(e),e<256&&(e|=e<<8);for(var t=0;t<256;t++){var i;t&1?i=ow[t]^e&255:i=ow[t]^e>>8&255,lw[t]=lw[t+256]=i,cw[t]=cw[t+256]=H5[i%12]}};G5(0);function V5(n){if(typeof n=="number")n=Math.abs(n);else if(typeof n=="string"){var e=n;n=0;for(var t=0;t<e.length;t++)n=(n+(t+1)*(e.charCodeAt(t)%96))%2147483647}return n===0&&(n=311),n}function uw(n){var e=V5(n);return function(){var t=e*48271%2147483647;return e=t,t/2147483647}}var k5=function n(e){var t=this;sw(this,n),Qm(this,"seed",0),Qm(this,"init",function(i){t.seed=i,t.value=uw(i)}),Qm(this,"value",uw(this.seed)),this.init(e)};new k5(Math.random());var X5=function(e){var t=arguments.length>1&&arguments[1]!==void 0?arguments[1]:.01,i=arguments.length>2&&arguments[2]!==void 0?arguments[2]:1,a=arguments.length>3&&arguments[3]!==void 0?arguments[3]:1/(2*Math.PI);return i/Math.atan(1/t)*Math.atan(Math.sin(2*Math.PI*e*a)/t)},fw=function(e){return 1/(1+e+.48*e*e+.235*e*e*e)},j5=function(e){return e},Y5={in:function(e){return 1-Math.cos(e*Math.PI/2)},out:function(e){return Math.sin(e*Math.PI/2)},inOut:function(e){return-(Math.cos(Math.PI*e)-1)/2}},q5={in:function(e){return e*e*e},out:function(e){return 1-Math.pow(1-e,3)},inOut:function(e){return e<.5?4*e*e*e:1-Math.pow(-2*e+2,3)/2}},W5={in:function(e){return e*e*e*e*e},out:function(e){return 1-Math.pow(1-e,5)},inOut:function(e){return e<.5?16*e*e*e*e*e:1-Math.pow(-2*e+2,5)/2}},J5={in:function(e){return 1-Math.sqrt(1-Math.pow(e,2))},out:function(e){return Math.sqrt(1-Math.pow(e-1,2))},inOut:function(e){return e<.5?(1-Math.sqrt(1-Math.pow(2*e,2)))/2:(Math.sqrt(1-Math.pow(-2*e+2,2))+1)/2}},K5={in:function(e){return e*e*e*e},out:function(e){return 1- --e*e*e*e},inOut:function(e){return e<.5?8*e*e*e*e:1-8*--e*e*e*e}},Q5={in:function(e){return e===0?0:Math.pow(2,10*e-10)},out:function(e){return e===1?1:1-Math.pow(2,-10*e)},inOut:function(e){return e===0?0:e===1?1:e<.5?Math.pow(2,20*e-10)/2:(2-Math.pow(2,-20*e+10))/2}};function ta(n,e,t){var i=arguments.length>3&&arguments[3]!==void 0?arguments[3]:.25,a=arguments.length>4&&arguments[4]!==void 0?arguments[4]:.01,s=arguments.length>5&&arguments[5]!==void 0?arguments[5]:1/0,l=arguments.length>6&&arguments[6]!==void 0?arguments[6]:fw,c=arguments.length>7&&arguments[7]!==void 0?arguments[7]:.001,d="velocity_"+e;if(n.__damp===void 0&&(n.__damp={}),n.__damp[d]===void 0&&(n.__damp[d]=0),Math.abs(n[e]-t)<=c)return n[e]=t,!1;i=Math.max(1e-4,i);var p=2/i,g=l(p*a),v=n[e]-t,_=t,x=s*i;v=Math.min(Math.max(v,-x),x),t=n[e]-v;var S=(n.__damp[d]+p*v)*a;n.__damp[d]=(n.__damp[d]-p*S)*g;var C=t+(v+S)*g;return _-n[e]>0==C>_&&(C=_,n.__damp[d]=(C-_)/a),n[e]=C,!0}var Z5=function(e){return e&&e.isCamera},$5=function(e){return e&&e.isLight},Zm=new K,hw=new Ui,dw=new Ui,$m=new It,h1=new K;function e8(n,e,t,i,a,s,l){typeof e=="number"?Zm.setScalar(e):Array.isArray(e)?Zm.set(e[0],e[1],e[2]):Zm.copy(e);var c=n.parent;n.updateWorldMatrix(!0,!1),h1.setFromMatrixPosition(n.matrixWorld),Z5(n)||$5(n)?$m.lookAt(h1,Zm,n.up):$m.lookAt(Zm,h1,n.up),R_(n.quaternion,dw.setFromRotationMatrix($m),t,i,a,s,l),c&&($m.extractRotation(c.matrixWorld),hw.setFromRotationMatrix($m),R_(n.quaternion,dw.copy(n.quaternion).premultiply(hw.invert()),t,i,a,s,l))}function Ed(n,e,t,i,a,s,l,c){return ta(n,e,n[e]+z5(n[e],t),i,a,s,l,c)}var eg=new He,pw,mw;function t8(n,e,t,i,a,s,l){return typeof e=="number"?eg.setScalar(e):Array.isArray(e)?eg.set(e[0],e[1]):eg.copy(e),pw=ta(n,"x",eg.x,t,i,a,s,l),mw=ta(n,"y",eg.y,t,i,a,s,l),pw||mw}var Td=new K,gw,vw,yw;function d1(n,e,t,i,a,s,l){return typeof e=="number"?Td.setScalar(e):Array.isArray(e)?Td.set(e[0],e[1],e[2]):Td.copy(e),gw=ta(n,"x",Td.x,t,i,a,s,l),vw=ta(n,"y",Td.y,t,i,a,s,l),yw=ta(n,"z",Td.z,t,i,a,s,l),gw||vw||yw}var wf=new Fn,_w,xw,bw,Aw;function n8(n,e,t,i,a,s,l){return typeof e=="number"?wf.setScalar(e):Array.isArray(e)?wf.set(e[0],e[1],e[2],e[3]):wf.copy(e),_w=ta(n,"x",wf.x,t,i,a,s,l),xw=ta(n,"y",wf.y,t,i,a,s,l),bw=ta(n,"z",wf.z,t,i,a,s,l),Aw=ta(n,"w",wf.w,t,i,a,s,l),_w||xw||bw||Aw}var tg=new wr,Sw,Mw,Ew;function i8(n,e,t,i,a,s,l){return Array.isArray(e)?tg.set(e[0],e[1],e[2],e[3]):tg.copy(e),Sw=Ed(n,"x",tg.x,t,i,a,s,l),Mw=Ed(n,"y",tg.y,t,i,a,s,l),Ew=Ed(n,"z",tg.z,t,i,a,s,l),Sw||Mw||Ew}var Cd=new st,Tw,Cw,Rw;function a8(n,e,t,i,a,s,l){return e instanceof st?Cd.copy(e):Array.isArray(e)?Cd.setRGB(e[0],e[1],e[2]):Cd.set(e),Tw=ta(n,"r",Cd.r,t,i,a,s,l),Cw=ta(n,"g",Cd.g,t,i,a,s,l),Rw=ta(n,"b",Cd.b,t,i,a,s,l),Tw||Cw||Rw}var no=new Ui,Fl=new Fn,ww=new Fn,ng=new Fn,Bw,Dw,Ow,Nw;function R_(n,e,t,i,a,s,l){var c=n;Array.isArray(e)?no.set(e[0],e[1],e[2],e[3]):no.copy(e);var d=n.dot(no)>0?1:-1;return no.x*=d,no.y*=d,no.z*=d,no.w*=d,Bw=ta(n,"x",no.x,t,i,a,s,l),Dw=ta(n,"y",no.y,t,i,a,s,l),Ow=ta(n,"z",no.z,t,i,a,s,l),Nw=ta(n,"w",no.w,t,i,a,s,l),Fl.set(n.x,n.y,n.z,n.w).normalize(),ww.set(c.__damp.velocity_x,c.__damp.velocity_y,c.__damp.velocity_z,c.__damp.velocity_w),ng.copy(Fl).multiplyScalar(ww.dot(Fl)/Fl.dot(Fl)),c.__damp.velocity_x-=ng.x,c.__damp.velocity_y-=ng.y,c.__damp.velocity_z-=ng.z,c.__damp.velocity_w-=ng.w,n.set(Fl.x,Fl.y,Fl.z,Fl.w),Bw||Dw||Ow||Nw}var ig=new dR,Uw,Lw,Iw;function r8(n,e,t,i,a,s,l){return Array.isArray(e)?ig.set(e[0],e[1],e[2]):ig.copy(e),Uw=ta(n,"radius",ig.radius,t,i,a,s,l),Lw=Ed(n,"phi",ig.phi,t,i,a,s,l),Iw=Ed(n,"theta",ig.theta,t,i,a,s,l),Uw||Lw||Iw}var w_=new It,Pw=new K,Fw=new Ui,zw=new K,Hw,Gw,Vw;function s8(n,e,t,i,a,s,l){var c=n;return c.__damp===void 0&&(c.__damp={position:new K,rotation:new Ui,scale:new K},n.decompose(c.__damp.position,c.__damp.rotation,c.__damp.scale)),Array.isArray(e)?w_.set.apply(w_,I5(e)):w_.copy(e),w_.decompose(Pw,Fw,zw),Hw=d1(c.__damp.position,Pw,t,i,a,s,l),Gw=R_(c.__damp.rotation,Fw,t,i,a,s,l),Vw=d1(c.__damp.scale,zw,t,i,a,s,l),n.compose(c.__damp.position,c.__damp.rotation,c.__damp.scale),Hw||Gw||Vw}var kw=Object.freeze({__proto__:null,rsqw:X5,exp:fw,linear:j5,sine:Y5,cubic:q5,quint:W5,circ:J5,quart:K5,expo:Q5,damp:ta,dampLookAt:e8,dampAngle:Ed,damp2:t8,damp3:d1,damp4:n8,dampE:i8,dampC:a8,dampQ:R_,dampS:r8,dampM:s8});const o8=parseInt(Zp.replace(/\D+/g,""));function Xw(n,e){if(e===fT)return console.warn("THREE.BufferGeometryUtils.toTrianglesDrawMode(): Geometry already defined as triangles."),n;if(e===qv||e===tA){let t=n.getIndex();if(t===null){const l=[],c=n.getAttribute("position");if(c!==void 0){for(let d=0;d<c.count;d++)l.push(d);n.setIndex(l),t=n.getIndex()}else return console.error("THREE.BufferGeometryUtils.toTrianglesDrawMode(): Undefined position attribute. Processing not possible."),n}const i=t.count-2,a=[];if(t)if(e===qv)for(let l=1;l<=i;l++)a.push(t.getX(0)),a.push(t.getX(l)),a.push(t.getX(l+1));else for(let l=0;l<i;l++)l%2===0?(a.push(t.getX(l)),a.push(t.getX(l+1)),a.push(t.getX(l+2))):(a.push(t.getX(l+2)),a.push(t.getX(l+1)),a.push(t.getX(l)));a.length/3!==i&&console.error("THREE.BufferGeometryUtils.toTrianglesDrawMode(): Unable to generate correct amount of triangles.");const s=n.clone();return s.setIndex(a),s.clearGroups(),s}else return console.error("THREE.BufferGeometryUtils.toTrianglesDrawMode(): Unknown draw mode:",e),n}function B_(n){if(typeof TextDecoder<"u")return new TextDecoder().decode(n);let e="";for(let t=0,i=n.length;t<i;t++)e+=String.fromCharCode(n[t]);try{return decodeURIComponent(escape(e))}catch{return e}}const Bf="srgb",zl="srgb-linear",jw=3001,l8=3e3;class p1 extends za{constructor(e){super(e),this.dracoLoader=null,this.ktx2Loader=null,this.meshoptDecoder=null,this.pluginCallbacks=[],this.register(function(t){return new d8(t)}),this.register(function(t){return new p8(t)}),this.register(function(t){return new S8(t)}),this.register(function(t){return new M8(t)}),this.register(function(t){return new E8(t)}),this.register(function(t){return new g8(t)}),this.register(function(t){return new v8(t)}),this.register(function(t){return new y8(t)}),this.register(function(t){return new _8(t)}),this.register(function(t){return new h8(t)}),this.register(function(t){return new x8(t)}),this.register(function(t){return new m8(t)}),this.register(function(t){return new A8(t)}),this.register(function(t){return new b8(t)}),this.register(function(t){return new u8(t)}),this.register(function(t){return new T8(t)}),this.register(function(t){return new C8(t)})}load(e,t,i,a){const s=this;let l;if(this.resourcePath!=="")l=this.resourcePath;else if(this.path!==""){const p=Jc.extractUrlBase(e);l=Jc.resolveURL(p,this.path)}else l=Jc.extractUrlBase(e);this.manager.itemStart(e);const c=function(p){a?a(p):console.error(p),s.manager.itemError(e),s.manager.itemEnd(e)},d=new $r(this.manager);d.setPath(this.path),d.setResponseType("arraybuffer"),d.setRequestHeader(this.requestHeader),d.setWithCredentials(this.withCredentials),d.load(e,function(p){try{s.parse(p,l,function(g){t(g),s.manager.itemEnd(e)},c)}catch(g){c(g)}},i,c)}setDRACOLoader(e){return this.dracoLoader=e,this}setDDSLoader(){throw new Error('THREE.GLTFLoader: "MSFT_texture_dds" no longer supported. Please update to "KHR_texture_basisu".')}setKTX2Loader(e){return this.ktx2Loader=e,this}setMeshoptDecoder(e){return this.meshoptDecoder=e,this}register(e){return this.pluginCallbacks.indexOf(e)===-1&&this.pluginCallbacks.push(e),this}unregister(e){return this.pluginCallbacks.indexOf(e)!==-1&&this.pluginCallbacks.splice(this.pluginCallbacks.indexOf(e),1),this}parse(e,t,i,a){let s;const l={},c={};if(typeof e=="string")s=JSON.parse(e);else if(e instanceof ArrayBuffer)if(B_(new Uint8Array(e.slice(0,4)))===Yw){try{l[pn.KHR_BINARY_GLTF]=new R8(e)}catch(g){a&&a(g);return}s=JSON.parse(l[pn.KHR_BINARY_GLTF].content)}else s=JSON.parse(B_(new Uint8Array(e)));else s=e;if(s.asset===void 0||s.asset.version[0]<2){a&&a(new Error("THREE.GLTFLoader: Unsupported asset. glTF versions >=2.0 are supported."));return}const d=new G8(s,{path:t||this.resourcePath||"",crossOrigin:this.crossOrigin,requestHeader:this.requestHeader,manager:this.manager,ktx2Loader:this.ktx2Loader,meshoptDecoder:this.meshoptDecoder});d.fileLoader.setRequestHeader(this.requestHeader);for(let p=0;p<this.pluginCallbacks.length;p++){const g=this.pluginCallbacks[p](d);g.name||console.error("THREE.GLTFLoader: Invalid plugin found: missing name"),c[g.name]=g,l[g.name]=!0}if(s.extensionsUsed)for(let p=0;p<s.extensionsUsed.length;++p){const g=s.extensionsUsed[p],v=s.extensionsRequired||[];switch(g){case pn.KHR_MATERIALS_UNLIT:l[g]=new f8;break;case pn.KHR_DRACO_MESH_COMPRESSION:l[g]=new w8(s,this.dracoLoader);break;case pn.KHR_TEXTURE_TRANSFORM:l[g]=new B8;break;case pn.KHR_MESH_QUANTIZATION:l[g]=new D8;break;default:v.indexOf(g)>=0&&c[g]===void 0&&console.warn('THREE.GLTFLoader: Unknown extension "'+g+'".')}}d.setExtensions(l),d.setPlugins(c),d.parse(i,a)}parseAsync(e,t){const i=this;return new Promise(function(a,s){i.parse(e,t,a,s)})}}function c8(){let n={};return{get:function(e){return n[e]},add:function(e,t){n[e]=t},remove:function(e){delete n[e]},removeAll:function(){n={}}}}const pn={KHR_BINARY_GLTF:"KHR_binary_glTF",KHR_DRACO_MESH_COMPRESSION:"KHR_draco_mesh_compression",KHR_LIGHTS_PUNCTUAL:"KHR_lights_punctual",KHR_MATERIALS_CLEARCOAT:"KHR_materials_clearcoat",KHR_MATERIALS_DISPERSION:"KHR_materials_dispersion",KHR_MATERIALS_IOR:"KHR_materials_ior",KHR_MATERIALS_SHEEN:"KHR_materials_sheen",KHR_MATERIALS_SPECULAR:"KHR_materials_specular",KHR_MATERIALS_TRANSMISSION:"KHR_materials_transmission",KHR_MATERIALS_IRIDESCENCE:"KHR_materials_iridescence",KHR_MATERIALS_ANISOTROPY:"KHR_materials_anisotropy",KHR_MATERIALS_UNLIT:"KHR_materials_unlit",KHR_MATERIALS_VOLUME:"KHR_materials_volume",KHR_TEXTURE_BASISU:"KHR_texture_basisu",KHR_TEXTURE_TRANSFORM:"KHR_texture_transform",KHR_MESH_QUANTIZATION:"KHR_mesh_quantization",KHR_MATERIALS_EMISSIVE_STRENGTH:"KHR_materials_emissive_strength",EXT_MATERIALS_BUMP:"EXT_materials_bump",EXT_TEXTURE_WEBP:"EXT_texture_webp",EXT_TEXTURE_AVIF:"EXT_texture_avif",EXT_MESHOPT_COMPRESSION:"EXT_meshopt_compression",EXT_MESH_GPU_INSTANCING:"EXT_mesh_gpu_instancing"};class u8{constructor(e){this.parser=e,this.name=pn.KHR_LIGHTS_PUNCTUAL,this.cache={refs:{},uses:{}}}_markDefs(){const e=this.parser,t=this.parser.json.nodes||[];for(let i=0,a=t.length;i<a;i++){const s=t[i];s.extensions&&s.extensions[this.name]&&s.extensions[this.name].light!==void 0&&e._addNodeRef(this.cache,s.extensions[this.name].light)}}_loadLight(e){const t=this.parser,i="light:"+e;let a=t.cache.get(i);if(a)return a;const s=t.json,d=((s.extensions&&s.extensions[this.name]||{}).lights||[])[e];let p;const g=new st(16777215);d.color!==void 0&&g.setRGB(d.color[0],d.color[1],d.color[2],zl);const v=d.range!==void 0?d.range:0;switch(d.type){case"directional":p=new pS(g),p.target.position.set(0,0,-1),p.add(p.target);break;case"point":p=new dS(g),p.distance=v;break;case"spot":p=new hS(g),p.distance=v,d.spot=d.spot||{},d.spot.innerConeAngle=d.spot.innerConeAngle!==void 0?d.spot.innerConeAngle:0,d.spot.outerConeAngle=d.spot.outerConeAngle!==void 0?d.spot.outerConeAngle:Math.PI/4,p.angle=d.spot.outerConeAngle,p.penumbra=1-d.spot.innerConeAngle/d.spot.outerConeAngle,p.target.position.set(0,0,-1),p.add(p.target);break;default:throw new Error("THREE.GLTFLoader: Unexpected light type: "+d.type)}return p.position.set(0,0,0),p.decay=2,Hl(p,d),d.intensity!==void 0&&(p.intensity=d.intensity),p.name=t.createUniqueName(d.name||"light_"+e),a=Promise.resolve(p),t.cache.add(i,a),a}getDependency(e,t){if(e==="light")return this._loadLight(t)}createNodeAttachment(e){const t=this,i=this.parser,s=i.json.nodes[e],c=(s.extensions&&s.extensions[this.name]||{}).light;return c===void 0?null:this._loadLight(c).then(function(d){return i._getNodeRef(t.cache,c,d)})}}class f8{constructor(){this.name=pn.KHR_MATERIALS_UNLIT}getMaterialType(){return Qr}extendParams(e,t,i){const a=[];e.color=new st(1,1,1),e.opacity=1;const s=t.pbrMetallicRoughness;if(s){if(Array.isArray(s.baseColorFactor)){const l=s.baseColorFactor;e.color.setRGB(l[0],l[1],l[2],zl),e.opacity=l[3]}s.baseColorTexture!==void 0&&a.push(i.assignTexture(e,"map",s.baseColorTexture,Bf))}return Promise.all(a)}}class h8{constructor(e){this.parser=e,this.name=pn.KHR_MATERIALS_EMISSIVE_STRENGTH}extendMaterialParams(e,t){const a=this.parser.json.materials[e];if(!a.extensions||!a.extensions[this.name])return Promise.resolve();const s=a.extensions[this.name].emissiveStrength;return s!==void 0&&(t.emissiveIntensity=s),Promise.resolve()}}class d8{constructor(e){this.parser=e,this.name=pn.KHR_MATERIALS_CLEARCOAT}getMaterialType(e){const i=this.parser.json.materials[e];return!i.extensions||!i.extensions[this.name]?null:xs}extendMaterialParams(e,t){const i=this.parser,a=i.json.materials[e];if(!a.extensions||!a.extensions[this.name])return Promise.resolve();const s=[],l=a.extensions[this.name];if(l.clearcoatFactor!==void 0&&(t.clearcoat=l.clearcoatFactor),l.clearcoatTexture!==void 0&&s.push(i.assignTexture(t,"clearcoatMap",l.clearcoatTexture)),l.clearcoatRoughnessFactor!==void 0&&(t.clearcoatRoughness=l.clearcoatRoughnessFactor),l.clearcoatRoughnessTexture!==void 0&&s.push(i.assignTexture(t,"clearcoatRoughnessMap",l.clearcoatRoughnessTexture)),l.clearcoatNormalTexture!==void 0&&(s.push(i.assignTexture(t,"clearcoatNormalMap",l.clearcoatNormalTexture)),l.clearcoatNormalTexture.scale!==void 0)){const c=l.clearcoatNormalTexture.scale;t.clearcoatNormalScale=new He(c,c)}return Promise.all(s)}}class p8{constructor(e){this.parser=e,this.name=pn.KHR_MATERIALS_DISPERSION}getMaterialType(e){const i=this.parser.json.materials[e];return!i.extensions||!i.extensions[this.name]?null:xs}extendMaterialParams(e,t){const a=this.parser.json.materials[e];if(!a.extensions||!a.extensions[this.name])return Promise.resolve();const s=a.extensions[this.name];return t.dispersion=s.dispersion!==void 0?s.dispersion:0,Promise.resolve()}}class m8{constructor(e){this.parser=e,this.name=pn.KHR_MATERIALS_IRIDESCENCE}getMaterialType(e){const i=this.parser.json.materials[e];return!i.extensions||!i.extensions[this.name]?null:xs}extendMaterialParams(e,t){const i=this.parser,a=i.json.materials[e];if(!a.extensions||!a.extensions[this.name])return Promise.resolve();const s=[],l=a.extensions[this.name];return l.iridescenceFactor!==void 0&&(t.iridescence=l.iridescenceFactor),l.iridescenceTexture!==void 0&&s.push(i.assignTexture(t,"iridescenceMap",l.iridescenceTexture)),l.iridescenceIor!==void 0&&(t.iridescenceIOR=l.iridescenceIor),t.iridescenceThicknessRange===void 0&&(t.iridescenceThicknessRange=[100,400]),l.iridescenceThicknessMinimum!==void 0&&(t.iridescenceThicknessRange[0]=l.iridescenceThicknessMinimum),l.iridescenceThicknessMaximum!==void 0&&(t.iridescenceThicknessRange[1]=l.iridescenceThicknessMaximum),l.iridescenceThicknessTexture!==void 0&&s.push(i.assignTexture(t,"iridescenceThicknessMap",l.iridescenceThicknessTexture)),Promise.all(s)}}class g8{constructor(e){this.parser=e,this.name=pn.KHR_MATERIALS_SHEEN}getMaterialType(e){const i=this.parser.json.materials[e];return!i.extensions||!i.extensions[this.name]?null:xs}extendMaterialParams(e,t){const i=this.parser,a=i.json.materials[e];if(!a.extensions||!a.extensions[this.name])return Promise.resolve();const s=[];t.sheenColor=new st(0,0,0),t.sheenRoughness=0,t.sheen=1;const l=a.extensions[this.name];if(l.sheenColorFactor!==void 0){const c=l.sheenColorFactor;t.sheenColor.setRGB(c[0],c[1],c[2],zl)}return l.sheenRoughnessFactor!==void 0&&(t.sheenRoughness=l.sheenRoughnessFactor),l.sheenColorTexture!==void 0&&s.push(i.assignTexture(t,"sheenColorMap",l.sheenColorTexture,Bf)),l.sheenRoughnessTexture!==void 0&&s.push(i.assignTexture(t,"sheenRoughnessMap",l.sheenRoughnessTexture)),Promise.all(s)}}class v8{constructor(e){this.parser=e,this.name=pn.KHR_MATERIALS_TRANSMISSION}getMaterialType(e){const i=this.parser.json.materials[e];return!i.extensions||!i.extensions[this.name]?null:xs}extendMaterialParams(e,t){const i=this.parser,a=i.json.materials[e];if(!a.extensions||!a.extensions[this.name])return Promise.resolve();const s=[],l=a.extensions[this.name];return l.transmissionFactor!==void 0&&(t.transmission=l.transmissionFactor),l.transmissionTexture!==void 0&&s.push(i.assignTexture(t,"transmissionMap",l.transmissionTexture)),Promise.all(s)}}class y8{constructor(e){this.parser=e,this.name=pn.KHR_MATERIALS_VOLUME}getMaterialType(e){const i=this.parser.json.materials[e];return!i.extensions||!i.extensions[this.name]?null:xs}extendMaterialParams(e,t){const i=this.parser,a=i.json.materials[e];if(!a.extensions||!a.extensions[this.name])return Promise.resolve();const s=[],l=a.extensions[this.name];t.thickness=l.thicknessFactor!==void 0?l.thicknessFactor:0,l.thicknessTexture!==void 0&&s.push(i.assignTexture(t,"thicknessMap",l.thicknessTexture)),t.attenuationDistance=l.attenuationDistance||1/0;const c=l.attenuationColor||[1,1,1];return t.attenuationColor=new st().setRGB(c[0],c[1],c[2],zl),Promise.all(s)}}class _8{constructor(e){this.parser=e,this.name=pn.KHR_MATERIALS_IOR}getMaterialType(e){const i=this.parser.json.materials[e];return!i.extensions||!i.extensions[this.name]?null:xs}extendMaterialParams(e,t){const a=this.parser.json.materials[e];if(!a.extensions||!a.extensions[this.name])return Promise.resolve();const s=a.extensions[this.name];return t.ior=s.ior!==void 0?s.ior:1.5,Promise.resolve()}}class x8{constructor(e){this.parser=e,this.name=pn.KHR_MATERIALS_SPECULAR}getMaterialType(e){const i=this.parser.json.materials[e];return!i.extensions||!i.extensions[this.name]?null:xs}extendMaterialParams(e,t){const i=this.parser,a=i.json.materials[e];if(!a.extensions||!a.extensions[this.name])return Promise.resolve();const s=[],l=a.extensions[this.name];t.specularIntensity=l.specularFactor!==void 0?l.specularFactor:1,l.specularTexture!==void 0&&s.push(i.assignTexture(t,"specularIntensityMap",l.specularTexture));const c=l.specularColorFactor||[1,1,1];return t.specularColor=new st().setRGB(c[0],c[1],c[2],zl),l.specularColorTexture!==void 0&&s.push(i.assignTexture(t,"specularColorMap",l.specularColorTexture,Bf)),Promise.all(s)}}class b8{constructor(e){this.parser=e,this.name=pn.EXT_MATERIALS_BUMP}getMaterialType(e){const i=this.parser.json.materials[e];return!i.extensions||!i.extensions[this.name]?null:xs}extendMaterialParams(e,t){const i=this.parser,a=i.json.materials[e];if(!a.extensions||!a.extensions[this.name])return Promise.resolve();const s=[],l=a.extensions[this.name];return t.bumpScale=l.bumpFactor!==void 0?l.bumpFactor:1,l.bumpTexture!==void 0&&s.push(i.assignTexture(t,"bumpMap",l.bumpTexture)),Promise.all(s)}}class A8{constructor(e){this.parser=e,this.name=pn.KHR_MATERIALS_ANISOTROPY}getMaterialType(e){const i=this.parser.json.materials[e];return!i.extensions||!i.extensions[this.name]?null:xs}extendMaterialParams(e,t){const i=this.parser,a=i.json.materials[e];if(!a.extensions||!a.extensions[this.name])return Promise.resolve();const s=[],l=a.extensions[this.name];return l.anisotropyStrength!==void 0&&(t.anisotropy=l.anisotropyStrength),l.anisotropyRotation!==void 0&&(t.anisotropyRotation=l.anisotropyRotation),l.anisotropyTexture!==void 0&&s.push(i.assignTexture(t,"anisotropyMap",l.anisotropyTexture)),Promise.all(s)}}class S8{constructor(e){this.parser=e,this.name=pn.KHR_TEXTURE_BASISU}loadTexture(e){const t=this.parser,i=t.json,a=i.textures[e];if(!a.extensions||!a.extensions[this.name])return null;const s=a.extensions[this.name],l=t.options.ktx2Loader;if(!l){if(i.extensionsRequired&&i.extensionsRequired.indexOf(this.name)>=0)throw new Error("THREE.GLTFLoader: setKTX2Loader must be called before loading KTX2 textures");return null}return t.loadTextureImage(e,s.source,l)}}class M8{constructor(e){this.parser=e,this.name=pn.EXT_TEXTURE_WEBP,this.isSupported=null}loadTexture(e){const t=this.name,i=this.parser,a=i.json,s=a.textures[e];if(!s.extensions||!s.extensions[t])return null;const l=s.extensions[t],c=a.images[l.source];let d=i.textureLoader;if(c.uri){const p=i.options.manager.getHandler(c.uri);p!==null&&(d=p)}return this.detectSupport().then(function(p){if(p)return i.loadTextureImage(e,l.source,d);if(a.extensionsRequired&&a.extensionsRequired.indexOf(t)>=0)throw new Error("THREE.GLTFLoader: WebP required by asset but unsupported.");return i.loadTexture(e)})}detectSupport(){return this.isSupported||(this.isSupported=new Promise(function(e){const t=new Image;t.src="data:image/webp;base64,UklGRiIAAABXRUJQVlA4IBYAAAAwAQCdASoBAAEADsD+JaQAA3AAAAAA",t.onload=t.onerror=function(){e(t.height===1)}})),this.isSupported}}class E8{constructor(e){this.parser=e,this.name=pn.EXT_TEXTURE_AVIF,this.isSupported=null}loadTexture(e){const t=this.name,i=this.parser,a=i.json,s=a.textures[e];if(!s.extensions||!s.extensions[t])return null;const l=s.extensions[t],c=a.images[l.source];let d=i.textureLoader;if(c.uri){const p=i.options.manager.getHandler(c.uri);p!==null&&(d=p)}return this.detectSupport().then(function(p){if(p)return i.loadTextureImage(e,l.source,d);if(a.extensionsRequired&&a.extensionsRequired.indexOf(t)>=0)throw new Error("THREE.GLTFLoader: AVIF required by asset but unsupported.");return i.loadTexture(e)})}detectSupport(){return this.isSupported||(this.isSupported=new Promise(function(e){const t=new Image;t.src="data:image/avif;base64,AAAAIGZ0eXBhdmlmAAAAAGF2aWZtaWYxbWlhZk1BMUIAAADybWV0YQAAAAAAAAAoaGRscgAAAAAAAAAAcGljdAAAAAAAAAAAAAAAAGxpYmF2aWYAAAAADnBpdG0AAAAAAAEAAAAeaWxvYwAAAABEAAABAAEAAAABAAABGgAAABcAAAAoaWluZgAAAAAAAQAAABppbmZlAgAAAAABAABhdjAxQ29sb3IAAAAAamlwcnAAAABLaXBjbwAAABRpc3BlAAAAAAAAAAEAAAABAAAAEHBpeGkAAAAAAwgICAAAAAxhdjFDgQAMAAAAABNjb2xybmNseAACAAIABoAAAAAXaXBtYQAAAAAAAAABAAEEAQKDBAAAAB9tZGF0EgAKCBgABogQEDQgMgkQAAAAB8dSLfI=",t.onload=t.onerror=function(){e(t.height===1)}})),this.isSupported}}class T8{constructor(e){this.name=pn.EXT_MESHOPT_COMPRESSION,this.parser=e}loadBufferView(e){const t=this.parser.json,i=t.bufferViews[e];if(i.extensions&&i.extensions[this.name]){const a=i.extensions[this.name],s=this.parser.getDependency("buffer",a.buffer),l=this.parser.options.meshoptDecoder;if(!l||!l.supported){if(t.extensionsRequired&&t.extensionsRequired.indexOf(this.name)>=0)throw new Error("THREE.GLTFLoader: setMeshoptDecoder must be called before loading compressed files");return null}return s.then(function(c){const d=a.byteOffset||0,p=a.byteLength||0,g=a.count,v=a.byteStride,_=new Uint8Array(c,d,p);return l.decodeGltfBufferAsync?l.decodeGltfBufferAsync(g,v,_,a.mode,a.filter).then(function(x){return x.buffer}):l.ready.then(function(){const x=new ArrayBuffer(g*v);return l.decodeGltfBuffer(new Uint8Array(x),g,v,_,a.mode,a.filter),x})})}else return null}}class C8{constructor(e){this.name=pn.EXT_MESH_GPU_INSTANCING,this.parser=e}createNodeMesh(e){const t=this.parser.json,i=t.nodes[e];if(!i.extensions||!i.extensions[this.name]||i.mesh===void 0)return null;const a=t.meshes[i.mesh];for(const p of a.primitives)if(p.mode!==Ms.TRIANGLES&&p.mode!==Ms.TRIANGLE_STRIP&&p.mode!==Ms.TRIANGLE_FAN&&p.mode!==void 0)return null;const l=i.extensions[this.name].attributes,c=[],d={};for(const p in l)c.push(this.parser.getDependency("accessor",l[p]).then(g=>(d[p]=g,d[p])));return c.length<1?null:(c.push(this.parser.createNodeMesh(e)),Promise.all(c).then(p=>{const g=p.pop(),v=g.isGroup?g.children:[g],_=p[0].count,x=[];for(const S of v){const C=new It,T=new K,M=new Ui,w=new K(1,1,1),B=new LA(S.geometry,S.material,_);for(let D=0;D<_;D++)d.TRANSLATION&&T.fromBufferAttribute(d.TRANSLATION,D),d.ROTATION&&M.fromBufferAttribute(d.ROTATION,D),d.SCALE&&w.fromBufferAttribute(d.SCALE,D),B.setMatrixAt(D,C.compose(T,M,w));for(const D in d)if(D==="_COLOR_0"){const P=d[D];B.instanceColor=new rf(P.array,P.itemSize,P.normalized)}else D!=="TRANSLATION"&&D!=="ROTATION"&&D!=="SCALE"&&S.geometry.setAttribute(D,d[D]);dn.prototype.copy.call(B,S),this.parser.assignFinalMaterial(B),x.push(B)}return g.isGroup?(g.clear(),g.add(...x),g):x[0]}))}}const Yw="glTF",ag=12,qw={JSON:1313821514,BIN:5130562};class R8{constructor(e){this.name=pn.KHR_BINARY_GLTF,this.content=null,this.body=null;const t=new DataView(e,0,ag);if(this.header={magic:B_(new Uint8Array(e.slice(0,4))),version:t.getUint32(4,!0),length:t.getUint32(8,!0)},this.header.magic!==Yw)throw new Error("THREE.GLTFLoader: Unsupported glTF-Binary header.");if(this.header.version<2)throw new Error("THREE.GLTFLoader: Legacy binary file detected.");const i=this.header.length-ag,a=new DataView(e,ag);let s=0;for(;s<i;){const l=a.getUint32(s,!0);s+=4;const c=a.getUint32(s,!0);if(s+=4,c===qw.JSON){const d=new Uint8Array(e,ag+s,l);this.content=B_(d)}else if(c===qw.BIN){const d=ag+s;this.body=e.slice(d,d+l)}s+=l}if(this.content===null)throw new Error("THREE.GLTFLoader: JSON content not found.")}}class w8{constructor(e,t){if(!t)throw new Error("THREE.GLTFLoader: No DRACOLoader instance provided.");this.name=pn.KHR_DRACO_MESH_COMPRESSION,this.json=e,this.dracoLoader=t,this.dracoLoader.preload()}decodePrimitive(e,t){const i=this.json,a=this.dracoLoader,s=e.extensions[this.name].bufferView,l=e.extensions[this.name].attributes,c={},d={},p={};for(const g in l){const v=g1[g]||g.toLowerCase();c[v]=l[g]}for(const g in e.attributes){const v=g1[g]||g.toLowerCase();if(l[g]!==void 0){const _=i.accessors[e.attributes[g]],x=Rd[_.componentType];p[v]=x.name,d[v]=_.normalized===!0}}return t.getDependency("bufferView",s).then(function(g){return new Promise(function(v,_){a.decodeDracoFile(g,function(x){for(const S in x.attributes){const C=x.attributes[S],T=d[S];T!==void 0&&(C.normalized=T)}v(x)},c,p,zl,_)})})}}class B8{constructor(){this.name=pn.KHR_TEXTURE_TRANSFORM}extendTexture(e,t){return(t.texCoord===void 0||t.texCoord===e.channel)&&t.offset===void 0&&t.rotation===void 0&&t.scale===void 0||(e=e.clone(),t.texCoord!==void 0&&(e.channel=t.texCoord),t.offset!==void 0&&e.offset.fromArray(t.offset),t.rotation!==void 0&&(e.rotation=t.rotation),t.scale!==void 0&&e.repeat.fromArray(t.scale),e.needsUpdate=!0),e}}class D8{constructor(){this.name=pn.KHR_MESH_QUANTIZATION}}class Ww extends fd{constructor(e,t,i,a){super(e,t,i,a)}copySampleValue_(e){const t=this.resultBuffer,i=this.sampleValues,a=this.valueSize,s=e*a*3+a;for(let l=0;l!==a;l++)t[l]=i[s+l];return t}interpolate_(e,t,i,a){const s=this.resultBuffer,l=this.sampleValues,c=this.valueSize,d=c*2,p=c*3,g=a-t,v=(i-t)/g,_=v*v,x=_*v,S=e*p,C=S-p,T=-2*x+3*_,M=x-_,w=1-T,B=M-_+v;for(let D=0;D!==c;D++){const P=l[C+D+c],U=l[C+D+d]*g,z=l[S+D+c],j=l[S+D]*g;s[D]=w*P+B*U+T*z+M*j}return s}}const O8=new Ui;class N8 extends Ww{interpolate_(e,t,i,a){const s=super.interpolate_(e,t,i,a);return O8.fromArray(s).normalize().toArray(s),s}}const Ms={POINTS:0,LINES:1,LINE_LOOP:2,LINE_STRIP:3,TRIANGLES:4,TRIANGLE_STRIP:5,TRIANGLE_FAN:6},Rd={5120:Int8Array,5121:Uint8Array,5122:Int16Array,5123:Uint16Array,5125:Uint32Array,5126:Float32Array},Jw={9728:Ei,9729:Zn,9984:sv,9985:Dh,9986:Wu,9987:gs},Kw={33071:er,33648:Bh,10497:Nc},m1={SCALAR:1,VEC2:2,VEC3:3,VEC4:4,MAT2:4,MAT3:9,MAT4:16},g1={POSITION:"position",NORMAL:"normal",TANGENT:"tangent",...o8>=152?{TEXCOORD_0:"uv",TEXCOORD_1:"uv1",TEXCOORD_2:"uv2",TEXCOORD_3:"uv3"}:{TEXCOORD_0:"uv",TEXCOORD_1:"uv2"},COLOR_0:"color",WEIGHTS_0:"skinWeight",JOINTS_0:"skinIndex"},eu={scale:"scale",translation:"position",rotation:"quaternion",weights:"morphTargetInfluences"},U8={CUBICSPLINE:void 0,LINEAR:Lh,STEP:Uh},v1={OPAQUE:"OPAQUE",MASK:"MASK",BLEND:"BLEND"};function L8(n){return n.DefaultMaterial===void 0&&(n.DefaultMaterial=new zm({color:16777215,emissive:0,metalness:1,roughness:1,transparent:!1,depthTest:!0,side:Bo})),n.DefaultMaterial}function Df(n,e,t){for(const i in t.extensions)n[i]===void 0&&(e.userData.gltfExtensions=e.userData.gltfExtensions||{},e.userData.gltfExtensions[i]=t.extensions[i])}function Hl(n,e){e.extras!==void 0&&(typeof e.extras=="object"?Object.assign(n.userData,e.extras):console.warn("THREE.GLTFLoader: Ignoring primitive type .extras, "+e.extras))}function I8(n,e,t){let i=!1,a=!1,s=!1;for(let p=0,g=e.length;p<g;p++){const v=e[p];if(v.POSITION!==void 0&&(i=!0),v.NORMAL!==void 0&&(a=!0),v.COLOR_0!==void 0&&(s=!0),i&&a&&s)break}if(!i&&!a&&!s)return Promise.resolve(n);const l=[],c=[],d=[];for(let p=0,g=e.length;p<g;p++){const v=e[p];if(i){const _=v.POSITION!==void 0?t.getDependency("accessor",v.POSITION):n.attributes.position;l.push(_)}if(a){const _=v.NORMAL!==void 0?t.getDependency("accessor",v.NORMAL):n.attributes.normal;c.push(_)}if(s){const _=v.COLOR_0!==void 0?t.getDependency("accessor",v.COLOR_0):n.attributes.color;d.push(_)}}return Promise.all([Promise.all(l),Promise.all(c),Promise.all(d)]).then(function(p){const g=p[0],v=p[1],_=p[2];return i&&(n.morphAttributes.position=g),a&&(n.morphAttributes.normal=v),s&&(n.morphAttributes.color=_),n.morphTargetsRelative=!0,n})}function P8(n,e){if(n.updateMorphTargets(),e.weights!==void 0)for(let t=0,i=e.weights.length;t<i;t++)n.morphTargetInfluences[t]=e.weights[t];if(e.extras&&Array.isArray(e.extras.targetNames)){const t=e.extras.targetNames;if(n.morphTargetInfluences.length===t.length){n.morphTargetDictionary={};for(let i=0,a=t.length;i<a;i++)n.morphTargetDictionary[t[i]]=i}else console.warn("THREE.GLTFLoader: Invalid extras.targetNames length. Ignoring names.")}}function F8(n){let e;const t=n.extensions&&n.extensions[pn.KHR_DRACO_MESH_COMPRESSION];if(t?e="draco:"+t.bufferView+":"+t.indices+":"+y1(t.attributes):e=n.indices+":"+y1(n.attributes)+":"+n.mode,n.targets!==void 0)for(let i=0,a=n.targets.length;i<a;i++)e+=":"+y1(n.targets[i]);return e}function y1(n){let e="";const t=Object.keys(n).sort();for(let i=0,a=t.length;i<a;i++)e+=t[i]+":"+n[t[i]]+";";return e}function _1(n){switch(n){case Int8Array:return 1/127;case Uint8Array:return 1/255;case Int16Array:return 1/32767;case Uint16Array:return 1/65535;default:throw new Error("THREE.GLTFLoader: Unsupported normalized accessor component type.")}}function z8(n){return n.search(/\.jpe?g($|\?)/i)>0||n.search(/^data\:image\/jpeg/)===0?"image/jpeg":n.search(/\.webp($|\?)/i)>0||n.search(/^data\:image\/webp/)===0?"image/webp":"image/png"}const H8=new It;class G8{constructor(e={},t={}){this.json=e,this.extensions={},this.plugins={},this.options=t,this.cache=new c8,this.associations=new Map,this.primitiveCache={},this.nodeCache={},this.meshCache={refs:{},uses:{}},this.cameraCache={refs:{},uses:{}},this.lightCache={refs:{},uses:{}},this.sourceCache={},this.textureCache={},this.nodeNamesUsed={};let i=!1,a=!1,s=-1;typeof navigator<"u"&&typeof navigator.userAgent<"u"&&(i=/^((?!chrome|android).)*safari/i.test(navigator.userAgent)===!0,a=navigator.userAgent.indexOf("Firefox")>-1,s=a?navigator.userAgent.match(/Firefox\/([0-9]+)\./)[1]:-1),typeof createImageBitmap>"u"||i||a&&s<98?this.textureLoader=new Gm(this.options.manager):this.textureLoader=new tR(this.options.manager),this.textureLoader.setCrossOrigin(this.options.crossOrigin),this.textureLoader.setRequestHeader(this.options.requestHeader),this.fileLoader=new $r(this.options.manager),this.fileLoader.setResponseType("arraybuffer"),this.options.crossOrigin==="use-credentials"&&this.fileLoader.setWithCredentials(!0)}setExtensions(e){this.extensions=e}setPlugins(e){this.plugins=e}parse(e,t){const i=this,a=this.json,s=this.extensions;this.cache.removeAll(),this.nodeCache={},this._invokeAll(function(l){return l._markDefs&&l._markDefs()}),Promise.all(this._invokeAll(function(l){return l.beforeRoot&&l.beforeRoot()})).then(function(){return Promise.all([i.getDependencies("scene"),i.getDependencies("animation"),i.getDependencies("camera")])}).then(function(l){const c={scene:l[0][a.scene||0],scenes:l[0],animations:l[1],cameras:l[2],asset:a.asset,parser:i,userData:{}};return Df(s,c,a),Hl(c,a),Promise.all(i._invokeAll(function(d){return d.afterRoot&&d.afterRoot(c)})).then(function(){for(const d of c.scenes)d.updateMatrixWorld();e(c)})}).catch(t)}_markDefs(){const e=this.json.nodes||[],t=this.json.skins||[],i=this.json.meshes||[];for(let a=0,s=t.length;a<s;a++){const l=t[a].joints;for(let c=0,d=l.length;c<d;c++)e[l[c]].isBone=!0}for(let a=0,s=e.length;a<s;a++){const l=e[a];l.mesh!==void 0&&(this._addNodeRef(this.meshCache,l.mesh),l.skin!==void 0&&(i[l.mesh].isSkinnedMesh=!0)),l.camera!==void 0&&this._addNodeRef(this.cameraCache,l.camera)}}_addNodeRef(e,t){t!==void 0&&(e.refs[t]===void 0&&(e.refs[t]=e.uses[t]=0),e.refs[t]++)}_getNodeRef(e,t,i){if(e.refs[t]<=1)return i;const a=i.clone(),s=(l,c)=>{const d=this.associations.get(l);d!=null&&this.associations.set(c,d);for(const[p,g]of l.children.entries())s(g,c.children[p])};return s(i,a),a.name+="_instance_"+e.uses[t]++,a}_invokeOne(e){const t=Object.values(this.plugins);t.push(this);for(let i=0;i<t.length;i++){const a=e(t[i]);if(a)return a}return null}_invokeAll(e){const t=Object.values(this.plugins);t.unshift(this);const i=[];for(let a=0;a<t.length;a++){const s=e(t[a]);s&&i.push(s)}return i}getDependency(e,t){const i=e+":"+t;let a=this.cache.get(i);if(!a){switch(e){case"scene":a=this.loadScene(t);break;case"node":a=this._invokeOne(function(s){return s.loadNode&&s.loadNode(t)});break;case"mesh":a=this._invokeOne(function(s){return s.loadMesh&&s.loadMesh(t)});break;case"accessor":a=this.loadAccessor(t);break;case"bufferView":a=this._invokeOne(function(s){return s.loadBufferView&&s.loadBufferView(t)});break;case"buffer":a=this.loadBuffer(t);break;case"material":a=this._invokeOne(function(s){return s.loadMaterial&&s.loadMaterial(t)});break;case"texture":a=this._invokeOne(function(s){return s.loadTexture&&s.loadTexture(t)});break;case"skin":a=this.loadSkin(t);break;case"animation":a=this._invokeOne(function(s){return s.loadAnimation&&s.loadAnimation(t)});break;case"camera":a=this.loadCamera(t);break;default:if(a=this._invokeOne(function(s){return s!=this&&s.getDependency&&s.getDependency(e,t)}),!a)throw new Error("Unknown type: "+e);break}this.cache.add(i,a)}return a}getDependencies(e){let t=this.cache.get(e);if(!t){const i=this,a=this.json[e+(e==="mesh"?"es":"s")]||[];t=Promise.all(a.map(function(s,l){return i.getDependency(e,l)})),this.cache.add(e,t)}return t}loadBuffer(e){const t=this.json.buffers[e],i=this.fileLoader;if(t.type&&t.type!=="arraybuffer")throw new Error("THREE.GLTFLoader: "+t.type+" buffer type is not supported.");if(t.uri===void 0&&e===0)return Promise.resolve(this.extensions[pn.KHR_BINARY_GLTF].body);const a=this.options;return new Promise(function(s,l){i.load(Jc.resolveURL(t.uri,a.path),s,void 0,function(){l(new Error('THREE.GLTFLoader: Failed to load buffer "'+t.uri+'".'))})})}loadBufferView(e){const t=this.json.bufferViews[e];return this.getDependency("buffer",t.buffer).then(function(i){const a=t.byteLength||0,s=t.byteOffset||0;return i.slice(s,s+a)})}loadAccessor(e){const t=this,i=this.json,a=this.json.accessors[e];if(a.bufferView===void 0&&a.sparse===void 0){const l=m1[a.type],c=Rd[a.componentType],d=a.normalized===!0,p=new c(a.count*l);return Promise.resolve(new Rn(p,l,d))}const s=[];return a.bufferView!==void 0?s.push(this.getDependency("bufferView",a.bufferView)):s.push(null),a.sparse!==void 0&&(s.push(this.getDependency("bufferView",a.sparse.indices.bufferView)),s.push(this.getDependency("bufferView",a.sparse.values.bufferView))),Promise.all(s).then(function(l){const c=l[0],d=m1[a.type],p=Rd[a.componentType],g=p.BYTES_PER_ELEMENT,v=g*d,_=a.byteOffset||0,x=a.bufferView!==void 0?i.bufferViews[a.bufferView].byteStride:void 0,S=a.normalized===!0;let C,T;if(x&&x!==v){const M=Math.floor(_/x),w="InterleavedBuffer:"+a.bufferView+":"+a.componentType+":"+M+":"+a.count;let B=t.cache.get(w);B||(C=new p(c,M*x,a.count*x/g),B=new xm(C,x/g),t.cache.add(w,B)),T=new jc(B,d,_%x/g,S)}else c===null?C=new p(a.count*d):C=new p(c,_,a.count*d),T=new Rn(C,d,S);if(a.sparse!==void 0){const M=m1.SCALAR,w=Rd[a.sparse.indices.componentType],B=a.sparse.indices.byteOffset||0,D=a.sparse.values.byteOffset||0,P=new w(l[1],B,a.sparse.count*M),U=new p(l[2],D,a.sparse.count*d);c!==null&&(T=new Rn(T.array.slice(),T.itemSize,T.normalized));for(let z=0,j=P.length;z<j;z++){const L=P[z];if(T.setX(L,U[z*d]),d>=2&&T.setY(L,U[z*d+1]),d>=3&&T.setZ(L,U[z*d+2]),d>=4&&T.setW(L,U[z*d+3]),d>=5)throw new Error("THREE.GLTFLoader: Unsupported itemSize in sparse BufferAttribute.")}}return T})}loadTexture(e){const t=this.json,i=this.options,s=t.textures[e].source,l=t.images[s];let c=this.textureLoader;if(l.uri){const d=i.manager.getHandler(l.uri);d!==null&&(c=d)}return this.loadTextureImage(e,s,c)}loadTextureImage(e,t,i){const a=this,s=this.json,l=s.textures[e],c=s.images[t],d=(c.uri||c.bufferView)+":"+l.sampler;if(this.textureCache[d])return this.textureCache[d];const p=this.loadImageSource(t,i).then(function(g){g.flipY=!1,g.name=l.name||c.name||"",g.name===""&&typeof c.uri=="string"&&c.uri.startsWith("data:image/")===!1&&(g.name=c.uri);const _=(s.samplers||{})[l.sampler]||{};return g.magFilter=Jw[_.magFilter]||Zn,g.minFilter=Jw[_.minFilter]||gs,g.wrapS=Kw[_.wrapS]||Nc,g.wrapT=Kw[_.wrapT]||Nc,a.associations.set(g,{textures:e}),g}).catch(function(){return null});return this.textureCache[d]=p,p}loadImageSource(e,t){const i=this,a=this.json,s=this.options;if(this.sourceCache[e]!==void 0)return this.sourceCache[e].then(v=>v.clone());const l=a.images[e],c=self.URL||self.webkitURL;let d=l.uri||"",p=!1;if(l.bufferView!==void 0)d=i.getDependency("bufferView",l.bufferView).then(function(v){p=!0;const _=new Blob([v],{type:l.mimeType});return d=c.createObjectURL(_),d});else if(l.uri===void 0)throw new Error("THREE.GLTFLoader: Image "+e+" is missing URI and bufferView");const g=Promise.resolve(d).then(function(v){return new Promise(function(_,x){let S=_;t.isImageBitmapLoader===!0&&(S=function(C){const T=new ai(C);T.needsUpdate=!0,_(T)}),t.load(Jc.resolveURL(v,s.path),S,void 0,x)})}).then(function(v){return p===!0&&c.revokeObjectURL(d),Hl(v,l),v.userData.mimeType=l.mimeType||z8(l.uri),v}).catch(function(v){throw console.error("THREE.GLTFLoader: Couldn't load texture",d),v});return this.sourceCache[e]=g,g}assignTexture(e,t,i,a){const s=this;return this.getDependency("texture",i.index).then(function(l){if(!l)return null;if(i.texCoord!==void 0&&i.texCoord>0&&(l=l.clone(),l.channel=i.texCoord),s.extensions[pn.KHR_TEXTURE_TRANSFORM]){const c=i.extensions!==void 0?i.extensions[pn.KHR_TEXTURE_TRANSFORM]:void 0;if(c){const d=s.associations.get(l);l=s.extensions[pn.KHR_TEXTURE_TRANSFORM].extendTexture(l,c),s.associations.set(l,d)}}return a!==void 0&&(typeof a=="number"&&(a=a===jw?Bf:zl),"colorSpace"in l?l.colorSpace=a:l.encoding=a===Bf?jw:l8),e[t]=l,l})}assignFinalMaterial(e){const t=e.geometry;let i=e.material;const a=t.attributes.tangent===void 0,s=t.attributes.color!==void 0,l=t.attributes.normal===void 0;if(e.isPoints){const c="PointsMaterial:"+i.uuid;let d=this.cache.get(c);d||(d=new Ny,Li.prototype.copy.call(d,i),d.color.copy(i.color),d.map=i.map,d.sizeAttenuation=!1,this.cache.add(c,d)),i=d}else if(e.isLine){const c="LineBasicMaterial:"+i.uuid;let d=this.cache.get(c);d||(d=new Fa,Li.prototype.copy.call(d,i),d.color.copy(i.color),d.map=i.map,this.cache.add(c,d)),i=d}if(a||s||l){let c="ClonedMaterial:"+i.uuid+":";a&&(c+="derivative-tangents:"),s&&(c+="vertex-colors:"),l&&(c+="flat-shading:");let d=this.cache.get(c);d||(d=i.clone(),s&&(d.vertexColors=!0),l&&(d.flatShading=!0),a&&(d.normalScale&&(d.normalScale.y*=-1),d.clearcoatNormalScale&&(d.clearcoatNormalScale.y*=-1)),this.cache.add(c,d),this.associations.set(d,this.associations.get(i))),i=d}e.material=i}getMaterialType(){return zm}loadMaterial(e){const t=this,i=this.json,a=this.extensions,s=i.materials[e];let l;const c={},d=s.extensions||{},p=[];if(d[pn.KHR_MATERIALS_UNLIT]){const v=a[pn.KHR_MATERIALS_UNLIT];l=v.getMaterialType(),p.push(v.extendParams(c,s,t))}else{const v=s.pbrMetallicRoughness||{};if(c.color=new st(1,1,1),c.opacity=1,Array.isArray(v.baseColorFactor)){const _=v.baseColorFactor;c.color.setRGB(_[0],_[1],_[2],zl),c.opacity=_[3]}v.baseColorTexture!==void 0&&p.push(t.assignTexture(c,"map",v.baseColorTexture,Bf)),c.metalness=v.metallicFactor!==void 0?v.metallicFactor:1,c.roughness=v.roughnessFactor!==void 0?v.roughnessFactor:1,v.metallicRoughnessTexture!==void 0&&(p.push(t.assignTexture(c,"metalnessMap",v.metallicRoughnessTexture)),p.push(t.assignTexture(c,"roughnessMap",v.metallicRoughnessTexture))),l=this._invokeOne(function(_){return _.getMaterialType&&_.getMaterialType(e)}),p.push(Promise.all(this._invokeAll(function(_){return _.extendMaterialParams&&_.extendMaterialParams(e,c)})))}s.doubleSided===!0&&(c.side=qs);const g=s.alphaMode||v1.OPAQUE;if(g===v1.BLEND?(c.transparent=!0,c.depthWrite=!1):(c.transparent=!1,g===v1.MASK&&(c.alphaTest=s.alphaCutoff!==void 0?s.alphaCutoff:.5)),s.normalTexture!==void 0&&l!==Qr&&(p.push(t.assignTexture(c,"normalMap",s.normalTexture)),c.normalScale=new He(1,1),s.normalTexture.scale!==void 0)){const v=s.normalTexture.scale;c.normalScale.set(v,v)}if(s.occlusionTexture!==void 0&&l!==Qr&&(p.push(t.assignTexture(c,"aoMap",s.occlusionTexture)),s.occlusionTexture.strength!==void 0&&(c.aoMapIntensity=s.occlusionTexture.strength)),s.emissiveFactor!==void 0&&l!==Qr){const v=s.emissiveFactor;c.emissive=new st().setRGB(v[0],v[1],v[2],zl)}return s.emissiveTexture!==void 0&&l!==Qr&&p.push(t.assignTexture(c,"emissiveMap",s.emissiveTexture,Bf)),Promise.all(p).then(function(){const v=new l(c);return s.name&&(v.name=s.name),Hl(v,s),t.associations.set(v,{materials:e}),s.extensions&&Df(a,v,s),v})}createUniqueName(e){const t=Tn.sanitizeNodeName(e||"");return t in this.nodeNamesUsed?t+"_"+ ++this.nodeNamesUsed[t]:(this.nodeNamesUsed[t]=0,t)}loadGeometries(e){const t=this,i=this.extensions,a=this.primitiveCache;function s(c){return i[pn.KHR_DRACO_MESH_COMPRESSION].decodePrimitive(c,t).then(function(d){return Qw(d,c,t)})}const l=[];for(let c=0,d=e.length;c<d;c++){const p=e[c],g=F8(p),v=a[g];if(v)l.push(v.promise);else{let _;p.extensions&&p.extensions[pn.KHR_DRACO_MESH_COMPRESSION]?_=s(p):_=Qw(new Jt,p,t),a[g]={primitive:p,promise:_},l.push(_)}}return Promise.all(l)}loadMesh(e){const t=this,i=this.json,a=this.extensions,s=i.meshes[e],l=s.primitives,c=[];for(let d=0,p=l.length;d<p;d++){const g=l[d].material===void 0?L8(this.cache):this.getDependency("material",l[d].material);c.push(g)}return c.push(t.loadGeometries(l)),Promise.all(c).then(function(d){const p=d.slice(0,d.length-1),g=d[d.length-1],v=[];for(let x=0,S=g.length;x<S;x++){const C=g[x],T=l[x];let M;const w=p[x];if(T.mode===Ms.TRIANGLES||T.mode===Ms.TRIANGLE_STRIP||T.mode===Ms.TRIANGLE_FAN||T.mode===void 0)M=s.isSkinnedMesh===!0?new UA(C,w):new Ii(C,w),M.isSkinnedMesh===!0&&M.normalizeSkinWeights(),T.mode===Ms.TRIANGLE_STRIP?M.geometry=Xw(M.geometry,tA):T.mode===Ms.TRIANGLE_FAN&&(M.geometry=Xw(M.geometry,qv));else if(T.mode===Ms.LINES)M=new Zs(C,w);else if(T.mode===Ms.LINE_STRIP)M=new Il(C,w);else if(T.mode===Ms.LINE_LOOP)M=new HA(C,w);else if(T.mode===Ms.POINTS)M=new VA(C,w);else throw new Error("THREE.GLTFLoader: Primitive mode unsupported: "+T.mode);Object.keys(M.geometry.morphAttributes).length>0&&P8(M,s),M.name=t.createUniqueName(s.name||"mesh_"+e),Hl(M,s),T.extensions&&Df(a,M,T),t.assignFinalMaterial(M),v.push(M)}for(let x=0,S=v.length;x<S;x++)t.associations.set(v[x],{meshes:e,primitives:x});if(v.length===1)return s.extensions&&Df(a,v[0],s),v[0];const _=new Ll;s.extensions&&Df(a,_,s),t.associations.set(_,{meshes:e});for(let x=0,S=v.length;x<S;x++)_.add(v[x]);return _})}loadCamera(e){let t;const i=this.json.cameras[e],a=i[i.type];if(!a){console.warn("THREE.GLTFLoader: Missing camera parameters.");return}return i.type==="perspective"?t=new Zi(Cl.radToDeg(a.yfov),a.aspectRatio||1,a.znear||1,a.zfar||2e6):i.type==="orthographic"&&(t=new vf(-a.xmag,a.xmag,a.ymag,-a.ymag,a.znear,a.zfar)),i.name&&(t.name=this.createUniqueName(i.name)),Hl(t,i),Promise.resolve(t)}loadSkin(e){const t=this.json.skins[e],i=[];for(let a=0,s=t.joints.length;a<s;a++)i.push(this._loadNodeShallow(t.joints[a]));return t.inverseBindMatrices!==void 0?i.push(this.getDependency("accessor",t.inverseBindMatrices)):i.push(null),Promise.all(i).then(function(a){const s=a.pop(),l=a,c=[],d=[];for(let p=0,g=l.length;p<g;p++){const v=l[p];if(v){c.push(v);const _=new It;s!==null&&_.fromArray(s.array,p*16),d.push(_)}else console.warn('THREE.GLTFLoader: Joint "%s" could not be found.',t.joints[p])}return new Mm(c,d)})}loadAnimation(e){const t=this.json,i=this,a=t.animations[e],s=a.name?a.name:"animation_"+e,l=[],c=[],d=[],p=[],g=[];for(let v=0,_=a.channels.length;v<_;v++){const x=a.channels[v],S=a.samplers[x.sampler],C=x.target,T=C.node,M=a.parameters!==void 0?a.parameters[S.input]:S.input,w=a.parameters!==void 0?a.parameters[S.output]:S.output;C.node!==void 0&&(l.push(this.getDependency("node",T)),c.push(this.getDependency("accessor",M)),d.push(this.getDependency("accessor",w)),p.push(S),g.push(C))}return Promise.all([Promise.all(l),Promise.all(c),Promise.all(d),Promise.all(p),Promise.all(g)]).then(function(v){const _=v[0],x=v[1],S=v[2],C=v[3],T=v[4],M=[];for(let w=0,B=_.length;w<B;w++){const D=_[w],P=x[w],U=S[w],z=C[w],j=T[w];if(D===void 0)continue;D.updateMatrix&&D.updateMatrix();const L=i._createAnimationTracks(D,P,U,z,j);if(L)for(let F=0;F<L.length;F++)M.push(L[F])}return new hd(s,void 0,M)})}createNodeMesh(e){const t=this.json,i=this,a=t.nodes[e];return a.mesh===void 0?null:i.getDependency("mesh",a.mesh).then(function(s){const l=i._getNodeRef(i.meshCache,a.mesh,s);return a.weights!==void 0&&l.traverse(function(c){if(c.isMesh)for(let d=0,p=a.weights.length;d<p;d++)c.morphTargetInfluences[d]=a.weights[d]}),l})}loadNode(e){const t=this.json,i=this,a=t.nodes[e],s=i._loadNodeShallow(e),l=[],c=a.children||[];for(let p=0,g=c.length;p<g;p++)l.push(i.getDependency("node",c[p]));const d=a.skin===void 0?Promise.resolve(null):i.getDependency("skin",a.skin);return Promise.all([s,Promise.all(l),d]).then(function(p){const g=p[0],v=p[1],_=p[2];_!==null&&g.traverse(function(x){x.isSkinnedMesh&&x.bind(_,H8)});for(let x=0,S=v.length;x<S;x++)g.add(v[x]);return g})}_loadNodeShallow(e){const t=this.json,i=this.extensions,a=this;if(this.nodeCache[e]!==void 0)return this.nodeCache[e];const s=t.nodes[e],l=s.name?a.createUniqueName(s.name):"",c=[],d=a._invokeOne(function(p){return p.createNodeMesh&&p.createNodeMesh(e)});return d&&c.push(d),s.camera!==void 0&&c.push(a.getDependency("camera",s.camera).then(function(p){return a._getNodeRef(a.cameraCache,s.camera,p)})),a._invokeAll(function(p){return p.createNodeAttachment&&p.createNodeAttachment(e)}).forEach(function(p){c.push(p)}),this.nodeCache[e]=Promise.all(c).then(function(p){let g;if(s.isBone===!0?g=new Sy:p.length>1?g=new Ll:p.length===1?g=p[0]:g=new dn,g!==p[0])for(let v=0,_=p.length;v<_;v++)g.add(p[v]);if(s.name&&(g.userData.name=s.name,g.name=l),Hl(g,s),s.extensions&&Df(i,g,s),s.matrix!==void 0){const v=new It;v.fromArray(s.matrix),g.applyMatrix4(v)}else s.translation!==void 0&&g.position.fromArray(s.translation),s.rotation!==void 0&&g.quaternion.fromArray(s.rotation),s.scale!==void 0&&g.scale.fromArray(s.scale);return a.associations.has(g)||a.associations.set(g,{}),a.associations.get(g).nodes=e,g}),this.nodeCache[e]}loadScene(e){const t=this.extensions,i=this.json.scenes[e],a=this,s=new Ll;i.name&&(s.name=a.createUniqueName(i.name)),Hl(s,i),i.extensions&&Df(t,s,i);const l=i.nodes||[],c=[];for(let d=0,p=l.length;d<p;d++)c.push(a.getDependency("node",l[d]));return Promise.all(c).then(function(d){for(let g=0,v=d.length;g<v;g++)s.add(d[g]);const p=g=>{const v=new Map;for(const[_,x]of a.associations)(_ instanceof Li||_ instanceof ai)&&v.set(_,x);return g.traverse(_=>{const x=a.associations.get(_);x!=null&&v.set(_,x)}),v};return a.associations=p(s),s})}_createAnimationTracks(e,t,i,a,s){const l=[],c=e.name?e.name:e.uuid,d=[];eu[s.path]===eu.weights?e.traverse(function(_){_.morphTargetInfluences&&d.push(_.name?_.name:_.uuid)}):d.push(c);let p;switch(eu[s.path]){case eu.weights:p=df;break;case eu.rotation:p=pf;break;case eu.position:case eu.scale:p=gf;break;default:i.itemSize===1?p=df:p=gf;break}const g=a.interpolation!==void 0?U8[a.interpolation]:Lh,v=this._getArrayFromAccessor(i);for(let _=0,x=d.length;_<x;_++){const S=new p(d[_]+"."+eu[s.path],t.array,v,g);a.interpolation==="CUBICSPLINE"&&this._createCubicSplineTrackInterpolant(S),l.push(S)}return l}_getArrayFromAccessor(e){let t=e.array;if(e.normalized){const i=_1(t.constructor),a=new Float32Array(t.length);for(let s=0,l=t.length;s<l;s++)a[s]=t[s]*i;t=a}return t}_createCubicSplineTrackInterpolant(e){e.createInterpolant=function(i){const a=this instanceof pf?N8:Ww;return new a(this.times,this.values,this.getValueSize()/3,i)},e.createInterpolant.isInterpolantFactoryMethodGLTFCubicSpline=!0}}function V8(n,e,t){const i=e.attributes,a=new Sa;if(i.POSITION!==void 0){const c=t.json.accessors[i.POSITION],d=c.min,p=c.max;if(d!==void 0&&p!==void 0){if(a.set(new K(d[0],d[1],d[2]),new K(p[0],p[1],p[2])),c.normalized){const g=_1(Rd[c.componentType]);a.min.multiplyScalar(g),a.max.multiplyScalar(g)}}else{console.warn("THREE.GLTFLoader: Missing min/max properties for accessor POSITION.");return}}else return;const s=e.targets;if(s!==void 0){const c=new K,d=new K;for(let p=0,g=s.length;p<g;p++){const v=s[p];if(v.POSITION!==void 0){const _=t.json.accessors[v.POSITION],x=_.min,S=_.max;if(x!==void 0&&S!==void 0){if(d.setX(Math.max(Math.abs(x[0]),Math.abs(S[0]))),d.setY(Math.max(Math.abs(x[1]),Math.abs(S[1]))),d.setZ(Math.max(Math.abs(x[2]),Math.abs(S[2]))),_.normalized){const C=_1(Rd[_.componentType]);d.multiplyScalar(C)}c.max(d)}else console.warn("THREE.GLTFLoader: Missing min/max properties for accessor POSITION.")}}a.expandByVector(c)}n.boundingBox=a;const l=new ua;a.getCenter(l.center),l.radius=a.min.distanceTo(a.max)/2,n.boundingSphere=l}function Qw(n,e,t){const i=e.attributes,a=[];function s(l,c){return t.getDependency("accessor",l).then(function(d){n.setAttribute(c,d)})}for(const l in i){const c=g1[l]||l.toLowerCase();c in n.attributes||a.push(s(i[l],c))}if(e.indices!==void 0&&!n.index){const l=t.getDependency("accessor",e.indices).then(function(c){n.setIndex(c)});a.push(l)}return Hl(n,e),V8(n,e,t),Promise.all(a).then(function(){return e.targets!==void 0?I8(n,e.targets,t):n})}const x1=new WeakMap;class k8 extends za{constructor(e){super(e),this.decoderPath="",this.decoderConfig={},this.decoderBinary=null,this.decoderPending=null,this.workerLimit=4,this.workerPool=[],this.workerNextTaskID=1,this.workerSourceURL="",this.defaultAttributeIDs={position:"POSITION",normal:"NORMAL",color:"COLOR",uv:"TEX_COORD"},this.defaultAttributeTypes={position:"Float32Array",normal:"Float32Array",color:"Float32Array",uv:"Float32Array"}}setDecoderPath(e){return this.decoderPath=e,this}setDecoderConfig(e){return this.decoderConfig=e,this}setWorkerLimit(e){return this.workerLimit=e,this}load(e,t,i,a){const s=new $r(this.manager);s.setPath(this.path),s.setResponseType("arraybuffer"),s.setRequestHeader(this.requestHeader),s.setWithCredentials(this.withCredentials),s.load(e,l=>{const c={attributeIDs:this.defaultAttributeIDs,attributeTypes:this.defaultAttributeTypes,useUniqueIDs:!1};this.decodeGeometry(l,c).then(t).catch(a)},i,a)}decodeDracoFile(e,t,i,a){const s={attributeIDs:i||this.defaultAttributeIDs,attributeTypes:a||this.defaultAttributeTypes,useUniqueIDs:!!i};this.decodeGeometry(e,s).then(t)}decodeGeometry(e,t){for(const d in t.attributeTypes){const p=t.attributeTypes[d];p.BYTES_PER_ELEMENT!==void 0&&(t.attributeTypes[d]=p.name)}const i=JSON.stringify(t);if(x1.has(e)){const d=x1.get(e);if(d.key===i)return d.promise;if(e.byteLength===0)throw new Error("THREE.DRACOLoader: Unable to re-decode a buffer with different settings. Buffer has already been transferred.")}let a;const s=this.workerNextTaskID++,l=e.byteLength,c=this._getWorker(s,l).then(d=>(a=d,new Promise((p,g)=>{a._callbacks[s]={resolve:p,reject:g},a.postMessage({type:"decode",id:s,taskConfig:t,buffer:e},[e])}))).then(d=>this._createGeometry(d.geometry));return c.catch(()=>!0).then(()=>{a&&s&&this._releaseTask(a,s)}),x1.set(e,{key:i,promise:c}),c}_createGeometry(e){const t=new Jt;e.index&&t.setIndex(new Rn(e.index.array,1));for(let i=0;i<e.attributes.length;i++){const a=e.attributes[i],s=a.name,l=a.array,c=a.itemSize;t.setAttribute(s,new Rn(l,c))}return t}_loadLibrary(e,t){const i=new $r(this.manager);return i.setPath(this.decoderPath),i.setResponseType(t),i.setWithCredentials(this.withCredentials),new Promise((a,s)=>{i.load(e,a,void 0,s)})}preload(){return this._initDecoder(),this}_initDecoder(){if(this.decoderPending)return this.decoderPending;const e=typeof WebAssembly!="object"||this.decoderConfig.type==="js",t=[];return e?t.push(this._loadLibrary("draco_decoder.js","text")):(t.push(this._loadLibrary("draco_wasm_wrapper.js","text")),t.push(this._loadLibrary("draco_decoder.wasm","arraybuffer"))),this.decoderPending=Promise.all(t).then(i=>{const a=i[0];e||(this.decoderConfig.wasmBinary=i[1]);const s=X8.toString(),l=["/* draco decoder */",a,"","/* worker */",s.substring(s.indexOf("{")+1,s.lastIndexOf("}"))].join(`
`);this.workerSourceURL=URL.createObjectURL(new Blob([l]))}),this.decoderPending}_getWorker(e,t){return this._initDecoder().then(()=>{if(this.workerPool.length<this.workerLimit){const a=new Worker(this.workerSourceURL);a._callbacks={},a._taskCosts={},a._taskLoad=0,a.postMessage({type:"init",decoderConfig:this.decoderConfig}),a.onmessage=function(s){const l=s.data;switch(l.type){case"decode":a._callbacks[l.id].resolve(l);break;case"error":a._callbacks[l.id].reject(l);break;default:console.error('THREE.DRACOLoader: Unexpected message, "'+l.type+'"')}},this.workerPool.push(a)}else this.workerPool.sort(function(a,s){return a._taskLoad>s._taskLoad?-1:1});const i=this.workerPool[this.workerPool.length-1];return i._taskCosts[e]=t,i._taskLoad+=t,i})}_releaseTask(e,t){e._taskLoad-=e._taskCosts[t],delete e._callbacks[t],delete e._taskCosts[t]}debug(){console.log("Task load: ",this.workerPool.map(e=>e._taskLoad))}dispose(){for(let e=0;e<this.workerPool.length;++e)this.workerPool[e].terminate();return this.workerPool.length=0,this}}function X8(){let n,e;onmessage=function(l){const c=l.data;switch(c.type){case"init":n=c.decoderConfig,e=new Promise(function(g){n.onModuleLoaded=function(v){g({draco:v})},DracoDecoderModule(n)});break;case"decode":const d=c.buffer,p=c.taskConfig;e.then(g=>{const v=g.draco,_=new v.Decoder,x=new v.DecoderBuffer;x.Init(new Int8Array(d),d.byteLength);try{const S=t(v,_,x,p),C=S.attributes.map(T=>T.array.buffer);S.index&&C.push(S.index.array.buffer),self.postMessage({type:"decode",id:c.id,geometry:S},C)}catch(S){console.error(S),self.postMessage({type:"error",id:c.id,error:S.message})}finally{v.destroy(x),v.destroy(_)}});break}};function t(l,c,d,p){const g=p.attributeIDs,v=p.attributeTypes;let _,x;const S=c.GetEncodedGeometryType(d);if(S===l.TRIANGULAR_MESH)_=new l.Mesh,x=c.DecodeBufferToMesh(d,_);else if(S===l.POINT_CLOUD)_=new l.PointCloud,x=c.DecodeBufferToPointCloud(d,_);else throw new Error("THREE.DRACOLoader: Unexpected geometry type.");if(!x.ok()||_.ptr===0)throw new Error("THREE.DRACOLoader: Decoding failed: "+x.error_msg());const C={index:null,attributes:[]};for(const T in g){const M=self[v[T]];let w,B;if(p.useUniqueIDs)B=g[T],w=c.GetAttributeByUniqueId(_,B);else{if(B=c.GetAttributeId(_,l[g[T]]),B===-1)continue;w=c.GetAttribute(_,B)}C.attributes.push(a(l,c,_,T,M,w))}return S===l.TRIANGULAR_MESH&&(C.index=i(l,c,_)),l.destroy(_),C}function i(l,c,d){const g=d.num_faces()*3,v=g*4,_=l._malloc(v);c.GetTrianglesUInt32Array(d,v,_);const x=new Uint32Array(l.HEAPF32.buffer,_,g).slice();return l._free(_),{array:x,itemSize:1}}function a(l,c,d,p,g,v){const _=v.num_components(),S=d.num_points()*_,C=S*g.BYTES_PER_ELEMENT,T=s(l,g),M=l._malloc(C);c.GetAttributeDataArrayForAllPoints(d,v,T,C,M);const w=new g(l.HEAPF32.buffer,M,S).slice();return l._free(M),{name:p,array:w,itemSize:_}}function s(l,c){switch(c){case Float32Array:return l.DT_FLOAT32;case Int8Array:return l.DT_INT8;case Int16Array:return l.DT_INT16;case Int32Array:return l.DT_INT32;case Uint8Array:return l.DT_UINT8;case Uint16Array:return l.DT_UINT16;case Uint32Array:return l.DT_UINT32}}}let D_;const b1=()=>{if(D_)return D_;const n="B9h9z9tFBBBF8fL9gBB9gLaaaaaFa9gEaaaB9gFaFa9gEaaaFaEMcBFFFGGGEIIILF9wFFFLEFBFKNFaFCx/IFMO/LFVK9tv9t9vq95GBt9f9f939h9z9t9f9j9h9s9s9f9jW9vq9zBBp9tv9z9o9v9wW9f9kv9j9v9kv9WvqWv94h919m9mvqBF8Z9tv9z9o9v9wW9f9kv9j9v9kv9J9u9kv94h919m9mvqBGy9tv9z9o9v9wW9f9kv9j9v9kv9J9u9kv949TvZ91v9u9jvBEn9tv9z9o9v9wW9f9kv9j9v9kv69p9sWvq9P9jWBIi9tv9z9o9v9wW9f9kv9j9v9kv69p9sWvq9R919hWBLn9tv9z9o9v9wW9f9kv9j9v9kv69p9sWvq9F949wBKI9z9iqlBOc+x8ycGBM/qQFTa8jUUUUBCU/EBlHL8kUUUUBC9+RKGXAGCFJAI9LQBCaRKAE2BBC+gF9HQBALAEAIJHOAGlAGTkUUUBRNCUoBAG9uC/wgBZHKCUGAKCUG9JyRVAECFJRICBRcGXEXAcAF9PQFAVAFAclAcAVJAF9JyRMGXGXAG9FQBAMCbJHKC9wZRSAKCIrCEJCGrRQANCUGJRfCBRbAIRTEXGXAOATlAQ9PQBCBRISEMATAQJRIGXAS9FQBCBRtCBREEXGXAOAIlCi9PQBCBRISLMANCU/CBJAEJRKGXGXGXGXGXATAECKrJ2BBAtCKZrCEZfIBFGEBMAKhB83EBAKCNJhB83EBSEMAKAI2BIAI2BBHmCKrHYAYCE6HYy86BBAKCFJAICIJAYJHY2BBAmCIrCEZHPAPCE6HPy86BBAKCGJAYAPJHY2BBAmCGrCEZHPAPCE6HPy86BBAKCEJAYAPJHY2BBAmCEZHmAmCE6Hmy86BBAKCIJAYAmJHY2BBAI2BFHmCKrHPAPCE6HPy86BBAKCLJAYAPJHY2BBAmCIrCEZHPAPCE6HPy86BBAKCKJAYAPJHY2BBAmCGrCEZHPAPCE6HPy86BBAKCOJAYAPJHY2BBAmCEZHmAmCE6Hmy86BBAKCNJAYAmJHY2BBAI2BGHmCKrHPAPCE6HPy86BBAKCVJAYAPJHY2BBAmCIrCEZHPAPCE6HPy86BBAKCcJAYAPJHY2BBAmCGrCEZHPAPCE6HPy86BBAKCMJAYAPJHY2BBAmCEZHmAmCE6Hmy86BBAKCSJAYAmJHm2BBAI2BEHICKrHYAYCE6HYy86BBAKCQJAmAYJHm2BBAICIrCEZHYAYCE6HYy86BBAKCfJAmAYJHm2BBAICGrCEZHYAYCE6HYy86BBAKCbJAmAYJHK2BBAICEZHIAICE6HIy86BBAKAIJRISGMAKAI2BNAI2BBHmCIrHYAYCb6HYy86BBAKCFJAICNJAYJHY2BBAmCbZHmAmCb6Hmy86BBAKCGJAYAmJHm2BBAI2BFHYCIrHPAPCb6HPy86BBAKCEJAmAPJHm2BBAYCbZHYAYCb6HYy86BBAKCIJAmAYJHm2BBAI2BGHYCIrHPAPCb6HPy86BBAKCLJAmAPJHm2BBAYCbZHYAYCb6HYy86BBAKCKJAmAYJHm2BBAI2BEHYCIrHPAPCb6HPy86BBAKCOJAmAPJHm2BBAYCbZHYAYCb6HYy86BBAKCNJAmAYJHm2BBAI2BIHYCIrHPAPCb6HPy86BBAKCVJAmAPJHm2BBAYCbZHYAYCb6HYy86BBAKCcJAmAYJHm2BBAI2BLHYCIrHPAPCb6HPy86BBAKCMJAmAPJHm2BBAYCbZHYAYCb6HYy86BBAKCSJAmAYJHm2BBAI2BKHYCIrHPAPCb6HPy86BBAKCQJAmAPJHm2BBAYCbZHYAYCb6HYy86BBAKCfJAmAYJHm2BBAI2BOHICIrHYAYCb6HYy86BBAKCbJAmAYJHK2BBAICbZHIAICb6HIy86BBAKAIJRISFMAKAI8pBB83BBAKCNJAICNJ8pBB83BBAICTJRIMAtCGJRtAECTJHEAS9JQBMMGXAIQBCBRISEMGXAM9FQBANAbJ2BBRtCBRKAfREEXAEANCU/CBJAKJ2BBHTCFrCBATCFZl9zAtJHt86BBAEAGJREAKCFJHKAM9HQBMMAfCFJRfAIRTAbCFJHbAG9HQBMMABAcAG9sJANCUGJAMAG9sTkUUUBpANANCUGJAMCaJAG9sJAGTkUUUBpMAMCBAIyAcJRcAIQBMC9+RKSFMCBC99AOAIlAGCAAGCA9Ly6yRKMALCU/EBJ8kUUUUBAKM+OmFTa8jUUUUBCoFlHL8kUUUUBC9+RKGXAFCE9uHOCtJAI9LQBCaRKAE2BBHNC/wFZC/gF9HQBANCbZHVCF9LQBALCoBJCgFCUFT+JUUUBpALC84Jha83EBALC8wJha83EBALC8oJha83EBALCAJha83EBALCiJha83EBALCTJha83EBALha83ENALha83EBAEAIJC9wJRcAECFJHNAOJRMGXAF9FQBCQCbAVCF6yRSABRECBRVCBRQCBRfCBRICBRKEXGXAMAcuQBC9+RKSEMGXGXAN2BBHOC/vF9LQBALCoBJAOCIrCa9zAKJCbZCEWJHb8oGIRTAb8oGBRtGXAOCbZHbAS9PQBALAOCa9zAIJCbZCGWJ8oGBAVAbyROAb9FRbGXGXAGCG9HQBABAt87FBABCIJAO87FBABCGJAT87FBSFMAEAtjGBAECNJAOjGBAECIJATjGBMAVAbJRVALCoBJAKCEWJHmAOjGBAmATjGIALAICGWJAOjGBALCoBJAKCFJCbZHKCEWJHTAtjGBATAOjGIAIAbJRIAKCFJRKSGMGXGXAbCb6QBAQAbJAbC989zJCFJRQSFMAM1BBHbCgFZROGXGXAbCa9MQBAMCFJRMSFMAM1BFHbCgBZCOWAOCgBZqROGXAbCa9MQBAMCGJRMSFMAM1BGHbCgBZCfWAOqROGXAbCa9MQBAMCEJRMSFMAM1BEHbCgBZCdWAOqROGXAbCa9MQBAMCIJRMSFMAM2BIC8cWAOqROAMCLJRMMAOCFrCBAOCFZl9zAQJRQMGXGXAGCG9HQBABAt87FBABCIJAQ87FBABCGJAT87FBSFMAEAtjGBAECNJAQjGBAECIJATjGBMALCoBJAKCEWJHOAQjGBAOATjGIALAICGWJAQjGBALCoBJAKCFJCbZHKCEWJHOAtjGBAOAQjGIAICFJRIAKCFJRKSFMGXAOCDF9LQBALAIAcAOCbZJ2BBHbCIrHTlCbZCGWJ8oGBAVCFJHtATyROALAIAblCbZCGWJ8oGBAtAT9FHmJHtAbCbZHTyRbAT9FRTGXGXAGCG9HQBABAV87FBABCIJAb87FBABCGJAO87FBSFMAEAVjGBAECNJAbjGBAECIJAOjGBMALAICGWJAVjGBALCoBJAKCEWJHYAOjGBAYAVjGIALAICFJHICbZCGWJAOjGBALCoBJAKCFJCbZCEWJHYAbjGBAYAOjGIALAIAmJCbZHICGWJAbjGBALCoBJAKCGJCbZHKCEWJHOAVjGBAOAbjGIAKCFJRKAIATJRIAtATJRVSFMAVCBAM2BBHYyHTAOC/+F6HPJROAYCbZRtGXGXAYCIrHmQBAOCFJRbSFMAORbALAIAmlCbZCGWJ8oGBROMGXGXAtQBAbCFJRVSFMAbRVALAIAYlCbZCGWJ8oGBRbMGXGXAP9FQBAMCFJRYSFMAM1BFHYCgFZRTGXGXAYCa9MQBAMCGJRYSFMAM1BGHYCgBZCOWATCgBZqRTGXAYCa9MQBAMCEJRYSFMAM1BEHYCgBZCfWATqRTGXAYCa9MQBAMCIJRYSFMAM1BIHYCgBZCdWATqRTGXAYCa9MQBAMCLJRYSFMAMCKJRYAM2BLC8cWATqRTMATCFrCBATCFZl9zAQJHQRTMGXGXAmCb6QBAYRPSFMAY1BBHMCgFZROGXGXAMCa9MQBAYCFJRPSFMAY1BFHMCgBZCOWAOCgBZqROGXAMCa9MQBAYCGJRPSFMAY1BGHMCgBZCfWAOqROGXAMCa9MQBAYCEJRPSFMAY1BEHMCgBZCdWAOqROGXAMCa9MQBAYCIJRPSFMAYCLJRPAY2BIC8cWAOqROMAOCFrCBAOCFZl9zAQJHQROMGXGXAtCb6QBAPRMSFMAP1BBHMCgFZRbGXGXAMCa9MQBAPCFJRMSFMAP1BFHMCgBZCOWAbCgBZqRbGXAMCa9MQBAPCGJRMSFMAP1BGHMCgBZCfWAbqRbGXAMCa9MQBAPCEJRMSFMAP1BEHMCgBZCdWAbqRbGXAMCa9MQBAPCIJRMSFMAPCLJRMAP2BIC8cWAbqRbMAbCFrCBAbCFZl9zAQJHQRbMGXGXAGCG9HQBABAT87FBABCIJAb87FBABCGJAO87FBSFMAEATjGBAECNJAbjGBAECIJAOjGBMALCoBJAKCEWJHYAOjGBAYATjGIALAICGWJATjGBALCoBJAKCFJCbZCEWJHYAbjGBAYAOjGIALAICFJHICbZCGWJAOjGBALCoBJAKCGJCbZCEWJHOATjGBAOAbjGIALAIAm9FAmCb6qJHICbZCGWJAbjGBAIAt9FAtCb6qJRIAKCEJRKMANCFJRNABCKJRBAECSJREAKCbZRKAICbZRIAfCEJHfAF9JQBMMCBC99AMAc6yRKMALCoFJ8kUUUUBAKM/tIFGa8jUUUUBCTlRLC9+RKGXAFCLJAI9LQBCaRKAE2BBC/+FZC/QF9HQBALhB83ENAECFJRKAEAIJC98JREGXAF9FQBGXAGCG6QBEXGXAKAE9JQBC9+bMAK1BBHGCgFZRIGXGXAGCa9MQBAKCFJRKSFMAK1BFHGCgBZCOWAICgBZqRIGXAGCa9MQBAKCGJRKSFMAK1BGHGCgBZCfWAIqRIGXAGCa9MQBAKCEJRKSFMAK1BEHGCgBZCdWAIqRIGXAGCa9MQBAKCIJRKSFMAK2BIC8cWAIqRIAKCLJRKMALCNJAICFZCGWqHGAICGrCBAICFrCFZl9zAG8oGBJHIjGBABAIjGBABCIJRBAFCaJHFQBSGMMEXGXAKAE9JQBC9+bMAK1BBHGCgFZRIGXGXAGCa9MQBAKCFJRKSFMAK1BFHGCgBZCOWAICgBZqRIGXAGCa9MQBAKCGJRKSFMAK1BGHGCgBZCfWAIqRIGXAGCa9MQBAKCEJRKSFMAK1BEHGCgBZCdWAIqRIGXAGCa9MQBAKCIJRKSFMAK2BIC8cWAIqRIAKCLJRKMABAICGrCBAICFrCFZl9zALCNJAICFZCGWqHI8oGBJHG87FBAIAGjGBABCGJRBAFCaJHFQBMMCBC99AKAE6yRKMAKM+lLKFaF99GaG99FaG99GXGXAGCI9HQBAF9FQFEXGXGX9DBBB8/9DBBB+/ABCGJHG1BB+yAB1BBHE+yHI+L+TABCFJHL1BBHK+yHO+L+THN9DBBBB9gHVyAN9DBB/+hANAN+U9DBBBBANAVyHcAc+MHMAECa3yAI+SHIAI+UAcAMAKCa3yAO+SHcAc+U+S+S+R+VHO+U+SHN+L9DBBB9P9d9FQBAN+oRESFMCUUUU94REMAGAE86BBGXGX9DBBB8/9DBBB+/Ac9DBBBB9gyAcAO+U+SHN+L9DBBB9P9d9FQBAN+oRGSFMCUUUU94RGMALAG86BBGXGX9DBBB8/9DBBB+/AI9DBBBB9gyAIAO+U+SHN+L9DBBB9P9d9FQBAN+oRGSFMCUUUU94RGMABAG86BBABCIJRBAFCaJHFQBSGMMAF9FQBEXGXGX9DBBB8/9DBBB+/ABCIJHG8uFB+yAB8uFBHE+yHI+L+TABCGJHL8uFBHK+yHO+L+THN9DBBBB9gHVyAN9DB/+g6ANAN+U9DBBBBANAVyHcAc+MHMAECa3yAI+SHIAI+UAcAMAKCa3yAO+SHcAc+U+S+S+R+VHO+U+SHN+L9DBBB9P9d9FQBAN+oRESFMCUUUU94REMAGAE87FBGXGX9DBBB8/9DBBB+/Ac9DBBBB9gyAcAO+U+SHN+L9DBBB9P9d9FQBAN+oRGSFMCUUUU94RGMALAG87FBGXGX9DBBB8/9DBBB+/AI9DBBBB9gyAIAO+U+SHN+L9DBBB9P9d9FQBAN+oRGSFMCUUUU94RGMABAG87FBABCNJRBAFCaJHFQBMMM/SEIEaE99EaF99GXAF9FQBCBREABRIEXGXGX9D/zI818/AICKJ8uFBHLCEq+y+VHKAI8uFB+y+UHO9DB/+g6+U9DBBB8/9DBBB+/AO9DBBBB9gy+SHN+L9DBBB9P9d9FQBAN+oRVSFMCUUUU94RVMAICIJ8uFBRcAICGJ8uFBRMABALCFJCEZAEqCFWJAV87FBGXGXAKAM+y+UHN9DB/+g6+U9DBBB8/9DBBB+/AN9DBBBB9gy+SHS+L9DBBB9P9d9FQBAS+oRMSFMCUUUU94RMMABALCGJCEZAEqCFWJAM87FBGXGXAKAc+y+UHK9DB/+g6+U9DBBB8/9DBBB+/AK9DBBBB9gy+SHS+L9DBBB9P9d9FQBAS+oRcSFMCUUUU94RcMABALCaJCEZAEqCFWJAc87FBGXGX9DBBU8/AOAO+U+TANAN+U+TAKAK+U+THO9DBBBBAO9DBBBB9gy+R9DB/+g6+U9DBBB8/+SHO+L9DBBB9P9d9FQBAO+oRcSFMCUUUU94RcMABALCEZAEqCFWJAc87FBAICNJRIAECIJREAFCaJHFQBMMM9JBGXAGCGrAF9sHF9FQBEXABAB8oGBHGCNWCN91+yAGCi91CnWCUUU/8EJ+++U84GBABCIJRBAFCaJHFQBMMM9TFEaCBCB8oGUkUUBHFABCEJC98ZJHBjGUkUUBGXGXAB8/BCTWHGuQBCaREABAGlCggEJCTrXBCa6QFMAFREMAEM/lFFFaGXGXAFABqCEZ9FQBABRESFMGXGXAGCT9PQBABRESFMABREEXAEAF8oGBjGBAECIJAFCIJ8oGBjGBAECNJAFCNJ8oGBjGBAECSJAFCSJ8oGBjGBAECTJREAFCTJRFAGC9wJHGCb9LQBMMAGCI9JQBEXAEAF8oGBjGBAFCIJRFAECIJREAGC98JHGCE9LQBMMGXAG9FQBEXAEAF2BB86BBAECFJREAFCFJRFAGCaJHGQBMMABMoFFGaGXGXABCEZ9FQBABRESFMAFCgFZC+BwsN9sRIGXGXAGCT9PQBABRESFMABREEXAEAIjGBAECSJAIjGBAECNJAIjGBAECIJAIjGBAECTJREAGC9wJHGCb9LQBMMAGCI9JQBEXAEAIjGBAECIJREAGC98JHGCE9LQBMMGXAG9FQBEXAEAF86BBAECFJREAGCaJHGQBMMABMMMFBCUNMIT9kBB",e="B9h9z9tFBBBFiI9gBB9gLaaaaaFa9gEaaaB9gFaFaEMcBBFBFFGGGEILF9wFFFLEFBFKNFaFCx/aFMO/LFVK9tv9t9vq95GBt9f9f939h9z9t9f9j9h9s9s9f9jW9vq9zBBp9tv9z9o9v9wW9f9kv9j9v9kv9WvqWv94h919m9mvqBG8Z9tv9z9o9v9wW9f9kv9j9v9kv9J9u9kv94h919m9mvqBIy9tv9z9o9v9wW9f9kv9j9v9kv9J9u9kv949TvZ91v9u9jvBLn9tv9z9o9v9wW9f9kv9j9v9kv69p9sWvq9P9jWBKi9tv9z9o9v9wW9f9kv9j9v9kv69p9sWvq9R919hWBOn9tv9z9o9v9wW9f9kv9j9v9kv69p9sWvq9F949wBNI9z9iqlBVc+N9IcIBTEM9+FLa8jUUUUBCTlRBCBRFEXCBRGCBREEXABCNJAGJAECUaAFAGrCFZHIy86BBAEAIJREAGCFJHGCN9HQBMAFCx+YUUBJAE86BBAFCEWCxkUUBJAB8pEN83EBAFCFJHFCUG9HQBMMk8lLbaE97F9+FaL978jUUUUBCU/KBlHL8kUUUUBC9+RKGXAGCFJAI9LQBCaRKAE2BBC+gF9HQBALAEAIJHOAGlAG/8cBBCUoBAG9uC/wgBZHKCUGAKCUG9JyRNAECFJRKCBRVGXEXAVAF9PQFANAFAVlAVANJAF9JyRcGXGXAG9FQBAcCbJHIC9wZHMCE9sRSAMCFWRQAICIrCEJCGrRfCBRbEXAKRTCBRtGXEXGXAOATlAf9PQBCBRKSLMALCU/CBJAtAM9sJRmATAfJRKCBREGXAMCoB9JQBAOAKlC/gB9JQBCBRIEXAmAIJREGXGXGXGXGXATAICKrJ2BBHYCEZfIBFGEBMAECBDtDMIBSEMAEAKDBBIAKDBBBHPCID+MFAPDQBTFtGmEYIPLdKeOnHPCGD+MFAPDQBTFtGmEYIPLdKeOnC0+G+MiDtD9OHdCEDbD8jHPAPDQBFGENVcMILKOSQfbHeD8dBh+BsxoxoUwN0AeD8dFhxoUwkwk+gUa0sHnhTkAnsHnhNkAnsHn7CgFZHiCEWCxkUUBJDBEBAiCx+YUUBJDBBBHeAeDQBBBBBBBBBBBBBBBBAnhAk7CgFZHiCEWCxkUUBJDBEBD9uDQBFGEILKOTtmYPdenDfAdAPD9SDMIBAKCIJAeDeBJAiCx+YUUBJ2BBJRKSGMAEAKDBBNAKDBBBHPCID+MFAPDQBTFtGmEYIPLdKeOnC+P+e+8/4BDtD9OHdCbDbD8jHPAPDQBFGENVcMILKOSQfbHeD8dBh+BsxoxoUwN0AeD8dFhxoUwkwk+gUa0sHnhTkAnsHnhNkAnsHn7CgFZHiCEWCxkUUBJDBEBAiCx+YUUBJDBBBHeAeDQBBBBBBBBBBBBBBBBAnhAk7CgFZHiCEWCxkUUBJDBEBD9uDQBFGEILKOTtmYPdenDfAdAPD9SDMIBAKCNJAeDeBJAiCx+YUUBJ2BBJRKSFMAEAKDBBBDMIBAKCTJRKMGXGXGXGXGXAYCGrCEZfIBFGEBMAECBDtDMITSEMAEAKDBBIAKDBBBHPCID+MFAPDQBTFtGmEYIPLdKeOnHPCGD+MFAPDQBTFtGmEYIPLdKeOnC0+G+MiDtD9OHdCEDbD8jHPAPDQBFGENVcMILKOSQfbHeD8dBh+BsxoxoUwN0AeD8dFhxoUwkwk+gUa0sHnhTkAnsHnhNkAnsHn7CgFZHiCEWCxkUUBJDBEBAiCx+YUUBJDBBBHeAeDQBBBBBBBBBBBBBBBBAnhAk7CgFZHiCEWCxkUUBJDBEBD9uDQBFGEILKOTtmYPdenDfAdAPD9SDMITAKCIJAeDeBJAiCx+YUUBJ2BBJRKSGMAEAKDBBNAKDBBBHPCID+MFAPDQBTFtGmEYIPLdKeOnC+P+e+8/4BDtD9OHdCbDbD8jHPAPDQBFGENVcMILKOSQfbHeD8dBh+BsxoxoUwN0AeD8dFhxoUwkwk+gUa0sHnhTkAnsHnhNkAnsHn7CgFZHiCEWCxkUUBJDBEBAiCx+YUUBJDBBBHeAeDQBBBBBBBBBBBBBBBBAnhAk7CgFZHiCEWCxkUUBJDBEBD9uDQBFGEILKOTtmYPdenDfAdAPD9SDMITAKCNJAeDeBJAiCx+YUUBJ2BBJRKSFMAEAKDBBBDMITAKCTJRKMGXGXGXGXGXAYCIrCEZfIBFGEBMAECBDtDMIASEMAEAKDBBIAKDBBBHPCID+MFAPDQBTFtGmEYIPLdKeOnHPCGD+MFAPDQBTFtGmEYIPLdKeOnC0+G+MiDtD9OHdCEDbD8jHPAPDQBFGENVcMILKOSQfbHeD8dBh+BsxoxoUwN0AeD8dFhxoUwkwk+gUa0sHnhTkAnsHnhNkAnsHn7CgFZHiCEWCxkUUBJDBEBAiCx+YUUBJDBBBHeAeDQBBBBBBBBBBBBBBBBAnhAk7CgFZHiCEWCxkUUBJDBEBD9uDQBFGEILKOTtmYPdenDfAdAPD9SDMIAAKCIJAeDeBJAiCx+YUUBJ2BBJRKSGMAEAKDBBNAKDBBBHPCID+MFAPDQBTFtGmEYIPLdKeOnC+P+e+8/4BDtD9OHdCbDbD8jHPAPDQBFGENVcMILKOSQfbHeD8dBh+BsxoxoUwN0AeD8dFhxoUwkwk+gUa0sHnhTkAnsHnhNkAnsHn7CgFZHiCEWCxkUUBJDBEBAiCx+YUUBJDBBBHeAeDQBBBBBBBBBBBBBBBBAnhAk7CgFZHiCEWCxkUUBJDBEBD9uDQBFGEILKOTtmYPdenDfAdAPD9SDMIAAKCNJAeDeBJAiCx+YUUBJ2BBJRKSFMAEAKDBBBDMIAAKCTJRKMGXGXGXGXGXAYCKrfIBFGEBMAECBDtDMI8wSEMAEAKDBBIAKDBBBHPCID+MFAPDQBTFtGmEYIPLdKeOnHPCGD+MFAPDQBTFtGmEYIPLdKeOnC0+G+MiDtD9OHdCEDbD8jHPAPDQBFGENVcMILKOSQfbHeD8dBh+BsxoxoUwN0AeD8dFhxoUwkwk+gUa0sHnhTkAnsHnhNkAnsHn7CgFZHYCEWCxkUUBJDBEBAYCx+YUUBJDBBBHeAeDQBBBBBBBBBBBBBBBBAnhAk7CgFZHYCEWCxkUUBJDBEBD9uDQBFGEILKOTtmYPdenDfAdAPD9SDMI8wAKCIJAeDeBJAYCx+YUUBJ2BBJRKSGMAEAKDBBNAKDBBBHPCID+MFAPDQBTFtGmEYIPLdKeOnC+P+e+8/4BDtD9OHdCbDbD8jHPAPDQBFGENVcMILKOSQfbHeD8dBh+BsxoxoUwN0AeD8dFhxoUwkwk+gUa0sHnhTkAnsHnhNkAnsHn7CgFZHYCEWCxkUUBJDBEBAYCx+YUUBJDBBBHeAeDQBBBBBBBBBBBBBBBBAnhAk7CgFZHYCEWCxkUUBJDBEBD9uDQBFGEILKOTtmYPdenDfAdAPD9SDMI8wAKCNJAeDeBJAYCx+YUUBJ2BBJRKSFMAEAKDBBBDMI8wAKCTJRKMAICoBJREAICUFJAM9LQFAERIAOAKlC/fB9LQBMMGXAEAM9PQBAECErRIEXGXAOAKlCi9PQBCBRKSOMAmAEJRYGXGXGXGXGXATAECKrJ2BBAICKZrCEZfIBFGEBMAYCBDtDMIBSEMAYAKDBBIAKDBBBHPCID+MFAPDQBTFtGmEYIPLdKeOnHPCGD+MFAPDQBTFtGmEYIPLdKeOnC0+G+MiDtD9OHdCEDbD8jHPAPDQBFGENVcMILKOSQfbHeD8dBh+BsxoxoUwN0AeD8dFhxoUwkwk+gUa0sHnhTkAnsHnhNkAnsHn7CgFZHiCEWCxkUUBJDBEBAiCx+YUUBJDBBBHeAeDQBBBBBBBBBBBBBBBBAnhAk7CgFZHiCEWCxkUUBJDBEBD9uDQBFGEILKOTtmYPdenDfAdAPD9SDMIBAKCIJAeDeBJAiCx+YUUBJ2BBJRKSGMAYAKDBBNAKDBBBHPCID+MFAPDQBTFtGmEYIPLdKeOnC+P+e+8/4BDtD9OHdCbDbD8jHPAPDQBFGENVcMILKOSQfbHeD8dBh+BsxoxoUwN0AeD8dFhxoUwkwk+gUa0sHnhTkAnsHnhNkAnsHn7CgFZHiCEWCxkUUBJDBEBAiCx+YUUBJDBBBHeAeDQBBBBBBBBBBBBBBBBAnhAk7CgFZHiCEWCxkUUBJDBEBD9uDQBFGEILKOTtmYPdenDfAdAPD9SDMIBAKCNJAeDeBJAiCx+YUUBJ2BBJRKSFMAYAKDBBBDMIBAKCTJRKMAICGJRIAECTJHEAM9JQBMMGXAK9FQBAKRTAtCFJHtCI6QGSFMMCBRKSEMGXAM9FQBALCUGJAbJREALAbJDBGBReCBRYEXAEALCU/CBJAYJHIDBIBHdCFD9tAdCFDbHPD9OD9hD9RHdAIAMJDBIBH8ZCFD9tA8ZAPD9OD9hD9RH8ZDQBTFtGmEYIPLdKeOnHpAIAQJDBIBHyCFD9tAyAPD9OD9hD9RHyAIASJDBIBH8cCFD9tA8cAPD9OD9hD9RH8cDQBTFtGmEYIPLdKeOnH8dDQBFTtGEmYILPdKOenHPAPDQBFGEBFGEBFGEBFGEAeD9uHeDyBjGBAEAGJHIAeAPAPDQILKOILKOILKOILKOD9uHeDyBjGBAIAGJHIAeAPAPDQNVcMNVcMNVcMNVcMD9uHeDyBjGBAIAGJHIAeAPAPDQSQfbSQfbSQfbSQfbD9uHeDyBjGBAIAGJHIAeApA8dDQNVi8ZcMpySQ8c8dfb8e8fHPAPDQBFGEBFGEBFGEBFGED9uHeDyBjGBAIAGJHIAeAPAPDQILKOILKOILKOILKOD9uHeDyBjGBAIAGJHIAeAPAPDQNVcMNVcMNVcMNVcMD9uHeDyBjGBAIAGJHIAeAPAPDQSQfbSQfbSQfbSQfbD9uHeDyBjGBAIAGJHIAeAdA8ZDQNiV8ZcpMyS8cQ8df8eb8fHdAyA8cDQNiV8ZcpMyS8cQ8df8eb8fH8ZDQBFTtGEmYILPdKOenHPAPDQBFGEBFGEBFGEBFGED9uHeDyBjGBAIAGJHIAeAPAPDQILKOILKOILKOILKOD9uHeDyBjGBAIAGJHIAeAPAPDQNVcMNVcMNVcMNVcMD9uHeDyBjGBAIAGJHIAeAPAPDQSQfbSQfbSQfbSQfbD9uHeDyBjGBAIAGJHIAeAdA8ZDQNVi8ZcMpySQ8c8dfb8e8fHPAPDQBFGEBFGEBFGEBFGED9uHeDyBjGBAIAGJHIAeAPAPDQILKOILKOILKOILKOD9uHeDyBjGBAIAGJHIAeAPAPDQNVcMNVcMNVcMNVcMD9uHeDyBjGBAIAGJHIAeAPAPDQSQfbSQfbSQfbSQfbD9uHeDyBjGBAIAGJREAYCTJHYAM9JQBMMAbCIJHbAG9JQBMMABAVAG9sJALCUGJAcAG9s/8cBBALALCUGJAcCaJAG9sJAG/8cBBMAcCBAKyAVJRVAKQBMC9+RKSFMCBC99AOAKlAGCAAGCA9Ly6yRKMALCU/KBJ8kUUUUBAKMNBT+BUUUBM+KmFTa8jUUUUBCoFlHL8kUUUUBC9+RKGXAFCE9uHOCtJAI9LQBCaRKAE2BBHNC/wFZC/gF9HQBANCbZHVCF9LQBALCoBJCgFCUF/8MBALC84Jha83EBALC8wJha83EBALC8oJha83EBALCAJha83EBALCiJha83EBALCTJha83EBALha83ENALha83EBAEAIJC9wJRcAECFJHNAOJRMGXAF9FQBCQCbAVCF6yRSABRECBRVCBRQCBRfCBRICBRKEXGXAMAcuQBC9+RKSEMGXGXAN2BBHOC/vF9LQBALCoBJAOCIrCa9zAKJCbZCEWJHb8oGIRTAb8oGBRtGXAOCbZHbAS9PQBALAOCa9zAIJCbZCGWJ8oGBAVAbyROAb9FRbGXGXAGCG9HQBABAt87FBABCIJAO87FBABCGJAT87FBSFMAEAtjGBAECNJAOjGBAECIJATjGBMAVAbJRVALCoBJAKCEWJHmAOjGBAmATjGIALAICGWJAOjGBALCoBJAKCFJCbZHKCEWJHTAtjGBATAOjGIAIAbJRIAKCFJRKSGMGXGXAbCb6QBAQAbJAbC989zJCFJRQSFMAM1BBHbCgFZROGXGXAbCa9MQBAMCFJRMSFMAM1BFHbCgBZCOWAOCgBZqROGXAbCa9MQBAMCGJRMSFMAM1BGHbCgBZCfWAOqROGXAbCa9MQBAMCEJRMSFMAM1BEHbCgBZCdWAOqROGXAbCa9MQBAMCIJRMSFMAM2BIC8cWAOqROAMCLJRMMAOCFrCBAOCFZl9zAQJRQMGXGXAGCG9HQBABAt87FBABCIJAQ87FBABCGJAT87FBSFMAEAtjGBAECNJAQjGBAECIJATjGBMALCoBJAKCEWJHOAQjGBAOATjGIALAICGWJAQjGBALCoBJAKCFJCbZHKCEWJHOAtjGBAOAQjGIAICFJRIAKCFJRKSFMGXAOCDF9LQBALAIAcAOCbZJ2BBHbCIrHTlCbZCGWJ8oGBAVCFJHtATyROALAIAblCbZCGWJ8oGBAtAT9FHmJHtAbCbZHTyRbAT9FRTGXGXAGCG9HQBABAV87FBABCIJAb87FBABCGJAO87FBSFMAEAVjGBAECNJAbjGBAECIJAOjGBMALAICGWJAVjGBALCoBJAKCEWJHYAOjGBAYAVjGIALAICFJHICbZCGWJAOjGBALCoBJAKCFJCbZCEWJHYAbjGBAYAOjGIALAIAmJCbZHICGWJAbjGBALCoBJAKCGJCbZHKCEWJHOAVjGBAOAbjGIAKCFJRKAIATJRIAtATJRVSFMAVCBAM2BBHYyHTAOC/+F6HPJROAYCbZRtGXGXAYCIrHmQBAOCFJRbSFMAORbALAIAmlCbZCGWJ8oGBROMGXGXAtQBAbCFJRVSFMAbRVALAIAYlCbZCGWJ8oGBRbMGXGXAP9FQBAMCFJRYSFMAM1BFHYCgFZRTGXGXAYCa9MQBAMCGJRYSFMAM1BGHYCgBZCOWATCgBZqRTGXAYCa9MQBAMCEJRYSFMAM1BEHYCgBZCfWATqRTGXAYCa9MQBAMCIJRYSFMAM1BIHYCgBZCdWATqRTGXAYCa9MQBAMCLJRYSFMAMCKJRYAM2BLC8cWATqRTMATCFrCBATCFZl9zAQJHQRTMGXGXAmCb6QBAYRPSFMAY1BBHMCgFZROGXGXAMCa9MQBAYCFJRPSFMAY1BFHMCgBZCOWAOCgBZqROGXAMCa9MQBAYCGJRPSFMAY1BGHMCgBZCfWAOqROGXAMCa9MQBAYCEJRPSFMAY1BEHMCgBZCdWAOqROGXAMCa9MQBAYCIJRPSFMAYCLJRPAY2BIC8cWAOqROMAOCFrCBAOCFZl9zAQJHQROMGXGXAtCb6QBAPRMSFMAP1BBHMCgFZRbGXGXAMCa9MQBAPCFJRMSFMAP1BFHMCgBZCOWAbCgBZqRbGXAMCa9MQBAPCGJRMSFMAP1BGHMCgBZCfWAbqRbGXAMCa9MQBAPCEJRMSFMAP1BEHMCgBZCdWAbqRbGXAMCa9MQBAPCIJRMSFMAPCLJRMAP2BIC8cWAbqRbMAbCFrCBAbCFZl9zAQJHQRbMGXGXAGCG9HQBABAT87FBABCIJAb87FBABCGJAO87FBSFMAEATjGBAECNJAbjGBAECIJAOjGBMALCoBJAKCEWJHYAOjGBAYATjGIALAICGWJATjGBALCoBJAKCFJCbZCEWJHYAbjGBAYAOjGIALAICFJHICbZCGWJAOjGBALCoBJAKCGJCbZCEWJHOATjGBAOAbjGIALAIAm9FAmCb6qJHICbZCGWJAbjGBAIAt9FAtCb6qJRIAKCEJRKMANCFJRNABCKJRBAECSJREAKCbZRKAICbZRIAfCEJHfAF9JQBMMCBC99AMAc6yRKMALCoFJ8kUUUUBAKM/tIFGa8jUUUUBCTlRLC9+RKGXAFCLJAI9LQBCaRKAE2BBC/+FZC/QF9HQBALhB83ENAECFJRKAEAIJC98JREGXAF9FQBGXAGCG6QBEXGXAKAE9JQBC9+bMAK1BBHGCgFZRIGXGXAGCa9MQBAKCFJRKSFMAK1BFHGCgBZCOWAICgBZqRIGXAGCa9MQBAKCGJRKSFMAK1BGHGCgBZCfWAIqRIGXAGCa9MQBAKCEJRKSFMAK1BEHGCgBZCdWAIqRIGXAGCa9MQBAKCIJRKSFMAK2BIC8cWAIqRIAKCLJRKMALCNJAICFZCGWqHGAICGrCBAICFrCFZl9zAG8oGBJHIjGBABAIjGBABCIJRBAFCaJHFQBSGMMEXGXAKAE9JQBC9+bMAK1BBHGCgFZRIGXGXAGCa9MQBAKCFJRKSFMAK1BFHGCgBZCOWAICgBZqRIGXAGCa9MQBAKCGJRKSFMAK1BGHGCgBZCfWAIqRIGXAGCa9MQBAKCEJRKSFMAK1BEHGCgBZCdWAIqRIGXAGCa9MQBAKCIJRKSFMAK2BIC8cWAIqRIAKCLJRKMABAICGrCBAICFrCFZl9zALCNJAICFZCGWqHI8oGBJHG87FBAIAGjGBABCGJRBAFCaJHFQBMMCBC99AKAE6yRKMAKM/dLEK97FaF97GXGXAGCI9HQBAF9FQFCBRGEXABABDBBBHECiD+rFCiD+sFD/6FHIAECND+rFCiD+sFD/6FAID/gFAECTD+rFCiD+sFD/6FHLD/gFD/kFD/lFHKCBDtD+2FHOAICUUUU94DtHND9OD9RD/kFHI9DBB/+hDYAIAID/mFAKAKD/mFALAOALAND9OD9RD/kFHIAID/mFD/kFD/kFD/jFD/nFHLD/mF9DBBX9LDYHOD/kFCgFDtD9OAECUUU94DtD9OD9QAIALD/mFAOD/kFCND+rFCU/+EDtD9OD9QAKALD/mFAOD/kFCTD+rFCUU/8ODtD9OD9QDMBBABCTJRBAGCIJHGAF9JQBSGMMAF9FQBCBRGEXABCTJHVAVDBBBHECBDtHOCUU98D8cFCUU98D8cEHND9OABDBBBHKAEDQILKOSQfbPden8c8d8e8fCggFDtD9OD/6FAKAEDQBFGENVcMTtmYi8ZpyHECTD+sFD/6FHID/gFAECTD+rFCTD+sFD/6FHLD/gFD/kFD/lFHE9DB/+g6DYALAEAOD+2FHOALCUUUU94DtHcD9OD9RD/kFHLALD/mFAEAED/mFAIAOAIAcD9OD9RD/kFHEAED/mFD/kFD/kFD/jFD/nFHID/mF9DBBX9LDYHOD/kFCTD+rFALAID/mFAOD/kFCggEDtD9OD9QHLAEAID/mFAOD/kFCaDbCBDnGCBDnECBDnKCBDnOCBDncCBDnMCBDnfCBDnbD9OHEDQNVi8ZcMpySQ8c8dfb8e8fD9QDMBBABAKAND9OALAEDQBFTtGEmYILPdKOenD9QDMBBABCAJRBAGCIJHGAF9JQBMMM/hEIGaF97FaL978jUUUUBCTlREGXAF9FQBCBRIEXAEABDBBBHLABCTJHKDBBBHODQILKOSQfbPden8c8d8e8fHNCTD+sFHVCID+rFDMIBAB9DBBU8/DY9D/zI818/DYAVCEDtD9QD/6FD/nFHVALAODQBFGENVcMTtmYi8ZpyHLCTD+rFCTD+sFD/6FD/mFHOAOD/mFAVALCTD+sFD/6FD/mFHcAcD/mFAVANCTD+rFCTD+sFD/6FD/mFHNAND/mFD/kFD/kFD/lFCBDtD+4FD/jF9DB/+g6DYHVD/mF9DBBX9LDYHLD/kFCggEDtHMD9OAcAVD/mFALD/kFCTD+rFD9QHcANAVD/mFALD/kFCTD+rFAOAVD/mFALD/kFAMD9OD9QHVDQBFTtGEmYILPdKOenHLD8dBAEDBIBDyB+t+J83EBABCNJALD8dFAEDBIBDyF+t+J83EBAKAcAVDQNVi8ZcMpySQ8c8dfb8e8fHVD8dBAEDBIBDyG+t+J83EBABCiJAVD8dFAEDBIBDyE+t+J83EBABCAJRBAICIJHIAF9JQBMMM9jFF97GXAGCGrAF9sHG9FQBCBRFEXABABDBBBHECND+rFCND+sFD/6FAECiD+sFCnD+rFCUUU/8EDtD+uFD/mFDMBBABCTJRBAFCIJHFAG9JQBMMM9TFEaCBCB8oGUkUUBHFABCEJC98ZJHBjGUkUUBGXGXAB8/BCTWHGuQBCaREABAGlCggEJCTrXBCa6QFMAFREMAEMMMFBCUNMIT9tBB",t=new Uint8Array([0,97,115,109,1,0,0,0,1,4,1,96,0,0,3,3,2,0,0,5,3,1,0,1,12,1,0,10,22,2,12,0,65,0,65,0,65,0,252,10,0,0,11,7,0,65,0,253,15,26,11]),i=new Uint8Array([32,0,65,253,3,1,2,34,4,106,6,5,11,8,7,20,13,33,12,16,128,9,116,64,19,113,127,15,10,21,22,14,255,66,24,54,136,107,18,23,192,26,114,118,132,17,77,101,130,144,27,87,131,44,45,74,156,154,70,167]);if(typeof WebAssembly!="object")return{supported:!1};let a=n;WebAssembly.validate(t)&&(a=e);let s;const l=WebAssembly.instantiate(c(a),{}).then(v=>{s=v.instance,s.exports.__wasm_call_ctors()});function c(v){const _=new Uint8Array(v.length);for(let S=0;S<v.length;++S){const C=v.charCodeAt(S);_[S]=C>96?C-71:C>64?C-65:C>47?C+4:C>46?63:62}let x=0;for(let S=0;S<v.length;++S)_[x++]=_[S]<60?i[_[S]]:(_[S]-60)*64+_[++S];return _.buffer.slice(0,x)}function d(v,_,x,S,C,T){const M=s.exports.sbrk,w=x+3&-4,B=M(w*S),D=M(C.length),P=new Uint8Array(s.exports.memory.buffer);P.set(C,D);const U=v(B,x,S,D,C.length);if(U===0&&T&&T(B,w,S),_.set(P.subarray(B,B+x*S)),M(B-M(0)),U!==0)throw new Error(`Malformed buffer data: ${U}`)}const p={0:"",1:"meshopt_decodeFilterOct",2:"meshopt_decodeFilterQuat",3:"meshopt_decodeFilterExp",NONE:"",OCTAHEDRAL:"meshopt_decodeFilterOct",QUATERNION:"meshopt_decodeFilterQuat",EXPONENTIAL:"meshopt_decodeFilterExp"},g={0:"meshopt_decodeVertexBuffer",1:"meshopt_decodeIndexBuffer",2:"meshopt_decodeIndexSequence",ATTRIBUTES:"meshopt_decodeVertexBuffer",TRIANGLES:"meshopt_decodeIndexBuffer",INDICES:"meshopt_decodeIndexSequence"};return D_={ready:l,supported:!0,decodeVertexBuffer(v,_,x,S,C){d(s.exports.meshopt_decodeVertexBuffer,v,_,x,S,s.exports[p[C]])},decodeIndexBuffer(v,_,x,S){d(s.exports.meshopt_decodeIndexBuffer,v,_,x,S)},decodeIndexSequence(v,_,x,S){d(s.exports.meshopt_decodeIndexSequence,v,_,x,S)},decodeGltfBuffer(v,_,x,S,C,T){d(s.exports[g[C]],v,_,x,S,s.exports[p[T]])}},D_},A1=n=>n===Object(n)&&!Array.isArray(n)&&typeof n!="function";function S1(n,e){const t=C2(s=>s.gl),i=$c(Gm,A1(n)?Object.values(n):n);return H.useLayoutEffect(()=>{e?.(i)},[e]),H.useEffect(()=>{if("initTexture"in t){let s=[];Array.isArray(i)?s=i:i instanceof ai?s=[i]:A1(i)&&(s=Object.values(i)),s.forEach(l=>{l instanceof ai&&t.initTexture(l)})}},[t,i]),H.useMemo(()=>{if(A1(n)){const s={};let l=0;for(const c in n)s[c]=i[l++];return s}else return i},[n,i])}S1.preload=n=>$c.preload(Gm,n),S1.clear=n=>$c.clear(Gm,n);let O_=null,Zw="https://www.gstatic.com/draco/versioned/decoders/1.5.5/";function $w(n=!0,e=!0,t){return i=>{t&&t(i),n&&(O_||(O_=new k8),O_.setDecoderPath(typeof n=="string"?n:Zw),i.setDRACOLoader(O_)),e&&i.setMeshoptDecoder(typeof b1=="function"?b1():b1)}}const rg=(n,e,t,i)=>$c(p1,n,$w(e,t,i));rg.preload=(n,e,t,i)=>$c.preload(p1,n,$w(e,t,i)),rg.clear=n=>$c.clear(p1,n),rg.setDecoderPath=n=>{Zw=n};function eB(n,e){const t=H.useRef(null),[i]=H.useState(()=>e?e instanceof dn?{current:e}:e:t),[a]=H.useState(()=>new cR(void 0));H.useLayoutEffect(()=>{e&&(i.current=e instanceof dn?e:e.current),a._root=i.current});const s=H.useRef({}),l=H.useMemo(()=>{const c={};return n.forEach(d=>Object.defineProperty(c,d.name,{enumerable:!0,get(){if(i.current)return s.current[d.name]||(s.current[d.name]=a.clipAction(d,i.current))},configurable:!0})),{ref:i,clips:n,actions:c,names:n.map(d=>d.name),mixer:a}},[n]);return JS((c,d)=>a.update(d)),H.useEffect(()=>{const c=i.current;return()=>{s.current={},a.stopAllAction(),Object.values(l.actions).forEach(d=>{c&&a.uncacheAction(d,c)})}},[n]),l}function tB(){const n=H.useRef({scroll:{scrollPercent:0,scrollTop:0},mouse:{x:0,y:0}});return H.useEffect(()=>{const e=()=>{const i=document.getElementsByClassName("tab-canvas")[0],a=window.innerHeight;if(i.getBoundingClientRect().height<a)return;const l=window.scrollY,c=document.body.scrollHeight-window.innerHeight,d=c>0?l/c:0;n.current.scroll={scrollPercent:Math.min(Math.max(d,0),1),scrollTop:l},console.log("DataRef.current -- ",n.current.scroll)},t=i=>{const a=i.clientX,s=i.clientY,l=window.innerWidth,c=window.innerHeight,d=a/l-.5,p=s/c-.5;n.current.mouse={x:d,y:p}};return window.addEventListener("scroll",e),window.addEventListener("mousemove",t),e(),()=>{window.removeEventListener("scroll",e),window.removeEventListener("mousemove",t)}},[]),n}const j8=()=>{const n=rg("https://res.cloudinary.com/dsmzokuux/image/upload/v1771488208/scene_b9p701.glb"),{nodes:e,animations:t}=n,i=S1("https://res.cloudinary.com/dsmzokuux/image/upload/v1771488211/TabTexture2_fdb8hp.webp"),a=tB(),s=H.useRef(null),l=H.useRef(null),c=H.useRef(null),d=H.useRef(null),p=H.useRef(0),{actions:g,names:v}=eB(t,s);return JS((_,x)=>{const{scroll:S}=a.current;if(l.current&&l.current.material instanceof Li&&c.current&&c.current.material instanceof Li&&(S.scrollTop>1200?(l.current.material.opacity=1-Cl.smootherstep(S.scrollTop,1200,1550),c.current.material.opacity=1-Cl.smootherstep(S.scrollTop,1200,1550),l.current.material.alphaTest=.7-Cl.smootherstep(S.scrollTop,1200,1550),c.current.material.alphaTest=.7-Cl.smootherstep(S.scrollTop,1200,1550)):(l.current.material.opacity=1,c.current.material.opacity=1,l.current.material.alphaTest=.9,c.current.material.alphaTest=.9)),v.length>0&&g[v[1]]){const C=g[v[1]];if(C){C.reset().play(),C.paused=!0,p.current=Cl.lerp(p.current,S.scrollTop,7*x);const T=C.getClip().duration;C.time=T*p.current/2200,C.getMixer().update(0)}}}),dt.jsxs("group",{ref:s,children:[dt.jsx("mesh",{ref:l,name:"Close_pot004",geometry:e.Close_pot004.geometry,position:[0,-.067,0],children:dt.jsx("meshBasicMaterial",{map:i,"map-flipY":!1,transparent:!0})}),dt.jsx("mesh",{ref:c,name:"Tab_table_now001",geometry:e.Tab_table_now001.geometry,position:[-1.213,.267,-.149],rotation:[Math.PI/2,0,-Math.PI/2],scale:.575,children:dt.jsx("meshBasicMaterial",{map:i,"map-flipY":!1,transparent:!0})}),dt.jsx("mesh",{name:"3D_logo",ref:d,geometry:e["3D_logo"].geometry,material:e["3D_logo"].material,position:[-1.214,.304,-.147],rotation:[Math.PI/2,0,-Math.PI/2],scale:[.304,.242,.304],children:dt.jsx("meshBasicMaterial",{color:"#4E2A27"})})]})};function Y8(){const n=H.useRef(null),e=H.useRef(null),{nodes:t,animations:i}=rg("https://res.cloudinary.com/dsmzokuux/image/upload/v1771488206/camera_trnhgu.glb"),{actions:a,names:s}=eB(i,n),{set:l,size:c}=C2(),d=tB(),p=H.useRef(0),g=H.useRef({x:0,y:0}),v=800,_=700;return H.useEffect(()=>{t.Camera003&&l({camera:t.Camera003})},[t,l]),H.useEffect(()=>{if(t.Camera003&&t.Camera003.isCamera){t.Camera003.aspect=c.width/c.height;const x=c.width<v?c.width/_:.9;t.Camera003.zoom=x,t.Camera003.updateProjectionMatrix()}},[c,t.Camera003]),JS((x,S)=>{const{scroll:C,mouse:T}=d.current,M=s.includes("Action")?"Action":s[0],w=a[M];if(w){w.reset().play(),w.paused=!0,p.current=Cl.lerp(p.current,C.scrollTop,5*S);const D=w.getClip().duration;w.time=D*p.current/2200,w.getMixer().update(0)}kw.damp(g.current,"x",T.x,.25,S),kw.damp(g.current,"y",T.y,.25,S);const B=Cl.mapLinear(Math.min(C.scrollTop,1500),0,1500,.02,.003);e.current&&(e.current.position.z=g.current.x*B*5,e.current.position.y=-g.current.y*B*5)}),dt.jsx("group",{ref:e,children:dt.jsx("group",{ref:n,dispose:null,children:t.Camera003&&dt.jsx("primitive",{object:t.Camera003})})})}var M1=NE();const q8=Xu(M1);function nB(n,e){if(typeof n=="function")return n(e);n!=null&&(n.current=e)}function E1(...n){return e=>{let t=!1;const i=n.map(a=>{const s=nB(a,e);return!t&&typeof s=="function"&&(t=!0),s});if(t)return()=>{for(let a=0;a<i.length;a++){const s=i[a];typeof s=="function"?s():nB(n[a],null)}}}}function Of(...n){return H.useCallback(E1(...n),n)}var W8=Symbol.for("react.lazy"),N_=Db[" use ".trim().toString()];function J8(n){return typeof n=="object"&&n!==null&&"then"in n}function iB(n){return n!=null&&typeof n=="object"&&"$$typeof"in n&&n.$$typeof===W8&&"_payload"in n&&J8(n._payload)}function K8(n){const e=Q8(n),t=H.forwardRef((i,a)=>{let{children:s,...l}=i;iB(s)&&typeof N_=="function"&&(s=N_(s._payload));const c=H.Children.toArray(s),d=c.find($8);if(d){const p=d.props.children,g=c.map(v=>v===d?H.Children.count(p)>1?H.Children.only(null):H.isValidElement(p)?p.props.children:null:v);return dt.jsx(e,{...l,ref:a,children:H.isValidElement(p)?H.cloneElement(p,void 0,g):null})}return dt.jsx(e,{...l,ref:a,children:s})});return t.displayName=`${n}.Slot`,t}function Q8(n){const e=H.forwardRef((t,i)=>{let{children:a,...s}=t;if(iB(a)&&typeof N_=="function"&&(a=N_(a._payload)),H.isValidElement(a)){const l=t9(a),c=e9(s,a.props);return a.type!==H.Fragment&&(c.ref=i?E1(i,l):l),H.cloneElement(a,c)}return H.Children.count(a)>1?H.Children.only(null):null});return e.displayName=`${n}.SlotClone`,e}var Z8=Symbol("radix.slottable");function $8(n){return H.isValidElement(n)&&typeof n.type=="function"&&"__radixId"in n.type&&n.type.__radixId===Z8}function e9(n,e){const t={...e};for(const i in e){const a=n[i],s=e[i];/^on[A-Z]/.test(i)?a&&s?t[i]=(...c)=>{const d=s(...c);return a(...c),d}:a&&(t[i]=a):i==="style"?t[i]={...a,...s}:i==="className"&&(t[i]=[a,s].filter(Boolean).join(" "))}return{...n,...t}}function t9(n){let e=Object.getOwnPropertyDescriptor(n.props,"ref")?.get,t=e&&"isReactWarning"in e&&e.isReactWarning;return t?n.ref:(e=Object.getOwnPropertyDescriptor(n,"ref")?.get,t=e&&"isReactWarning"in e&&e.isReactWarning,t?n.props.ref:n.props.ref||n.ref)}var n9=["a","button","div","form","h2","h3","img","input","label","li","nav","ol","p","select","span","svg","ul"],i9=n9.reduce((n,e)=>{const t=K8(`Primitive.${e}`),i=H.forwardRef((a,s)=>{const{asChild:l,...c}=a,d=l?t:e;return typeof window<"u"&&(window[Symbol.for("radix-ui")]=!0),dt.jsx(d,{...c,ref:s})});return i.displayName=`Primitive.${e}`,{...n,[e]:i}},{}),tu=globalThis?.document?H.useLayoutEffect:()=>{},a9="Portal",aB=H.forwardRef((n,e)=>{const{container:t,...i}=n,[a,s]=H.useState(!1);tu(()=>s(!0),[]);const l=t||a&&globalThis?.document?.body;return l?q8.createPortal(dt.jsx(i9.div,{...i,ref:e}),l):null});aB.displayName=a9;var r9=aB,rB=Object.prototype.hasOwnProperty;function sg(n,e){var t,i;if(n===e)return!0;if(n&&e&&(t=n.constructor)===e.constructor){if(t===Date)return n.getTime()===e.getTime();if(t===RegExp)return n.toString()===e.toString();if(t===Array){if((i=n.length)===e.length)for(;i--&&sg(n[i],e[i]););return i===-1}if(!t||typeof n=="object"){i=0;for(t in n)if(rB.call(n,t)&&++i&&!rB.call(e,t)||!(t in e)||!sg(n[t],e[t]))return!1;return Object.keys(e).length===i}}return n!==n&&e!==e}function sB(n,e){if(Object.is(n,e))return!0;if(typeof n!="object"||n===null||typeof e!="object"||e===null)return!1;const t=Object.keys(n);if(t.length!==Object.keys(e).length)return!1;for(let i=0;i<t.length;i++)if(!Object.prototype.hasOwnProperty.call(e,t[i])||!Object.is(n[t[i]],e[t[i]]))return!1;return!0}var U_=function(e,t,i,a){this.name=e,this.fn=t,this.args=i,this.modifiers=a};U_.prototype._test=function(e){var t=this.fn;try{wd(this.modifiers.slice(),t,this)(e)}catch{t=function(){return!1}}try{return wd(this.modifiers.slice(),t,this)(e)}catch{return!1}},U_.prototype._check=function(e){try{wd(this.modifiers.slice(),this.fn,this)(e)}catch{if(wd(this.modifiers.slice(),function(i){return i},this)(!1))return}if(!wd(this.modifiers.slice(),this.fn,this)(e))throw null},U_.prototype._testAsync=function(e){var t=this;return new Promise(function(i,a){lB(t.modifiers.slice(),t.fn,t)(e).then(function(s){s?i(e):a(null)}).catch(function(s){return a(s)})})};function oB(n,e){return e===void 0&&(e="simple"),typeof n=="object"?n[e]:n}function wd(n,e,t){if(n.length){var i=n.shift(),a=wd(n,e,t);return i.perform(a,t)}else return oB(e)}function lB(n,e,t){if(n.length){var i=n.shift(),a=lB(n,e,t);return i.performAsync(a,t)}else return function(s){return Promise.resolve(oB(e,"async")(s))}}var s9=function(e,t,i){this.name=e,this.perform=t,this.performAsync=i},T1=(function(n){function e(t,i,a,s){for(var l=[],c=arguments.length-4;c-- >0;)l[c]=arguments[c+4];n.call(this,l),n.captureStackTrace&&n.captureStackTrace(this,e),this.rule=t,this.value=i,this.cause=a,this.target=s}return n&&(e.__proto__=n),e.prototype=Object.create(n&&n.prototype),e.prototype.constructor=e,e})(Error),Ho=function(e,t){e===void 0&&(e=[]),t===void 0&&(t=[]),this.chain=e,this.nextRuleModifiers=t};Ho.prototype._applyRule=function(e,t){var i=this;return function(){for(var a=[],s=arguments.length;s--;)a[s]=arguments[s];return i.chain.push(new U_(t,e.apply(i,a),a,i.nextRuleModifiers)),i.nextRuleModifiers=[],i}},Ho.prototype._applyModifier=function(e,t){return this.nextRuleModifiers.push(new s9(t,e.simple,e.async)),this},Ho.prototype._clone=function(){return new Ho(this.chain.slice(),this.nextRuleModifiers.slice())},Ho.prototype.test=function(e){return this.chain.every(function(t){return t._test(e)})},Ho.prototype.testAll=function(e){var t=[];return this.chain.forEach(function(i){try{i._check(e)}catch(a){t.push(new T1(i,e,a))}}),t},Ho.prototype.check=function(e){this.chain.forEach(function(t){try{t._check(e)}catch(i){throw new T1(t,e,i)}})},Ho.prototype.testAsync=function(e){var t=this;return new Promise(function(i,a){cB(e,t.chain.slice(),i,a)})};function cB(n,e,t,i){if(e.length){var a=e.shift();a._testAsync(n).then(function(){cB(n,e,t,i)},function(s){i(new T1(a,n,s))})}else t(n)}var uB=function(n,e){return e&&typeof n=="string"&&n.trim().length===0?!0:n==null};function o9(n,e){return e===void 0&&(e=!1),{simple:function(t){return uB(t,e)||n.check(t)===void 0},async:function(t){return uB(t,e)||n.testAsync(t)}}}function Ur(){return typeof Proxy<"u"?fB(new Ho):C1(new Ho)}var og={};Ur.extend=function(n){Object.assign(og,n)},Ur.clearCustomRules=function(){og={}};function fB(n){return new Proxy(n,{get:function(t,i){if(i in t)return t[i];var a=fB(n._clone());if(i in L_)return a._applyModifier(L_[i],i);if(i in og)return a._applyRule(og[i],i);if(i in R1)return a._applyRule(R1[i],i)}})}function C1(n){var e=function(a,s){return Object.keys(a).forEach(function(l){s[l]=function(){for(var c=[],d=arguments.length;d--;)c[d]=arguments[d];var p=C1(s._clone()),g=p._applyRule(a[l],l).apply(void 0,c);return g}}),s},t=e(R1,n),i=e(og,t);return Object.keys(L_).forEach(function(a){Object.defineProperty(i,a,{get:function(){var s=C1(i._clone());return s._applyModifier(L_[a],a)}})}),i}var L_={not:{simple:function(n){return function(e){return!n(e)}},async:function(n){return function(e){return Promise.resolve(n(e)).then(function(t){return!t}).catch(function(){return!0})}}},some:{simple:function(n){return function(e){return I_(e).some(function(t){try{return n(t)}catch{return!1}})}},async:function(n){return function(e){return Promise.all(I_(e).map(function(t){try{return n(t).catch(function(){return!1})}catch{return!1}})).then(function(t){return t.some(Boolean)})}}},every:{simple:function(n){return function(e){return e!==!1&&I_(e).every(n)}},async:function(n){return function(e){return Promise.all(I_(e).map(n)).then(function(t){return t.every(Boolean)})}}},strict:{simple:function(n,e){return function(t){return hB(e)&&t&&typeof t=="object"?Object.keys(e.args[0]).length===Object.keys(t).length&&n(t):n(t)}},async:function(n,e){return function(t){return Promise.resolve(n(t)).then(function(i){return hB(e)&&t&&typeof t=="object"?Object.keys(e.args[0]).length===Object.keys(t).length&&i:i}).catch(function(){return!1})}}}};function hB(n){return n&&n.name==="schema"&&n.args.length>0&&typeof n.args[0]=="object"}function I_(n){return typeof n=="string"?n.split(""):n}var R1={equal:function(n){return function(e){return e==n}},exact:function(n){return function(e){return e===n}},number:function(n){return n===void 0&&(n=!0),function(e){return typeof e=="number"&&(n||isFinite(e))}},integer:function(){return function(n){var e=Number.isInteger||l9;return e(n)}},numeric:function(){return function(n){return!isNaN(parseFloat(n))&&isFinite(n)}},string:function(){return Bd("string")},boolean:function(){return Bd("boolean")},undefined:function(){return Bd("undefined")},null:function(){return Bd("null")},array:function(){return Bd("array")},object:function(){return Bd("object")},instanceOf:function(n){return function(e){return e instanceof n}},pattern:function(n){return function(e){return n.test(e)}},lowercase:function(){return function(n){return typeof n=="boolean"||n===n.toLowerCase()&&n.trim()!==""}},uppercase:function(){return function(n){return n===n.toUpperCase()&&n.trim()!==""}},vowel:function(){return function(n){return/^[aeiou]+$/i.test(n)}},consonant:function(){return function(n){return/^(?=[^aeiou])([a-z]+)$/i.test(n)}},first:function(n){return function(e){return e[0]==n}},last:function(n){return function(e){return e[e.length-1]==n}},empty:function(){return function(n){return n.length===0}},length:function(n,e){return function(t){return t.length>=n&&t.length<=(e||n)}},minLength:function(n){return function(e){return e.length>=n}},maxLength:function(n){return function(e){return e.length<=n}},negative:function(){return function(n){return n<0}},positive:function(){return function(n){return n>=0}},between:function(n,e){return function(t){return t>=n&&t<=e}},range:function(n,e){return function(t){return t>=n&&t<=e}},lessThan:function(n){return function(e){return e<n}},lessThanOrEqual:function(n){return function(e){return e<=n}},greaterThan:function(n){return function(e){return e>n}},greaterThanOrEqual:function(n){return function(e){return e>=n}},even:function(){return function(n){return n%2===0}},odd:function(){return function(n){return n%2!==0}},includes:function(n){return function(e){return~e.indexOf(n)}},schema:function(n){return c9(n)},passesAnyOf:function(){for(var n=[],e=arguments.length;e--;)n[e]=arguments[e];return function(t){return n.some(function(i){return i.test(t)})}},optional:o9};function Bd(n){return function(e){return Array.isArray(e)&&n==="array"||e===null&&n==="null"||typeof e===n}}function l9(n){return typeof n=="number"&&isFinite(n)&&Math.floor(n)===n}function c9(n){return{simple:function(e){var t=[];if(Object.keys(n).forEach(function(i){var a=n[i];try{a.check((e||{})[i])}catch(s){s.target=i,t.push(s)}}),t.length>0)throw t;return!0},async:function(e){var t=[],i=Object.keys(n).map(function(a){var s=n[a];return s.testAsync((e||{})[a]).catch(function(l){l.target=a,t.push(l)})});return Promise.all(i).then(function(){if(t.length>0)throw t;return!0})}}}var Yn="colors",or="sizes",bt="space",u9={gap:bt,gridGap:bt,columnGap:bt,gridColumnGap:bt,rowGap:bt,gridRowGap:bt,inset:bt,insetBlock:bt,insetBlockEnd:bt,insetBlockStart:bt,insetInline:bt,insetInlineEnd:bt,insetInlineStart:bt,margin:bt,marginTop:bt,marginRight:bt,marginBottom:bt,marginLeft:bt,marginBlock:bt,marginBlockEnd:bt,marginBlockStart:bt,marginInline:bt,marginInlineEnd:bt,marginInlineStart:bt,padding:bt,paddingTop:bt,paddingRight:bt,paddingBottom:bt,paddingLeft:bt,paddingBlock:bt,paddingBlockEnd:bt,paddingBlockStart:bt,paddingInline:bt,paddingInlineEnd:bt,paddingInlineStart:bt,top:bt,right:bt,bottom:bt,left:bt,scrollMargin:bt,scrollMarginTop:bt,scrollMarginRight:bt,scrollMarginBottom:bt,scrollMarginLeft:bt,scrollMarginX:bt,scrollMarginY:bt,scrollMarginBlock:bt,scrollMarginBlockEnd:bt,scrollMarginBlockStart:bt,scrollMarginInline:bt,scrollMarginInlineEnd:bt,scrollMarginInlineStart:bt,scrollPadding:bt,scrollPaddingTop:bt,scrollPaddingRight:bt,scrollPaddingBottom:bt,scrollPaddingLeft:bt,scrollPaddingX:bt,scrollPaddingY:bt,scrollPaddingBlock:bt,scrollPaddingBlockEnd:bt,scrollPaddingBlockStart:bt,scrollPaddingInline:bt,scrollPaddingInlineEnd:bt,scrollPaddingInlineStart:bt,fontSize:"fontSizes",background:Yn,backgroundColor:Yn,backgroundImage:Yn,borderImage:Yn,border:Yn,borderBlock:Yn,borderBlockEnd:Yn,borderBlockStart:Yn,borderBottom:Yn,borderBottomColor:Yn,borderColor:Yn,borderInline:Yn,borderInlineEnd:Yn,borderInlineStart:Yn,borderLeft:Yn,borderLeftColor:Yn,borderRight:Yn,borderRightColor:Yn,borderTop:Yn,borderTopColor:Yn,caretColor:Yn,color:Yn,columnRuleColor:Yn,fill:Yn,outline:Yn,outlineColor:Yn,stroke:Yn,textDecorationColor:Yn,fontFamily:"fonts",fontWeight:"fontWeights",lineHeight:"lineHeights",letterSpacing:"letterSpacings",blockSize:or,minBlockSize:or,maxBlockSize:or,inlineSize:or,minInlineSize:or,maxInlineSize:or,width:or,minWidth:or,maxWidth:or,height:or,minHeight:or,maxHeight:or,flexBasis:or,gridTemplateColumns:or,gridTemplateRows:or,borderWidth:"borderWidths",borderTopWidth:"borderWidths",borderRightWidth:"borderWidths",borderBottomWidth:"borderWidths",borderLeftWidth:"borderWidths",borderStyle:"borderStyles",borderTopStyle:"borderStyles",borderRightStyle:"borderStyles",borderBottomStyle:"borderStyles",borderLeftStyle:"borderStyles",borderRadius:"radii",borderTopLeftRadius:"radii",borderTopRightRadius:"radii",borderBottomRightRadius:"radii",borderBottomLeftRadius:"radii",boxShadow:"shadows",textShadow:"shadows",transition:"transitions",zIndex:"zIndices"},f9=(n,e)=>typeof e=="function"?{"()":Function.prototype.toString.call(e)}:e,Dd=()=>{const n=Object.create(null);return(e,t,...i)=>{const a=(s=>JSON.stringify(s,f9))(e);return a in n?n[a]:n[a]=t(e,...i)}},Nf=Symbol.for("sxs.internal"),w1=(n,e)=>Object.defineProperties(n,Object.getOwnPropertyDescriptors(e)),dB=n=>{for(const e in n)return!0;return!1},{hasOwnProperty:h9}=Object.prototype,B1=n=>n.includes("-")?n:n.replace(/[A-Z]/g,(e=>"-"+e.toLowerCase())),d9=/\s+(?![^()]*\))/,Od=n=>e=>n(...typeof e=="string"?String(e).split(d9):[e]),pB={appearance:n=>({WebkitAppearance:n,appearance:n}),backfaceVisibility:n=>({WebkitBackfaceVisibility:n,backfaceVisibility:n}),backdropFilter:n=>({WebkitBackdropFilter:n,backdropFilter:n}),backgroundClip:n=>({WebkitBackgroundClip:n,backgroundClip:n}),boxDecorationBreak:n=>({WebkitBoxDecorationBreak:n,boxDecorationBreak:n}),clipPath:n=>({WebkitClipPath:n,clipPath:n}),content:n=>({content:n.includes('"')||n.includes("'")||/^([A-Za-z]+\([^]*|[^]*-quote|inherit|initial|none|normal|revert|unset)$/.test(n)?n:`"${n}"`}),hyphens:n=>({WebkitHyphens:n,hyphens:n}),maskImage:n=>({WebkitMaskImage:n,maskImage:n}),maskSize:n=>({WebkitMaskSize:n,maskSize:n}),tabSize:n=>({MozTabSize:n,tabSize:n}),textSizeAdjust:n=>({WebkitTextSizeAdjust:n,textSizeAdjust:n}),userSelect:n=>({WebkitUserSelect:n,userSelect:n}),marginBlock:Od(((n,e)=>({marginBlockStart:n,marginBlockEnd:e||n}))),marginInline:Od(((n,e)=>({marginInlineStart:n,marginInlineEnd:e||n}))),maxSize:Od(((n,e)=>({maxBlockSize:n,maxInlineSize:e||n}))),minSize:Od(((n,e)=>({minBlockSize:n,minInlineSize:e||n}))),paddingBlock:Od(((n,e)=>({paddingBlockStart:n,paddingBlockEnd:e||n}))),paddingInline:Od(((n,e)=>({paddingInlineStart:n,paddingInlineEnd:e||n})))},D1=/([\d.]+)([^]*)/,p9=(n,e)=>n.length?n.reduce(((t,i)=>(t.push(...e.map((a=>a.includes("&")?a.replace(/&/g,/[ +>|~]/.test(i)&&/&.*&/.test(a)?`:is(${i})`:i):i+" "+a))),t)),[]):e,m9=(n,e)=>n in g9&&typeof e=="string"?e.replace(/^((?:[^]*[^\w-])?)(fit-content|stretch)((?:[^\w-][^]*)?)$/,((t,i,a,s)=>i+(a==="stretch"?`-moz-available${s};${B1(n)}:${i}-webkit-fill-available`:`-moz-fit-content${s};${B1(n)}:${i}fit-content`)+s)):String(e),g9={blockSize:1,height:1,inlineSize:1,maxBlockSize:1,maxHeight:1,maxInlineSize:1,maxWidth:1,minBlockSize:1,minHeight:1,minInlineSize:1,minWidth:1,width:1},Gl=n=>n?n+"-":"",mB=(n,e,t)=>n.replace(/([+-])?((?:\d+(?:\.\d*)?|\.\d+)(?:[Ee][+-]?\d+)?)?(\$|--)([$\w-]+)/g,((i,a,s,l,c)=>l=="$"==!!s?i:(a||l=="--"?"calc(":"")+"var(--"+(l==="$"?Gl(e)+(c.includes("$")?"":Gl(t))+c.replace(/\$/g,"-"):c)+")"+(a||l=="--"?"*"+(a||"")+(s||"1")+")":""))),v9=/\s*,\s*(?![^()]*\))/,y9=Object.prototype.toString,Nd=(n,e,t,i,a)=>{let s,l,c;const d=(p,g,v)=>{let _,x;const S=C=>{for(_ in C){const w=_.charCodeAt(0)===64,B=w&&Array.isArray(C[_])?C[_]:[C[_]];for(x of B){const D=/[A-Z]/.test(M=_)?M:M.replace(/-[^]/g,(U=>U[1].toUpperCase())),P=typeof x=="object"&&x&&x.toString===y9&&(!i.utils[D]||!g.length);if(D in i.utils&&!P){const U=i.utils[D];if(U!==l){l=U,S(U(x)),l=null;continue}}else if(D in pB){const U=pB[D];if(U!==c){c=U,S(U(x)),c=null;continue}}if(w&&(T=_.slice(1)in i.media?"@media "+i.media[_.slice(1)]:_,_=T.replace(/\(\s*([\w-]+)\s*(=|<|<=|>|>=)\s*([\w-]+)\s*(?:(<|<=|>|>=)\s*([\w-]+)\s*)?\)/g,((U,z,j,L,F,W)=>{const te=D1.test(z),$=.0625*(te?-1:1),[ae,le]=te?[L,z]:[z,L];return"("+(j[0]==="="?"":j[0]===">"===te?"max-":"min-")+ae+":"+(j[0]!=="="&&j.length===1?le.replace(D1,((G,J,Z)=>Number(J)+$*(j===">"?1:-1)+Z)):le)+(F?") and ("+(F[0]===">"?"min-":"max-")+ae+":"+(F.length===1?W.replace(D1,((G,J,Z)=>Number(J)+$*(F===">"?-1:1)+Z)):W):"")+")"}))),P){const U=w?v.concat(_):[...v],z=w?[...g]:p9(g,_.split(v9));s!==void 0&&a(gB(...s)),s=void 0,d(x,z,U)}else s===void 0&&(s=[[],g,v]),_=w||_.charCodeAt(0)!==36?_:`--${Gl(i.prefix)}${_.slice(1).replace(/\$/g,"-")}`,x=P?x:typeof x=="number"?x&&D in _9?String(x)+"px":String(x):mB(m9(D,x??""),i.prefix,i.themeMap[D]),s[0].push(`${w?`${_} `:`${B1(_)}:`}${x}`)}}var T,M};S(p),s!==void 0&&a(gB(...s)),s=void 0};d(n,e,t)},gB=(n,e,t)=>`${t.map((i=>`${i}{`)).join("")}${e.length?`${e.join(",")}{`:""}${n.join(";")}${e.length?"}":""}${Array(t.length?t.length+1:0).join("}")}`,_9={animationDelay:1,animationDuration:1,backgroundSize:1,blockSize:1,border:1,borderBlock:1,borderBlockEnd:1,borderBlockEndWidth:1,borderBlockStart:1,borderBlockStartWidth:1,borderBlockWidth:1,borderBottom:1,borderBottomLeftRadius:1,borderBottomRightRadius:1,borderBottomWidth:1,borderEndEndRadius:1,borderEndStartRadius:1,borderInlineEnd:1,borderInlineEndWidth:1,borderInlineStart:1,borderInlineStartWidth:1,borderInlineWidth:1,borderLeft:1,borderLeftWidth:1,borderRadius:1,borderRight:1,borderRightWidth:1,borderSpacing:1,borderStartEndRadius:1,borderStartStartRadius:1,borderTop:1,borderTopLeftRadius:1,borderTopRightRadius:1,borderTopWidth:1,borderWidth:1,bottom:1,columnGap:1,columnRule:1,columnRuleWidth:1,columnWidth:1,containIntrinsicSize:1,flexBasis:1,fontSize:1,gap:1,gridAutoColumns:1,gridAutoRows:1,gridTemplateColumns:1,gridTemplateRows:1,height:1,inlineSize:1,inset:1,insetBlock:1,insetBlockEnd:1,insetBlockStart:1,insetInline:1,insetInlineEnd:1,insetInlineStart:1,left:1,letterSpacing:1,margin:1,marginBlock:1,marginBlockEnd:1,marginBlockStart:1,marginBottom:1,marginInline:1,marginInlineEnd:1,marginInlineStart:1,marginLeft:1,marginRight:1,marginTop:1,maxBlockSize:1,maxHeight:1,maxInlineSize:1,maxWidth:1,minBlockSize:1,minHeight:1,minInlineSize:1,minWidth:1,offsetDistance:1,offsetRotate:1,outline:1,outlineOffset:1,outlineWidth:1,overflowClipMargin:1,padding:1,paddingBlock:1,paddingBlockEnd:1,paddingBlockStart:1,paddingBottom:1,paddingInline:1,paddingInlineEnd:1,paddingInlineStart:1,paddingLeft:1,paddingRight:1,paddingTop:1,perspective:1,right:1,rowGap:1,scrollMargin:1,scrollMarginBlock:1,scrollMarginBlockEnd:1,scrollMarginBlockStart:1,scrollMarginBottom:1,scrollMarginInline:1,scrollMarginInlineEnd:1,scrollMarginInlineStart:1,scrollMarginLeft:1,scrollMarginRight:1,scrollMarginTop:1,scrollPadding:1,scrollPaddingBlock:1,scrollPaddingBlockEnd:1,scrollPaddingBlockStart:1,scrollPaddingBottom:1,scrollPaddingInline:1,scrollPaddingInlineEnd:1,scrollPaddingInlineStart:1,scrollPaddingLeft:1,scrollPaddingRight:1,scrollPaddingTop:1,shapeMargin:1,textDecoration:1,textDecorationThickness:1,textIndent:1,textUnderlineOffset:1,top:1,transitionDelay:1,transitionDuration:1,verticalAlign:1,width:1,wordSpacing:1},vB=n=>String.fromCharCode(n+(n>25?39:97)),Uf=n=>(e=>{let t,i="";for(t=Math.abs(e);t>52;t=t/52|0)i=vB(t%52)+i;return vB(t%52)+i})(((e,t)=>{let i=t.length;for(;i;)e=33*e^t.charCodeAt(--i);return e})(5381,JSON.stringify(n))>>>0),lg=["themed","global","styled","onevar","resonevar","allvar","inline"],x9=n=>{if(n.href&&!n.href.startsWith(location.origin))return!1;try{return!!n.cssRules}catch{return!1}},b9=n=>{let e;const t=()=>{const{cssRules:a}=e.sheet;return[].map.call(a,((s,l)=>{const{cssText:c}=s;let d="";if(c.startsWith("--sxs"))return"";if(a[l-1]&&(d=a[l-1].cssText).startsWith("--sxs")){if(!s.cssRules.length)return"";for(const p in e.rules)if(e.rules[p].group===s)return`--sxs{--sxs:${[...e.rules[p].cache].join(" ")}}${c}`;return s.cssRules.length?`${d}${c}`:""}return c})).join("")},i=()=>{if(e){const{rules:c,sheet:d}=e;if(!d.deleteRule){for(;Object(Object(d.cssRules)[0]).type===3;)d.cssRules.splice(0,1);d.cssRules=[]}for(const p in c)delete c[p]}const a=Object(n).styleSheets||[];for(const c of a)if(x9(c)){for(let d=0,p=c.cssRules;p[d];++d){const g=Object(p[d]);if(g.type!==1)continue;const v=Object(p[d+1]);if(v.type!==4)continue;++d;const{cssText:_}=g;if(!_.startsWith("--sxs"))continue;const x=_.slice(14,-3).trim().split(/\s+/),S=lg[x[0]];S&&(e||(e={sheet:c,reset:i,rules:{},toString:t}),e.rules[S]={group:v,index:d,cache:new Set(x)})}if(e)break}if(!e){const c=(d,p)=>({type:p,cssRules:[],insertRule(g,v){this.cssRules.splice(v,0,c(g,{import:3,undefined:1}[(g.toLowerCase().match(/^@([a-z]+)/)||[])[1]]||4))},get cssText(){return d==="@media{}"?`@media{${[].map.call(this.cssRules,(g=>g.cssText)).join("")}}`:d}});e={sheet:n?(n.head||n).appendChild(document.createElement("style")).sheet:c("","text/css"),rules:{},reset:i,toString:t}}const{sheet:s,rules:l}=e;for(let c=lg.length-1;c>=0;--c){const d=lg[c];if(!l[d]){const p=lg[c+1],g=l[p]?l[p].index:s.cssRules.length;s.insertRule("@media{}",g),s.insertRule(`--sxs{--sxs:${c}}`,g),l[d]={group:s.cssRules[g+1],index:g,cache:new Set([c])}}A9(l[d])}};return i(),e},A9=n=>{const e=n.group;let t=e.cssRules.length;n.apply=i=>{try{e.insertRule(i,t),++t}catch{}}},cg=Symbol(),S9=Dd(),yB=(n,e)=>S9(n,(()=>(...t)=>{let i={type:null,composers:new Set};for(const a of t)if(a!=null)if(a[Nf]){i.type==null&&(i.type=a[Nf].type);for(const s of a[Nf].composers)i.composers.add(s)}else a.constructor!==Object||a.$$typeof?i.type==null&&(i.type=a):i.composers.add(M9(a,n));return i.type==null&&(i.type="span"),i.composers.size||i.composers.add(["PJLV",{},[],[],{},[]]),E9(n,i,e)})),M9=({variants:n,compoundVariants:e,defaultVariants:t,...i},a)=>{const s=`${Gl(a.prefix)}c-${Uf(i)}`,l=[],c=[],d=Object.create(null),p=[];for(const _ in t)d[_]=String(t[_]);if(typeof n=="object"&&n)for(const _ in n){g=d,v=_,h9.call(g,v)||(d[_]="undefined");const x=n[_];for(const S in x){const C={[_]:String(S)};String(S)==="undefined"&&p.push(_);const T=x[S],M=[C,T,!dB(T)];l.push(M)}}var g,v;if(typeof e=="object"&&e)for(const _ of e){let{css:x,...S}=_;x=typeof x=="object"&&x||{};for(const T in S)S[T]=String(S[T]);const C=[S,x,!dB(x)];c.push(C)}return[s,i,l,c,d,p]},E9=(n,e,t)=>{const[i,a,s,l]=T9(e.composers),c=typeof e.type=="function"||e.type.$$typeof?(v=>{function _(){for(let x=0;x<_[cg].length;x++){const[S,C]=_[cg][x];v.rules[S].apply(C)}return _[cg]=[],null}return _[cg]=[],_.rules={},lg.forEach((x=>_.rules[x]={apply:S=>_[cg].push([x,S])})),_})(t):null,d=(c||t).rules,p=`.${i}${a.length>1?`:where(.${a.slice(1).join(".")})`:""}`,g=v=>{v=typeof v=="object"&&v||C9;const{css:_,...x}=v,S={};for(const M in s)if(delete x[M],M in v){let w=v[M];typeof w=="object"&&w?S[M]={"@initial":s[M],...w}:(w=String(w),S[M]=w!=="undefined"||l.has(M)?w:s[M])}else S[M]=s[M];const C=new Set([...a]);for(const[M,w,B,D]of e.composers){t.rules.styled.cache.has(M)||(t.rules.styled.cache.add(M),Nd(w,[`.${M}`],[],n,(z=>{d.styled.apply(z)})));const P=_B(B,S,n.media),U=_B(D,S,n.media,!0);for(const z of P)if(z!==void 0)for(const[j,L,F]of z){const W=`${M}-${Uf(L)}-${j}`;C.add(W);const te=(F?t.rules.resonevar:t.rules.onevar).cache,$=F?d.resonevar:d.onevar;te.has(W)||(te.add(W),Nd(L,[`.${W}`],[],n,(ae=>{$.apply(ae)})))}for(const z of U)if(z!==void 0)for(const[j,L]of z){const F=`${M}-${Uf(L)}-${j}`;C.add(F),t.rules.allvar.cache.has(F)||(t.rules.allvar.cache.add(F),Nd(L,[`.${F}`],[],n,(W=>{d.allvar.apply(W)})))}}if(typeof _=="object"&&_){const M=`${i}-i${Uf(_)}-css`;C.add(M),t.rules.inline.cache.has(M)||(t.rules.inline.cache.add(M),Nd(_,[`.${M}`],[],n,(w=>{d.inline.apply(w)})))}for(const M of String(v.className||"").trim().split(/\s+/))M&&C.add(M);const T=x.className=[...C].join(" ");return{type:e.type,className:T,selector:p,props:x,toString:()=>T,deferredInjector:c}};return w1(g,{className:i,selector:p,[Nf]:e,toString:()=>(t.rules.styled.cache.has(i)||g(),i)})},T9=n=>{let e="";const t=[],i={},a=[];for(const[s,,,,l,c]of n){e===""&&(e=s),t.push(s),a.push(...c);for(const d in l){const p=l[d];(i[d]===void 0||p!=="undefined"||c.includes(p))&&(i[d]=p)}}return[e,t,i,new Set(a)]},_B=(n,e,t,i)=>{const a=[];e:for(let[s,l,c]of n){if(c)continue;let d,p=0,g=!1;for(d in s){const v=s[d];let _=e[d];if(_!==v){if(typeof _!="object"||!_)continue e;{let x,S,C=0;for(const T in _){if(v===String(_[T])){if(T!=="@initial"){const M=T.slice(1);(S=S||[]).push(M in t?t[M]:T.replace(/^@media ?/,"")),g=!0}p+=C,x=!0}++C}if(S&&S.length&&(l={["@media "+S.join(", ")]:l}),!x)continue e}}}(a[p]=a[p]||[]).push([i?"cv":`${d}-${s[d]}`,l,g])}return a},C9={},R9=Dd(),w9=(n,e)=>R9(n,(()=>(...t)=>{const i=()=>{for(let a of t){a=typeof a=="object"&&a||{};let s=Uf(a);if(!e.rules.global.cache.has(s)){if(e.rules.global.cache.add(s),"@import"in a){let l=[].indexOf.call(e.sheet.cssRules,e.rules.themed.group)-1;for(let c of[].concat(a["@import"]))c=c.includes('"')||c.includes("'")?c:`"${c}"`,e.sheet.insertRule(`@import ${c};`,l++);delete a["@import"]}Nd(a,[],[],n,(l=>{e.rules.global.apply(l)}))}}return""};return w1(i,{toString:i})})),B9=Dd(),D9=(n,e)=>B9(n,(()=>t=>{const i=`${Gl(n.prefix)}k-${Uf(t)}`,a=()=>{if(!e.rules.global.cache.has(i)){e.rules.global.cache.add(i);const s=[];Nd(t,[],[],n,(c=>s.push(c)));const l=`@keyframes ${i}{${s.join("")}}`;e.rules.global.apply(l)}return i};return w1(a,{get name(){return a()},toString:a})})),O9=class{constructor(n,e,t,i){this.token=n==null?"":String(n),this.value=e==null?"":String(e),this.scale=t==null?"":String(t),this.prefix=i==null?"":String(i)}get computedValue(){return"var("+this.variable+")"}get variable(){return"--"+Gl(this.prefix)+Gl(this.scale)+this.token}toString(){return this.computedValue}},N9=Dd(),U9=(n,e)=>N9(n,(()=>(t,i)=>{i=typeof t=="object"&&t||Object(i);const a=`.${t=(t=typeof t=="string"?t:"")||`${Gl(n.prefix)}t-${Uf(i)}`}`,s={},l=[];for(const d in i){s[d]={};for(const p in i[d]){const g=`--${Gl(n.prefix)}${d}-${p}`,v=mB(String(i[d][p]),n.prefix,d);s[d][p]=new O9(p,v,d,n.prefix),l.push(`${g}:${v}`)}}const c=()=>{if(l.length&&!e.rules.themed.cache.has(t)){e.rules.themed.cache.add(t);const d=`${i===n.theme?":root,":""}.${t}{${l.join(";")}}`;e.rules.themed.apply(d)}return t};return{...s,get className(){return c()},selector:a,toString:c}})),L9=Dd(),I9=Dd(),P9=n=>{const e=(t=>{let i=!1;const a=L9(t,(s=>{i=!0;const l="prefix"in(s=typeof s=="object"&&s||{})?String(s.prefix):"",c=typeof s.media=="object"&&s.media||{},d=typeof s.root=="object"?s.root||null:globalThis.document||null,p=typeof s.theme=="object"&&s.theme||{},g={prefix:l,media:c,theme:p,themeMap:typeof s.themeMap=="object"&&s.themeMap||{...u9},utils:typeof s.utils=="object"&&s.utils||{}},v=b9(d),_={css:yB(g,v),globalCss:w9(g,v),keyframes:D9(g,v),createTheme:U9(g,v),reset(){v.reset(),_.theme.toString()},theme:{},sheet:v,config:g,prefix:l,getCssText:v.toString,toString:v.toString};return String(_.theme=_.createTheme(p)),_}));return i||a.reset(),a})(n);return e.styled=(({config:t,sheet:i})=>I9(t,(()=>{const a=yB(t,i);return(...s)=>{const l=a(...s),c=l[Nf].type,d=ee.forwardRef(((p,g)=>{const v=p&&p.as||c,{props:_,deferredInjector:x}=l(p);return delete _.as,_.ref=g,x?ee.createElement(ee.Fragment,null,ee.createElement(v,_),ee.createElement(x,null)):ee.createElement(v,_)}));return d.className=l.className,d.displayName=`Styled.${c.displayName||c.name||c}`,d.selector=l.selector,d.toString=()=>l.selector,d[Nf]=l[Nf],d}})))(e),e};function Vl(n,e,{checkForDefaultPrevented:t=!0}={}){return function(a){if(n?.(a),t===!1||!a.defaultPrevented)return e?.(a)}}function xB(n,e=[]){let t=[];function i(s,l){const c=H.createContext(l),d=t.length;t=[...t,l];const p=v=>{const{scope:_,children:x,...S}=v,C=_?.[n]?.[d]||c,T=H.useMemo(()=>S,Object.values(S));return dt.jsx(C.Provider,{value:T,children:x})};p.displayName=s+"Provider";function g(v,_){const x=_?.[n]?.[d]||c,S=H.useContext(x);if(S)return S;if(l!==void 0)return l;throw new Error(`\`${v}\` must be used within \`${s}\``)}return[p,g]}const a=()=>{const s=t.map(l=>H.createContext(l));return function(c){const d=c?.[n]||s;return H.useMemo(()=>({[`__scope${n}`]:{...c,[n]:d}}),[c,d])}};return a.scopeName=n,[i,F9(a,...e)]}function F9(...n){const e=n[0];if(n.length===1)return e;const t=()=>{const i=n.map(a=>({useScope:a(),scopeName:a.scopeName}));return function(s){const l=i.reduce((c,{useScope:d,scopeName:p})=>{const v=d(s)[`__scope${p}`];return{...c,...v}},{});return H.useMemo(()=>({[`__scope${e.scopeName}`]:l}),[l])}};return t.scopeName=e.scopeName,t}function ug(n){const e=z9(n),t=H.forwardRef((i,a)=>{const{children:s,...l}=i,c=H.Children.toArray(s),d=c.find(G9);if(d){const p=d.props.children,g=c.map(v=>v===d?H.Children.count(p)>1?H.Children.only(null):H.isValidElement(p)?p.props.children:null:v);return dt.jsx(e,{...l,ref:a,children:H.isValidElement(p)?H.cloneElement(p,void 0,g):null})}return dt.jsx(e,{...l,ref:a,children:s})});return t.displayName=`${n}.Slot`,t}function z9(n){const e=H.forwardRef((t,i)=>{const{children:a,...s}=t;if(H.isValidElement(a)){const l=k9(a),c=V9(s,a.props);return a.type!==H.Fragment&&(c.ref=i?E1(i,l):l),H.cloneElement(a,c)}return H.Children.count(a)>1?H.Children.only(null):null});return e.displayName=`${n}.SlotClone`,e}var bB=Symbol("radix.slottable");function H9(n){const e=({children:t})=>dt.jsx(dt.Fragment,{children:t});return e.displayName=`${n}.Slottable`,e.__radixId=bB,e}function G9(n){return H.isValidElement(n)&&typeof n.type=="function"&&"__radixId"in n.type&&n.type.__radixId===bB}function V9(n,e){const t={...e};for(const i in e){const a=n[i],s=e[i];/^on[A-Z]/.test(i)?a&&s?t[i]=(...c)=>{const d=s(...c);return a(...c),d}:a&&(t[i]=a):i==="style"?t[i]={...a,...s}:i==="className"&&(t[i]=[a,s].filter(Boolean).join(" "))}return{...n,...t}}function k9(n){let e=Object.getOwnPropertyDescriptor(n.props,"ref")?.get,t=e&&"isReactWarning"in e&&e.isReactWarning;return t?n.ref:(e=Object.getOwnPropertyDescriptor(n,"ref")?.get,t=e&&"isReactWarning"in e&&e.isReactWarning,t?n.props.ref:n.props.ref||n.ref)}var X9=["a","button","div","form","h2","h3","img","input","label","li","nav","ol","p","select","span","svg","ul"],AB=X9.reduce((n,e)=>{const t=ug(`Primitive.${e}`),i=H.forwardRef((a,s)=>{const{asChild:l,...c}=a,d=l?t:e;return typeof window<"u"&&(window[Symbol.for("radix-ui")]=!0),dt.jsx(d,{...c,ref:s})});return i.displayName=`Primitive.${e}`,{...n,[e]:i}},{});function j9(n,e){n&&M1.flushSync(()=>n.dispatchEvent(e))}function P_(n){const e=H.useRef(n);return H.useEffect(()=>{e.current=n}),H.useMemo(()=>(...t)=>e.current?.(...t),[])}function Y9(n,e=globalThis?.document){const t=P_(n);H.useEffect(()=>{const i=a=>{a.key==="Escape"&&t(a)};return e.addEventListener("keydown",i,{capture:!0}),()=>e.removeEventListener("keydown",i,{capture:!0})},[t,e])}var q9="DismissableLayer",O1="dismissableLayer.update",W9="dismissableLayer.pointerDownOutside",J9="dismissableLayer.focusOutside",SB,MB=H.createContext({layers:new Set,layersWithOutsidePointerEventsDisabled:new Set,branches:new Set}),EB=H.forwardRef((n,e)=>{const{disableOutsidePointerEvents:t=!1,onEscapeKeyDown:i,onPointerDownOutside:a,onFocusOutside:s,onInteractOutside:l,onDismiss:c,...d}=n,p=H.useContext(MB),[g,v]=H.useState(null),_=g?.ownerDocument??globalThis?.document,[,x]=H.useState({}),S=Of(e,z=>v(z)),C=Array.from(p.layers),[T]=[...p.layersWithOutsidePointerEventsDisabled].slice(-1),M=C.indexOf(T),w=g?C.indexOf(g):-1,B=p.layersWithOutsidePointerEventsDisabled.size>0,D=w>=M,P=Z9(z=>{const j=z.target,L=[...p.branches].some(F=>F.contains(j));!D||L||(a?.(z),l?.(z),z.defaultPrevented||c?.())},_),U=$9(z=>{const j=z.target;[...p.branches].some(F=>F.contains(j))||(s?.(z),l?.(z),z.defaultPrevented||c?.())},_);return Y9(z=>{w===p.layers.size-1&&(i?.(z),!z.defaultPrevented&&c&&(z.preventDefault(),c()))},_),H.useEffect(()=>{if(g)return t&&(p.layersWithOutsidePointerEventsDisabled.size===0&&(SB=_.body.style.pointerEvents,_.body.style.pointerEvents="none"),p.layersWithOutsidePointerEventsDisabled.add(g)),p.layers.add(g),TB(),()=>{t&&p.layersWithOutsidePointerEventsDisabled.size===1&&(_.body.style.pointerEvents=SB)}},[g,_,t,p]),H.useEffect(()=>()=>{g&&(p.layers.delete(g),p.layersWithOutsidePointerEventsDisabled.delete(g),TB())},[g,p]),H.useEffect(()=>{const z=()=>x({});return document.addEventListener(O1,z),()=>document.removeEventListener(O1,z)},[]),dt.jsx(AB.div,{...d,ref:S,style:{pointerEvents:B?D?"auto":"none":void 0,...n.style},onFocusCapture:Vl(n.onFocusCapture,U.onFocusCapture),onBlurCapture:Vl(n.onBlurCapture,U.onBlurCapture),onPointerDownCapture:Vl(n.onPointerDownCapture,P.onPointerDownCapture)})});EB.displayName=q9;var K9="DismissableLayerBranch",Q9=H.forwardRef((n,e)=>{const t=H.useContext(MB),i=H.useRef(null),a=Of(e,i);return H.useEffect(()=>{const s=i.current;if(s)return t.branches.add(s),()=>{t.branches.delete(s)}},[t.branches]),dt.jsx(AB.div,{...n,ref:a})});Q9.displayName=K9;function Z9(n,e=globalThis?.document){const t=P_(n),i=H.useRef(!1),a=H.useRef(()=>{});return H.useEffect(()=>{const s=c=>{if(c.target&&!i.current){let d=function(){CB(W9,t,p,{discrete:!0})};const p={originalEvent:c};c.pointerType==="touch"?(e.removeEventListener("click",a.current),a.current=d,e.addEventListener("click",a.current,{once:!0})):d()}else e.removeEventListener("click",a.current);i.current=!1},l=window.setTimeout(()=>{e.addEventListener("pointerdown",s)},0);return()=>{window.clearTimeout(l),e.removeEventListener("pointerdown",s),e.removeEventListener("click",a.current)}},[e,t]),{onPointerDownCapture:()=>i.current=!0}}function $9(n,e=globalThis?.document){const t=P_(n),i=H.useRef(!1);return H.useEffect(()=>{const a=s=>{s.target&&!i.current&&CB(J9,t,{originalEvent:s},{discrete:!1})};return e.addEventListener("focusin",a),()=>e.removeEventListener("focusin",a)},[e,t]),{onFocusCapture:()=>i.current=!0,onBlurCapture:()=>i.current=!1}}function TB(){const n=new CustomEvent(O1);document.dispatchEvent(n)}function CB(n,e,t,{discrete:i}){const a=t.originalEvent.target,s=new CustomEvent(n,{bubbles:!1,cancelable:!0,detail:t});e&&a.addEventListener(n,e,{once:!0}),i?j9(a,s):a.dispatchEvent(s)}var e6=Db[" useId ".trim().toString()]||(()=>{}),t6=0;function n6(n){const[e,t]=H.useState(e6());return tu(()=>{t(i=>i??String(t6++))},[n]),e?`radix-${e}`:""}const i6=["top","right","bottom","left"],nu=Math.min,es=Math.max,F_=Math.round,z_=Math.floor,Go=n=>({x:n,y:n}),a6={left:"right",right:"left",bottom:"top",top:"bottom"},r6={start:"end",end:"start"};function N1(n,e,t){return es(n,nu(e,t))}function kl(n,e){return typeof n=="function"?n(e):n}function Xl(n){return n.split("-")[0]}function Ud(n){return n.split("-")[1]}function U1(n){return n==="x"?"y":"x"}function L1(n){return n==="y"?"height":"width"}const s6=new Set(["top","bottom"]);function Vo(n){return s6.has(Xl(n))?"y":"x"}function I1(n){return U1(Vo(n))}function o6(n,e,t){t===void 0&&(t=!1);const i=Ud(n),a=I1(n),s=L1(a);let l=a==="x"?i===(t?"end":"start")?"right":"left":i==="start"?"bottom":"top";return e.reference[s]>e.floating[s]&&(l=H_(l)),[l,H_(l)]}function l6(n){const e=H_(n);return[P1(n),e,P1(e)]}function P1(n){return n.replace(/start|end/g,e=>r6[e])}const RB=["left","right"],wB=["right","left"],c6=["top","bottom"],u6=["bottom","top"];function f6(n,e,t){switch(n){case"top":case"bottom":return t?e?wB:RB:e?RB:wB;case"left":case"right":return e?c6:u6;default:return[]}}function h6(n,e,t,i){const a=Ud(n);let s=f6(Xl(n),t==="start",i);return a&&(s=s.map(l=>l+"-"+a),e&&(s=s.concat(s.map(P1)))),s}function H_(n){return n.replace(/left|right|bottom|top/g,e=>a6[e])}function d6(n){return{top:0,right:0,bottom:0,left:0,...n}}function BB(n){return typeof n!="number"?d6(n):{top:n,right:n,bottom:n,left:n}}function G_(n){const{x:e,y:t,width:i,height:a}=n;return{width:i,height:a,top:t,left:e,right:e+i,bottom:t+a,x:e,y:t}}function DB(n,e,t){let{reference:i,floating:a}=n;const s=Vo(e),l=I1(e),c=L1(l),d=Xl(e),p=s==="y",g=i.x+i.width/2-a.width/2,v=i.y+i.height/2-a.height/2,_=i[c]/2-a[c]/2;let x;switch(d){case"top":x={x:g,y:i.y-a.height};break;case"bottom":x={x:g,y:i.y+i.height};break;case"right":x={x:i.x+i.width,y:v};break;case"left":x={x:i.x-a.width,y:v};break;default:x={x:i.x,y:i.y}}switch(Ud(e)){case"start":x[l]-=_*(t&&p?-1:1);break;case"end":x[l]+=_*(t&&p?-1:1);break}return x}const p6=async(n,e,t)=>{const{placement:i="bottom",strategy:a="absolute",middleware:s=[],platform:l}=t,c=s.filter(Boolean),d=await(l.isRTL==null?void 0:l.isRTL(e));let p=await l.getElementRects({reference:n,floating:e,strategy:a}),{x:g,y:v}=DB(p,i,d),_=i,x={},S=0;for(let C=0;C<c.length;C++){const{name:T,fn:M}=c[C],{x:w,y:B,data:D,reset:P}=await M({x:g,y:v,initialPlacement:i,placement:_,strategy:a,middlewareData:x,rects:p,platform:l,elements:{reference:n,floating:e}});g=w??g,v=B??v,x={...x,[T]:{...x[T],...D}},P&&S<=50&&(S++,typeof P=="object"&&(P.placement&&(_=P.placement),P.rects&&(p=P.rects===!0?await l.getElementRects({reference:n,floating:e,strategy:a}):P.rects),{x:g,y:v}=DB(p,_,d)),C=-1)}return{x:g,y:v,placement:_,strategy:a,middlewareData:x}};async function fg(n,e){var t;e===void 0&&(e={});const{x:i,y:a,platform:s,rects:l,elements:c,strategy:d}=n,{boundary:p="clippingAncestors",rootBoundary:g="viewport",elementContext:v="floating",altBoundary:_=!1,padding:x=0}=kl(e,n),S=BB(x),T=c[_?v==="floating"?"reference":"floating":v],M=G_(await s.getClippingRect({element:(t=await(s.isElement==null?void 0:s.isElement(T)))==null||t?T:T.contextElement||await(s.getDocumentElement==null?void 0:s.getDocumentElement(c.floating)),boundary:p,rootBoundary:g,strategy:d})),w=v==="floating"?{x:i,y:a,width:l.floating.width,height:l.floating.height}:l.reference,B=await(s.getOffsetParent==null?void 0:s.getOffsetParent(c.floating)),D=await(s.isElement==null?void 0:s.isElement(B))?await(s.getScale==null?void 0:s.getScale(B))||{x:1,y:1}:{x:1,y:1},P=G_(s.convertOffsetParentRelativeRectToViewportRelativeRect?await s.convertOffsetParentRelativeRectToViewportRelativeRect({elements:c,rect:w,offsetParent:B,strategy:d}):w);return{top:(M.top-P.top+S.top)/D.y,bottom:(P.bottom-M.bottom+S.bottom)/D.y,left:(M.left-P.left+S.left)/D.x,right:(P.right-M.right+S.right)/D.x}}const m6=n=>({name:"arrow",options:n,async fn(e){const{x:t,y:i,placement:a,rects:s,platform:l,elements:c,middlewareData:d}=e,{element:p,padding:g=0}=kl(n,e)||{};if(p==null)return{};const v=BB(g),_={x:t,y:i},x=I1(a),S=L1(x),C=await l.getDimensions(p),T=x==="y",M=T?"top":"left",w=T?"bottom":"right",B=T?"clientHeight":"clientWidth",D=s.reference[S]+s.reference[x]-_[x]-s.floating[S],P=_[x]-s.reference[x],U=await(l.getOffsetParent==null?void 0:l.getOffsetParent(p));let z=U?U[B]:0;(!z||!await(l.isElement==null?void 0:l.isElement(U)))&&(z=c.floating[B]||s.floating[S]);const j=D/2-P/2,L=z/2-C[S]/2-1,F=nu(v[M],L),W=nu(v[w],L),te=F,$=z-C[S]-W,ae=z/2-C[S]/2+j,le=N1(te,ae,$),G=!d.arrow&&Ud(a)!=null&&ae!==le&&s.reference[S]/2-(ae<te?F:W)-C[S]/2<0,J=G?ae<te?ae-te:ae-$:0;return{[x]:_[x]+J,data:{[x]:le,centerOffset:ae-le-J,...G&&{alignmentOffset:J}},reset:G}}}),g6=function(n){return n===void 0&&(n={}),{name:"flip",options:n,async fn(e){var t,i;const{placement:a,middlewareData:s,rects:l,initialPlacement:c,platform:d,elements:p}=e,{mainAxis:g=!0,crossAxis:v=!0,fallbackPlacements:_,fallbackStrategy:x="bestFit",fallbackAxisSideDirection:S="none",flipAlignment:C=!0,...T}=kl(n,e);if((t=s.arrow)!=null&&t.alignmentOffset)return{};const M=Xl(a),w=Vo(c),B=Xl(c)===c,D=await(d.isRTL==null?void 0:d.isRTL(p.floating)),P=_||(B||!C?[H_(c)]:l6(c)),U=S!=="none";!_&&U&&P.push(...h6(c,C,S,D));const z=[c,...P],j=await fg(e,T),L=[];let F=((i=s.flip)==null?void 0:i.overflows)||[];if(g&&L.push(j[M]),v){const ae=o6(a,l,D);L.push(j[ae[0]],j[ae[1]])}if(F=[...F,{placement:a,overflows:L}],!L.every(ae=>ae<=0)){var W,te;const ae=(((W=s.flip)==null?void 0:W.index)||0)+1,le=z[ae];if(le&&(!(v==="alignment"?w!==Vo(le):!1)||F.every(Z=>Vo(Z.placement)===w?Z.overflows[0]>0:!0)))return{data:{index:ae,overflows:F},reset:{placement:le}};let G=(te=F.filter(J=>J.overflows[0]<=0).sort((J,Z)=>J.overflows[1]-Z.overflows[1])[0])==null?void 0:te.placement;if(!G)switch(x){case"bestFit":{var $;const J=($=F.filter(Z=>{if(U){const pe=Vo(Z.placement);return pe===w||pe==="y"}return!0}).map(Z=>[Z.placement,Z.overflows.filter(pe=>pe>0).reduce((pe,_e)=>pe+_e,0)]).sort((Z,pe)=>Z[1]-pe[1])[0])==null?void 0:$[0];J&&(G=J);break}case"initialPlacement":G=c;break}if(a!==G)return{reset:{placement:G}}}return{}}}};function OB(n,e){return{top:n.top-e.height,right:n.right-e.width,bottom:n.bottom-e.height,left:n.left-e.width}}function NB(n){return i6.some(e=>n[e]>=0)}const v6=function(n){return n===void 0&&(n={}),{name:"hide",options:n,async fn(e){const{rects:t}=e,{strategy:i="referenceHidden",...a}=kl(n,e);switch(i){case"referenceHidden":{const s=await fg(e,{...a,elementContext:"reference"}),l=OB(s,t.reference);return{data:{referenceHiddenOffsets:l,referenceHidden:NB(l)}}}case"escaped":{const s=await fg(e,{...a,altBoundary:!0}),l=OB(s,t.floating);return{data:{escapedOffsets:l,escaped:NB(l)}}}default:return{}}}}},UB=new Set(["left","top"]);async function y6(n,e){const{placement:t,platform:i,elements:a}=n,s=await(i.isRTL==null?void 0:i.isRTL(a.floating)),l=Xl(t),c=Ud(t),d=Vo(t)==="y",p=UB.has(l)?-1:1,g=s&&d?-1:1,v=kl(e,n);let{mainAxis:_,crossAxis:x,alignmentAxis:S}=typeof v=="number"?{mainAxis:v,crossAxis:0,alignmentAxis:null}:{mainAxis:v.mainAxis||0,crossAxis:v.crossAxis||0,alignmentAxis:v.alignmentAxis};return c&&typeof S=="number"&&(x=c==="end"?S*-1:S),d?{x:x*g,y:_*p}:{x:_*p,y:x*g}}const _6=function(n){return n===void 0&&(n=0),{name:"offset",options:n,async fn(e){var t,i;const{x:a,y:s,placement:l,middlewareData:c}=e,d=await y6(e,n);return l===((t=c.offset)==null?void 0:t.placement)&&(i=c.arrow)!=null&&i.alignmentOffset?{}:{x:a+d.x,y:s+d.y,data:{...d,placement:l}}}}},x6=function(n){return n===void 0&&(n={}),{name:"shift",options:n,async fn(e){const{x:t,y:i,placement:a}=e,{mainAxis:s=!0,crossAxis:l=!1,limiter:c={fn:T=>{let{x:M,y:w}=T;return{x:M,y:w}}},...d}=kl(n,e),p={x:t,y:i},g=await fg(e,d),v=Vo(Xl(a)),_=U1(v);let x=p[_],S=p[v];if(s){const T=_==="y"?"top":"left",M=_==="y"?"bottom":"right",w=x+g[T],B=x-g[M];x=N1(w,x,B)}if(l){const T=v==="y"?"top":"left",M=v==="y"?"bottom":"right",w=S+g[T],B=S-g[M];S=N1(w,S,B)}const C=c.fn({...e,[_]:x,[v]:S});return{...C,data:{x:C.x-t,y:C.y-i,enabled:{[_]:s,[v]:l}}}}}},b6=function(n){return n===void 0&&(n={}),{options:n,fn(e){const{x:t,y:i,placement:a,rects:s,middlewareData:l}=e,{offset:c=0,mainAxis:d=!0,crossAxis:p=!0}=kl(n,e),g={x:t,y:i},v=Vo(a),_=U1(v);let x=g[_],S=g[v];const C=kl(c,e),T=typeof C=="number"?{mainAxis:C,crossAxis:0}:{mainAxis:0,crossAxis:0,...C};if(d){const B=_==="y"?"height":"width",D=s.reference[_]-s.floating[B]+T.mainAxis,P=s.reference[_]+s.reference[B]-T.mainAxis;x<D?x=D:x>P&&(x=P)}if(p){var M,w;const B=_==="y"?"width":"height",D=UB.has(Xl(a)),P=s.reference[v]-s.floating[B]+(D&&((M=l.offset)==null?void 0:M[v])||0)+(D?0:T.crossAxis),U=s.reference[v]+s.reference[B]+(D?0:((w=l.offset)==null?void 0:w[v])||0)-(D?T.crossAxis:0);S<P?S=P:S>U&&(S=U)}return{[_]:x,[v]:S}}}},A6=function(n){return n===void 0&&(n={}),{name:"size",options:n,async fn(e){var t,i;const{placement:a,rects:s,platform:l,elements:c}=e,{apply:d=()=>{},...p}=kl(n,e),g=await fg(e,p),v=Xl(a),_=Ud(a),x=Vo(a)==="y",{width:S,height:C}=s.floating;let T,M;v==="top"||v==="bottom"?(T=v,M=_===(await(l.isRTL==null?void 0:l.isRTL(c.floating))?"start":"end")?"left":"right"):(M=v,T=_==="end"?"top":"bottom");const w=C-g.top-g.bottom,B=S-g.left-g.right,D=nu(C-g[T],w),P=nu(S-g[M],B),U=!e.middlewareData.shift;let z=D,j=P;if((t=e.middlewareData.shift)!=null&&t.enabled.x&&(j=B),(i=e.middlewareData.shift)!=null&&i.enabled.y&&(z=w),U&&!_){const F=es(g.left,0),W=es(g.right,0),te=es(g.top,0),$=es(g.bottom,0);x?j=S-2*(F!==0||W!==0?F+W:es(g.left,g.right)):z=C-2*(te!==0||$!==0?te+$:es(g.top,g.bottom))}await d({...e,availableWidth:j,availableHeight:z});const L=await l.getDimensions(c.floating);return S!==L.width||C!==L.height?{reset:{rects:!0}}:{}}}};function V_(){return typeof window<"u"}function Ld(n){return LB(n)?(n.nodeName||"").toLowerCase():"#document"}function ts(n){var e;return(n==null||(e=n.ownerDocument)==null?void 0:e.defaultView)||window}function ko(n){var e;return(e=(LB(n)?n.ownerDocument:n.document)||window.document)==null?void 0:e.documentElement}function LB(n){return V_()?n instanceof Node||n instanceof ts(n).Node:!1}function io(n){return V_()?n instanceof Element||n instanceof ts(n).Element:!1}function Xo(n){return V_()?n instanceof HTMLElement||n instanceof ts(n).HTMLElement:!1}function IB(n){return!V_()||typeof ShadowRoot>"u"?!1:n instanceof ShadowRoot||n instanceof ts(n).ShadowRoot}const S6=new Set(["inline","contents"]);function hg(n){const{overflow:e,overflowX:t,overflowY:i,display:a}=ao(n);return/auto|scroll|overlay|hidden|clip/.test(e+i+t)&&!S6.has(a)}const M6=new Set(["table","td","th"]);function E6(n){return M6.has(Ld(n))}const T6=[":popover-open",":modal"];function k_(n){return T6.some(e=>{try{return n.matches(e)}catch{return!1}})}const C6=["transform","translate","scale","rotate","perspective"],R6=["transform","translate","scale","rotate","perspective","filter"],w6=["paint","layout","strict","content"];function F1(n){const e=z1(),t=io(n)?ao(n):n;return C6.some(i=>t[i]?t[i]!=="none":!1)||(t.containerType?t.containerType!=="normal":!1)||!e&&(t.backdropFilter?t.backdropFilter!=="none":!1)||!e&&(t.filter?t.filter!=="none":!1)||R6.some(i=>(t.willChange||"").includes(i))||w6.some(i=>(t.contain||"").includes(i))}function B6(n){let e=iu(n);for(;Xo(e)&&!Id(e);){if(F1(e))return e;if(k_(e))return null;e=iu(e)}return null}function z1(){return typeof CSS>"u"||!CSS.supports?!1:CSS.supports("-webkit-backdrop-filter","none")}const D6=new Set(["html","body","#document"]);function Id(n){return D6.has(Ld(n))}function ao(n){return ts(n).getComputedStyle(n)}function X_(n){return io(n)?{scrollLeft:n.scrollLeft,scrollTop:n.scrollTop}:{scrollLeft:n.scrollX,scrollTop:n.scrollY}}function iu(n){if(Ld(n)==="html")return n;const e=n.assignedSlot||n.parentNode||IB(n)&&n.host||ko(n);return IB(e)?e.host:e}function PB(n){const e=iu(n);return Id(e)?n.ownerDocument?n.ownerDocument.body:n.body:Xo(e)&&hg(e)?e:PB(e)}function dg(n,e,t){var i;e===void 0&&(e=[]),t===void 0&&(t=!0);const a=PB(n),s=a===((i=n.ownerDocument)==null?void 0:i.body),l=ts(a);if(s){const c=H1(l);return e.concat(l,l.visualViewport||[],hg(a)?a:[],c&&t?dg(c):[])}return e.concat(a,dg(a,[],t))}function H1(n){return n.parent&&Object.getPrototypeOf(n.parent)?n.frameElement:null}function FB(n){const e=ao(n);let t=parseFloat(e.width)||0,i=parseFloat(e.height)||0;const a=Xo(n),s=a?n.offsetWidth:t,l=a?n.offsetHeight:i,c=F_(t)!==s||F_(i)!==l;return c&&(t=s,i=l),{width:t,height:i,$:c}}function G1(n){return io(n)?n:n.contextElement}function Pd(n){const e=G1(n);if(!Xo(e))return Go(1);const t=e.getBoundingClientRect(),{width:i,height:a,$:s}=FB(e);let l=(s?F_(t.width):t.width)/i,c=(s?F_(t.height):t.height)/a;return(!l||!Number.isFinite(l))&&(l=1),(!c||!Number.isFinite(c))&&(c=1),{x:l,y:c}}const O6=Go(0);function zB(n){const e=ts(n);return!z1()||!e.visualViewport?O6:{x:e.visualViewport.offsetLeft,y:e.visualViewport.offsetTop}}function N6(n,e,t){return e===void 0&&(e=!1),!t||e&&t!==ts(n)?!1:e}function Lf(n,e,t,i){e===void 0&&(e=!1),t===void 0&&(t=!1);const a=n.getBoundingClientRect(),s=G1(n);let l=Go(1);e&&(i?io(i)&&(l=Pd(i)):l=Pd(n));const c=N6(s,t,i)?zB(s):Go(0);let d=(a.left+c.x)/l.x,p=(a.top+c.y)/l.y,g=a.width/l.x,v=a.height/l.y;if(s){const _=ts(s),x=i&&io(i)?ts(i):i;let S=_,C=H1(S);for(;C&&i&&x!==S;){const T=Pd(C),M=C.getBoundingClientRect(),w=ao(C),B=M.left+(C.clientLeft+parseFloat(w.paddingLeft))*T.x,D=M.top+(C.clientTop+parseFloat(w.paddingTop))*T.y;d*=T.x,p*=T.y,g*=T.x,v*=T.y,d+=B,p+=D,S=ts(C),C=H1(S)}}return G_({width:g,height:v,x:d,y:p})}function j_(n,e){const t=X_(n).scrollLeft;return e?e.left+t:Lf(ko(n)).left+t}function HB(n,e){const t=n.getBoundingClientRect(),i=t.left+e.scrollLeft-j_(n,t),a=t.top+e.scrollTop;return{x:i,y:a}}function U6(n){let{elements:e,rect:t,offsetParent:i,strategy:a}=n;const s=a==="fixed",l=ko(i),c=e?k_(e.floating):!1;if(i===l||c&&s)return t;let d={scrollLeft:0,scrollTop:0},p=Go(1);const g=Go(0),v=Xo(i);if((v||!v&&!s)&&((Ld(i)!=="body"||hg(l))&&(d=X_(i)),Xo(i))){const x=Lf(i);p=Pd(i),g.x=x.x+i.clientLeft,g.y=x.y+i.clientTop}const _=l&&!v&&!s?HB(l,d):Go(0);return{width:t.width*p.x,height:t.height*p.y,x:t.x*p.x-d.scrollLeft*p.x+g.x+_.x,y:t.y*p.y-d.scrollTop*p.y+g.y+_.y}}function L6(n){return Array.from(n.getClientRects())}function I6(n){const e=ko(n),t=X_(n),i=n.ownerDocument.body,a=es(e.scrollWidth,e.clientWidth,i.scrollWidth,i.clientWidth),s=es(e.scrollHeight,e.clientHeight,i.scrollHeight,i.clientHeight);let l=-t.scrollLeft+j_(n);const c=-t.scrollTop;return ao(i).direction==="rtl"&&(l+=es(e.clientWidth,i.clientWidth)-a),{width:a,height:s,x:l,y:c}}const GB=25;function P6(n,e){const t=ts(n),i=ko(n),a=t.visualViewport;let s=i.clientWidth,l=i.clientHeight,c=0,d=0;if(a){s=a.width,l=a.height;const g=z1();(!g||g&&e==="fixed")&&(c=a.offsetLeft,d=a.offsetTop)}const p=j_(i);if(p<=0){const g=i.ownerDocument,v=g.body,_=getComputedStyle(v),x=g.compatMode==="CSS1Compat"&&parseFloat(_.marginLeft)+parseFloat(_.marginRight)||0,S=Math.abs(i.clientWidth-v.clientWidth-x);S<=GB&&(s-=S)}else p<=GB&&(s+=p);return{width:s,height:l,x:c,y:d}}const F6=new Set(["absolute","fixed"]);function z6(n,e){const t=Lf(n,!0,e==="fixed"),i=t.top+n.clientTop,a=t.left+n.clientLeft,s=Xo(n)?Pd(n):Go(1),l=n.clientWidth*s.x,c=n.clientHeight*s.y,d=a*s.x,p=i*s.y;return{width:l,height:c,x:d,y:p}}function VB(n,e,t){let i;if(e==="viewport")i=P6(n,t);else if(e==="document")i=I6(ko(n));else if(io(e))i=z6(e,t);else{const a=zB(n);i={x:e.x-a.x,y:e.y-a.y,width:e.width,height:e.height}}return G_(i)}function kB(n,e){const t=iu(n);return t===e||!io(t)||Id(t)?!1:ao(t).position==="fixed"||kB(t,e)}function H6(n,e){const t=e.get(n);if(t)return t;let i=dg(n,[],!1).filter(c=>io(c)&&Ld(c)!=="body"),a=null;const s=ao(n).position==="fixed";let l=s?iu(n):n;for(;io(l)&&!Id(l);){const c=ao(l),d=F1(l);!d&&c.position==="fixed"&&(a=null),(s?!d&&!a:!d&&c.position==="static"&&!!a&&F6.has(a.position)||hg(l)&&!d&&kB(n,l))?i=i.filter(g=>g!==l):a=c,l=iu(l)}return e.set(n,i),i}function G6(n){let{element:e,boundary:t,rootBoundary:i,strategy:a}=n;const l=[...t==="clippingAncestors"?k_(e)?[]:H6(e,this._c):[].concat(t),i],c=l[0],d=l.reduce((p,g)=>{const v=VB(e,g,a);return p.top=es(v.top,p.top),p.right=nu(v.right,p.right),p.bottom=nu(v.bottom,p.bottom),p.left=es(v.left,p.left),p},VB(e,c,a));return{width:d.right-d.left,height:d.bottom-d.top,x:d.left,y:d.top}}function V6(n){const{width:e,height:t}=FB(n);return{width:e,height:t}}function k6(n,e,t){const i=Xo(e),a=ko(e),s=t==="fixed",l=Lf(n,!0,s,e);let c={scrollLeft:0,scrollTop:0};const d=Go(0);function p(){d.x=j_(a)}if(i||!i&&!s)if((Ld(e)!=="body"||hg(a))&&(c=X_(e)),i){const x=Lf(e,!0,s,e);d.x=x.x+e.clientLeft,d.y=x.y+e.clientTop}else a&&p();s&&!i&&a&&p();const g=a&&!i&&!s?HB(a,c):Go(0),v=l.left+c.scrollLeft-d.x-g.x,_=l.top+c.scrollTop-d.y-g.y;return{x:v,y:_,width:l.width,height:l.height}}function V1(n){return ao(n).position==="static"}function XB(n,e){if(!Xo(n)||ao(n).position==="fixed")return null;if(e)return e(n);let t=n.offsetParent;return ko(n)===t&&(t=t.ownerDocument.body),t}function jB(n,e){const t=ts(n);if(k_(n))return t;if(!Xo(n)){let a=iu(n);for(;a&&!Id(a);){if(io(a)&&!V1(a))return a;a=iu(a)}return t}let i=XB(n,e);for(;i&&E6(i)&&V1(i);)i=XB(i,e);return i&&Id(i)&&V1(i)&&!F1(i)?t:i||B6(n)||t}const X6=async function(n){const e=this.getOffsetParent||jB,t=this.getDimensions,i=await t(n.floating);return{reference:k6(n.reference,await e(n.floating),n.strategy),floating:{x:0,y:0,width:i.width,height:i.height}}};function j6(n){return ao(n).direction==="rtl"}const Y6={convertOffsetParentRelativeRectToViewportRelativeRect:U6,getDocumentElement:ko,getClippingRect:G6,getOffsetParent:jB,getElementRects:X6,getClientRects:L6,getDimensions:V6,getScale:Pd,isElement:io,isRTL:j6};function YB(n,e){return n.x===e.x&&n.y===e.y&&n.width===e.width&&n.height===e.height}function q6(n,e){let t=null,i;const a=ko(n);function s(){var c;clearTimeout(i),(c=t)==null||c.disconnect(),t=null}function l(c,d){c===void 0&&(c=!1),d===void 0&&(d=1),s();const p=n.getBoundingClientRect(),{left:g,top:v,width:_,height:x}=p;if(c||e(),!_||!x)return;const S=z_(v),C=z_(a.clientWidth-(g+_)),T=z_(a.clientHeight-(v+x)),M=z_(g),B={rootMargin:-S+"px "+-C+"px "+-T+"px "+-M+"px",threshold:es(0,nu(1,d))||1};let D=!0;function P(U){const z=U[0].intersectionRatio;if(z!==d){if(!D)return l();z?l(!1,z):i=setTimeout(()=>{l(!1,1e-7)},1e3)}z===1&&!YB(p,n.getBoundingClientRect())&&l(),D=!1}try{t=new IntersectionObserver(P,{...B,root:a.ownerDocument})}catch{t=new IntersectionObserver(P,B)}t.observe(n)}return l(!0),s}function W6(n,e,t,i){i===void 0&&(i={});const{ancestorScroll:a=!0,ancestorResize:s=!0,elementResize:l=typeof ResizeObserver=="function",layoutShift:c=typeof IntersectionObserver=="function",animationFrame:d=!1}=i,p=G1(n),g=a||s?[...p?dg(p):[],...dg(e)]:[];g.forEach(M=>{a&&M.addEventListener("scroll",t,{passive:!0}),s&&M.addEventListener("resize",t)});const v=p&&c?q6(p,t):null;let _=-1,x=null;l&&(x=new ResizeObserver(M=>{let[w]=M;w&&w.target===p&&x&&(x.unobserve(e),cancelAnimationFrame(_),_=requestAnimationFrame(()=>{var B;(B=x)==null||B.observe(e)})),t()}),p&&!d&&x.observe(p),x.observe(e));let S,C=d?Lf(n):null;d&&T();function T(){const M=Lf(n);C&&!YB(C,M)&&t(),C=M,S=requestAnimationFrame(T)}return t(),()=>{var M;g.forEach(w=>{a&&w.removeEventListener("scroll",t),s&&w.removeEventListener("resize",t)}),v?.(),(M=x)==null||M.disconnect(),x=null,d&&cancelAnimationFrame(S)}}const J6=_6,K6=x6,Q6=g6,Z6=A6,$6=v6,qB=m6,eV=b6,tV=(n,e,t)=>{const i=new Map,a={platform:Y6,...t},s={...a.platform,_c:i};return p6(n,e,{...a,platform:s})};var nV=typeof document<"u",iV=function(){},Y_=nV?H.useLayoutEffect:iV;function q_(n,e){if(n===e)return!0;if(typeof n!=typeof e)return!1;if(typeof n=="function"&&n.toString()===e.toString())return!0;let t,i,a;if(n&&e&&typeof n=="object"){if(Array.isArray(n)){if(t=n.length,t!==e.length)return!1;for(i=t;i--!==0;)if(!q_(n[i],e[i]))return!1;return!0}if(a=Object.keys(n),t=a.length,t!==Object.keys(e).length)return!1;for(i=t;i--!==0;)if(!{}.hasOwnProperty.call(e,a[i]))return!1;for(i=t;i--!==0;){const s=a[i];if(!(s==="_owner"&&n.$$typeof)&&!q_(n[s],e[s]))return!1}return!0}return n!==n&&e!==e}function WB(n){return typeof window>"u"?1:(n.ownerDocument.defaultView||window).devicePixelRatio||1}function JB(n,e){const t=WB(n);return Math.round(e*t)/t}function k1(n){const e=H.useRef(n);return Y_(()=>{e.current=n}),e}function aV(n){n===void 0&&(n={});const{placement:e="bottom",strategy:t="absolute",middleware:i=[],platform:a,elements:{reference:s,floating:l}={},transform:c=!0,whileElementsMounted:d,open:p}=n,[g,v]=H.useState({x:0,y:0,strategy:t,placement:e,middlewareData:{},isPositioned:!1}),[_,x]=H.useState(i);q_(_,i)||x(i);const[S,C]=H.useState(null),[T,M]=H.useState(null),w=H.useCallback(Z=>{Z!==U.current&&(U.current=Z,C(Z))},[]),B=H.useCallback(Z=>{Z!==z.current&&(z.current=Z,M(Z))},[]),D=s||S,P=l||T,U=H.useRef(null),z=H.useRef(null),j=H.useRef(g),L=d!=null,F=k1(d),W=k1(a),te=k1(p),$=H.useCallback(()=>{if(!U.current||!z.current)return;const Z={placement:e,strategy:t,middleware:_};W.current&&(Z.platform=W.current),tV(U.current,z.current,Z).then(pe=>{const _e={...pe,isPositioned:te.current!==!1};ae.current&&!q_(j.current,_e)&&(j.current=_e,M1.flushSync(()=>{v(_e)}))})},[_,e,t,W,te]);Y_(()=>{p===!1&&j.current.isPositioned&&(j.current.isPositioned=!1,v(Z=>({...Z,isPositioned:!1})))},[p]);const ae=H.useRef(!1);Y_(()=>(ae.current=!0,()=>{ae.current=!1}),[]),Y_(()=>{if(D&&(U.current=D),P&&(z.current=P),D&&P){if(F.current)return F.current(D,P,$);$()}},[D,P,$,F,L]);const le=H.useMemo(()=>({reference:U,floating:z,setReference:w,setFloating:B}),[w,B]),G=H.useMemo(()=>({reference:D,floating:P}),[D,P]),J=H.useMemo(()=>{const Z={position:t,left:0,top:0};if(!G.floating)return Z;const pe=JB(G.floating,g.x),_e=JB(G.floating,g.y);return c?{...Z,transform:"translate("+pe+"px, "+_e+"px)",...WB(G.floating)>=1.5&&{willChange:"transform"}}:{position:t,left:pe,top:_e}},[t,c,G.floating,g.x,g.y]);return H.useMemo(()=>({...g,update:$,refs:le,elements:G,floatingStyles:J}),[g,$,le,G,J])}const rV=n=>{function e(t){return{}.hasOwnProperty.call(t,"current")}return{name:"arrow",options:n,fn(t){const{element:i,padding:a}=typeof n=="function"?n(t):n;return i&&e(i)?i.current!=null?qB({element:i.current,padding:a}).fn(t):{}:i?qB({element:i,padding:a}).fn(t):{}}}},sV=(n,e)=>({...J6(n),options:[n,e]}),oV=(n,e)=>({...K6(n),options:[n,e]}),lV=(n,e)=>({...eV(n),options:[n,e]}),cV=(n,e)=>({...Q6(n),options:[n,e]}),uV=(n,e)=>({...Z6(n),options:[n,e]}),fV=(n,e)=>({...$6(n),options:[n,e]}),hV=(n,e)=>({...rV(n),options:[n,e]});var dV=["a","button","div","form","h2","h3","img","input","label","li","nav","ol","p","select","span","svg","ul"],pV=dV.reduce((n,e)=>{const t=ug(`Primitive.${e}`),i=H.forwardRef((a,s)=>{const{asChild:l,...c}=a,d=l?t:e;return typeof window<"u"&&(window[Symbol.for("radix-ui")]=!0),dt.jsx(d,{...c,ref:s})});return i.displayName=`Primitive.${e}`,{...n,[e]:i}},{}),mV="Arrow",KB=H.forwardRef((n,e)=>{const{children:t,width:i=10,height:a=5,...s}=n;return dt.jsx(pV.svg,{...s,ref:e,width:i,height:a,viewBox:"0 0 30 10",preserveAspectRatio:"none",children:n.asChild?t:dt.jsx("polygon",{points:"0,0 30,0 15,10"})})});KB.displayName=mV;var gV=KB,vV=["a","button","div","form","h2","h3","img","input","label","li","nav","ol","p","select","span","svg","ul"],QB=vV.reduce((n,e)=>{const t=ug(`Primitive.${e}`),i=H.forwardRef((a,s)=>{const{asChild:l,...c}=a,d=l?t:e;return typeof window<"u"&&(window[Symbol.for("radix-ui")]=!0),dt.jsx(d,{...c,ref:s})});return i.displayName=`Primitive.${e}`,{...n,[e]:i}},{});function yV(n){const[e,t]=H.useState(void 0);return tu(()=>{if(n){t({width:n.offsetWidth,height:n.offsetHeight});const i=new ResizeObserver(a=>{if(!Array.isArray(a)||!a.length)return;const s=a[0];let l,c;if("borderBoxSize"in s){const d=s.borderBoxSize,p=Array.isArray(d)?d[0]:d;l=p.inlineSize,c=p.blockSize}else l=n.offsetWidth,c=n.offsetHeight;t({width:l,height:c})});return i.observe(n,{box:"border-box"}),()=>i.unobserve(n)}else t(void 0)},[n]),e}var X1="Popper",[ZB,$B]=xB(X1),[_V,e3]=ZB(X1),t3=n=>{const{__scopePopper:e,children:t}=n,[i,a]=H.useState(null);return dt.jsx(_V,{scope:e,anchor:i,onAnchorChange:a,children:t})};t3.displayName=X1;var n3="PopperAnchor",i3=H.forwardRef((n,e)=>{const{__scopePopper:t,virtualRef:i,...a}=n,s=e3(n3,t),l=H.useRef(null),c=Of(e,l),d=H.useRef(null);return H.useEffect(()=>{const p=d.current;d.current=i?.current||l.current,p!==d.current&&s.onAnchorChange(d.current)}),i?null:dt.jsx(QB.div,{...a,ref:c})});i3.displayName=n3;var j1="PopperContent",[xV,bV]=ZB(j1),a3=H.forwardRef((n,e)=>{const{__scopePopper:t,side:i="bottom",sideOffset:a=0,align:s="center",alignOffset:l=0,arrowPadding:c=0,avoidCollisions:d=!0,collisionBoundary:p=[],collisionPadding:g=0,sticky:v="partial",hideWhenDetached:_=!1,updatePositionStrategy:x="optimized",onPlaced:S,...C}=n,T=e3(j1,t),[M,w]=H.useState(null),B=Of(e,Ee=>w(Ee)),[D,P]=H.useState(null),U=yV(D),z=U?.width??0,j=U?.height??0,L=i+(s!=="center"?"-"+s:""),F=typeof g=="number"?g:{top:0,right:0,bottom:0,left:0,...g},W=Array.isArray(p)?p:[p],te=W.length>0,$={padding:F,boundary:W.filter(SV),altBoundary:te},{refs:ae,floatingStyles:le,placement:G,isPositioned:J,middlewareData:Z}=aV({strategy:"fixed",placement:L,whileElementsMounted:(...Ee)=>W6(...Ee,{animationFrame:x==="always"}),elements:{reference:T.anchor},middleware:[sV({mainAxis:a+j,alignmentAxis:l}),d&&oV({mainAxis:!0,crossAxis:!1,limiter:v==="partial"?lV():void 0,...$}),d&&cV({...$}),uV({...$,apply:({elements:Ee,rects:Xe,availableWidth:tt,availableHeight:ot})=>{const{width:Vt,height:en}=Xe.reference,Et=Ee.floating.style;Et.setProperty("--radix-popper-available-width",`${tt}px`),Et.setProperty("--radix-popper-available-height",`${ot}px`),Et.setProperty("--radix-popper-anchor-width",`${Vt}px`),Et.setProperty("--radix-popper-anchor-height",`${en}px`)}}),D&&hV({element:D,padding:c}),MV({arrowWidth:z,arrowHeight:j}),_&&fV({strategy:"referenceHidden",...$})]}),[pe,_e]=o3(G),q=P_(S);tu(()=>{J&&q?.()},[J,q]);const ce=Z.arrow?.x,Te=Z.arrow?.y,De=Z.arrow?.centerOffset!==0,[qe,ge]=H.useState();return tu(()=>{M&&ge(window.getComputedStyle(M).zIndex)},[M]),dt.jsx("div",{ref:ae.setFloating,"data-radix-popper-content-wrapper":"",style:{...le,transform:J?le.transform:"translate(0, -200%)",minWidth:"max-content",zIndex:qe,"--radix-popper-transform-origin":[Z.transformOrigin?.x,Z.transformOrigin?.y].join(" "),...Z.hide?.referenceHidden&&{visibility:"hidden",pointerEvents:"none"}},dir:n.dir,children:dt.jsx(xV,{scope:t,placedSide:pe,onArrowChange:P,arrowX:ce,arrowY:Te,shouldHideArrow:De,children:dt.jsx(QB.div,{"data-side":pe,"data-align":_e,...C,ref:B,style:{...C.style,animation:J?void 0:"none"}})})})});a3.displayName=j1;var r3="PopperArrow",AV={top:"bottom",right:"left",bottom:"top",left:"right"},s3=H.forwardRef(function(e,t){const{__scopePopper:i,...a}=e,s=bV(r3,i),l=AV[s.placedSide];return dt.jsx("span",{ref:s.onArrowChange,style:{position:"absolute",left:s.arrowX,top:s.arrowY,[l]:0,transformOrigin:{top:"",right:"0 0",bottom:"center 0",left:"100% 0"}[s.placedSide],transform:{top:"translateY(100%)",right:"translateY(50%) rotate(90deg) translateX(-50%)",bottom:"rotate(180deg)",left:"translateY(50%) rotate(-90deg) translateX(50%)"}[s.placedSide],visibility:s.shouldHideArrow?"hidden":void 0},children:dt.jsx(gV,{...a,ref:t,style:{...a.style,display:"block"}})})});s3.displayName=r3;function SV(n){return n!==null}var MV=n=>({name:"transformOrigin",options:n,fn(e){const{placement:t,rects:i,middlewareData:a}=e,l=a.arrow?.centerOffset!==0,c=l?0:n.arrowWidth,d=l?0:n.arrowHeight,[p,g]=o3(t),v={start:"0%",center:"50%",end:"100%"}[g],_=(a.arrow?.x??0)+c/2,x=(a.arrow?.y??0)+d/2;let S="",C="";return p==="bottom"?(S=l?v:`${_}px`,C=`${-d}px`):p==="top"?(S=l?v:`${_}px`,C=`${i.floating.height+d}px`):p==="right"?(S=`${-d}px`,C=l?v:`${x}px`):p==="left"&&(S=`${i.floating.width+d}px`,C=l?v:`${x}px`),{data:{x:S,y:C}}}});function o3(n){const[e,t="center"]=n.split("-");return[e,t]}var EV=t3,TV=i3,CV=a3,RV=s3,wV=["a","button","div","form","h2","h3","img","input","label","li","nav","ol","p","select","span","svg","ul"],BV=wV.reduce((n,e)=>{const t=ug(`Primitive.${e}`),i=H.forwardRef((a,s)=>{const{asChild:l,...c}=a,d=l?t:e;return typeof window<"u"&&(window[Symbol.for("radix-ui")]=!0),dt.jsx(d,{...c,ref:s})});return i.displayName=`Primitive.${e}`,{...n,[e]:i}},{});function DV(n,e){return H.useReducer((t,i)=>e[t][i]??t,n)}var l3=n=>{const{present:e,children:t}=n,i=OV(e),a=typeof t=="function"?t({present:i.isPresent}):H.Children.only(t),s=Of(i.ref,NV(a));return typeof t=="function"||i.isPresent?H.cloneElement(a,{ref:s}):null};l3.displayName="Presence";function OV(n){const[e,t]=H.useState(),i=H.useRef(null),a=H.useRef(n),s=H.useRef("none"),l=n?"mounted":"unmounted",[c,d]=DV(l,{mounted:{UNMOUNT:"unmounted",ANIMATION_OUT:"unmountSuspended"},unmountSuspended:{MOUNT:"mounted",ANIMATION_END:"unmounted"},unmounted:{MOUNT:"mounted"}});return H.useEffect(()=>{const p=W_(i.current);s.current=c==="mounted"?p:"none"},[c]),tu(()=>{const p=i.current,g=a.current;if(g!==n){const _=s.current,x=W_(p);n?d("MOUNT"):x==="none"||p?.display==="none"?d("UNMOUNT"):d(g&&_!==x?"ANIMATION_OUT":"UNMOUNT"),a.current=n}},[n,d]),tu(()=>{if(e){let p;const g=e.ownerDocument.defaultView??window,v=x=>{const C=W_(i.current).includes(CSS.escape(x.animationName));if(x.target===e&&C&&(d("ANIMATION_END"),!a.current)){const T=e.style.animationFillMode;e.style.animationFillMode="forwards",p=g.setTimeout(()=>{e.style.animationFillMode==="forwards"&&(e.style.animationFillMode=T)})}},_=x=>{x.target===e&&(s.current=W_(i.current))};return e.addEventListener("animationstart",_),e.addEventListener("animationcancel",v),e.addEventListener("animationend",v),()=>{g.clearTimeout(p),e.removeEventListener("animationstart",_),e.removeEventListener("animationcancel",v),e.removeEventListener("animationend",v)}}else d("ANIMATION_END")},[e,d]),{isPresent:["mounted","unmountSuspended"].includes(c),ref:H.useCallback(p=>{i.current=p?getComputedStyle(p):null,t(p)},[])}}function W_(n){return n?.animationName||"none"}function NV(n){let e=Object.getOwnPropertyDescriptor(n.props,"ref")?.get,t=e&&"isReactWarning"in e&&e.isReactWarning;return t?n.ref:(e=Object.getOwnPropertyDescriptor(n,"ref")?.get,t=e&&"isReactWarning"in e&&e.isReactWarning,t?n.props.ref:n.props.ref||n.ref)}var UV=Db[" useInsertionEffect ".trim().toString()]||tu;function LV({prop:n,defaultProp:e,onChange:t=()=>{},caller:i}){const[a,s,l]=IV({defaultProp:e,onChange:t}),c=n!==void 0,d=c?n:a;{const g=H.useRef(n!==void 0);H.useEffect(()=>{const v=g.current;v!==c&&console.warn(`${i} is changing from ${v?"controlled":"uncontrolled"} to ${c?"controlled":"uncontrolled"}. Components should not switch from controlled to uncontrolled (or vice versa). Decide between using a controlled or uncontrolled value for the lifetime of the component.`),g.current=c},[c,i])}const p=H.useCallback(g=>{if(c){const v=PV(g)?g(n):g;v!==n&&l.current?.(v)}else s(g)},[c,n,s,l]);return[d,p]}function IV({defaultProp:n,onChange:e}){const[t,i]=H.useState(n),a=H.useRef(t),s=H.useRef(e);return UV(()=>{s.current=e},[e]),H.useEffect(()=>{a.current!==t&&(s.current?.(t),a.current=t)},[t,a]),[t,i,s]}function PV(n){return typeof n=="function"}var FV=["a","button","div","form","h2","h3","img","input","label","li","nav","ol","p","select","span","svg","ul"],zV=FV.reduce((n,e)=>{const t=ug(`Primitive.${e}`),i=H.forwardRef((a,s)=>{const{asChild:l,...c}=a,d=l?t:e;return typeof window<"u"&&(window[Symbol.for("radix-ui")]=!0),dt.jsx(d,{...c,ref:s})});return i.displayName=`Primitive.${e}`,{...n,[e]:i}},{}),HV=Object.freeze({position:"absolute",border:0,width:1,height:1,padding:0,margin:-1,overflow:"hidden",clip:"rect(0, 0, 0, 0)",whiteSpace:"nowrap",wordWrap:"normal"}),GV="VisuallyHidden",c3=H.forwardRef((n,e)=>dt.jsx(zV.span,{...n,ref:e,style:{...HV,...n.style}}));c3.displayName=GV;var VV=c3,[J_]=xB("Tooltip",[$B]),K_=$B(),u3="TooltipProvider",kV=700,Y1="tooltip.open",[XV,q1]=J_(u3),f3=n=>{const{__scopeTooltip:e,delayDuration:t=kV,skipDelayDuration:i=300,disableHoverableContent:a=!1,children:s}=n,l=H.useRef(!0),c=H.useRef(!1),d=H.useRef(0);return H.useEffect(()=>{const p=d.current;return()=>window.clearTimeout(p)},[]),dt.jsx(XV,{scope:e,isOpenDelayedRef:l,delayDuration:t,onOpen:H.useCallback(()=>{window.clearTimeout(d.current),l.current=!1},[]),onClose:H.useCallback(()=>{window.clearTimeout(d.current),d.current=window.setTimeout(()=>l.current=!0,i)},[i]),isPointerInTransitRef:c,onPointerInTransitChange:H.useCallback(p=>{c.current=p},[]),disableHoverableContent:a,children:s})};f3.displayName=u3;var pg="Tooltip",[jV,Q_]=J_(pg),h3=n=>{const{__scopeTooltip:e,children:t,open:i,defaultOpen:a,onOpenChange:s,disableHoverableContent:l,delayDuration:c}=n,d=q1(pg,n.__scopeTooltip),p=K_(e),[g,v]=H.useState(null),_=n6(),x=H.useRef(0),S=l??d.disableHoverableContent,C=c??d.delayDuration,T=H.useRef(!1),[M,w]=LV({prop:i,defaultProp:a??!1,onChange:z=>{z?(d.onOpen(),document.dispatchEvent(new CustomEvent(Y1))):d.onClose(),s?.(z)},caller:pg}),B=H.useMemo(()=>M?T.current?"delayed-open":"instant-open":"closed",[M]),D=H.useCallback(()=>{window.clearTimeout(x.current),x.current=0,T.current=!1,w(!0)},[w]),P=H.useCallback(()=>{window.clearTimeout(x.current),x.current=0,w(!1)},[w]),U=H.useCallback(()=>{window.clearTimeout(x.current),x.current=window.setTimeout(()=>{T.current=!0,w(!0),x.current=0},C)},[C,w]);return H.useEffect(()=>()=>{x.current&&(window.clearTimeout(x.current),x.current=0)},[]),dt.jsx(EV,{...p,children:dt.jsx(jV,{scope:e,contentId:_,open:M,stateAttribute:B,trigger:g,onTriggerChange:v,onTriggerEnter:H.useCallback(()=>{d.isOpenDelayedRef.current?U():D()},[d.isOpenDelayedRef,U,D]),onTriggerLeave:H.useCallback(()=>{S?P():(window.clearTimeout(x.current),x.current=0)},[P,S]),onOpen:D,onClose:P,disableHoverableContent:S,children:t})})};h3.displayName=pg;var W1="TooltipTrigger",d3=H.forwardRef((n,e)=>{const{__scopeTooltip:t,...i}=n,a=Q_(W1,t),s=q1(W1,t),l=K_(t),c=H.useRef(null),d=Of(e,c,a.onTriggerChange),p=H.useRef(!1),g=H.useRef(!1),v=H.useCallback(()=>p.current=!1,[]);return H.useEffect(()=>()=>document.removeEventListener("pointerup",v),[v]),dt.jsx(TV,{asChild:!0,...l,children:dt.jsx(BV.button,{"aria-describedby":a.open?a.contentId:void 0,"data-state":a.stateAttribute,...i,ref:d,onPointerMove:Vl(n.onPointerMove,_=>{_.pointerType!=="touch"&&!g.current&&!s.isPointerInTransitRef.current&&(a.onTriggerEnter(),g.current=!0)}),onPointerLeave:Vl(n.onPointerLeave,()=>{a.onTriggerLeave(),g.current=!1}),onPointerDown:Vl(n.onPointerDown,()=>{a.open&&a.onClose(),p.current=!0,document.addEventListener("pointerup",v,{once:!0})}),onFocus:Vl(n.onFocus,()=>{p.current||a.onOpen()}),onBlur:Vl(n.onBlur,a.onClose),onClick:Vl(n.onClick,a.onClose)})})});d3.displayName=W1;var YV="TooltipPortal",[gW,qV]=J_(YV,{forceMount:void 0}),Fd="TooltipContent",p3=H.forwardRef((n,e)=>{const t=qV(Fd,n.__scopeTooltip),{forceMount:i=t.forceMount,side:a="top",...s}=n,l=Q_(Fd,n.__scopeTooltip);return dt.jsx(l3,{present:i||l.open,children:l.disableHoverableContent?dt.jsx(m3,{side:a,...s,ref:e}):dt.jsx(WV,{side:a,...s,ref:e})})}),WV=H.forwardRef((n,e)=>{const t=Q_(Fd,n.__scopeTooltip),i=q1(Fd,n.__scopeTooltip),a=H.useRef(null),s=Of(e,a),[l,c]=H.useState(null),{trigger:d,onClose:p}=t,g=a.current,{onPointerInTransitChange:v}=i,_=H.useCallback(()=>{c(null),v(!1)},[v]),x=H.useCallback((S,C)=>{const T=S.currentTarget,M={x:S.clientX,y:S.clientY},w=ZV(M,T.getBoundingClientRect()),B=$V(M,w),D=e7(C.getBoundingClientRect()),P=n7([...B,...D]);c(P),v(!0)},[v]);return H.useEffect(()=>()=>_(),[_]),H.useEffect(()=>{if(d&&g){const S=T=>x(T,g),C=T=>x(T,d);return d.addEventListener("pointerleave",S),g.addEventListener("pointerleave",C),()=>{d.removeEventListener("pointerleave",S),g.removeEventListener("pointerleave",C)}}},[d,g,x,_]),H.useEffect(()=>{if(l){const S=C=>{const T=C.target,M={x:C.clientX,y:C.clientY},w=d?.contains(T)||g?.contains(T),B=!t7(M,l);w?_():B&&(_(),p())};return document.addEventListener("pointermove",S),()=>document.removeEventListener("pointermove",S)}},[d,g,l,p,_]),dt.jsx(m3,{...n,ref:s})}),[JV,KV]=J_(pg,{isInside:!1}),QV=H9("TooltipContent"),m3=H.forwardRef((n,e)=>{const{__scopeTooltip:t,children:i,"aria-label":a,onEscapeKeyDown:s,onPointerDownOutside:l,...c}=n,d=Q_(Fd,t),p=K_(t),{onClose:g}=d;return H.useEffect(()=>(document.addEventListener(Y1,g),()=>document.removeEventListener(Y1,g)),[g]),H.useEffect(()=>{if(d.trigger){const v=_=>{_.target?.contains(d.trigger)&&g()};return window.addEventListener("scroll",v,{capture:!0}),()=>window.removeEventListener("scroll",v,{capture:!0})}},[d.trigger,g]),dt.jsx(EB,{asChild:!0,disableOutsidePointerEvents:!1,onEscapeKeyDown:s,onPointerDownOutside:l,onFocusOutside:v=>v.preventDefault(),onDismiss:g,children:dt.jsxs(CV,{"data-state":d.stateAttribute,...p,...c,ref:e,style:{...c.style,"--radix-tooltip-content-transform-origin":"var(--radix-popper-transform-origin)","--radix-tooltip-content-available-width":"var(--radix-popper-available-width)","--radix-tooltip-content-available-height":"var(--radix-popper-available-height)","--radix-tooltip-trigger-width":"var(--radix-popper-anchor-width)","--radix-tooltip-trigger-height":"var(--radix-popper-anchor-height)"},children:[dt.jsx(QV,{children:i}),dt.jsx(JV,{scope:t,isInside:!0,children:dt.jsx(VV,{id:d.contentId,role:"tooltip",children:a||i})})]})})});p3.displayName=Fd;var g3="TooltipArrow",v3=H.forwardRef((n,e)=>{const{__scopeTooltip:t,...i}=n,a=K_(t);return KV(g3,t).isInside?null:dt.jsx(RV,{...a,...i,ref:e})});v3.displayName=g3;function ZV(n,e){const t=Math.abs(e.top-n.y),i=Math.abs(e.bottom-n.y),a=Math.abs(e.right-n.x),s=Math.abs(e.left-n.x);switch(Math.min(t,i,a,s)){case s:return"left";case a:return"right";case t:return"top";case i:return"bottom";default:throw new Error("unreachable")}}function $V(n,e,t=5){const i=[];switch(e){case"top":i.push({x:n.x-t,y:n.y+t},{x:n.x+t,y:n.y+t});break;case"bottom":i.push({x:n.x-t,y:n.y-t},{x:n.x+t,y:n.y-t});break;case"left":i.push({x:n.x+t,y:n.y-t},{x:n.x+t,y:n.y+t});break;case"right":i.push({x:n.x-t,y:n.y-t},{x:n.x-t,y:n.y+t});break}return i}function e7(n){const{top:e,right:t,bottom:i,left:a}=n;return[{x:a,y:e},{x:t,y:e},{x:t,y:i},{x:a,y:i}]}function t7(n,e){const{x:t,y:i}=n;let a=!1;for(let s=0,l=e.length-1;s<e.length;l=s++){const c=e[s],d=e[l],p=c.x,g=c.y,v=d.x,_=d.y;g>i!=_>i&&t<(v-p)*(i-g)/(_-g)+p&&(a=!a)}return a}function n7(n){const e=n.slice();return e.sort((t,i)=>t.x<i.x?-1:t.x>i.x?1:t.y<i.y?-1:t.y>i.y?1:0),i7(e)}function i7(n){if(n.length<=1)return n.slice();const e=[];for(let i=0;i<n.length;i++){const a=n[i];for(;e.length>=2;){const s=e[e.length-1],l=e[e.length-2];if((s.x-l.x)*(a.y-l.y)>=(s.y-l.y)*(a.x-l.x))e.pop();else break}e.push(a)}e.pop();const t=[];for(let i=n.length-1;i>=0;i--){const a=n[i];for(;t.length>=2;){const s=t[t.length-1],l=t[t.length-2];if((s.x-l.x)*(a.y-l.y)>=(s.y-l.y)*(a.x-l.x))t.pop();else break}t.push(a)}return t.pop(),e.length===1&&t.length===1&&e[0].x===t[0].x&&e[0].y===t[0].y?e:e.concat(t)}var a7=f3,r7=h3,s7=d3,o7=p3,l7=v3;function c7(n,e){if(n==null)return{};var t={};for(var i in n)if({}.hasOwnProperty.call(n,i)){if(e.indexOf(i)!==-1)continue;t[i]=n[i]}return t}function qn(n,e){if(n==null)return{};var t,i,a=c7(n,e);if(Object.getOwnPropertySymbols){var s=Object.getOwnPropertySymbols(n);for(i=0;i<s.length;i++)t=s[i],e.indexOf(t)===-1&&{}.propertyIsEnumerable.call(n,t)&&(a[t]=n[t])}return a}let ki=(function(n){return n[n.UNSUPPORTED_INPUT=0]="UNSUPPORTED_INPUT",n[n.NO_COMPONENT_FOR_TYPE=1]="NO_COMPONENT_FOR_TYPE",n[n.UNKNOWN_INPUT=2]="UNKNOWN_INPUT",n[n.DUPLICATE_KEYS=3]="DUPLICATE_KEYS",n[n.ALREADY_REGISTERED_TYPE=4]="ALREADY_REGISTERED_TYPE",n[n.CLIPBOARD_ERROR=5]="CLIPBOARD_ERROR",n[n.THEME_ERROR=6]="THEME_ERROR",n[n.PATH_DOESNT_EXIST=7]="PATH_DOESNT_EXIST",n[n.INPUT_TYPE_OVERRIDE=8]="INPUT_TYPE_OVERRIDE",n[n.EMPTY_KEY=9]="EMPTY_KEY",n})({});const u7={[ki.UNSUPPORTED_INPUT]:(n,e)=>[`An input with type \`${n}\` input was found at path \`${e}\` but it's not supported yet.`],[ki.NO_COMPONENT_FOR_TYPE]:(n,e)=>[`Type \`${n}\` found at path \`${e}\` can't be displayed in panel because no component supports it yet.`],[ki.UNKNOWN_INPUT]:(n,e)=>[`input at path \`${n}\` is not recognized.`,e],[ki.DUPLICATE_KEYS]:(n,e,t)=>[`Key \`${n}\` of path \`${e}\` already exists at path \`${t}\`. Even nested keys need to be unique. Rename one of the keys.`],[ki.ALREADY_REGISTERED_TYPE]:n=>[`Type ${n} has already been registered. You can't register a component with the same type.`],[ki.CLIPBOARD_ERROR]:n=>["Error copying the value",n],[ki.THEME_ERROR]:(n,e)=>[`Error accessing the theme \`${n}.${e}\` value.`],[ki.PATH_DOESNT_EXIST]:n=>[`Error getting the value at path \`${n}\`. There is probably an error in your \`render\` function.`],[ki.INPUT_TYPE_OVERRIDE]:(n,e,t)=>[`Input at path \`${n}\` already exists with type: \`${e}\`. Its type cannot be overridden with type \`${t}\`.`],[ki.EMPTY_KEY]:()=>["Keys can not be empty, if you want to hide a label use whitespace."]};function y3(n,e,...t){const i=u7[e],[a,...s]=i(...t);console[n]("LEVA: "+a,...s)}const jl=y3.bind(null,"warn"),f7=y3.bind(null,"log"),h7=["value"],d7=["schema"],p7=["value"],_3=[],If={};function x3(n){let{value:e}=n,t=qn(n,h7);for(let i of _3){const a=i(e,t);if(a)return a}}function Yl(n,e){let{schema:t}=e,i=qn(e,d7);if(n in If){jl(ki.ALREADY_REGISTERED_TYPE,n);return}_3.push((a,s)=>t(a,s)&&n),If[n]=i}function vW(n){return n}function J1(n,e,t,i){const{normalize:a}=If[n];if(a)return a(e,t,i);if(typeof e!="object"||!("value"in e))return{value:e};const{value:s}=e,l=qn(e,p7);return{value:s,settings:l}}function m7(n,e,t,i,a,s){const{sanitize:l}=If[n];return l?l(e,t,i,a,s):e}function b3(n,e,t){const{format:i}=If[n];return i?i(e,t):e}function g7(n,e){if(typeof n!="object"||!n)return n;var t=n[Symbol.toPrimitive];if(t!==void 0){var i=t.call(n,e);if(typeof i!="object")return i;throw new TypeError("@@toPrimitive must return a primitive value.")}return(e==="string"?String:Number)(n)}function v7(n){var e=g7(n,"string");return typeof e=="symbol"?e:e+""}function y7(n,e,t){return(e=v7(e))in n?Object.defineProperty(n,e,{value:t,enumerable:!0,configurable:!0,writable:!0}):n[e]=t,n}function A3(n,e){var t=Object.keys(n);if(Object.getOwnPropertySymbols){var i=Object.getOwnPropertySymbols(n);e&&(i=i.filter(function(a){return Object.getOwnPropertyDescriptor(n,a).enumerable})),t.push.apply(t,i)}return t}function $t(n){for(var e=1;e<arguments.length;e++){var t=arguments[e]!=null?arguments[e]:{};e%2?A3(Object(t),!0).forEach(function(i){y7(n,i,t[i])}):Object.getOwnPropertyDescriptors?Object.defineProperties(n,Object.getOwnPropertyDescriptors(t)):A3(Object(t)).forEach(function(i){Object.defineProperty(n,i,Object.getOwnPropertyDescriptor(t,i))})}return n}const au=(n,e,t)=>n>t?t:n<e?e:n,_7=n=>{if(n===""||typeof n=="number")return n;try{const e=zd(n);if(!isNaN(e))return e}catch{}return parseFloat(n)},x7=Math.log(10);function S3(n){let e=Math.abs(+String(n).replace(".",""));if(e===0)return .01;for(;e!==0&&e%10===0;)e/=10;const t=Math.floor(Math.log(e)/x7)+1,i=Math.floor(Math.log10(Math.abs(n))),a=Math.pow(10,i-t);return Math.max(a,.001)}const Z_=(n,e,t)=>t===e?0:(au(n,e,t)-e)/(t-e),$_=(n,e,t)=>n*(t-e)+e,b7=()=>"_"+Math.random().toString(36).substr(2,9),M3=/\(([^\(\)]+)\)/,E3=/(-?\d+(?:\.\d+)?)\s*\^\s*(-?\d+(?:\.\d+)?)/,T3=/(-?\d+(?:\.\d+)?)\s*([*/])\s*(-?\d+(?:\.\d+)?)/,C3=/(-?\d+(?:\.\d+)?)\s*([+-])\s*(-?\d+(?:\.\d+)?)/;function zd(n){return n=n.replace(/\s+/g,""),M3.test(n)?zd(n.replace(M3,(e,t)=>zd(t).toString())):E3.test(n)?zd(n.replace(E3,(e,t,i)=>Math.pow(Number(t),Number(i)).toString())):T3.test(n)?zd(n.replace(T3,(e,t,i,a)=>i==="*"?(Number(t)*Number(a)).toString():Number(a)===0?(()=>{throw new Error("Division by zero")})():(Number(t)/Number(a)).toString())):C3.test(n)?zd(n.replace(C3,(e,t,i,a)=>i==="+"?(Number(t)+Number(a)).toString():(Number(t)-Number(a)).toString())):Number(n)}function A7(n,e){const t=$t({},n);return e.forEach(i=>i in n&&delete t[i]),t}function S7(n,e){return n.reduce((t,i,a)=>Object.assign(t,{[e[a]]:i}),{})}function R3(n){return Object.prototype.toString.call(n)==="[object Object]"}const M7=n=>R3(n)&&Object.keys(n).length===0;let ru=(function(n){return n.BUTTON="BUTTON",n.BUTTON_GROUP="BUTTON_GROUP",n.MONITOR="MONITOR",n.FOLDER="FOLDER",n})({}),ql=(function(n){return n.SELECT="SELECT",n.IMAGE="IMAGE",n.NUMBER="NUMBER",n.COLOR="COLOR",n.STRING="STRING",n.BOOLEAN="BOOLEAN",n.INTERVAL="INTERVAL",n.VECTOR3D="VECTOR3D",n.VECTOR2D="VECTOR2D",n})({});const E7=["type","__customInput"],T7=["render","label","optional","order","disabled","hint","onChange","onEditStart","onEditEnd","transient"],C7=["type"];function w3(n,e,t={},i){var a,s;if(typeof n!="object"||Array.isArray(n))return{type:i,input:n,options:$t({key:e,label:e,optional:!1,disabled:!1,order:0},t)};if("__customInput"in n){const{type:P,__customInput:U}=n,z=qn(n,E7);return w3(U,e,z,P)}const{render:l,label:c,optional:d,order:p=0,disabled:g,hint:v,onChange:_,onEditStart:x,onEditEnd:S,transient:C}=n,T=qn(n,T7),M=$t({render:l,key:e,label:c??e,hint:v,transient:C??!!_,onEditStart:x,onEditEnd:S,disabled:g,optional:d,order:p},t);let{type:w}=T,B=qn(T,C7);if(w=i??w,w in ru)return{type:w,input:B,options:M};let D;return i&&R3(B)&&"value"in B?D=B.value:D=M7(B)?void 0:B,{type:w,input:D,options:$t($t({},M),{},{onChange:_,optional:(a=M.optional)!==null&&a!==void 0?a:!1,disabled:(s=M.disabled)!==null&&s!==void 0?s:!1})}}function R7(n,e,t,i){const a=w3(n,e),{type:s,input:l,options:c}=a;if(s)return s in ru?a:{type:s,input:J1(s,l,t,i),options:c};let d=x3(l);return d?{type:d,input:J1(d,l,t,i),options:c}:(d=x3({value:l}),d?{type:d,input:J1(d,{value:l},t,i),options:c}:!1)}function B3(n,e,t,i,a){const{value:s,type:l,settings:c}=n;n.value=D3({type:l,value:s,settings:c},e,t,i),n.fromPanel=a}const w7=function(e,t,i){this.type="LEVA_ERROR",this.message="LEVA: "+e,this.previousValue=t,this.error=i};function D3({type:n,value:e,settings:t},i,a,s){const l=n!=="SELECT"&&typeof i=="function"?i(e):i;let c;try{c=m7(n,l,t,e,a,s)}catch(d){throw new w7(`The value \`${i}\` did not result in a correct value.`,e,d)}return sg(c,e)?e:c}const O3=(n,e,t=!1)=>{let i=0;return function(){const a=arguments,s=t&&!i,l=()=>n.apply(this,a);window.clearTimeout(i),i=window.setTimeout(l,e),s&&l()}},N3=n=>n.shiftKey?5:n.altKey?1/5:1,B7=["value"],D7=["min","max"],O7=n=>{if(typeof n=="number")return!0;if(typeof n=="string"){const e=parseFloat(n);return isNaN(e)?!1:n.substring((""+e).length).trim().length<4}return!1},U3=(n,{min:e=-1/0,max:t=1/0,suffix:i})=>{const a=parseFloat(n);if(n===""||isNaN(a))throw Error("Invalid number");const s=au(a,e,t);return i?s+i:s},N7=(n,{pad:e=0,suffix:t})=>{const i=parseFloat(n).toFixed(e);return t?i+t:i},L3=n=>{let{value:e}=n,t=qn(n,B7);const{min:i=-1/0,max:a=1/0}=t,s=qn(t,D7);let l=parseFloat(e);const c=typeof e=="string"?e.substring((""+l).length):void 0;l=au(l,i,a);let d=t.step;d||(Number.isFinite(i)?Number.isFinite(a)?d=+(Math.abs(a-i)/100).toPrecision(1):d=+(Math.abs(l-i)/100).toPrecision(1):Number.isFinite(a)&&(d=+(Math.abs(a-l)/100).toPrecision(1)));const p=d?S3(d)*10:S3(l);d=d||p/10;const g=Math.round(au(Math.log10(1/p),0,2));return{value:c?l+c:l,settings:$t({initialValue:l,step:d,pad:g,min:i,max:a,suffix:c},s)}},I3=(n,{step:e,initialValue:t})=>{const i=Math.round((n-t)/e);return t+i*e};var P3=Object.freeze({__proto__:null,schema:O7,sanitize:U3,format:N7,normalize:L3,sanitizeStep:I3});function Ci(){return Ci=Object.assign?Object.assign.bind():function(n){for(var e=1;e<arguments.length;e++){var t=arguments[e];for(var i in t)({}).hasOwnProperty.call(t,i)&&(n[i]=t[i])}return n},Ci.apply(null,arguments)}const F3=H.createContext({});function Ga(){return H.useContext(F3)}const K1=H.createContext(null),z3=H.createContext(null),H3=H.createContext(null);function mg(){return H.useContext(z3)}function U7(){return H.useContext(H3)}const G3=()=>({colors:{elevation1:"#292d39",elevation2:"#181c20",elevation3:"#373c4b",accent1:"#0066dc",accent2:"#007bff",accent3:"#3c93ff",highlight1:"#535760",highlight2:"#8c92a4",highlight3:"#fefefe",vivid1:"#ffcc00",folderWidgetColor:"$highlight2",folderTextColor:"$highlight3",toolTipBackground:"$highlight3",toolTipText:"$elevation2"},radii:{xs:"2px",sm:"3px",lg:"10px"},space:{xs:"3px",sm:"6px",md:"10px",rowGap:"7px",colGap:"7px"},fonts:{mono:"ui-monospace, SFMono-Regular, Menlo, 'Roboto Mono', monospace",sans:"system-ui, sans-serif"},fontSizes:{root:"11px",toolTip:"$root"},sizes:{rootWidth:"280px",controlWidth:"160px",numberInputMinWidth:"38px",scrubberWidth:"8px",scrubberHeight:"16px",rowHeight:"24px",folderTitleHeight:"20px",checkboxSize:"16px",joystickWidth:"100px",joystickHeight:"100px",colorPickerWidth:"$controlWidth",colorPickerHeight:"100px",imagePreviewWidth:"$controlWidth",imagePreviewHeight:"100px",monitorHeight:"60px",titleBarHeight:"39px"},shadows:{level1:"0 0 9px 0 #00000088",level2:"0 4px 14px #00000033"},borderWidths:{root:"0px",input:"1px",focus:"1px",hover:"1px",active:"1px",folder:"1px"},fontWeights:{label:"normal",folder:"normal",button:"normal"}});function ex(n,e){const[t,i]=n.split(" "),a={};return t!=="none"&&(a.boxShadow=`${e.inset?"inset ":""}0 0 0 $borderWidths${[e.key]} $colors${t!=="default"&&t||e.borderColor}`),i&&(a.backgroundColor=i),a}const gg={$inputStyle:()=>n=>ex(n,{key:"$input",borderColor:"$highlight1",inset:!0}),$focusStyle:()=>n=>ex(n,{key:"$focus",borderColor:"$accent2"}),$hoverStyle:()=>n=>ex(n,{key:"$hover",borderColor:"$accent1",inset:!0}),$activeStyle:()=>n=>ex(n,{key:"$active",borderColor:"$accent1",inset:!0})},vg=P9({prefix:"leva",theme:G3(),utils:$t($t({},gg),{},{$flex:()=>({display:"flex",alignItems:"center"}),$flexCenter:()=>({display:"flex",alignItems:"center",justifyContent:"center"}),$reset:()=>({outline:"none",fontSize:"inherit",fontWeight:"inherit",color:"inherit",fontFamily:"inherit",border:"none",backgroundColor:"transparent",appearance:"none"}),$draggable:()=>({touchAction:"none",WebkitUserDrag:"none",userSelect:"none"}),$focus:n=>({"&:focus":gg.$focusStyle()(n)}),$focusWithin:n=>({"&:focus-within":gg.$focusStyle()(n)}),$hover:n=>({"&:hover":gg.$hoverStyle()(n)}),$active:n=>({"&:active":gg.$activeStyle()(n)})})}),zt=vg.styled;vg.css;const L7=vg.createTheme,I7=vg.globalCss;vg.keyframes;const P7=I7({".leva__panel__dragged":{WebkitUserDrag:"none",userSelect:"none",input:{userSelect:"none"},"*":{cursor:"ew-resize !important"}}});function F7(n){const e=G3();if(!n)return{theme:e,className:""};Object.keys(n).forEach(i=>{Object.assign(e[i],n[i])});const t=L7(e);return{theme:e,className:t.className}}function Wl(n,e){const{theme:t}=H.useContext(K1);if(!(n in t)||!(e in t[n]))return jl(ki.THEME_ERROR,n,e),"";let i=e;for(;;){let a=t[n][i];if(typeof a=="string"&&a.charAt(0)==="$")i=a.substr(1);else return a}}const V3=zt("input",{$reset:"",padding:"0 $sm",width:0,minWidth:0,flex:1,height:"100%",variants:{levaType:{number:{textAlign:"right"}},as:{textarea:{padding:"$sm"}}}}),k3=zt("div",{$draggable:"",height:"100%",$flexCenter:"",position:"relative",padding:"0 $xs",fontSize:"0.8em",opacity:.8,cursor:"default",touchAction:"none",[`& + ${V3}`]:{paddingLeft:0}}),z7=zt(k3,{cursor:"ew-resize",marginRight:"-$xs",textTransform:"uppercase",opacity:.3,"&:hover":{opacity:1},variants:{dragging:{true:{backgroundColor:"$accent2",opacity:1}}}}),H7=zt("div",{$flex:"",position:"relative",borderRadius:"$sm",overflow:"hidden",color:"inherit",height:"$rowHeight",backgroundColor:"$elevation3",$inputStyle:"$elevation1",$hover:"",$focusWithin:"",variants:{textArea:{true:{height:"auto"}}}}),G7=["innerLabel","value","onUpdate","onChange","onKeyDown","type","id","inputType","rows"],V7=["onUpdate"];function Q1(n){let{innerLabel:e,value:t,onUpdate:i,onChange:a,onKeyDown:s,type:l,id:c,inputType:d="text",rows:p=0}=n,g=qn(n,G7);const{id:v,emitOnEditStart:_,emitOnEditEnd:x,disabled:S}=Ga(),C=c||v,T=H.useRef(null),M=p>0,w=M?"textarea":"input",B=H.useCallback(U=>z=>{const j=z.currentTarget.value;U(j)},[]);ee.useEffect(()=>{const U=T.current,z=B(j=>{i(j),x()});return U?.addEventListener("blur",z),()=>U?.removeEventListener("blur",z)},[B,i,x]);const D=H.useCallback(U=>{U.key==="Enter"&&B(i)(U)},[B,i]),P=Object.assign({as:w},M?{rows:p}:{},g);return ee.createElement(H7,{textArea:M},e&&typeof e=="string"?ee.createElement(k3,null,e):e,ee.createElement(V3,Ci({levaType:l,ref:T,id:C,type:d,autoComplete:"off",spellCheck:"false",value:t,onChange:B(a),onFocus:()=>_(),onKeyPress:D,onKeyDown:s,disabled:S},P)))}function k7(n){let{onUpdate:e}=n,t=qn(n,V7);const i=H.useCallback(s=>e(_7(s)),[e]),a=H.useCallback(s=>{const l=s.key==="ArrowUp"?1:s.key==="ArrowDown"?-1:0;if(l){s.preventDefault();const c=s.altKey?.1:s.shiftKey?10:1;e(d=>parseFloat(d)+l*c)}},[e]);return ee.createElement(Q1,Ci({},t,{onUpdate:i,onKeyDown:a,type:"number"}))}const tx=zt("div",{}),Z1=zt("div",{position:"relative",background:"$elevation2",transition:"height 300ms ease",variants:{fill:{true:{},false:{}},flat:{false:{},true:{}},isRoot:{true:{},false:{paddingLeft:"$md","&::after":{content:'""',position:"absolute",left:0,top:0,width:"$borderWidths$folder",height:"100%",backgroundColor:"$folderWidgetColor",opacity:.4,transform:"translateX(-50%)"}}}},compoundVariants:[{isRoot:!0,fill:!1,css:{overflowY:"auto",maxHeight:"calc(100vh - 20px - $$titleBarHeight)"}},{isRoot:!0,flat:!1,css:{borderRadius:"$lg"}}]}),X7=zt("div",{$flex:"",color:"$folderTextColor",userSelect:"none",cursor:"pointer",height:"$folderTitleHeight",fontWeight:"$folder","> svg":{marginLeft:-4,marginRight:4,cursor:"pointer",fill:"$folderWidgetColor",opacity:.6},"&:hover > svg":{fill:"$folderWidgetColor"},[`&:hover + ${Z1}::after`]:{opacity:.6},[`${tx}:hover > & + ${Z1}::after`]:{opacity:.6},[`${tx}:hover > & > svg`]:{opacity:1}}),X3=zt("div",{position:"relative",display:"grid",gridTemplateColumns:"100%",rowGap:"$rowGap",transition:"opacity 250ms ease",variants:{toggled:{true:{opacity:1,transitionDelay:"250ms"},false:{opacity:0,transitionDelay:"0ms",pointerEvents:"none"}},isRoot:{true:{"& > div":{paddingLeft:"$md",paddingRight:"$md"},"& > div:first-of-type":{paddingTop:"$sm"},"& > div:last-of-type":{paddingBottom:"$sm"},[`> ${tx}:not(:first-of-type)`]:{paddingTop:"$sm",marginTop:"$md",borderTop:"$borderWidths$folder solid $colors$elevation1"}}}}}),j3=zt("div",{position:"relative",zIndex:100,display:"grid",rowGap:"$rowGap",gridTemplateRows:"minmax($sizes$rowHeight, max-content)",alignItems:"center",color:"$highlight2",[`${X3} > &`]:{"&:first-of-type":{marginTop:"$rowGap"},"&:last-of-type":{marginBottom:"$rowGap"}},variants:{disabled:{true:{pointerEvents:"none"},false:{"&:hover,&:focus-within":{color:"$highlight3"}}}}}),Y3=zt(j3,{gridTemplateColumns:"auto $sizes$controlWidth",columnGap:"$colGap"}),j7=zt("div",{$flex:"",height:"100%",position:"relative",overflow:"hidden","& > div":{marginLeft:"$colGap",padding:"0 $xs",opacity:.4},"& > div:hover":{opacity:.8},"& > div > svg":{display:"none",cursor:"pointer",width:13,minWidth:13,height:13,backgroundColor:"$elevation2"},"&:hover > div > svg":{display:"block"},variants:{align:{top:{height:"100%",alignItems:"flex-start",paddingTop:"$sm"}}}}),Y7=zt("input",{$reset:"",height:0,width:0,opacity:0,margin:0,"& + label":{position:"relative",$flexCenter:"",height:"100%",userSelect:"none",cursor:"pointer",paddingLeft:2,paddingRight:"$sm",pointerEvents:"auto"},"& + label:after":{content:'""',width:6,height:6,backgroundColor:"$elevation3",borderRadius:"50%",$activeStyle:""},"&:focus + label:after":{$focusStyle:""},"& + label:active:after":{backgroundColor:"$accent1",$focusStyle:""},"&:checked + label:after":{backgroundColor:"$accent1"}}),$1=zt("label",{fontWeight:"$label",overflow:"hidden",textOverflow:"ellipsis",whiteSpace:"nowrap","& > svg":{display:"block"}}),q7=zt("div",{opacity:1,variants:{disabled:{true:{opacity:.6,pointerEvents:"none",[`& ${$1}`]:{pointerEvents:"auto"}}}}}),q3=zt("div",{position:"fixed",top:0,bottom:0,right:0,left:0,zIndex:1e3,userSelect:"none"}),W7=zt("div",{background:"$toolTipBackground",fontFamily:"$sans",fontSize:"$toolTip",padding:"$xs $sm",color:"$toolTipText",borderRadius:"$xs",boxShadow:"$level2",maxWidth:260}),J7=zt(l7,{fill:"$toolTipBackground"});function eM({children:n,container:e=(t=>globalThis==null||(t=globalThis.document)===null||t===void 0?void 0:t.body)()}){const{className:t}=H.useContext(K1);return ee.createElement(r9,{className:t,container:e},n)}const K7=["align"];function Q7(){const{id:n,disable:e,disabled:t}=Ga();return ee.createElement(ee.Fragment,null,ee.createElement(Y7,{id:n+"__disable",type:"checkbox",checked:!t,onChange:()=>e(!t)}),ee.createElement("label",{htmlFor:n+"__disable"}))}function Z7(n){const{id:e,optional:t,hint:i}=Ga(),a=n.htmlFor||e||void 0,s=!i&&typeof n.children=="string"?n.children:void 0;return ee.createElement(ee.Fragment,null,t&&ee.createElement(Q7,null),i!==void 0?ee.createElement(r7,null,ee.createElement(s7,{asChild:!0},ee.createElement($1,Ci({htmlFor:a},n))),ee.createElement(o7,{side:"top",sideOffset:2},ee.createElement(W7,null,i,ee.createElement(J7,null)))):ee.createElement($1,Ci({htmlFor:a,title:s},n)))}function ro(n){let{align:e}=n,t=qn(n,K7);const{value:i,label:a,key:s,disabled:l}=Ga(),{hideCopyButton:c}=U7(),d=!c&&s!==void 0,[p,g]=H.useState(!1),v=async()=>{try{await navigator.clipboard.writeText(JSON.stringify({[s]:i??""})),g(!0)}catch{jl(ki.CLIPBOARD_ERROR,{[s]:i})}};return ee.createElement(j7,{align:e,onPointerLeave:()=>g(!1)},ee.createElement(Z7,t),d&&!l&&ee.createElement("div",{title:`Click to copy ${typeof a=="string"?a:s} value`},p?ee.createElement("svg",{xmlns:"http://www.w3.org/2000/svg",viewBox:"0 0 20 20",fill:"currentColor"},ee.createElement("path",{d:"M9 2a1 1 0 000 2h2a1 1 0 100-2H9z"}),ee.createElement("path",{fillRule:"evenodd",d:"M4 5a2 2 0 012-2 3 3 0 003 3h2a3 3 0 003-3 2 2 0 012 2v11a2 2 0 01-2 2H6a2 2 0 01-2-2V5zm9.707 5.707a1 1 0 00-1.414-1.414L9 12.586l-1.293-1.293a1 1 0 00-1.414 1.414l2 2a1 1 0 001.414 0l4-4z",clipRule:"evenodd"})):ee.createElement("svg",{onClick:v,xmlns:"http://www.w3.org/2000/svg",viewBox:"0 0 20 20",fill:"currentColor"},ee.createElement("path",{d:"M8 3a1 1 0 011-1h2a1 1 0 110 2H9a1 1 0 01-1-1z"}),ee.createElement("path",{d:"M6 3a2 2 0 00-2 2v11a2 2 0 002 2h8a2 2 0 002-2V5a2 2 0 00-2-2 3 3 0 01-3 3H9a3 3 0 01-3-3z"}))))}const $7=["toggled"],ek=zt("svg",{fill:"currentColor",transition:"transform 350ms ease, fill 250ms ease"});function tM(n){let{toggled:e}=n,t=qn(n,$7);return ee.createElement(ek,Ci({width:"9",height:"5",viewBox:"0 0 9 5",xmlns:"http://www.w3.org/2000/svg",style:{transform:`rotate(${e?0:-90}deg)`}},t),ee.createElement("path",{d:"M3.8 4.4c.4.3 1 .3 1.4 0L8 1.7A1 1 0 007.4 0H1.6a1 1 0 00-.7 1.7l3 2.7z"}))}const tk=["input"];function Es(n){let{input:e}=n,t=qn(n,tk);return e?ee.createElement(Y3,t):ee.createElement(j3,t)}function W3({value:n,type:e,settings:t,setValue:i}){const[a,s]=H.useState(b3(e,n,t)),l=H.useRef(n),c=H.useRef(t);c.current=t;const d=H.useCallback(g=>s(b3(e,g,c.current)),[e]),p=H.useCallback(g=>{try{i(g)}catch(v){const{type:_,previousValue:x}=v;if(_!=="LEVA_ERROR")throw v;d(x)}},[d,i]);return H.useEffect(()=>{sg(n,l.current)||d(n),l.current=n},[n,d]),{displayValue:a,onChange:s,onUpdate:p}}function yg(n,e){const{emitOnEditStart:t,emitOnEditEnd:i}=Ga();return D5(a=>{a.first&&(document.body.classList.add("leva__panel__dragged"),t?.());const s=n(a);return a.last&&(document.body.classList.remove("leva__panel__dragged"),i?.()),s},e)}function nk(n){const e=H.useRef(null),t=H.useRef(null),i=H.useRef(!1);return H.useEffect(()=>{const a=O3(()=>{e.current.width=e.current.offsetWidth*window.devicePixelRatio,e.current.height=e.current.offsetHeight*window.devicePixelRatio,n(e.current,t.current)},250);return window.addEventListener("resize",a),i.current||(a(),i.current=!0),()=>window.removeEventListener("resize",a)},[n]),H.useEffect(()=>{t.current=e.current.getContext("2d")},[]),[e,t]}function J3(){const n=H.useRef(null),e=H.useRef({x:0,y:0}),t=H.useCallback(i=>{Object.assign(e.current,i),n.current&&(n.current.style.transform=`translate3d(${e.current.x}px, ${e.current.y}px, 0)`)},[]);return[n,t]}const ik=["__refCount"],nM=(n,e)=>{if(!n[e])return null;const t=n[e];return qn(t,ik)};function ak(n){const e=mg(),[t,i]=H.useState(nM(e.getData(),n)),a=H.useCallback(p=>e.setValueAtPath(n,p,!0),[n,e]),s=H.useCallback(p=>e.setSettingsAtPath(n,p),[n,e]),l=H.useCallback(p=>e.disableInputAtPath(n,p),[n,e]),c=H.useCallback(()=>e.emitOnEditStart(n),[n,e]),d=H.useCallback(()=>e.emitOnEditEnd(n),[n,e]);return H.useEffect(()=>{i(nM(e.getData(),n));const p=e.useStore.subscribe(g=>nM(g.data,n),i,{equalityFn:sB});return()=>p()},[e,n]),[t,{set:a,setSettings:s,disable:l,storeId:e.storeId,emitOnEditStart:c,emitOnEditEnd:d}]}const rk=zt("div",{variants:{hasRange:{true:{position:"relative",display:"grid",gridTemplateColumns:"auto $sizes$numberInputMinWidth",columnGap:"$colGap",alignItems:"center"}}}}),K3=zt("div",{position:"relative",width:"100%",height:2,borderRadius:"$xs",backgroundColor:"$elevation1"}),iM=zt("div",{position:"absolute",width:"$scrubberWidth",height:"$scrubberHeight",borderRadius:"$xs",boxShadow:"0 0 0 2px $colors$elevation2",backgroundColor:"$accent2",cursor:"pointer",$active:"none $accent1",$hover:"none $accent3",variants:{position:{left:{borderTopRightRadius:0,borderBottomRightRadius:0,transform:"translateX(calc(-0.5 * ($sizes$scrubberWidth + 4px)))"},right:{borderTopLeftRadius:0,borderBottomLeftRadius:0,transform:"translateX(calc(0.5 * ($sizes$scrubberWidth + 4px)))"}}}}),Q3=zt("div",{position:"relative",$flex:"",height:"100%",cursor:"pointer",touchAction:"none"}),Z3=zt("div",{position:"absolute",height:"100%",backgroundColor:"$accent2"});function sk({value:n,min:e,max:t,onDrag:i,step:a,initialValue:s}){const l=H.useRef(null),c=H.useRef(null),d=H.useRef(0),p=Wl("sizes","scrubberWidth"),g=yg(({event:_,first:x,xy:[S],movement:[C],memo:T})=>{if(x){const{width:w,left:B}=l.current.getBoundingClientRect();d.current=w-parseFloat(p),T=_?.target===c.current?n:$_((S-B)/w,e,t)}const M=T+$_(C/d.current,0,t-e);return i(I3(M,{step:a,initialValue:s})),T}),v=Z_(n,e,t);return ee.createElement(Q3,Ci({ref:l},g()),ee.createElement(K3,null,ee.createElement(Z3,{style:{left:0,right:`${(1-v)*100}%`}})),ee.createElement(iM,{ref:c,style:{left:`calc(${v} * (100% - ${p}))`}}))}const ok=ee.memo(({label:n,onUpdate:e,step:t,innerLabelTrim:i})=>{const[a,s]=H.useState(!1),l=yg(({active:c,delta:[d],event:p,memo:g=0,first:v,last:_,target:x})=>(v&&x.requestPointerLock(),_&&document.exitPointerLock(),s(c),g+=d/2,Math.abs(g)>=1&&(e(S=>parseFloat(S)+Math.floor(g)*t*N3(p)),g=0),g));return ee.createElement(z7,Ci({dragging:a,title:n.length>1?n:""},l()),n.slice(0,i))});function $3({label:n,id:e,displayValue:t,onUpdate:i,onChange:a,settings:s,innerLabelTrim:l=1}){const c=l>0&&ee.createElement(ok,{label:n,step:s.step,onUpdate:i,innerLabelTrim:l});return ee.createElement(k7,{id:e,value:String(t),onUpdate:i,onChange:a,innerLabel:c})}function lk(){const n=Ga(),{label:e,value:t,onUpdate:i,settings:a,id:s}=n,{min:l,max:c}=a,d=c!==1/0&&l!==-1/0;return ee.createElement(Es,{input:!0},ee.createElement(ro,null,e),ee.createElement(rk,{hasRange:d},d&&ee.createElement(sk,Ci({value:parseFloat(t),onDrag:i},a)),ee.createElement($3,Ci({},n,{id:s,label:"value",innerLabelTrim:d?0:1}))))}const{sanitizeStep:ck}=P3,uk=qn(P3,["sanitizeStep"]);var fk=$t({component:lk},uk),hk=Object.freeze({__proto__:null,schema:(n,e)=>Ur().schema({options:Ur().passesAnyOf(Ur().object(),Ur().array())}).test(e),sanitize:(n,{values:e})=>{if(e.indexOf(n)<0)throw Error("Selected value doesn't match Select options");return n},format:(n,{values:e})=>e.indexOf(n),normalize:n=>{let{value:e,options:t}=n,i,a;return Array.isArray(t)?(a=t,i=t.map(s=>String(s))):(a=Object.values(t),i=Object.keys(t)),"value"in n?a.includes(e)||(i.unshift(String(e)),a.unshift(e)):e=a[0],Object.values(t).includes(e)||(t[String(e)]=e),{value:e,settings:{keys:i,values:a}}}});const dk=zt("div",{$flexCenter:"",position:"relative","> svg":{pointerEvents:"none",position:"absolute",right:"$md"}}),aM=zt("select",{position:"absolute",top:0,left:0,width:"100%",height:"100%",opacity:0}),pk=zt("div",{display:"flex",alignItems:"center",width:"100%",height:"$rowHeight",backgroundColor:"$elevation3",borderRadius:"$sm",padding:"0 $sm",cursor:"pointer",[`${aM}:focus + &`]:{$focusStyle:""},[`${aM}:hover + &`]:{$hoverStyle:""}});function mk({displayValue:n,value:e,onUpdate:t,id:i,settings:a,disabled:s}){const{keys:l,values:c}=a,d=H.useRef();return e===c[n]&&(d.current=l[n]),ee.createElement(dk,null,ee.createElement(aM,{id:i,value:n,onChange:p=>t(c[Number(p.currentTarget.value)]),disabled:s},l.map((p,g)=>ee.createElement("option",{key:p,value:g},p))),ee.createElement(pk,null,d.current),ee.createElement(tM,{toggled:!0}))}function gk(){const{label:n,value:e,displayValue:t,onUpdate:i,id:a,disabled:s,settings:l}=Ga();return ee.createElement(Es,{input:!0},ee.createElement(ro,null,n),ee.createElement(mk,{id:a,value:e,displayValue:t,onUpdate:i,settings:l,disabled:s}))}var vk=$t({component:gk},hk),yk=Object.freeze({__proto__:null,schema:n=>Ur().string().test(n),sanitize:n=>{if(typeof n!="string")throw Error("Invalid string");return n},normalize:({value:n,editable:e=!0,rows:t=!1})=>({value:n,settings:{editable:e,rows:typeof t=="number"?t:t?5:0}})});const _k=["displayValue","onUpdate","onChange","editable"],xk=zt("div",{whiteSpace:"pre-wrap"});function bk(n){let{displayValue:e,onUpdate:t,onChange:i,editable:a=!0}=n,s=qn(n,_k);return a?ee.createElement(Q1,Ci({value:e,onUpdate:t,onChange:i},s)):ee.createElement(xk,null,e)}function Ak(){const{label:n,settings:e,displayValue:t,onUpdate:i,onChange:a}=Ga();return ee.createElement(Es,{input:!0},ee.createElement(ro,null,n),ee.createElement(bk,Ci({displayValue:t,onUpdate:i,onChange:a},e)))}var Sk=$t({component:Ak},yk),Mk=Object.freeze({__proto__:null,schema:n=>Ur().boolean().test(n),sanitize:n=>{if(typeof n!="boolean")throw Error("Invalid boolean");return n}});const Ek=zt("div",{position:"relative",$flex:"",height:"$rowHeight",input:{$reset:"",height:0,width:0,opacity:0,margin:0},label:{position:"relative",$flexCenter:"",userSelect:"none",cursor:"pointer",height:"$checkboxSize",width:"$checkboxSize",backgroundColor:"$elevation3",borderRadius:"$sm",$hover:""},"input:focus + label":{$focusStyle:""},"input:focus:checked + label, input:checked + label:hover":{$hoverStyle:"$accent3"},"input + label:active":{backgroundColor:"$accent1"},"input:checked + label:active":{backgroundColor:"$accent1"},"label > svg":{display:"none",width:"90%",height:"90%",stroke:"$highlight3"},"input:checked + label":{backgroundColor:"$accent2"},"input:checked + label > svg":{display:"block"}});function Tk({value:n,onUpdate:e,id:t,disabled:i}){return ee.createElement(Ek,null,ee.createElement("input",{id:t,type:"checkbox",checked:n,onChange:a=>e(a.currentTarget.checked),disabled:i}),ee.createElement("label",{htmlFor:t},ee.createElement("svg",{xmlns:"http://www.w3.org/2000/svg",fill:"none",viewBox:"0 0 24 24"},ee.createElement("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M5 13l4 4L19 7"}))))}function Ck(){const{label:n,value:e,onUpdate:t,disabled:i,id:a}=Ga();return ee.createElement(Es,{input:!0},ee.createElement(ro,null,n),ee.createElement(Tk,{value:e,onUpdate:t,id:a,disabled:i}))}var Rk=$t({component:Ck},Mk);const wk=["locked"];function Bk({value:n,id:e,valueKey:t,settings:i,onUpdate:a,innerLabelTrim:s}){const l=H.useRef(n[t]);l.current=n[t];const c=H.useCallback(p=>a({[t]:D3({type:"NUMBER",value:l.current,settings:i},p)}),[a,i,t]),d=W3({type:"NUMBER",value:n[t],settings:i,setValue:c});return ee.createElement($3,{id:e,label:t,value:n[t],displayValue:d.displayValue,onUpdate:d.onUpdate,onChange:d.onChange,settings:i,innerLabelTrim:s})}const Dk=zt("div",{display:"grid",columnGap:"$colGap",gridAutoFlow:"column dense",alignItems:"center",variants:{withLock:{true:{gridTemplateColumns:"10px auto","> svg":{cursor:"pointer"}}}}});function Ok(n){let{locked:e}=n,t=qn(n,wk);return ee.createElement("svg",Ci({width:"10",height:"10",viewBox:"0 0 15 15",fill:"none",xmlns:"http://www.w3.org/2000/svg"},t),e?ee.createElement("path",{d:"M5 4.63601C5 3.76031 5.24219 3.1054 5.64323 2.67357C6.03934 2.24705 6.64582 1.9783 7.5014 1.9783C8.35745 1.9783 8.96306 2.24652 9.35823 2.67208C9.75838 3.10299 10 3.75708 10 4.63325V5.99999H5V4.63601ZM4 5.99999V4.63601C4 3.58148 4.29339 2.65754 4.91049 1.99307C5.53252 1.32329 6.42675 0.978302 7.5014 0.978302C8.57583 0.978302 9.46952 1.32233 10.091 1.99162C10.7076 2.65557 11 3.57896 11 4.63325V5.99999H12C12.5523 5.99999 13 6.44771 13 6.99999V13C13 13.5523 12.5523 14 12 14H3C2.44772 14 2 13.5523 2 13V6.99999C2 6.44771 2.44772 5.99999 3 5.99999H4ZM3 6.99999H12V13H3V6.99999Z",fill:"currentColor",fillRule:"evenodd",clipRule:"evenodd"}):ee.createElement("path",{d:"M9 3.63601C9 2.76044 9.24207 2.11211 9.64154 1.68623C10.0366 1.26502 10.6432 1 11.5014 1C12.4485 1 13.0839 1.30552 13.4722 1.80636C13.8031 2.23312 14 2.84313 14 3.63325H15C15 2.68242 14.7626 1.83856 14.2625 1.19361C13.6389 0.38943 12.6743 0 11.5014 0C10.4294 0 9.53523 0.337871 8.91218 1.0021C8.29351 1.66167 8 2.58135 8 3.63601V6H1C0.447715 6 0 6.44772 0 7V13C0 13.5523 0.447715 14 1 14H10C10.5523 14 11 13.5523 11 13V7C11 6.44772 10.5523 6 10 6H9V3.63601ZM1 7H10V13H1V7Z",fill:"currentColor",fillRule:"evenodd",clipRule:"evenodd"}))}function rM({value:n,onUpdate:e,settings:t,innerLabelTrim:i}){const{id:a,setSettings:s}=Ga(),{lock:l,locked:c}=t;return ee.createElement(Dk,{withLock:l},l&&ee.createElement(Ok,{locked:c,onClick:()=>s({locked:!c})}),Object.keys(n).map((d,p)=>ee.createElement(Bk,{id:p===0?a:`${a}.${d}`,key:d,valueKey:d,value:n,settings:t[d],onUpdate:e,innerLabelTrim:i})))}const eD=(n,e)=>{const t={};let i=0,a=1/0;Object.entries(n).forEach(([s,l])=>{t[s]=L3($t({value:l},e[s])).settings,i=Math.max(i,t[s].step),a=Math.min(a,t[s].pad)});for(let s in t){const{step:l,min:c,max:d}=e[s]||{};!isFinite(l)&&(!isFinite(c)||!isFinite(d))&&(t[s].step=i,t[s].pad=a)}return t},Nk=["lock"],Uk=["value"];function Lk(n){const e=Ur().array().length(n).every.number(),t=i=>{if(!i||typeof i!="object")return!1;const a=Object.values(i);return a.length===n&&a.every(s=>isFinite(s))};return i=>e.test(i)||t(i)}function Ik(n){return Array.isArray(n)?"array":"object"}function _g(n,e,t){return Ik(n)===e?n:e==="array"?Object.values(n):S7(n,t)}const Pk=(n,e,t)=>{const i=_g(n,"object",e.keys);for(let l in i)i[l]=U3(i[l],e[l]);const a=Object.keys(i);let s={};if(a.length===e.keys.length)s=i;else{const l=_g(t,"object",e.keys);if(a.length===1&&e.locked){const c=a[0],d=i[c],p=l[c],g=p!==0?d/p:1;for(let v in l)v===c?s[c]=d:s[v]=l[v]*g}else s=$t($t({},l),i)}return _g(s,e.format,e.keys)},Fk=(n,e)=>_g(n,"object",e.keys),zk=n=>!!n&&("step"in n||"min"in n||"max"in n);function Hk(n,e,t=[]){const{lock:i=!1}=e,a=qn(e,Nk),s=Array.isArray(n)?"array":"object",l=s==="object"?Object.keys(n):t,c=_g(n,"object",l),d=zk(a)?l.reduce((g,v)=>Object.assign(g,{[v]:a}),{}):a,p=eD(c,d);return{value:s==="array"?n:c,settings:$t($t({},p),{},{format:s,keys:l,lock:i,locked:!1})}}function tD(n){return{schema:Lk(n.length),normalize:e=>{let{value:t}=e,i=qn(e,Uk);return Hk(t,i,n)},format:(e,t)=>Fk(e,t),sanitize:(e,t,i)=>Pk(e,t,i)}}var Gk={grad:.9,turn:360,rad:360/(2*Math.PI)},Jl=function(n){return typeof n=="string"?n.length>0:typeof n=="number"},ha=function(n,e,t){return e===void 0&&(e=0),t===void 0&&(t=Math.pow(10,e)),Math.round(t*n)/t+0},Ts=function(n,e,t){return e===void 0&&(e=0),t===void 0&&(t=1),n>t?t:n>e?n:e},nD=function(n){return(n=isFinite(n)?n%360:0)>0?n:n+360},iD=function(n){return{r:Ts(n.r,0,255),g:Ts(n.g,0,255),b:Ts(n.b,0,255),a:Ts(n.a)}},sM=function(n){return{r:ha(n.r),g:ha(n.g),b:ha(n.b),a:ha(n.a,3)}},Vk=/^#([0-9a-f]{3,8})$/i,nx=function(n){var e=n.toString(16);return e.length<2?"0"+e:e},aD=function(n){var e=n.r,t=n.g,i=n.b,a=n.a,s=Math.max(e,t,i),l=s-Math.min(e,t,i),c=l?s===e?(t-i)/l:s===t?2+(i-e)/l:4+(e-t)/l:0;return{h:60*(c<0?c+6:c),s:s?l/s*100:0,v:s/255*100,a}},rD=function(n){var e=n.h,t=n.s,i=n.v,a=n.a;e=e/360*6,t/=100,i/=100;var s=Math.floor(e),l=i*(1-t),c=i*(1-(e-s)*t),d=i*(1-(1-e+s)*t),p=s%6;return{r:255*[i,c,l,l,d,i][p],g:255*[d,i,i,c,l,l][p],b:255*[l,l,d,i,i,c][p],a}},sD=function(n){return{h:nD(n.h),s:Ts(n.s,0,100),l:Ts(n.l,0,100),a:Ts(n.a)}},oD=function(n){return{h:ha(n.h),s:ha(n.s),l:ha(n.l),a:ha(n.a,3)}},lD=function(n){return rD((t=(e=n).s,{h:e.h,s:(t*=((i=e.l)<50?i:100-i)/100)>0?2*t/(i+t)*100:0,v:i+t,a:e.a}));var e,t,i},xg=function(n){return{h:(e=aD(n)).h,s:(a=(200-(t=e.s))*(i=e.v)/100)>0&&a<200?t*i/100/(a<=100?a:200-a)*100:0,l:a/2,a:e.a};var e,t,i,a},kk=/^hsla?\(\s*([+-]?\d*\.?\d+)(deg|rad|grad|turn)?\s*,\s*([+-]?\d*\.?\d+)%\s*,\s*([+-]?\d*\.?\d+)%\s*(?:,\s*([+-]?\d*\.?\d+)(%)?\s*)?\)$/i,Xk=/^hsla?\(\s*([+-]?\d*\.?\d+)(deg|rad|grad|turn)?\s+([+-]?\d*\.?\d+)%\s+([+-]?\d*\.?\d+)%\s*(?:\/\s*([+-]?\d*\.?\d+)(%)?\s*)?\)$/i,jk=/^rgba?\(\s*([+-]?\d*\.?\d+)(%)?\s*,\s*([+-]?\d*\.?\d+)(%)?\s*,\s*([+-]?\d*\.?\d+)(%)?\s*(?:,\s*([+-]?\d*\.?\d+)(%)?\s*)?\)$/i,Yk=/^rgba?\(\s*([+-]?\d*\.?\d+)(%)?\s+([+-]?\d*\.?\d+)(%)?\s+([+-]?\d*\.?\d+)(%)?\s*(?:\/\s*([+-]?\d*\.?\d+)(%)?\s*)?\)$/i,oM={string:[[function(n){var e=Vk.exec(n);return e?(n=e[1]).length<=4?{r:parseInt(n[0]+n[0],16),g:parseInt(n[1]+n[1],16),b:parseInt(n[2]+n[2],16),a:n.length===4?ha(parseInt(n[3]+n[3],16)/255,2):1}:n.length===6||n.length===8?{r:parseInt(n.substr(0,2),16),g:parseInt(n.substr(2,2),16),b:parseInt(n.substr(4,2),16),a:n.length===8?ha(parseInt(n.substr(6,2),16)/255,2):1}:null:null},"hex"],[function(n){var e=jk.exec(n)||Yk.exec(n);return e?e[2]!==e[4]||e[4]!==e[6]?null:iD({r:Number(e[1])/(e[2]?100/255:1),g:Number(e[3])/(e[4]?100/255:1),b:Number(e[5])/(e[6]?100/255:1),a:e[7]===void 0?1:Number(e[7])/(e[8]?100:1)}):null},"rgb"],[function(n){var e=kk.exec(n)||Xk.exec(n);if(!e)return null;var t,i,a=sD({h:(t=e[1],i=e[2],i===void 0&&(i="deg"),Number(t)*(Gk[i]||1)),s:Number(e[3]),l:Number(e[4]),a:e[5]===void 0?1:Number(e[5])/(e[6]?100:1)});return lD(a)},"hsl"]],object:[[function(n){var e=n.r,t=n.g,i=n.b,a=n.a,s=a===void 0?1:a;return Jl(e)&&Jl(t)&&Jl(i)?iD({r:Number(e),g:Number(t),b:Number(i),a:Number(s)}):null},"rgb"],[function(n){var e=n.h,t=n.s,i=n.l,a=n.a,s=a===void 0?1:a;if(!Jl(e)||!Jl(t)||!Jl(i))return null;var l=sD({h:Number(e),s:Number(t),l:Number(i),a:Number(s)});return lD(l)},"hsl"],[function(n){var e=n.h,t=n.s,i=n.v,a=n.a,s=a===void 0?1:a;if(!Jl(e)||!Jl(t)||!Jl(i))return null;var l=(function(c){return{h:nD(c.h),s:Ts(c.s,0,100),v:Ts(c.v,0,100),a:Ts(c.a)}})({h:Number(e),s:Number(t),v:Number(i),a:Number(s)});return rD(l)},"hsv"]]},cD=function(n,e){for(var t=0;t<e.length;t++){var i=e[t][0](n);if(i)return[i,e[t][1]]}return[null,void 0]},uD=function(n){return typeof n=="string"?cD(n.trim(),oM.string):typeof n=="object"&&n!==null?cD(n,oM.object):[null,void 0]},qk=function(n){return uD(n)[1]},lM=function(n,e){var t=xg(n);return{h:t.h,s:Ts(t.s+100*e,0,100),l:t.l,a:t.a}},cM=function(n){return(299*n.r+587*n.g+114*n.b)/1e3/255},fD=function(n,e){var t=xg(n);return{h:t.h,s:t.s,l:Ts(t.l+100*e,0,100),a:t.a}},uM=(function(){function n(e){this.parsed=uD(e)[0],this.rgba=this.parsed||{r:0,g:0,b:0,a:1}}return n.prototype.isValid=function(){return this.parsed!==null},n.prototype.brightness=function(){return ha(cM(this.rgba),2)},n.prototype.isDark=function(){return cM(this.rgba)<.5},n.prototype.isLight=function(){return cM(this.rgba)>=.5},n.prototype.toHex=function(){return e=sM(this.rgba),t=e.r,i=e.g,a=e.b,l=(s=e.a)<1?nx(ha(255*s)):"","#"+nx(t)+nx(i)+nx(a)+l;var e,t,i,a,s,l},n.prototype.toRgb=function(){return sM(this.rgba)},n.prototype.toRgbString=function(){return e=sM(this.rgba),t=e.r,i=e.g,a=e.b,(s=e.a)<1?"rgba("+t+", "+i+", "+a+", "+s+")":"rgb("+t+", "+i+", "+a+")";var e,t,i,a,s},n.prototype.toHsl=function(){return oD(xg(this.rgba))},n.prototype.toHslString=function(){return e=oD(xg(this.rgba)),t=e.h,i=e.s,a=e.l,(s=e.a)<1?"hsla("+t+", "+i+"%, "+a+"%, "+s+")":"hsl("+t+", "+i+"%, "+a+"%)";var e,t,i,a,s},n.prototype.toHsv=function(){return e=aD(this.rgba),{h:ha(e.h),s:ha(e.s),v:ha(e.v),a:ha(e.a,3)};var e},n.prototype.invert=function(){return lr({r:255-(e=this.rgba).r,g:255-e.g,b:255-e.b,a:e.a});var e},n.prototype.saturate=function(e){return e===void 0&&(e=.1),lr(lM(this.rgba,e))},n.prototype.desaturate=function(e){return e===void 0&&(e=.1),lr(lM(this.rgba,-e))},n.prototype.grayscale=function(){return lr(lM(this.rgba,-1))},n.prototype.lighten=function(e){return e===void 0&&(e=.1),lr(fD(this.rgba,e))},n.prototype.darken=function(e){return e===void 0&&(e=.1),lr(fD(this.rgba,-e))},n.prototype.rotate=function(e){return e===void 0&&(e=15),this.hue(this.hue()+e)},n.prototype.alpha=function(e){return typeof e=="number"?lr({r:(t=this.rgba).r,g:t.g,b:t.b,a:e}):ha(this.rgba.a,3);var t},n.prototype.hue=function(e){var t=xg(this.rgba);return typeof e=="number"?lr({h:e,s:t.s,l:t.l,a:t.a}):ha(t.h)},n.prototype.isEqual=function(e){return this.toHex()===lr(e).toHex()},n})(),lr=function(n){return n instanceof uM?n:new uM(n)},hD=[],Wk=function(n){n.forEach(function(e){hD.indexOf(e)<0&&(e(uM,oM),hD.push(e))})};function Jk(n,e){var t={white:"#ffffff",bisque:"#ffe4c4",blue:"#0000ff",cadetblue:"#5f9ea0",chartreuse:"#7fff00",chocolate:"#d2691e",coral:"#ff7f50",antiquewhite:"#faebd7",aqua:"#00ffff",azure:"#f0ffff",whitesmoke:"#f5f5f5",papayawhip:"#ffefd5",plum:"#dda0dd",blanchedalmond:"#ffebcd",black:"#000000",gold:"#ffd700",goldenrod:"#daa520",gainsboro:"#dcdcdc",cornsilk:"#fff8dc",cornflowerblue:"#6495ed",burlywood:"#deb887",aquamarine:"#7fffd4",beige:"#f5f5dc",crimson:"#dc143c",cyan:"#00ffff",darkblue:"#00008b",darkcyan:"#008b8b",darkgoldenrod:"#b8860b",darkkhaki:"#bdb76b",darkgray:"#a9a9a9",darkgreen:"#006400",darkgrey:"#a9a9a9",peachpuff:"#ffdab9",darkmagenta:"#8b008b",darkred:"#8b0000",darkorchid:"#9932cc",darkorange:"#ff8c00",darkslateblue:"#483d8b",gray:"#808080",darkslategray:"#2f4f4f",darkslategrey:"#2f4f4f",deeppink:"#ff1493",deepskyblue:"#00bfff",wheat:"#f5deb3",firebrick:"#b22222",floralwhite:"#fffaf0",ghostwhite:"#f8f8ff",darkviolet:"#9400d3",magenta:"#ff00ff",green:"#008000",dodgerblue:"#1e90ff",grey:"#808080",honeydew:"#f0fff0",hotpink:"#ff69b4",blueviolet:"#8a2be2",forestgreen:"#228b22",lawngreen:"#7cfc00",indianred:"#cd5c5c",indigo:"#4b0082",fuchsia:"#ff00ff",brown:"#a52a2a",maroon:"#800000",mediumblue:"#0000cd",lightcoral:"#f08080",darkturquoise:"#00ced1",lightcyan:"#e0ffff",ivory:"#fffff0",lightyellow:"#ffffe0",lightsalmon:"#ffa07a",lightseagreen:"#20b2aa",linen:"#faf0e6",mediumaquamarine:"#66cdaa",lemonchiffon:"#fffacd",lime:"#00ff00",khaki:"#f0e68c",mediumseagreen:"#3cb371",limegreen:"#32cd32",mediumspringgreen:"#00fa9a",lightskyblue:"#87cefa",lightblue:"#add8e6",midnightblue:"#191970",lightpink:"#ffb6c1",mistyrose:"#ffe4e1",moccasin:"#ffe4b5",mintcream:"#f5fffa",lightslategray:"#778899",lightslategrey:"#778899",navajowhite:"#ffdead",navy:"#000080",mediumvioletred:"#c71585",powderblue:"#b0e0e6",palegoldenrod:"#eee8aa",oldlace:"#fdf5e6",paleturquoise:"#afeeee",mediumturquoise:"#48d1cc",mediumorchid:"#ba55d3",rebeccapurple:"#663399",lightsteelblue:"#b0c4de",mediumslateblue:"#7b68ee",thistle:"#d8bfd8",tan:"#d2b48c",orchid:"#da70d6",mediumpurple:"#9370db",purple:"#800080",pink:"#ffc0cb",skyblue:"#87ceeb",springgreen:"#00ff7f",palegreen:"#98fb98",red:"#ff0000",yellow:"#ffff00",slateblue:"#6a5acd",lavenderblush:"#fff0f5",peru:"#cd853f",palevioletred:"#db7093",violet:"#ee82ee",teal:"#008080",slategray:"#708090",slategrey:"#708090",aliceblue:"#f0f8ff",darkseagreen:"#8fbc8f",darkolivegreen:"#556b2f",greenyellow:"#adff2f",seagreen:"#2e8b57",seashell:"#fff5ee",tomato:"#ff6347",silver:"#c0c0c0",sienna:"#a0522d",lavender:"#e6e6fa",lightgreen:"#90ee90",orange:"#ffa500",orangered:"#ff4500",steelblue:"#4682b4",royalblue:"#4169e1",turquoise:"#40e0d0",yellowgreen:"#9acd32",salmon:"#fa8072",saddlebrown:"#8b4513",sandybrown:"#f4a460",rosybrown:"#bc8f8f",darksalmon:"#e9967a",lightgoldenrodyellow:"#fafad2",snow:"#fffafa",lightgrey:"#d3d3d3",lightgray:"#d3d3d3",dimgray:"#696969",dimgrey:"#696969",olivedrab:"#6b8e23",olive:"#808000"},i={};for(var a in t)i[t[a]]=a;var s={};n.prototype.toName=function(l){if(!(this.rgba.a||this.rgba.r||this.rgba.g||this.rgba.b))return"transparent";var c,d,p=i[this.toHex()];if(p)return p;if(l?.closest){var g=this.toRgb(),v=1/0,_="black";if(!s.length)for(var x in t)s[x]=new n(t[x]).toRgb();for(var S in t){var C=(c=g,d=s[S],Math.pow(c.r-d.r,2)+Math.pow(c.g-d.g,2)+Math.pow(c.b-d.b,2));C<v&&(v=C,_=S)}return _}},e.string.push([function(l){var c=l.toLowerCase(),d=c==="transparent"?"#0000":t[c];return d?new n(d).toRgb():null},"name"])}function Hd(){return(Hd=Object.assign||function(n){for(var e=1;e<arguments.length;e++){var t=arguments[e];for(var i in t)Object.prototype.hasOwnProperty.call(t,i)&&(n[i]=t[i])}return n}).apply(this,arguments)}function fM(n,e){if(n==null)return{};var t,i,a={},s=Object.keys(n);for(i=0;i<s.length;i++)e.indexOf(t=s[i])>=0||(a[t]=n[t]);return a}function hM(n){var e=H.useRef(n),t=H.useRef(function(i){e.current&&e.current(i)});return e.current=n,t.current}var Gd=function(n,e,t){return e===void 0&&(e=0),t===void 0&&(t=1),n>t?t:n<e?e:n},bg=function(n){return"touches"in n},dM=function(n){return n&&n.ownerDocument.defaultView||self},dD=function(n,e,t){var i=n.getBoundingClientRect(),a=bg(e)?(function(s,l){for(var c=0;c<s.length;c++)if(s[c].identifier===l)return s[c];return s[0]})(e.touches,t):e;return{left:Gd((a.pageX-(i.left+dM(n).pageXOffset))/i.width),top:Gd((a.pageY-(i.top+dM(n).pageYOffset))/i.height)}},pD=function(n){!bg(n)&&n.preventDefault()},pM=ee.memo(function(n){var e=n.onMove,t=n.onKey,i=fM(n,["onMove","onKey"]),a=H.useRef(null),s=hM(e),l=hM(t),c=H.useRef(null),d=H.useRef(!1),p=H.useMemo(function(){var x=function(T){pD(T),(bg(T)?T.touches.length>0:T.buttons>0)&&a.current?s(dD(a.current,T,c.current)):C(!1)},S=function(){return C(!1)};function C(T){var M=d.current,w=dM(a.current),B=T?w.addEventListener:w.removeEventListener;B(M?"touchmove":"mousemove",x),B(M?"touchend":"mouseup",S)}return[function(T){var M=T.nativeEvent,w=a.current;if(w&&(pD(M),!(function(D,P){return P&&!bg(D)})(M,d.current)&&w)){if(bg(M)){d.current=!0;var B=M.changedTouches||[];B.length&&(c.current=B[0].identifier)}w.focus(),s(dD(w,M,c.current)),C(!0)}},function(T){var M=T.which||T.keyCode;M<37||M>40||(T.preventDefault(),l({left:M===39?.05:M===37?-.05:0,top:M===40?.05:M===38?-.05:0}))},C]},[l,s]),g=p[0],v=p[1],_=p[2];return H.useEffect(function(){return _},[_]),ee.createElement("div",Hd({},i,{onTouchStart:g,onMouseDown:g,className:"react-colorful__interactive",ref:a,onKeyDown:v,tabIndex:0,role:"slider"}))}),Ag=function(n){return n.filter(Boolean).join(" ")},mM=function(n){var e=n.color,t=n.left,i=n.top,a=i===void 0?.5:i,s=Ag(["react-colorful__pointer",n.className]);return ee.createElement("div",{className:s,style:{top:100*a+"%",left:100*t+"%"}},ee.createElement("div",{className:"react-colorful__pointer-fill",style:{backgroundColor:e}}))},cr=function(n,e,t){return e===void 0&&(e=0),t===void 0&&(t=Math.pow(10,e)),Math.round(t*n)/t},mD=function(n){var e=n.s,t=n.v,i=n.a,a=(200-e)*t/100;return{h:cr(n.h),s:cr(a>0&&a<200?e*t/100/(a<=100?a:200-a)*100:0),l:cr(a/2),a:cr(i,2)}},gM=function(n){var e=mD(n);return"hsl("+e.h+", "+e.s+"%, "+e.l+"%)"},vM=function(n){var e=mD(n);return"hsla("+e.h+", "+e.s+"%, "+e.l+"%, "+e.a+")"},gD=function(n){var e=n.h,t=n.s,i=n.v,a=n.a;e=e/360*6,t/=100,i/=100;var s=Math.floor(e),l=i*(1-t),c=i*(1-(e-s)*t),d=i*(1-(1-e+s)*t),p=s%6;return{r:cr(255*[i,c,l,l,d,i][p]),g:cr(255*[d,i,i,c,l,l][p]),b:cr(255*[l,l,d,i,i,c][p]),a:cr(a,2)}},vD=function(n){var e=n.r,t=n.g,i=n.b,a=n.a,s=Math.max(e,t,i),l=s-Math.min(e,t,i),c=l?s===e?(t-i)/l:s===t?2+(i-e)/l:4+(e-t)/l:0;return{h:cr(60*(c<0?c+6:c)),s:cr(s?l/s*100:0),v:cr(s/255*100),a}},yD=ee.memo(function(n){var e=n.hue,t=n.onChange,i=Ag(["react-colorful__hue",n.className]);return ee.createElement("div",{className:i},ee.createElement(pM,{onMove:function(a){t({h:360*a.left})},onKey:function(a){t({h:Gd(e+360*a.left,0,360)})},"aria-label":"Hue","aria-valuenow":cr(e),"aria-valuemax":"360","aria-valuemin":"0"},ee.createElement(mM,{className:"react-colorful__hue-pointer",left:e/360,color:gM({h:e,s:100,v:100,a:1})})))}),_D=ee.memo(function(n){var e=n.hsva,t=n.onChange,i={backgroundColor:gM({h:e.h,s:100,v:100,a:1})};return ee.createElement("div",{className:"react-colorful__saturation",style:i},ee.createElement(pM,{onMove:function(a){t({s:100*a.left,v:100-100*a.top})},onKey:function(a){t({s:Gd(e.s+100*a.left,0,100),v:Gd(e.v-100*a.top,0,100)})},"aria-label":"Color","aria-valuetext":"Saturation "+cr(e.s)+"%, Brightness "+cr(e.v)+"%"},ee.createElement(mM,{className:"react-colorful__saturation-pointer",top:1-e.v/100,left:e.s/100,color:gM(e)})))}),yM=function(n,e){if(n===e)return!0;for(var t in n)if(n[t]!==e[t])return!1;return!0};function xD(n,e,t){var i=hM(t),a=H.useState(function(){return n.toHsva(e)}),s=a[0],l=a[1],c=H.useRef({color:e,hsva:s});H.useEffect(function(){if(!n.equal(e,c.current.color)){var p=n.toHsva(e);c.current={hsva:p,color:e},l(p)}},[e,n]),H.useEffect(function(){var p;yM(s,c.current.hsva)||n.equal(p=n.fromHsva(s),c.current.color)||(c.current={hsva:s,color:p},i(p))},[s,n,i]);var d=H.useCallback(function(p){l(function(g){return Object.assign({},g,p)})},[]);return[s,d]}var Kk=typeof window<"u"?H.useLayoutEffect:H.useEffect,Qk=function(){return typeof __webpack_nonce__<"u"?__webpack_nonce__:void 0},bD=new Map,AD=function(n){Kk(function(){var e=n.current?n.current.ownerDocument:document;if(e!==void 0&&!bD.has(e)){var t=e.createElement("style");t.innerHTML=`.react-colorful{position:relative;display:flex;flex-direction:column;width:200px;height:200px;-webkit-user-select:none;-moz-user-select:none;-ms-user-select:none;user-select:none;cursor:default}.react-colorful__saturation{position:relative;flex-grow:1;border-color:transparent;border-bottom:12px solid #000;border-radius:8px 8px 0 0;background-image:linear-gradient(0deg,#000,transparent),linear-gradient(90deg,#fff,hsla(0,0%,100%,0))}.react-colorful__alpha-gradient,.react-colorful__pointer-fill{content:"";position:absolute;left:0;top:0;right:0;bottom:0;pointer-events:none;border-radius:inherit}.react-colorful__alpha-gradient,.react-colorful__saturation{box-shadow:inset 0 0 0 1px rgba(0,0,0,.05)}.react-colorful__alpha,.react-colorful__hue{position:relative;height:24px}.react-colorful__hue{background:linear-gradient(90deg,red 0,#ff0 17%,#0f0 33%,#0ff 50%,#00f 67%,#f0f 83%,red)}.react-colorful__last-control{border-radius:0 0 8px 8px}.react-colorful__interactive{position:absolute;left:0;top:0;right:0;bottom:0;border-radius:inherit;outline:none;touch-action:none}.react-colorful__pointer{position:absolute;z-index:1;box-sizing:border-box;width:28px;height:28px;transform:translate(-50%,-50%);background-color:#fff;border:2px solid #fff;border-radius:50%;box-shadow:0 2px 4px rgba(0,0,0,.2)}.react-colorful__interactive:focus .react-colorful__pointer{transform:translate(-50%,-50%) scale(1.1)}.react-colorful__alpha,.react-colorful__alpha-pointer{background-color:#fff;background-image:url('data:image/svg+xml;charset=utf-8,<svg xmlns="http://www.w3.org/2000/svg" width="16" height="16" fill-opacity=".05"><path d="M8 0h8v8H8zM0 8h8v8H0z"/></svg>')}.react-colorful__saturation-pointer{z-index:3}.react-colorful__hue-pointer{z-index:2}`,bD.set(e,t);var i=Qk();i&&t.setAttribute("nonce",i),e.head.appendChild(t)}},[])},Zk=function(n){var e=n.className,t=n.colorModel,i=n.color,a=i===void 0?t.defaultColor:i,s=n.onChange,l=fM(n,["className","colorModel","color","onChange"]),c=H.useRef(null);AD(c);var d=xD(t,a,s),p=d[0],g=d[1],v=Ag(["react-colorful",e]);return ee.createElement("div",Hd({},l,{ref:c,className:v}),ee.createElement(_D,{hsva:p,onChange:g}),ee.createElement(yD,{hue:p.h,onChange:g,className:"react-colorful__last-control"}))},$k=function(n){var e=n.className,t=n.hsva,i=n.onChange,a={backgroundImage:"linear-gradient(90deg, "+vM(Object.assign({},t,{a:0}))+", "+vM(Object.assign({},t,{a:1}))+")"},s=Ag(["react-colorful__alpha",e]),l=cr(100*t.a);return ee.createElement("div",{className:s},ee.createElement("div",{className:"react-colorful__alpha-gradient",style:a}),ee.createElement(pM,{onMove:function(c){i({a:c.left})},onKey:function(c){i({a:Gd(t.a+c.left)})},"aria-label":"Alpha","aria-valuetext":l+"%","aria-valuenow":l,"aria-valuemin":"0","aria-valuemax":"100"},ee.createElement(mM,{className:"react-colorful__alpha-pointer",left:t.a,color:vM(t)})))},eX=function(n){var e=n.className,t=n.colorModel,i=n.color,a=i===void 0?t.defaultColor:i,s=n.onChange,l=fM(n,["className","colorModel","color","onChange"]),c=H.useRef(null);AD(c);var d=xD(t,a,s),p=d[0],g=d[1],v=Ag(["react-colorful",e]);return ee.createElement("div",Hd({},l,{ref:c,className:v}),ee.createElement(_D,{hsva:p,onChange:g}),ee.createElement(yD,{hue:p.h,onChange:g}),ee.createElement($k,{hsva:p,onChange:g,className:"react-colorful__last-control"}))},tX={defaultColor:{r:0,g:0,b:0,a:1},toHsva:vD,fromHsva:gD,equal:yM},nX=function(n){return ee.createElement(eX,Hd({},n,{colorModel:tX}))},iX={defaultColor:{r:0,g:0,b:0},toHsva:function(n){return vD({r:n.r,g:n.g,b:n.b,a:1})},fromHsva:function(n){return{r:(e=gD(n)).r,g:e.g,b:e.b};var e},equal:yM},aX=function(n){return ee.createElement(Zk,Hd({},n,{colorModel:iX}))},_M={exports:{}},xM,SD;function rX(){if(SD)return xM;SD=1;var n="SECRET_DO_NOT_PASS_THIS_OR_YOU_WILL_BE_FIRED";return xM=n,xM}var bM,MD;function sX(){if(MD)return bM;MD=1;var n=rX();function e(){}function t(){}return t.resetWarningCache=e,bM=function(){function i(l,c,d,p,g,v){if(v!==n){var _=new Error("Calling PropTypes validators directly is not supported by the `prop-types` package. Use PropTypes.checkPropTypes() to call them. Read more at http://fb.me/use-check-prop-types");throw _.name="Invariant Violation",_}}i.isRequired=i;function a(){return i}var s={array:i,bigint:i,bool:i,func:i,number:i,object:i,string:i,symbol:i,any:i,arrayOf:a,element:i,elementType:i,instanceOf:a,node:i,objectOf:a,oneOf:a,oneOfType:a,shape:a,exact:a,checkPropTypes:t,resetWarningCache:e};return s.PropTypes=s,s},bM}var ED;function oX(){return ED||(ED=1,_M.exports=sX()()),_M.exports}var lX=oX();const ri=Xu(lX);function Vd(n,e,t,i){function a(s){return s instanceof t?s:new t(function(l){l(s)})}return new(t||(t=Promise))(function(s,l){function c(g){try{p(i.next(g))}catch(v){l(v)}}function d(g){try{p(i.throw(g))}catch(v){l(v)}}function p(g){g.done?s(g.value):a(g.value).then(c,d)}p((i=i.apply(n,e||[])).next())})}function kd(n,e){var t={label:0,sent:function(){if(s[0]&1)throw s[1];return s[1]},trys:[],ops:[]},i,a,s,l=Object.create((typeof Iterator=="function"?Iterator:Object).prototype);return l.next=c(0),l.throw=c(1),l.return=c(2),typeof Symbol=="function"&&(l[Symbol.iterator]=function(){return this}),l;function c(p){return function(g){return d([p,g])}}function d(p){if(i)throw new TypeError("Generator is already executing.");for(;l&&(l=0,p[0]&&(t=0)),t;)try{if(i=1,a&&(s=p[0]&2?a.return:p[0]?a.throw||((s=a.return)&&s.call(a),0):a.next)&&!(s=s.call(a,p[1])).done)return s;switch(a=0,s&&(p=[p[0]&2,s.value]),p[0]){case 0:case 1:s=p;break;case 4:return t.label++,{value:p[1],done:!1};case 5:t.label++,a=p[1],p=[0];continue;case 7:p=t.ops.pop(),t.trys.pop();continue;default:if(s=t.trys,!(s=s.length>0&&s[s.length-1])&&(p[0]===6||p[0]===2)){t=0;continue}if(p[0]===3&&(!s||p[1]>s[0]&&p[1]<s[3])){t.label=p[1];break}if(p[0]===6&&t.label<s[1]){t.label=s[1],s=p;break}if(s&&t.label<s[2]){t.label=s[2],t.ops.push(p);break}s[2]&&t.ops.pop(),t.trys.pop();continue}p=e.call(n,t)}catch(g){p=[6,g],a=0}finally{i=s=0}if(p[0]&5)throw p[1];return{value:p[0]?p[1]:void 0,done:!0}}}function cX(n,e){var t=typeof Symbol=="function"&&n[Symbol.iterator];if(!t)return n;var i=t.call(n),a,s=[],l;try{for(;(e===void 0||e-- >0)&&!(a=i.next()).done;)s.push(a.value)}catch(c){l={error:c}}finally{try{a&&!a.done&&(t=i.return)&&t.call(i)}finally{if(l)throw l.error}}return s}function uX(){for(var n=[],e=0;e<arguments.length;e++)n=n.concat(cX(arguments[e]));return n}typeof SuppressedError=="function"&&SuppressedError;var fX=new Map([["aac","audio/aac"],["abw","application/x-abiword"],["arc","application/x-freearc"],["avif","image/avif"],["avi","video/x-msvideo"],["azw","application/vnd.amazon.ebook"],["bin","application/octet-stream"],["bmp","image/bmp"],["bz","application/x-bzip"],["bz2","application/x-bzip2"],["cda","application/x-cdf"],["csh","application/x-csh"],["css","text/css"],["csv","text/csv"],["doc","application/msword"],["docx","application/vnd.openxmlformats-officedocument.wordprocessingml.document"],["eot","application/vnd.ms-fontobject"],["epub","application/epub+zip"],["gz","application/gzip"],["gif","image/gif"],["heic","image/heic"],["heif","image/heif"],["htm","text/html"],["html","text/html"],["ico","image/vnd.microsoft.icon"],["ics","text/calendar"],["jar","application/java-archive"],["jpeg","image/jpeg"],["jpg","image/jpeg"],["js","text/javascript"],["json","application/json"],["jsonld","application/ld+json"],["mid","audio/midi"],["midi","audio/midi"],["mjs","text/javascript"],["mp3","audio/mpeg"],["mp4","video/mp4"],["mpeg","video/mpeg"],["mpkg","application/vnd.apple.installer+xml"],["odp","application/vnd.oasis.opendocument.presentation"],["ods","application/vnd.oasis.opendocument.spreadsheet"],["odt","application/vnd.oasis.opendocument.text"],["oga","audio/ogg"],["ogv","video/ogg"],["ogx","application/ogg"],["opus","audio/opus"],["otf","font/otf"],["png","image/png"],["pdf","application/pdf"],["php","application/x-httpd-php"],["ppt","application/vnd.ms-powerpoint"],["pptx","application/vnd.openxmlformats-officedocument.presentationml.presentation"],["rar","application/vnd.rar"],["rtf","application/rtf"],["sh","application/x-sh"],["svg","image/svg+xml"],["swf","application/x-shockwave-flash"],["tar","application/x-tar"],["tif","image/tiff"],["tiff","image/tiff"],["ts","video/mp2t"],["ttf","font/ttf"],["txt","text/plain"],["vsd","application/vnd.visio"],["wav","audio/wav"],["weba","audio/webm"],["webm","video/webm"],["webp","image/webp"],["woff","font/woff"],["woff2","font/woff2"],["xhtml","application/xhtml+xml"],["xls","application/vnd.ms-excel"],["xlsx","application/vnd.openxmlformats-officedocument.spreadsheetml.sheet"],["xml","application/xml"],["xul","application/vnd.mozilla.xul+xml"],["zip","application/zip"],["7z","application/x-7z-compressed"],["mkv","video/x-matroska"],["mov","video/quicktime"],["msg","application/vnd.ms-outlook"]]);function Sg(n,e){var t=hX(n);if(typeof t.path!="string"){var i=n.webkitRelativePath;Object.defineProperty(t,"path",{value:typeof e=="string"?e:typeof i=="string"&&i.length>0?i:n.name,writable:!1,configurable:!1,enumerable:!0})}return t}function hX(n){var e=n.name,t=e&&e.lastIndexOf(".")!==-1;if(t&&!n.type){var i=e.split(".").pop().toLowerCase(),a=fX.get(i);a&&Object.defineProperty(n,"type",{value:a,writable:!1,configurable:!1,enumerable:!0})}return n}var dX=[".DS_Store","Thumbs.db"];function pX(n){return Vd(this,void 0,void 0,function(){return kd(this,function(e){return ix(n)&&mX(n)?[2,_X(n.dataTransfer,n.type)]:gX(n)?[2,vX(n)]:Array.isArray(n)&&n.every(function(t){return"getFile"in t&&typeof t.getFile=="function"})?[2,yX(n)]:[2,[]]})})}function mX(n){return ix(n.dataTransfer)}function gX(n){return ix(n)&&ix(n.target)}function ix(n){return typeof n=="object"&&n!==null}function vX(n){return AM(n.target.files).map(function(e){return Sg(e)})}function yX(n){return Vd(this,void 0,void 0,function(){var e;return kd(this,function(t){switch(t.label){case 0:return[4,Promise.all(n.map(function(i){return i.getFile()}))];case 1:return e=t.sent(),[2,e.map(function(i){return Sg(i)})]}})})}function _X(n,e){return Vd(this,void 0,void 0,function(){var t,i;return kd(this,function(a){switch(a.label){case 0:return n===null?[2,[]]:n.items?(t=AM(n.items).filter(function(s){return s.kind==="file"}),e!=="drop"?[2,t]:[4,Promise.all(t.map(xX))]):[3,2];case 1:return i=a.sent(),[2,TD(CD(i))];case 2:return[2,TD(AM(n.files).map(function(s){return Sg(s)}))]}})})}function TD(n){return n.filter(function(e){return dX.indexOf(e.name)===-1})}function AM(n){if(n===null)return[];for(var e=[],t=0;t<n.length;t++){var i=n[t];e.push(i)}return e}function xX(n){if(typeof n.webkitGetAsEntry!="function")return RD(n);var e=n.webkitGetAsEntry();return e&&e.isDirectory?wD(e):RD(n)}function CD(n){return n.reduce(function(e,t){return uX(e,Array.isArray(t)?CD(t):[t])},[])}function RD(n){var e=n.getAsFile();if(!e)return Promise.reject(n+" is not a File");var t=Sg(e);return Promise.resolve(t)}function bX(n){return Vd(this,void 0,void 0,function(){return kd(this,function(e){return[2,n.isDirectory?wD(n):AX(n)]})})}function wD(n){var e=n.createReader();return new Promise(function(t,i){var a=[];function s(){var l=this;e.readEntries(function(c){return Vd(l,void 0,void 0,function(){var d,p,g;return kd(this,function(v){switch(v.label){case 0:if(c.length)return[3,5];v.label=1;case 1:return v.trys.push([1,3,,4]),[4,Promise.all(a)];case 2:return d=v.sent(),t(d),[3,4];case 3:return p=v.sent(),i(p),[3,4];case 4:return[3,6];case 5:g=Promise.all(c.map(bX)),a.push(g),s(),v.label=6;case 6:return[2]}})})},function(c){i(c)})}s()})}function AX(n){return Vd(this,void 0,void 0,function(){return kd(this,function(e){return[2,new Promise(function(t,i){n.file(function(a){var s=Sg(a,n.fullPath);t(s)},function(a){i(a)})})]})})}var ax={},BD;function SX(){return BD||(BD=1,ax.__esModule=!0,ax.default=function(n,e){if(n&&e){var t=Array.isArray(e)?e:e.split(",");if(t.length===0)return!0;var i=n.name||"",a=(n.type||"").toLowerCase(),s=a.replace(/\/.*$/,"");return t.some(function(l){var c=l.trim().toLowerCase();return c.charAt(0)==="."?i.toLowerCase().endsWith(c):c.endsWith("/*")?s===c.replace(/\/.*$/,""):a===c})}return!0}),ax}var MX=SX();const EX=Xu(MX);function DD(n,e){var t=Object.keys(n);if(Object.getOwnPropertySymbols){var i=Object.getOwnPropertySymbols(n);e&&(i=i.filter(function(a){return Object.getOwnPropertyDescriptor(n,a).enumerable})),t.push.apply(t,i)}return t}function OD(n){for(var e=1;e<arguments.length;e++){var t=arguments[e]!=null?arguments[e]:{};e%2?DD(Object(t),!0).forEach(function(i){ND(n,i,t[i])}):Object.getOwnPropertyDescriptors?Object.defineProperties(n,Object.getOwnPropertyDescriptors(t)):DD(Object(t)).forEach(function(i){Object.defineProperty(n,i,Object.getOwnPropertyDescriptor(t,i))})}return n}function ND(n,e,t){return e in n?Object.defineProperty(n,e,{value:t,enumerable:!0,configurable:!0,writable:!0}):n[e]=t,n}function UD(n,e){return wX(n)||RX(n,e)||CX(n,e)||TX()}function TX(){throw new TypeError(`Invalid attempt to destructure non-iterable instance.
In order to be iterable, non-array objects must have a [Symbol.iterator]() method.`)}function CX(n,e){if(n){if(typeof n=="string")return LD(n,e);var t=Object.prototype.toString.call(n).slice(8,-1);if(t==="Object"&&n.constructor&&(t=n.constructor.name),t==="Map"||t==="Set")return Array.from(n);if(t==="Arguments"||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(t))return LD(n,e)}}function LD(n,e){(e==null||e>n.length)&&(e=n.length);for(var t=0,i=new Array(e);t<e;t++)i[t]=n[t];return i}function RX(n,e){var t=n==null?null:typeof Symbol<"u"&&n[Symbol.iterator]||n["@@iterator"];if(t!=null){var i=[],a=!0,s=!1,l,c;try{for(t=t.call(n);!(a=(l=t.next()).done)&&(i.push(l.value),!(e&&i.length===e));a=!0);}catch(d){s=!0,c=d}finally{try{!a&&t.return!=null&&t.return()}finally{if(s)throw c}}return i}}function wX(n){if(Array.isArray(n))return n}var BX="file-invalid-type",DX="file-too-large",OX="file-too-small",NX="too-many-files",UX=function(e){e=Array.isArray(e)&&e.length===1?e[0]:e;var t=Array.isArray(e)?"one of ".concat(e.join(", ")):e;return{code:BX,message:"File type must be ".concat(t)}},ID=function(e){return{code:DX,message:"File is larger than ".concat(e," ").concat(e===1?"byte":"bytes")}},PD=function(e){return{code:OX,message:"File is smaller than ".concat(e," ").concat(e===1?"byte":"bytes")}},LX={code:NX,message:"Too many files"};function FD(n,e){var t=n.type==="application/x-moz-file"||EX(n,e);return[t,t?null:UX(e)]}function zD(n,e,t){if(Mg(n.size))if(Mg(e)&&Mg(t)){if(n.size>t)return[!1,ID(t)];if(n.size<e)return[!1,PD(e)]}else{if(Mg(e)&&n.size<e)return[!1,PD(e)];if(Mg(t)&&n.size>t)return[!1,ID(t)]}return[!0,null]}function Mg(n){return n!=null}function IX(n){var e=n.files,t=n.accept,i=n.minSize,a=n.maxSize,s=n.multiple,l=n.maxFiles;return!s&&e.length>1||s&&l>=1&&e.length>l?!1:e.every(function(c){var d=FD(c,t),p=UD(d,1),g=p[0],v=zD(c,i,a),_=UD(v,1),x=_[0];return g&&x})}function rx(n){return typeof n.isPropagationStopped=="function"?n.isPropagationStopped():typeof n.cancelBubble<"u"?n.cancelBubble:!1}function sx(n){return n.dataTransfer?Array.prototype.some.call(n.dataTransfer.types,function(e){return e==="Files"||e==="application/x-moz-file"}):!!n.target&&!!n.target.files}function HD(n){n.preventDefault()}function PX(n){return n.indexOf("MSIE")!==-1||n.indexOf("Trident/")!==-1}function FX(n){return n.indexOf("Edge/")!==-1}function zX(){var n=arguments.length>0&&arguments[0]!==void 0?arguments[0]:window.navigator.userAgent;return PX(n)||FX(n)}function jo(){for(var n=arguments.length,e=new Array(n),t=0;t<n;t++)e[t]=arguments[t];return function(i){for(var a=arguments.length,s=new Array(a>1?a-1:0),l=1;l<a;l++)s[l-1]=arguments[l];return e.some(function(c){return!rx(i)&&c&&c.apply(void 0,[i].concat(s)),rx(i)})}}function HX(){return"showOpenFilePicker"in window}function GX(n){return n=typeof n=="string"?n.split(","):n,[{description:"everything",accept:Array.isArray(n)?n.filter(function(e){return e==="audio/*"||e==="video/*"||e==="image/*"||e==="text/*"||/\w+\/[-+.\w]+/g.test(e)}).reduce(function(e,t){return OD(OD({},e),{},ND({},t,[]))},{}):{}}]}function VX(n){return n instanceof DOMException&&(n.name==="AbortError"||n.code===n.ABORT_ERR)}function kX(n){return n instanceof DOMException&&(n.name==="SecurityError"||n.code===n.SECURITY_ERR)}var XX=["children"],jX=["open"],YX=["refKey","role","onKeyDown","onFocus","onBlur","onClick","onDragEnter","onDragOver","onDragLeave","onDrop"],qX=["refKey","onChange","onClick"];function WX(n){return QX(n)||KX(n)||GD(n)||JX()}function JX(){throw new TypeError(`Invalid attempt to spread non-iterable instance.
In order to be iterable, non-array objects must have a [Symbol.iterator]() method.`)}function KX(n){if(typeof Symbol<"u"&&n[Symbol.iterator]!=null||n["@@iterator"]!=null)return Array.from(n)}function QX(n){if(Array.isArray(n))return MM(n)}function SM(n,e){return ej(n)||$X(n,e)||GD(n,e)||ZX()}function ZX(){throw new TypeError(`Invalid attempt to destructure non-iterable instance.
In order to be iterable, non-array objects must have a [Symbol.iterator]() method.`)}function GD(n,e){if(n){if(typeof n=="string")return MM(n,e);var t=Object.prototype.toString.call(n).slice(8,-1);if(t==="Object"&&n.constructor&&(t=n.constructor.name),t==="Map"||t==="Set")return Array.from(n);if(t==="Arguments"||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(t))return MM(n,e)}}function MM(n,e){(e==null||e>n.length)&&(e=n.length);for(var t=0,i=new Array(e);t<e;t++)i[t]=n[t];return i}function $X(n,e){var t=n==null?null:typeof Symbol<"u"&&n[Symbol.iterator]||n["@@iterator"];if(t!=null){var i=[],a=!0,s=!1,l,c;try{for(t=t.call(n);!(a=(l=t.next()).done)&&(i.push(l.value),!(e&&i.length===e));a=!0);}catch(d){s=!0,c=d}finally{try{!a&&t.return!=null&&t.return()}finally{if(s)throw c}}return i}}function ej(n){if(Array.isArray(n))return n}function VD(n,e){var t=Object.keys(n);if(Object.getOwnPropertySymbols){var i=Object.getOwnPropertySymbols(n);e&&(i=i.filter(function(a){return Object.getOwnPropertyDescriptor(n,a).enumerable})),t.push.apply(t,i)}return t}function yi(n){for(var e=1;e<arguments.length;e++){var t=arguments[e]!=null?arguments[e]:{};e%2?VD(Object(t),!0).forEach(function(i){EM(n,i,t[i])}):Object.getOwnPropertyDescriptors?Object.defineProperties(n,Object.getOwnPropertyDescriptors(t)):VD(Object(t)).forEach(function(i){Object.defineProperty(n,i,Object.getOwnPropertyDescriptor(t,i))})}return n}function EM(n,e,t){return e in n?Object.defineProperty(n,e,{value:t,enumerable:!0,configurable:!0,writable:!0}):n[e]=t,n}function ox(n,e){if(n==null)return{};var t=tj(n,e),i,a;if(Object.getOwnPropertySymbols){var s=Object.getOwnPropertySymbols(n);for(a=0;a<s.length;a++)i=s[a],!(e.indexOf(i)>=0)&&Object.prototype.propertyIsEnumerable.call(n,i)&&(t[i]=n[i])}return t}function tj(n,e){if(n==null)return{};var t={},i=Object.keys(n),a,s;for(s=0;s<i.length;s++)a=i[s],!(e.indexOf(a)>=0)&&(t[a]=n[a]);return t}var TM=H.forwardRef(function(n,e){var t=n.children,i=ox(n,XX),a=XD(i),s=a.open,l=ox(a,jX);return H.useImperativeHandle(e,function(){return{open:s}},[s]),ee.createElement(H.Fragment,null,t(yi(yi({},l),{},{open:s})))});TM.displayName="Dropzone";var kD={disabled:!1,getFilesFromEvent:pX,maxSize:1/0,minSize:0,multiple:!0,maxFiles:0,preventDropOnDocument:!0,noClick:!1,noKeyboard:!1,noDrag:!1,noDragEventsBubbling:!1,validator:null,useFsAccessApi:!0};TM.defaultProps=kD,TM.propTypes={children:ri.func,accept:ri.oneOfType([ri.string,ri.arrayOf(ri.string)]),multiple:ri.bool,preventDropOnDocument:ri.bool,noClick:ri.bool,noKeyboard:ri.bool,noDrag:ri.bool,noDragEventsBubbling:ri.bool,minSize:ri.number,maxSize:ri.number,maxFiles:ri.number,disabled:ri.bool,getFilesFromEvent:ri.func,onFileDialogCancel:ri.func,onFileDialogOpen:ri.func,useFsAccessApi:ri.bool,onDragEnter:ri.func,onDragLeave:ri.func,onDragOver:ri.func,onDrop:ri.func,onDropAccepted:ri.func,onDropRejected:ri.func,validator:ri.func};var CM={isFocused:!1,isFileDialogActive:!1,isDragActive:!1,isDragAccept:!1,isDragReject:!1,draggedFiles:[],acceptedFiles:[],fileRejections:[]};function XD(){var n=arguments.length>0&&arguments[0]!==void 0?arguments[0]:{},e=yi(yi({},kD),n),t=e.accept,i=e.disabled,a=e.getFilesFromEvent,s=e.maxSize,l=e.minSize,c=e.multiple,d=e.maxFiles,p=e.onDragEnter,g=e.onDragLeave,v=e.onDragOver,_=e.onDrop,x=e.onDropAccepted,S=e.onDropRejected,C=e.onFileDialogCancel,T=e.onFileDialogOpen,M=e.useFsAccessApi,w=e.preventDropOnDocument,B=e.noClick,D=e.noKeyboard,P=e.noDrag,U=e.noDragEventsBubbling,z=e.validator,j=H.useMemo(function(){return typeof T=="function"?T:jD},[T]),L=H.useMemo(function(){return typeof C=="function"?C:jD},[C]),F=H.useRef(null),W=H.useRef(null),te=H.useReducer(nj,CM),$=SM(te,2),ae=$[0],le=$[1],G=ae.isFocused,J=ae.isFileDialogActive,Z=ae.draggedFiles,pe=H.useRef(typeof window<"u"&&window.isSecureContext&&M&&HX()),_e=function(){!pe.current&&J&&setTimeout(function(){if(W.current){var I=W.current.files;I.length||(le({type:"closeDialog"}),L())}},300)};H.useEffect(function(){return window.addEventListener("focus",_e,!1),function(){window.removeEventListener("focus",_e,!1)}},[W,J,L,pe]);var q=H.useRef([]),ce=function(I){F.current&&F.current.contains(I.target)||(I.preventDefault(),q.current=[])};H.useEffect(function(){return w&&(document.addEventListener("dragover",HD,!1),document.addEventListener("drop",ce,!1)),function(){w&&(document.removeEventListener("dragover",HD),document.removeEventListener("drop",ce))}},[F,w]);var Te=H.useCallback(function(V){V.preventDefault(),V.persist(),Ie(V),q.current=[].concat(WX(q.current),[V.target]),sx(V)&&Promise.resolve(a(V)).then(function(I){rx(V)&&!U||(le({draggedFiles:I,isDragActive:!0,type:"setDraggedFiles"}),p&&p(V))})},[a,p,U]),De=H.useCallback(function(V){V.preventDefault(),V.persist(),Ie(V);var I=sx(V);if(I&&V.dataTransfer)try{V.dataTransfer.dropEffect="copy"}catch{}return I&&v&&v(V),!1},[v,U]),qe=H.useCallback(function(V){V.preventDefault(),V.persist(),Ie(V);var I=q.current.filter(function(Ae){return F.current&&F.current.contains(Ae)}),re=I.indexOf(V.target);re!==-1&&I.splice(re,1),q.current=I,!(I.length>0)&&(le({isDragActive:!1,type:"setDraggedFiles",draggedFiles:[]}),sx(V)&&g&&g(V))},[F,g,U]),ge=H.useCallback(function(V,I){var re=[],Ae=[];V.forEach(function(Be){var Re=FD(Be,t),pt=SM(Re,2),Qe=pt[0],gt=pt[1],wt=zD(Be,l,s),Fe=SM(wt,2),ke=Fe[0],nt=Fe[1],it=z?z(Be):null;if(Qe&&ke&&!it)re.push(Be);else{var Je=[gt,nt];it&&(Je=Je.concat(it)),Ae.push({file:Be,errors:Je.filter(function(Yt){return Yt})})}}),(!c&&re.length>1||c&&d>=1&&re.length>d)&&(re.forEach(function(Be){Ae.push({file:Be,errors:[LX]})}),re.splice(0)),le({acceptedFiles:re,fileRejections:Ae,type:"setFiles"}),_&&_(re,Ae,I),Ae.length>0&&S&&S(Ae,I),re.length>0&&x&&x(re,I)},[le,c,t,l,s,d,_,x,S,z]),Ee=H.useCallback(function(V){V.preventDefault(),V.persist(),Ie(V),q.current=[],sx(V)&&Promise.resolve(a(V)).then(function(I){rx(V)&&!U||ge(I,V)}),le({type:"reset"})},[a,ge,U]),Xe=H.useCallback(function(){if(pe.current){le({type:"openDialog"}),j();var V={multiple:c,types:GX(t)};window.showOpenFilePicker(V).then(function(I){return a(I)}).then(function(I){ge(I,null),le({type:"closeDialog"})}).catch(function(I){VX(I)?(L(I),le({type:"closeDialog"})):kX(I)&&(pe.current=!1,W.current&&(W.current.value=null,W.current.click()))});return}W.current&&(le({type:"openDialog"}),j(),W.current.value=null,W.current.click())},[le,j,L,M,ge,t,c]),tt=H.useCallback(function(V){!F.current||!F.current.isEqualNode(V.target)||(V.key===" "||V.key==="Enter"||V.keyCode===32||V.keyCode===13)&&(V.preventDefault(),Xe())},[F,Xe]),ot=H.useCallback(function(){le({type:"focus"})},[]),Vt=H.useCallback(function(){le({type:"blur"})},[]),en=H.useCallback(function(){B||(zX()?setTimeout(Xe,0):Xe())},[B,Xe]),Et=function(I){return i?null:I},Ne=function(I){return D?null:Et(I)},Ge=function(I){return P?null:Et(I)},Ie=function(I){U&&I.stopPropagation()},et=H.useMemo(function(){return function(){var V=arguments.length>0&&arguments[0]!==void 0?arguments[0]:{},I=V.refKey,re=I===void 0?"ref":I,Ae=V.role,Be=V.onKeyDown,Re=V.onFocus,pt=V.onBlur,Qe=V.onClick,gt=V.onDragEnter,wt=V.onDragOver,Fe=V.onDragLeave,ke=V.onDrop,nt=ox(V,YX);return yi(yi(EM({onKeyDown:Ne(jo(Be,tt)),onFocus:Ne(jo(Re,ot)),onBlur:Ne(jo(pt,Vt)),onClick:Et(jo(Qe,en)),onDragEnter:Ge(jo(gt,Te)),onDragOver:Ge(jo(wt,De)),onDragLeave:Ge(jo(Fe,qe)),onDrop:Ge(jo(ke,Ee)),role:typeof Ae=="string"&&Ae!==""?Ae:"button"},re,F),!i&&!D?{tabIndex:0}:{}),nt)}},[F,tt,ot,Vt,en,Te,De,qe,Ee,D,P,i]),Q=H.useCallback(function(V){V.stopPropagation()},[]),Tt=H.useMemo(function(){return function(){var V=arguments.length>0&&arguments[0]!==void 0?arguments[0]:{},I=V.refKey,re=I===void 0?"ref":I,Ae=V.onChange,Be=V.onClick,Re=ox(V,qX),pt=EM({accept:t,multiple:c,type:"file",style:{display:"none"},onChange:Et(jo(Ae,Ee)),onClick:Et(jo(Be,Q)),tabIndex:-1},re,W);return yi(yi({},pt),Re)}},[W,t,c,Ee,i]),Ze=Z.length,At=Ze>0&&IX({files:Z,accept:t,minSize:l,maxSize:s,multiple:c,maxFiles:d}),Ke=Ze>0&&!At;return yi(yi({},ae),{},{isDragAccept:At,isDragReject:Ke,isFocused:G&&!i,getRootProps:et,getInputProps:Tt,rootRef:F,inputRef:W,open:Et(Xe)})}function nj(n,e){switch(e.type){case"focus":return yi(yi({},n),{},{isFocused:!0});case"blur":return yi(yi({},n),{},{isFocused:!1});case"openDialog":return yi(yi({},CM),{},{isFileDialogActive:!0});case"closeDialog":return yi(yi({},n),{},{isFileDialogActive:!1});case"setDraggedFiles":var t=e.isDragActive,i=e.draggedFiles;return yi(yi({},n),{},{draggedFiles:i,isDragActive:t});case"setFiles":return yi(yi({},n),{},{acceptedFiles:e.acceptedFiles,fileRejections:e.fileRejections});case"reset":return yi({},CM);default:return n}}function jD(){}function ij(n){let e;const t=new Set,i=(p,g)=>{const v=typeof p=="function"?p(e):p;if(v!==e){const _=e;e=g?v:Object.assign({},e,v),t.forEach(x=>x(e,_))}},a=()=>e,s=(p,g=a,v=Object.is)=>{console.warn("[DEPRECATED] Please use `subscribeWithSelector` middleware");let _=g(e);function x(){const S=g(e);if(!v(_,S)){const C=_;p(_=S,C)}}return t.add(x),()=>t.delete(x)},d={setState:i,getState:a,subscribe:(p,g,v)=>g||v?s(p,g,v):(t.add(p),()=>t.delete(p)),destroy:()=>t.clear()};return e=n(i,a,d),d}const YD=typeof window>"u"||!window.navigator||/ServerSideRendering|^Deno\//.test(window.navigator.userAgent)?H.useEffect:H.useLayoutEffect;function aj(n){const e=typeof n=="function"?ij(n):n,t=(i=e.getState,a=Object.is)=>{const[,s]=H.useReducer(T=>T+1,0),l=e.getState(),c=H.useRef(l),d=H.useRef(i),p=H.useRef(a),g=H.useRef(!1),v=H.useRef();v.current===void 0&&(v.current=i(l));let _,x=!1;(c.current!==l||d.current!==i||p.current!==a||g.current)&&(_=i(l),x=!a(v.current,_)),YD(()=>{x&&(v.current=_),c.current=l,d.current=i,p.current=a,g.current=!1});const S=H.useRef(l);YD(()=>{const T=()=>{try{const w=e.getState(),B=d.current(w);p.current(v.current,B)||(c.current=w,v.current=B,s())}catch{g.current=!0,s()}},M=e.subscribe(T);return e.getState()!==S.current&&T(),M},[]);const C=x?_:v.current;return H.useDebugValue(C),C};return Object.assign(t,e),t[Symbol.iterator]=function(){console.warn("[useStore, api] = create() is deprecated and will be removed in v4");const i=[t,e];return{next(){const a=i.length<=0;return{value:i.shift(),done:a}}}},t}const rj=n=>(e,t,i)=>{const a=i.subscribe;return i.subscribe=(l,c,d)=>{let p=l;if(c){const g=d?.equalityFn||Object.is;let v=l(i.getState());p=_=>{const x=l(_);if(!g(v,x)){const S=v;c(v=x,S)}},d?.fireImmediately&&c(v,v)}return a(p)},n(e,t,i)};var RM,qD;function sj(){return qD||(qD=1,RM=function(e){return e!=null&&typeof e=="object"&&Array.isArray(e)===!1}),RM}var wM,WD;function JD(){if(WD)return wM;WD=1;var n=sj();function e(t){return n(t)===!0&&Object.prototype.toString.call(t)==="[object Object]"}return wM=function(i){var a,s;return!(e(i)===!1||(a=i.constructor,typeof a!="function")||(s=a.prototype,e(s)===!1)||s.hasOwnProperty("isPrototypeOf")===!1)},wM}var BM,KD;function DM(){if(KD)return BM;KD=1;var n=JD();return BM=function(t){return n(t)||typeof t=="function"||Array.isArray(t)},BM}var OM,QD;function oj(){return QD||(QD=1,OM=function(e,t,i){for(var a in e)if(t.call(i,e[a],a,e)===!1)break}),OM}var NM,ZD;function lj(){if(ZD)return NM;ZD=1;var n=DM(),e=oj();function t(l,c){for(var d=arguments.length,p=0;++p<d;){var g=arguments[p];a(g)&&e(g,i,l)}return l}function i(l,c){if(s(c)){var d=this[c];a(l)&&a(d)?t(d,l):this[c]=l}}function a(l){return n(l)&&!Array.isArray(l)}function s(l){return l!=="__proto__"&&l!=="constructor"&&l!=="prototype"}return NM=t,NM}var UM,$D;function cj(){if($D)return UM;$D=1,UM=function(t,i,a,s,l){if(!n(t)||!i)return t;if(i=e(i),a&&(i+="."+e(a)),s&&(i+="."+e(s)),l&&(i+="."+e(l)),i in t)return t[i];for(var c=i.split("."),d=c.length,p=-1;t&&++p<d;){for(var g=c[p];g[g.length-1]==="\\";)g=g.slice(0,-1)+"."+c[++p];t=t[g]}return t};function n(t){return t!==null&&(typeof t=="object"||typeof t=="function")}function e(t){return t?Array.isArray(t)?t.join("."):t:""}return UM}var LM,eO;function uj(){return eO||(eO=1,LM=function(n,e){if(n===null||typeof n>"u")throw new TypeError("expected first argument to be an object.");if(typeof e>"u"||typeof Symbol>"u"||typeof Object.getOwnPropertySymbols!="function")return n;for(var t=Object.prototype.propertyIsEnumerable,i=Object(n),a=arguments.length,s=0;++s<a;)for(var l=Object(arguments[s]),c=Object.getOwnPropertySymbols(l),d=0;d<c.length;d++){var p=c[d];t.call(l,p)&&(i[p]=l[p])}return i}),LM}var IM,tO;function fj(){if(tO)return IM;tO=1;var n=DM(),e=uj();IM=Object.assign||function(c){if(c===null||typeof c>"u")throw new TypeError("Cannot convert undefined or null to object");s(c)||(c={});for(var d=1;d<arguments.length;d++){var p=arguments[d];i(p)&&(p=a(p)),s(p)&&(t(c,p),e(c,p))}return c};function t(c,d){for(var p in d)l(d,p)&&(c[p]=d[p])}function i(c){return c&&typeof c=="string"}function a(c){var d={};for(var p in c)d[p]=c[p];return d}function s(c){return c&&typeof c=="object"||n(c)}function l(c,d){return Object.prototype.hasOwnProperty.call(c,d)}return IM}var PM,nO;function hj(){if(nO)return PM;nO=1;var n=fj();PM=function(a,s,l){if(typeof a!="string")throw new TypeError("expected a string");typeof s=="function"&&(l=s,s=null),typeof s=="string"&&(s={sep:s});var c=n({sep:"."},s),d=c.quotes||['"',"'","`"],p;c.brackets===!0?p={"<":">","(":")","[":"]","{":"}"}:c.brackets&&(p=c.brackets);var g=[],v=[],_=[""],x=c.sep,S=a.length,C=-1,T;function M(){if(p&&v.length)return p[v[v.length-1]]}for(;++C<S;){var w=a[C],B=a[C+1],D={val:w,idx:C,arr:_,str:a};if(g.push(D),w==="\\"){D.val=i(c,a,C)===!0?w+B:B,D.escaped=!0,typeof l=="function"&&l(D),_[_.length-1]+=D.val,C++;continue}if(p&&p[w]){v.push(w);var P=M(),U=C+1;if(a.indexOf(P,U+1)!==-1)for(;v.length&&U<S;){var z=a[++U];if(z==="\\"){z++;continue}if(d.indexOf(z)!==-1){U=e(a,z,U+1);continue}if(P=M(),v.length&&a.indexOf(P,U+1)===-1)break;if(p[z]){v.push(z);continue}P===z&&v.pop()}if(T=U,T===-1){_[_.length-1]+=w;continue}w=a.slice(C,T+1),D.val=w,D.idx=C=T}if(d.indexOf(w)!==-1){if(T=e(a,w,C+1),T===-1){_[_.length-1]+=w;continue}t(w,c)===!0?w=a.slice(C,T+1):w=a.slice(C+1,T),D.val=w,D.idx=C=T}if(typeof l=="function"&&(l(D,g),w=D.val,C=D.idx),D.val===x&&D.split!==!1){_.push("");continue}_[_.length-1]+=D.val}return _};function e(a,s,l,c){var d=a.indexOf(s,l);return a.charAt(d-1)==="\\"?e(a,s,d+1):d}function t(a,s){return s.keepDoubleQuotes===!0&&a==='"'||s.keepSingleQuotes===!0&&a==="'"?!0:s.keepQuotes}function i(a,s,l){return typeof a.keepEscaping=="function"?a.keepEscaping(s,l):a.keepEscaping===!0||s[l+1]==="\\"}return PM}var FM,iO;function dj(){return iO||(iO=1,FM=function(e){return typeof e<"u"&&e!==null&&(typeof e=="object"||typeof e=="function")}),FM}var zM,aO;function pj(){if(aO)return zM;aO=1;var n=dj();zM=function(a){n(a)||(a={});for(var s=arguments.length,l=1;l<s;l++){var c=arguments[l];n(c)&&e(a,c)}return a};function e(i,a){for(var s in a)t(a,s)&&(i[s]=a[s])}function t(i,a){return Object.prototype.hasOwnProperty.call(i,a)}return zM}var HM,rO;function mj(){return rO||(rO=1,HM=function(e){return typeof e<"u"&&e!==null&&(typeof e=="object"||typeof e=="function")}),HM}var GM,sO;function gj(){if(sO)return GM;sO=1;var n=hj(),e=pj(),t=JD(),i=mj();GM=function(s,l,c){if(!i(s)||(Array.isArray(l)&&(l=[].concat.apply([],l).join(".")),typeof l!="string"))return s;for(var d=n(l,{sep:".",brackets:!0}).filter(a),p=d.length,g=-1,v=s;++g<p;){var _=d[g];if(g!==p-1){i(v[_])||(v[_]={}),v=v[_];continue}t(v[_])&&t(c)?v[_]=e({},v[_],c):v[_]=c}return s};function a(s){return s!=="__proto__"&&s!=="constructor"&&s!=="prototype"}return GM}var VM,oO;function vj(){if(oO)return VM;oO=1;var n=DM(),e=lj(),t=cj(),i=gj();return VM=function(s,l,c){if(!n(s))throw new TypeError("expected an object");if(typeof l!="string"||c==null)return e.apply(null,arguments);if(typeof c=="string")return i(s,l,c),s;var d=t(s,l);return n(c)&&n(d)&&(c=e({},d,c)),i(s,l,c),s},VM}var yj=vj();const _j=Xu(yj),kM=(...n)=>n.filter(Boolean).join(".");function xj(n){const e=n.split(".");return[e.pop(),e.join(".")||void 0]}function bj(n,e){const t=H.useRef();return sg(n,t.current)||(t.current=n),t.current}function Aj(n,e){var t;return H.useMemo(n,(t=bj(e))!==null&&t!==void 0?t:[])}function Sj(n){const e=H.useRef(null),t=H.useRef(null),i=H.useRef(!0);return H.useLayoutEffect(()=>{n||(e.current.style.height="0px",e.current.style.overflow="hidden")},[]),H.useEffect(()=>{if(i.current){i.current=!1;return}let a;const s=e.current,l=()=>{n&&(s.style.removeProperty("height"),s.style.removeProperty("overflow"),t.current.scrollIntoView({behavior:"smooth",block:"nearest"}))};s.addEventListener("transitionend",l,{once:!0});const{height:c}=t.current.getBoundingClientRect();return s.style.height=c+"px",n||(s.style.overflow="hidden",a=window.setTimeout(()=>s.style.height="0px",50)),()=>{s.removeEventListener("transitionend",l),clearTimeout(a)}},[n]),{wrapperRef:e,contentRef:t}}const Mj=n=>{const[e,t]=H.useState(n.getVisiblePaths());return H.useEffect(()=>{t(n.getVisiblePaths());const i=n.useStore.subscribe(n.getVisiblePaths,t,{equalityFn:sB});return()=>i()},[n]),e};function lO(n=3){const e=H.useRef(null),t=H.useRef(null),[i,a]=H.useState(!1),s=H.useCallback(()=>a(!0),[]),l=H.useCallback(()=>a(!1),[]);return H.useLayoutEffect(()=>{if(i){const{bottom:c,top:d,left:p}=e.current.getBoundingClientRect(),{height:g}=t.current.getBoundingClientRect(),v=c+g>window.innerHeight-40?"up":"down";t.current.style.position="fixed",t.current.style.zIndex="10000",t.current.style.left=p+"px",v==="down"?t.current.style.top=c+n+"px":t.current.style.bottom=window.innerHeight-d+n+"px"}},[n,i]),{popinRef:e,wrapperRef:t,shown:i,show:s,hide:l}}Wk([Jk]);const Ej={rgb:"toRgb",hsl:"toHsl",hsv:"toHsv",hex:"toHex"};Ur.extend({color:()=>n=>lr(n).isValid()});const Tj=n=>Ur().color().test(n);function cO(n,{format:e,hasAlpha:t,isString:i}){const a=Ej[e]+(i&&e!=="hex"?"String":""),s=n[a]();return typeof s=="object"&&!t?A7(s,["a"]):s}const uO=(n,e)=>{const t=lr(n);if(!t.isValid())throw Error("Invalid color");return cO(t,e)};var Cj=Object.freeze({__proto__:null,schema:Tj,sanitize:uO,format:(n,e)=>cO(lr(n),$t($t({},e),{},{isString:!0,format:"hex"})),normalize:({value:n})=>{const e=qk(n),t=e==="name"?"hex":e,i=typeof n=="object"?"a"in n:e==="hex"&&n.length===8||/^(rgba)|(hsla)|(hsva)/.test(n),a={format:t,hasAlpha:i,isString:typeof n=="string"};return{value:uO(n,a),settings:a}}});const Rj=zt("div",{position:"relative",boxSizing:"border-box",borderRadius:"$sm",overflow:"hidden",cursor:"pointer",height:"$rowHeight",width:"$rowHeight",backgroundColor:"#fff",backgroundImage:`url('data:image/svg+xml;charset=utf-8,<svg xmlns="http://www.w3.org/2000/svg" width="16" height="16" fill-opacity=".05"><path d="M8 0h8v8H8zM0 8h8v8H0z"/></svg>')`,$inputStyle:"",$hover:"",zIndex:1,variants:{active:{true:{$inputStyle:"$accent1"}}},"&::before":{content:'""',position:"absolute",top:0,bottom:0,right:0,left:0,backgroundColor:"currentColor",zIndex:1}}),wj=zt("div",{position:"relative",display:"grid",gridTemplateColumns:"$sizes$rowHeight auto",columnGap:"$colGap",alignItems:"center"}),Bj=zt("div",{width:"$colorPickerWidth",height:"$colorPickerHeight",".react-colorful":{width:"100%",height:"100%",boxShadow:"$level2",cursor:"crosshair"},".react-colorful__saturation":{borderRadius:"$sm $sm 0 0"},".react-colorful__alpha, .react-colorful__hue":{height:10},".react-colorful__last-control":{borderRadius:"0 0 $sm $sm"},".react-colorful__pointer":{height:12,width:12}});function fO(n,e){return e!=="rgb"?lr(n).toRgb():n}function Dj({value:n,displayValue:e,settings:t,onUpdate:i}){const{emitOnEditStart:a,emitOnEditEnd:s}=Ga(),{format:l,hasAlpha:c}=t,{popinRef:d,wrapperRef:p,shown:g,show:v,hide:_}=lO(),x=H.useRef(0),[S,C]=H.useState(()=>fO(n,l)),T=c?nX:aX,M=()=>{C(fO(n,l)),v(),a()},w=()=>{_(),s(),window.clearTimeout(x.current)},B=()=>{x.current=window.setTimeout(w,500)};return H.useEffect(()=>()=>window.clearTimeout(x.current),[]),ee.createElement(ee.Fragment,null,ee.createElement(Rj,{ref:d,active:g,onClick:()=>M(),style:{color:e}}),g&&ee.createElement(eM,null,ee.createElement(q3,{onPointerUp:w}),ee.createElement(Bj,{ref:p,onMouseEnter:()=>window.clearTimeout(x.current),onMouseLeave:D=>D.buttons===0&&B()},ee.createElement(T,{color:S,onChange:i}))))}function Oj(){const{value:n,displayValue:e,label:t,onChange:i,onUpdate:a,settings:s}=Ga();return ee.createElement(Es,{input:!0},ee.createElement(ro,null,t),ee.createElement(wj,null,ee.createElement(Dj,{value:n,displayValue:e,onChange:i,onUpdate:a,settings:s}),ee.createElement(Q1,{value:e,onChange:i,onUpdate:a})))}var Nj=$t({component:Oj},Cj);function Uj(){const{label:n,displayValue:e,onUpdate:t,settings:i}=Ga();return ee.createElement(Es,{input:!0},ee.createElement(ro,null,n),ee.createElement(rM,{value:e,settings:i,onUpdate:t}))}var Lj=$t({component:Uj},tD(["x","y","z"]));const Ij=zt("div",{$flexCenter:"",position:"relative",backgroundColor:"$elevation3",borderRadius:"$sm",cursor:"pointer",height:"$rowHeight",width:"$rowHeight",touchAction:"none",$draggable:"",$hover:"","&:active":{cursor:"none"},"&::after":{content:'""',backgroundColor:"$accent2",height:4,width:4,borderRadius:2}}),Pj=zt("div",{$flexCenter:"",width:"$joystickWidth",height:"$joystickHeight",borderRadius:"$sm",boxShadow:"$level2",position:"fixed",zIndex:1e4,overflow:"hidden",$draggable:"",transform:"translate(-50%, -50%)",variants:{isOutOfBounds:{true:{backgroundColor:"$elevation1"},false:{backgroundColor:"$elevation3"}}},"> div":{position:"absolute",$flexCenter:"",borderStyle:"solid",borderWidth:1,borderColor:"$highlight1",backgroundColor:"$elevation3",width:"80%",height:"80%","&::after,&::before":{content:'""',position:"absolute",zindex:10,backgroundColor:"$highlight1"},"&::before":{width:"100%",height:1},"&::after":{height:"100%",width:1}},"> span":{position:"relative",zindex:100,width:10,height:10,backgroundColor:"$accent2",borderRadius:"50%"}});function Fj({value:n,settings:e,onUpdate:t}){const i=H.useRef(),a=H.useRef(0),s=H.useRef(0),l=H.useRef(1),[c,d]=H.useState(!1),[p,g]=H.useState(!1),[v,_]=J3(),x=H.useRef(null),S=H.useRef(null);H.useLayoutEffect(()=>{if(c){const{top:te,left:$,width:ae,height:le}=x.current.getBoundingClientRect();S.current.style.left=$+ae/2+"px",S.current.style.top=te+le/2+"px"}},[c]);const{keys:[C,T],joystick:M}=e,w=M==="invertY"?1:-1,{[C]:{step:B},[T]:{step:D}}=e,P=Wl("sizes","joystickWidth"),U=Wl("sizes","joystickHeight"),z=parseFloat(P)*.8/2,j=parseFloat(U)*.8/2,L=H.useCallback(()=>{i.current||(g(!0),a.current&&_({x:a.current*z}),s.current&&_({y:s.current*-j}),i.current=window.setInterval(()=>{t(te=>{const $=B*a.current*l.current,ae=w*D*s.current*l.current;return Array.isArray(te)?{[C]:te[0]+$,[T]:te[1]+ae}:{[C]:te[C]+$,[T]:te[T]+ae}})},16))},[z,j,t,_,B,D,C,T,w]),F=H.useCallback(()=>{window.clearTimeout(i.current),i.current=void 0,g(!1)},[]);H.useEffect(()=>{function te($){l.current=N3($)}return window.addEventListener("keydown",te),window.addEventListener("keyup",te),()=>{window.clearTimeout(i.current),window.removeEventListener("keydown",te),window.removeEventListener("keyup",te)}},[]);const W=yg(({first:te,active:$,delta:[ae,le],movement:[G,J]})=>{te&&d(!0);const Z=au(G,-z,z),pe=au(J,-j,j);a.current=Math.abs(G)>Math.abs(Z)?Math.sign(G-Z):0,s.current=Math.abs(J)>Math.abs(pe)?Math.sign(pe-J):0;let _e=n[C],q=n[T];$?(a.current||(_e+=ae*B*l.current,_({x:Z})),s.current||(q-=w*le*D*l.current,_({y:pe})),a.current||s.current?L():F(),t({[C]:_e,[T]:q})):(d(!1),a.current=0,s.current=0,_({x:0,y:0}),F())});return ee.createElement(Ij,Ci({ref:x},W()),c&&ee.createElement(eM,null,ee.createElement(Pj,{ref:S,isOutOfBounds:p},ee.createElement("div",null),ee.createElement("span",{ref:v}))))}const zj=zt("div",{display:"grid",columnGap:"$colGap",variants:{withJoystick:{true:{gridTemplateColumns:"$sizes$rowHeight auto"},false:{gridTemplateColumns:"auto"}}}});function Hj(){const{label:n,displayValue:e,onUpdate:t,settings:i}=Ga();return ee.createElement(Es,{input:!0},ee.createElement(ro,null,n),ee.createElement(zj,{withJoystick:!!i.joystick},i.joystick&&ee.createElement(Fj,{value:e,settings:i,onUpdate:t}),ee.createElement(rM,{value:e,settings:i,onUpdate:t})))}const Gj=["joystick"],hO=tD(["x","y"]),Vj=n=>{let{joystick:e=!0}=n,t=qn(n,Gj);const{value:i,settings:a}=hO.normalize(t);return{value:i,settings:$t($t({},a),{},{joystick:e})}};var kj=$t($t({component:Hj},hO),{},{normalize:Vj}),Xj=Object.freeze({__proto__:null,sanitize:n=>{if(n!==void 0){if(n instanceof File)try{return URL.createObjectURL(n)}catch{return}if(typeof n=="string"&&n.indexOf("blob:")===0)return n;throw Error("Invalid image format [undefined | blob |File].")}},schema:(n,e)=>typeof e=="object"&&"image"in e,normalize:({image:n})=>({value:n})});const jj=zt("div",{position:"relative",display:"grid",gridTemplateColumns:"$sizes$rowHeight auto 20px",columnGap:"$colGap",alignItems:"center"}),Yj=zt("div",{$flexCenter:"",overflow:"hidden",height:"$rowHeight",background:"$elevation3",textAlign:"center",color:"inherit",borderRadius:"$sm",outline:"none",userSelect:"none",cursor:"pointer",$inputStyle:"",$hover:"",$focusWithin:"",$active:"$accent1 $elevation1",variants:{isDragAccept:{true:{$inputStyle:"$accent1",backgroundColor:"$elevation1"}}}}),qj=zt("div",{boxSizing:"border-box",borderRadius:"$sm",height:"$rowHeight",width:"$rowHeight",$inputStyle:"",backgroundSize:"cover",backgroundPosition:"center",variants:{hasImage:{true:{cursor:"pointer",$hover:"",$active:""}}}}),Wj=zt("div",{$flexCenter:"",width:"$imagePreviewWidth",height:"$imagePreviewHeight",borderRadius:"$sm",boxShadow:"$level2",pointerEvents:"none",$inputStyle:"",backgroundSize:"cover",backgroundPosition:"center"}),Jj=zt("div",{fontSize:"0.8em",height:"100%",padding:"$rowGap $md"}),Kj=zt("div",{$flexCenter:"",top:"0",right:"0",marginRight:"$sm",height:"100%",cursor:"pointer",variants:{disabled:{true:{color:"$elevation3",cursor:"default"}}},"&::after,&::before":{content:'""',position:"absolute",height:2,width:10,borderRadius:1,backgroundColor:"currentColor"},"&::after":{transform:"rotate(45deg)"},"&::before":{transform:"rotate(-45deg)"}});function Qj(){const{label:n,value:e,onUpdate:t,disabled:i}=Ga(),{popinRef:a,wrapperRef:s,shown:l,show:c,hide:d}=lO(),p=H.useCallback(S=>{S.length&&t(S[0])},[t]),g=H.useCallback(S=>{S.stopPropagation(),t(void 0)},[t]),{getRootProps:v,getInputProps:_,isDragAccept:x}=XD({maxFiles:1,accept:"image/*",onDrop:p,disabled:i});return ee.createElement(Es,{input:!0},ee.createElement(ro,null,n),ee.createElement(jj,null,ee.createElement(qj,{ref:a,hasImage:!!e,onPointerDown:()=>!!e&&c(),onPointerUp:d,style:{backgroundImage:e?`url(${e})`:"none"}}),l&&!!e&&ee.createElement(eM,null,ee.createElement(q3,{onPointerUp:d,style:{cursor:"pointer"}}),ee.createElement(Wj,{ref:s,style:{backgroundImage:`url(${e})`}})),ee.createElement(Yj,v({isDragAccept:x}),ee.createElement("input",_()),ee.createElement(Jj,null,x?"drop image":"click or drop")),ee.createElement(Kj,{onClick:g,disabled:!e})))}var Zj=$t({component:Qj},Xj);const dO=Ur().number(),$j=(n,e)=>Ur().array().length(2).every.number().test(n)&&Ur().schema({min:dO,max:dO}).test(e),lx=n=>({min:n[0],max:n[1]}),pO=(n,{bounds:[e,t]},i)=>{const a=Array.isArray(n)?lx(n):n,s={min:i[0],max:i[1]},{min:l,max:c}=$t($t({},s),a);return[au(Number(l),e,Math.max(e,c)),au(Number(c),Math.min(t,l),t)]};var eY=Object.freeze({__proto__:null,schema:$j,format:lx,sanitize:pO,normalize:({value:n,min:e,max:t})=>{const i={min:e,max:t},a=eD(lx(n),{min:i,max:i}),s=[e,t],l=$t($t({},a),{},{bounds:s});return{value:pO(lx(n),l,n),settings:l}}});const tY=["value","bounds","onDrag"],nY=["bounds"],iY=zt("div",{display:"grid",columnGap:"$colGap",gridTemplateColumns:"auto calc($sizes$numberInputMinWidth * 2 + $space$rowGap)"});function aY(n){let{value:e,bounds:[t,i],onDrag:a}=n,s=qn(n,tY);const l=H.useRef(null),c=H.useRef(null),d=H.useRef(null),p=H.useRef(0),g=Wl("sizes","scrubberWidth"),v=yg(({event:S,first:C,xy:[T],movement:[M],memo:w={}})=>{if(C){const{width:D,left:P}=l.current.getBoundingClientRect();p.current=D-parseFloat(g);const U=S?.target===c.current||S?.target===d.current;w.pos=$_((T-P)/D,t,i);const z=Math.abs(w.pos-e.min)-Math.abs(w.pos-e.max);w.key=z<0||z===0&&w.pos<=e.min?"min":"max",U&&(w.pos=e[w.key])}const B=w.pos+$_(M/p.current,0,i-t);return a({[w.key]:ck(B,s[w.key])}),w}),_=`calc(${Z_(e.min,t,i)} * (100% - ${g} - 8px) + 4px)`,x=`calc(${1-Z_(e.max,t,i)} * (100% - ${g} - 8px) + 4px)`;return ee.createElement(Q3,Ci({ref:l},v()),ee.createElement(K3,null,ee.createElement(Z3,{style:{left:_,right:x}})),ee.createElement(iM,{position:"left",ref:c,style:{left:_}}),ee.createElement(iM,{position:"right",ref:d,style:{right:x}}))}function rY(){const{label:n,displayValue:e,onUpdate:t,settings:i}=Ga(),a=qn(i,nY);return ee.createElement(ee.Fragment,null,ee.createElement(Es,{input:!0},ee.createElement(ro,null,n),ee.createElement(iY,null,ee.createElement(aY,Ci({value:e},i,{onDrag:t})),ee.createElement(rM,{value:e,settings:a,onUpdate:t,innerLabelTrim:0}))))}var sY=$t({component:rY},eY);const oY=()=>{const n=new Map;return{on:(e,t)=>{let i=n.get(e);i===void 0&&(i=new Set,n.set(e,i)),i.add(t)},off:(e,t)=>{const i=n.get(e);i!==void 0&&(i.delete(t),i.size===0&&n.delete(e))},emit:(e,...t)=>{const i=n.get(e);if(i!==void 0)for(const a of i)a(...t)}}},lY=["type","value"],cY=["onChange","transient","onEditStart","onEditEnd"],uY=function(){const e=aj(rj(()=>({data:{}}))),t=oY();this.storeId=b7(),this.useStore=e;const i={},a=new Set;this.getVisiblePaths=()=>{const l=this.getData(),c=Object.keys(l),d=[];Object.entries(i).forEach(([g,v])=>{v.render&&c.some(_=>_.indexOf(g)===0)&&!v.render(this.get)&&d.push(g+".")});const p=[];return a.forEach(g=>{g in l&&l[g].__refCount>0&&d.every(v=>g.indexOf(v)===-1)&&(!l[g].render||l[g].render(this.get))&&p.push(g)}),p},this.setOrderedPaths=l=>{l.forEach(c=>a.add(c))},this.orderPaths=l=>(this.setOrderedPaths(l),l),this.disposePaths=l=>{e.setState(c=>{const d=c.data;return l.forEach(p=>{if(p in d){const g=d[p];g.__refCount--,g.__refCount===0&&g.type in ru&&delete d[p]}}),{data:d}})},this.dispose=()=>{e.setState(()=>({data:{}}))},this.getFolderSettings=l=>i[l]||{},this.getData=()=>e.getState().data,this.addData=(l,c)=>{e.setState(d=>{const p=d.data;return Object.entries(l).forEach(([g,v])=>{let _=p[g];if(_){const{type:x,value:S}=v,C=qn(v,lY);x!==_.type?jl(ki.INPUT_TYPE_OVERRIDE,g,_.type,x):((_.__refCount===0||c)&&Object.assign(_,C),_.__refCount++)}else p[g]=$t($t({},v),{},{__refCount:1})}),{data:p}})},this.setValueAtPath=(l,c,d)=>{e.setState(p=>{const g=p.data;return B3(g[l],c,l,this,d),{data:g}})},this.setSettingsAtPath=(l,c)=>{e.setState(d=>{const p=d.data;return p[l].settings=$t($t({},p[l].settings),c),{data:p}})},this.disableInputAtPath=(l,c)=>{e.setState(d=>{const p=d.data;return p[l].disabled=c,{data:p}})},this.set=(l,c)=>{e.setState(d=>{const p=d.data;return Object.entries(l).forEach(([g,v])=>{try{B3(p[g],v,void 0,void 0,c)}catch{}}),{data:p}})},this.getInput=l=>{try{return this.getData()[l]}catch{jl(ki.PATH_DOESNT_EXIST,l)}},this.get=l=>{var c;return(c=this.getInput(l))===null||c===void 0?void 0:c.value},this.emitOnEditStart=l=>{t.emit(`onEditStart:${l}`,this.get(l),l,$t($t({},this.getInput(l)),{},{get:this.get}))},this.emitOnEditEnd=l=>{t.emit(`onEditEnd:${l}`,this.get(l),l,$t($t({},this.getInput(l)),{},{get:this.get}))},this.subscribeToEditStart=(l,c)=>{const d=`onEditStart:${l}`;return t.on(d,c),()=>t.off(d,c)},this.subscribeToEditEnd=(l,c)=>{const d=`onEditEnd:${l}`;return t.on(d,c),()=>t.off(d,c)};const s=(l,c,d)=>{const p={};return Object.entries(l).forEach(([g,v])=>{if(g==="")return jl(ki.EMPTY_KEY);let _=kM(c,g);if(v.type===ru.FOLDER){const x=s(v.schema,_,d);Object.assign(p,x),_ in i||(i[_]=v.settings)}else if(g in d)jl(ki.DUPLICATE_KEYS,g,_,d[g].path);else{const x=R7(v,g,_,p);if(x){const{type:S,options:C,input:T}=x,{onChange:M,transient:w,onEditStart:B,onEditEnd:D}=C,P=qn(C,cY);p[_]=$t($t($t({type:S},P),T),{},{fromPanel:!0}),d[g]={path:_,onChange:M,transient:w,onEditStart:B,onEditEnd:D}}else jl(ki.UNKNOWN_INPUT,_,v)}}),p};this.getDataFromSchema=l=>{const c={};return[s(l,"",c),c]}},fY=new uY,mO=n=>"__levaInput"in n,hY=(n,e)=>{const t={},i=e?e.toLowerCase():null;return n.forEach(a=>{const[s,l]=xj(a);(!i||s.toLowerCase().indexOf(i)>-1)&&_j(t,l,{[s]:{__levaInput:!0,path:a}})}),t},dY=["type","label","path","valueKey","value","settings","setValue","disabled"];function pY(n){let{type:e,label:t,path:i,valueKey:a,value:s,settings:l,setValue:c,disabled:d}=n,p=qn(n,dY);const{displayValue:g,onChange:v,onUpdate:_}=W3({type:e,value:s,settings:l,setValue:c}),x=If[e].component;return x?ee.createElement(F3.Provider,{value:$t({key:a,path:i,id:""+i,label:t,displayValue:g,value:s,onChange:v,onUpdate:_,settings:l,setValue:c,disabled:d},p)},ee.createElement(q7,{disabled:d},ee.createElement(x,null))):(jl(ki.NO_COMPONENT_FOR_TYPE,e,i),null)}const mY=zt("button",{display:"block",$reset:"",fontWeight:"$button",height:"$rowHeight",borderStyle:"none",borderRadius:"$sm",backgroundColor:"$elevation1",color:"$highlight1","&:not(:disabled)":{color:"$highlight3",backgroundColor:"$accent2",cursor:"pointer",$hover:"$accent3",$active:"$accent3 $accent1",$focus:""}});function gY({onClick:n,settings:e,label:t}){const i=mg();return ee.createElement(Es,null,ee.createElement(mY,{disabled:e.disabled,onClick:()=>n(i.get)},t))}const vY=zt("div",{$flex:"",justifyContent:"flex-end",gap:"$colGap"}),yY=zt("button",{$reset:"",cursor:"pointer",borderRadius:"$xs","&:hover":{backgroundColor:"$elevation3"}}),_Y=({label:n,opts:e})=>{let t=typeof n=="string"&&n.trim()===""?null:n,i=e;return typeof e.opts=="object"&&(i.label!==void 0&&(t=e.label),i=e.opts),{label:t,opts:i}};function xY(n){const{label:e,opts:t}=_Y(n),i=mg();return ee.createElement(Es,{input:!!e},e&&ee.createElement(ro,null,e),ee.createElement(vY,null,Object.entries(t).map(([a,s])=>ee.createElement(yY,{key:a,onClick:()=>s(i.get)},a))))}const bY=zt("canvas",{height:"$monitorHeight",width:"100%",display:"block",borderRadius:"$sm"}),gO=100;function AY(n,e){n.push(e),n.length>gO&&n.shift()}const SY=H.forwardRef(function({initialValue:n},e){const t=Wl("colors","highlight3"),i=Wl("colors","elevation2"),a=Wl("colors","highlight1"),[s,l]=H.useMemo(()=>[lr(a).alpha(.4).toRgbString(),lr(a).alpha(.1).toRgbString()],[a]),c=H.useRef([n]),d=H.useRef(n),p=H.useRef(n),g=H.useRef(),v=H.useCallback((S,C)=>{if(!S)return;const{width:T,height:M}=S,w=new Path2D,B=T/gO,D=M*.05;for(let z=0;z<c.current.length;z++){const j=Z_(c.current[z],d.current,p.current),L=B*z,F=M-j*(M-D*2)-D;w.lineTo(L,F)}C.clearRect(0,0,T,M);const P=new Path2D(w);P.lineTo(B*(c.current.length+1),M),P.lineTo(0,M),P.lineTo(0,0);const U=C.createLinearGradient(0,0,0,M);U.addColorStop(0,s),U.addColorStop(1,l),C.fillStyle=U,C.fill(P),C.strokeStyle=i,C.lineJoin="round",C.lineWidth=14,C.stroke(w),C.strokeStyle=t,C.lineWidth=2,C.stroke(w)},[t,i,s,l]),[_,x]=nk(v);return H.useImperativeHandle(e,()=>({frame:S=>{(d.current===void 0||S<d.current)&&(d.current=S),(p.current===void 0||S>p.current)&&(p.current=S),AY(c.current,S),g.current=requestAnimationFrame(()=>v(_.current,x.current))}}),[_,x,v]),H.useEffect(()=>()=>cancelAnimationFrame(g.current),[]),ee.createElement(bY,{ref:_})}),vO=n=>Number.isFinite(n)?n.toPrecision(2):n.toString(),MY=H.forwardRef(function({initialValue:n},e){const[t,i]=H.useState(vO(n));return H.useImperativeHandle(e,()=>({frame:a=>i(vO(a))}),[]),ee.createElement("div",null,t)});function yO(n){return typeof n=="function"?n():n.current}function EY({label:n,objectOrFn:e,settings:t}){const i=H.useRef(),a=H.useRef(yO(e));return H.useEffect(()=>{const s=window.setInterval(()=>{var l;document.hidden||(l=i.current)===null||l===void 0||l.frame(yO(e))},t.interval);return()=>window.clearInterval(s)},[e,t.interval]),ee.createElement(Es,{input:!0},ee.createElement(ro,{align:"top"},n),t.graph?ee.createElement(SY,{ref:i,initialValue:a.current}):ee.createElement(MY,{ref:i,initialValue:a.current}))}const TY=["type","label","key"],CY={[ru.BUTTON]:gY,[ru.BUTTON_GROUP]:xY,[ru.MONITOR]:EY},RY=ee.memo(({path:n})=>{const[e,{set:t,setSettings:i,disable:a,storeId:s,emitOnEditStart:l,emitOnEditEnd:c}]=ak(n);if(!e)return null;const{type:d,label:p,key:g}=e,v=qn(e,TY);if(d in ru){const _=CY[d];return ee.createElement(_,Ci({label:p,path:n},v))}return d in If?ee.createElement(pY,Ci({key:s+n,type:d,label:p,storeId:s,path:n,valueKey:g,setValue:t,setSettings:i,disable:a,emitOnEditStart:l,emitOnEditEnd:c},v)):(f7(ki.UNSUPPORTED_INPUT,d,n),null)});function wY({toggle:n,toggled:e,name:t}){return ee.createElement(X7,{onClick:()=>n()},ee.createElement(tM,{toggled:e}),ee.createElement("div",null,t))}const BY=({name:n,path:e,tree:t})=>{const i=mg(),a=kM(e,n),{collapsed:s,color:l}=i.getFolderSettings(a),[c,d]=H.useState(!s),p=H.useRef(null),g=Wl("colors","folderWidgetColor"),v=Wl("colors","folderTextColor");return H.useLayoutEffect(()=>{p.current.style.setProperty("--leva-colors-folderWidgetColor",l||g),p.current.style.setProperty("--leva-colors-folderTextColor",l||v)},[l,g,v]),ee.createElement(tx,{ref:p},ee.createElement(wY,{name:n,toggled:c,toggle:()=>d(_=>!_)}),ee.createElement(_O,{parent:a,tree:t,toggled:c}))},_O=ee.memo(({isRoot:n=!1,fill:e=!1,flat:t=!1,parent:i,tree:a,toggled:s})=>{const{wrapperRef:l,contentRef:c}=Sj(s),d=mg(),p=([v,_])=>{var x;return(mO(_)?(x=d.getInput(_.path))===null||x===void 0?void 0:x.order:d.getFolderSettings(kM(i,v)).order)||0},g=Object.entries(a).sort((v,_)=>p(v)-p(_));return ee.createElement(Z1,{ref:l,isRoot:n,fill:e,flat:t},ee.createElement(X3,{ref:c,isRoot:n,toggled:s},g.map(([v,_])=>mO(_)?ee.createElement(RY,{key:_.path,valueKey:_.valueKey,path:_.path}):ee.createElement(BY,{key:v,name:v,path:i,tree:_}))))}),DY=zt("div",{position:"relative",fontFamily:"$mono",fontSize:"$root",color:"$rootText",backgroundColor:"$elevation1",variants:{fill:{false:{position:"fixed",top:"10px",right:"10px",zIndex:1e3,width:"$rootWidth"},true:{position:"relative",width:"100%"}},flat:{false:{borderRadius:"$lg",boxShadow:"$level1"}},oneLineLabels:{true:{[`${Y3}`]:{gridTemplateColumns:"auto",gridAutoColumns:"minmax(max-content, 1fr)",gridAutoRows:"minmax($sizes$rowHeight), auto)",rowGap:0,columnGap:0,marginTop:"$rowGap"}}},hideTitleBar:{true:{$$titleBarHeight:"0px"},false:{$$titleBarHeight:"$sizes$titleBarHeight"}}},"&,*,*:after,*:before":{boxSizing:"border-box"},"*::selection":{backgroundColor:"$accent2"}}),xO=40,cx=zt("i",{$flexCenter:"",width:xO,userSelect:"none",cursor:"pointer","> svg":{fill:"$highlight1",transition:"transform 350ms ease, fill 250ms ease"},"&:hover > svg":{fill:"$highlight3"},variants:{active:{true:{"> svg":{fill:"$highlight2"}}}}}),OY=zt("div",{display:"flex",alignItems:"stretch",justifyContent:"space-between",height:"$titleBarHeight",variants:{mode:{drag:{cursor:"grab"}}}}),NY=zt("div",{$flex:"",position:"relative",width:"100%",overflow:"hidden",transition:"height 250ms ease",color:"$highlight3",paddingLeft:"$md",[`> ${cx}`]:{height:30},variants:{toggled:{true:{height:30},false:{height:0}}}}),UY=zt("input",{$reset:"",flex:1,position:"relative",height:30,width:"100%",backgroundColor:"transparent",fontSize:"10px",borderRadius:"$root","&:focus":{},"&::placeholder":{color:"$highlight2"}}),LY=zt("div",{touchAction:"none",$flexCenter:"",flex:1,"> svg":{fill:"$highlight1"},color:"$highlight1",variants:{drag:{true:{$draggable:"","> svg":{transition:"fill 250ms ease"},"&:hover":{color:"$highlight3"},"&:hover > svg":{fill:"$highlight3"}}},filterEnabled:{false:{paddingRight:xO}}}}),IY=ee.forwardRef(({setFilter:n,toggle:e},t)=>{const[i,a]=H.useState(""),s=H.useMemo(()=>O3(n,250),[n]),l=()=>{n(""),a("")},c=d=>{const p=d.currentTarget.value;e(!0),a(p)};return H.useEffect(()=>{s(i)},[i,s]),ee.createElement(ee.Fragment,null,ee.createElement(UY,{ref:t,value:i,placeholder:"[Open filter with CMD+SHIFT+L]",onPointerDown:d=>d.stopPropagation(),onChange:c}),ee.createElement(cx,{onClick:()=>l(),style:{visibility:i?"visible":"hidden"}},ee.createElement("svg",{xmlns:"http://www.w3.org/2000/svg",height:"14",width:"14",viewBox:"0 0 20 20",fill:"currentColor"},ee.createElement("path",{fillRule:"evenodd",d:"M10 18a8 8 0 100-16 8 8 0 000 16zM8.707 7.293a1 1 0 00-1.414 1.414L8.586 10l-1.293 1.293a1 1 0 101.414 1.414L10 11.414l1.293 1.293a1 1 0 001.414-1.414L11.414 10l1.293-1.293a1 1 0 00-1.414-1.414L10 8.586 8.707 7.293z",clipRule:"evenodd"}))))});function PY({setFilter:n,onDrag:e,onDragStart:t,onDragEnd:i,toggle:a,toggled:s,title:l,drag:c,filterEnabled:d,from:p}){const[g,v]=H.useState(!1),_=H.useRef(null);H.useEffect(()=>{var S,C;g?(S=_.current)===null||S===void 0||S.focus():(C=_.current)===null||C===void 0||C.blur()},[g]);const x=yg(({offset:[S,C],first:T,last:M})=>{e({x:S,y:C}),T&&t({x:S,y:C}),M&&i({x:S,y:C})},{filterTaps:!0,from:({offset:[S,C]})=>[p?.x||S,p?.y||C]});return H.useEffect(()=>{const S=C=>{C.key==="L"&&C.shiftKey&&C.metaKey&&v(T=>!T)};return window.addEventListener("keydown",S),()=>window.removeEventListener("keydown",S)},[]),ee.createElement(ee.Fragment,null,ee.createElement(OY,{mode:c?"drag":void 0},ee.createElement(cx,{active:!s,onClick:()=>a()},ee.createElement(tM,{toggled:s,width:12,height:8})),ee.createElement(LY,Ci({},c?x():{},{drag:c,filterEnabled:d}),l===void 0&&c?ee.createElement("svg",{width:"20",height:"10",viewBox:"0 0 28 14",xmlns:"http://www.w3.org/2000/svg"},ee.createElement("circle",{cx:"2",cy:"2",r:"2"}),ee.createElement("circle",{cx:"14",cy:"2",r:"2"}),ee.createElement("circle",{cx:"26",cy:"2",r:"2"}),ee.createElement("circle",{cx:"2",cy:"12",r:"2"}),ee.createElement("circle",{cx:"14",cy:"12",r:"2"}),ee.createElement("circle",{cx:"26",cy:"12",r:"2"})):l),d&&ee.createElement(cx,{active:g,onClick:()=>v(S=>!S)},ee.createElement("svg",{xmlns:"http://www.w3.org/2000/svg",height:"20",viewBox:"0 0 20 20"},ee.createElement("path",{d:"M9 9a2 2 0 114 0 2 2 0 01-4 0z"}),ee.createElement("path",{fillRule:"evenodd",d:"M10 18a8 8 0 100-16 8 8 0 000 16zm1-13a4 4 0 00-3.446 6.032l-2.261 2.26a1 1 0 101.414 1.415l2.261-2.261A4 4 0 1011 5z",clipRule:"evenodd"})))),ee.createElement(NY,{toggled:g},ee.createElement(IY,{ref:_,setFilter:n,toggle:a})))}const FY=["store","hidden","theme","collapsed"];function zY(n){let{store:e,hidden:t=!1,theme:i,collapsed:a=!1}=n,s=qn(n,FY);const l=Aj(()=>F7(i),[i]),[c,d]=H.useState(!a),p=typeof a=="object"?!a.collapsed:c,g=H.useMemo(()=>typeof a=="object"?v=>{typeof v=="function"?a.onChange(!v(!a.collapsed)):a.onChange(!v)}:d,[a]);return!e||t?null:ee.createElement(K1.Provider,{value:l},ee.createElement(HY,Ci({store:e},s,{toggled:p,setToggle:g,rootClass:l.className})))}const HY=ee.memo(({store:n,rootClass:e,fill:t=!1,flat:i=!1,neverHide:a=!1,oneLineLabels:s=!1,titleBar:l={title:void 0,drag:!0,filter:!0,position:void 0,onDrag:void 0,onDragStart:void 0,onDragEnd:void 0},hideCopyButton:c=!1,toggled:d,setToggle:p})=>{var g,v;const _=Mj(n),[x,S]=H.useState(""),C=H.useMemo(()=>hY(_,x),[_,x]),[T,M]=J3(),w=a||_.length>0,B=typeof l=="object"&&l.title||void 0,D=typeof l=="object"&&(g=l.drag)!==null&&g!==void 0?g:!0,P=typeof l=="object"&&(v=l.filter)!==null&&v!==void 0?v:!0,U=typeof l=="object"&&l.position||void 0,z=typeof l=="object"&&l.onDrag||void 0,j=typeof l=="object"&&l.onDragStart||void 0,L=typeof l=="object"&&l.onDragEnd||void 0;return ee.useEffect(()=>{M({x:U?.x,y:U?.y})},[U,M]),P7(),ee.createElement(a7,null,ee.createElement(H3.Provider,{value:{hideCopyButton:c}},ee.createElement(DY,{ref:T,className:e,fill:t,flat:i,oneLineLabels:s,hideTitleBar:!l,style:{display:w?"block":"none"}},l&&ee.createElement(PY,{onDrag:F=>{M(F),z?.(F)},onDragStart:F=>j?.(F),onDragEnd:F=>L?.(F),setFilter:S,toggle:F=>p(W=>F??!W),toggled:d,title:B,drag:D,filterEnabled:P,from:U}),w&&ee.createElement(z3.Provider,{value:n},ee.createElement(_O,{isRoot:!0,fill:t,flat:i,tree:C,toggled:d})))))}),GY=["isRoot"];function VY(n){let{isRoot:e=!1}=n,t=qn(n,GY);return H.useEffect(()=>()=>{},[e]),ee.createElement(zY,Ci({store:fY},t))}Yl(ql.SELECT,vk),Yl(ql.IMAGE,Zj),Yl(ql.NUMBER,fk),Yl(ql.COLOR,Nj),Yl(ql.STRING,Sk),Yl(ql.BOOLEAN,Rk),Yl(ql.INTERVAL,sY),Yl(ql.VECTOR3D,Lj),Yl(ql.VECTOR2D,kj);const kY=()=>{const{active:n,progress:e}=FG(),t=H.useRef(!1);return H.useEffect(()=>{if(console.log(e),!n&&e===100&&!t.current){t.current=!0;const i="R3F_ASSETS_LOADED";window.dispatchEvent(new CustomEvent(i)),typeof window<"u"&&window.self!==window.top&&window.parent.postMessage({type:i},"*"),console.log("Scene Assets Loaded")}},[n,e]),null},XY=()=>dt.jsx("div",{style:{height:"3000px"},children:dt.jsx("div",{style:{position:"fixed",top:0,left:0,width:"100vw",height:"100vh"},children:dt.jsxs(UG,{className:"tab-canvas",dpr:[1,1.5],flat:!0,gl:{antialias:!0,outputColorSpace:Aa,powerPreference:"high-performance",stencil:!1,depth:!0},children:[dt.jsx(VY,{hidden:!0}),dt.jsx("color",{attach:"background",args:["#F7E5CD"]}),dt.jsx("ambientLight",{intensity:0}),dt.jsx(Y8,{}),dt.jsx(j8,{}),dt.jsx(kY,{})]})})});class jY extends HTMLElement{connectedCallback(){let e=this._root;e=AN.createRoot(this),e.render(dt.jsx(H.StrictMode,{children:dt.jsx(XY,{})}))}disconnectCallback(){this._root.unmount()}}customElements.get("tab-initial-scene")||customElements.define("tab-initial-scene",jY)})();
